var ur=Object.defineProperty;var fr=(e,t,a)=>t in e?ur(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;var Je=(e,t,a)=>(fr(e,typeof t!="symbol"?t+"":t,a),a),ai=(e,t,a)=>{if(!t.has(e))throw TypeError("Cannot "+a)};var s=(e,t,a)=>(ai(e,t,"read from private field"),a?a.call(e):t.get(e)),j=(e,t,a)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,a)},he=(e,t,a,i)=>(ai(e,t,"write to private field"),i?i.call(e,a):t.set(e,a),a);var ft=(e,t,a,i)=>({set _(f){he(e,t,f,a)},get _(){return s(e,t,i)}}),z=(e,t,a)=>(ai(e,t,"access private method"),a);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const f of document.querySelectorAll('link[rel="modulepreload"]'))i(f);new MutationObserver(f=>{for(const I of f)if(I.type==="childList")for(const L of I.addedNodes)L.tagName==="LINK"&&L.rel==="modulepreload"&&i(L)}).observe(document,{childList:!0,subtree:!0});function a(f){const I={};return f.integrity&&(I.integrity=f.integrity),f.referrerPolicy&&(I.referrerPolicy=f.referrerPolicy),f.crossOrigin==="use-credentials"?I.credentials="include":f.crossOrigin==="anonymous"?I.credentials="omit":I.credentials="same-origin",I}function i(f){if(f.ep)return;f.ep=!0;const I=a(f);fetch(f.href,I)}})();const main="";/**
* @vue/shared v3.4.38
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function makeMap(e,t){const a=new Set(e.split(","));return t?i=>a.has(i.toLowerCase()):i=>a.has(i)}const EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,isOn=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),isModelListener=e=>e.startsWith("onUpdate:"),extend=Object.assign,remove=(e,t)=>{const a=e.indexOf(t);a>-1&&e.splice(a,1)},hasOwnProperty$1=Object.prototype.hasOwnProperty,hasOwn=(e,t)=>hasOwnProperty$1.call(e,t),isArray$1=Array.isArray,isMap=e=>toTypeString(e)==="[object Map]",isSet=e=>toTypeString(e)==="[object Set]",isFunction=e=>typeof e=="function",isString=e=>typeof e=="string",isSymbol=e=>typeof e=="symbol",isObject=e=>e!==null&&typeof e=="object",isPromise=e=>(isObject(e)||isFunction(e))&&isFunction(e.then)&&isFunction(e.catch),objectToString=Object.prototype.toString,toTypeString=e=>objectToString.call(e),toRawType=e=>toTypeString(e).slice(8,-1),isPlainObject=e=>toTypeString(e)==="[object Object]",isIntegerKey=e=>isString(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=e=>{const t=Object.create(null);return a=>t[a]||(t[a]=e(a))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction(e=>e.replace(camelizeRE,(t,a)=>a?a.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(e=>e.replace(hyphenateRE,"-$1").toLowerCase()),capitalize=cacheStringFunction(e=>e.charAt(0).toUpperCase()+e.slice(1)),toHandlerKey=cacheStringFunction(e=>e?`on${capitalize(e)}`:""),hasChanged=(e,t)=>!Object.is(e,t),invokeArrayFns=(e,...t)=>{for(let a=0;a<e.length;a++)e[a](...t)},def=(e,t,a,i=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:i,value:a})},looseToNumber=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function normalizeStyle(e){if(isArray$1(e)){const t={};for(let a=0;a<e.length;a++){const i=e[a],f=isString(i)?parseStringStyle(i):normalizeStyle(i);if(f)for(const I in f)t[I]=f[I]}return t}else if(isString(e)||isObject(e))return e}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*[^]*?\*\//g;function parseStringStyle(e){const t={};return e.replace(styleCommentRE,"").split(listDelimiterRE).forEach(a=>{if(a){const i=a.split(propertyDelimiterRE);i.length>1&&(t[i[0].trim()]=i[1].trim())}}),t}function normalizeClass(e){let t="";if(isString(e))t=e;else if(isArray$1(e))for(let a=0;a<e.length;a++){const i=normalizeClass(e[a]);i&&(t+=i+" ")}else if(isObject(e))for(const a in e)e[a]&&(t+=a+" ");return t.trim()}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(e){return!!e||e===""}/**
* @vue/reactivity v3.4.38
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let activeEffectScope;class EffectScope{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=activeEffectScope,!t&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const a=activeEffectScope;try{return activeEffectScope=this,t()}finally{activeEffectScope=a}}}on(){activeEffectScope=this}off(){activeEffectScope=this.parent}stop(t){if(this._active){let a,i;for(a=0,i=this.effects.length;a<i;a++)this.effects[a].stop();for(a=0,i=this.cleanups.length;a<i;a++)this.cleanups[a]();if(this.scopes)for(a=0,i=this.scopes.length;a<i;a++)this.scopes[a].stop(!0);if(!this.detached&&this.parent&&!t){const f=this.parent.scopes.pop();f&&f!==this&&(this.parent.scopes[this.index]=f,f.index=this.index)}this.parent=void 0,this._active=!1}}}function recordEffectScope(e,t=activeEffectScope){t&&t.active&&t.effects.push(e)}function getCurrentScope(){return activeEffectScope}let activeEffect;class ReactiveEffect{constructor(t,a,i,f){this.fn=t,this.trigger=a,this.scheduler=i,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,recordEffectScope(this,f)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,pauseTracking();for(let t=0;t<this._depsLength;t++){const a=this.deps[t];if(a.computed&&(triggerComputed(a.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),resetTracking()}return this._dirtyLevel>=4}set dirty(t){this._dirtyLevel=t?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let t=shouldTrack,a=activeEffect;try{return shouldTrack=!0,activeEffect=this,this._runnings++,preCleanupEffect(this),this.fn()}finally{postCleanupEffect(this),this._runnings--,activeEffect=a,shouldTrack=t}}stop(){this.active&&(preCleanupEffect(this),postCleanupEffect(this),this.onStop&&this.onStop(),this.active=!1)}}function triggerComputed(e){return e.value}function preCleanupEffect(e){e._trackId++,e._depsLength=0}function postCleanupEffect(e){if(e.deps.length>e._depsLength){for(let t=e._depsLength;t<e.deps.length;t++)cleanupDepEffect(e.deps[t],e);e.deps.length=e._depsLength}}function cleanupDepEffect(e,t){const a=e.get(t);a!==void 0&&t._trackId!==a&&(e.delete(t),e.size===0&&e.cleanup())}let shouldTrack=!0,pauseScheduleStack=0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const e=trackStack.pop();shouldTrack=e===void 0?!0:e}function pauseScheduling(){pauseScheduleStack++}function resetScheduling(){for(pauseScheduleStack--;!pauseScheduleStack&&queueEffectSchedulers.length;)queueEffectSchedulers.shift()()}function trackEffect(e,t,a){if(t.get(e)!==e._trackId){t.set(e,e._trackId);const i=e.deps[e._depsLength];i!==t?(i&&cleanupDepEffect(i,e),e.deps[e._depsLength++]=t):e._depsLength++}}const queueEffectSchedulers=[];function triggerEffects(e,t,a){pauseScheduling();for(const i of e.keys()){let f;i._dirtyLevel<t&&(f??(f=e.get(i)===i._trackId))&&(i._shouldSchedule||(i._shouldSchedule=i._dirtyLevel===0),i._dirtyLevel=t),i._shouldSchedule&&(f??(f=e.get(i)===i._trackId))&&(i.trigger(),(!i._runnings||i.allowRecurse)&&i._dirtyLevel!==2&&(i._shouldSchedule=!1,i.scheduler&&queueEffectSchedulers.push(i.scheduler)))}resetScheduling()}const createDep=(e,t)=>{const a=new Map;return a.cleanup=e,a.computed=t,a},targetMap=new WeakMap,ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol("");function track(e,t,a){if(shouldTrack&&activeEffect){let i=targetMap.get(e);i||targetMap.set(e,i=new Map);let f=i.get(a);f||i.set(a,f=createDep(()=>i.delete(a))),trackEffect(activeEffect,f)}}function trigger(e,t,a,i,f,I){const L=targetMap.get(e);if(!L)return;let _=[];if(t==="clear")_=[...L.values()];else if(a==="length"&&isArray$1(e)){const m=Number(i);L.forEach((n,c)=>{(c==="length"||!isSymbol(c)&&c>=m)&&_.push(n)})}else switch(a!==void 0&&_.push(L.get(a)),t){case"add":isArray$1(e)?isIntegerKey(a)&&_.push(L.get("length")):(_.push(L.get(ITERATE_KEY)),isMap(e)&&_.push(L.get(MAP_KEY_ITERATE_KEY)));break;case"delete":isArray$1(e)||(_.push(L.get(ITERATE_KEY)),isMap(e)&&_.push(L.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap(e)&&_.push(L.get(ITERATE_KEY));break}pauseScheduling();for(const m of _)m&&triggerEffects(m,4);resetScheduling()}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(isSymbol)),arrayInstrumentations=createArrayInstrumentations();function createArrayInstrumentations(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...a){const i=toRaw(this);for(let I=0,L=this.length;I<L;I++)track(i,"get",I+"");const f=i[t](...a);return f===-1||f===!1?i[t](...a.map(toRaw)):f}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...a){pauseTracking(),pauseScheduling();const i=toRaw(this)[t].apply(this,a);return resetScheduling(),resetTracking(),i}}),e}function hasOwnProperty(e){isSymbol(e)||(e=String(e));const t=toRaw(this);return track(t,"has",e),t.hasOwnProperty(e)}class BaseReactiveHandler{constructor(t=!1,a=!1){this._isReadonly=t,this._isShallow=a}get(t,a,i){const f=this._isReadonly,I=this._isShallow;if(a==="__v_isReactive")return!f;if(a==="__v_isReadonly")return f;if(a==="__v_isShallow")return I;if(a==="__v_raw")return i===(f?I?shallowReadonlyMap:readonlyMap:I?shallowReactiveMap:reactiveMap).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(i)?t:void 0;const L=isArray$1(t);if(!f){if(L&&hasOwn(arrayInstrumentations,a))return Reflect.get(arrayInstrumentations,a,i);if(a==="hasOwnProperty")return hasOwnProperty}const _=Reflect.get(t,a,i);return(isSymbol(a)?builtInSymbols.has(a):isNonTrackableKeys(a))||(f||track(t,"get",a),I)?_:isRef(_)?L&&isIntegerKey(a)?_:_.value:isObject(_)?f?readonly(_):reactive(_):_}}class MutableReactiveHandler extends BaseReactiveHandler{constructor(t=!1){super(!1,t)}set(t,a,i,f){let I=t[a];if(!this._isShallow){const m=isReadonly(I);if(!isShallow(i)&&!isReadonly(i)&&(I=toRaw(I),i=toRaw(i)),!isArray$1(t)&&isRef(I)&&!isRef(i))return m?!1:(I.value=i,!0)}const L=isArray$1(t)&&isIntegerKey(a)?Number(a)<t.length:hasOwn(t,a),_=Reflect.set(t,a,i,f);return t===toRaw(f)&&(L?hasChanged(i,I)&&trigger(t,"set",a,i):trigger(t,"add",a,i)),_}deleteProperty(t,a){const i=hasOwn(t,a);t[a];const f=Reflect.deleteProperty(t,a);return f&&i&&trigger(t,"delete",a,void 0),f}has(t,a){const i=Reflect.has(t,a);return(!isSymbol(a)||!builtInSymbols.has(a))&&track(t,"has",a),i}ownKeys(t){return track(t,"iterate",isArray$1(t)?"length":ITERATE_KEY),Reflect.ownKeys(t)}}class ReadonlyReactiveHandler extends BaseReactiveHandler{constructor(t=!1){super(!0,t)}set(t,a){return!0}deleteProperty(t,a){return!0}}const mutableHandlers=new MutableReactiveHandler,readonlyHandlers=new ReadonlyReactiveHandler,shallowReactiveHandlers=new MutableReactiveHandler(!0),shallowReadonlyHandlers=new ReadonlyReactiveHandler(!0),toShallow=e=>e,getProto=e=>Reflect.getPrototypeOf(e);function get(e,t,a=!1,i=!1){e=e.__v_raw;const f=toRaw(e),I=toRaw(t);a||(hasChanged(t,I)&&track(f,"get",t),track(f,"get",I));const{has:L}=getProto(f),_=i?toShallow:a?toReadonly:toReactive;if(L.call(f,t))return _(e.get(t));if(L.call(f,I))return _(e.get(I));e!==f&&e.get(t)}function has(e,t=!1){const a=this.__v_raw,i=toRaw(a),f=toRaw(e);return t||(hasChanged(e,f)&&track(i,"has",e),track(i,"has",f)),e===f?a.has(e):a.has(e)||a.has(f)}function size(e,t=!1){return e=e.__v_raw,!t&&track(toRaw(e),"iterate",ITERATE_KEY),Reflect.get(e,"size",e)}function add(e,t=!1){!t&&!isShallow(e)&&!isReadonly(e)&&(e=toRaw(e));const a=toRaw(this);return getProto(a).has.call(a,e)||(a.add(e),trigger(a,"add",e,e)),this}function set(e,t,a=!1){!a&&!isShallow(t)&&!isReadonly(t)&&(t=toRaw(t));const i=toRaw(this),{has:f,get:I}=getProto(i);let L=f.call(i,e);L||(e=toRaw(e),L=f.call(i,e));const _=I.call(i,e);return i.set(e,t),L?hasChanged(t,_)&&trigger(i,"set",e,t):trigger(i,"add",e,t),this}function deleteEntry(e){const t=toRaw(this),{has:a,get:i}=getProto(t);let f=a.call(t,e);f||(e=toRaw(e),f=a.call(t,e)),i&&i.call(t,e);const I=t.delete(e);return f&&trigger(t,"delete",e,void 0),I}function clear(){const e=toRaw(this),t=e.size!==0,a=e.clear();return t&&trigger(e,"clear",void 0,void 0),a}function createForEach(e,t){return function(i,f){const I=this,L=I.__v_raw,_=toRaw(L),m=t?toShallow:e?toReadonly:toReactive;return!e&&track(_,"iterate",ITERATE_KEY),L.forEach((n,c)=>i.call(f,m(n),m(c),I))}}function createIterableMethod(e,t,a){return function(...i){const f=this.__v_raw,I=toRaw(f),L=isMap(I),_=e==="entries"||e===Symbol.iterator&&L,m=e==="keys"&&L,n=f[e](...i),c=a?toShallow:t?toReadonly:toReactive;return!t&&track(I,"iterate",m?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:C,done:A}=n.next();return A?{value:C,done:A}:{value:_?[c(C[0]),c(C[1])]:c(C),done:A}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function createInstrumentations(){const e={get(I){return get(this,I)},get size(){return size(this)},has,add,set,delete:deleteEntry,clear,forEach:createForEach(!1,!1)},t={get(I){return get(this,I,!1,!0)},get size(){return size(this)},has,add(I){return add.call(this,I,!0)},set(I,L){return set.call(this,I,L,!0)},delete:deleteEntry,clear,forEach:createForEach(!1,!0)},a={get(I){return get(this,I,!0)},get size(){return size(this,!0)},has(I){return has.call(this,I,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!1)},i={get(I){return get(this,I,!0,!0)},get size(){return size(this,!0)},has(I){return has.call(this,I,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(I=>{e[I]=createIterableMethod(I,!1,!1),a[I]=createIterableMethod(I,!0,!1),t[I]=createIterableMethod(I,!1,!0),i[I]=createIterableMethod(I,!0,!0)}),[e,a,t,i]}const[mutableInstrumentations,readonlyInstrumentations,shallowInstrumentations,shallowReadonlyInstrumentations]=createInstrumentations();function createInstrumentationGetter(e,t){const a=t?e?shallowReadonlyInstrumentations:shallowInstrumentations:e?readonlyInstrumentations:mutableInstrumentations;return(i,f,I)=>f==="__v_isReactive"?!e:f==="__v_isReadonly"?e:f==="__v_raw"?i:Reflect.get(hasOwn(a,f)&&f in i?a:i,f,I)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},shallowReadonlyCollectionHandlers={get:createInstrumentationGetter(!0,!0)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(e){return e.__v_skip||!Object.isExtensible(e)?0:targetTypeMap(toRawType(e))}function reactive(e){return isReadonly(e)?e:createReactiveObject(e,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(e){return createReactiveObject(e,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(e){return createReactiveObject(e,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function shallowReadonly(e){return createReactiveObject(e,!0,shallowReadonlyHandlers,shallowReadonlyCollectionHandlers,shallowReadonlyMap)}function createReactiveObject(e,t,a,i,f){if(!isObject(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const I=f.get(e);if(I)return I;const L=getTargetType(e);if(L===0)return e;const _=new Proxy(e,L===2?i:a);return f.set(e,_),_}function isReactive(e){return isReadonly(e)?isReactive(e.__v_raw):!!(e&&e.__v_isReactive)}function isReadonly(e){return!!(e&&e.__v_isReadonly)}function isShallow(e){return!!(e&&e.__v_isShallow)}function isProxy(e){return e?!!e.__v_raw:!1}function toRaw(e){const t=e&&e.__v_raw;return t?toRaw(t):e}function markRaw(e){return Object.isExtensible(e)&&def(e,"__v_skip",!0),e}const toReactive=e=>isObject(e)?reactive(e):e,toReadonly=e=>isObject(e)?readonly(e):e;class ComputedRefImpl{constructor(t,a,i,f){this.getter=t,this._setter=a,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new ReactiveEffect(()=>t(this._value),()=>triggerRefValue(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!f,this.__v_isReadonly=i}get value(){const t=toRaw(this);return(!t._cacheable||t.effect.dirty)&&hasChanged(t._value,t._value=t.effect.run())&&triggerRefValue(t,4),trackRefValue(t),t.effect._dirtyLevel>=2&&triggerRefValue(t,2),t._value}set value(t){this._setter(t)}get _dirty(){return this.effect.dirty}set _dirty(t){this.effect.dirty=t}}function computed$1(e,t,a=!1){let i,f;const I=isFunction(e);return I?(i=e,f=NOOP):(i=e.get,f=e.set),new ComputedRefImpl(i,f,I||!f,a)}function trackRefValue(e){var t;shouldTrack&&activeEffect&&(e=toRaw(e),trackEffect(activeEffect,(t=e.dep)!=null?t:e.dep=createDep(()=>e.dep=void 0,e instanceof ComputedRefImpl?e:void 0)))}function triggerRefValue(e,t=4,a,i){e=toRaw(e);const f=e.dep;f&&triggerEffects(f,t)}function isRef(e){return!!(e&&e.__v_isRef===!0)}function ref(e){return createRef(e,!1)}function shallowRef(e){return createRef(e,!0)}function createRef(e,t){return isRef(e)?e:new RefImpl(e,t)}class RefImpl{constructor(t,a){this.__v_isShallow=a,this.dep=void 0,this.__v_isRef=!0,this._rawValue=a?t:toRaw(t),this._value=a?t:toReactive(t)}get value(){return trackRefValue(this),this._value}set value(t){const a=this.__v_isShallow||isShallow(t)||isReadonly(t);t=a?t:toRaw(t),hasChanged(t,this._rawValue)&&(this._rawValue,this._rawValue=t,this._value=a?t:toReactive(t),triggerRefValue(this,4))}}function unref(e){return isRef(e)?e.value:e}const shallowUnwrapHandlers={get:(e,t,a)=>unref(Reflect.get(e,t,a)),set:(e,t,a,i)=>{const f=e[t];return isRef(f)&&!isRef(a)?(f.value=a,!0):Reflect.set(e,t,a,i)}};function proxyRefs(e){return isReactive(e)?e:new Proxy(e,shallowUnwrapHandlers)}/**
* @vue/runtime-core v3.4.38
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const stack=[];let isWarning=!1;function warn$1(e,...t){if(isWarning)return;isWarning=!0,pauseTracking();const a=stack.length?stack[stack.length-1].component:null,i=a&&a.appContext.config.warnHandler,f=getComponentTrace();if(i)callWithErrorHandling(i,a,11,[e+t.map(I=>{var L,_;return(_=(L=I.toString)==null?void 0:L.call(I))!=null?_:JSON.stringify(I)}).join(""),a&&a.proxy,f.map(({vnode:I})=>`at <${formatComponentName(a,I.type)}>`).join(`
`),f]);else{const I=[`[Vue warn]: ${e}`,...t];f.length&&I.push(`
`,...formatTrace(f)),console.warn(...I)}resetTracking(),isWarning=!1}function getComponentTrace(){let e=stack[stack.length-1];if(!e)return[];const t=[];for(;e;){const a=t[0];a&&a.vnode===e?a.recurseCount++:t.push({vnode:e,recurseCount:0});const i=e.component&&e.component.parent;e=i&&i.vnode}return t}function formatTrace(e){const t=[];return e.forEach((a,i)=>{t.push(...i===0?[]:[`
`],...formatTraceEntry(a))}),t}function formatTraceEntry({vnode:e,recurseCount:t}){const a=t>0?`... (${t} recursive calls)`:"",i=e.component?e.component.parent==null:!1,f=` at <${formatComponentName(e.component,e.type,i)}`,I=">"+a;return e.props?[f,...formatProps(e.props),I]:[f+I]}function formatProps(e){const t=[],a=Object.keys(e);return a.slice(0,3).forEach(i=>{t.push(...formatProp(i,e[i]))}),a.length>3&&t.push(" ..."),t}function formatProp(e,t,a){return isString(t)?(t=JSON.stringify(t),a?t:[`${e}=${t}`]):typeof t=="number"||typeof t=="boolean"||t==null?a?t:[`${e}=${t}`]:isRef(t)?(t=formatProp(e,toRaw(t.value),!0),a?t:[`${e}=Ref<`,t,">"]):isFunction(t)?[`${e}=fn${t.name?`<${t.name}>`:""}`]:(t=toRaw(t),a?t:[`${e}=`,t])}function callWithErrorHandling(e,t,a,i){try{return i?e(...i):e()}catch(f){handleError(f,t,a)}}function callWithAsyncErrorHandling(e,t,a,i){if(isFunction(e)){const f=callWithErrorHandling(e,t,a,i);return f&&isPromise(f)&&f.catch(I=>{handleError(I,t,a)}),f}if(isArray$1(e)){const f=[];for(let I=0;I<e.length;I++)f.push(callWithAsyncErrorHandling(e[I],t,a,i));return f}}function handleError(e,t,a,i=!0){const f=t?t.vnode:null;if(t){let I=t.parent;const L=t.proxy,_=`https://vuejs.org/error-reference/#runtime-${a}`;for(;I;){const n=I.ec;if(n){for(let c=0;c<n.length;c++)if(n[c](e,L,_)===!1)return}I=I.parent}const m=t.appContext.config.errorHandler;if(m){pauseTracking(),callWithErrorHandling(m,null,10,[e,L,_]),resetTracking();return}}logError(e,a,f,i)}function logError(e,t,a,i=!0){console.error(e)}let isFlushing=!1,isFlushPending=!1;const queue=[];let flushIndex=0;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick(e){const t=currentFlushPromise||resolvedPromise;return e?t.then(this?e.bind(this):e):t}function findInsertionIndex$1(e){let t=flushIndex+1,a=queue.length;for(;t<a;){const i=t+a>>>1,f=queue[i],I=getId(f);I<e||I===e&&f.pre?t=i+1:a=i}return t}function queueJob(e){(!queue.length||!queue.includes(e,isFlushing&&e.allowRecurse?flushIndex+1:flushIndex))&&(e.id==null?queue.push(e):queue.splice(findInsertionIndex$1(e.id),0,e),queueFlush())}function queueFlush(){!isFlushing&&!isFlushPending&&(isFlushPending=!0,currentFlushPromise=resolvedPromise.then(flushJobs))}function invalidateJob(e){const t=queue.indexOf(e);t>flushIndex&&queue.splice(t,1)}function queuePostFlushCb(e){isArray$1(e)?pendingPostFlushCbs.push(...e):(!activePostFlushCbs||!activePostFlushCbs.includes(e,e.allowRecurse?postFlushIndex+1:postFlushIndex))&&pendingPostFlushCbs.push(e),queueFlush()}function flushPreFlushCbs(e,t,a=isFlushing?flushIndex+1:0){for(;a<queue.length;a++){const i=queue[a];if(i&&i.pre){if(e&&i.id!==e.uid)continue;queue.splice(a,1),a--,i()}}}function flushPostFlushCbs(e){if(pendingPostFlushCbs.length){const t=[...new Set(pendingPostFlushCbs)].sort((a,i)=>getId(a)-getId(i));if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...t);return}for(activePostFlushCbs=t,postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++){const a=activePostFlushCbs[postFlushIndex];a.active!==!1&&a()}activePostFlushCbs=null,postFlushIndex=0}}const getId=e=>e.id==null?1/0:e.id,comparator=(e,t)=>{const a=getId(e)-getId(t);if(a===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return a};function flushJobs(e){isFlushPending=!1,isFlushing=!0,queue.sort(comparator);const t=NOOP;try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const a=queue[flushIndex];a&&a.active!==!1&&callWithErrorHandling(a,a.i,a.i?15:14)}}finally{flushIndex=0,queue.length=0,flushPostFlushCbs(),isFlushing=!1,currentFlushPromise=null,(queue.length||pendingPostFlushCbs.length)&&flushJobs()}}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(e){const t=currentRenderingInstance;return currentRenderingInstance=e,currentScopeId=e&&e.type.__scopeId||null,t}function pushScopeId(e){currentScopeId=e}function popScopeId(){currentScopeId=null}function withCtx(e,t=currentRenderingInstance,a){if(!t||e._n)return e;const i=(...f)=>{i._d&&setBlockTracking(-1);const I=setCurrentRenderingInstance(t);let L;try{L=e(...f)}finally{setCurrentRenderingInstance(I),i._d&&setBlockTracking(1)}return L};return i._n=!0,i._c=!0,i._d=!0,i}function invokeDirectiveHook(e,t,a,i){const f=e.dirs,I=t&&t.dirs;for(let L=0;L<f.length;L++){const _=f[L];I&&(_.oldValue=I[L].value);let m=_.dir[i];m&&(pauseTracking(),callWithAsyncErrorHandling(m,a,8,[e.el,_,e,t]),resetTracking())}}function setTransitionHooks(e,t){e.shapeFlag&6&&e.component?setTransitionHooks(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}/*! #__NO_SIDE_EFFECTS__ */function defineComponent(e,t){return isFunction(e)?(()=>extend({name:e.name},t,{setup:e}))():e}const isAsyncWrapper=e=>!!e.type.__asyncLoader,isKeepAlive=e=>e.type.__isKeepAlive;function onActivated(e,t){registerKeepAliveHook(e,"a",t)}function onDeactivated(e,t){registerKeepAliveHook(e,"da",t)}function registerKeepAliveHook(e,t,a=currentInstance){const i=e.__wdc||(e.__wdc=()=>{let f=a;for(;f;){if(f.isDeactivated)return;f=f.parent}return e()});if(injectHook(t,i,a),a){let f=a.parent;for(;f&&f.parent;)isKeepAlive(f.parent.vnode)&&injectToKeepAliveRoot(i,t,a,f),f=f.parent}}function injectToKeepAliveRoot(e,t,a,i){const f=injectHook(t,e,i,!0);onUnmounted(()=>{remove(i[t],f)},a)}function injectHook(e,t,a=currentInstance,i=!1){if(a){const f=a[e]||(a[e]=[]),I=t.__weh||(t.__weh=(...L)=>{pauseTracking();const _=setCurrentInstance(a),m=callWithAsyncErrorHandling(t,a,e,L);return _(),resetTracking(),m});return i?f.unshift(I):f.push(I),I}}const createHook=e=>(t,a=currentInstance)=>{(!isInSSRComponentSetup||e==="sp")&&injectHook(e,(...i)=>t(...i),a)},onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(e,t=currentInstance){injectHook("ec",e,t)}const NULL_DYNAMIC_COMPONENT=Symbol.for("v-ndc"),getPublicInstance=e=>e?isStatefulComponent(e)?getComponentPublicInstance(e):getPublicInstance(e.parent):null,publicPropertiesMap=extend(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>getPublicInstance(e.parent),$root:e=>getPublicInstance(e.root),$emit:e=>e.emit,$options:e=>resolveMergedOptions(e),$forceUpdate:e=>e.f||(e.f=()=>{e.effect.dirty=!0,queueJob(e.update)}),$nextTick:e=>e.n||(e.n=nextTick.bind(e.proxy)),$watch:e=>instanceWatch.bind(e)}),hasSetupBinding=(e,t)=>e!==EMPTY_OBJ&&!e.__isScriptSetup&&hasOwn(e,t),PublicInstanceProxyHandlers={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:a,setupState:i,data:f,props:I,accessCache:L,type:_,appContext:m}=e;let n;if(t[0]!=="$"){const E=L[t];if(E!==void 0)switch(E){case 1:return i[t];case 2:return f[t];case 4:return a[t];case 3:return I[t]}else{if(hasSetupBinding(i,t))return L[t]=1,i[t];if(f!==EMPTY_OBJ&&hasOwn(f,t))return L[t]=2,f[t];if((n=e.propsOptions[0])&&hasOwn(n,t))return L[t]=3,I[t];if(a!==EMPTY_OBJ&&hasOwn(a,t))return L[t]=4,a[t];shouldCacheAccess&&(L[t]=0)}}const c=publicPropertiesMap[t];let C,A;if(c)return t==="$attrs"&&track(e.attrs,"get",""),c(e);if((C=_.__cssModules)&&(C=C[t]))return C;if(a!==EMPTY_OBJ&&hasOwn(a,t))return L[t]=4,a[t];if(A=m.config.globalProperties,hasOwn(A,t))return A[t]},set({_:e},t,a){const{data:i,setupState:f,ctx:I}=e;return hasSetupBinding(f,t)?(f[t]=a,!0):i!==EMPTY_OBJ&&hasOwn(i,t)?(i[t]=a,!0):hasOwn(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(I[t]=a,!0)},has({_:{data:e,setupState:t,accessCache:a,ctx:i,appContext:f,propsOptions:I}},L){let _;return!!a[L]||e!==EMPTY_OBJ&&hasOwn(e,L)||hasSetupBinding(t,L)||(_=I[0])&&hasOwn(_,L)||hasOwn(i,L)||hasOwn(publicPropertiesMap,L)||hasOwn(f.config.globalProperties,L)},defineProperty(e,t,a){return a.get!=null?e._.accessCache[t]=0:hasOwn(a,"value")&&this.set(e,t,a.value,null),Reflect.defineProperty(e,t,a)}};function normalizePropsOrEmits(e){return isArray$1(e)?e.reduce((t,a)=>(t[a]=null,t),{}):e}let shouldCacheAccess=!0;function applyOptions(e){const t=resolveMergedOptions(e),a=e.proxy,i=e.ctx;shouldCacheAccess=!1,t.beforeCreate&&callHook(t.beforeCreate,e,"bc");const{data:f,computed:I,methods:L,watch:_,provide:m,inject:n,created:c,beforeMount:C,mounted:A,beforeUpdate:E,updated:r,activated:g,deactivated:b,beforeDestroy:P,beforeUnmount:R,destroyed:v,unmounted:T,render:o,renderTracked:l,renderTriggered:S,errorCaptured:y,serverPrefetch:w,expose:N,inheritAttrs:D,components:G,directives:le,filters:H}=t;if(n&&resolveInjections(n,i,null),L)for(const Q in L){const K=L[Q];isFunction(K)&&(i[Q]=K.bind(a))}if(f){const Q=f.call(a,a);isObject(Q)&&(e.data=reactive(Q))}if(shouldCacheAccess=!0,I)for(const Q in I){const K=I[Q],ue=isFunction(K)?K.bind(a,a):isFunction(K.get)?K.get.bind(a,a):NOOP,se=!isFunction(K)&&isFunction(K.set)?K.set.bind(a):NOOP,Ce=computed({get:ue,set:se});Object.defineProperty(i,Q,{enumerable:!0,configurable:!0,get:()=>Ce.value,set:Me=>Ce.value=Me})}if(_)for(const Q in _)createWatcher(_[Q],i,a,Q);if(m){const Q=isFunction(m)?m.call(a):m;Reflect.ownKeys(Q).forEach(K=>{provide(K,Q[K])})}c&&callHook(c,e,"c");function re(Q,K){isArray$1(K)?K.forEach(ue=>Q(ue.bind(a))):K&&Q(K.bind(a))}if(re(onBeforeMount,C),re(onMounted,A),re(onBeforeUpdate,E),re(onUpdated,r),re(onActivated,g),re(onDeactivated,b),re(onErrorCaptured,y),re(onRenderTracked,l),re(onRenderTriggered,S),re(onBeforeUnmount,R),re(onUnmounted,T),re(onServerPrefetch,w),isArray$1(N))if(N.length){const Q=e.exposed||(e.exposed={});N.forEach(K=>{Object.defineProperty(Q,K,{get:()=>a[K],set:ue=>a[K]=ue})})}else e.exposed||(e.exposed={});o&&e.render===NOOP&&(e.render=o),D!=null&&(e.inheritAttrs=D),G&&(e.components=G),le&&(e.directives=le)}function resolveInjections(e,t,a=NOOP){isArray$1(e)&&(e=normalizeInject(e));for(const i in e){const f=e[i];let I;isObject(f)?"default"in f?I=inject(f.from||i,f.default,!0):I=inject(f.from||i):I=inject(f),isRef(I)?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>I.value,set:L=>I.value=L}):t[i]=I}}function callHook(e,t,a){callWithAsyncErrorHandling(isArray$1(e)?e.map(i=>i.bind(t.proxy)):e.bind(t.proxy),t,a)}function createWatcher(e,t,a,i){const f=i.includes(".")?createPathGetter(a,i):()=>a[i];if(isString(e)){const I=t[e];isFunction(I)&&watch(f,I)}else if(isFunction(e))watch(f,e.bind(a));else if(isObject(e))if(isArray$1(e))e.forEach(I=>createWatcher(I,t,a,i));else{const I=isFunction(e.handler)?e.handler.bind(a):t[e.handler];isFunction(I)&&watch(f,I,e)}}function resolveMergedOptions(e){const t=e.type,{mixins:a,extends:i}=t,{mixins:f,optionsCache:I,config:{optionMergeStrategies:L}}=e.appContext,_=I.get(t);let m;return _?m=_:!f.length&&!a&&!i?m=t:(m={},f.length&&f.forEach(n=>mergeOptions$1(m,n,L,!0)),mergeOptions$1(m,t,L)),isObject(t)&&I.set(t,m),m}function mergeOptions$1(e,t,a,i=!1){const{mixins:f,extends:I}=t;I&&mergeOptions$1(e,I,a,!0),f&&f.forEach(L=>mergeOptions$1(e,L,a,!0));for(const L in t)if(!(i&&L==="expose")){const _=internalOptionMergeStrats[L]||a&&a[L];e[L]=_?_(e[L],t[L]):t[L]}return e}const internalOptionMergeStrats={data:mergeDataFn,props:mergeEmitsOrPropsOptions,emits:mergeEmitsOrPropsOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(e,t){return t?e?function(){return extend(isFunction(e)?e.call(this,this):e,isFunction(t)?t.call(this,this):t)}:t:e}function mergeInject(e,t){return mergeObjectOptions(normalizeInject(e),normalizeInject(t))}function normalizeInject(e){if(isArray$1(e)){const t={};for(let a=0;a<e.length;a++)t[e[a]]=e[a];return t}return e}function mergeAsArray(e,t){return e?[...new Set([].concat(e,t))]:t}function mergeObjectOptions(e,t){return e?extend(Object.create(null),e,t):t}function mergeEmitsOrPropsOptions(e,t){return e?isArray$1(e)&&isArray$1(t)?[...new Set([...e,...t])]:extend(Object.create(null),normalizePropsOrEmits(e),normalizePropsOrEmits(t??{})):t}function mergeWatchOptions(e,t){if(!e)return t;if(!t)return e;const a=extend(Object.create(null),e);for(const i in t)a[i]=mergeAsArray(e[i],t[i]);return a}function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid$1=0;function createAppAPI(e,t){return function(i,f=null){isFunction(i)||(i=extend({},i)),f!=null&&!isObject(f)&&(f=null);const I=createAppContext(),L=new WeakSet;let _=!1;const m=I.app={_uid:uid$1++,_component:i,_props:f,_container:null,_context:I,_instance:null,version,get config(){return I.config},set config(n){},use(n,...c){return L.has(n)||(n&&isFunction(n.install)?(L.add(n),n.install(m,...c)):isFunction(n)&&(L.add(n),n(m,...c))),m},mixin(n){return I.mixins.includes(n)||I.mixins.push(n),m},component(n,c){return c?(I.components[n]=c,m):I.components[n]},directive(n,c){return c?(I.directives[n]=c,m):I.directives[n]},mount(n,c,C){if(!_){const A=createVNode(i,f);return A.appContext=I,C===!0?C="svg":C===!1&&(C=void 0),c&&t?t(A,n):e(A,n,C),_=!0,m._container=n,n.__vue_app__=m,getComponentPublicInstance(A.component)}},unmount(){_&&(e(null,m._container),delete m._container.__vue_app__)},provide(n,c){return I.provides[n]=c,m},runWithContext(n){const c=currentApp;currentApp=m;try{return n()}finally{currentApp=c}}};return m}}let currentApp=null;function provide(e,t){if(currentInstance){let a=currentInstance.provides;const i=currentInstance.parent&&currentInstance.parent.provides;i===a&&(a=currentInstance.provides=Object.create(i)),a[e]=t}}function inject(e,t,a=!1){const i=currentInstance||currentRenderingInstance;if(i||currentApp){const f=currentApp?currentApp._context.provides:i?i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:void 0;if(f&&e in f)return f[e];if(arguments.length>1)return a&&isFunction(t)?t.call(i&&i.proxy):t}}const internalObjectProto={},createInternalObject=()=>Object.create(internalObjectProto),isInternalObject=e=>Object.getPrototypeOf(e)===internalObjectProto;function initProps(e,t,a,i=!1){const f={},I=createInternalObject();e.propsDefaults=Object.create(null),setFullProps(e,t,f,I);for(const L in e.propsOptions[0])L in f||(f[L]=void 0);a?e.props=i?f:shallowReactive(f):e.type.props?e.props=f:e.props=I,e.attrs=I}function updateProps(e,t,a,i){const{props:f,attrs:I,vnode:{patchFlag:L}}=e,_=toRaw(f),[m]=e.propsOptions;let n=!1;if((i||L>0)&&!(L&16)){if(L&8){const c=e.vnode.dynamicProps;for(let C=0;C<c.length;C++){let A=c[C];if(isEmitListener(e.emitsOptions,A))continue;const E=t[A];if(m)if(hasOwn(I,A))E!==I[A]&&(I[A]=E,n=!0);else{const r=camelize(A);f[r]=resolvePropValue(m,_,r,E,e,!1)}else E!==I[A]&&(I[A]=E,n=!0)}}}else{setFullProps(e,t,f,I)&&(n=!0);let c;for(const C in _)(!t||!hasOwn(t,C)&&((c=hyphenate(C))===C||!hasOwn(t,c)))&&(m?a&&(a[C]!==void 0||a[c]!==void 0)&&(f[C]=resolvePropValue(m,_,C,void 0,e,!0)):delete f[C]);if(I!==_)for(const C in I)(!t||!hasOwn(t,C))&&(delete I[C],n=!0)}n&&trigger(e.attrs,"set","")}function setFullProps(e,t,a,i){const[f,I]=e.propsOptions;let L=!1,_;if(t)for(let m in t){if(isReservedProp(m))continue;const n=t[m];let c;f&&hasOwn(f,c=camelize(m))?!I||!I.includes(c)?a[c]=n:(_||(_={}))[c]=n:isEmitListener(e.emitsOptions,m)||(!(m in i)||n!==i[m])&&(i[m]=n,L=!0)}if(I){const m=toRaw(a),n=_||EMPTY_OBJ;for(let c=0;c<I.length;c++){const C=I[c];a[C]=resolvePropValue(f,m,C,n[C],e,!hasOwn(n,C))}}return L}function resolvePropValue(e,t,a,i,f,I){const L=e[a];if(L!=null){const _=hasOwn(L,"default");if(_&&i===void 0){const m=L.default;if(L.type!==Function&&!L.skipFactory&&isFunction(m)){const{propsDefaults:n}=f;if(a in n)i=n[a];else{const c=setCurrentInstance(f);i=n[a]=m.call(null,t),c()}}else i=m}L[0]&&(I&&!_?i=!1:L[1]&&(i===""||i===hyphenate(a))&&(i=!0))}return i}const mixinPropsCache=new WeakMap;function normalizePropsOptions(e,t,a=!1){const i=a?mixinPropsCache:t.propsCache,f=i.get(e);if(f)return f;const I=e.props,L={},_=[];let m=!1;if(!isFunction(e)){const c=C=>{m=!0;const[A,E]=normalizePropsOptions(C,t,!0);extend(L,A),E&&_.push(...E)};!a&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}if(!I&&!m)return isObject(e)&&i.set(e,EMPTY_ARR),EMPTY_ARR;if(isArray$1(I))for(let c=0;c<I.length;c++){const C=camelize(I[c]);validatePropName(C)&&(L[C]=EMPTY_OBJ)}else if(I)for(const c in I){const C=camelize(c);if(validatePropName(C)){const A=I[c],E=L[C]=isArray$1(A)||isFunction(A)?{type:A}:extend({},A),r=E.type;let g=!1,b=!0;if(isArray$1(r))for(let P=0;P<r.length;++P){const R=r[P],v=isFunction(R)&&R.name;if(v==="Boolean"){g=!0;break}else v==="String"&&(b=!1)}else g=isFunction(r)&&r.name==="Boolean";E[0]=g,E[1]=b,(g||hasOwn(E,"default"))&&_.push(C)}}const n=[L,_];return isObject(e)&&i.set(e,n),n}function validatePropName(e){return e[0]!=="$"&&!isReservedProp(e)}const isInternalKey=e=>e[0]==="_"||e==="$stable",normalizeSlotValue=e=>isArray$1(e)?e.map(normalizeVNode):[normalizeVNode(e)],normalizeSlot$1=(e,t,a)=>{if(t._n)return t;const i=withCtx((...f)=>normalizeSlotValue(t(...f)),a);return i._c=!1,i},normalizeObjectSlots=(e,t,a)=>{const i=e._ctx;for(const f in e){if(isInternalKey(f))continue;const I=e[f];if(isFunction(I))t[f]=normalizeSlot$1(f,I,i);else if(I!=null){const L=normalizeSlotValue(I);t[f]=()=>L}}},normalizeVNodeSlots=(e,t)=>{const a=normalizeSlotValue(t);e.slots.default=()=>a},assignSlots=(e,t,a)=>{for(const i in t)(a||i!=="_")&&(e[i]=t[i])},initSlots=(e,t,a)=>{const i=e.slots=createInternalObject();if(e.vnode.shapeFlag&32){const f=t._;f?(assignSlots(i,t,a),a&&def(i,"_",f,!0)):normalizeObjectSlots(t,i)}else t&&normalizeVNodeSlots(e,t)},updateSlots=(e,t,a)=>{const{vnode:i,slots:f}=e;let I=!0,L=EMPTY_OBJ;if(i.shapeFlag&32){const _=t._;_?a&&_===1?I=!1:assignSlots(f,t,a):(I=!t.$stable,normalizeObjectSlots(t,f)),L=t}else t&&(normalizeVNodeSlots(e,t),L={default:1});if(I)for(const _ in f)!isInternalKey(_)&&L[_]==null&&delete f[_]};function setRef(e,t,a,i,f=!1){if(isArray$1(e)){e.forEach((A,E)=>setRef(A,t&&(isArray$1(t)?t[E]:t),a,i,f));return}if(isAsyncWrapper(i)&&!f)return;const I=i.shapeFlag&4?getComponentPublicInstance(i.component):i.el,L=f?null:I,{i:_,r:m}=e,n=t&&t.r,c=_.refs===EMPTY_OBJ?_.refs={}:_.refs,C=_.setupState;if(n!=null&&n!==m&&(isString(n)?(c[n]=null,hasOwn(C,n)&&(C[n]=null)):isRef(n)&&(n.value=null)),isFunction(m))callWithErrorHandling(m,_,12,[L,c]);else{const A=isString(m),E=isRef(m);if(A||E){const r=()=>{if(e.f){const g=A?hasOwn(C,m)?C[m]:c[m]:m.value;f?isArray$1(g)&&remove(g,I):isArray$1(g)?g.includes(I)||g.push(I):A?(c[m]=[I],hasOwn(C,m)&&(C[m]=c[m])):(m.value=[I],e.k&&(c[e.k]=m.value))}else A?(c[m]=L,hasOwn(C,m)&&(C[m]=L)):E&&(m.value=L,e.k&&(c[e.k]=L))};L?(r.id=-1,queuePostRenderEffect(r,a)):r()}}}const TeleportEndKey=Symbol("_vte"),isTeleport=e=>e.__isTeleport,queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(e){return baseCreateRenderer(e)}function baseCreateRenderer(e,t){const a=getGlobalThis();a.__VUE__=!0;const{insert:i,remove:f,patchProp:I,createElement:L,createText:_,createComment:m,setText:n,setElementText:c,parentNode:C,nextSibling:A,setScopeId:E=NOOP,insertStaticContent:r}=e,g=(B,O,$,de=null,te=null,ve=null,Pe=void 0,Se=null,oe=!!O.dynamicChildren)=>{if(B===O)return;B&&!isSameVNodeType(B,O)&&(de=u(B),Me(B,te,ve,!0),B=null),O.patchFlag===-2&&(oe=!1,O.dynamicChildren=null);const{type:ae,ref:ne,shapeFlag:ce}=O;switch(ae){case Text:b(B,O,$,de);break;case Comment:P(B,O,$,de);break;case Static:B==null&&R(O,$,de,Pe);break;case Fragment:G(B,O,$,de,te,ve,Pe,Se,oe);break;default:ce&1?o(B,O,$,de,te,ve,Pe,Se,oe):ce&6?le(B,O,$,de,te,ve,Pe,Se,oe):(ce&64||ce&128)&&ae.process(B,O,$,de,te,ve,Pe,Se,oe,W)}ne!=null&&te&&setRef(ne,B&&B.ref,ve,O||B,!O)},b=(B,O,$,de)=>{if(B==null)i(O.el=_(O.children),$,de);else{const te=O.el=B.el;O.children!==B.children&&n(te,O.children)}},P=(B,O,$,de)=>{B==null?i(O.el=m(O.children||""),$,de):O.el=B.el},R=(B,O,$,de)=>{[B.el,B.anchor]=r(B.children,O,$,de,B.el,B.anchor)},v=({el:B,anchor:O},$,de)=>{let te;for(;B&&B!==O;)te=A(B),i(B,$,de),B=te;i(O,$,de)},T=({el:B,anchor:O})=>{let $;for(;B&&B!==O;)$=A(B),f(B),B=$;f(O)},o=(B,O,$,de,te,ve,Pe,Se,oe)=>{O.type==="svg"?Pe="svg":O.type==="math"&&(Pe="mathml"),B==null?l(O,$,de,te,ve,Pe,Se,oe):w(B,O,te,ve,Pe,Se,oe)},l=(B,O,$,de,te,ve,Pe,Se)=>{let oe,ae;const{props:ne,shapeFlag:ce,transition:be,dirs:Le}=B;if(oe=B.el=L(B.type,ve,ne&&ne.is,ne),ce&8?c(oe,B.children):ce&16&&y(B.children,oe,null,de,te,resolveChildrenNamespace(B,ve),Pe,Se),Le&&invokeDirectiveHook(B,null,de,"created"),S(oe,B,B.scopeId,Pe,de),ne){for(const Be in ne)Be!=="value"&&!isReservedProp(Be)&&I(oe,Be,null,ne[Be],ve,de);"value"in ne&&I(oe,"value",null,ne.value,ve),(ae=ne.onVnodeBeforeMount)&&invokeVNodeHook(ae,de,B)}Le&&invokeDirectiveHook(B,null,de,"beforeMount");const Te=needTransition(te,be);Te&&be.beforeEnter(oe),i(oe,O,$),((ae=ne&&ne.onVnodeMounted)||Te||Le)&&queuePostRenderEffect(()=>{ae&&invokeVNodeHook(ae,de,B),Te&&be.enter(oe),Le&&invokeDirectiveHook(B,null,de,"mounted")},te)},S=(B,O,$,de,te)=>{if($&&E(B,$),de)for(let ve=0;ve<de.length;ve++)E(B,de[ve]);if(te){let ve=te.subTree;if(O===ve){const Pe=te.vnode;S(B,Pe,Pe.scopeId,Pe.slotScopeIds,te.parent)}}},y=(B,O,$,de,te,ve,Pe,Se,oe=0)=>{for(let ae=oe;ae<B.length;ae++){const ne=B[ae]=Se?cloneIfMounted(B[ae]):normalizeVNode(B[ae]);g(null,ne,O,$,de,te,ve,Pe,Se)}},w=(B,O,$,de,te,ve,Pe)=>{const Se=O.el=B.el;let{patchFlag:oe,dynamicChildren:ae,dirs:ne}=O;oe|=B.patchFlag&16;const ce=B.props||EMPTY_OBJ,be=O.props||EMPTY_OBJ;let Le;if($&&toggleRecurse($,!1),(Le=be.onVnodeBeforeUpdate)&&invokeVNodeHook(Le,$,O,B),ne&&invokeDirectiveHook(O,B,$,"beforeUpdate"),$&&toggleRecurse($,!0),(ce.innerHTML&&be.innerHTML==null||ce.textContent&&be.textContent==null)&&c(Se,""),ae?N(B.dynamicChildren,ae,Se,$,de,resolveChildrenNamespace(O,te),ve):Pe||K(B,O,Se,null,$,de,resolveChildrenNamespace(O,te),ve,!1),oe>0){if(oe&16)D(Se,ce,be,$,te);else if(oe&2&&ce.class!==be.class&&I(Se,"class",null,be.class,te),oe&4&&I(Se,"style",ce.style,be.style,te),oe&8){const Te=O.dynamicProps;for(let Be=0;Be<Te.length;Be++){const Ne=Te[Be],je=ce[Ne],Ue=be[Ne];(Ue!==je||Ne==="value")&&I(Se,Ne,je,Ue,te,$)}}oe&1&&B.children!==O.children&&c(Se,O.children)}else!Pe&&ae==null&&D(Se,ce,be,$,te);((Le=be.onVnodeUpdated)||ne)&&queuePostRenderEffect(()=>{Le&&invokeVNodeHook(Le,$,O,B),ne&&invokeDirectiveHook(O,B,$,"updated")},de)},N=(B,O,$,de,te,ve,Pe)=>{for(let Se=0;Se<O.length;Se++){const oe=B[Se],ae=O[Se],ne=oe.el&&(oe.type===Fragment||!isSameVNodeType(oe,ae)||oe.shapeFlag&70)?C(oe.el):$;g(oe,ae,ne,null,de,te,ve,Pe,!0)}},D=(B,O,$,de,te)=>{if(O!==$){if(O!==EMPTY_OBJ)for(const ve in O)!isReservedProp(ve)&&!(ve in $)&&I(B,ve,O[ve],null,te,de);for(const ve in $){if(isReservedProp(ve))continue;const Pe=$[ve],Se=O[ve];Pe!==Se&&ve!=="value"&&I(B,ve,Se,Pe,te,de)}"value"in $&&I(B,"value",O.value,$.value,te)}},G=(B,O,$,de,te,ve,Pe,Se,oe)=>{const ae=O.el=B?B.el:_(""),ne=O.anchor=B?B.anchor:_("");let{patchFlag:ce,dynamicChildren:be,slotScopeIds:Le}=O;Le&&(Se=Se?Se.concat(Le):Le),B==null?(i(ae,$,de),i(ne,$,de),y(O.children||[],$,ne,te,ve,Pe,Se,oe)):ce>0&&ce&64&&be&&B.dynamicChildren?(N(B.dynamicChildren,be,$,te,ve,Pe,Se),(O.key!=null||te&&O===te.subTree)&&traverseStaticChildren(B,O,!0)):K(B,O,$,ne,te,ve,Pe,Se,oe)},le=(B,O,$,de,te,ve,Pe,Se,oe)=>{O.slotScopeIds=Se,B==null?O.shapeFlag&512?te.ctx.activate(O,$,de,Pe,oe):H(O,$,de,te,ve,Pe,oe):Z(B,O,oe)},H=(B,O,$,de,te,ve,Pe)=>{const Se=B.component=createComponentInstance(B,de,te);if(isKeepAlive(B)&&(Se.ctx.renderer=W),setupComponent(Se,!1,Pe),Se.asyncDep){if(te&&te.registerDep(Se,re,Pe),!B.el){const oe=Se.subTree=createVNode(Comment);P(null,oe,O,$)}}else re(Se,B,O,$,te,ve,Pe)},Z=(B,O,$)=>{const de=O.component=B.component;if(shouldUpdateComponent(B,O,$))if(de.asyncDep&&!de.asyncResolved){Q(de,O,$);return}else de.next=O,invalidateJob(de.update),de.effect.dirty=!0,de.update();else O.el=B.el,de.vnode=O},re=(B,O,$,de,te,ve,Pe)=>{const Se=()=>{if(B.isMounted){let{next:ne,bu:ce,u:be,parent:Le,vnode:Te}=B;{const Ge=locateNonHydratedAsyncRoot(B);if(Ge){ne&&(ne.el=Te.el,Q(B,ne,Pe)),Ge.asyncDep.then(()=>{B.isUnmounted||Se()});return}}let Be=ne,Ne;toggleRecurse(B,!1),ne?(ne.el=Te.el,Q(B,ne,Pe)):ne=Te,ce&&invokeArrayFns(ce),(Ne=ne.props&&ne.props.onVnodeBeforeUpdate)&&invokeVNodeHook(Ne,Le,ne,Te),toggleRecurse(B,!0);const je=renderComponentRoot(B),Ue=B.subTree;B.subTree=je,g(Ue,je,C(Ue.el),u(Ue),B,te,ve),ne.el=je.el,Be===null&&updateHOCHostEl(B,je.el),be&&queuePostRenderEffect(be,te),(Ne=ne.props&&ne.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(Ne,Le,ne,Te),te)}else{let ne;const{el:ce,props:be}=O,{bm:Le,m:Te,parent:Be}=B,Ne=isAsyncWrapper(O);if(toggleRecurse(B,!1),Le&&invokeArrayFns(Le),!Ne&&(ne=be&&be.onVnodeBeforeMount)&&invokeVNodeHook(ne,Be,O),toggleRecurse(B,!0),ce&&me){const je=()=>{B.subTree=renderComponentRoot(B),me(ce,B.subTree,B,te,null)};Ne?O.type.__asyncLoader().then(()=>!B.isUnmounted&&je()):je()}else{const je=B.subTree=renderComponentRoot(B);g(null,je,$,de,B,te,ve),O.el=je.el}if(Te&&queuePostRenderEffect(Te,te),!Ne&&(ne=be&&be.onVnodeMounted)){const je=O;queuePostRenderEffect(()=>invokeVNodeHook(ne,Be,je),te)}(O.shapeFlag&256||Be&&isAsyncWrapper(Be.vnode)&&Be.vnode.shapeFlag&256)&&B.a&&queuePostRenderEffect(B.a,te),B.isMounted=!0,O=$=de=null}},oe=B.effect=new ReactiveEffect(Se,NOOP,()=>queueJob(ae),B.scope),ae=B.update=()=>{oe.dirty&&oe.run()};ae.i=B,ae.id=B.uid,toggleRecurse(B,!0),ae()},Q=(B,O,$)=>{O.component=B;const de=B.vnode.props;B.vnode=O,B.next=null,updateProps(B,O.props,de,$),updateSlots(B,O.children,$),pauseTracking(),flushPreFlushCbs(B),resetTracking()},K=(B,O,$,de,te,ve,Pe,Se,oe=!1)=>{const ae=B&&B.children,ne=B?B.shapeFlag:0,ce=O.children,{patchFlag:be,shapeFlag:Le}=O;if(be>0){if(be&128){se(ae,ce,$,de,te,ve,Pe,Se,oe);return}else if(be&256){ue(ae,ce,$,de,te,ve,Pe,Se,oe);return}}Le&8?(ne&16&&d(ae,te,ve),ce!==ae&&c($,ce)):ne&16?Le&16?se(ae,ce,$,de,te,ve,Pe,Se,oe):d(ae,te,ve,!0):(ne&8&&c($,""),Le&16&&y(ce,$,de,te,ve,Pe,Se,oe))},ue=(B,O,$,de,te,ve,Pe,Se,oe)=>{B=B||EMPTY_ARR,O=O||EMPTY_ARR;const ae=B.length,ne=O.length,ce=Math.min(ae,ne);let be;for(be=0;be<ce;be++){const Le=O[be]=oe?cloneIfMounted(O[be]):normalizeVNode(O[be]);g(B[be],Le,$,null,te,ve,Pe,Se,oe)}ae>ne?d(B,te,ve,!0,!1,ce):y(O,$,de,te,ve,Pe,Se,oe,ce)},se=(B,O,$,de,te,ve,Pe,Se,oe)=>{let ae=0;const ne=O.length;let ce=B.length-1,be=ne-1;for(;ae<=ce&&ae<=be;){const Le=B[ae],Te=O[ae]=oe?cloneIfMounted(O[ae]):normalizeVNode(O[ae]);if(isSameVNodeType(Le,Te))g(Le,Te,$,null,te,ve,Pe,Se,oe);else break;ae++}for(;ae<=ce&&ae<=be;){const Le=B[ce],Te=O[be]=oe?cloneIfMounted(O[be]):normalizeVNode(O[be]);if(isSameVNodeType(Le,Te))g(Le,Te,$,null,te,ve,Pe,Se,oe);else break;ce--,be--}if(ae>ce){if(ae<=be){const Le=be+1,Te=Le<ne?O[Le].el:de;for(;ae<=be;)g(null,O[ae]=oe?cloneIfMounted(O[ae]):normalizeVNode(O[ae]),$,Te,te,ve,Pe,Se,oe),ae++}}else if(ae>be)for(;ae<=ce;)Me(B[ae],te,ve,!0),ae++;else{const Le=ae,Te=ae,Be=new Map;for(ae=Te;ae<=be;ae++){const U=O[ae]=oe?cloneIfMounted(O[ae]):normalizeVNode(O[ae]);U.key!=null&&Be.set(U.key,ae)}let Ne,je=0;const Ue=be-Te+1;let Ge=!1,qe=0;const Qe=new Array(Ue);for(ae=0;ae<Ue;ae++)Qe[ae]=0;for(ae=Le;ae<=ce;ae++){const U=B[ae];if(je>=Ue){Me(U,te,ve,!0);continue}let Y;if(U.key!=null)Y=Be.get(U.key);else for(Ne=Te;Ne<=be;Ne++)if(Qe[Ne-Te]===0&&isSameVNodeType(U,O[Ne])){Y=Ne;break}Y===void 0?Me(U,te,ve,!0):(Qe[Y-Te]=ae+1,Y>=qe?qe=Y:Ge=!0,g(U,O[Y],$,null,te,ve,Pe,Se,oe),je++)}const xe=Ge?getSequence(Qe):EMPTY_ARR;for(Ne=xe.length-1,ae=Ue-1;ae>=0;ae--){const U=Te+ae,Y=O[U],Ee=U+1<ne?O[U+1].el:de;Qe[ae]===0?g(null,Y,$,Ee,te,ve,Pe,Se,oe):Ge&&(Ne<0||ae!==xe[Ne]?Ce(Y,$,Ee,2):Ne--)}}},Ce=(B,O,$,de,te=null)=>{const{el:ve,type:Pe,transition:Se,children:oe,shapeFlag:ae}=B;if(ae&6){Ce(B.component.subTree,O,$,de);return}if(ae&128){B.suspense.move(O,$,de);return}if(ae&64){Pe.move(B,O,$,W);return}if(Pe===Fragment){i(ve,O,$);for(let ce=0;ce<oe.length;ce++)Ce(oe[ce],O,$,de);i(B.anchor,O,$);return}if(Pe===Static){v(B,O,$);return}if(de!==2&&ae&1&&Se)if(de===0)Se.beforeEnter(ve),i(ve,O,$),queuePostRenderEffect(()=>Se.enter(ve),te);else{const{leave:ce,delayLeave:be,afterLeave:Le}=Se,Te=()=>i(ve,O,$),Be=()=>{ce(ve,()=>{Te(),Le&&Le()})};be?be(ve,Te,Be):Be()}else i(ve,O,$)},Me=(B,O,$,de=!1,te=!1)=>{const{type:ve,props:Pe,ref:Se,children:oe,dynamicChildren:ae,shapeFlag:ne,patchFlag:ce,dirs:be,cacheIndex:Le}=B;if(ce===-2&&(te=!1),Se!=null&&setRef(Se,null,$,B,!0),Le!=null&&(O.renderCache[Le]=void 0),ne&256){O.ctx.deactivate(B);return}const Te=ne&1&&be,Be=!isAsyncWrapper(B);let Ne;if(Be&&(Ne=Pe&&Pe.onVnodeBeforeUnmount)&&invokeVNodeHook(Ne,O,B),ne&6)F(B.component,$,de);else{if(ne&128){B.suspense.unmount($,de);return}Te&&invokeDirectiveHook(B,null,O,"beforeUnmount"),ne&64?B.type.remove(B,O,$,W,de):ae&&!ae.hasOnce&&(ve!==Fragment||ce>0&&ce&64)?d(ae,O,$,!1,!0):(ve===Fragment&&ce&384||!te&&ne&16)&&d(oe,O,$),de&&q(B)}(Be&&(Ne=Pe&&Pe.onVnodeUnmounted)||Te)&&queuePostRenderEffect(()=>{Ne&&invokeVNodeHook(Ne,O,B),Te&&invokeDirectiveHook(B,null,O,"unmounted")},$)},q=B=>{const{type:O,el:$,anchor:de,transition:te}=B;if(O===Fragment){M($,de);return}if(O===Static){T(B);return}const ve=()=>{f($),te&&!te.persisted&&te.afterLeave&&te.afterLeave()};if(B.shapeFlag&1&&te&&!te.persisted){const{leave:Pe,delayLeave:Se}=te,oe=()=>Pe($,ve);Se?Se(B.el,ve,oe):oe()}else ve()},M=(B,O)=>{let $;for(;B!==O;)$=A(B),f(B),B=$;f(O)},F=(B,O,$)=>{const{bum:de,scope:te,update:ve,subTree:Pe,um:Se,m:oe,a:ae}=B;invalidateMount(oe),invalidateMount(ae),de&&invokeArrayFns(de),te.stop(),ve&&(ve.active=!1,Me(Pe,B,O,$)),Se&&queuePostRenderEffect(Se,O),queuePostRenderEffect(()=>{B.isUnmounted=!0},O),O&&O.pendingBranch&&!O.isUnmounted&&B.asyncDep&&!B.asyncResolved&&B.suspenseId===O.pendingId&&(O.deps--,O.deps===0&&O.resolve())},d=(B,O,$,de=!1,te=!1,ve=0)=>{for(let Pe=ve;Pe<B.length;Pe++)Me(B[Pe],O,$,de,te)},u=B=>{if(B.shapeFlag&6)return u(B.component.subTree);if(B.shapeFlag&128)return B.suspense.next();const O=A(B.anchor||B.el),$=O&&O[TeleportEndKey];return $?A($):O};let x=!1;const V=(B,O,$)=>{B==null?O._vnode&&Me(O._vnode,null,null,!0):g(O._vnode||null,B,O,null,null,null,$),O._vnode=B,x||(x=!0,flushPreFlushCbs(),flushPostFlushCbs(),x=!1)},W={p:g,um:Me,m:Ce,r:q,mt:H,mc:y,pc:K,pbc:N,n:u,o:e};let X,me;return t&&([X,me]=t(W)),{render:V,hydrate:X,createApp:createAppAPI(V,X)}}function resolveChildrenNamespace({type:e,props:t},a){return a==="svg"&&e==="foreignObject"||a==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:a}function toggleRecurse({effect:e,update:t},a){e.allowRecurse=t.allowRecurse=a}function needTransition(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function traverseStaticChildren(e,t,a=!1){const i=e.children,f=t.children;if(isArray$1(i)&&isArray$1(f))for(let I=0;I<i.length;I++){const L=i[I];let _=f[I];_.shapeFlag&1&&!_.dynamicChildren&&((_.patchFlag<=0||_.patchFlag===32)&&(_=f[I]=cloneIfMounted(f[I]),_.el=L.el),!a&&_.patchFlag!==-2&&traverseStaticChildren(L,_)),_.type===Text&&(_.el=L.el)}}function getSequence(e){const t=e.slice(),a=[0];let i,f,I,L,_;const m=e.length;for(i=0;i<m;i++){const n=e[i];if(n!==0){if(f=a[a.length-1],e[f]<n){t[i]=f,a.push(i);continue}for(I=0,L=a.length-1;I<L;)_=I+L>>1,e[a[_]]<n?I=_+1:L=_;n<e[a[I]]&&(I>0&&(t[i]=a[I-1]),a[I]=i)}}for(I=a.length,L=a[I-1];I-- >0;)a[I]=L,L=t[L];return a}function locateNonHydratedAsyncRoot(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:locateNonHydratedAsyncRoot(t)}function invalidateMount(e){if(e)for(let t=0;t<e.length;t++)e[t].active=!1}const ssrContextKey=Symbol.for("v-scx"),useSSRContext=()=>inject(ssrContextKey),INITIAL_WATCHER_VALUE={};function watch(e,t,a){return doWatch(e,t,a)}function doWatch(e,t,{immediate:a,deep:i,flush:f,once:I,onTrack:L,onTrigger:_}=EMPTY_OBJ){if(t&&I){const l=t;t=(...S)=>{l(...S),o()}}const m=currentInstance,n=l=>i===!0?l:traverse(l,i===!1?1:void 0);let c,C=!1,A=!1;if(isRef(e)?(c=()=>e.value,C=isShallow(e)):isReactive(e)?(c=()=>n(e),C=!0):isArray$1(e)?(A=!0,C=e.some(l=>isReactive(l)||isShallow(l)),c=()=>e.map(l=>{if(isRef(l))return l.value;if(isReactive(l))return n(l);if(isFunction(l))return callWithErrorHandling(l,m,2)})):isFunction(e)?t?c=()=>callWithErrorHandling(e,m,2):c=()=>(E&&E(),callWithAsyncErrorHandling(e,m,3,[r])):c=NOOP,t&&i){const l=c;c=()=>traverse(l())}let E,r=l=>{E=v.onStop=()=>{callWithErrorHandling(l,m,4),E=v.onStop=void 0}},g;if(isInSSRComponentSetup)if(r=NOOP,t?a&&callWithAsyncErrorHandling(t,m,3,[c(),A?[]:void 0,r]):c(),f==="sync"){const l=useSSRContext();g=l.__watcherHandles||(l.__watcherHandles=[])}else return NOOP;let b=A?new Array(e.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const P=()=>{if(!(!v.active||!v.dirty))if(t){const l=v.run();(i||C||(A?l.some((S,y)=>hasChanged(S,b[y])):hasChanged(l,b)))&&(E&&E(),callWithAsyncErrorHandling(t,m,3,[l,b===INITIAL_WATCHER_VALUE?void 0:A&&b[0]===INITIAL_WATCHER_VALUE?[]:b,r]),b=l)}else v.run()};P.allowRecurse=!!t;let R;f==="sync"?R=P:f==="post"?R=()=>queuePostRenderEffect(P,m&&m.suspense):(P.pre=!0,m&&(P.id=m.uid),R=()=>queueJob(P));const v=new ReactiveEffect(c,NOOP,R),T=getCurrentScope(),o=()=>{v.stop(),T&&remove(T.effects,v)};return t?a?P():b=v.run():f==="post"?queuePostRenderEffect(v.run.bind(v),m&&m.suspense):v.run(),g&&g.push(o),o}function instanceWatch(e,t,a){const i=this.proxy,f=isString(e)?e.includes(".")?createPathGetter(i,e):()=>i[e]:e.bind(i,i);let I;isFunction(t)?I=t:(I=t.handler,a=t);const L=setCurrentInstance(this),_=doWatch(f,I.bind(i),a);return L(),_}function createPathGetter(e,t){const a=t.split(".");return()=>{let i=e;for(let f=0;f<a.length&&i;f++)i=i[a[f]];return i}}function traverse(e,t=1/0,a){if(t<=0||!isObject(e)||e.__v_skip||(a=a||new Set,a.has(e)))return e;if(a.add(e),t--,isRef(e))traverse(e.value,t,a);else if(isArray$1(e))for(let i=0;i<e.length;i++)traverse(e[i],t,a);else if(isSet(e)||isMap(e))e.forEach(i=>{traverse(i,t,a)});else if(isPlainObject(e)){for(const i in e)traverse(e[i],t,a);for(const i of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,i)&&traverse(e[i],t,a)}return e}const getModelModifiers=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${camelize(t)}Modifiers`]||e[`${hyphenate(t)}Modifiers`];function emit(e,t,...a){if(e.isUnmounted)return;const i=e.vnode.props||EMPTY_OBJ;let f=a;const I=t.startsWith("update:"),L=I&&getModelModifiers(i,t.slice(7));L&&(L.trim&&(f=a.map(c=>isString(c)?c.trim():c)),L.number&&(f=a.map(looseToNumber)));let _,m=i[_=toHandlerKey(t)]||i[_=toHandlerKey(camelize(t))];!m&&I&&(m=i[_=toHandlerKey(hyphenate(t))]),m&&callWithAsyncErrorHandling(m,e,6,f);const n=i[_+"Once"];if(n){if(!e.emitted)e.emitted={};else if(e.emitted[_])return;e.emitted[_]=!0,callWithAsyncErrorHandling(n,e,6,f)}}function normalizeEmitsOptions(e,t,a=!1){const i=t.emitsCache,f=i.get(e);if(f!==void 0)return f;const I=e.emits;let L={},_=!1;if(!isFunction(e)){const m=n=>{const c=normalizeEmitsOptions(n,t,!0);c&&(_=!0,extend(L,c))};!a&&t.mixins.length&&t.mixins.forEach(m),e.extends&&m(e.extends),e.mixins&&e.mixins.forEach(m)}return!I&&!_?(isObject(e)&&i.set(e,null),null):(isArray$1(I)?I.forEach(m=>L[m]=null):extend(L,I),isObject(e)&&i.set(e,L),L)}function isEmitListener(e,t){return!e||!isOn(t)?!1:(t=t.slice(2).replace(/Once$/,""),hasOwn(e,t[0].toLowerCase()+t.slice(1))||hasOwn(e,hyphenate(t))||hasOwn(e,t))}function markAttrsAccessed(){}function renderComponentRoot(e){const{type:t,vnode:a,proxy:i,withProxy:f,propsOptions:[I],slots:L,attrs:_,emit:m,render:n,renderCache:c,props:C,data:A,setupState:E,ctx:r,inheritAttrs:g}=e,b=setCurrentRenderingInstance(e);let P,R;try{if(a.shapeFlag&4){const T=f||i,o=T;P=normalizeVNode(n.call(o,T,c,C,E,A,r)),R=_}else{const T=t;P=normalizeVNode(T.length>1?T(C,{attrs:_,slots:L,emit:m}):T(C,null)),R=t.props?_:getFunctionalFallthrough(_)}}catch(T){blockStack.length=0,handleError(T,e,1),P=createVNode(Comment)}let v=P;if(R&&g!==!1){const T=Object.keys(R),{shapeFlag:o}=v;T.length&&o&7&&(I&&T.some(isModelListener)&&(R=filterModelListeners(R,I)),v=cloneVNode(v,R,!1,!0))}return a.dirs&&(v=cloneVNode(v,null,!1,!0),v.dirs=v.dirs?v.dirs.concat(a.dirs):a.dirs),a.transition&&(v.transition=a.transition),P=v,setCurrentRenderingInstance(b),P}const getFunctionalFallthrough=e=>{let t;for(const a in e)(a==="class"||a==="style"||isOn(a))&&((t||(t={}))[a]=e[a]);return t},filterModelListeners=(e,t)=>{const a={};for(const i in e)(!isModelListener(i)||!(i.slice(9)in t))&&(a[i]=e[i]);return a};function shouldUpdateComponent(e,t,a){const{props:i,children:f,component:I}=e,{props:L,children:_,patchFlag:m}=t,n=I.emitsOptions;if(t.dirs||t.transition)return!0;if(a&&m>=0){if(m&1024)return!0;if(m&16)return i?hasPropsChanged(i,L,n):!!L;if(m&8){const c=t.dynamicProps;for(let C=0;C<c.length;C++){const A=c[C];if(L[A]!==i[A]&&!isEmitListener(n,A))return!0}}}else return(f||_)&&(!_||!_.$stable)?!0:i===L?!1:i?L?hasPropsChanged(i,L,n):!0:!!L;return!1}function hasPropsChanged(e,t,a){const i=Object.keys(t);if(i.length!==Object.keys(e).length)return!0;for(let f=0;f<i.length;f++){const I=i[f];if(t[I]!==e[I]&&!isEmitListener(a,I))return!0}return!1}function updateHOCHostEl({vnode:e,parent:t},a){for(;t;){const i=t.subTree;if(i.suspense&&i.suspense.activeBranch===e&&(i.el=e.el),i===e)(e=t.vnode).el=a,t=t.parent;else break}}const isSuspense=e=>e.__isSuspense;function queueEffectWithSuspense(e,t){t&&t.pendingBranch?isArray$1(e)?t.effects.push(...e):t.effects.push(e):queuePostFlushCb(e)}const Fragment=Symbol.for("v-fgt"),Text=Symbol.for("v-txt"),Comment=Symbol.for("v-cmt"),Static=Symbol.for("v-stc"),blockStack=[];let currentBlock=null;function openBlock(e=!1){blockStack.push(currentBlock=e?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(e){isBlockTreeEnabled+=e,e<0&&currentBlock&&(currentBlock.hasOnce=!0)}function setupBlock(e){return e.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(e),e}function createElementBlock(e,t,a,i,f,I){return setupBlock(createBaseVNode(e,t,a,i,f,I,!0))}function isVNode(e){return e?e.__v_isVNode===!0:!1}function isSameVNodeType(e,t){return e.type===t.type&&e.key===t.key}const normalizeKey=({key:e})=>e??null,normalizeRef=({ref:e,ref_key:t,ref_for:a})=>(typeof e=="number"&&(e=""+e),e!=null?isString(e)||isRef(e)||isFunction(e)?{i:currentRenderingInstance,r:e,k:t,f:!!a}:e:null);function createBaseVNode(e,t=null,a=null,i=0,f=null,I=e===Fragment?0:1,L=!1,_=!1){const m={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&normalizeKey(t),ref:t&&normalizeRef(t),scopeId:currentScopeId,slotScopeIds:null,children:a,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:I,patchFlag:i,dynamicProps:f,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return _?(normalizeChildren(m,a),I&128&&e.normalize(m)):a&&(m.shapeFlag|=isString(a)?8:16),isBlockTreeEnabled>0&&!L&&currentBlock&&(m.patchFlag>0||I&6)&&m.patchFlag!==32&&currentBlock.push(m),m}const createVNode=_createVNode;function _createVNode(e,t=null,a=null,i=0,f=null,I=!1){if((!e||e===NULL_DYNAMIC_COMPONENT)&&(e=Comment),isVNode(e)){const _=cloneVNode(e,t,!0);return a&&normalizeChildren(_,a),isBlockTreeEnabled>0&&!I&&currentBlock&&(_.shapeFlag&6?currentBlock[currentBlock.indexOf(e)]=_:currentBlock.push(_)),_.patchFlag=-2,_}if(isClassComponent(e)&&(e=e.__vccOpts),t){t=guardReactiveProps(t);let{class:_,style:m}=t;_&&!isString(_)&&(t.class=normalizeClass(_)),isObject(m)&&(isProxy(m)&&!isArray$1(m)&&(m=extend({},m)),t.style=normalizeStyle(m))}const L=isString(e)?1:isSuspense(e)?128:isTeleport(e)?64:isObject(e)?4:isFunction(e)?2:0;return createBaseVNode(e,t,a,i,f,L,I,!0)}function guardReactiveProps(e){return e?isProxy(e)||isInternalObject(e)?extend({},e):e:null}function cloneVNode(e,t,a=!1,i=!1){const{props:f,ref:I,patchFlag:L,children:_,transition:m}=e,n=t?mergeProps(f||{},t):f,c={__v_isVNode:!0,__v_skip:!0,type:e.type,props:n,key:n&&normalizeKey(n),ref:t&&t.ref?a&&I?isArray$1(I)?I.concat(normalizeRef(t)):[I,normalizeRef(t)]:normalizeRef(t):I,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:_,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Fragment?L===-1?16:L|16:L,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:m,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&cloneVNode(e.ssContent),ssFallback:e.ssFallback&&cloneVNode(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return m&&i&&setTransitionHooks(c,m.clone(c)),c}function createTextVNode(e=" ",t=0){return createVNode(Text,null,e,t)}function normalizeVNode(e){return e==null||typeof e=="boolean"?createVNode(Comment):isArray$1(e)?createVNode(Fragment,null,e.slice()):typeof e=="object"?cloneIfMounted(e):createVNode(Text,null,String(e))}function cloneIfMounted(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:cloneVNode(e)}function normalizeChildren(e,t){let a=0;const{shapeFlag:i}=e;if(t==null)t=null;else if(isArray$1(t))a=16;else if(typeof t=="object")if(i&65){const f=t.default;f&&(f._c&&(f._d=!1),normalizeChildren(e,f()),f._c&&(f._d=!0));return}else{a=32;const f=t._;!f&&!isInternalObject(t)?t._ctx=currentRenderingInstance:f===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else isFunction(t)?(t={default:t,_ctx:currentRenderingInstance},a=32):(t=String(t),i&64?(a=16,t=[createTextVNode(t)]):a=8);e.children=t,e.shapeFlag|=a}function mergeProps(...e){const t={};for(let a=0;a<e.length;a++){const i=e[a];for(const f in i)if(f==="class")t.class!==i.class&&(t.class=normalizeClass([t.class,i.class]));else if(f==="style")t.style=normalizeStyle([t.style,i.style]);else if(isOn(f)){const I=t[f],L=i[f];L&&I!==L&&!(isArray$1(I)&&I.includes(L))&&(t[f]=I?[].concat(I,L):L)}else f!==""&&(t[f]=i[f])}return t}function invokeVNodeHook(e,t,a,i=null){callWithAsyncErrorHandling(e,t,7,[a,i])}const emptyAppContext=createAppContext();let uid=0;function createComponentInstance(e,t,a){const i=e.type,f=(t?t.appContext:e.appContext)||emptyAppContext,I={uid:uid++,vnode:e,type:i,parent:t,appContext:f,root:null,next:null,subTree:null,effect:null,update:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(f.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(i,f),emitsOptions:normalizeEmitsOptions(i,f),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:i.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,suspense:a,suspenseId:a?a.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return I.ctx={_:I},I.root=t?t.root:I,I.emit=emit.bind(null,I),e.ce&&e.ce(I),I}let currentInstance=null,internalSetCurrentInstance,setInSSRSetupState;{const e=getGlobalThis(),t=(a,i)=>{let f;return(f=e[a])||(f=e[a]=[]),f.push(i),I=>{f.length>1?f.forEach(L=>L(I)):f[0](I)}};internalSetCurrentInstance=t("__VUE_INSTANCE_SETTERS__",a=>currentInstance=a),setInSSRSetupState=t("__VUE_SSR_SETTERS__",a=>isInSSRComponentSetup=a)}const setCurrentInstance=e=>{const t=currentInstance;return internalSetCurrentInstance(e),e.scope.on(),()=>{e.scope.off(),internalSetCurrentInstance(t)}},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),internalSetCurrentInstance(null)};function isStatefulComponent(e){return e.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(e,t=!1,a=!1){t&&setInSSRSetupState(t);const{props:i,children:f}=e.vnode,I=isStatefulComponent(e);initProps(e,i,I,t),initSlots(e,f,a);const L=I?setupStatefulComponent(e,t):void 0;return t&&setInSSRSetupState(!1),L}function setupStatefulComponent(e,t){const a=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,PublicInstanceProxyHandlers);const{setup:i}=a;if(i){const f=e.setupContext=i.length>1?createSetupContext(e):null,I=setCurrentInstance(e);pauseTracking();const L=callWithErrorHandling(i,e,0,[e.props,f]);if(resetTracking(),I(),isPromise(L)){if(L.then(unsetCurrentInstance,unsetCurrentInstance),t)return L.then(_=>{handleSetupResult(e,_,t)}).catch(_=>{handleError(_,e,0)});e.asyncDep=L}else handleSetupResult(e,L,t)}else finishComponentSetup(e,t)}function handleSetupResult(e,t,a){isFunction(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:isObject(t)&&(e.setupState=proxyRefs(t)),finishComponentSetup(e,a)}let compile;function finishComponentSetup(e,t,a){const i=e.type;if(!e.render){if(!t&&compile&&!i.render){const f=i.template||resolveMergedOptions(e).template;if(f){const{isCustomElement:I,compilerOptions:L}=e.appContext.config,{delimiters:_,compilerOptions:m}=i,n=extend(extend({isCustomElement:I,delimiters:_},L),m);i.render=compile(f,n)}}e.render=i.render||NOOP}{const f=setCurrentInstance(e);pauseTracking();try{applyOptions(e)}finally{resetTracking(),f()}}}const attrsProxyHandlers={get(e,t){return track(e,"get",""),e[t]}};function createSetupContext(e){const t=a=>{e.exposed=a||{}};return{attrs:new Proxy(e.attrs,attrsProxyHandlers),slots:e.slots,emit:e.emit,expose:t}}function getComponentPublicInstance(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(proxyRefs(markRaw(e.exposed)),{get(t,a){if(a in t)return t[a];if(a in publicPropertiesMap)return publicPropertiesMap[a](e)},has(t,a){return a in t||a in publicPropertiesMap}})):e.proxy}const classifyRE=/(?:^|[-_])(\w)/g,classify=e=>e.replace(classifyRE,t=>t.toUpperCase()).replace(/[-_]/g,"");function getComponentName(e,t=!0){return isFunction(e)?e.displayName||e.name:e.name||t&&e.__name}function formatComponentName(e,t,a=!1){let i=getComponentName(t);if(!i&&t.__file){const f=t.__file.match(/([^/\\]+)\.\w+$/);f&&(i=f[1])}if(!i&&e&&e.parent){const f=I=>{for(const L in I)if(I[L]===t)return L};i=f(e.components||e.parent.type.components)||f(e.appContext.components)}return i?classify(i):a?"App":"Anonymous"}function isClassComponent(e){return isFunction(e)&&"__vccOpts"in e}const computed=(e,t)=>computed$1(e,t,isInSSRComponentSetup);function h(e,t,a){const i=arguments.length;return i===2?isObject(t)&&!isArray$1(t)?isVNode(t)?createVNode(e,null,[t]):createVNode(e,t):createVNode(e,null,t):(i>3?a=Array.prototype.slice.call(arguments,2):i===3&&isVNode(a)&&(a=[a]),createVNode(e,t,a))}const version="3.4.38";/**
* @vue/runtime-dom v3.4.38
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const svgNS="http://www.w3.org/2000/svg",mathmlNS="http://www.w3.org/1998/Math/MathML",doc=typeof document<"u"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(e,t,a)=>{t.insertBefore(e,a||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,a,i)=>{const f=t==="svg"?doc.createElementNS(svgNS,e):t==="mathml"?doc.createElementNS(mathmlNS,e):a?doc.createElement(e,{is:a}):doc.createElement(e);return e==="select"&&i&&i.multiple!=null&&f.setAttribute("multiple",i.multiple),f},createText:e=>doc.createTextNode(e),createComment:e=>doc.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>doc.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,a,i,f,I){const L=a?a.previousSibling:t.lastChild;if(f&&(f===I||f.nextSibling))for(;t.insertBefore(f.cloneNode(!0),a),!(f===I||!(f=f.nextSibling)););else{templateContainer.innerHTML=i==="svg"?`<svg>${e}</svg>`:i==="mathml"?`<math>${e}</math>`:e;const _=templateContainer.content;if(i==="svg"||i==="mathml"){const m=_.firstChild;for(;m.firstChild;)_.appendChild(m.firstChild);_.removeChild(m)}t.insertBefore(_,a)}return[L?L.nextSibling:t.firstChild,a?a.previousSibling:t.lastChild]}},vtcKey=Symbol("_vtc");function patchClass(e,t,a){const i=e[vtcKey];i&&(t=(t?[t,...i]:[...i]).join(" ")),t==null?e.removeAttribute("class"):a?e.setAttribute("class",t):e.className=t}const vShowOriginalDisplay=Symbol("_vod"),vShowHidden=Symbol("_vsh"),CSS_VAR_TEXT=Symbol(""),displayRE=/(^|;)\s*display\s*:/;function patchStyle(e,t,a){const i=e.style,f=isString(a);let I=!1;if(a&&!f){if(t)if(isString(t))for(const L of t.split(";")){const _=L.slice(0,L.indexOf(":")).trim();a[_]==null&&setStyle(i,_,"")}else for(const L in t)a[L]==null&&setStyle(i,L,"");for(const L in a)L==="display"&&(I=!0),setStyle(i,L,a[L])}else if(f){if(t!==a){const L=i[CSS_VAR_TEXT];L&&(a+=";"+L),i.cssText=a,I=displayRE.test(a)}}else t&&e.removeAttribute("style");vShowOriginalDisplay in e&&(e[vShowOriginalDisplay]=I?i.display:"",e[vShowHidden]&&(i.display="none"))}const importantRE=/\s*!important$/;function setStyle(e,t,a){if(isArray$1(a))a.forEach(i=>setStyle(e,t,i));else if(a==null&&(a=""),t.startsWith("--"))e.setProperty(t,a);else{const i=autoPrefix(e,t);importantRE.test(a)?e.setProperty(hyphenate(i),a.replace(importantRE,""),"important"):e[i]=a}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(e,t){const a=prefixCache[t];if(a)return a;let i=camelize(t);if(i!=="filter"&&i in e)return prefixCache[t]=i;i=capitalize(i);for(let f=0;f<prefixes.length;f++){const I=prefixes[f]+i;if(I in e)return prefixCache[t]=I}return t}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(e,t,a,i,f,I=isSpecialBooleanAttr(t)){i&&t.startsWith("xlink:")?a==null?e.removeAttributeNS(xlinkNS,t.slice(6,t.length)):e.setAttributeNS(xlinkNS,t,a):a==null||I&&!includeBooleanAttr(a)?e.removeAttribute(t):e.setAttribute(t,I?"":isSymbol(a)?String(a):a)}function patchDOMProp(e,t,a,i){if(t==="innerHTML"||t==="textContent"){if(a==null)return;e[t]=a;return}const f=e.tagName;if(t==="value"&&f!=="PROGRESS"&&!f.includes("-")){const L=f==="OPTION"?e.getAttribute("value")||"":e.value,_=a==null?"":String(a);(L!==_||!("_value"in e))&&(e.value=_),a==null&&e.removeAttribute(t),e._value=a;return}let I=!1;if(a===""||a==null){const L=typeof e[t];L==="boolean"?a=includeBooleanAttr(a):a==null&&L==="string"?(a="",I=!0):L==="number"&&(a=0,I=!0)}try{e[t]=a}catch{}I&&e.removeAttribute(t)}function addEventListener(e,t,a,i){e.addEventListener(t,a,i)}function removeEventListener(e,t,a,i){e.removeEventListener(t,a,i)}const veiKey=Symbol("_vei");function patchEvent(e,t,a,i,f=null){const I=e[veiKey]||(e[veiKey]={}),L=I[t];if(i&&L)L.value=i;else{const[_,m]=parseName(t);if(i){const n=I[t]=createInvoker(i,f);addEventListener(e,_,n,m)}else L&&(removeEventListener(e,_,L,m),I[t]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(e){let t;if(optionsModifierRE.test(e)){t={};let i;for(;i=e.match(optionsModifierRE);)e=e.slice(0,e.length-i[0].length),t[i[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):hyphenate(e.slice(2)),t]}let cachedNow=0;const p=Promise.resolve(),getNow=()=>cachedNow||(p.then(()=>cachedNow=0),cachedNow=Date.now());function createInvoker(e,t){const a=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=a.attached)return;callWithAsyncErrorHandling(patchStopImmediatePropagation(i,a.value),t,5,[i])};return a.value=e,a.attached=getNow(),a}function patchStopImmediatePropagation(e,t){if(isArray$1(t)){const a=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{a.call(e),e._stopped=!0},t.map(i=>f=>!f._stopped&&i&&i(f))}else return t}const isNativeOn=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,patchProp=(e,t,a,i,f,I)=>{const L=f==="svg";t==="class"?patchClass(e,i,L):t==="style"?patchStyle(e,a,i):isOn(t)?isModelListener(t)||patchEvent(e,t,a,i,I):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):shouldSetAsProp(e,t,i,L))?(patchDOMProp(e,t,i),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&patchAttr(e,t,i,L,I,t!=="value")):(t==="true-value"?e._trueValue=i:t==="false-value"&&(e._falseValue=i),patchAttr(e,t,i,L))};function shouldSetAsProp(e,t,a,i){if(i)return!!(t==="innerHTML"||t==="textContent"||t in e&&isNativeOn(t)&&isFunction(a));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const f=e.tagName;if(f==="IMG"||f==="VIDEO"||f==="CANVAS"||f==="SOURCE")return!1}return isNativeOn(t)&&isString(a)?!1:t in e}const rendererOptions=extend({patchProp},nodeOps);let renderer;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}const createApp=(...e)=>{const t=ensureRenderer().createApp(...e),{mount:a}=t;return t.mount=i=>{const f=normalizeContainer(i);if(!f)return;const I=t._component;!isFunction(I)&&!I.render&&!I.template&&(I.template=f.innerHTML),f.innerHTML="";const L=a(f,!1,resolveRootNamespace(f));return f instanceof Element&&(f.removeAttribute("v-cloak"),f.setAttribute("data-v-app","")),L},t};function resolveRootNamespace(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function normalizeContainer(e){return isString(e)?document.querySelector(e):e}/*!
  * vue-router v4.4.3
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const isBrowser=typeof document<"u";function isESModule(e){return e.__esModule||e[Symbol.toStringTag]==="Module"}const assign=Object.assign;function applyToParams(e,t){const a={};for(const i in t){const f=t[i];a[i]=isArray(f)?f.map(e):e(f)}return a}const noop=()=>{},isArray=Array.isArray,HASH_RE=/#/g,AMPERSAND_RE=/&/g,SLASH_RE=/\//g,EQUAL_RE=/=/g,IM_RE=/\?/g,PLUS_RE=/\+/g,ENC_BRACKET_OPEN_RE=/%5B/g,ENC_BRACKET_CLOSE_RE=/%5D/g,ENC_CARET_RE=/%5E/g,ENC_BACKTICK_RE=/%60/g,ENC_CURLY_OPEN_RE=/%7B/g,ENC_PIPE_RE=/%7C/g,ENC_CURLY_CLOSE_RE=/%7D/g,ENC_SPACE_RE=/%20/g;function commonEncode(e){return encodeURI(""+e).replace(ENC_PIPE_RE,"|").replace(ENC_BRACKET_OPEN_RE,"[").replace(ENC_BRACKET_CLOSE_RE,"]")}function encodeHash(e){return commonEncode(e).replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryValue(e){return commonEncode(e).replace(PLUS_RE,"%2B").replace(ENC_SPACE_RE,"+").replace(HASH_RE,"%23").replace(AMPERSAND_RE,"%26").replace(ENC_BACKTICK_RE,"`").replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryKey(e){return encodeQueryValue(e).replace(EQUAL_RE,"%3D")}function encodePath(e){return commonEncode(e).replace(HASH_RE,"%23").replace(IM_RE,"%3F")}function encodeParam(e){return e==null?"":encodePath(e).replace(SLASH_RE,"%2F")}function decode(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const TRAILING_SLASH_RE=/\/$/,removeTrailingSlash=e=>e.replace(TRAILING_SLASH_RE,"");function parseURL(e,t,a="/"){let i,f={},I="",L="";const _=t.indexOf("#");let m=t.indexOf("?");return _<m&&_>=0&&(m=-1),m>-1&&(i=t.slice(0,m),I=t.slice(m+1,_>-1?_:t.length),f=e(I)),_>-1&&(i=i||t.slice(0,_),L=t.slice(_,t.length)),i=resolveRelativePath(i??t,a),{fullPath:i+(I&&"?")+I+L,path:i,query:f,hash:decode(L)}}function stringifyURL(e,t){const a=t.query?e(t.query):"";return t.path+(a&&"?")+a+(t.hash||"")}function stripBase(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function isSameRouteLocation(e,t,a){const i=t.matched.length-1,f=a.matched.length-1;return i>-1&&i===f&&isSameRouteRecord(t.matched[i],a.matched[f])&&isSameRouteLocationParams(t.params,a.params)&&e(t.query)===e(a.query)&&t.hash===a.hash}function isSameRouteRecord(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function isSameRouteLocationParams(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const a in e)if(!isSameRouteLocationParamsValue(e[a],t[a]))return!1;return!0}function isSameRouteLocationParamsValue(e,t){return isArray(e)?isEquivalentArray(e,t):isArray(t)?isEquivalentArray(t,e):e===t}function isEquivalentArray(e,t){return isArray(t)?e.length===t.length&&e.every((a,i)=>a===t[i]):e.length===1&&e[0]===t}function resolveRelativePath(e,t){if(e.startsWith("/"))return e;if(!e)return t;const a=t.split("/"),i=e.split("/"),f=i[i.length-1];(f===".."||f===".")&&i.push("");let I=a.length-1,L,_;for(L=0;L<i.length;L++)if(_=i[L],_!==".")if(_==="..")I>1&&I--;else break;return a.slice(0,I).join("/")+"/"+i.slice(L).join("/")}const START_LOCATION_NORMALIZED={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var NavigationType;(function(e){e.pop="pop",e.push="push"})(NavigationType||(NavigationType={}));var NavigationDirection;(function(e){e.back="back",e.forward="forward",e.unknown=""})(NavigationDirection||(NavigationDirection={}));function normalizeBase(e){if(!e)if(isBrowser){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),removeTrailingSlash(e)}const BEFORE_HASH_RE=/^[^#]+#/;function createHref(e,t){return e.replace(BEFORE_HASH_RE,"#")+t}function getElementPosition(e,t){const a=document.documentElement.getBoundingClientRect(),i=e.getBoundingClientRect();return{behavior:t.behavior,left:i.left-a.left-(t.left||0),top:i.top-a.top-(t.top||0)}}const computeScrollPosition=()=>({left:window.scrollX,top:window.scrollY});function scrollToPosition(e){let t;if("el"in e){const a=e.el,i=typeof a=="string"&&a.startsWith("#"),f=typeof a=="string"?i?document.getElementById(a.slice(1)):document.querySelector(a):a;if(!f)return;t=getElementPosition(f,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function getScrollKey(e,t){return(history.state?history.state.position-t:-1)+e}const scrollPositions=new Map;function saveScrollPosition(e,t){scrollPositions.set(e,t)}function getSavedScrollPosition(e){const t=scrollPositions.get(e);return scrollPositions.delete(e),t}let createBaseLocation=()=>location.protocol+"//"+location.host;function createCurrentLocation(e,t){const{pathname:a,search:i,hash:f}=t,I=e.indexOf("#");if(I>-1){let _=f.includes(e.slice(I))?e.slice(I).length:1,m=f.slice(_);return m[0]!=="/"&&(m="/"+m),stripBase(m,"")}return stripBase(a,e)+i+f}function useHistoryListeners(e,t,a,i){let f=[],I=[],L=null;const _=({state:A})=>{const E=createCurrentLocation(e,location),r=a.value,g=t.value;let b=0;if(A){if(a.value=E,t.value=A,L&&L===r){L=null;return}b=g?A.position-g.position:0}else i(E);f.forEach(P=>{P(a.value,r,{delta:b,type:NavigationType.pop,direction:b?b>0?NavigationDirection.forward:NavigationDirection.back:NavigationDirection.unknown})})};function m(){L=a.value}function n(A){f.push(A);const E=()=>{const r=f.indexOf(A);r>-1&&f.splice(r,1)};return I.push(E),E}function c(){const{history:A}=window;A.state&&A.replaceState(assign({},A.state,{scroll:computeScrollPosition()}),"")}function C(){for(const A of I)A();I=[],window.removeEventListener("popstate",_),window.removeEventListener("beforeunload",c)}return window.addEventListener("popstate",_),window.addEventListener("beforeunload",c,{passive:!0}),{pauseListeners:m,listen:n,destroy:C}}function buildState(e,t,a,i=!1,f=!1){return{back:e,current:t,forward:a,replaced:i,position:window.history.length,scroll:f?computeScrollPosition():null}}function useHistoryStateNavigation(e){const{history:t,location:a}=window,i={value:createCurrentLocation(e,a)},f={value:t.state};f.value||I(i.value,{back:null,current:i.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function I(m,n,c){const C=e.indexOf("#"),A=C>-1?(a.host&&document.querySelector("base")?e:e.slice(C))+m:createBaseLocation()+e+m;try{t[c?"replaceState":"pushState"](n,"",A),f.value=n}catch(E){console.error(E),a[c?"replace":"assign"](A)}}function L(m,n){const c=assign({},t.state,buildState(f.value.back,m,f.value.forward,!0),n,{position:f.value.position});I(m,c,!0),i.value=m}function _(m,n){const c=assign({},f.value,t.state,{forward:m,scroll:computeScrollPosition()});I(c.current,c,!0);const C=assign({},buildState(i.value,m,null),{position:c.position+1},n);I(m,C,!1),i.value=m}return{location:i,state:f,push:_,replace:L}}function createWebHistory(e){e=normalizeBase(e);const t=useHistoryStateNavigation(e),a=useHistoryListeners(e,t.state,t.location,t.replace);function i(I,L=!0){L||a.pauseListeners(),history.go(I)}const f=assign({location:"",base:e,go:i,createHref:createHref.bind(null,e)},t,a);return Object.defineProperty(f,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(f,"state",{enumerable:!0,get:()=>t.state.value}),f}function createWebHashHistory(e){return e=location.host?e||location.pathname+location.search:"",e.includes("#")||(e+="#"),createWebHistory(e)}function isRouteLocation(e){return typeof e=="string"||e&&typeof e=="object"}function isRouteName(e){return typeof e=="string"||typeof e=="symbol"}const NavigationFailureSymbol=Symbol("");var NavigationFailureType;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(NavigationFailureType||(NavigationFailureType={}));function createRouterError(e,t){return assign(new Error,{type:e,[NavigationFailureSymbol]:!0},t)}function isNavigationFailure(e,t){return e instanceof Error&&NavigationFailureSymbol in e&&(t==null||!!(e.type&t))}const BASE_PARAM_PATTERN="[^/]+?",BASE_PATH_PARSER_OPTIONS={sensitive:!1,strict:!1,start:!0,end:!0},REGEX_CHARS_RE=/[.+*?^${}()[\]/\\]/g;function tokensToParser(e,t){const a=assign({},BASE_PATH_PARSER_OPTIONS,t),i=[];let f=a.start?"^":"";const I=[];for(const n of e){const c=n.length?[]:[90];a.strict&&!n.length&&(f+="/");for(let C=0;C<n.length;C++){const A=n[C];let E=40+(a.sensitive?.25:0);if(A.type===0)C||(f+="/"),f+=A.value.replace(REGEX_CHARS_RE,"\\$&"),E+=40;else if(A.type===1){const{value:r,repeatable:g,optional:b,regexp:P}=A;I.push({name:r,repeatable:g,optional:b});const R=P||BASE_PARAM_PATTERN;if(R!==BASE_PARAM_PATTERN){E+=10;try{new RegExp(`(${R})`)}catch(T){throw new Error(`Invalid custom RegExp for param "${r}" (${R}): `+T.message)}}let v=g?`((?:${R})(?:/(?:${R}))*)`:`(${R})`;C||(v=b&&n.length<2?`(?:/${v})`:"/"+v),b&&(v+="?"),f+=v,E+=20,b&&(E+=-8),g&&(E+=-20),R===".*"&&(E+=-50)}c.push(E)}i.push(c)}if(a.strict&&a.end){const n=i.length-1;i[n][i[n].length-1]+=.7000000000000001}a.strict||(f+="/?"),a.end?f+="$":a.strict&&(f+="(?:/|$)");const L=new RegExp(f,a.sensitive?"":"i");function _(n){const c=n.match(L),C={};if(!c)return null;for(let A=1;A<c.length;A++){const E=c[A]||"",r=I[A-1];C[r.name]=E&&r.repeatable?E.split("/"):E}return C}function m(n){let c="",C=!1;for(const A of e){(!C||!c.endsWith("/"))&&(c+="/"),C=!1;for(const E of A)if(E.type===0)c+=E.value;else if(E.type===1){const{value:r,repeatable:g,optional:b}=E,P=r in n?n[r]:"";if(isArray(P)&&!g)throw new Error(`Provided param "${r}" is an array but it is not repeatable (* or + modifiers)`);const R=isArray(P)?P.join("/"):P;if(!R)if(b)A.length<2&&(c.endsWith("/")?c=c.slice(0,-1):C=!0);else throw new Error(`Missing required param "${r}"`);c+=R}}return c||"/"}return{re:L,score:i,keys:I,parse:_,stringify:m}}function compareScoreArray(e,t){let a=0;for(;a<e.length&&a<t.length;){const i=t[a]-e[a];if(i)return i;a++}return e.length<t.length?e.length===1&&e[0]===40+40?-1:1:e.length>t.length?t.length===1&&t[0]===40+40?1:-1:0}function comparePathParserScore(e,t){let a=0;const i=e.score,f=t.score;for(;a<i.length&&a<f.length;){const I=compareScoreArray(i[a],f[a]);if(I)return I;a++}if(Math.abs(f.length-i.length)===1){if(isLastScoreNegative(i))return 1;if(isLastScoreNegative(f))return-1}return f.length-i.length}function isLastScoreNegative(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const ROOT_TOKEN={type:0,value:""},VALID_PARAM_RE=/[a-zA-Z0-9_]/;function tokenizePath(e){if(!e)return[[]];if(e==="/")return[[ROOT_TOKEN]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(E){throw new Error(`ERR (${a})/"${n}": ${E}`)}let a=0,i=a;const f=[];let I;function L(){I&&f.push(I),I=[]}let _=0,m,n="",c="";function C(){n&&(a===0?I.push({type:0,value:n}):a===1||a===2||a===3?(I.length>1&&(m==="*"||m==="+")&&t(`A repeatable param (${n}) must be alone in its segment. eg: '/:ids+.`),I.push({type:1,value:n,regexp:c,repeatable:m==="*"||m==="+",optional:m==="*"||m==="?"})):t("Invalid state to consume buffer"),n="")}function A(){n+=m}for(;_<e.length;){if(m=e[_++],m==="\\"&&a!==2){i=a,a=4;continue}switch(a){case 0:m==="/"?(n&&C(),L()):m===":"?(C(),a=1):A();break;case 4:A(),a=i;break;case 1:m==="("?a=2:VALID_PARAM_RE.test(m)?A():(C(),a=0,m!=="*"&&m!=="?"&&m!=="+"&&_--);break;case 2:m===")"?c[c.length-1]=="\\"?c=c.slice(0,-1)+m:a=3:c+=m;break;case 3:C(),a=0,m!=="*"&&m!=="?"&&m!=="+"&&_--,c="";break;default:t("Unknown state");break}}return a===2&&t(`Unfinished custom RegExp for param "${n}"`),C(),L(),f}function createRouteRecordMatcher(e,t,a){const i=tokensToParser(tokenizePath(e.path),a),f=assign(i,{record:e,parent:t,children:[],alias:[]});return t&&!f.record.aliasOf==!t.record.aliasOf&&t.children.push(f),f}function createRouterMatcher(e,t){const a=[],i=new Map;t=mergeOptions({strict:!1,end:!0,sensitive:!1},t);function f(C){return i.get(C)}function I(C,A,E){const r=!E,g=normalizeRouteRecord(C);g.aliasOf=E&&E.record;const b=mergeOptions(t,C),P=[g];if("alias"in C){const T=typeof C.alias=="string"?[C.alias]:C.alias;for(const o of T)P.push(assign({},g,{components:E?E.record.components:g.components,path:o,aliasOf:E?E.record:g}))}let R,v;for(const T of P){const{path:o}=T;if(A&&o[0]!=="/"){const l=A.record.path,S=l[l.length-1]==="/"?"":"/";T.path=A.record.path+(o&&S+o)}if(R=createRouteRecordMatcher(T,A,b),E?E.alias.push(R):(v=v||R,v!==R&&v.alias.push(R),r&&C.name&&!isAliasRecord(R)&&L(C.name)),isMatchable(R)&&m(R),g.children){const l=g.children;for(let S=0;S<l.length;S++)I(l[S],R,E&&E.children[S])}E=E||R}return v?()=>{L(v)}:noop}function L(C){if(isRouteName(C)){const A=i.get(C);A&&(i.delete(C),a.splice(a.indexOf(A),1),A.children.forEach(L),A.alias.forEach(L))}else{const A=a.indexOf(C);A>-1&&(a.splice(A,1),C.record.name&&i.delete(C.record.name),C.children.forEach(L),C.alias.forEach(L))}}function _(){return a}function m(C){const A=findInsertionIndex(C,a);a.splice(A,0,C),C.record.name&&!isAliasRecord(C)&&i.set(C.record.name,C)}function n(C,A){let E,r={},g,b;if("name"in C&&C.name){if(E=i.get(C.name),!E)throw createRouterError(1,{location:C});b=E.record.name,r=assign(paramsFromLocation(A.params,E.keys.filter(v=>!v.optional).concat(E.parent?E.parent.keys.filter(v=>v.optional):[]).map(v=>v.name)),C.params&&paramsFromLocation(C.params,E.keys.map(v=>v.name))),g=E.stringify(r)}else if(C.path!=null)g=C.path,E=a.find(v=>v.re.test(g)),E&&(r=E.parse(g),b=E.record.name);else{if(E=A.name?i.get(A.name):a.find(v=>v.re.test(A.path)),!E)throw createRouterError(1,{location:C,currentLocation:A});b=E.record.name,r=assign({},A.params,C.params),g=E.stringify(r)}const P=[];let R=E;for(;R;)P.unshift(R.record),R=R.parent;return{name:b,path:g,params:r,matched:P,meta:mergeMetaFields(P)}}e.forEach(C=>I(C));function c(){a.length=0,i.clear()}return{addRoute:I,resolve:n,removeRoute:L,clearRoutes:c,getRoutes:_,getRecordMatcher:f}}function paramsFromLocation(e,t){const a={};for(const i of t)i in e&&(a[i]=e[i]);return a}function normalizeRouteRecord(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:normalizeRecordProps(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function normalizeRecordProps(e){const t={},a=e.props||!1;if("component"in e)t.default=a;else for(const i in e.components)t[i]=typeof a=="object"?a[i]:a;return t}function isAliasRecord(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function mergeMetaFields(e){return e.reduce((t,a)=>assign(t,a.meta),{})}function mergeOptions(e,t){const a={};for(const i in e)a[i]=i in t?t[i]:e[i];return a}function findInsertionIndex(e,t){let a=0,i=t.length;for(;a!==i;){const I=a+i>>1;comparePathParserScore(e,t[I])<0?i=I:a=I+1}const f=getInsertionAncestor(e);return f&&(i=t.lastIndexOf(f,i-1)),i}function getInsertionAncestor(e){let t=e;for(;t=t.parent;)if(isMatchable(t)&&comparePathParserScore(e,t)===0)return t}function isMatchable({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function parseQuery(e){const t={};if(e===""||e==="?")return t;const i=(e[0]==="?"?e.slice(1):e).split("&");for(let f=0;f<i.length;++f){const I=i[f].replace(PLUS_RE," "),L=I.indexOf("="),_=decode(L<0?I:I.slice(0,L)),m=L<0?null:decode(I.slice(L+1));if(_ in t){let n=t[_];isArray(n)||(n=t[_]=[n]),n.push(m)}else t[_]=m}return t}function stringifyQuery(e){let t="";for(let a in e){const i=e[a];if(a=encodeQueryKey(a),i==null){i!==void 0&&(t+=(t.length?"&":"")+a);continue}(isArray(i)?i.map(I=>I&&encodeQueryValue(I)):[i&&encodeQueryValue(i)]).forEach(I=>{I!==void 0&&(t+=(t.length?"&":"")+a,I!=null&&(t+="="+I))})}return t}function normalizeQuery(e){const t={};for(const a in e){const i=e[a];i!==void 0&&(t[a]=isArray(i)?i.map(f=>f==null?null:""+f):i==null?i:""+i)}return t}const matchedRouteKey=Symbol(""),viewDepthKey=Symbol(""),routerKey=Symbol(""),routeLocationKey=Symbol(""),routerViewLocationKey=Symbol("");function useCallbacks(){let e=[];function t(i){return e.push(i),()=>{const f=e.indexOf(i);f>-1&&e.splice(f,1)}}function a(){e=[]}return{add:t,list:()=>e.slice(),reset:a}}function guardToPromiseFn(e,t,a,i,f,I=L=>L()){const L=i&&(i.enterCallbacks[f]=i.enterCallbacks[f]||[]);return()=>new Promise((_,m)=>{const n=A=>{A===!1?m(createRouterError(4,{from:a,to:t})):A instanceof Error?m(A):isRouteLocation(A)?m(createRouterError(2,{from:t,to:A})):(L&&i.enterCallbacks[f]===L&&typeof A=="function"&&L.push(A),_())},c=I(()=>e.call(i&&i.instances[f],t,a,n));let C=Promise.resolve(c);e.length<3&&(C=C.then(n)),C.catch(A=>m(A))})}function extractComponentsGuards(e,t,a,i,f=I=>I()){const I=[];for(const L of e)for(const _ in L.components){let m=L.components[_];if(!(t!=="beforeRouteEnter"&&!L.instances[_]))if(isRouteComponent(m)){const c=(m.__vccOpts||m)[t];c&&I.push(guardToPromiseFn(c,a,i,L,_,f))}else{let n=m();I.push(()=>n.then(c=>{if(!c)return Promise.reject(new Error(`Couldn't resolve component "${_}" at "${L.path}"`));const C=isESModule(c)?c.default:c;L.components[_]=C;const E=(C.__vccOpts||C)[t];return E&&guardToPromiseFn(E,a,i,L,_,f)()}))}}return I}function isRouteComponent(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function useLink(e){const t=inject(routerKey),a=inject(routeLocationKey),i=computed(()=>{const m=unref(e.to);return t.resolve(m)}),f=computed(()=>{const{matched:m}=i.value,{length:n}=m,c=m[n-1],C=a.matched;if(!c||!C.length)return-1;const A=C.findIndex(isSameRouteRecord.bind(null,c));if(A>-1)return A;const E=getOriginalPath(m[n-2]);return n>1&&getOriginalPath(c)===E&&C[C.length-1].path!==E?C.findIndex(isSameRouteRecord.bind(null,m[n-2])):A}),I=computed(()=>f.value>-1&&includesParams(a.params,i.value.params)),L=computed(()=>f.value>-1&&f.value===a.matched.length-1&&isSameRouteLocationParams(a.params,i.value.params));function _(m={}){return guardEvent(m)?t[unref(e.replace)?"replace":"push"](unref(e.to)).catch(noop):Promise.resolve()}return{route:i,href:computed(()=>i.value.href),isActive:I,isExactActive:L,navigate:_}}const RouterLinkImpl=defineComponent({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink,setup(e,{slots:t}){const a=reactive(useLink(e)),{options:i}=inject(routerKey),f=computed(()=>({[getLinkClass(e.activeClass,i.linkActiveClass,"router-link-active")]:a.isActive,[getLinkClass(e.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:a.isExactActive}));return()=>{const I=t.default&&t.default(a);return e.custom?I:h("a",{"aria-current":a.isExactActive?e.ariaCurrentValue:null,href:a.href,onClick:a.navigate,class:f.value},I)}}}),RouterLink=RouterLinkImpl;function guardEvent(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function includesParams(e,t){for(const a in t){const i=t[a],f=e[a];if(typeof i=="string"){if(i!==f)return!1}else if(!isArray(f)||f.length!==i.length||i.some((I,L)=>I!==f[L]))return!1}return!0}function getOriginalPath(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const getLinkClass=(e,t,a)=>e??t??a,RouterViewImpl=defineComponent({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:a}){const i=inject(routerViewLocationKey),f=computed(()=>e.route||i.value),I=inject(viewDepthKey,0),L=computed(()=>{let n=unref(I);const{matched:c}=f.value;let C;for(;(C=c[n])&&!C.components;)n++;return n}),_=computed(()=>f.value.matched[L.value]);provide(viewDepthKey,computed(()=>L.value+1)),provide(matchedRouteKey,_),provide(routerViewLocationKey,f);const m=ref();return watch(()=>[m.value,_.value,e.name],([n,c,C],[A,E,r])=>{c&&(c.instances[C]=n,E&&E!==c&&n&&n===A&&(c.leaveGuards.size||(c.leaveGuards=E.leaveGuards),c.updateGuards.size||(c.updateGuards=E.updateGuards))),n&&c&&(!E||!isSameRouteRecord(c,E)||!A)&&(c.enterCallbacks[C]||[]).forEach(g=>g(n))},{flush:"post"}),()=>{const n=f.value,c=e.name,C=_.value,A=C&&C.components[c];if(!A)return normalizeSlot(a.default,{Component:A,route:n});const E=C.props[c],r=E?E===!0?n.params:typeof E=="function"?E(n):E:null,b=h(A,assign({},r,t,{onVnodeUnmounted:P=>{P.component.isUnmounted&&(C.instances[c]=null)},ref:m}));return normalizeSlot(a.default,{Component:b,route:n})||b}}});function normalizeSlot(e,t){if(!e)return null;const a=e(t);return a.length===1?a[0]:a}const RouterView=RouterViewImpl;function createRouter(e){const t=createRouterMatcher(e.routes,e),a=e.parseQuery||parseQuery,i=e.stringifyQuery||stringifyQuery,f=e.history,I=useCallbacks(),L=useCallbacks(),_=useCallbacks(),m=shallowRef(START_LOCATION_NORMALIZED);let n=START_LOCATION_NORMALIZED;isBrowser&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const c=applyToParams.bind(null,u=>""+u),C=applyToParams.bind(null,encodeParam),A=applyToParams.bind(null,decode);function E(u,x){let V,W;return isRouteName(u)?(V=t.getRecordMatcher(u),W=x):W=u,t.addRoute(W,V)}function r(u){const x=t.getRecordMatcher(u);x&&t.removeRoute(x)}function g(){return t.getRoutes().map(u=>u.record)}function b(u){return!!t.getRecordMatcher(u)}function P(u,x){if(x=assign({},x||m.value),typeof u=="string"){const O=parseURL(a,u,x.path),$=t.resolve({path:O.path},x),de=f.createHref(O.fullPath);return assign(O,$,{params:A($.params),hash:decode(O.hash),redirectedFrom:void 0,href:de})}let V;if(u.path!=null)V=assign({},u,{path:parseURL(a,u.path,x.path).path});else{const O=assign({},u.params);for(const $ in O)O[$]==null&&delete O[$];V=assign({},u,{params:C(O)}),x.params=C(x.params)}const W=t.resolve(V,x),X=u.hash||"";W.params=c(A(W.params));const me=stringifyURL(i,assign({},u,{hash:encodeHash(X),path:W.path})),B=f.createHref(me);return assign({fullPath:me,hash:X,query:i===stringifyQuery?normalizeQuery(u.query):u.query||{}},W,{redirectedFrom:void 0,href:B})}function R(u){return typeof u=="string"?parseURL(a,u,m.value.path):assign({},u)}function v(u,x){if(n!==u)return createRouterError(8,{from:x,to:u})}function T(u){return S(u)}function o(u){return T(assign(R(u),{replace:!0}))}function l(u){const x=u.matched[u.matched.length-1];if(x&&x.redirect){const{redirect:V}=x;let W=typeof V=="function"?V(u):V;return typeof W=="string"&&(W=W.includes("?")||W.includes("#")?W=R(W):{path:W},W.params={}),assign({query:u.query,hash:u.hash,params:W.path!=null?{}:u.params},W)}}function S(u,x){const V=n=P(u),W=m.value,X=u.state,me=u.force,B=u.replace===!0,O=l(V);if(O)return S(assign(R(O),{state:typeof O=="object"?assign({},X,O.state):X,force:me,replace:B}),x||V);const $=V;$.redirectedFrom=x;let de;return!me&&isSameRouteLocation(i,W,V)&&(de=createRouterError(16,{to:$,from:W}),Ce(W,W,!0,!1)),(de?Promise.resolve(de):N($,W)).catch(te=>isNavigationFailure(te)?isNavigationFailure(te,2)?te:se(te):K(te,$,W)).then(te=>{if(te){if(isNavigationFailure(te,2))return S(assign({replace:B},R(te.to),{state:typeof te.to=="object"?assign({},X,te.to.state):X,force:me}),x||$)}else te=G($,W,!0,B,X);return D($,W,te),te})}function y(u,x){const V=v(u,x);return V?Promise.reject(V):Promise.resolve()}function w(u){const x=M.values().next().value;return x&&typeof x.runWithContext=="function"?x.runWithContext(u):u()}function N(u,x){let V;const[W,X,me]=extractChangingRecords(u,x);V=extractComponentsGuards(W.reverse(),"beforeRouteLeave",u,x);for(const O of W)O.leaveGuards.forEach($=>{V.push(guardToPromiseFn($,u,x))});const B=y.bind(null,u,x);return V.push(B),d(V).then(()=>{V=[];for(const O of I.list())V.push(guardToPromiseFn(O,u,x));return V.push(B),d(V)}).then(()=>{V=extractComponentsGuards(X,"beforeRouteUpdate",u,x);for(const O of X)O.updateGuards.forEach($=>{V.push(guardToPromiseFn($,u,x))});return V.push(B),d(V)}).then(()=>{V=[];for(const O of me)if(O.beforeEnter)if(isArray(O.beforeEnter))for(const $ of O.beforeEnter)V.push(guardToPromiseFn($,u,x));else V.push(guardToPromiseFn(O.beforeEnter,u,x));return V.push(B),d(V)}).then(()=>(u.matched.forEach(O=>O.enterCallbacks={}),V=extractComponentsGuards(me,"beforeRouteEnter",u,x,w),V.push(B),d(V))).then(()=>{V=[];for(const O of L.list())V.push(guardToPromiseFn(O,u,x));return V.push(B),d(V)}).catch(O=>isNavigationFailure(O,8)?O:Promise.reject(O))}function D(u,x,V){_.list().forEach(W=>w(()=>W(u,x,V)))}function G(u,x,V,W,X){const me=v(u,x);if(me)return me;const B=x===START_LOCATION_NORMALIZED,O=isBrowser?history.state:{};V&&(W||B?f.replace(u.fullPath,assign({scroll:B&&O&&O.scroll},X)):f.push(u.fullPath,X)),m.value=u,Ce(u,x,V,B),se()}let le;function H(){le||(le=f.listen((u,x,V)=>{if(!F.listening)return;const W=P(u),X=l(W);if(X){S(assign(X,{replace:!0}),W).catch(noop);return}n=W;const me=m.value;isBrowser&&saveScrollPosition(getScrollKey(me.fullPath,V.delta),computeScrollPosition()),N(W,me).catch(B=>isNavigationFailure(B,12)?B:isNavigationFailure(B,2)?(S(B.to,W).then(O=>{isNavigationFailure(O,20)&&!V.delta&&V.type===NavigationType.pop&&f.go(-1,!1)}).catch(noop),Promise.reject()):(V.delta&&f.go(-V.delta,!1),K(B,W,me))).then(B=>{B=B||G(W,me,!1),B&&(V.delta&&!isNavigationFailure(B,8)?f.go(-V.delta,!1):V.type===NavigationType.pop&&isNavigationFailure(B,20)&&f.go(-1,!1)),D(W,me,B)}).catch(noop)}))}let Z=useCallbacks(),re=useCallbacks(),Q;function K(u,x,V){se(u);const W=re.list();return W.length?W.forEach(X=>X(u,x,V)):console.error(u),Promise.reject(u)}function ue(){return Q&&m.value!==START_LOCATION_NORMALIZED?Promise.resolve():new Promise((u,x)=>{Z.add([u,x])})}function se(u){return Q||(Q=!u,H(),Z.list().forEach(([x,V])=>u?V(u):x()),Z.reset()),u}function Ce(u,x,V,W){const{scrollBehavior:X}=e;if(!isBrowser||!X)return Promise.resolve();const me=!V&&getSavedScrollPosition(getScrollKey(u.fullPath,0))||(W||!V)&&history.state&&history.state.scroll||null;return nextTick().then(()=>X(u,x,me)).then(B=>B&&scrollToPosition(B)).catch(B=>K(B,u,x))}const Me=u=>f.go(u);let q;const M=new Set,F={currentRoute:m,listening:!0,addRoute:E,removeRoute:r,clearRoutes:t.clearRoutes,hasRoute:b,getRoutes:g,resolve:P,options:e,push:T,replace:o,go:Me,back:()=>Me(-1),forward:()=>Me(1),beforeEach:I.add,beforeResolve:L.add,afterEach:_.add,onError:re.add,isReady:ue,install(u){const x=this;u.component("RouterLink",RouterLink),u.component("RouterView",RouterView),u.config.globalProperties.$router=x,Object.defineProperty(u.config.globalProperties,"$route",{enumerable:!0,get:()=>unref(m)}),isBrowser&&!q&&m.value===START_LOCATION_NORMALIZED&&(q=!0,T(f.location).catch(X=>{}));const V={};for(const X in START_LOCATION_NORMALIZED)Object.defineProperty(V,X,{get:()=>m.value[X],enumerable:!0});u.provide(routerKey,x),u.provide(routeLocationKey,shallowReactive(V)),u.provide(routerViewLocationKey,m);const W=u.unmount;M.add(u),u.unmount=function(){M.delete(u),M.size<1&&(n=START_LOCATION_NORMALIZED,le&&le(),le=null,m.value=START_LOCATION_NORMALIZED,q=!1,Q=!1),W()}}};function d(u){return u.reduce((x,V)=>x.then(()=>w(V)),Promise.resolve())}return F}function extractChangingRecords(e,t){const a=[],i=[],f=[],I=Math.max(t.matched.length,e.matched.length);for(let L=0;L<I;L++){const _=t.matched[L];_&&(e.matched.find(n=>isSameRouteRecord(n,_))?i.push(_):a.push(_));const m=e.matched[L];m&&(t.matched.find(n=>isSameRouteRecord(n,m))||f.push(m))}return[a,i,f]}function useRoute(e){return inject(routeLocationKey)}const App_vue_vue_type_style_index_0_scoped_4fecbfb6_lang="",_export_sfc=(e,t)=>{const a=e.__vccOpts||e;for(const[i,f]of t)a[i]=f;return a},_sfc_main$2={__name:"App",setup(e){const t=useRoute();return console.log("route",t),(a,i)=>(openBlock(),createElementBlock(Fragment,null,[createBaseVNode("aside",null,[createBaseVNode("nav",null,[createVNode(unref(RouterLink),{class:normalizeClass(["nav-link",{active:unref(t).path==="/custom-toolbar"}]),to:"/custom-toolbar"},{default:withCtx(()=>[createTextVNode("Custom Toolbar")]),_:1},8,["class"]),createVNode(unref(RouterLink),{class:normalizeClass(["nav-link",{active:unref(t).path==="/multiple-pdf-files"}]),to:"/multiple-pdf-files"},{default:withCtx(()=>[createTextVNode("Multiple PDF")]),_:1},8,["class"])])]),createBaseVNode("main",null,[createVNode(unref(RouterView))])],64))}},App=_export_sfc(_sfc_main$2,[["__scopeId","data-v-4fecbfb6"]]);function getAugmentedNamespace(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var a=function i(){return this instanceof i?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};a.prototype=t.prototype}else a={};return Object.defineProperty(a,"__esModule",{value:!0}),Object.keys(e).forEach(function(i){var f=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(a,i,f.get?f:{enumerable:!0,get:function(){return e[i]}})}),a}var app$1={exports:{}};function commonjsRequire(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1),canvas=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),require$$1=getAugmentedNamespace(canvas);var hasRequiredPdf;function requirePdf(){return hasRequiredPdf||(hasRequiredPdf=1,function(module,exports){(function(t,a){module.exports=t.pdfjsLib=a()})(globalThis,()=>(()=>{var __webpack_modules__=[,(e,t)=>{var Qe;Object.defineProperty(t,"__esModule",{value:!0}),t.VerbosityLevel=t.Util=t.UnknownErrorException=t.UnexpectedResponseException=t.TextRenderingMode=t.RenderingIntentFlag=t.PromiseCapability=t.PermissionFlag=t.PasswordResponses=t.PasswordException=t.PageActionEventType=t.OPS=t.MissingPDFException=t.MAX_IMAGE_SIZE_TO_CACHE=t.LINE_FACTOR=t.LINE_DESCENT_FACTOR=t.InvalidPDFException=t.ImageKind=t.IDENTITY_MATRIX=t.FormatError=t.FeatureTest=t.FONT_IDENTITY_MATRIX=t.DocumentActionEventType=t.CMapCompressionType=t.BaseException=t.BASELINE_FACTOR=t.AnnotationType=t.AnnotationReplyType=t.AnnotationPrefix=t.AnnotationMode=t.AnnotationFlag=t.AnnotationFieldFlag=t.AnnotationEditorType=t.AnnotationEditorPrefix=t.AnnotationEditorParamsType=t.AnnotationBorderStyleType=t.AnnotationActionEventType=t.AbortException=void 0,t.assert=ue,t.bytesToString=X,t.createValidAbsoluteUrl=Ce,t.getModificationDate=Te,t.getUuid=Ge,t.getVerbosityLevel=Z,t.info=re,t.isArrayBuffer=be,t.isArrayEqual=Le,t.isNodeJS=void 0,t.normalizeUnicode=Ue,t.objectFromMap=$,t.objectSize=O,t.setVerbosityLevel=H,t.shadow=Me,t.string32=B,t.stringToBytes=me,t.stringToPDFString=ae,t.stringToUTF8String=ne,t.unreachable=K,t.utf8StringToString=ce,t.warn=Q;const a=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");t.isNodeJS=a;const i=[1,0,0,1,0,0];t.IDENTITY_MATRIX=i;const f=[.001,0,0,.001,0,0];t.FONT_IDENTITY_MATRIX=f;const I=1e7;t.MAX_IMAGE_SIZE_TO_CACHE=I;const L=1.35;t.LINE_FACTOR=L;const _=.35;t.LINE_DESCENT_FACTOR=_;const m=_/L;t.BASELINE_FACTOR=m;const n={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};t.RenderingIntentFlag=n;const c={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};t.AnnotationMode=c;const C="pdfjs_internal_editor_";t.AnnotationEditorPrefix=C;const A={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};t.AnnotationEditorType=A;const E={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};t.AnnotationEditorParamsType=E;const r={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};t.PermissionFlag=r;const g={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};t.TextRenderingMode=g;const b={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};t.ImageKind=b;const P={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};t.AnnotationType=P;const R={GROUP:"Group",REPLY:"R"};t.AnnotationReplyType=R;const v={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};t.AnnotationFlag=v;const T={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};t.AnnotationFieldFlag=T;const o={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};t.AnnotationBorderStyleType=o;const l={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};t.AnnotationActionEventType=l;const S={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};t.DocumentActionEventType=S;const y={O:"PageOpen",C:"PageClose"};t.PageActionEventType=y;const w={ERRORS:0,WARNINGS:1,INFOS:5};t.VerbosityLevel=w;const N={NONE:0,BINARY:1};t.CMapCompressionType=N;const D={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};t.OPS=D;const G={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};t.PasswordResponses=G;let le=w.WARNINGS;function H(xe){Number.isInteger(xe)&&(le=xe)}function Z(){return le}function re(xe){le>=w.INFOS&&console.log(`Info: ${xe}`)}function Q(xe){le>=w.WARNINGS&&console.log(`Warning: ${xe}`)}function K(xe){throw new Error(xe)}function ue(xe,U){xe||K(U)}function se(xe){switch(xe==null?void 0:xe.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Ce(xe,U=null,Y=null){if(!xe)return null;try{if(Y&&typeof xe=="string"){if(Y.addDefaultProtocol&&xe.startsWith("www.")){const ee=xe.match(/\./g);(ee==null?void 0:ee.length)>=2&&(xe=`http://${xe}`)}if(Y.tryConvertEncoding)try{xe=ne(xe)}catch{}}const Ee=U?new URL(xe,U):new URL(xe);if(se(Ee))return Ee}catch{}return null}function Me(xe,U,Y,Ee=!1){return Object.defineProperty(xe,U,{value:Y,enumerable:!Ee,configurable:!0,writable:!1}),Y}const q=function(){function U(Y,Ee){this.constructor===U&&K("Cannot initialize BaseException."),this.message=Y,this.name=Ee}return U.prototype=new Error,U.constructor=U,U}();t.BaseException=q;class M extends q{constructor(U,Y){super(U,"PasswordException"),this.code=Y}}t.PasswordException=M;class F extends q{constructor(U,Y){super(U,"UnknownErrorException"),this.details=Y}}t.UnknownErrorException=F;class d extends q{constructor(U){super(U,"InvalidPDFException")}}t.InvalidPDFException=d;class u extends q{constructor(U){super(U,"MissingPDFException")}}t.MissingPDFException=u;class x extends q{constructor(U,Y){super(U,"UnexpectedResponseException"),this.status=Y}}t.UnexpectedResponseException=x;class V extends q{constructor(U){super(U,"FormatError")}}t.FormatError=V;class W extends q{constructor(U){super(U,"AbortException")}}t.AbortException=W;function X(xe){(typeof xe!="object"||(xe==null?void 0:xe.length)===void 0)&&K("Invalid argument for bytesToString");const U=xe.length,Y=8192;if(U<Y)return String.fromCharCode.apply(null,xe);const Ee=[];for(let ee=0;ee<U;ee+=Y){const pe=Math.min(ee+Y,U),we=xe.subarray(ee,pe);Ee.push(String.fromCharCode.apply(null,we))}return Ee.join("")}function me(xe){typeof xe!="string"&&K("Invalid argument for stringToBytes");const U=xe.length,Y=new Uint8Array(U);for(let Ee=0;Ee<U;++Ee)Y[Ee]=xe.charCodeAt(Ee)&255;return Y}function B(xe){return String.fromCharCode(xe>>24&255,xe>>16&255,xe>>8&255,xe&255)}function O(xe){return Object.keys(xe).length}function $(xe){const U=Object.create(null);for(const[Y,Ee]of xe)U[Y]=Ee;return U}function de(){const xe=new Uint8Array(4);return xe[0]=1,new Uint32Array(xe.buffer,0,1)[0]===1}function te(){try{return new Function(""),!0}catch{return!1}}class ve{static get isLittleEndian(){return Me(this,"isLittleEndian",de())}static get isEvalSupported(){return Me(this,"isEvalSupported",te())}static get isOffscreenCanvasSupported(){return Me(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?Me(this,"platform",{isWin:!1,isMac:!1}):Me(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){var U,Y;return Me(this,"isCSSRoundSupported",(Y=(U=globalThis.CSS)==null?void 0:U.supports)==null?void 0:Y.call(U,"width: round(1.5px, 1px)"))}}t.FeatureTest=ve;const Pe=[...Array(256).keys()].map(xe=>xe.toString(16).padStart(2,"0"));class Se{static makeHexColor(U,Y,Ee){return`#${Pe[U]}${Pe[Y]}${Pe[Ee]}`}static scaleMinMax(U,Y){let Ee;U[0]?(U[0]<0&&(Ee=Y[0],Y[0]=Y[1],Y[1]=Ee),Y[0]*=U[0],Y[1]*=U[0],U[3]<0&&(Ee=Y[2],Y[2]=Y[3],Y[3]=Ee),Y[2]*=U[3],Y[3]*=U[3]):(Ee=Y[0],Y[0]=Y[2],Y[2]=Ee,Ee=Y[1],Y[1]=Y[3],Y[3]=Ee,U[1]<0&&(Ee=Y[2],Y[2]=Y[3],Y[3]=Ee),Y[2]*=U[1],Y[3]*=U[1],U[2]<0&&(Ee=Y[0],Y[0]=Y[1],Y[1]=Ee),Y[0]*=U[2],Y[1]*=U[2]),Y[0]+=U[4],Y[1]+=U[4],Y[2]+=U[5],Y[3]+=U[5]}static transform(U,Y){return[U[0]*Y[0]+U[2]*Y[1],U[1]*Y[0]+U[3]*Y[1],U[0]*Y[2]+U[2]*Y[3],U[1]*Y[2]+U[3]*Y[3],U[0]*Y[4]+U[2]*Y[5]+U[4],U[1]*Y[4]+U[3]*Y[5]+U[5]]}static applyTransform(U,Y){const Ee=U[0]*Y[0]+U[1]*Y[2]+Y[4],ee=U[0]*Y[1]+U[1]*Y[3]+Y[5];return[Ee,ee]}static applyInverseTransform(U,Y){const Ee=Y[0]*Y[3]-Y[1]*Y[2],ee=(U[0]*Y[3]-U[1]*Y[2]+Y[2]*Y[5]-Y[4]*Y[3])/Ee,pe=(-U[0]*Y[1]+U[1]*Y[0]+Y[4]*Y[1]-Y[5]*Y[0])/Ee;return[ee,pe]}static getAxialAlignedBoundingBox(U,Y){const Ee=this.applyTransform(U,Y),ee=this.applyTransform(U.slice(2,4),Y),pe=this.applyTransform([U[0],U[3]],Y),we=this.applyTransform([U[2],U[1]],Y);return[Math.min(Ee[0],ee[0],pe[0],we[0]),Math.min(Ee[1],ee[1],pe[1],we[1]),Math.max(Ee[0],ee[0],pe[0],we[0]),Math.max(Ee[1],ee[1],pe[1],we[1])]}static inverseTransform(U){const Y=U[0]*U[3]-U[1]*U[2];return[U[3]/Y,-U[1]/Y,-U[2]/Y,U[0]/Y,(U[2]*U[5]-U[4]*U[3])/Y,(U[4]*U[1]-U[5]*U[0])/Y]}static singularValueDecompose2dScale(U){const Y=[U[0],U[2],U[1],U[3]],Ee=U[0]*Y[0]+U[1]*Y[2],ee=U[0]*Y[1]+U[1]*Y[3],pe=U[2]*Y[0]+U[3]*Y[2],we=U[2]*Y[1]+U[3]*Y[3],ie=(Ee+we)/2,_e=Math.sqrt((Ee+we)**2-4*(Ee*we-pe*ee))/2,ke=ie+_e||1,Re=ie-_e||1;return[Math.sqrt(ke),Math.sqrt(Re)]}static normalizeRect(U){const Y=U.slice(0);return U[0]>U[2]&&(Y[0]=U[2],Y[2]=U[0]),U[1]>U[3]&&(Y[1]=U[3],Y[3]=U[1]),Y}static intersect(U,Y){const Ee=Math.max(Math.min(U[0],U[2]),Math.min(Y[0],Y[2])),ee=Math.min(Math.max(U[0],U[2]),Math.max(Y[0],Y[2]));if(Ee>ee)return null;const pe=Math.max(Math.min(U[1],U[3]),Math.min(Y[1],Y[3])),we=Math.min(Math.max(U[1],U[3]),Math.max(Y[1],Y[3]));return pe>we?null:[Ee,pe,ee,we]}static bezierBoundingBox(U,Y,Ee,ee,pe,we,ie,_e){const ke=[],Re=[[],[]];let Fe,Ve,We,Oe,Ye,$e,ge,k;for(let Ae=0;Ae<2;++Ae){if(Ae===0?(Ve=6*U-12*Ee+6*pe,Fe=-3*U+9*Ee-9*pe+3*ie,We=3*Ee-3*U):(Ve=6*Y-12*ee+6*we,Fe=-3*Y+9*ee-9*we+3*_e,We=3*ee-3*Y),Math.abs(Fe)<1e-12){if(Math.abs(Ve)<1e-12)continue;Oe=-We/Ve,0<Oe&&Oe<1&&ke.push(Oe);continue}ge=Ve*Ve-4*We*Fe,k=Math.sqrt(ge),!(ge<0)&&(Ye=(-Ve+k)/(2*Fe),0<Ye&&Ye<1&&ke.push(Ye),$e=(-Ve-k)/(2*Fe),0<$e&&$e<1&&ke.push($e))}let J=ke.length,fe;const ye=J;for(;J--;)Oe=ke[J],fe=1-Oe,Re[0][J]=fe*fe*fe*U+3*fe*fe*Oe*Ee+3*fe*Oe*Oe*pe+Oe*Oe*Oe*ie,Re[1][J]=fe*fe*fe*Y+3*fe*fe*Oe*ee+3*fe*Oe*Oe*we+Oe*Oe*Oe*_e;return Re[0][ye]=U,Re[1][ye]=Y,Re[0][ye+1]=ie,Re[1][ye+1]=_e,Re[0].length=Re[1].length=ye+2,[Math.min(...Re[0]),Math.min(...Re[1]),Math.max(...Re[0]),Math.max(...Re[1])]}}t.Util=Se;const oe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function ae(xe){if(xe[0]>=""){let Y;if(xe[0]===""&&xe[1]===""?Y="utf-16be":xe[0]===""&&xe[1]===""?Y="utf-16le":xe[0]===""&&xe[1]===""&&xe[2]===""&&(Y="utf-8"),Y)try{const Ee=new TextDecoder(Y,{fatal:!0}),ee=me(xe);return Ee.decode(ee)}catch(Ee){Q(`stringToPDFString: "${Ee}".`)}}const U=[];for(let Y=0,Ee=xe.length;Y<Ee;Y++){const ee=oe[xe.charCodeAt(Y)];U.push(ee?String.fromCharCode(ee):xe.charAt(Y))}return U.join("")}function ne(xe){return decodeURIComponent(escape(xe))}function ce(xe){return unescape(encodeURIComponent(xe))}function be(xe){return typeof xe=="object"&&(xe==null?void 0:xe.byteLength)!==void 0}function Le(xe,U){if(xe.length!==U.length)return!1;for(let Y=0,Ee=xe.length;Y<Ee;Y++)if(xe[Y]!==U[Y])return!1;return!0}function Te(xe=new Date){return[xe.getUTCFullYear().toString(),(xe.getUTCMonth()+1).toString().padStart(2,"0"),xe.getUTCDate().toString().padStart(2,"0"),xe.getUTCHours().toString().padStart(2,"0"),xe.getUTCMinutes().toString().padStart(2,"0"),xe.getUTCSeconds().toString().padStart(2,"0")].join("")}class Be{constructor(){j(this,Qe,!1);this.promise=new Promise((U,Y)=>{this.resolve=Ee=>{he(this,Qe,!0),U(Ee)},this.reject=Ee=>{he(this,Qe,!0),Y(Ee)}})}get settled(){return s(this,Qe)}}Qe=new WeakMap,t.PromiseCapability=Be;let Ne=null,je=null;function Ue(xe){return Ne||(Ne=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,je=new Map([["","t"]])),xe.replaceAll(Ne,(U,Y,Ee)=>Y?Y.normalize("NFKC"):je.get(Ee))}function Ge(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const xe=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(xe);else for(let U=0;U<32;U++)xe[U]=Math.floor(Math.random()*255);return X(xe)}const qe="pdfjs_internal_id_";t.AnnotationPrefix=qe},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var e,a,i,f,pt,L,Dt,m,n,c,C,A,E,r,g,b,Bt,R,v,oi,o,l;Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(y){if(typeof y=="string"||y instanceof URL?y={url:y}:(0,_util.isArrayBuffer)(y)&&(y={data:y}),typeof y!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!y.url&&!y.data&&!y.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const w=new PDFDocumentLoadingTask,{docId:N}=w,D=y.url?getUrlProp(y.url):null,G=y.data?getDataProp(y.data):null,le=y.httpHeaders||null,H=y.withCredentials===!0,Z=y.password??null,re=y.range instanceof PDFDataRangeTransport?y.range:null,Q=Number.isInteger(y.rangeChunkSize)&&y.rangeChunkSize>0?y.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let K=y.worker instanceof PDFWorker?y.worker:null;const ue=y.verbosity,se=typeof y.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(y.docBaseUrl)?y.docBaseUrl:null,Ce=typeof y.cMapUrl=="string"?y.cMapUrl:null,Me=y.cMapPacked!==!1,q=y.CMapReaderFactory||DefaultCMapReaderFactory,M=typeof y.standardFontDataUrl=="string"?y.standardFontDataUrl:null,F=y.StandardFontDataFactory||DefaultStandardFontDataFactory,d=y.stopAtErrors!==!0,u=Number.isInteger(y.maxImageSize)&&y.maxImageSize>-1?y.maxImageSize:-1,x=y.isEvalSupported!==!1,V=typeof y.isOffscreenCanvasSupported=="boolean"?y.isOffscreenCanvasSupported:!_util.isNodeJS,W=Number.isInteger(y.canvasMaxAreaInBytes)?y.canvasMaxAreaInBytes:-1,X=typeof y.disableFontFace=="boolean"?y.disableFontFace:_util.isNodeJS,me=y.fontExtraProperties===!0,B=y.enableXfa===!0,O=y.ownerDocument||globalThis.document,$=y.disableRange===!0,de=y.disableStream===!0,te=y.disableAutoFetch===!0,ve=y.pdfBug===!0,Pe=re?re.length:y.length??NaN,Se=typeof y.useSystemFonts=="boolean"?y.useSystemFonts:!_util.isNodeJS&&!X,oe=typeof y.useWorkerFetch=="boolean"?y.useWorkerFetch:q===_display_utils.DOMCMapReaderFactory&&F===_display_utils.DOMStandardFontDataFactory&&Ce&&M&&(0,_display_utils.isValidFetchUrl)(Ce,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(M,document.baseURI),ae=y.canvasFactory||new DefaultCanvasFactory({ownerDocument:O}),ne=y.filterFactory||new DefaultFilterFactory({docId:N,ownerDocument:O}),ce=null;(0,_util.setVerbosityLevel)(ue);const be={canvasFactory:ae,filterFactory:ne};if(oe||(be.cMapReaderFactory=new q({baseUrl:Ce,isCompressed:Me}),be.standardFontDataFactory=new F({baseUrl:M})),!K){const Be={verbosity:ue,port:_worker_options.GlobalWorkerOptions.workerPort};K=Be.port?PDFWorker.fromPort(Be):new PDFWorker(Be),w._worker=K}const Le={docId:N,apiVersion:"3.11.176",data:G,password:Z,disableAutoFetch:te,rangeChunkSize:Q,length:Pe,docBaseUrl:se,enableXfa:B,evaluatorOptions:{maxImageSize:u,disableFontFace:X,ignoreErrors:d,isEvalSupported:x,isOffscreenCanvasSupported:V,canvasMaxAreaInBytes:W,fontExtraProperties:me,useSystemFonts:Se,cMapUrl:oe?Ce:null,standardFontDataUrl:oe?M:null}},Te={ignoreErrors:d,isEvalSupported:x,disableFontFace:X,fontExtraProperties:me,enableXfa:B,ownerDocument:O,disableAutoFetch:te,pdfBug:ve,styleElement:ce};return K.promise.then(function(){if(w.destroyed)throw new Error("Loading aborted");const Be=_fetchDocument(K,Le),Ne=new Promise(function(je){let Ue;re?Ue=new _transport_stream.PDFDataTransportStream({length:Pe,initialData:re.initialData,progressiveDone:re.progressiveDone,contentDispositionFilename:re.contentDispositionFilename,disableRange:$,disableStream:de},re):G||(Ue=(qe=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(qe):(0,_display_utils.isValidFetchUrl)(qe.url)?new _displayFetch_stream.PDFFetchStream(qe):new _displayNetwork.PDFNetworkStream(qe))({url:D,length:Pe,httpHeaders:le,withCredentials:H,rangeChunkSize:Q,disableRange:$,disableStream:de})),je(Ue)});return Promise.all([Be,Ne]).then(function([je,Ue]){if(w.destroyed)throw new Error("Loading aborted");const Ge=new _message_handler.MessageHandler(N,je,K.port),qe=new WorkerTransport(Ge,w,Ue,Te,be);w._transport=qe,Ge.send("Ready",null)})}).catch(w._capability.reject),w}async function _fetchDocument(y,w){if(y.destroyed)throw new Error("Worker was destroyed");const N=await y.messageHandler.sendWithPromise("GetDocRequest",w,w.data?[w.data.buffer]:null);if(y.destroyed)throw new Error("Worker was destroyed");return N}function getUrlProp(y){if(y instanceof URL)return y.href;try{return new URL(y,window.location).href}catch{if(_util.isNodeJS&&typeof y=="string")return y}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(y){if(_util.isNodeJS&&typeof Buffer<"u"&&y instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(y instanceof Uint8Array&&y.byteLength===y.buffer.byteLength)return y;if(typeof y=="string")return(0,_util.stringToBytes)(y);if(typeof y=="object"&&!isNaN(y==null?void 0:y.length)||(0,_util.isArrayBuffer)(y))return new Uint8Array(y);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const t=class t{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${ft(t,e)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var w,N,D;this.destroyed=!0;try{(w=this._worker)!=null&&w.port&&(this._worker._pendingDestroy=!0),await((N=this._transport)==null?void 0:N.destroy())}catch(G){throw(D=this._worker)!=null&&D.port&&delete this._worker._pendingDestroy,G}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};e=new WeakMap,j(t,e,0);let PDFDocumentLoadingTask=t;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(w,N,D=!1,G=null){this.length=w,this.initialData=N,this.progressiveDone=D,this.contentDispositionFilename=G,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(w){this._rangeListeners.push(w)}addProgressListener(w){this._progressListeners.push(w)}addProgressiveReadListener(w){this._progressiveReadListeners.push(w)}addProgressiveDoneListener(w){this._progressiveDoneListeners.push(w)}onDataRange(w,N){for(const D of this._rangeListeners)D(w,N)}onDataProgress(w,N){this._readyCapability.promise.then(()=>{for(const D of this._progressListeners)D(w,N)})}onDataProgressiveRead(w){this._readyCapability.promise.then(()=>{for(const N of this._progressiveReadListeners)N(w)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const w of this._progressiveDoneListeners)w()})}transportReady(){this._readyCapability.resolve()}requestDataRange(w,N){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(w,N){this._pdfInfo=w,this._transport=N,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(D=>{if(!D)return D;const G=[];for(const le in D)G.push(...D[le]);return G}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(w){return this._transport.getPage(w)}getPageIndex(w){return this._transport.getPageIndex(w)}getDestinations(){return this._transport.getDestinations()}getDestination(w){return this._transport.getDestination(w)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(w=!1){return this._transport.startCleanup(w||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(w,N,D,G=!1){j(this,f);j(this,L);j(this,a,null);j(this,i,!1);this._pageIndex=w,this._pageInfo=N,this._transport=D,this._stats=G?new _display_utils.StatTimer:null,this._pdfBug=G,this.commonObjs=D.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:w,rotation:N=this.rotate,offsetX:D=0,offsetY:G=0,dontFlip:le=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:w,rotation:N,offsetX:D,offsetY:G,dontFlip:le})}getAnnotations({intent:w="display"}={}){const N=this._transport.getRenderingIntent(w);return this._transport.getAnnotations(this._pageIndex,N.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var w;return((w=this._transport._htmlForXfa)==null?void 0:w.children[this._pageIndex])||null}render({canvasContext:w,viewport:N,intent:D="display",annotationMode:G=_util.AnnotationMode.ENABLE,transform:le=null,background:H=null,optionalContentConfigPromise:Z=null,annotationCanvasMap:re=null,pageColors:Q=null,printAnnotationStorage:K=null}){var F,d;(F=this._stats)==null||F.time("Overall");const ue=this._transport.getRenderingIntent(D,G,K);he(this,i,!1),z(this,L,Dt).call(this),Z||(Z=this._transport.getOptionalContentConfig());let se=this._intentStates.get(ue.cacheKey);se||(se=Object.create(null),this._intentStates.set(ue.cacheKey,se)),se.streamReaderCancelTimeout&&(clearTimeout(se.streamReaderCancelTimeout),se.streamReaderCancelTimeout=null);const Ce=!!(ue.renderingIntent&_util.RenderingIntentFlag.PRINT);se.displayReadyCapability||(se.displayReadyCapability=new _util.PromiseCapability,se.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(d=this._stats)==null||d.time("Page Request"),this._pumpOperatorList(ue));const Me=u=>{var x,V;se.renderTasks.delete(q),(this._maybeCleanupAfterRender||Ce)&&he(this,i,!0),z(this,f,pt).call(this,!Ce),u?(q.capability.reject(u),this._abortOperatorList({intentState:se,reason:u instanceof Error?u:new Error(u)})):q.capability.resolve(),(x=this._stats)==null||x.timeEnd("Rendering"),(V=this._stats)==null||V.timeEnd("Overall")},q=new InternalRenderTask({callback:Me,params:{canvasContext:w,viewport:N,transform:le,background:H},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:re,operatorList:se.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!Ce,pdfBug:this._pdfBug,pageColors:Q});(se.renderTasks||(se.renderTasks=new Set)).add(q);const M=q.task;return Promise.all([se.displayReadyCapability.promise,Z]).then(([u,x])=>{var V;if(this.destroyed){Me();return}(V=this._stats)==null||V.time("Rendering"),q.initializeGraphics({transparency:u,optionalContentConfig:x}),q.operatorListChanged()}).catch(Me),M}getOperatorList({intent:w="display",annotationMode:N=_util.AnnotationMode.ENABLE,printAnnotationStorage:D=null}={}){var re;function G(){H.operatorList.lastChunk&&(H.opListReadCapability.resolve(H.operatorList),H.renderTasks.delete(Z))}const le=this._transport.getRenderingIntent(w,N,D,!0);let H=this._intentStates.get(le.cacheKey);H||(H=Object.create(null),this._intentStates.set(le.cacheKey,H));let Z;return H.opListReadCapability||(Z=Object.create(null),Z.operatorListChanged=G,H.opListReadCapability=new _util.PromiseCapability,(H.renderTasks||(H.renderTasks=new Set)).add(Z),H.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(re=this._stats)==null||re.time("Page Request"),this._pumpOperatorList(le)),H.opListReadCapability.promise}streamTextContent({includeMarkedContent:w=!1,disableNormalization:N=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:w===!0,disableNormalization:N===!0},{highWaterMark:100,size(G){return G.items.length}})}getTextContent(w={}){if(this._transport._htmlForXfa)return this.getXfa().then(D=>_xfa_text.XfaText.textContent(D));const N=this.streamTextContent(w);return new Promise(function(D,G){function le(){H.read().then(function({value:re,done:Q}){if(Q){D(Z);return}Object.assign(Z.styles,re.styles),Z.items.push(...re.items),le()},G)}const H=N.getReader(),Z={items:[],styles:Object.create(null)};le()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const w=[];for(const N of this._intentStates.values())if(this._abortOperatorList({intentState:N,reason:new Error("Page was destroyed."),force:!0}),!N.opListReadCapability)for(const D of N.renderTasks)w.push(D.completed),D.cancel();return this.objs.clear(),he(this,i,!1),z(this,L,Dt).call(this),Promise.all(w)}cleanup(w=!1){he(this,i,!0);const N=z(this,f,pt).call(this,!1);return w&&N&&this._stats&&(this._stats=new _display_utils.StatTimer),N}_startRenderPage(w,N){var G,le;const D=this._intentStates.get(N);D&&((G=this._stats)==null||G.timeEnd("Page Request"),(le=D.displayReadyCapability)==null||le.resolve(w))}_renderPageChunk(w,N){for(let D=0,G=w.length;D<G;D++)N.operatorList.fnArray.push(w.fnArray[D]),N.operatorList.argsArray.push(w.argsArray[D]);N.operatorList.lastChunk=w.lastChunk,N.operatorList.separateAnnots=w.separateAnnots;for(const D of N.renderTasks)D.operatorListChanged();w.lastChunk&&z(this,f,pt).call(this,!0)}_pumpOperatorList({renderingIntent:w,cacheKey:N,annotationStorageSerializable:D}){const{map:G,transfers:le}=D,Z=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:w,cacheKey:N,annotationStorage:G},le).getReader(),re=this._intentStates.get(N);re.streamReader=Z;const Q=()=>{Z.read().then(({value:K,done:ue})=>{if(ue){re.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(K,re),Q())},K=>{if(re.streamReader=null,!this._transport.destroyed){if(re.operatorList){re.operatorList.lastChunk=!0;for(const ue of re.renderTasks)ue.operatorListChanged();z(this,f,pt).call(this,!0)}if(re.displayReadyCapability)re.displayReadyCapability.reject(K);else if(re.opListReadCapability)re.opListReadCapability.reject(K);else throw K}})};Q()}_abortOperatorList({intentState:w,reason:N,force:D=!1}){if(w.streamReader){if(w.streamReaderCancelTimeout&&(clearTimeout(w.streamReaderCancelTimeout),w.streamReaderCancelTimeout=null),!D){if(w.renderTasks.size>0)return;if(N instanceof _display_utils.RenderingCancelledException){let G=RENDERING_CANCELLED_TIMEOUT;N.extraDelay>0&&N.extraDelay<1e3&&(G+=N.extraDelay),w.streamReaderCancelTimeout=setTimeout(()=>{w.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:w,reason:N,force:!0})},G);return}}if(w.streamReader.cancel(new _util.AbortException(N.message)).catch(()=>{}),w.streamReader=null,!this._transport.destroyed){for(const[G,le]of this._intentStates)if(le===w){this._intentStates.delete(G);break}this.cleanup()}}}get stats(){return this._stats}}a=new WeakMap,i=new WeakMap,f=new WeakSet,pt=function(w=!1){if(z(this,L,Dt).call(this),!s(this,i)||this.destroyed)return!1;if(w)return he(this,a,setTimeout(()=>{he(this,a,null),z(this,f,pt).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:N,operatorList:D}of this._intentStates.values())if(N.size>0||!D.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),he(this,i,!1),!0},L=new WeakSet,Dt=function(){s(this,a)&&(clearTimeout(s(this,a)),he(this,a,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){j(this,m,new Set);j(this,n,Promise.resolve())}postMessage(w,N){const D={data:structuredClone(w,N?{transfer:N}:null)};s(this,n).then(()=>{for(const G of s(this,m))G.call(this,D)})}addEventListener(w,N){s(this,m).add(N)}removeEventListener(w,N){s(this,m).delete(N)}terminate(){s(this,m).clear()}}m=new WeakMap,n=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const y=(c=document==null?void 0:document.currentScript)==null?void 0:c.src;y&&(PDFWorkerUtil.fallbackWorkerSrc=y.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(y,w){let N;try{if(N=new URL(y),!N.origin||N.origin==="null")return!1}catch{return!1}const D=new URL(w,N);return N.origin===D.origin},PDFWorkerUtil.createCDNWrapper=function(y){const w=`importScripts("${y}");`;return URL.createObjectURL(new Blob([w]))}}const _PDFWorker=class _PDFWorker{constructor({name:y=null,port:w=null,verbosity:N=(0,_util.getVerbosityLevel)()}={}){var D;if(this.name=y,this.destroyed=!1,this.verbosity=N,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,w){if((D=s(_PDFWorker,C))!=null&&D.has(w))throw new Error("Cannot use more than one PDFWorker per port.");(s(_PDFWorker,C)||he(_PDFWorker,C,new WeakMap)).set(w,this),this._initializeFromPort(w);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(y){this._port=y,this._messageHandler=new _message_handler.MessageHandler("main","worker",y),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:y}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,y)||(y=PDFWorkerUtil.createCDNWrapper(new URL(y,window.location).href));const w=new Worker(y),N=new _message_handler.MessageHandler("main","worker",w),D=()=>{w.removeEventListener("error",G),N.destroy(),w.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},G=()=>{this._webWorker||D()};w.addEventListener("error",G),N.on("test",H=>{if(w.removeEventListener("error",G),this.destroyed){D();return}H?(this._messageHandler=N,this._port=w,this._webWorker=w,this._readyCapability.resolve(),N.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),N.destroy(),w.terminate())}),N.on("ready",H=>{if(w.removeEventListener("error",G),this.destroyed){D();return}try{le()}catch{this._setupFakeWorker()}});const le=()=>{const H=new Uint8Array;N.send("test",H,[H.buffer])};le();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(y=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const w=new LoopbackPort;this._port=w;const N=`fake${PDFWorkerUtil.fakeWorkerId++}`,D=new _message_handler.MessageHandler(N+"_worker",N,w);y.setup(D,w);const G=new _message_handler.MessageHandler(N,N+"_worker",w);this._messageHandler=G,this._readyCapability.resolve(),G.send("configure",{verbosity:this.verbosity})}).catch(y=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${y.message}".`))})}destroy(){var y;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(y=s(_PDFWorker,C))==null||y.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(y){var N;if(!(y!=null&&y.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const w=(N=s(this,C))==null?void 0:N.get(y.port);if(w){if(w._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return w}return new _PDFWorker(y)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var y;try{return((y=globalThis.pdfjsWorker)==null?void 0:y.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};C=new WeakMap,j(_PDFWorker,C,void 0);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(w,N,D,G,le){j(this,b);j(this,A,new Map);j(this,E,new Map);j(this,r,new Map);j(this,g,null);this.messageHandler=w,this.loadingTask=N,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:G.ownerDocument,styleElement:G.styleElement}),this._params=G,this.canvasFactory=le.canvasFactory,this.filterFactory=le.filterFactory,this.cMapReaderFactory=le.cMapReaderFactory,this.standardFontDataFactory=le.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=D,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(w,N=_util.AnnotationMode.ENABLE,D=null,G=!1){let le=_util.RenderingIntentFlag.DISPLAY,H=_annotation_storage.SerializableEmpty;switch(w){case"any":le=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":le=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${w}`)}switch(N){case _util.AnnotationMode.DISABLE:le+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:le+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:le+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,H=(le&_util.RenderingIntentFlag.PRINT&&D instanceof _annotation_storage.PrintAnnotationStorage?D:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${N}`)}return G&&(le+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:le,cacheKey:`${le}_${H.hash}`,annotationStorageSerializable:H}}destroy(){var D;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,(D=s(this,g))==null||D.reject(new Error("Worker was destroyed during onPassword callback"));const w=[];for(const G of s(this,E).values())w.push(G._destroy());s(this,E).clear(),s(this,r).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const N=this.messageHandler.sendWithPromise("Terminate",null);return w.push(N),Promise.all(w).then(()=>{var G;this.commonObjs.clear(),this.fontLoader.clear(),s(this,A).clear(),this.filterFactory.destroy(),(G=this._networkStream)==null||G.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:w,loadingTask:N}=this;w.on("GetReader",(D,G)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=le=>{this._lastProgress={loaded:le.loaded,total:le.total}},G.onPull=()=>{this._fullReader.read().then(function({value:le,done:H}){if(H){G.close();return}(0,_util.assert)(le instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),G.enqueue(new Uint8Array(le),1,[le])}).catch(le=>{G.error(le)})},G.onCancel=le=>{this._fullReader.cancel(le),G.ready.catch(H=>{if(!this.destroyed)throw H})}}),w.on("ReaderHeadersReady",D=>{const G=new _util.PromiseCapability,le=this._fullReader;return le.headersReady.then(()=>{var H;(!le.isStreamingSupported||!le.isRangeSupported)&&(this._lastProgress&&((H=N.onProgress)==null||H.call(N,this._lastProgress)),le.onProgress=Z=>{var re;(re=N.onProgress)==null||re.call(N,{loaded:Z.loaded,total:Z.total})}),G.resolve({isStreamingSupported:le.isStreamingSupported,isRangeSupported:le.isRangeSupported,contentLength:le.contentLength})},G.reject),G.promise}),w.on("GetRangeReader",(D,G)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const le=this._networkStream.getRangeReader(D.begin,D.end);if(!le){G.close();return}G.onPull=()=>{le.read().then(function({value:H,done:Z}){if(Z){G.close();return}(0,_util.assert)(H instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),G.enqueue(new Uint8Array(H),1,[H])}).catch(H=>{G.error(H)})},G.onCancel=H=>{le.cancel(H),G.ready.catch(Z=>{if(!this.destroyed)throw Z})}}),w.on("GetDoc",({pdfInfo:D})=>{this._numPages=D.numPages,this._htmlForXfa=D.htmlForXfa,delete D.htmlForXfa,N._capability.resolve(new PDFDocumentProxy(D,this))}),w.on("DocException",function(D){let G;switch(D.name){case"PasswordException":G=new _util.PasswordException(D.message,D.code);break;case"InvalidPDFException":G=new _util.InvalidPDFException(D.message);break;case"MissingPDFException":G=new _util.MissingPDFException(D.message);break;case"UnexpectedResponseException":G=new _util.UnexpectedResponseException(D.message,D.status);break;case"UnknownErrorException":G=new _util.UnknownErrorException(D.message,D.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}N._capability.reject(G)}),w.on("PasswordRequest",D=>{if(he(this,g,new _util.PromiseCapability),N.onPassword){const G=le=>{le instanceof Error?s(this,g).reject(le):s(this,g).resolve({password:le})};try{N.onPassword(G,D.code)}catch(le){s(this,g).reject(le)}}else s(this,g).reject(new _util.PasswordException(D.message,D.code));return s(this,g).promise}),w.on("DataLoaded",D=>{var G;(G=N.onProgress)==null||G.call(N,{loaded:D.length,total:D.length}),this.downloadInfoCapability.resolve(D)}),w.on("StartRenderPage",D=>{if(this.destroyed)return;s(this,E).get(D.pageIndex)._startRenderPage(D.transparency,D.cacheKey)}),w.on("commonobj",([D,G,le])=>{var H;if(!this.destroyed&&!this.commonObjs.has(D))switch(G){case"Font":const Z=this._params;if("error"in le){const K=le.error;(0,_util.warn)(`Error during font loading: ${K}`),this.commonObjs.resolve(D,K);break}const re=Z.pdfBug&&((H=globalThis.FontInspector)!=null&&H.enabled)?(K,ue)=>globalThis.FontInspector.fontAdded(K,ue):null,Q=new _font_loader.FontFaceObject(le,{isEvalSupported:Z.isEvalSupported,disableFontFace:Z.disableFontFace,ignoreErrors:Z.ignoreErrors,inspectFont:re});this.fontLoader.bind(Q).catch(K=>w.sendWithPromise("FontFallback",{id:D})).finally(()=>{!Z.fontExtraProperties&&Q.data&&(Q.data=null),this.commonObjs.resolve(D,Q)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(D,le);break;default:throw new Error(`Got unknown common object type ${G}`)}}),w.on("obj",([D,G,le,H])=>{var re;if(this.destroyed)return;const Z=s(this,E).get(G);if(!Z.objs.has(D))switch(le){case"Image":if(Z.objs.resolve(D,H),H){let Q;if(H.bitmap){const{width:K,height:ue}=H;Q=K*ue*4}else Q=((re=H.data)==null?void 0:re.length)||0;Q>_util.MAX_IMAGE_SIZE_TO_CACHE&&(Z._maybeCleanupAfterRender=!0)}break;case"Pattern":Z.objs.resolve(D,H);break;default:throw new Error(`Got unknown object type ${le}`)}}),w.on("DocProgress",D=>{var G;this.destroyed||(G=N.onProgress)==null||G.call(N,{loaded:D.loaded,total:D.total})}),w.on("FetchBuiltInCMap",D=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(D):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),w.on("FetchStandardFontData",D=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(D):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var D;this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:w,transfers:N}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:w,filename:((D=this._fullReader)==null?void 0:D.filename)??null},N).finally(()=>{this.annotationStorage.resetModified()})}getPage(w){if(!Number.isInteger(w)||w<=0||w>this._numPages)return Promise.reject(new Error("Invalid page request."));const N=w-1,D=s(this,r).get(N);if(D)return D;const G=this.messageHandler.sendWithPromise("GetPage",{pageIndex:N}).then(le=>{if(this.destroyed)throw new Error("Transport destroyed");const H=new PDFPageProxy(N,le,this,this._params.pdfBug);return s(this,E).set(N,H),H});return s(this,r).set(N,G),G}getPageIndex(w){return typeof w!="object"||w===null||!Number.isInteger(w.num)||w.num<0||!Number.isInteger(w.gen)||w.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:w.num,gen:w.gen})}getAnnotations(w,N){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:w,intent:N})}getFieldObjects(){return z(this,b,Bt).call(this,"GetFieldObjects")}hasJSActions(){return z(this,b,Bt).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(w){return typeof w!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:w})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return z(this,b,Bt).call(this,"GetDocJSActions")}getPageJSActions(w){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:w})}getStructTree(w){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:w})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(w=>new _optional_content_config.OptionalContentConfig(w))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const w="GetMetadata",N=s(this,A).get(w);if(N)return N;const D=this.messageHandler.sendWithPromise(w,null).then(G=>{var le,H;return{info:G[0],metadata:G[1]?new _metadata.Metadata(G[1]):null,contentDispositionFilename:((le=this._fullReader)==null?void 0:le.filename)??null,contentLength:((H=this._fullReader)==null?void 0:H.contentLength)??null}});return s(this,A).set(w,D),D}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(w=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const N of s(this,E).values())if(!N.cleanup())throw new Error(`startCleanup: Page ${N.pageNumber} is currently rendering.`);this.commonObjs.clear(),w||this.fontLoader.clear(),s(this,A).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:w,enableXfa:N}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:w,enableXfa:N})}}A=new WeakMap,E=new WeakMap,r=new WeakMap,g=new WeakMap,b=new WeakSet,Bt=function(w,N=null){const D=s(this,A).get(w);if(D)return D;const G=this.messageHandler.sendWithPromise(w,N);return s(this,A).set(w,G),G};class PDFObjects{constructor(){j(this,v);j(this,R,Object.create(null))}get(w,N=null){if(N){const G=z(this,v,oi).call(this,w);return G.capability.promise.then(()=>N(G.data)),null}const D=s(this,R)[w];if(!(D!=null&&D.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${w}.`);return D.data}has(w){const N=s(this,R)[w];return(N==null?void 0:N.capability.settled)||!1}resolve(w,N=null){const D=z(this,v,oi).call(this,w);D.data=N,D.capability.resolve()}clear(){var w;for(const N in s(this,R)){const{data:D}=s(this,R)[N];(w=D==null?void 0:D.bitmap)==null||w.close()}he(this,R,Object.create(null))}}R=new WeakMap,v=new WeakSet,oi=function(w){var N;return(N=s(this,R))[w]||(N[w]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(w){j(this,o,null);he(this,o,w),this.onContinue=null}get promise(){return s(this,o).capability.promise}cancel(w=0){s(this,o).cancel(null,w)}get separateAnnots(){const{separateAnnots:w}=s(this,o).operatorList;if(!w)return!1;const{annotationCanvasMap:N}=s(this,o);return w.form||w.canvas&&(N==null?void 0:N.size)>0}}o=new WeakMap,exports.RenderTask=RenderTask;const S=class S{constructor({callback:w,params:N,objs:D,commonObjs:G,annotationCanvasMap:le,operatorList:H,pageIndex:Z,canvasFactory:re,filterFactory:Q,useRequestAnimationFrame:K=!1,pdfBug:ue=!1,pageColors:se=null}){this.callback=w,this.params=N,this.objs=D,this.commonObjs=G,this.annotationCanvasMap=le,this.operatorListIdx=null,this.operatorList=H,this._pageIndex=Z,this.canvasFactory=re,this.filterFactory=Q,this._pdfBug=ue,this.pageColors=se,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=K===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=N.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:w=!1,optionalContentConfig:N}){var Z,re;if(this.cancelled)return;if(this._canvas){if(s(S,l).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");s(S,l).add(this._canvas)}this._pdfBug&&((Z=globalThis.StepperManager)!=null&&Z.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:D,viewport:G,transform:le,background:H}=this.params;this.gfx=new _canvas.CanvasGraphics(D,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:N},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:le,viewport:G,transparency:w,background:H}),this.operatorListIdx=0,this.graphicsReady=!0,(re=this.graphicsReadyCallback)==null||re.call(this)}cancel(w=null,N=0){var D;this.running=!1,this.cancelled=!0,(D=this.gfx)==null||D.endDrawing(),s(S,l).delete(this._canvas),this.callback(w||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,N))}operatorListChanged(){var w;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(w=this.stepper)==null||w.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),s(S,l).delete(this._canvas),this.callback())))}};l=new WeakMap,j(S,l,new WeakSet);let InternalRenderTask=S;const version="3.11.176";exports.version=version;const build="57d196e34";exports.build=build},(e,t,a)=>{var n,c,C,Cn,E;Object.defineProperty(t,"__esModule",{value:!0}),t.SerializableEmpty=t.PrintAnnotationStorage=t.AnnotationStorage=void 0;var i=a(1),f=a(4),I=a(8);const L=Object.freeze({map:null,hash:"",transfers:void 0});t.SerializableEmpty=L;class _{constructor(){j(this,C);j(this,n,!1);j(this,c,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(g,b){const P=s(this,c).get(g);return P===void 0?b:Object.assign(b,P)}getRawValue(g){return s(this,c).get(g)}remove(g){if(s(this,c).delete(g),s(this,c).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const b of s(this,c).values())if(b instanceof f.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(g,b){const P=s(this,c).get(g);let R=!1;if(P!==void 0)for(const[v,T]of Object.entries(b))P[v]!==T&&(R=!0,P[v]=T);else R=!0,s(this,c).set(g,b);R&&z(this,C,Cn).call(this),b instanceof f.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(b.constructor._type)}has(g){return s(this,c).has(g)}getAll(){return s(this,c).size>0?(0,i.objectFromMap)(s(this,c)):null}setAll(g){for(const[b,P]of Object.entries(g))this.setValue(b,P)}get size(){return s(this,c).size}resetModified(){s(this,n)&&(he(this,n,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new m(this)}get serializable(){if(s(this,c).size===0)return L;const g=new Map,b=new I.MurmurHash3_64,P=[],R=Object.create(null);let v=!1;for(const[T,o]of s(this,c)){const l=o instanceof f.AnnotationEditor?o.serialize(!1,R):o;l&&(g.set(T,l),b.update(`${T}:${JSON.stringify(l)}`),v||(v=!!l.bitmap))}if(v)for(const T of g.values())T.bitmap&&P.push(T.bitmap);return g.size>0?{map:g,hash:b.hexdigest(),transfers:P}:L}}n=new WeakMap,c=new WeakMap,C=new WeakSet,Cn=function(){s(this,n)||(he(this,n,!0),typeof this.onSetModified=="function"&&this.onSetModified())},t.AnnotationStorage=_;class m extends _{constructor(b){super();j(this,E,void 0);const{map:P,hash:R,transfers:v}=b.serializable,T=structuredClone(P,v?{transfer:v}:null);he(this,E,{map:T,hash:R,transfers:v})}get print(){(0,i.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return s(this,E)}}E=new WeakMap,t.PrintAnnotationStorage=m},(e,t,a)=>{var m,n,c,C,A,E,r,g,b,P,R,v,T,o,l,li,y,ci,N,di,G,hi,H,Tn,re,Rn,K,xn,se,ui,Me,Mn;Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationEditor=void 0;var i=a(5),f=a(1),I=a(6);const M=class M{constructor(d){j(this,l);j(this,y);j(this,G);j(this,H);j(this,re);j(this,K);j(this,se);j(this,Me);j(this,m,"");j(this,n,!1);j(this,c,null);j(this,C,null);j(this,A,null);j(this,E,!1);j(this,r,null);j(this,g,this.focusin.bind(this));j(this,b,this.focusout.bind(this));j(this,P,!1);j(this,R,!1);j(this,v,!1);Je(this,"_initialOptions",Object.create(null));Je(this,"_uiManager",null);Je(this,"_focusEventsAllowed",!0);Je(this,"_l10nPromise",null);j(this,T,!1);j(this,o,M._zIndex++);this.constructor===M&&(0,f.unreachable)("Cannot initialize AnnotationEditor."),this.parent=d.parent,this.id=d.id,this.width=this.height=null,this.pageIndex=d.parent.pageIndex,this.name=d.name,this.div=null,this._uiManager=d.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=d.isCentered,this._structTreeParentId=null;const{rotation:u,rawDims:{pageWidth:x,pageHeight:V,pageX:W,pageY:X}}=this.parent.viewport;this.rotation=u,this.pageRotation=(360+u-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[x,V],this.pageTranslation=[W,X];const[me,B]=this.parentDimensions;this.x=d.x/me,this.y=d.y/B,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,f.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(d){const u=new _({id:d.parent.getNextId(),parent:d.parent,uiManager:d._uiManager});u.annotationElementId=d.annotationElementId,u.deleted=!0,u._uiManager.addToAnnotationStorage(u)}static initialize(d,u=null){if(M._l10nPromise||(M._l10nPromise=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(V=>[V,d.get(V)]))),u!=null&&u.strings)for(const V of u.strings)M._l10nPromise.set(V,d.get(V));if(M._borderLineWidth!==-1)return;const x=getComputedStyle(document.documentElement);M._borderLineWidth=parseFloat(x.getPropertyValue("--outline-width"))||0}static updateDefaultParams(d,u){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(d){return!1}static paste(d,u){(0,f.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return s(this,T)}set _isDraggable(d){var u;he(this,T,d),(u=this.div)==null||u.classList.toggle("draggable",d)}center(){const[d,u]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*u/(d*2),this.y+=this.width*d/(u*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*u/(d*2),this.y-=this.width*d/(u*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(d){this._uiManager.addCommands(d)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=s(this,o)}setParent(d){d!==null&&(this.pageIndex=d.pageIndex,this.pageDimensions=d.pageDimensions),this.parent=d}focusin(d){this._focusEventsAllowed&&(s(this,P)?he(this,P,!1):this.parent.setSelected(this))}focusout(d){var x;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const u=d.relatedTarget;u!=null&&u.closest(`#${this.id}`)||(d.preventDefault(),(x=this.parent)!=null&&x.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(d,u,x,V){const[W,X]=this.parentDimensions;[x,V]=this.screenToPageTranslation(x,V),this.x=(d+x)/W,this.y=(u+V)/X,this.fixAndSetPosition()}translate(d,u){z(this,l,li).call(this,this.parentDimensions,d,u)}translateInPage(d,u){z(this,l,li).call(this,this.pageDimensions,d,u),this.div.scrollIntoView({block:"nearest"})}drag(d,u){const[x,V]=this.parentDimensions;if(this.x+=d/x,this.y+=u/V,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:O,y:$}=this.div.getBoundingClientRect();this.parent.findNewParent(this,O,$)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:W,y:X}=this;const[me,B]=z(this,y,ci).call(this);W+=me,X+=B,this.div.style.left=`${(100*W).toFixed(2)}%`,this.div.style.top=`${(100*X).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(){const[d,u]=this.pageDimensions;let{x,y:V,width:W,height:X}=this;switch(W*=d,X*=u,x*=d,V*=u,this.rotation){case 0:x=Math.max(0,Math.min(d-W,x)),V=Math.max(0,Math.min(u-X,V));break;case 90:x=Math.max(0,Math.min(d-X,x)),V=Math.min(u,Math.max(W,V));break;case 180:x=Math.min(d,Math.max(W,x)),V=Math.min(u,Math.max(X,V));break;case 270:x=Math.min(d,Math.max(X,x)),V=Math.max(0,Math.min(u-W,V));break}this.x=x/=d,this.y=V/=u;const[me,B]=z(this,y,ci).call(this);x+=me,V+=B;const{style:O}=this.div;O.left=`${(100*x).toFixed(2)}%`,O.top=`${(100*V).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(d,u){var x;return z(x=M,N,di).call(x,d,u,this.parentRotation)}pageTranslationToScreen(d,u){var x;return z(x=M,N,di).call(x,d,u,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:d,pageDimensions:[u,x]}=this,V=u*d,W=x*d;return f.FeatureTest.isCSSRoundSupported?[Math.round(V),Math.round(W)]:[V,W]}setDims(d,u){var W;const[x,V]=this.parentDimensions;this.div.style.width=`${(100*d/x).toFixed(2)}%`,s(this,E)||(this.div.style.height=`${(100*u/V).toFixed(2)}%`),(W=s(this,c))==null||W.classList.toggle("small",d<M.SMALL_EDITOR_SIZE||u<M.SMALL_EDITOR_SIZE)}fixDims(){const{style:d}=this.div,{height:u,width:x}=d,V=x.endsWith("%"),W=!s(this,E)&&u.endsWith("%");if(V&&W)return;const[X,me]=this.parentDimensions;V||(d.width=`${(100*parseFloat(x)/X).toFixed(2)}%`),!s(this,E)&&!W&&(d.height=`${(100*parseFloat(u)/me).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}async addAltTextButton(){if(s(this,c))return;const d=he(this,c,document.createElement("button"));d.className="altText";const u=await M._l10nPromise.get("editor_alt_text_button_label");d.textContent=u,d.setAttribute("aria-label",u),d.tabIndex="0",d.addEventListener("contextmenu",I.noContextMenu),d.addEventListener("pointerdown",x=>x.stopPropagation()),d.addEventListener("click",x=>{x.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),d.addEventListener("keydown",x=>{x.target===d&&x.key==="Enter"&&(x.preventDefault(),this._uiManager.editAltText(this))}),z(this,se,ui).call(this),this.div.append(d),M.SMALL_EDITOR_SIZE||(M.SMALL_EDITOR_SIZE=Math.min(128,Math.round(d.getBoundingClientRect().width*1.4)))}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:s(this,m),decorative:s(this,n)}}set altTextData({altText:d,decorative:u}){s(this,m)===d&&s(this,n)===u||(he(this,m,d),he(this,n,u),z(this,se,ui).call(this))}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",s(this,g)),this.div.addEventListener("focusout",s(this,b));const[d,u]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*u/d).toFixed(2)}%`,this.div.style.maxHeight=`${(100*d/u).toFixed(2)}%`);const[x,V]=this.getInitialTranslation();return this.translate(x,V),(0,i.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(d){const{isMac:u}=f.FeatureTest.platform;if(d.button!==0||d.ctrlKey&&u){d.preventDefault();return}he(this,P,!0),z(this,Me,Mn).call(this,d)}moveInDOM(){var d;(d=this.parent)==null||d.moveEditorInDOM(this)}_setParentAndPosition(d,u,x){d.changeParent(this),this.x=u,this.y=x,this.fixAndSetPosition()}getRect(d,u){const x=this.parentScale,[V,W]=this.pageDimensions,[X,me]=this.pageTranslation,B=d/x,O=u/x,$=this.x*V,de=this.y*W,te=this.width*V,ve=this.height*W;switch(this.rotation){case 0:return[$+B+X,W-de-O-ve+me,$+B+te+X,W-de-O+me];case 90:return[$+O+X,W-de+B+me,$+O+ve+X,W-de+B+te+me];case 180:return[$-B-te+X,W-de+O+me,$-B+X,W-de+O+ve+me];case 270:return[$-O-ve+X,W-de-B-te+me,$-O+X,W-de-B+me];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(d,u){const[x,V,W,X]=d,me=W-x,B=X-V;switch(this.rotation){case 0:return[x,u-X,me,B];case 90:return[x,u-V,B,me];case 180:return[W,u-V,me,B];case 270:return[W,u-X,B,me];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){he(this,v,!0)}disableEditMode(){he(this,v,!1)}isInEditMode(){return s(this,v)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var d,u;(d=this.div)==null||d.addEventListener("focusin",s(this,g)),(u=this.div)==null||u.addEventListener("focusout",s(this,b))}serialize(d=!1,u=null){(0,f.unreachable)("An editor must be serializable")}static deserialize(d,u,x){const V=new this.prototype.constructor({parent:u,id:u.getNextId(),uiManager:x});V.rotation=d.rotation;const[W,X]=V.pageDimensions,[me,B,O,$]=V.getRectInCurrentCoords(d.rect,X);return V.x=me/W,V.y=B/X,V.width=O/W,V.height=$/X,V}remove(){var d;this.div.removeEventListener("focusin",s(this,g)),this.div.removeEventListener("focusout",s(this,b)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),(d=s(this,c))==null||d.remove(),he(this,c,null),he(this,C,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(z(this,H,Tn).call(this),s(this,r).classList.remove("hidden"))}select(){var d;this.makeResizable(),(d=this.div)==null||d.classList.add("selectedEditor")}unselect(){var d,u,x;(d=s(this,r))==null||d.classList.add("hidden"),(u=this.div)==null||u.classList.remove("selectedEditor"),(x=this.div)!=null&&x.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(d,u){}disableEditing(){s(this,c)&&(s(this,c).hidden=!0)}enableEditing(){s(this,c)&&(s(this,c).hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return s(this,R)}set isEditing(d){he(this,R,d),this.parent&&(d?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(d,u){he(this,E,!0);const x=d/u,{style:V}=this.div;V.aspectRatio=x,V.height="auto"}static get MIN_SIZE(){return 16}};m=new WeakMap,n=new WeakMap,c=new WeakMap,C=new WeakMap,A=new WeakMap,E=new WeakMap,r=new WeakMap,g=new WeakMap,b=new WeakMap,P=new WeakMap,R=new WeakMap,v=new WeakMap,T=new WeakMap,o=new WeakMap,l=new WeakSet,li=function([d,u],x,V){[x,V]=this.screenToPageTranslation(x,V),this.x+=x/d,this.y+=V/u,this.fixAndSetPosition()},y=new WeakSet,ci=function(){const[d,u]=this.parentDimensions,{_borderLineWidth:x}=M,V=x/d,W=x/u;switch(this.rotation){case 90:return[-V,W];case 180:return[V,W];case 270:return[V,-W];default:return[-V,-W]}},N=new WeakSet,di=function(d,u,x){switch(x){case 90:return[u,-d];case 180:return[-d,-u];case 270:return[-u,d];default:return[d,u]}},G=new WeakSet,hi=function(d){switch(d){case 90:{const[u,x]=this.pageDimensions;return[0,-u/x,x/u,0]}case 180:return[-1,0,0,-1];case 270:{const[u,x]=this.pageDimensions;return[0,u/x,-x/u,0]}default:return[1,0,0,1]}},H=new WeakSet,Tn=function(){if(s(this,r))return;he(this,r,document.createElement("div")),s(this,r).classList.add("resizers");const d=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||d.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const u of d){const x=document.createElement("div");s(this,r).append(x),x.classList.add("resizer",u),x.addEventListener("pointerdown",z(this,re,Rn).bind(this,u)),x.addEventListener("contextmenu",I.noContextMenu)}this.div.prepend(s(this,r))},re=new WeakSet,Rn=function(d,u){u.preventDefault();const{isMac:x}=f.FeatureTest.platform;if(u.button!==0||u.ctrlKey&&x)return;const V=z(this,K,xn).bind(this,d),W=this._isDraggable;this._isDraggable=!1;const X={passive:!0,capture:!0};window.addEventListener("pointermove",V,X);const me=this.x,B=this.y,O=this.width,$=this.height,de=this.parent.div.style.cursor,te=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(u.target).cursor;const ve=()=>{this._isDraggable=W,window.removeEventListener("pointerup",ve),window.removeEventListener("blur",ve),window.removeEventListener("pointermove",V,X),this.parent.div.style.cursor=de,this.div.style.cursor=te;const Pe=this.x,Se=this.y,oe=this.width,ae=this.height;Pe===me&&Se===B&&oe===O&&ae===$||this.addCommands({cmd:()=>{this.width=oe,this.height=ae,this.x=Pe,this.y=Se;const[ne,ce]=this.parentDimensions;this.setDims(ne*oe,ce*ae),this.fixAndSetPosition()},undo:()=>{this.width=O,this.height=$,this.x=me,this.y=B;const[ne,ce]=this.parentDimensions;this.setDims(ne*O,ce*$),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",ve),window.addEventListener("blur",ve)},K=new WeakSet,xn=function(d,u){const[x,V]=this.parentDimensions,W=this.x,X=this.y,me=this.width,B=this.height,O=M.MIN_SIZE/x,$=M.MIN_SIZE/V,de=Ee=>Math.round(Ee*1e4)/1e4,te=z(this,G,hi).call(this,this.rotation),ve=(Ee,ee)=>[te[0]*Ee+te[2]*ee,te[1]*Ee+te[3]*ee],Pe=z(this,G,hi).call(this,360-this.rotation),Se=(Ee,ee)=>[Pe[0]*Ee+Pe[2]*ee,Pe[1]*Ee+Pe[3]*ee];let oe,ae,ne=!1,ce=!1;switch(d){case"topLeft":ne=!0,oe=(Ee,ee)=>[0,0],ae=(Ee,ee)=>[Ee,ee];break;case"topMiddle":oe=(Ee,ee)=>[Ee/2,0],ae=(Ee,ee)=>[Ee/2,ee];break;case"topRight":ne=!0,oe=(Ee,ee)=>[Ee,0],ae=(Ee,ee)=>[0,ee];break;case"middleRight":ce=!0,oe=(Ee,ee)=>[Ee,ee/2],ae=(Ee,ee)=>[0,ee/2];break;case"bottomRight":ne=!0,oe=(Ee,ee)=>[Ee,ee],ae=(Ee,ee)=>[0,0];break;case"bottomMiddle":oe=(Ee,ee)=>[Ee/2,ee],ae=(Ee,ee)=>[Ee/2,0];break;case"bottomLeft":ne=!0,oe=(Ee,ee)=>[0,ee],ae=(Ee,ee)=>[Ee,0];break;case"middleLeft":ce=!0,oe=(Ee,ee)=>[0,ee/2],ae=(Ee,ee)=>[Ee,ee/2];break}const be=oe(me,B),Le=ae(me,B);let Te=ve(...Le);const Be=de(W+Te[0]),Ne=de(X+Te[1]);let je=1,Ue=1,[Ge,qe]=this.screenToPageTranslation(u.movementX,u.movementY);if([Ge,qe]=Se(Ge/x,qe/V),ne){const Ee=Math.hypot(me,B);je=Ue=Math.max(Math.min(Math.hypot(Le[0]-be[0]-Ge,Le[1]-be[1]-qe)/Ee,1/me,1/B),O/me,$/B)}else ce?je=Math.max(O,Math.min(1,Math.abs(Le[0]-be[0]-Ge)))/me:Ue=Math.max($,Math.min(1,Math.abs(Le[1]-be[1]-qe)))/B;const Qe=de(me*je),xe=de(B*Ue);Te=ve(...ae(Qe,xe));const U=Be-Te[0],Y=Ne-Te[1];this.width=Qe,this.height=xe,this.x=U,this.y=Y,this.setDims(x*Qe,V*xe),this.fixAndSetPosition()},se=new WeakSet,ui=async function(){var x;const d=s(this,c);if(!d)return;if(!s(this,m)&&!s(this,n)){d.classList.remove("done"),(x=s(this,C))==null||x.remove();return}M._l10nPromise.get("editor_alt_text_edit_button_label").then(V=>{d.setAttribute("aria-label",V)});let u=s(this,C);if(!u){he(this,C,u=document.createElement("span")),u.className="tooltip",u.setAttribute("role","tooltip");const V=u.id=`alt-text-tooltip-${this.id}`;d.setAttribute("aria-describedby",V);const W=100;d.addEventListener("mouseenter",()=>{he(this,A,setTimeout(()=>{he(this,A,null),s(this,C).classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},W))}),d.addEventListener("mouseleave",()=>{var X;clearTimeout(s(this,A)),he(this,A,null),(X=s(this,C))==null||X.classList.remove("show")})}d.classList.add("done"),u.innerText=s(this,n)?await M._l10nPromise.get("editor_alt_text_decorative_tooltip"):s(this,m),u.parentNode||d.append(u)},Me=new WeakSet,Mn=function(d){if(!this._isDraggable)return;const u=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let x,V;u&&(x={passive:!0,capture:!0},V=X=>{const[me,B]=this.screenToPageTranslation(X.movementX,X.movementY);this._uiManager.dragSelectedEditors(me,B)},window.addEventListener("pointermove",V,x));const W=()=>{if(window.removeEventListener("pointerup",W),window.removeEventListener("blur",W),u&&window.removeEventListener("pointermove",V,x),he(this,P,!1),!this._uiManager.endDragSession()){const{isMac:X}=f.FeatureTest.platform;d.ctrlKey&&!X||d.shiftKey||d.metaKey&&X?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",W),window.addEventListener("blur",W)},j(M,N),Je(M,"_borderLineWidth",-1),Je(M,"_colorManager",new i.ColorManager),Je(M,"_zIndex",1),Je(M,"SMALL_EDITOR_SIZE",0);let L=M;t.AnnotationEditor=L;class _ extends L{constructor(d){super(d),this.annotationElementId=d.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(e,t,a)=>{var E,r,g,b,P,fi,T,o,l,S,y,Ln,D,G,le,H,Z,re,Q,K,ue,se,Ce,Me,q,M,F,d,u,x,V,W,X,me,B,O,$,de,te,ve,Pe,Se,oe,ae,ne,ce,be,In,Te,pi,Ne,gi,Ue,Vt,qe,mi,xe,bi,Y,ot,ee,St,we,kn,_e,On,Re,_i,Ve,Et,Oe,vi;Object.defineProperty(t,"__esModule",{value:!0}),t.KeyboardManager=t.CommandManager=t.ColorManager=t.AnnotationEditorUIManager=void 0,t.bindEvents=I,t.opacityToHex=L;var i=a(1),f=a(6);function I(ge,k,J){for(const fe of J)k.addEventListener(fe,ge[fe].bind(ge))}function L(ge){return Math.round(Math.min(255,Math.max(1,255*ge))).toString(16).padStart(2,"0")}class _{constructor(){j(this,E,0)}getId(){return`${i.AnnotationEditorPrefix}${ft(this,E)._++}`}}E=new WeakMap;const v=class v{constructor(){j(this,P);j(this,r,(0,i.getUuid)());j(this,g,0);j(this,b,null)}static get _isSVGFittingCanvas(){const k='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',fe=new OffscreenCanvas(1,3).getContext("2d"),ye=new Image;ye.src=k;const Ae=ye.decode().then(()=>(fe.drawImage(ye,0,0,1,1,0,0,1,3),new Uint32Array(fe.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,i.shadow)(this,"_isSVGFittingCanvas",Ae)}async getFromFile(k){const{lastModified:J,name:fe,size:ye,type:Ae}=k;return z(this,P,fi).call(this,`${J}_${fe}_${ye}_${Ae}`,k)}async getFromUrl(k){return z(this,P,fi).call(this,k,k)}async getFromId(k){s(this,b)||he(this,b,new Map);const J=s(this,b).get(k);return J?J.bitmap?(J.refCounter+=1,J):J.file?this.getFromFile(J.file):this.getFromUrl(J.url):null}getSvgUrl(k){const J=s(this,b).get(k);return J!=null&&J.isSvg?J.svgUrl:null}deleteId(k){s(this,b)||he(this,b,new Map);const J=s(this,b).get(k);J&&(J.refCounter-=1,J.refCounter===0&&(J.bitmap=null))}isValidId(k){return k.startsWith(`image_${s(this,r)}_`)}};r=new WeakMap,g=new WeakMap,b=new WeakMap,P=new WeakSet,fi=async function(k,J){s(this,b)||he(this,b,new Map);let fe=s(this,b).get(k);if(fe===null)return null;if(fe!=null&&fe.bitmap)return fe.refCounter+=1,fe;try{fe||(fe={bitmap:null,id:`image_${s(this,r)}_${ft(this,g)._++}`,refCounter:0,isSvg:!1});let ye;if(typeof J=="string"){fe.url=J;const Ae=await fetch(J);if(!Ae.ok)throw new Error(Ae.statusText);ye=await Ae.blob()}else ye=fe.file=J;if(ye.type==="image/svg+xml"){const Ae=v._isSVGFittingCanvas,Ie=new FileReader,De=new Image,ze=new Promise((He,tt)=>{De.onload=()=>{fe.bitmap=De,fe.isSvg=!0,He()},Ie.onload=async()=>{const Xe=fe.svgUrl=Ie.result;De.src=await Ae?`${Xe}#svgView(preserveAspectRatio(none))`:Xe},De.onerror=Ie.onerror=tt});Ie.readAsDataURL(ye),await ze}else fe.bitmap=await createImageBitmap(ye);fe.refCounter=1}catch(ye){console.error(ye),fe=null}return s(this,b).set(k,fe),fe&&s(this,b).set(fe.id,fe),fe};let m=v;class n{constructor(k=128){j(this,T,[]);j(this,o,!1);j(this,l,void 0);j(this,S,-1);he(this,l,k)}add({cmd:k,undo:J,mustExec:fe,type:ye=NaN,overwriteIfSameType:Ae=!1,keepUndo:Ie=!1}){if(fe&&k(),s(this,o))return;const De={cmd:k,undo:J,type:ye};if(s(this,S)===-1){s(this,T).length>0&&(s(this,T).length=0),he(this,S,0),s(this,T).push(De);return}if(Ae&&s(this,T)[s(this,S)].type===ye){Ie&&(De.undo=s(this,T)[s(this,S)].undo),s(this,T)[s(this,S)]=De;return}const ze=s(this,S)+1;ze===s(this,l)?s(this,T).splice(0,1):(he(this,S,ze),ze<s(this,T).length&&s(this,T).splice(ze)),s(this,T).push(De)}undo(){s(this,S)!==-1&&(he(this,o,!0),s(this,T)[s(this,S)].undo(),he(this,o,!1),he(this,S,s(this,S)-1))}redo(){s(this,S)<s(this,T).length-1&&(he(this,S,s(this,S)+1),he(this,o,!0),s(this,T)[s(this,S)].cmd(),he(this,o,!1))}hasSomethingToUndo(){return s(this,S)!==-1}hasSomethingToRedo(){return s(this,S)<s(this,T).length-1}destroy(){he(this,T,null)}}T=new WeakMap,o=new WeakMap,l=new WeakMap,S=new WeakMap,t.CommandManager=n;class c{constructor(k){j(this,y);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:J}=i.FeatureTest.platform;for(const[fe,ye,Ae={}]of k)for(const Ie of fe){const De=Ie.startsWith("mac+");J&&De?(this.callbacks.set(Ie.slice(4),{callback:ye,options:Ae}),this.allKeys.add(Ie.split("+").at(-1))):!J&&!De&&(this.callbacks.set(Ie,{callback:ye,options:Ae}),this.allKeys.add(Ie.split("+").at(-1)))}}exec(k,J){if(!this.allKeys.has(J.key))return;const fe=this.callbacks.get(z(this,y,Ln).call(this,J));if(!fe)return;const{callback:ye,options:{bubbles:Ae=!1,args:Ie=[],checker:De=null}}=fe;De&&!De(k,J)||(ye.bind(k,...Ie)(),Ae||(J.stopPropagation(),J.preventDefault()))}}y=new WeakSet,Ln=function(k){k.altKey&&this.buffer.push("alt"),k.ctrlKey&&this.buffer.push("ctrl"),k.metaKey&&this.buffer.push("meta"),k.shiftKey&&this.buffer.push("shift"),this.buffer.push(k.key);const J=this.buffer.join("+");return this.buffer.length=0,J},t.KeyboardManager=c;const N=class N{get _colors(){const k=new Map([["CanvasText",null],["Canvas",null]]);return(0,f.getColorValues)(k),(0,i.shadow)(this,"_colors",k)}convert(k){const J=(0,f.getRGB)(k);if(!window.matchMedia("(forced-colors: active)").matches)return J;for(const[fe,ye]of this._colors)if(ye.every((Ae,Ie)=>Ae===J[Ie]))return N._colorsMapping.get(fe);return J}getHexCode(k){const J=this._colors.get(k);return J?i.Util.makeHexColor(...J):k}};Je(N,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let C=N;t.ColorManager=C;const $e=class $e{constructor(k,J,fe,ye,Ae,Ie){j(this,be);j(this,Te);j(this,Ne);j(this,Ue);j(this,qe);j(this,xe);j(this,Y);j(this,ee);j(this,we);j(this,_e);j(this,Re);j(this,Ve);j(this,Oe);j(this,D,null);j(this,G,new Map);j(this,le,new Map);j(this,H,null);j(this,Z,null);j(this,re,new n);j(this,Q,0);j(this,K,new Set);j(this,ue,null);j(this,se,null);j(this,Ce,new Set);j(this,Me,null);j(this,q,new _);j(this,M,!1);j(this,F,!1);j(this,d,null);j(this,u,i.AnnotationEditorType.NONE);j(this,x,new Set);j(this,V,null);j(this,W,this.blur.bind(this));j(this,X,this.focus.bind(this));j(this,me,this.copy.bind(this));j(this,B,this.cut.bind(this));j(this,O,this.paste.bind(this));j(this,$,this.keydown.bind(this));j(this,de,this.onEditingAction.bind(this));j(this,te,this.onPageChanging.bind(this));j(this,ve,this.onScaleChanging.bind(this));j(this,Pe,this.onRotationChanging.bind(this));j(this,Se,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});j(this,oe,[0,0]);j(this,ae,null);j(this,ne,null);j(this,ce,null);he(this,ne,k),he(this,ce,J),he(this,H,fe),this._eventBus=ye,this._eventBus._on("editingaction",s(this,de)),this._eventBus._on("pagechanging",s(this,te)),this._eventBus._on("scalechanging",s(this,ve)),this._eventBus._on("rotationchanging",s(this,Pe)),he(this,Z,Ae.annotationStorage),he(this,Me,Ae.filterFactory),he(this,V,Ie),this.viewParameters={realScale:f.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}static get _keyboardManager(){const k=$e.prototype,J=Ae=>{const{activeElement:Ie}=document;return Ie&&s(Ae,ne).contains(Ie)&&Ae.hasSomethingToControl()},fe=this.TRANSLATE_SMALL,ye=this.TRANSLATE_BIG;return(0,i.shadow)(this,"_keyboardManager",new c([[["ctrl+a","mac+meta+a"],k.selectAll],[["ctrl+z","mac+meta+z"],k.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],k.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],k.delete],[["Escape","mac+Escape"],k.unselectAll],[["ArrowLeft","mac+ArrowLeft"],k.translateSelectedEditors,{args:[-fe,0],checker:J}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],k.translateSelectedEditors,{args:[-ye,0],checker:J}],[["ArrowRight","mac+ArrowRight"],k.translateSelectedEditors,{args:[fe,0],checker:J}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],k.translateSelectedEditors,{args:[ye,0],checker:J}],[["ArrowUp","mac+ArrowUp"],k.translateSelectedEditors,{args:[0,-fe],checker:J}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],k.translateSelectedEditors,{args:[0,-ye],checker:J}],[["ArrowDown","mac+ArrowDown"],k.translateSelectedEditors,{args:[0,fe],checker:J}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],k.translateSelectedEditors,{args:[0,ye],checker:J}]]))}destroy(){z(this,Ue,Vt).call(this),z(this,Te,pi).call(this),this._eventBus._off("editingaction",s(this,de)),this._eventBus._off("pagechanging",s(this,te)),this._eventBus._off("scalechanging",s(this,ve)),this._eventBus._off("rotationchanging",s(this,Pe));for(const k of s(this,le).values())k.destroy();s(this,le).clear(),s(this,G).clear(),s(this,Ce).clear(),he(this,D,null),s(this,x).clear(),s(this,re).destroy(),s(this,H).destroy()}get hcmFilter(){return(0,i.shadow)(this,"hcmFilter",s(this,V)?s(this,Me).addHCMFilter(s(this,V).foreground,s(this,V).background):"none")}get direction(){return(0,i.shadow)(this,"direction",getComputedStyle(s(this,ne)).direction)}editAltText(k){var J;(J=s(this,H))==null||J.editAltText(this,k)}onPageChanging({pageNumber:k}){he(this,Q,k-1)}focusMainContainer(){s(this,ne).focus()}findParent(k,J){for(const fe of s(this,le).values()){const{x:ye,y:Ae,width:Ie,height:De}=fe.div.getBoundingClientRect();if(k>=ye&&k<=ye+Ie&&J>=Ae&&J<=Ae+De)return fe}return null}disableUserSelect(k=!1){s(this,ce).classList.toggle("noUserSelect",k)}addShouldRescale(k){s(this,Ce).add(k)}removeShouldRescale(k){s(this,Ce).delete(k)}onScaleChanging({scale:k}){this.commitOrRemove(),this.viewParameters.realScale=k*f.PixelsPerInch.PDF_TO_CSS_UNITS;for(const J of s(this,Ce))J.onScaleChanging()}onRotationChanging({pagesRotation:k}){this.commitOrRemove(),this.viewParameters.rotation=k}addToAnnotationStorage(k){!k.isEmpty()&&s(this,Z)&&!s(this,Z).has(k.id)&&s(this,Z).setValue(k.id,k)}blur(){if(!this.hasSelection)return;const{activeElement:k}=document;for(const J of s(this,x))if(J.div.contains(k)){he(this,d,[J,k]),J._focusEventsAllowed=!1;break}}focus(){if(!s(this,d))return;const[k,J]=s(this,d);he(this,d,null),J.addEventListener("focusin",()=>{k._focusEventsAllowed=!0},{once:!0}),J.focus()}addEditListeners(){z(this,Ne,gi).call(this),z(this,qe,mi).call(this)}removeEditListeners(){z(this,Ue,Vt).call(this),z(this,xe,bi).call(this)}copy(k){var fe;if(k.preventDefault(),(fe=s(this,D))==null||fe.commitOrRemove(),!this.hasSelection)return;const J=[];for(const ye of s(this,x)){const Ae=ye.serialize(!0);Ae&&J.push(Ae)}J.length!==0&&k.clipboardData.setData("application/pdfjs",JSON.stringify(J))}cut(k){this.copy(k),this.delete()}paste(k){k.preventDefault();const{clipboardData:J}=k;for(const Ae of J.items)for(const Ie of s(this,se))if(Ie.isHandlingMimeForPasting(Ae.type)){Ie.paste(Ae,this.currentLayer);return}let fe=J.getData("application/pdfjs");if(!fe)return;try{fe=JSON.parse(fe)}catch(Ae){(0,i.warn)(`paste: "${Ae.message}".`);return}if(!Array.isArray(fe))return;this.unselectAll();const ye=this.currentLayer;try{const Ae=[];for(const ze of fe){const He=ye.deserialize(ze);if(!He)return;Ae.push(He)}const Ie=()=>{for(const ze of Ae)z(this,Re,_i).call(this,ze);z(this,Oe,vi).call(this,Ae)},De=()=>{for(const ze of Ae)ze.remove()};this.addCommands({cmd:Ie,undo:De,mustExec:!0})}catch(Ae){(0,i.warn)(`paste: "${Ae.message}".`)}}keydown(k){var J;(J=this.getActive())!=null&&J.shouldGetKeyboardEvents()||$e._keyboardManager.exec(this,k)}onEditingAction(k){["undo","redo","delete","selectAll"].includes(k.name)&&this[k.name]()}setEditingState(k){k?(z(this,be,In).call(this),z(this,Ne,gi).call(this),z(this,qe,mi).call(this),z(this,Y,ot).call(this,{isEditing:s(this,u)!==i.AnnotationEditorType.NONE,isEmpty:z(this,Ve,Et).call(this),hasSomethingToUndo:s(this,re).hasSomethingToUndo(),hasSomethingToRedo:s(this,re).hasSomethingToRedo(),hasSelectedEditor:!1})):(z(this,Te,pi).call(this),z(this,Ue,Vt).call(this),z(this,xe,bi).call(this),z(this,Y,ot).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(k){if(!s(this,se)){he(this,se,k);for(const J of s(this,se))z(this,ee,St).call(this,J.defaultPropertiesToUpdate)}}getId(){return s(this,q).getId()}get currentLayer(){return s(this,le).get(s(this,Q))}getLayer(k){return s(this,le).get(k)}get currentPageIndex(){return s(this,Q)}addLayer(k){s(this,le).set(k.pageIndex,k),s(this,M)?k.enable():k.disable()}removeLayer(k){s(this,le).delete(k.pageIndex)}updateMode(k,J=null){if(s(this,u)!==k){if(he(this,u,k),k===i.AnnotationEditorType.NONE){this.setEditingState(!1),z(this,_e,On).call(this);return}this.setEditingState(!0),z(this,we,kn).call(this),this.unselectAll();for(const fe of s(this,le).values())fe.updateMode(k);if(J){for(const fe of s(this,G).values())if(fe.annotationElementId===J){this.setSelected(fe),fe.enterInEditMode();break}}}}updateToolbar(k){k!==s(this,u)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:k})}updateParams(k,J){if(s(this,se)){if(k===i.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(k);return}for(const fe of s(this,x))fe.updateParams(k,J);for(const fe of s(this,se))fe.updateDefaultParams(k,J)}}enableWaiting(k=!1){if(s(this,F)!==k){he(this,F,k);for(const J of s(this,le).values())k?J.disableClick():J.enableClick(),J.div.classList.toggle("waiting",k)}}getEditors(k){const J=[];for(const fe of s(this,G).values())fe.pageIndex===k&&J.push(fe);return J}getEditor(k){return s(this,G).get(k)}addEditor(k){s(this,G).set(k.id,k)}removeEditor(k){var J;s(this,G).delete(k.id),this.unselect(k),(!k.annotationElementId||!s(this,K).has(k.annotationElementId))&&((J=s(this,Z))==null||J.remove(k.id))}addDeletedAnnotationElement(k){s(this,K).add(k.annotationElementId),k.deleted=!0}isDeletedAnnotationElement(k){return s(this,K).has(k)}removeDeletedAnnotationElement(k){s(this,K).delete(k.annotationElementId),k.deleted=!1}setActiveEditor(k){s(this,D)!==k&&(he(this,D,k),k&&z(this,ee,St).call(this,k.propertiesToUpdate))}toggleSelected(k){if(s(this,x).has(k)){s(this,x).delete(k),k.unselect(),z(this,Y,ot).call(this,{hasSelectedEditor:this.hasSelection});return}s(this,x).add(k),k.select(),z(this,ee,St).call(this,k.propertiesToUpdate),z(this,Y,ot).call(this,{hasSelectedEditor:!0})}setSelected(k){for(const J of s(this,x))J!==k&&J.unselect();s(this,x).clear(),s(this,x).add(k),k.select(),z(this,ee,St).call(this,k.propertiesToUpdate),z(this,Y,ot).call(this,{hasSelectedEditor:!0})}isSelected(k){return s(this,x).has(k)}unselect(k){k.unselect(),s(this,x).delete(k),z(this,Y,ot).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return s(this,x).size!==0}undo(){s(this,re).undo(),z(this,Y,ot).call(this,{hasSomethingToUndo:s(this,re).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:z(this,Ve,Et).call(this)})}redo(){s(this,re).redo(),z(this,Y,ot).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:s(this,re).hasSomethingToRedo(),isEmpty:z(this,Ve,Et).call(this)})}addCommands(k){s(this,re).add(k),z(this,Y,ot).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:z(this,Ve,Et).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const k=[...s(this,x)],J=()=>{for(const ye of k)ye.remove()},fe=()=>{for(const ye of k)z(this,Re,_i).call(this,ye)};this.addCommands({cmd:J,undo:fe,mustExec:!0})}commitOrRemove(){var k;(k=s(this,D))==null||k.commitOrRemove()}hasSomethingToControl(){return s(this,D)||this.hasSelection}selectAll(){for(const k of s(this,x))k.commit();z(this,Oe,vi).call(this,s(this,G).values())}unselectAll(){if(s(this,D)){s(this,D).commitOrRemove();return}if(this.hasSelection){for(const k of s(this,x))k.unselect();s(this,x).clear(),z(this,Y,ot).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(k,J,fe=!1){if(fe||this.commitOrRemove(),!this.hasSelection)return;s(this,oe)[0]+=k,s(this,oe)[1]+=J;const[ye,Ae]=s(this,oe),Ie=[...s(this,x)],De=1e3;s(this,ae)&&clearTimeout(s(this,ae)),he(this,ae,setTimeout(()=>{he(this,ae,null),s(this,oe)[0]=s(this,oe)[1]=0,this.addCommands({cmd:()=>{for(const ze of Ie)s(this,G).has(ze.id)&&ze.translateInPage(ye,Ae)},undo:()=>{for(const ze of Ie)s(this,G).has(ze.id)&&ze.translateInPage(-ye,-Ae)},mustExec:!1})},De));for(const ze of Ie)ze.translateInPage(k,J)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),he(this,ue,new Map);for(const k of s(this,x))s(this,ue).set(k,{savedX:k.x,savedY:k.y,savedPageIndex:k.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!s(this,ue))return!1;this.disableUserSelect(!1);const k=s(this,ue);he(this,ue,null);let J=!1;for(const[{x:ye,y:Ae,pageIndex:Ie},De]of k)De.newX=ye,De.newY=Ae,De.newPageIndex=Ie,J||(J=ye!==De.savedX||Ae!==De.savedY||Ie!==De.savedPageIndex);if(!J)return!1;const fe=(ye,Ae,Ie,De)=>{if(s(this,G).has(ye.id)){const ze=s(this,le).get(De);ze?ye._setParentAndPosition(ze,Ae,Ie):(ye.pageIndex=De,ye.x=Ae,ye.y=Ie)}};return this.addCommands({cmd:()=>{for(const[ye,{newX:Ae,newY:Ie,newPageIndex:De}]of k)fe(ye,Ae,Ie,De)},undo:()=>{for(const[ye,{savedX:Ae,savedY:Ie,savedPageIndex:De}]of k)fe(ye,Ae,Ie,De)},mustExec:!0}),!0}dragSelectedEditors(k,J){if(s(this,ue))for(const fe of s(this,ue).keys())fe.drag(k,J)}rebuild(k){if(k.parent===null){const J=this.getLayer(k.pageIndex);J?(J.changeParent(k),J.addOrRebuild(k)):(this.addEditor(k),this.addToAnnotationStorage(k),k.rebuild())}else k.parent.addOrRebuild(k)}isActive(k){return s(this,D)===k}getActive(){return s(this,D)}getMode(){return s(this,u)}get imageManager(){return(0,i.shadow)(this,"imageManager",new m)}};D=new WeakMap,G=new WeakMap,le=new WeakMap,H=new WeakMap,Z=new WeakMap,re=new WeakMap,Q=new WeakMap,K=new WeakMap,ue=new WeakMap,se=new WeakMap,Ce=new WeakMap,Me=new WeakMap,q=new WeakMap,M=new WeakMap,F=new WeakMap,d=new WeakMap,u=new WeakMap,x=new WeakMap,V=new WeakMap,W=new WeakMap,X=new WeakMap,me=new WeakMap,B=new WeakMap,O=new WeakMap,$=new WeakMap,de=new WeakMap,te=new WeakMap,ve=new WeakMap,Pe=new WeakMap,Se=new WeakMap,oe=new WeakMap,ae=new WeakMap,ne=new WeakMap,ce=new WeakMap,be=new WeakSet,In=function(){window.addEventListener("focus",s(this,X)),window.addEventListener("blur",s(this,W))},Te=new WeakSet,pi=function(){window.removeEventListener("focus",s(this,X)),window.removeEventListener("blur",s(this,W))},Ne=new WeakSet,gi=function(){window.addEventListener("keydown",s(this,$),{capture:!0})},Ue=new WeakSet,Vt=function(){window.removeEventListener("keydown",s(this,$),{capture:!0})},qe=new WeakSet,mi=function(){document.addEventListener("copy",s(this,me)),document.addEventListener("cut",s(this,B)),document.addEventListener("paste",s(this,O))},xe=new WeakSet,bi=function(){document.removeEventListener("copy",s(this,me)),document.removeEventListener("cut",s(this,B)),document.removeEventListener("paste",s(this,O))},Y=new WeakSet,ot=function(k){Object.entries(k).some(([fe,ye])=>s(this,Se)[fe]!==ye)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(s(this,Se),k)})},ee=new WeakSet,St=function(k){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:k})},we=new WeakSet,kn=function(){if(!s(this,M)){he(this,M,!0);for(const k of s(this,le).values())k.enable()}},_e=new WeakSet,On=function(){if(this.unselectAll(),s(this,M)){he(this,M,!1);for(const k of s(this,le).values())k.disable()}},Re=new WeakSet,_i=function(k){const J=s(this,le).get(k.pageIndex);J?J.addOrRebuild(k):this.addEditor(k)},Ve=new WeakSet,Et=function(){if(s(this,G).size===0)return!0;if(s(this,G).size===1)for(const k of s(this,G).values())return k.isEmpty();return!1},Oe=new WeakSet,vi=function(k){s(this,x).clear();for(const J of k)J.isEmpty()||(s(this,x).add(J),J.select());z(this,Y,ot).call(this,{hasSelectedEditor:!0})},Je($e,"TRANSLATE_SMALL",1),Je($e,"TRANSLATE_BIG",10);let A=$e;t.AnnotationEditorUIManager=A},(e,t,a)=>{var Q,K,ue,se,Ce,Me,q,M,F,d,u,x,gt,W,mt,me,wi,O,Ht,de,Ut,ve,At,Se,Pt;Object.defineProperty(t,"__esModule",{value:!0}),t.StatTimer=t.RenderingCancelledException=t.PixelsPerInch=t.PageViewport=t.PDFDateString=t.DOMStandardFontDataFactory=t.DOMSVGFactory=t.DOMFilterFactory=t.DOMCanvasFactory=t.DOMCMapReaderFactory=void 0,t.deprecated=S,t.getColorValues=G,t.getCurrentTransform=le,t.getCurrentTransformInverse=H,t.getFilenameFromUrl=P,t.getPdfFilenameFromUrl=R,t.getRGB=D,t.getXfaPageViewport=N,t.isDataScheme=g,t.isPdfFile=b,t.isValidFetchUrl=T,t.loadScript=l,t.noContextMenu=o,t.setLayerDimensions=Z;var i=a(7),f=a(1);const I="http://www.w3.org/2000/svg",re=class re{};Je(re,"CSS",96),Je(re,"PDF",72),Je(re,"PDF_TO_CSS_UNITS",re.CSS/re.PDF);let L=re;t.PixelsPerInch=L;class _ extends i.BaseFilterFactory{constructor({docId:ce,ownerDocument:be=globalThis.document}={}){super();j(this,x);j(this,W);j(this,me);j(this,O);j(this,de);j(this,ve);j(this,Se);j(this,Q,void 0);j(this,K,void 0);j(this,ue,void 0);j(this,se,void 0);j(this,Ce,void 0);j(this,Me,void 0);j(this,q,void 0);j(this,M,void 0);j(this,F,void 0);j(this,d,void 0);j(this,u,0);he(this,ue,ce),he(this,se,be)}addFilter(ce){if(!ce)return"none";let be=s(this,x,gt).get(ce);if(be)return be;let Le,Te,Be,Ne;if(ce.length===1){const qe=ce[0],Qe=new Array(256);for(let xe=0;xe<256;xe++)Qe[xe]=qe[xe]/255;Ne=Le=Te=Be=Qe.join(",")}else{const[qe,Qe,xe]=ce,U=new Array(256),Y=new Array(256),Ee=new Array(256);for(let ee=0;ee<256;ee++)U[ee]=qe[ee]/255,Y[ee]=Qe[ee]/255,Ee[ee]=xe[ee]/255;Le=U.join(","),Te=Y.join(","),Be=Ee.join(","),Ne=`${Le}${Te}${Be}`}if(be=s(this,x,gt).get(Ne),be)return s(this,x,gt).set(ce,be),be;const je=`g_${s(this,ue)}_transfer_map_${ft(this,u)._++}`,Ue=`url(#${je})`;s(this,x,gt).set(ce,Ue),s(this,x,gt).set(Ne,Ue);const Ge=z(this,O,Ht).call(this,je);return z(this,ve,At).call(this,Le,Te,Be,Ge),Ue}addHCMFilter(ce,be){var Qe;const Le=`${ce}-${be}`;if(s(this,Me)===Le)return s(this,q);if(he(this,Me,Le),he(this,q,"none"),(Qe=s(this,Ce))==null||Qe.remove(),!ce||!be)return s(this,q);const Te=z(this,Se,Pt).call(this,ce);ce=f.Util.makeHexColor(...Te);const Be=z(this,Se,Pt).call(this,be);if(be=f.Util.makeHexColor(...Be),s(this,W,mt).style.color="",ce==="#000000"&&be==="#ffffff"||ce===be)return s(this,q);const Ne=new Array(256);for(let xe=0;xe<=255;xe++){const U=xe/255;Ne[xe]=U<=.03928?U/12.92:((U+.055)/1.055)**2.4}const je=Ne.join(","),Ue=`g_${s(this,ue)}_hcm_filter`,Ge=he(this,M,z(this,O,Ht).call(this,Ue));z(this,ve,At).call(this,je,je,je,Ge),z(this,me,wi).call(this,Ge);const qe=(xe,U)=>{const Y=Te[xe]/255,Ee=Be[xe]/255,ee=new Array(U+1);for(let pe=0;pe<=U;pe++)ee[pe]=Y+pe/U*(Ee-Y);return ee.join(",")};return z(this,ve,At).call(this,qe(0,5),qe(1,5),qe(2,5),Ge),he(this,q,`url(#${Ue})`),s(this,q)}addHighlightHCMFilter(ce,be,Le,Te){var Ee;const Be=`${ce}-${be}-${Le}-${Te}`;if(s(this,F)===Be)return s(this,d);if(he(this,F,Be),he(this,d,"none"),(Ee=s(this,M))==null||Ee.remove(),!ce||!be)return s(this,d);const[Ne,je]=[ce,be].map(z(this,Se,Pt).bind(this));let Ue=Math.round(.2126*Ne[0]+.7152*Ne[1]+.0722*Ne[2]),Ge=Math.round(.2126*je[0]+.7152*je[1]+.0722*je[2]),[qe,Qe]=[Le,Te].map(z(this,Se,Pt).bind(this));Ge<Ue&&([Ue,Ge,qe,Qe]=[Ge,Ue,Qe,qe]),s(this,W,mt).style.color="";const xe=(ee,pe,we)=>{const ie=new Array(256),_e=(Ge-Ue)/we,ke=ee/255,Re=(pe-ee)/(255*we);let Fe=0;for(let Ve=0;Ve<=we;Ve++){const We=Math.round(Ue+Ve*_e),Oe=ke+Ve*Re;for(let Ye=Fe;Ye<=We;Ye++)ie[Ye]=Oe;Fe=We+1}for(let Ve=Fe;Ve<256;Ve++)ie[Ve]=ie[Fe-1];return ie.join(",")},U=`g_${s(this,ue)}_hcm_highlight_filter`,Y=he(this,M,z(this,O,Ht).call(this,U));return z(this,me,wi).call(this,Y),z(this,ve,At).call(this,xe(qe[0],Qe[0],5),xe(qe[1],Qe[1],5),xe(qe[2],Qe[2],5),Y),he(this,d,`url(#${U})`),s(this,d)}destroy(ce=!1){ce&&(s(this,q)||s(this,d))||(s(this,K)&&(s(this,K).parentNode.parentNode.remove(),he(this,K,null)),s(this,Q)&&(s(this,Q).clear(),he(this,Q,null)),he(this,u,0))}}Q=new WeakMap,K=new WeakMap,ue=new WeakMap,se=new WeakMap,Ce=new WeakMap,Me=new WeakMap,q=new WeakMap,M=new WeakMap,F=new WeakMap,d=new WeakMap,u=new WeakMap,x=new WeakSet,gt=function(){return s(this,Q)||he(this,Q,new Map)},W=new WeakSet,mt=function(){if(!s(this,K)){const ce=s(this,se).createElement("div"),{style:be}=ce;be.visibility="hidden",be.contain="strict",be.width=be.height=0,be.position="absolute",be.top=be.left=0,be.zIndex=-1;const Le=s(this,se).createElementNS(I,"svg");Le.setAttribute("width",0),Le.setAttribute("height",0),he(this,K,s(this,se).createElementNS(I,"defs")),ce.append(Le),Le.append(s(this,K)),s(this,se).body.append(ce)}return s(this,K)},me=new WeakSet,wi=function(ce){const be=s(this,se).createElementNS(I,"feColorMatrix");be.setAttribute("type","matrix"),be.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),ce.append(be)},O=new WeakSet,Ht=function(ce){const be=s(this,se).createElementNS(I,"filter");return be.setAttribute("color-interpolation-filters","sRGB"),be.setAttribute("id",ce),s(this,W,mt).append(be),be},de=new WeakSet,Ut=function(ce,be,Le){const Te=s(this,se).createElementNS(I,be);Te.setAttribute("type","discrete"),Te.setAttribute("tableValues",Le),ce.append(Te)},ve=new WeakSet,At=function(ce,be,Le,Te){const Be=s(this,se).createElementNS(I,"feComponentTransfer");Te.append(Be),z(this,de,Ut).call(this,Be,"feFuncR",ce),z(this,de,Ut).call(this,Be,"feFuncG",be),z(this,de,Ut).call(this,Be,"feFuncB",Le)},Se=new WeakSet,Pt=function(ce){return s(this,W,mt).style.color=ce,D(getComputedStyle(s(this,W,mt)).getPropertyValue("color"))},t.DOMFilterFactory=_;class m extends i.BaseCanvasFactory{constructor({ownerDocument:ne=globalThis.document}={}){super(),this._document=ne}_createCanvas(ne,ce){const be=this._document.createElement("canvas");return be.width=ne,be.height=ce,be}}t.DOMCanvasFactory=m;async function n(ae,ne=!1){if(T(ae,document.baseURI)){const ce=await fetch(ae);if(!ce.ok)throw new Error(ce.statusText);return ne?new Uint8Array(await ce.arrayBuffer()):(0,f.stringToBytes)(await ce.text())}return new Promise((ce,be)=>{const Le=new XMLHttpRequest;Le.open("GET",ae,!0),ne&&(Le.responseType="arraybuffer"),Le.onreadystatechange=()=>{if(Le.readyState===XMLHttpRequest.DONE){if(Le.status===200||Le.status===0){let Te;if(ne&&Le.response?Te=new Uint8Array(Le.response):!ne&&Le.responseText&&(Te=(0,f.stringToBytes)(Le.responseText)),Te){ce(Te);return}}be(new Error(Le.statusText))}},Le.send(null)})}class c extends i.BaseCMapReaderFactory{_fetchData(ne,ce){return n(ne,this.isCompressed).then(be=>({cMapData:be,compressionType:ce}))}}t.DOMCMapReaderFactory=c;class C extends i.BaseStandardFontDataFactory{_fetchData(ne){return n(ne,!0)}}t.DOMStandardFontDataFactory=C;class A extends i.BaseSVGFactory{_createSVG(ne){return document.createElementNS(I,ne)}}t.DOMSVGFactory=A;class E{constructor({viewBox:ne,scale:ce,rotation:be,offsetX:Le=0,offsetY:Te=0,dontFlip:Be=!1}){this.viewBox=ne,this.scale=ce,this.rotation=be,this.offsetX=Le,this.offsetY=Te;const Ne=(ne[2]+ne[0])/2,je=(ne[3]+ne[1])/2;let Ue,Ge,qe,Qe;switch(be%=360,be<0&&(be+=360),be){case 180:Ue=-1,Ge=0,qe=0,Qe=1;break;case 90:Ue=0,Ge=1,qe=1,Qe=0;break;case 270:Ue=0,Ge=-1,qe=-1,Qe=0;break;case 0:Ue=1,Ge=0,qe=0,Qe=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}Be&&(qe=-qe,Qe=-Qe);let xe,U,Y,Ee;Ue===0?(xe=Math.abs(je-ne[1])*ce+Le,U=Math.abs(Ne-ne[0])*ce+Te,Y=(ne[3]-ne[1])*ce,Ee=(ne[2]-ne[0])*ce):(xe=Math.abs(Ne-ne[0])*ce+Le,U=Math.abs(je-ne[1])*ce+Te,Y=(ne[2]-ne[0])*ce,Ee=(ne[3]-ne[1])*ce),this.transform=[Ue*ce,Ge*ce,qe*ce,Qe*ce,xe-Ue*ce*Ne-qe*ce*je,U-Ge*ce*Ne-Qe*ce*je],this.width=Y,this.height=Ee}get rawDims(){const{viewBox:ne}=this;return(0,f.shadow)(this,"rawDims",{pageWidth:ne[2]-ne[0],pageHeight:ne[3]-ne[1],pageX:ne[0],pageY:ne[1]})}clone({scale:ne=this.scale,rotation:ce=this.rotation,offsetX:be=this.offsetX,offsetY:Le=this.offsetY,dontFlip:Te=!1}={}){return new E({viewBox:this.viewBox.slice(),scale:ne,rotation:ce,offsetX:be,offsetY:Le,dontFlip:Te})}convertToViewportPoint(ne,ce){return f.Util.applyTransform([ne,ce],this.transform)}convertToViewportRectangle(ne){const ce=f.Util.applyTransform([ne[0],ne[1]],this.transform),be=f.Util.applyTransform([ne[2],ne[3]],this.transform);return[ce[0],ce[1],be[0],be[1]]}convertToPdfPoint(ne,ce){return f.Util.applyInverseTransform([ne,ce],this.transform)}}t.PageViewport=E;class r extends f.BaseException{constructor(ne,ce=0){super(ne,"RenderingCancelledException"),this.extraDelay=ce}}t.RenderingCancelledException=r;function g(ae){const ne=ae.length;let ce=0;for(;ce<ne&&ae[ce].trim()==="";)ce++;return ae.substring(ce,ce+5).toLowerCase()==="data:"}function b(ae){return typeof ae=="string"&&/\.pdf$/i.test(ae)}function P(ae,ne=!1){return ne||([ae]=ae.split(/[#?]/,1)),ae.substring(ae.lastIndexOf("/")+1)}function R(ae,ne="document.pdf"){if(typeof ae!="string")return ne;if(g(ae))return(0,f.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),ne;const ce=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,be=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,Le=ce.exec(ae);let Te=be.exec(Le[1])||be.exec(Le[2])||be.exec(Le[3]);if(Te&&(Te=Te[0],Te.includes("%")))try{Te=be.exec(decodeURIComponent(Te))[0]}catch{}return Te||ne}class v{constructor(){Je(this,"started",Object.create(null));Je(this,"times",[])}time(ne){ne in this.started&&(0,f.warn)(`Timer is already running for ${ne}`),this.started[ne]=Date.now()}timeEnd(ne){ne in this.started||(0,f.warn)(`Timer has not been started for ${ne}`),this.times.push({name:ne,start:this.started[ne],end:Date.now()}),delete this.started[ne]}toString(){const ne=[];let ce=0;for(const{name:be}of this.times)ce=Math.max(be.length,ce);for(const{name:be,start:Le,end:Te}of this.times)ne.push(`${be.padEnd(ce)} ${Te-Le}ms
`);return ne.join("")}}t.StatTimer=v;function T(ae,ne){try{const{protocol:ce}=ne?new URL(ae,ne):new URL(ae);return ce==="http:"||ce==="https:"}catch{return!1}}function o(ae){ae.preventDefault()}function l(ae,ne=!1){return new Promise((ce,be)=>{const Le=document.createElement("script");Le.src=ae,Le.onload=function(Te){ne&&Le.remove(),ce(Te)},Le.onerror=function(){be(new Error(`Cannot load script at: ${Le.src}`))},(document.head||document.documentElement).append(Le)})}function S(ae){console.log("Deprecated API usage: "+ae)}let y;class w{static toDateObject(ne){if(!ne||typeof ne!="string")return null;y||(y=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const ce=y.exec(ne);if(!ce)return null;const be=parseInt(ce[1],10);let Le=parseInt(ce[2],10);Le=Le>=1&&Le<=12?Le-1:0;let Te=parseInt(ce[3],10);Te=Te>=1&&Te<=31?Te:1;let Be=parseInt(ce[4],10);Be=Be>=0&&Be<=23?Be:0;let Ne=parseInt(ce[5],10);Ne=Ne>=0&&Ne<=59?Ne:0;let je=parseInt(ce[6],10);je=je>=0&&je<=59?je:0;const Ue=ce[7]||"Z";let Ge=parseInt(ce[8],10);Ge=Ge>=0&&Ge<=23?Ge:0;let qe=parseInt(ce[9],10)||0;return qe=qe>=0&&qe<=59?qe:0,Ue==="-"?(Be+=Ge,Ne+=qe):Ue==="+"&&(Be-=Ge,Ne-=qe),new Date(Date.UTC(be,Le,Te,Be,Ne,je))}}t.PDFDateString=w;function N(ae,{scale:ne=1,rotation:ce=0}){const{width:be,height:Le}=ae.attributes.style,Te=[0,0,parseInt(be),parseInt(Le)];return new E({viewBox:Te,scale:ne,rotation:ce})}function D(ae){if(ae.startsWith("#")){const ne=parseInt(ae.slice(1),16);return[(ne&16711680)>>16,(ne&65280)>>8,ne&255]}return ae.startsWith("rgb(")?ae.slice(4,-1).split(",").map(ne=>parseInt(ne)):ae.startsWith("rgba(")?ae.slice(5,-1).split(",").map(ne=>parseInt(ne)).slice(0,3):((0,f.warn)(`Not a valid color format: "${ae}"`),[0,0,0])}function G(ae){const ne=document.createElement("span");ne.style.visibility="hidden",document.body.append(ne);for(const ce of ae.keys()){ne.style.color=ce;const be=window.getComputedStyle(ne).color;ae.set(ce,D(be))}ne.remove()}function le(ae){const{a:ne,b:ce,c:be,d:Le,e:Te,f:Be}=ae.getTransform();return[ne,ce,be,Le,Te,Be]}function H(ae){const{a:ne,b:ce,c:be,d:Le,e:Te,f:Be}=ae.getTransform().invertSelf();return[ne,ce,be,Le,Te,Be]}function Z(ae,ne,ce=!1,be=!0){if(ne instanceof E){const{pageWidth:Le,pageHeight:Te}=ne.rawDims,{style:Be}=ae,Ne=f.FeatureTest.isCSSRoundSupported,je=`var(--scale-factor) * ${Le}px`,Ue=`var(--scale-factor) * ${Te}px`,Ge=Ne?`round(${je}, 1px)`:`calc(${je})`,qe=Ne?`round(${Ue}, 1px)`:`calc(${Ue})`;!ce||ne.rotation%180===0?(Be.width=Ge,Be.height=qe):(Be.width=qe,Be.height=Ge)}be&&ae.setAttribute("data-main-rotation",ne.rotation)}},(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseStandardFontDataFactory=t.BaseSVGFactory=t.BaseFilterFactory=t.BaseCanvasFactory=t.BaseCMapReaderFactory=void 0;var i=a(1);class f{constructor(){this.constructor===f&&(0,i.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(c){return"none"}addHCMFilter(c,C){return"none"}addHighlightHCMFilter(c,C,A,E){return"none"}destroy(c=!1){}}t.BaseFilterFactory=f;class I{constructor(){this.constructor===I&&(0,i.unreachable)("Cannot initialize BaseCanvasFactory.")}create(c,C){if(c<=0||C<=0)throw new Error("Invalid canvas size");const A=this._createCanvas(c,C);return{canvas:A,context:A.getContext("2d")}}reset(c,C,A){if(!c.canvas)throw new Error("Canvas is not specified");if(C<=0||A<=0)throw new Error("Invalid canvas size");c.canvas.width=C,c.canvas.height=A}destroy(c){if(!c.canvas)throw new Error("Canvas is not specified");c.canvas.width=0,c.canvas.height=0,c.canvas=null,c.context=null}_createCanvas(c,C){(0,i.unreachable)("Abstract method `_createCanvas` called.")}}t.BaseCanvasFactory=I;class L{constructor({baseUrl:c=null,isCompressed:C=!0}){this.constructor===L&&(0,i.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=c,this.isCompressed=C}async fetch({name:c}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!c)throw new Error("CMap name must be specified.");const C=this.baseUrl+c+(this.isCompressed?".bcmap":""),A=this.isCompressed?i.CMapCompressionType.BINARY:i.CMapCompressionType.NONE;return this._fetchData(C,A).catch(E=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${C}`)})}_fetchData(c,C){(0,i.unreachable)("Abstract method `_fetchData` called.")}}t.BaseCMapReaderFactory=L;class _{constructor({baseUrl:c=null}){this.constructor===_&&(0,i.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=c}async fetch({filename:c}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!c)throw new Error("Font filename must be specified.");const C=`${this.baseUrl}${c}`;return this._fetchData(C).catch(A=>{throw new Error(`Unable to load font data at: ${C}`)})}_fetchData(c){(0,i.unreachable)("Abstract method `_fetchData` called.")}}t.BaseStandardFontDataFactory=_;class m{constructor(){this.constructor===m&&(0,i.unreachable)("Cannot initialize BaseSVGFactory.")}create(c,C,A=!1){if(c<=0||C<=0)throw new Error("Invalid SVG dimensions");const E=this._createSVG("svg:svg");return E.setAttribute("version","1.1"),A||(E.setAttribute("width",`${c}px`),E.setAttribute("height",`${C}px`)),E.setAttribute("preserveAspectRatio","none"),E.setAttribute("viewBox",`0 0 ${c} ${C}`),E}createElement(c){if(typeof c!="string")throw new Error("Invalid SVG element type");return this._createSVG(c)}_createSVG(c){(0,i.unreachable)("Abstract method `_createSVG` called.")}}t.BaseSVGFactory=m},(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MurmurHash3_64=void 0;var i=a(1);const f=3285377520,I=4294901760,L=65535;class _{constructor(n){this.h1=n?n&4294967295:f,this.h2=n?n&4294967295:f}update(n){let c,C;if(typeof n=="string"){c=new Uint8Array(n.length*2),C=0;for(let S=0,y=n.length;S<y;S++){const w=n.charCodeAt(S);w<=255?c[C++]=w:(c[C++]=w>>>8,c[C++]=w&255)}}else if((0,i.isArrayBuffer)(n))c=n.slice(),C=c.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const A=C>>2,E=C-A*4,r=new Uint32Array(c.buffer,0,A);let g=0,b=0,P=this.h1,R=this.h2;const v=3432918353,T=461845907,o=v&L,l=T&L;for(let S=0;S<A;S++)S&1?(g=r[S],g=g*v&I|g*o&L,g=g<<15|g>>>17,g=g*T&I|g*l&L,P^=g,P=P<<13|P>>>19,P=P*5+3864292196):(b=r[S],b=b*v&I|b*o&L,b=b<<15|b>>>17,b=b*T&I|b*l&L,R^=b,R=R<<13|R>>>19,R=R*5+3864292196);switch(g=0,E){case 3:g^=c[A*4+2]<<16;case 2:g^=c[A*4+1]<<8;case 1:g^=c[A*4],g=g*v&I|g*o&L,g=g<<15|g>>>17,g=g*T&I|g*l&L,A&1?P^=g:R^=g}this.h1=P,this.h2=R}hexdigest(){let n=this.h1,c=this.h2;return n^=c>>>1,n=n*3981806797&I|n*36045&L,c=c*4283543511&I|((c<<16|n>>>16)*2950163797&I)>>>16,n^=c>>>1,n=n*444984403&I|n*60499&L,c=c*3301882366&I|((c<<16|n>>>16)*3120437893&I)>>>16,n^=c>>>1,(n>>>0).toString(16).padStart(8,"0")+(c>>>0).toString(16).padStart(8,"0")}}t.MurmurHash3_64=_},(e,t,a)=>{var L;Object.defineProperty(t,"__esModule",{value:!0}),t.FontLoader=t.FontFaceObject=void 0;var i=a(1);class f{constructor({ownerDocument:m=globalThis.document,styleElement:n=null}){j(this,L,new Set);this._document=m,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(m){this.nativeFontFaces.add(m),this._document.fonts.add(m)}removeNativeFontFace(m){this.nativeFontFaces.delete(m),this._document.fonts.delete(m)}insertRule(m){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const n=this.styleElement.sheet;n.insertRule(m,n.cssRules.length)}clear(){for(const m of this.nativeFontFaces)this._document.fonts.delete(m);this.nativeFontFaces.clear(),s(this,L).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(m){if(!(!m||s(this,L).has(m.loadedName))){if((0,i.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:n,src:c,style:C}=m,A=new FontFace(n,c,C);this.addNativeFontFace(A);try{await A.load(),s(this,L).add(n)}catch{(0,i.warn)(`Cannot load system font: ${m.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(A)}return}(0,i.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(m){if(m.attached||m.missingFile&&!m.systemFontInfo)return;if(m.attached=!0,m.systemFontInfo){await this.loadSystemFont(m.systemFontInfo);return}if(this.isFontLoadingAPISupported){const c=m.createNativeFontFace();if(c){this.addNativeFontFace(c);try{await c.loaded}catch(C){throw(0,i.warn)(`Failed to load font '${c.family}': '${C}'.`),m.disableFontFace=!0,C}}return}const n=m.createFontFaceRule();if(n){if(this.insertRule(n),this.isSyncFontLoadingSupported)return;await new Promise(c=>{const C=this._queueLoadingCallback(c);this._prepareFontLoadEvent(m,C)})}}get isFontLoadingAPISupported(){var n;const m=!!((n=this._document)!=null&&n.fonts);return(0,i.shadow)(this,"isFontLoadingAPISupported",m)}get isSyncFontLoadingSupported(){let m=!1;return(i.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(m=!0),(0,i.shadow)(this,"isSyncFontLoadingSupported",m)}_queueLoadingCallback(m){function n(){for((0,i.assert)(!C.done,"completeRequest() cannot be called twice."),C.done=!0;c.length>0&&c[0].done;){const A=c.shift();setTimeout(A.callback,0)}}const{loadingRequests:c}=this,C={done:!1,complete:n,callback:m};return c.push(C),C}get _loadTestFont(){const m=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,i.shadow)(this,"_loadTestFont",m)}_prepareFontLoadEvent(m,n){function c(D,G){return D.charCodeAt(G)<<24|D.charCodeAt(G+1)<<16|D.charCodeAt(G+2)<<8|D.charCodeAt(G+3)&255}function C(D,G,le,H){const Z=D.substring(0,G),re=D.substring(G+le);return Z+H+re}let A,E;const r=this._document.createElement("canvas");r.width=1,r.height=1;const g=r.getContext("2d");let b=0;function P(D,G){if(++b>30){(0,i.warn)("Load test font never loaded."),G();return}if(g.font="30px "+D,g.fillText(".",0,20),g.getImageData(0,0,1,1).data[3]>0){G();return}setTimeout(P.bind(null,D,G))}const R=`lt${Date.now()}${this.loadTestFontId++}`;let v=this._loadTestFont;v=C(v,976,R.length,R);const o=16,l=1482184792;let S=c(v,o);for(A=0,E=R.length-3;A<E;A+=4)S=S-l+c(R,A)|0;A<R.length&&(S=S-l+c(R+"XXX",A)|0),v=C(v,o,4,(0,i.string32)(S));const y=`url(data:font/opentype;base64,${btoa(v)});`,w=`@font-face {font-family:"${R}";src:${y}}`;this.insertRule(w);const N=this._document.createElement("div");N.style.visibility="hidden",N.style.width=N.style.height="10px",N.style.position="absolute",N.style.top=N.style.left="0px";for(const D of[m.loadedName,R]){const G=this._document.createElement("span");G.textContent="Hi",G.style.fontFamily=D,N.append(G)}this._document.body.append(N),P(R,()=>{N.remove(),n.complete()})}}L=new WeakMap,t.FontLoader=f;class I{constructor(m,{isEvalSupported:n=!0,disableFontFace:c=!1,ignoreErrors:C=!1,inspectFont:A=null}){this.compiledGlyphs=Object.create(null);for(const E in m)this[E]=m[E];this.isEvalSupported=n!==!1,this.disableFontFace=c===!0,this.ignoreErrors=C===!0,this._inspectFont=A}createNativeFontFace(){var n;if(!this.data||this.disableFontFace)return null;let m;if(!this.cssFontInfo)m=new FontFace(this.loadedName,this.data,{});else{const c={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(c.style=`oblique ${this.cssFontInfo.italicAngle}deg`),m=new FontFace(this.cssFontInfo.fontFamily,this.data,c)}return(n=this._inspectFont)==null||n.call(this,this),m}createFontFaceRule(){var C;if(!this.data||this.disableFontFace)return null;const m=(0,i.bytesToString)(this.data),n=`url(data:${this.mimetype};base64,${btoa(m)});`;let c;if(!this.cssFontInfo)c=`@font-face {font-family:"${this.loadedName}";src:${n}}`;else{let A=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(A+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),c=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${A}src:${n}}`}return(C=this._inspectFont)==null||C.call(this,this,n),c}getPathGenerator(m,n){if(this.compiledGlyphs[n]!==void 0)return this.compiledGlyphs[n];let c;try{c=m.get(this.loadedName+"_path_"+n)}catch(C){if(!this.ignoreErrors)throw C;return(0,i.warn)(`getPathGenerator - ignoring character: "${C}".`),this.compiledGlyphs[n]=function(A,E){}}if(this.isEvalSupported&&i.FeatureTest.isEvalSupported){const C=[];for(const A of c){const E=A.args!==void 0?A.args.join(","):"";C.push("c.",A.cmd,"(",E,`);
`)}return this.compiledGlyphs[n]=new Function("c","size",C.join(""))}return this.compiledGlyphs[n]=function(C,A){for(const E of c)E.cmd==="scale"&&(E.args=[A,-A]),C[E.cmd].apply(C,E.args)}}}t.FontFaceObject=I},(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NodeStandardFontDataFactory=t.NodeFilterFactory=t.NodeCanvasFactory=t.NodeCMapReaderFactory=void 0;var i=a(7);a(1);const f=function(n){return new Promise((c,C)=>{require$$5.readFile(n,(E,r)=>{if(E||!r){C(new Error(E));return}c(new Uint8Array(r))})})};class I extends i.BaseFilterFactory{}t.NodeFilterFactory=I;class L extends i.BaseCanvasFactory{_createCanvas(c,C){return require$$1.createCanvas(c,C)}}t.NodeCanvasFactory=L;class _ extends i.BaseCMapReaderFactory{_fetchData(c,C){return f(c).then(A=>({cMapData:A,compressionType:C}))}}t.NodeCMapReaderFactory=_;class m extends i.BaseStandardFontDataFactory{_fetchData(c){return f(c)}}t.NodeStandardFontDataFactory=m},(e,t,a)=>{var K,yi,se,Si;Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasGraphics=void 0;var i=a(1),f=a(6),I=a(12),L=a(13);const _=16,m=100,n=4096,c=15,C=10,A=1e3,E=16;function r(q,M){if(q._removeMirroring)throw new Error("Context is already forwarding operations.");q.__originalSave=q.save,q.__originalRestore=q.restore,q.__originalRotate=q.rotate,q.__originalScale=q.scale,q.__originalTranslate=q.translate,q.__originalTransform=q.transform,q.__originalSetTransform=q.setTransform,q.__originalResetTransform=q.resetTransform,q.__originalClip=q.clip,q.__originalMoveTo=q.moveTo,q.__originalLineTo=q.lineTo,q.__originalBezierCurveTo=q.bezierCurveTo,q.__originalRect=q.rect,q.__originalClosePath=q.closePath,q.__originalBeginPath=q.beginPath,q._removeMirroring=()=>{q.save=q.__originalSave,q.restore=q.__originalRestore,q.rotate=q.__originalRotate,q.scale=q.__originalScale,q.translate=q.__originalTranslate,q.transform=q.__originalTransform,q.setTransform=q.__originalSetTransform,q.resetTransform=q.__originalResetTransform,q.clip=q.__originalClip,q.moveTo=q.__originalMoveTo,q.lineTo=q.__originalLineTo,q.bezierCurveTo=q.__originalBezierCurveTo,q.rect=q.__originalRect,q.closePath=q.__originalClosePath,q.beginPath=q.__originalBeginPath,delete q._removeMirroring},q.save=function(){M.save(),this.__originalSave()},q.restore=function(){M.restore(),this.__originalRestore()},q.translate=function(d,u){M.translate(d,u),this.__originalTranslate(d,u)},q.scale=function(d,u){M.scale(d,u),this.__originalScale(d,u)},q.transform=function(d,u,x,V,W,X){M.transform(d,u,x,V,W,X),this.__originalTransform(d,u,x,V,W,X)},q.setTransform=function(d,u,x,V,W,X){M.setTransform(d,u,x,V,W,X),this.__originalSetTransform(d,u,x,V,W,X)},q.resetTransform=function(){M.resetTransform(),this.__originalResetTransform()},q.rotate=function(d){M.rotate(d),this.__originalRotate(d)},q.clip=function(d){M.clip(d),this.__originalClip(d)},q.moveTo=function(F,d){M.moveTo(F,d),this.__originalMoveTo(F,d)},q.lineTo=function(F,d){M.lineTo(F,d),this.__originalLineTo(F,d)},q.bezierCurveTo=function(F,d,u,x,V,W){M.bezierCurveTo(F,d,u,x,V,W),this.__originalBezierCurveTo(F,d,u,x,V,W)},q.rect=function(F,d,u,x){M.rect(F,d,u,x),this.__originalRect(F,d,u,x)},q.closePath=function(){M.closePath(),this.__originalClosePath()},q.beginPath=function(){M.beginPath(),this.__originalBeginPath()}}class g{constructor(M){this.canvasFactory=M,this.cache=Object.create(null)}getCanvas(M,F,d){let u;return this.cache[M]!==void 0?(u=this.cache[M],this.canvasFactory.reset(u,F,d)):(u=this.canvasFactory.create(F,d),this.cache[M]=u),u}delete(M){delete this.cache[M]}clear(){for(const M in this.cache){const F=this.cache[M];this.canvasFactory.destroy(F),delete this.cache[M]}}}function b(q,M,F,d,u,x,V,W,X,me){const[B,O,$,de,te,ve]=(0,f.getCurrentTransform)(q);if(O===0&&$===0){const oe=V*B+te,ae=Math.round(oe),ne=W*de+ve,ce=Math.round(ne),be=(V+X)*B+te,Le=Math.abs(Math.round(be)-ae)||1,Te=(W+me)*de+ve,Be=Math.abs(Math.round(Te)-ce)||1;return q.setTransform(Math.sign(B),0,0,Math.sign(de),ae,ce),q.drawImage(M,F,d,u,x,0,0,Le,Be),q.setTransform(B,O,$,de,te,ve),[Le,Be]}if(B===0&&de===0){const oe=W*$+te,ae=Math.round(oe),ne=V*O+ve,ce=Math.round(ne),be=(W+me)*$+te,Le=Math.abs(Math.round(be)-ae)||1,Te=(V+X)*O+ve,Be=Math.abs(Math.round(Te)-ce)||1;return q.setTransform(0,Math.sign(O),Math.sign($),0,ae,ce),q.drawImage(M,F,d,u,x,0,0,Be,Le),q.setTransform(B,O,$,de,te,ve),[Be,Le]}q.drawImage(M,F,d,u,x,V,W,X,me);const Pe=Math.hypot(B,O),Se=Math.hypot($,de);return[Pe*X,Se*me]}function P(q){const{width:M,height:F}=q;if(M>A||F>A)return null;const d=1e3,u=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),x=M+1;let V=new Uint8Array(x*(F+1)),W,X,me;const B=M+7&-8;let O=new Uint8Array(B*F),$=0;for(const Se of q.data){let oe=128;for(;oe>0;)O[$++]=Se&oe?0:255,oe>>=1}let de=0;for($=0,O[$]!==0&&(V[0]=1,++de),X=1;X<M;X++)O[$]!==O[$+1]&&(V[X]=O[$]?2:1,++de),$++;for(O[$]!==0&&(V[X]=2,++de),W=1;W<F;W++){$=W*B,me=W*x,O[$-B]!==O[$]&&(V[me]=O[$]?1:8,++de);let Se=(O[$]?4:0)+(O[$-B]?8:0);for(X=1;X<M;X++)Se=(Se>>2)+(O[$+1]?4:0)+(O[$-B+1]?8:0),u[Se]&&(V[me+X]=u[Se],++de),$++;if(O[$-B]!==O[$]&&(V[me+X]=O[$]?2:4,++de),de>d)return null}for($=B*(F-1),me=W*x,O[$]!==0&&(V[me]=8,++de),X=1;X<M;X++)O[$]!==O[$+1]&&(V[me+X]=O[$]?4:8,++de),$++;if(O[$]!==0&&(V[me+X]=4,++de),de>d)return null;const te=new Int32Array([0,x,-1,0,-x,0,0,0,1]),ve=new Path2D;for(W=0;de&&W<=F;W++){let Se=W*x;const oe=Se+M;for(;Se<oe&&!V[Se];)Se++;if(Se===oe)continue;ve.moveTo(Se%x,W);const ae=Se;let ne=V[Se];do{const ce=te[ne];do Se+=ce;while(!V[Se]);const be=V[Se];be!==5&&be!==10?(ne=be,V[Se]=0):(ne=be&51*ne>>4,V[Se]&=ne>>2|ne<<2),ve.lineTo(Se%x,Se/x|0),V[Se]||--de}while(ae!==Se);--W}return O=null,V=null,function(Se){Se.save(),Se.scale(1/M,-1/F),Se.translate(0,-F),Se.fill(ve),Se.beginPath(),Se.restore()}}class R{constructor(M,F){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=i.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=i.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=i.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,M,F])}clone(){const M=Object.create(this);return M.clipBox=this.clipBox.slice(),M}setCurrentPoint(M,F){this.x=M,this.y=F}updatePathMinMax(M,F,d){[F,d]=i.Util.applyTransform([F,d],M),this.minX=Math.min(this.minX,F),this.minY=Math.min(this.minY,d),this.maxX=Math.max(this.maxX,F),this.maxY=Math.max(this.maxY,d)}updateRectMinMax(M,F){const d=i.Util.applyTransform(F,M),u=i.Util.applyTransform(F.slice(2),M);this.minX=Math.min(this.minX,d[0],u[0]),this.minY=Math.min(this.minY,d[1],u[1]),this.maxX=Math.max(this.maxX,d[0],u[0]),this.maxY=Math.max(this.maxY,d[1],u[1])}updateScalingPathMinMax(M,F){i.Util.scaleMinMax(M,F),this.minX=Math.min(this.minX,F[0]),this.maxX=Math.max(this.maxX,F[1]),this.minY=Math.min(this.minY,F[2]),this.maxY=Math.max(this.maxY,F[3])}updateCurvePathMinMax(M,F,d,u,x,V,W,X,me,B){const O=i.Util.bezierBoundingBox(F,d,u,x,V,W,X,me);if(B){B[0]=Math.min(B[0],O[0],O[2]),B[1]=Math.max(B[1],O[0],O[2]),B[2]=Math.min(B[2],O[1],O[3]),B[3]=Math.max(B[3],O[1],O[3]);return}this.updateRectMinMax(M,O)}getPathBoundingBox(M=I.PathType.FILL,F=null){const d=[this.minX,this.minY,this.maxX,this.maxY];if(M===I.PathType.STROKE){F||(0,i.unreachable)("Stroke bounding box must include transform.");const u=i.Util.singularValueDecompose2dScale(F),x=u[0]*this.lineWidth/2,V=u[1]*this.lineWidth/2;d[0]-=x,d[1]-=V,d[2]+=x,d[3]+=V}return d}updateClipFromPath(){const M=i.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(M||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(M){this.clipBox=M,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(M=I.PathType.FILL,F=null){return i.Util.intersect(this.clipBox,this.getPathBoundingBox(M,F))}}function v(q,M){if(typeof ImageData<"u"&&M instanceof ImageData){q.putImageData(M,0,0);return}const F=M.height,d=M.width,u=F%E,x=(F-u)/E,V=u===0?x:x+1,W=q.createImageData(d,E);let X=0,me;const B=M.data,O=W.data;let $,de,te,ve;if(M.kind===i.ImageKind.GRAYSCALE_1BPP){const Pe=B.byteLength,Se=new Uint32Array(O.buffer,0,O.byteLength>>2),oe=Se.length,ae=d+7>>3,ne=4294967295,ce=i.FeatureTest.isLittleEndian?4278190080:255;for($=0;$<V;$++){for(te=$<x?E:u,me=0,de=0;de<te;de++){const be=Pe-X;let Le=0;const Te=be>ae?d:be*8-7,Be=Te&-8;let Ne=0,je=0;for(;Le<Be;Le+=8)je=B[X++],Se[me++]=je&128?ne:ce,Se[me++]=je&64?ne:ce,Se[me++]=je&32?ne:ce,Se[me++]=je&16?ne:ce,Se[me++]=je&8?ne:ce,Se[me++]=je&4?ne:ce,Se[me++]=je&2?ne:ce,Se[me++]=je&1?ne:ce;for(;Le<Te;Le++)Ne===0&&(je=B[X++],Ne=128),Se[me++]=je&Ne?ne:ce,Ne>>=1}for(;me<oe;)Se[me++]=0;q.putImageData(W,0,$*E)}}else if(M.kind===i.ImageKind.RGBA_32BPP){for(de=0,ve=d*E*4,$=0;$<x;$++)O.set(B.subarray(X,X+ve)),X+=ve,q.putImageData(W,0,de),de+=E;$<V&&(ve=d*u*4,O.set(B.subarray(X,X+ve)),q.putImageData(W,0,de))}else if(M.kind===i.ImageKind.RGB_24BPP)for(te=E,ve=d*te,$=0;$<V;$++){for($>=x&&(te=u,ve=d*te),me=0,de=ve;de--;)O[me++]=B[X++],O[me++]=B[X++],O[me++]=B[X++],O[me++]=255;q.putImageData(W,0,$*E)}else throw new Error(`bad image kind: ${M.kind}`)}function T(q,M){if(M.bitmap){q.drawImage(M.bitmap,0,0);return}const F=M.height,d=M.width,u=F%E,x=(F-u)/E,V=u===0?x:x+1,W=q.createImageData(d,E);let X=0;const me=M.data,B=W.data;for(let O=0;O<V;O++){const $=O<x?E:u;({srcPos:X}=(0,L.convertBlackAndWhiteToRGBA)({src:me,srcPos:X,dest:B,width:d,height:$,nonBlackColor:0})),q.putImageData(W,0,O*E)}}function o(q,M){const F=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const d of F)q[d]!==void 0&&(M[d]=q[d]);q.setLineDash!==void 0&&(M.setLineDash(q.getLineDash()),M.lineDashOffset=q.lineDashOffset)}function l(q){if(q.strokeStyle=q.fillStyle="#000000",q.fillRule="nonzero",q.globalAlpha=1,q.lineWidth=1,q.lineCap="butt",q.lineJoin="miter",q.miterLimit=10,q.globalCompositeOperation="source-over",q.font="10px sans-serif",q.setLineDash!==void 0&&(q.setLineDash([]),q.lineDashOffset=0),!i.isNodeJS){const{filter:M}=q;M!=="none"&&M!==""&&(q.filter="none")}}function S(q,M,F,d){const u=q.length;for(let x=3;x<u;x+=4){const V=q[x];if(V===0)q[x-3]=M,q[x-2]=F,q[x-1]=d;else if(V<255){const W=255-V;q[x-3]=q[x-3]*V+M*W>>8,q[x-2]=q[x-2]*V+F*W>>8,q[x-1]=q[x-1]*V+d*W>>8}}}function y(q,M,F){const d=q.length,u=1/255;for(let x=3;x<d;x+=4){const V=F?F[q[x]]:q[x];M[x]=M[x]*V*u|0}}function w(q,M,F){const d=q.length;for(let u=3;u<d;u+=4){const x=q[u-3]*77+q[u-2]*152+q[u-1]*28;M[u]=F?M[u]*F[x>>8]>>8:M[u]*x>>16}}function N(q,M,F,d,u,x,V,W,X,me,B){const O=!!x,$=O?x[0]:0,de=O?x[1]:0,te=O?x[2]:0,ve=u==="Luminosity"?w:y,Se=Math.min(d,Math.ceil(1048576/F));for(let oe=0;oe<d;oe+=Se){const ae=Math.min(Se,d-oe),ne=q.getImageData(W-me,oe+(X-B),F,ae),ce=M.getImageData(W,oe+X,F,ae);O&&S(ne.data,$,de,te),ve(ne.data,ce.data,V),M.putImageData(ce,W,oe+X)}}function D(q,M,F,d){const u=d[0],x=d[1],V=d[2]-u,W=d[3]-x;V===0||W===0||(N(M.context,F,V,W,M.subtype,M.backdrop,M.transferMap,u,x,M.offsetX,M.offsetY),q.save(),q.globalAlpha=1,q.globalCompositeOperation="source-over",q.setTransform(1,0,0,1,0,0),q.drawImage(F.canvas,0,0),q.restore())}function G(q,M){const F=i.Util.singularValueDecompose2dScale(q);F[0]=Math.fround(F[0]),F[1]=Math.fround(F[1]);const d=Math.fround((globalThis.devicePixelRatio||1)*f.PixelsPerInch.PDF_TO_CSS_UNITS);return M!==void 0?M:F[0]<=d||F[1]<=d}const le=["butt","round","square"],H=["miter","round","bevel"],Z={},re={},Me=class Me{constructor(M,F,d,u,x,{optionalContentConfig:V,markedContentStack:W=null},X,me){j(this,K);j(this,se);this.ctx=M,this.current=new R(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=F,this.objs=d,this.canvasFactory=u,this.filterFactory=x,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=W||[],this.optionalContentConfig=V,this.cachedCanvases=new g(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=X,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=me,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(M,F=null){return typeof M=="string"?M.startsWith("g_")?this.commonObjs.get(M):this.objs.get(M):F}beginDrawing({transform:M,viewport:F,transparency:d=!1,background:u=null}){const x=this.ctx.canvas.width,V=this.ctx.canvas.height,W=this.ctx.fillStyle;if(this.ctx.fillStyle=u||"#ffffff",this.ctx.fillRect(0,0,x,V),this.ctx.fillStyle=W,d){const X=this.cachedCanvases.getCanvas("transparent",x,V);this.compositeCtx=this.ctx,this.transparentCanvas=X.canvas,this.ctx=X.context,this.ctx.save(),this.ctx.transform(...(0,f.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),l(this.ctx),M&&(this.ctx.transform(...M),this.outputScaleX=M[0],this.outputScaleY=M[0]),this.ctx.transform(...F.transform),this.viewportScale=F.scale,this.baseTransform=(0,f.getCurrentTransform)(this.ctx)}executeOperatorList(M,F,d,u){const x=M.argsArray,V=M.fnArray;let W=F||0;const X=x.length;if(X===W)return W;const me=X-W>C&&typeof d=="function",B=me?Date.now()+c:0;let O=0;const $=this.commonObjs,de=this.objs;let te;for(;;){if(u!==void 0&&W===u.nextBreakPoint)return u.breakIt(W,d),W;if(te=V[W],te!==i.OPS.dependency)this[te].apply(this,x[W]);else for(const ve of x[W]){const Pe=ve.startsWith("g_")?$:de;if(!Pe.has(ve))return Pe.get(ve,d),W}if(W++,W===X)return W;if(me&&++O>C){if(Date.now()>B)return d(),W;O=0}}}endDrawing(){z(this,K,yi).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const M of this._cachedBitmapsMap.values()){for(const F of M.values())typeof HTMLCanvasElement<"u"&&F instanceof HTMLCanvasElement&&(F.width=F.height=0);M.clear()}this._cachedBitmapsMap.clear(),z(this,se,Si).call(this)}_scaleImage(M,F){const d=M.width,u=M.height;let x=Math.max(Math.hypot(F[0],F[1]),1),V=Math.max(Math.hypot(F[2],F[3]),1),W=d,X=u,me="prescale1",B,O;for(;x>2&&W>1||V>2&&X>1;){let $=W,de=X;x>2&&W>1&&($=W>=16384?Math.floor(W/2)-1||1:Math.ceil(W/2),x/=W/$),V>2&&X>1&&(de=X>=16384?Math.floor(X/2)-1||1:Math.ceil(X)/2,V/=X/de),B=this.cachedCanvases.getCanvas(me,$,de),O=B.context,O.clearRect(0,0,$,de),O.drawImage(M,0,0,W,X,0,0,$,de),M=B.canvas,W=$,X=de,me=me==="prescale1"?"prescale2":"prescale1"}return{img:M,paintWidth:W,paintHeight:X}}_createMaskCanvas(M){const F=this.ctx,{width:d,height:u}=M,x=this.current.fillColor,V=this.current.patternFill,W=(0,f.getCurrentTransform)(F);let X,me,B,O;if((M.bitmap||M.data)&&M.count>1){const Le=M.bitmap||M.data.buffer;me=JSON.stringify(V?W:[W.slice(0,4),x]),X=this._cachedBitmapsMap.get(Le),X||(X=new Map,this._cachedBitmapsMap.set(Le,X));const Te=X.get(me);if(Te&&!V){const Be=Math.round(Math.min(W[0],W[2])+W[4]),Ne=Math.round(Math.min(W[1],W[3])+W[5]);return{canvas:Te,offsetX:Be,offsetY:Ne}}B=Te}B||(O=this.cachedCanvases.getCanvas("maskCanvas",d,u),T(O.context,M));let $=i.Util.transform(W,[1/d,0,0,-1/u,0,0]);$=i.Util.transform($,[1,0,0,1,0,-u]);const de=i.Util.applyTransform([0,0],$),te=i.Util.applyTransform([d,u],$),ve=i.Util.normalizeRect([de[0],de[1],te[0],te[1]]),Pe=Math.round(ve[2]-ve[0])||1,Se=Math.round(ve[3]-ve[1])||1,oe=this.cachedCanvases.getCanvas("fillCanvas",Pe,Se),ae=oe.context,ne=Math.min(de[0],te[0]),ce=Math.min(de[1],te[1]);ae.translate(-ne,-ce),ae.transform(...$),B||(B=this._scaleImage(O.canvas,(0,f.getCurrentTransformInverse)(ae)),B=B.img,X&&V&&X.set(me,B)),ae.imageSmoothingEnabled=G((0,f.getCurrentTransform)(ae),M.interpolate),b(ae,B,0,0,B.width,B.height,0,0,d,u),ae.globalCompositeOperation="source-in";const be=i.Util.transform((0,f.getCurrentTransformInverse)(ae),[1,0,0,1,-ne,-ce]);return ae.fillStyle=V?x.getPattern(F,this,be,I.PathType.FILL):x,ae.fillRect(0,0,d,u),X&&!V&&(this.cachedCanvases.delete("fillCanvas"),X.set(me,oe.canvas)),{canvas:oe.canvas,offsetX:Math.round(ne),offsetY:Math.round(ce)}}setLineWidth(M){M!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=M,this.ctx.lineWidth=M}setLineCap(M){this.ctx.lineCap=le[M]}setLineJoin(M){this.ctx.lineJoin=H[M]}setMiterLimit(M){this.ctx.miterLimit=M}setDash(M,F){const d=this.ctx;d.setLineDash!==void 0&&(d.setLineDash(M),d.lineDashOffset=F)}setRenderingIntent(M){}setFlatness(M){}setGState(M){for(const[F,d]of M)switch(F){case"LW":this.setLineWidth(d);break;case"LC":this.setLineCap(d);break;case"LJ":this.setLineJoin(d);break;case"ML":this.setMiterLimit(d);break;case"D":this.setDash(d[0],d[1]);break;case"RI":this.setRenderingIntent(d);break;case"FL":this.setFlatness(d);break;case"Font":this.setFont(d[0],d[1]);break;case"CA":this.current.strokeAlpha=d;break;case"ca":this.current.fillAlpha=d,this.ctx.globalAlpha=d;break;case"BM":this.ctx.globalCompositeOperation=d;break;case"SMask":this.current.activeSMask=d?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(d);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const M=this.inSMaskMode;this.current.activeSMask&&!M?this.beginSMaskMode():!this.current.activeSMask&&M&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const M=this.ctx.canvas.width,F=this.ctx.canvas.height,d="smaskGroupAt"+this.groupLevel,u=this.cachedCanvases.getCanvas(d,M,F);this.suspendedCtx=this.ctx,this.ctx=u.context;const x=this.ctx;x.setTransform(...(0,f.getCurrentTransform)(this.suspendedCtx)),o(this.suspendedCtx,x),r(x,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),o(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(M){if(!this.current.activeSMask)return;M?(M[0]=Math.floor(M[0]),M[1]=Math.floor(M[1]),M[2]=Math.ceil(M[2]),M[3]=Math.ceil(M[3])):M=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const F=this.current.activeSMask,d=this.suspendedCtx;D(d,F,this.ctx,M),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(o(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const M=this.current;this.stateStack.push(M),this.current=M.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),o(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(M,F,d,u,x,V){this.ctx.transform(M,F,d,u,x,V),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(M,F,d){const u=this.ctx,x=this.current;let V=x.x,W=x.y,X,me;const B=(0,f.getCurrentTransform)(u),O=B[0]===0&&B[3]===0||B[1]===0&&B[2]===0,$=O?d.slice(0):null;for(let de=0,te=0,ve=M.length;de<ve;de++)switch(M[de]|0){case i.OPS.rectangle:V=F[te++],W=F[te++];const Pe=F[te++],Se=F[te++],oe=V+Pe,ae=W+Se;u.moveTo(V,W),Pe===0||Se===0?u.lineTo(oe,ae):(u.lineTo(oe,W),u.lineTo(oe,ae),u.lineTo(V,ae)),O||x.updateRectMinMax(B,[V,W,oe,ae]),u.closePath();break;case i.OPS.moveTo:V=F[te++],W=F[te++],u.moveTo(V,W),O||x.updatePathMinMax(B,V,W);break;case i.OPS.lineTo:V=F[te++],W=F[te++],u.lineTo(V,W),O||x.updatePathMinMax(B,V,W);break;case i.OPS.curveTo:X=V,me=W,V=F[te+4],W=F[te+5],u.bezierCurveTo(F[te],F[te+1],F[te+2],F[te+3],V,W),x.updateCurvePathMinMax(B,X,me,F[te],F[te+1],F[te+2],F[te+3],V,W,$),te+=6;break;case i.OPS.curveTo2:X=V,me=W,u.bezierCurveTo(V,W,F[te],F[te+1],F[te+2],F[te+3]),x.updateCurvePathMinMax(B,X,me,V,W,F[te],F[te+1],F[te+2],F[te+3],$),V=F[te+2],W=F[te+3],te+=4;break;case i.OPS.curveTo3:X=V,me=W,V=F[te+2],W=F[te+3],u.bezierCurveTo(F[te],F[te+1],V,W,V,W),x.updateCurvePathMinMax(B,X,me,F[te],F[te+1],V,W,V,W,$),te+=4;break;case i.OPS.closePath:u.closePath();break}O&&x.updateScalingPathMinMax(B,$),x.setCurrentPoint(V,W)}closePath(){this.ctx.closePath()}stroke(M=!0){const F=this.ctx,d=this.current.strokeColor;F.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof d=="object"&&(d!=null&&d.getPattern)?(F.save(),F.strokeStyle=d.getPattern(F,this,(0,f.getCurrentTransformInverse)(F),I.PathType.STROKE),this.rescaleAndStroke(!1),F.restore()):this.rescaleAndStroke(!0)),M&&this.consumePath(this.current.getClippedPathBoundingBox()),F.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(M=!0){const F=this.ctx,d=this.current.fillColor,u=this.current.patternFill;let x=!1;u&&(F.save(),F.fillStyle=d.getPattern(F,this,(0,f.getCurrentTransformInverse)(F),I.PathType.FILL),x=!0);const V=this.current.getClippedPathBoundingBox();this.contentVisible&&V!==null&&(this.pendingEOFill?(F.fill("evenodd"),this.pendingEOFill=!1):F.fill()),x&&F.restore(),M&&this.consumePath(V)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=Z}eoClip(){this.pendingClip=re}beginText(){this.current.textMatrix=i.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const M=this.pendingTextPaths,F=this.ctx;if(M===void 0){F.beginPath();return}F.save(),F.beginPath();for(const d of M)F.setTransform(...d.transform),F.translate(d.x,d.y),d.addToPath(F,d.fontSize);F.restore(),F.clip(),F.beginPath(),delete this.pendingTextPaths}setCharSpacing(M){this.current.charSpacing=M}setWordSpacing(M){this.current.wordSpacing=M}setHScale(M){this.current.textHScale=M/100}setLeading(M){this.current.leading=-M}setFont(M,F){var B;const d=this.commonObjs.get(M),u=this.current;if(!d)throw new Error(`Can't find font for ${M}`);if(u.fontMatrix=d.fontMatrix||i.FONT_IDENTITY_MATRIX,(u.fontMatrix[0]===0||u.fontMatrix[3]===0)&&(0,i.warn)("Invalid font matrix for font "+M),F<0?(F=-F,u.fontDirection=-1):u.fontDirection=1,this.current.font=d,this.current.fontSize=F,d.isType3Font)return;const x=d.loadedName||"sans-serif",V=((B=d.systemFontInfo)==null?void 0:B.css)||`"${x}", ${d.fallbackName}`;let W="normal";d.black?W="900":d.bold&&(W="bold");const X=d.italic?"italic":"normal";let me=F;F<_?me=_:F>m&&(me=m),this.current.fontSizeScale=F/me,this.ctx.font=`${X} ${W} ${me}px ${V}`}setTextRenderingMode(M){this.current.textRenderingMode=M}setTextRise(M){this.current.textRise=M}moveText(M,F){this.current.x=this.current.lineX+=M,this.current.y=this.current.lineY+=F}setLeadingMoveText(M,F){this.setLeading(-F),this.moveText(M,F)}setTextMatrix(M,F,d,u,x,V){this.current.textMatrix=[M,F,d,u,x,V],this.current.textMatrixScale=Math.hypot(M,F),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(M,F,d,u){const x=this.ctx,V=this.current,W=V.font,X=V.textRenderingMode,me=V.fontSize/V.fontSizeScale,B=X&i.TextRenderingMode.FILL_STROKE_MASK,O=!!(X&i.TextRenderingMode.ADD_TO_PATH_FLAG),$=V.patternFill&&!W.missingFile;let de;(W.disableFontFace||O||$)&&(de=W.getPathGenerator(this.commonObjs,M)),W.disableFontFace||$?(x.save(),x.translate(F,d),x.beginPath(),de(x,me),u&&x.setTransform(...u),(B===i.TextRenderingMode.FILL||B===i.TextRenderingMode.FILL_STROKE)&&x.fill(),(B===i.TextRenderingMode.STROKE||B===i.TextRenderingMode.FILL_STROKE)&&x.stroke(),x.restore()):((B===i.TextRenderingMode.FILL||B===i.TextRenderingMode.FILL_STROKE)&&x.fillText(M,F,d),(B===i.TextRenderingMode.STROKE||B===i.TextRenderingMode.FILL_STROKE)&&x.strokeText(M,F,d)),O&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,f.getCurrentTransform)(x),x:F,y:d,fontSize:me,addToPath:de})}get isFontSubpixelAAEnabled(){const{context:M}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);M.scale(1.5,1),M.fillText("I",0,10);const F=M.getImageData(0,0,10,10).data;let d=!1;for(let u=3;u<F.length;u+=4)if(F[u]>0&&F[u]<255){d=!0;break}return(0,i.shadow)(this,"isFontSubpixelAAEnabled",d)}showText(M){const F=this.current,d=F.font;if(d.isType3Font)return this.showType3Text(M);const u=F.fontSize;if(u===0)return;const x=this.ctx,V=F.fontSizeScale,W=F.charSpacing,X=F.wordSpacing,me=F.fontDirection,B=F.textHScale*me,O=M.length,$=d.vertical,de=$?1:-1,te=d.defaultVMetrics,ve=u*F.fontMatrix[0],Pe=F.textRenderingMode===i.TextRenderingMode.FILL&&!d.disableFontFace&&!F.patternFill;x.save(),x.transform(...F.textMatrix),x.translate(F.x,F.y+F.textRise),me>0?x.scale(B,-1):x.scale(B,1);let Se;if(F.patternFill){x.save();const be=F.fillColor.getPattern(x,this,(0,f.getCurrentTransformInverse)(x),I.PathType.FILL);Se=(0,f.getCurrentTransform)(x),x.restore(),x.fillStyle=be}let oe=F.lineWidth;const ae=F.textMatrixScale;if(ae===0||oe===0){const be=F.textRenderingMode&i.TextRenderingMode.FILL_STROKE_MASK;(be===i.TextRenderingMode.STROKE||be===i.TextRenderingMode.FILL_STROKE)&&(oe=this.getSinglePixelWidth())}else oe/=ae;if(V!==1&&(x.scale(V,V),oe/=V),x.lineWidth=oe,d.isInvalidPDFjsFont){const be=[];let Le=0;for(const Te of M)be.push(Te.unicode),Le+=Te.width;x.fillText(be.join(""),0,0),F.x+=Le*ve*B,x.restore(),this.compose();return}let ne=0,ce;for(ce=0;ce<O;++ce){const be=M[ce];if(typeof be=="number"){ne+=de*be*u/1e3;continue}let Le=!1;const Te=(be.isSpace?X:0)+W,Be=be.fontChar,Ne=be.accent;let je,Ue,Ge=be.width;if($){const Qe=be.vmetric||te,xe=-(be.vmetric?Qe[1]:Ge*.5)*ve,U=Qe[2]*ve;Ge=Qe?-Qe[0]:Ge,je=xe/V,Ue=(ne+U)/V}else je=ne/V,Ue=0;if(d.remeasure&&Ge>0){const Qe=x.measureText(Be).width*1e3/u*V;if(Ge<Qe&&this.isFontSubpixelAAEnabled){const xe=Ge/Qe;Le=!0,x.save(),x.scale(xe,1),je/=xe}else Ge!==Qe&&(je+=(Ge-Qe)/2e3*u/V)}if(this.contentVisible&&(be.isInFont||d.missingFile)){if(Pe&&!Ne)x.fillText(Be,je,Ue);else if(this.paintChar(Be,je,Ue,Se),Ne){const Qe=je+u*Ne.offset.x/V,xe=Ue-u*Ne.offset.y/V;this.paintChar(Ne.fontChar,Qe,xe,Se)}}const qe=$?Ge*ve-Te*me:Ge*ve+Te*me;ne+=qe,Le&&x.restore()}$?F.y-=ne:F.x+=ne*B,x.restore(),this.compose()}showType3Text(M){const F=this.ctx,d=this.current,u=d.font,x=d.fontSize,V=d.fontDirection,W=u.vertical?1:-1,X=d.charSpacing,me=d.wordSpacing,B=d.textHScale*V,O=d.fontMatrix||i.FONT_IDENTITY_MATRIX,$=M.length,de=d.textRenderingMode===i.TextRenderingMode.INVISIBLE;let te,ve,Pe,Se;if(!(de||x===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,F.save(),F.transform(...d.textMatrix),F.translate(d.x,d.y),F.scale(B,V),te=0;te<$;++te){if(ve=M[te],typeof ve=="number"){Se=W*ve*x/1e3,this.ctx.translate(Se,0),d.x+=Se*B;continue}const oe=(ve.isSpace?me:0)+X,ae=u.charProcOperatorList[ve.operatorListId];if(!ae){(0,i.warn)(`Type3 character "${ve.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=ve,this.save(),F.scale(x,x),F.transform(...O),this.executeOperatorList(ae),this.restore()),Pe=i.Util.applyTransform([ve.width,0],O)[0]*x+oe,F.translate(Pe,0),d.x+=Pe*B}F.restore(),this.processingType3=null}}setCharWidth(M,F){}setCharWidthAndBounds(M,F,d,u,x,V){this.ctx.rect(d,u,x-d,V-u),this.ctx.clip(),this.endPath()}getColorN_Pattern(M){let F;if(M[0]==="TilingPattern"){const d=M[1],u=this.baseTransform||(0,f.getCurrentTransform)(this.ctx),x={createCanvasGraphics:V=>new Me(V,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};F=new I.TilingPattern(M,d,this.ctx,x,u)}else F=this._getPattern(M[1],M[2]);return F}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(M,F,d){const u=i.Util.makeHexColor(M,F,d);this.ctx.strokeStyle=u,this.current.strokeColor=u}setFillRGBColor(M,F,d){const u=i.Util.makeHexColor(M,F,d);this.ctx.fillStyle=u,this.current.fillColor=u,this.current.patternFill=!1}_getPattern(M,F=null){let d;return this.cachedPatterns.has(M)?d=this.cachedPatterns.get(M):(d=(0,I.getShadingPattern)(this.getObject(M)),this.cachedPatterns.set(M,d)),F&&(d.matrix=F),d}shadingFill(M){if(!this.contentVisible)return;const F=this.ctx;this.save();const d=this._getPattern(M);F.fillStyle=d.getPattern(F,this,(0,f.getCurrentTransformInverse)(F),I.PathType.SHADING);const u=(0,f.getCurrentTransformInverse)(F);if(u){const{width:x,height:V}=F.canvas,[W,X,me,B]=i.Util.getAxialAlignedBoundingBox([0,0,x,V],u);this.ctx.fillRect(W,X,me-W,B-X)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,i.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,i.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(M,F){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(M)&&M.length===6&&this.transform(...M),this.baseTransform=(0,f.getCurrentTransform)(this.ctx),F)){const d=F[2]-F[0],u=F[3]-F[1];this.ctx.rect(F[0],F[1],d,u),this.current.updateRectMinMax((0,f.getCurrentTransform)(this.ctx),F),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(M){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const F=this.ctx;M.isolated||(0,i.info)("TODO: Support non-isolated groups."),M.knockout&&(0,i.warn)("Knockout groups not supported.");const d=(0,f.getCurrentTransform)(F);if(M.matrix&&F.transform(...M.matrix),!M.bbox)throw new Error("Bounding box is required.");let u=i.Util.getAxialAlignedBoundingBox(M.bbox,(0,f.getCurrentTransform)(F));const x=[0,0,F.canvas.width,F.canvas.height];u=i.Util.intersect(u,x)||[0,0,0,0];const V=Math.floor(u[0]),W=Math.floor(u[1]);let X=Math.max(Math.ceil(u[2])-V,1),me=Math.max(Math.ceil(u[3])-W,1),B=1,O=1;X>n&&(B=X/n,X=n),me>n&&(O=me/n,me=n),this.current.startNewPathAndClipBox([0,0,X,me]);let $="groupAt"+this.groupLevel;M.smask&&($+="_smask_"+this.smaskCounter++%2);const de=this.cachedCanvases.getCanvas($,X,me),te=de.context;te.scale(1/B,1/O),te.translate(-V,-W),te.transform(...d),M.smask?this.smaskStack.push({canvas:de.canvas,context:te,offsetX:V,offsetY:W,scaleX:B,scaleY:O,subtype:M.smask.subtype,backdrop:M.smask.backdrop,transferMap:M.smask.transferMap||null,startTransformInverse:null}):(F.setTransform(1,0,0,1,0,0),F.translate(V,W),F.scale(B,O),F.save()),o(F,te),this.ctx=te,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(F),this.groupLevel++}endGroup(M){if(!this.contentVisible)return;this.groupLevel--;const F=this.ctx,d=this.groupStack.pop();if(this.ctx=d,this.ctx.imageSmoothingEnabled=!1,M.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const u=(0,f.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...u);const x=i.Util.getAxialAlignedBoundingBox([0,0,F.canvas.width,F.canvas.height],u);this.ctx.drawImage(F.canvas,0,0),this.ctx.restore(),this.compose(x)}}beginAnnotation(M,F,d,u,x){if(z(this,K,yi).call(this),l(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(F)&&F.length===4){const V=F[2]-F[0],W=F[3]-F[1];if(x&&this.annotationCanvasMap){d=d.slice(),d[4]-=F[0],d[5]-=F[1],F=F.slice(),F[0]=F[1]=0,F[2]=V,F[3]=W;const[X,me]=i.Util.singularValueDecompose2dScale((0,f.getCurrentTransform)(this.ctx)),{viewportScale:B}=this,O=Math.ceil(V*this.outputScaleX*B),$=Math.ceil(W*this.outputScaleY*B);this.annotationCanvas=this.canvasFactory.create(O,$);const{canvas:de,context:te}=this.annotationCanvas;this.annotationCanvasMap.set(M,de),this.annotationCanvas.savedCtx=this.ctx,this.ctx=te,this.ctx.save(),this.ctx.setTransform(X,0,0,-me,0,W*me),l(this.ctx)}else l(this.ctx),this.ctx.rect(F[0],F[1],V,W),this.ctx.clip(),this.endPath()}this.current=new R(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...d),this.transform(...u)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),z(this,se,Si).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(M){if(!this.contentVisible)return;const F=M.count;M=this.getObject(M.data,M),M.count=F;const d=this.ctx,u=this.processingType3;if(u&&(u.compiled===void 0&&(u.compiled=P(M)),u.compiled)){u.compiled(d);return}const x=this._createMaskCanvas(M),V=x.canvas;d.save(),d.setTransform(1,0,0,1,0,0),d.drawImage(V,x.offsetX,x.offsetY),d.restore(),this.compose()}paintImageMaskXObjectRepeat(M,F,d=0,u=0,x,V){if(!this.contentVisible)return;M=this.getObject(M.data,M);const W=this.ctx;W.save();const X=(0,f.getCurrentTransform)(W);W.transform(F,d,u,x,0,0);const me=this._createMaskCanvas(M);W.setTransform(1,0,0,1,me.offsetX-X[4],me.offsetY-X[5]);for(let B=0,O=V.length;B<O;B+=2){const $=i.Util.transform(X,[F,d,u,x,V[B],V[B+1]]),[de,te]=i.Util.applyTransform([0,0],$);W.drawImage(me.canvas,de,te)}W.restore(),this.compose()}paintImageMaskXObjectGroup(M){if(!this.contentVisible)return;const F=this.ctx,d=this.current.fillColor,u=this.current.patternFill;for(const x of M){const{data:V,width:W,height:X,transform:me}=x,B=this.cachedCanvases.getCanvas("maskCanvas",W,X),O=B.context;O.save();const $=this.getObject(V,x);T(O,$),O.globalCompositeOperation="source-in",O.fillStyle=u?d.getPattern(O,this,(0,f.getCurrentTransformInverse)(F),I.PathType.FILL):d,O.fillRect(0,0,W,X),O.restore(),F.save(),F.transform(...me),F.scale(1,-1),b(F,B.canvas,0,0,W,X,0,-1,1,1),F.restore()}this.compose()}paintImageXObject(M){if(!this.contentVisible)return;const F=this.getObject(M);if(!F){(0,i.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(F)}paintImageXObjectRepeat(M,F,d,u){if(!this.contentVisible)return;const x=this.getObject(M);if(!x){(0,i.warn)("Dependent image isn't ready yet");return}const V=x.width,W=x.height,X=[];for(let me=0,B=u.length;me<B;me+=2)X.push({transform:[F,0,0,d,u[me],u[me+1]],x:0,y:0,w:V,h:W});this.paintInlineImageXObjectGroup(x,X)}applyTransferMapsToCanvas(M){return this.current.transferMaps!=="none"&&(M.filter=this.current.transferMaps,M.drawImage(M.canvas,0,0),M.filter="none"),M.canvas}applyTransferMapsToBitmap(M){if(this.current.transferMaps==="none")return M.bitmap;const{bitmap:F,width:d,height:u}=M,x=this.cachedCanvases.getCanvas("inlineImage",d,u),V=x.context;return V.filter=this.current.transferMaps,V.drawImage(F,0,0),V.filter="none",x.canvas}paintInlineImageXObject(M){if(!this.contentVisible)return;const F=M.width,d=M.height,u=this.ctx;if(this.save(),!i.isNodeJS){const{filter:W}=u;W!=="none"&&W!==""&&(u.filter="none")}u.scale(1/F,-1/d);let x;if(M.bitmap)x=this.applyTransferMapsToBitmap(M);else if(typeof HTMLElement=="function"&&M instanceof HTMLElement||!M.data)x=M;else{const X=this.cachedCanvases.getCanvas("inlineImage",F,d).context;v(X,M),x=this.applyTransferMapsToCanvas(X)}const V=this._scaleImage(x,(0,f.getCurrentTransformInverse)(u));u.imageSmoothingEnabled=G((0,f.getCurrentTransform)(u),M.interpolate),b(u,V.img,0,0,V.paintWidth,V.paintHeight,0,-d,F,d),this.compose(),this.restore()}paintInlineImageXObjectGroup(M,F){if(!this.contentVisible)return;const d=this.ctx;let u;if(M.bitmap)u=M.bitmap;else{const x=M.width,V=M.height,X=this.cachedCanvases.getCanvas("inlineImage",x,V).context;v(X,M),u=this.applyTransferMapsToCanvas(X)}for(const x of F)d.save(),d.transform(...x.transform),d.scale(1,-1),b(d,u,x.x,x.y,x.w,x.h,0,-1,1,1),d.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(M){}markPointProps(M,F){}beginMarkedContent(M){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(M,F){M==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(F)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(M){const F=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(M);const d=this.ctx;this.pendingClip&&(F||(this.pendingClip===re?d.clip("evenodd"):d.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),d.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const M=(0,f.getCurrentTransform)(this.ctx);if(M[1]===0&&M[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(M[0]),Math.abs(M[3]));else{const F=Math.abs(M[0]*M[3]-M[2]*M[1]),d=Math.hypot(M[0],M[2]),u=Math.hypot(M[1],M[3]);this._cachedGetSinglePixelWidth=Math.max(d,u)/F}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:M}=this.current,{a:F,b:d,c:u,d:x}=this.ctx.getTransform();let V,W;if(d===0&&u===0){const X=Math.abs(F),me=Math.abs(x);if(X===me)if(M===0)V=W=1/X;else{const B=X*M;V=W=B<1?1/B:1}else if(M===0)V=1/X,W=1/me;else{const B=X*M,O=me*M;V=B<1?1/B:1,W=O<1?1/O:1}}else{const X=Math.abs(F*x-d*u),me=Math.hypot(F,d),B=Math.hypot(u,x);if(M===0)V=B/X,W=me/X;else{const O=M*X;V=B>O?B/O:1,W=me>O?me/O:1}}this._cachedScaleForStroking[0]=V,this._cachedScaleForStroking[1]=W}return this._cachedScaleForStroking}rescaleAndStroke(M){const{ctx:F}=this,{lineWidth:d}=this.current,[u,x]=this.getScaleForStroking();if(F.lineWidth=d||1,u===1&&x===1){F.stroke();return}const V=F.getLineDash();if(M&&F.save(),F.scale(u,x),V.length>0){const W=Math.max(u,x);F.setLineDash(V.map(X=>X/W)),F.lineDashOffset/=W}F.stroke(),M&&F.restore()}isContentVisible(){for(let M=this.markedContentStack.length-1;M>=0;M--)if(!this.markedContentStack[M].visible)return!1;return!0}};K=new WeakSet,yi=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},se=new WeakSet,Si=function(){if(this.pageColors){const M=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(M!=="none"){const F=this.ctx.filter;this.ctx.filter=M,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=F}}};let Q=Me;t.CanvasGraphics=Q;for(const q in i.OPS)Q.prototype[q]!==void 0&&(Q.prototype[i.OPS[q]]=Q.prototype[q])},(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TilingPattern=t.PathType=void 0,t.getShadingPattern=E;var i=a(1),f=a(6);const I={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};t.PathType=I;function L(P,R){if(!R)return;const v=R[2]-R[0],T=R[3]-R[1],o=new Path2D;o.rect(R[0],R[1],v,T),P.clip(o)}class _{constructor(){this.constructor===_&&(0,i.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,i.unreachable)("Abstract method `getPattern` called.")}}class m extends _{constructor(R){super(),this._type=R[1],this._bbox=R[2],this._colorStops=R[3],this._p0=R[4],this._p1=R[5],this._r0=R[6],this._r1=R[7],this.matrix=null}_createGradient(R){let v;this._type==="axial"?v=R.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(v=R.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const T of this._colorStops)v.addColorStop(T[0],T[1]);return v}getPattern(R,v,T,o){let l;if(o===I.STROKE||o===I.FILL){const S=v.current.getClippedPathBoundingBox(o,(0,f.getCurrentTransform)(R))||[0,0,0,0],y=Math.ceil(S[2]-S[0])||1,w=Math.ceil(S[3]-S[1])||1,N=v.cachedCanvases.getCanvas("pattern",y,w,!0),D=N.context;D.clearRect(0,0,D.canvas.width,D.canvas.height),D.beginPath(),D.rect(0,0,D.canvas.width,D.canvas.height),D.translate(-S[0],-S[1]),T=i.Util.transform(T,[1,0,0,1,S[0],S[1]]),D.transform(...v.baseTransform),this.matrix&&D.transform(...this.matrix),L(D,this._bbox),D.fillStyle=this._createGradient(D),D.fill(),l=R.createPattern(N.canvas,"no-repeat");const G=new DOMMatrix(T);l.setTransform(G)}else L(R,this._bbox),l=this._createGradient(R);return l}}function n(P,R,v,T,o,l,S,y){const w=R.coords,N=R.colors,D=P.data,G=P.width*4;let le;w[v+1]>w[T+1]&&(le=v,v=T,T=le,le=l,l=S,S=le),w[T+1]>w[o+1]&&(le=T,T=o,o=le,le=S,S=y,y=le),w[v+1]>w[T+1]&&(le=v,v=T,T=le,le=l,l=S,S=le);const H=(w[v]+R.offsetX)*R.scaleX,Z=(w[v+1]+R.offsetY)*R.scaleY,re=(w[T]+R.offsetX)*R.scaleX,Q=(w[T+1]+R.offsetY)*R.scaleY,K=(w[o]+R.offsetX)*R.scaleX,ue=(w[o+1]+R.offsetY)*R.scaleY;if(Z>=ue)return;const se=N[l],Ce=N[l+1],Me=N[l+2],q=N[S],M=N[S+1],F=N[S+2],d=N[y],u=N[y+1],x=N[y+2],V=Math.round(Z),W=Math.round(ue);let X,me,B,O,$,de,te,ve;for(let Pe=V;Pe<=W;Pe++){if(Pe<Q){const ce=Pe<Z?0:(Z-Pe)/(Z-Q);X=H-(H-re)*ce,me=se-(se-q)*ce,B=Ce-(Ce-M)*ce,O=Me-(Me-F)*ce}else{let ce;Pe>ue?ce=1:Q===ue?ce=0:ce=(Q-Pe)/(Q-ue),X=re-(re-K)*ce,me=q-(q-d)*ce,B=M-(M-u)*ce,O=F-(F-x)*ce}let Se;Pe<Z?Se=0:Pe>ue?Se=1:Se=(Z-Pe)/(Z-ue),$=H-(H-K)*Se,de=se-(se-d)*Se,te=Ce-(Ce-u)*Se,ve=Me-(Me-x)*Se;const oe=Math.round(Math.min(X,$)),ae=Math.round(Math.max(X,$));let ne=G*Pe+oe*4;for(let ce=oe;ce<=ae;ce++)Se=(X-ce)/(X-$),Se<0?Se=0:Se>1&&(Se=1),D[ne++]=me-(me-de)*Se|0,D[ne++]=B-(B-te)*Se|0,D[ne++]=O-(O-ve)*Se|0,D[ne++]=255}}function c(P,R,v){const T=R.coords,o=R.colors;let l,S;switch(R.type){case"lattice":const y=R.verticesPerRow,w=Math.floor(T.length/y)-1,N=y-1;for(l=0;l<w;l++){let D=l*y;for(let G=0;G<N;G++,D++)n(P,v,T[D],T[D+1],T[D+y],o[D],o[D+1],o[D+y]),n(P,v,T[D+y+1],T[D+1],T[D+y],o[D+y+1],o[D+1],o[D+y])}break;case"triangles":for(l=0,S=T.length;l<S;l+=3)n(P,v,T[l],T[l+1],T[l+2],o[l],o[l+1],o[l+2]);break;default:throw new Error("illegal figure")}}class C extends _{constructor(R){super(),this._coords=R[2],this._colors=R[3],this._figures=R[4],this._bounds=R[5],this._bbox=R[7],this._background=R[8],this.matrix=null}_createMeshCanvas(R,v,T){const y=Math.floor(this._bounds[0]),w=Math.floor(this._bounds[1]),N=Math.ceil(this._bounds[2])-y,D=Math.ceil(this._bounds[3])-w,G=Math.min(Math.ceil(Math.abs(N*R[0]*1.1)),3e3),le=Math.min(Math.ceil(Math.abs(D*R[1]*1.1)),3e3),H=N/G,Z=D/le,re={coords:this._coords,colors:this._colors,offsetX:-y,offsetY:-w,scaleX:1/H,scaleY:1/Z},Q=G+2*2,K=le+2*2,ue=T.getCanvas("mesh",Q,K,!1),se=ue.context,Ce=se.createImageData(G,le);if(v){const q=Ce.data;for(let M=0,F=q.length;M<F;M+=4)q[M]=v[0],q[M+1]=v[1],q[M+2]=v[2],q[M+3]=255}for(const q of this._figures)c(Ce,q,re);return se.putImageData(Ce,2,2),{canvas:ue.canvas,offsetX:y-2*H,offsetY:w-2*Z,scaleX:H,scaleY:Z}}getPattern(R,v,T,o){L(R,this._bbox);let l;if(o===I.SHADING)l=i.Util.singularValueDecompose2dScale((0,f.getCurrentTransform)(R));else if(l=i.Util.singularValueDecompose2dScale(v.baseTransform),this.matrix){const y=i.Util.singularValueDecompose2dScale(this.matrix);l=[l[0]*y[0],l[1]*y[1]]}const S=this._createMeshCanvas(l,o===I.SHADING?null:this._background,v.cachedCanvases);return o!==I.SHADING&&(R.setTransform(...v.baseTransform),this.matrix&&R.transform(...this.matrix)),R.translate(S.offsetX,S.offsetY),R.scale(S.scaleX,S.scaleY),R.createPattern(S.canvas,"no-repeat")}}class A extends _{getPattern(){return"hotpink"}}function E(P){switch(P[0]){case"RadialAxial":return new m(P);case"Mesh":return new C(P);case"Dummy":return new A}throw new Error(`Unknown IR type: ${P[0]}`)}const r={COLORED:1,UNCOLORED:2},b=class b{constructor(R,v,T,o,l){this.operatorList=R[2],this.matrix=R[3]||[1,0,0,1,0,0],this.bbox=R[4],this.xstep=R[5],this.ystep=R[6],this.paintType=R[7],this.tilingType=R[8],this.color=v,this.ctx=T,this.canvasGraphicsFactory=o,this.baseTransform=l}createPatternCanvas(R){const v=this.operatorList,T=this.bbox,o=this.xstep,l=this.ystep,S=this.paintType,y=this.tilingType,w=this.color,N=this.canvasGraphicsFactory;(0,i.info)("TilingType: "+y);const D=T[0],G=T[1],le=T[2],H=T[3],Z=i.Util.singularValueDecompose2dScale(this.matrix),re=i.Util.singularValueDecompose2dScale(this.baseTransform),Q=[Z[0]*re[0],Z[1]*re[1]],K=this.getSizeAndScale(o,this.ctx.canvas.width,Q[0]),ue=this.getSizeAndScale(l,this.ctx.canvas.height,Q[1]),se=R.cachedCanvases.getCanvas("pattern",K.size,ue.size,!0),Ce=se.context,Me=N.createCanvasGraphics(Ce);Me.groupLevel=R.groupLevel,this.setFillAndStrokeStyleToContext(Me,S,w);let q=D,M=G,F=le,d=H;return D<0&&(q=0,F+=Math.abs(D)),G<0&&(M=0,d+=Math.abs(G)),Ce.translate(-(K.scale*q),-(ue.scale*M)),Me.transform(K.scale,0,0,ue.scale,0,0),Ce.save(),this.clipBbox(Me,q,M,F,d),Me.baseTransform=(0,f.getCurrentTransform)(Me.ctx),Me.executeOperatorList(v),Me.endDrawing(),{canvas:se.canvas,scaleX:K.scale,scaleY:ue.scale,offsetX:q,offsetY:M}}getSizeAndScale(R,v,T){R=Math.abs(R);const o=Math.max(b.MAX_PATTERN_SIZE,v);let l=Math.ceil(R*T);return l>=o?l=o:T=l/R,{scale:T,size:l}}clipBbox(R,v,T,o,l){const S=o-v,y=l-T;R.ctx.rect(v,T,S,y),R.current.updateRectMinMax((0,f.getCurrentTransform)(R.ctx),[v,T,o,l]),R.clip(),R.endPath()}setFillAndStrokeStyleToContext(R,v,T){const o=R.ctx,l=R.current;switch(v){case r.COLORED:const S=this.ctx;o.fillStyle=S.fillStyle,o.strokeStyle=S.strokeStyle,l.fillColor=S.fillStyle,l.strokeColor=S.strokeStyle;break;case r.UNCOLORED:const y=i.Util.makeHexColor(T[0],T[1],T[2]);o.fillStyle=y,o.strokeStyle=y,l.fillColor=y,l.strokeColor=y;break;default:throw new i.FormatError(`Unsupported paint type: ${v}`)}}getPattern(R,v,T,o){let l=T;o!==I.SHADING&&(l=i.Util.transform(l,v.baseTransform),this.matrix&&(l=i.Util.transform(l,this.matrix)));const S=this.createPatternCanvas(v);let y=new DOMMatrix(l);y=y.translate(S.offsetX,S.offsetY),y=y.scale(1/S.scaleX,1/S.scaleY);const w=R.createPattern(S.canvas,"repeat");return w.setTransform(y),w}};Je(b,"MAX_PATTERN_SIZE",3e3);let g=b;t.TilingPattern=g},(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.convertBlackAndWhiteToRGBA=I,t.convertToRGBA=f,t.grayToRGBA=_;var i=a(1);function f(m){switch(m.kind){case i.ImageKind.GRAYSCALE_1BPP:return I(m);case i.ImageKind.RGB_24BPP:return L(m)}return null}function I({src:m,srcPos:n=0,dest:c,width:C,height:A,nonBlackColor:E=4294967295,inverseDecode:r=!1}){const g=i.FeatureTest.isLittleEndian?4278190080:255,[b,P]=r?[E,g]:[g,E],R=C>>3,v=C&7,T=m.length;c=new Uint32Array(c.buffer);let o=0;for(let l=0;l<A;l++){for(const y=n+R;n<y;n++){const w=n<T?m[n]:255;c[o++]=w&128?P:b,c[o++]=w&64?P:b,c[o++]=w&32?P:b,c[o++]=w&16?P:b,c[o++]=w&8?P:b,c[o++]=w&4?P:b,c[o++]=w&2?P:b,c[o++]=w&1?P:b}if(v===0)continue;const S=n<T?m[n++]:255;for(let y=0;y<v;y++)c[o++]=S&1<<7-y?P:b}return{srcPos:n,destPos:o}}function L({src:m,srcPos:n=0,dest:c,destPos:C=0,width:A,height:E}){let r=0;const g=m.length>>2,b=new Uint32Array(m.buffer,n,g);if(i.FeatureTest.isLittleEndian){for(;r<g-2;r+=3,C+=4){const P=b[r],R=b[r+1],v=b[r+2];c[C]=P|4278190080,c[C+1]=P>>>24|R<<8|4278190080,c[C+2]=R>>>16|v<<16|4278190080,c[C+3]=v>>>8|4278190080}for(let P=r*4,R=m.length;P<R;P+=3)c[C++]=m[P]|m[P+1]<<8|m[P+2]<<16|4278190080}else{for(;r<g-2;r+=3,C+=4){const P=b[r],R=b[r+1],v=b[r+2];c[C]=P|255,c[C+1]=P<<24|R>>>8|255,c[C+2]=R<<16|v>>>16|255,c[C+3]=v<<8|255}for(let P=r*4,R=m.length;P<R;P+=3)c[C++]=m[P]<<24|m[P+1]<<16|m[P+2]<<8|255}return{srcPos:n,destPos:C}}function _(m,n){if(i.FeatureTest.isLittleEndian)for(let c=0,C=m.length;c<C;c++)n[c]=m[c]*65793|4278190080;else for(let c=0,C=m.length;c<C;c++)n[c]=m[c]*16843008|255}},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GlobalWorkerOptions=void 0;const a=Object.create(null);t.GlobalWorkerOptions=a,a.workerPort=null,a.workerSrc=""},(e,t,a)=>{var m,Fn,c,Nn,A,jt;Object.defineProperty(t,"__esModule",{value:!0}),t.MessageHandler=void 0;var i=a(1);const f={UNKNOWN:0,DATA:1,ERROR:2},I={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function L(r){switch(r instanceof Error||typeof r=="object"&&r!==null||(0,i.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),r.name){case"AbortException":return new i.AbortException(r.message);case"MissingPDFException":return new i.MissingPDFException(r.message);case"PasswordException":return new i.PasswordException(r.message,r.code);case"UnexpectedResponseException":return new i.UnexpectedResponseException(r.message,r.status);case"UnknownErrorException":return new i.UnknownErrorException(r.message,r.details);default:return new i.UnknownErrorException(r.message,r.toString())}}class _{constructor(g,b,P){j(this,m);j(this,c);j(this,A);this.sourceName=g,this.targetName=b,this.comObj=P,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=R=>{const v=R.data;if(v.targetName!==this.sourceName)return;if(v.stream){z(this,c,Nn).call(this,v);return}if(v.callback){const o=v.callbackId,l=this.callbackCapabilities[o];if(!l)throw new Error(`Cannot resolve callback ${o}`);if(delete this.callbackCapabilities[o],v.callback===f.DATA)l.resolve(v.data);else if(v.callback===f.ERROR)l.reject(L(v.reason));else throw new Error("Unexpected callback case");return}const T=this.actionHandler[v.action];if(!T)throw new Error(`Unknown action from worker: ${v.action}`);if(v.callbackId){const o=this.sourceName,l=v.sourceName;new Promise(function(S){S(T(v.data))}).then(function(S){P.postMessage({sourceName:o,targetName:l,callback:f.DATA,callbackId:v.callbackId,data:S})},function(S){P.postMessage({sourceName:o,targetName:l,callback:f.ERROR,callbackId:v.callbackId,reason:L(S)})});return}if(v.streamId){z(this,m,Fn).call(this,v);return}T(v.data)},P.addEventListener("message",this._onComObjOnMessage)}on(g,b){const P=this.actionHandler;if(P[g])throw new Error(`There is already an actionName called "${g}"`);P[g]=b}send(g,b,P){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:g,data:b},P)}sendWithPromise(g,b,P){const R=this.callbackId++,v=new i.PromiseCapability;this.callbackCapabilities[R]=v;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:g,callbackId:R,data:b},P)}catch(T){v.reject(T)}return v.promise}sendWithStream(g,b,P,R){const v=this.streamId++,T=this.sourceName,o=this.targetName,l=this.comObj;return new ReadableStream({start:S=>{const y=new i.PromiseCapability;return this.streamControllers[v]={controller:S,startCall:y,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:T,targetName:o,action:g,streamId:v,data:b,desiredSize:S.desiredSize},R),y.promise},pull:S=>{const y=new i.PromiseCapability;return this.streamControllers[v].pullCall=y,l.postMessage({sourceName:T,targetName:o,stream:I.PULL,streamId:v,desiredSize:S.desiredSize}),y.promise},cancel:S=>{(0,i.assert)(S instanceof Error,"cancel must have a valid reason");const y=new i.PromiseCapability;return this.streamControllers[v].cancelCall=y,this.streamControllers[v].isClosed=!0,l.postMessage({sourceName:T,targetName:o,stream:I.CANCEL,streamId:v,reason:L(S)}),y.promise}},P)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}m=new WeakSet,Fn=function(g){const b=g.streamId,P=this.sourceName,R=g.sourceName,v=this.comObj,T=this,o=this.actionHandler[g.action],l={enqueue(S,y=1,w){if(this.isCancelled)return;const N=this.desiredSize;this.desiredSize-=y,N>0&&this.desiredSize<=0&&(this.sinkCapability=new i.PromiseCapability,this.ready=this.sinkCapability.promise),v.postMessage({sourceName:P,targetName:R,stream:I.ENQUEUE,streamId:b,chunk:S},w)},close(){this.isCancelled||(this.isCancelled=!0,v.postMessage({sourceName:P,targetName:R,stream:I.CLOSE,streamId:b}),delete T.streamSinks[b])},error(S){(0,i.assert)(S instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,v.postMessage({sourceName:P,targetName:R,stream:I.ERROR,streamId:b,reason:L(S)}))},sinkCapability:new i.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:g.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[b]=l,new Promise(function(S){S(o(g.data,l))}).then(function(){v.postMessage({sourceName:P,targetName:R,stream:I.START_COMPLETE,streamId:b,success:!0})},function(S){v.postMessage({sourceName:P,targetName:R,stream:I.START_COMPLETE,streamId:b,reason:L(S)})})},c=new WeakSet,Nn=function(g){const b=g.streamId,P=this.sourceName,R=g.sourceName,v=this.comObj,T=this.streamControllers[b],o=this.streamSinks[b];switch(g.stream){case I.START_COMPLETE:g.success?T.startCall.resolve():T.startCall.reject(L(g.reason));break;case I.PULL_COMPLETE:g.success?T.pullCall.resolve():T.pullCall.reject(L(g.reason));break;case I.PULL:if(!o){v.postMessage({sourceName:P,targetName:R,stream:I.PULL_COMPLETE,streamId:b,success:!0});break}o.desiredSize<=0&&g.desiredSize>0&&o.sinkCapability.resolve(),o.desiredSize=g.desiredSize,new Promise(function(l){var S;l((S=o.onPull)==null?void 0:S.call(o))}).then(function(){v.postMessage({sourceName:P,targetName:R,stream:I.PULL_COMPLETE,streamId:b,success:!0})},function(l){v.postMessage({sourceName:P,targetName:R,stream:I.PULL_COMPLETE,streamId:b,reason:L(l)})});break;case I.ENQUEUE:if((0,i.assert)(T,"enqueue should have stream controller"),T.isClosed)break;T.controller.enqueue(g.chunk);break;case I.CLOSE:if((0,i.assert)(T,"close should have stream controller"),T.isClosed)break;T.isClosed=!0,T.controller.close(),z(this,A,jt).call(this,T,b);break;case I.ERROR:(0,i.assert)(T,"error should have stream controller"),T.controller.error(L(g.reason)),z(this,A,jt).call(this,T,b);break;case I.CANCEL_COMPLETE:g.success?T.cancelCall.resolve():T.cancelCall.reject(L(g.reason)),z(this,A,jt).call(this,T,b);break;case I.CANCEL:if(!o)break;new Promise(function(l){var S;l((S=o.onCancel)==null?void 0:S.call(o,L(g.reason)))}).then(function(){v.postMessage({sourceName:P,targetName:R,stream:I.CANCEL_COMPLETE,streamId:b,success:!0})},function(l){v.postMessage({sourceName:P,targetName:R,stream:I.CANCEL_COMPLETE,streamId:b,reason:L(l)})}),o.sinkCapability.reject(L(g.reason)),o.isCancelled=!0,delete this.streamSinks[b];break;default:throw new Error("Unexpected stream case")}},A=new WeakSet,jt=async function(g,b){var P,R,v;await Promise.allSettled([(P=g.startCall)==null?void 0:P.promise,(R=g.pullCall)==null?void 0:R.promise,(v=g.cancelCall)==null?void 0:v.promise]),delete this.streamControllers[b]},t.MessageHandler=_},(e,t,a)=>{var I,L;Object.defineProperty(t,"__esModule",{value:!0}),t.Metadata=void 0;var i=a(1);class f{constructor({parsedData:m,rawData:n}){j(this,I,void 0);j(this,L,void 0);he(this,I,m),he(this,L,n)}getRaw(){return s(this,L)}get(m){return s(this,I).get(m)??null}getAll(){return(0,i.objectFromMap)(s(this,I))}has(m){return s(this,I).has(m)}}I=new WeakMap,L=new WeakMap,t.Metadata=f},(e,t,a)=>{var m,n,c,C,A,E,Ei;Object.defineProperty(t,"__esModule",{value:!0}),t.OptionalContentConfig=void 0;var i=a(1),f=a(8);const I=Symbol("INTERNAL");class L{constructor(b,P){j(this,m,!0);this.name=b,this.intent=P}get visible(){return s(this,m)}_setVisible(b,P){b!==I&&(0,i.unreachable)("Internal method `_setVisible` called."),he(this,m,P)}}m=new WeakMap;class _{constructor(b){j(this,E);j(this,n,null);j(this,c,new Map);j(this,C,null);j(this,A,null);if(this.name=null,this.creator=null,b!==null){this.name=b.name,this.creator=b.creator,he(this,A,b.order);for(const P of b.groups)s(this,c).set(P.id,new L(P.name,P.intent));if(b.baseState==="OFF")for(const P of s(this,c).values())P._setVisible(I,!1);for(const P of b.on)s(this,c).get(P)._setVisible(I,!0);for(const P of b.off)s(this,c).get(P)._setVisible(I,!1);he(this,C,this.getHash())}}isVisible(b){if(s(this,c).size===0)return!0;if(!b)return(0,i.warn)("Optional content group not defined."),!0;if(b.type==="OCG")return s(this,c).has(b.id)?s(this,c).get(b.id).visible:((0,i.warn)(`Optional content group not found: ${b.id}`),!0);if(b.type==="OCMD"){if(b.expression)return z(this,E,Ei).call(this,b.expression);if(!b.policy||b.policy==="AnyOn"){for(const P of b.ids){if(!s(this,c).has(P))return(0,i.warn)(`Optional content group not found: ${P}`),!0;if(s(this,c).get(P).visible)return!0}return!1}else if(b.policy==="AllOn"){for(const P of b.ids){if(!s(this,c).has(P))return(0,i.warn)(`Optional content group not found: ${P}`),!0;if(!s(this,c).get(P).visible)return!1}return!0}else if(b.policy==="AnyOff"){for(const P of b.ids){if(!s(this,c).has(P))return(0,i.warn)(`Optional content group not found: ${P}`),!0;if(!s(this,c).get(P).visible)return!0}return!1}else if(b.policy==="AllOff"){for(const P of b.ids){if(!s(this,c).has(P))return(0,i.warn)(`Optional content group not found: ${P}`),!0;if(s(this,c).get(P).visible)return!1}return!0}return(0,i.warn)(`Unknown optional content policy ${b.policy}.`),!0}return(0,i.warn)(`Unknown group type ${b.type}.`),!0}setVisibility(b,P=!0){if(!s(this,c).has(b)){(0,i.warn)(`Optional content group not found: ${b}`);return}s(this,c).get(b)._setVisible(I,!!P),he(this,n,null)}get hasInitialVisibility(){return s(this,C)===null||this.getHash()===s(this,C)}getOrder(){return s(this,c).size?s(this,A)?s(this,A).slice():[...s(this,c).keys()]:null}getGroups(){return s(this,c).size>0?(0,i.objectFromMap)(s(this,c)):null}getGroup(b){return s(this,c).get(b)||null}getHash(){if(s(this,n)!==null)return s(this,n);const b=new f.MurmurHash3_64;for(const[P,R]of s(this,c))b.update(`${P}:${R.visible}`);return he(this,n,b.hexdigest())}}n=new WeakMap,c=new WeakMap,C=new WeakMap,A=new WeakMap,E=new WeakSet,Ei=function(b){const P=b.length;if(P<2)return!0;const R=b[0];for(let v=1;v<P;v++){const T=b[v];let o;if(Array.isArray(T))o=z(this,E,Ei).call(this,T);else if(s(this,c).has(T))o=s(this,c).get(T).visible;else return(0,i.warn)(`Optional content group not found: ${T}`),!0;switch(R){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return R==="And"},t.OptionalContentConfig=_},(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFDataTransportStream=void 0;var i=a(1),f=a(6);class I{constructor({length:n,initialData:c,progressiveDone:C=!1,contentDispositionFilename:A=null,disableRange:E=!1,disableStream:r=!1},g){if((0,i.assert)(g,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=C,this._contentDispositionFilename=A,(c==null?void 0:c.length)>0){const b=c instanceof Uint8Array&&c.byteLength===c.buffer.byteLength?c.buffer:new Uint8Array(c).buffer;this._queuedChunks.push(b)}this._pdfDataRangeTransport=g,this._isStreamingSupported=!r,this._isRangeSupported=!E,this._contentLength=n,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((b,P)=>{this._onReceiveData({begin:b,chunk:P})}),this._pdfDataRangeTransport.addProgressListener((b,P)=>{this._onProgress({loaded:b,total:P})}),this._pdfDataRangeTransport.addProgressiveReadListener(b=>{this._onReceiveData({chunk:b})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:n,chunk:c}){const C=c instanceof Uint8Array&&c.byteLength===c.buffer.byteLength?c.buffer:new Uint8Array(c).buffer;if(n===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(C):this._queuedChunks.push(C);else{const A=this._rangeReaders.some(function(E){return E._begin!==n?!1:(E._enqueue(C),!0)});(0,i.assert)(A,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var n;return((n=this._fullRequestReader)==null?void 0:n._loaded)??0}_onProgress(n){var c,C,A,E;n.total===void 0?(C=(c=this._rangeReaders[0])==null?void 0:c.onProgress)==null||C.call(c,{loaded:n.loaded}):(E=(A=this._fullRequestReader)==null?void 0:A.onProgress)==null||E.call(A,{loaded:n.loaded,total:n.total})}_onProgressiveDone(){var n;(n=this._fullRequestReader)==null||n.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(n){const c=this._rangeReaders.indexOf(n);c>=0&&this._rangeReaders.splice(c,1)}getFullReader(){(0,i.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const n=this._queuedChunks;return this._queuedChunks=null,new L(this,n,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(n,c){if(c<=this._progressiveDataLength)return null;const C=new _(this,n,c);return this._pdfDataRangeTransport.requestDataRange(n,c),this._rangeReaders.push(C),C}cancelAllRequests(n){var c;(c=this._fullRequestReader)==null||c.cancel(n);for(const C of this._rangeReaders.slice(0))C.cancel(n);this._pdfDataRangeTransport.abort()}}t.PDFDataTransportStream=I;class L{constructor(n,c,C=!1,A=null){this._stream=n,this._done=C||!1,this._filename=(0,f.isPdfFile)(A)?A:null,this._queuedChunks=c||[],this._loaded=0;for(const E of this._queuedChunks)this._loaded+=E.byteLength;this._requests=[],this._headersReady=Promise.resolve(),n._fullRequestReader=this,this.onProgress=null}_enqueue(n){this._done||(this._requests.length>0?this._requests.shift().resolve({value:n,done:!1}):this._queuedChunks.push(n),this._loaded+=n.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const n=new i.PromiseCapability;return this._requests.push(n),n.promise}cancel(n){this._done=!0;for(const c of this._requests)c.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class _{constructor(n,c,C){this._stream=n,this._begin=c,this._end=C,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(n){if(!this._done){if(this._requests.length===0)this._queuedChunk=n;else{this._requests.shift().resolve({value:n,done:!1});for(const C of this._requests)C.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const c=this._queuedChunk;return this._queuedChunk=null,{value:c,done:!1}}if(this._done)return{value:void 0,done:!0};const n=new i.PromiseCapability;return this._requests.push(n),n.promise}cancel(n){this._done=!0;for(const c of this._requests)c.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFFetchStream=void 0;var i=a(1),f=a(20);function I(C,A,E){return{method:"GET",headers:C,signal:E.signal,mode:"cors",credentials:A?"include":"same-origin",redirect:"follow"}}function L(C){const A=new Headers;for(const E in C){const r=C[E];r!==void 0&&A.append(E,r)}return A}function _(C){return C instanceof Uint8Array?C.buffer:C instanceof ArrayBuffer?C:((0,i.warn)(`getArrayBuffer - unexpected data format: ${C}`),new Uint8Array(C).buffer)}class m{constructor(A){this.source=A,this.isHttp=/^https?:/i.test(A.url),this.httpHeaders=this.isHttp&&A.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var A;return((A=this._fullRequestReader)==null?void 0:A._loaded)??0}getFullReader(){return(0,i.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new n(this),this._fullRequestReader}getRangeReader(A,E){if(E<=this._progressiveDataLength)return null;const r=new c(this,A,E);return this._rangeRequestReaders.push(r),r}cancelAllRequests(A){var E;(E=this._fullRequestReader)==null||E.cancel(A);for(const r of this._rangeRequestReaders.slice(0))r.cancel(A)}}t.PDFFetchStream=m;class n{constructor(A){this._stream=A,this._reader=null,this._loaded=0,this._filename=null;const E=A.source;this._withCredentials=E.withCredentials||!1,this._contentLength=E.length,this._headersCapability=new i.PromiseCapability,this._disableRange=E.disableRange||!1,this._rangeChunkSize=E.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!E.disableStream,this._isRangeSupported=!E.disableRange,this._headers=L(this._stream.httpHeaders);const r=E.url;fetch(r,I(this._headers,this._withCredentials,this._abortController)).then(g=>{if(!(0,f.validateResponseStatus)(g.status))throw(0,f.createResponseStatusError)(g.status,r);this._reader=g.body.getReader(),this._headersCapability.resolve();const b=v=>g.headers.get(v),{allowRangeRequests:P,suggestedLength:R}=(0,f.validateRangeRequestCapabilities)({getResponseHeader:b,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=P,this._contentLength=R||this._contentLength,this._filename=(0,f.extractFilenameFromHeader)(b),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new i.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;await this._headersCapability.promise;const{value:A,done:E}=await this._reader.read();return E?{value:A,done:E}:(this._loaded+=A.byteLength,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded,total:this._contentLength}),{value:_(A),done:!1})}cancel(A){var E;(E=this._reader)==null||E.cancel(A),this._abortController.abort()}}class c{constructor(A,E,r){this._stream=A,this._reader=null,this._loaded=0;const g=A.source;this._withCredentials=g.withCredentials||!1,this._readCapability=new i.PromiseCapability,this._isStreamingSupported=!g.disableStream,this._abortController=new AbortController,this._headers=L(this._stream.httpHeaders),this._headers.append("Range",`bytes=${E}-${r-1}`);const b=g.url;fetch(b,I(this._headers,this._withCredentials,this._abortController)).then(P=>{if(!(0,f.validateResponseStatus)(P.status))throw(0,f.createResponseStatusError)(P.status,b);this._readCapability.resolve(),this._reader=P.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;await this._readCapability.promise;const{value:A,done:E}=await this._reader.read();return E?{value:A,done:E}:(this._loaded+=A.byteLength,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded}),{value:_(A),done:!1})}cancel(A){var E;(E=this._reader)==null||E.cancel(A),this._abortController.abort()}}},(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createResponseStatusError=m,t.extractFilenameFromHeader=_,t.validateRangeRequestCapabilities=L,t.validateResponseStatus=n;var i=a(1),f=a(21),I=a(6);function L({getResponseHeader:c,isHttp:C,rangeChunkSize:A,disableRange:E}){const r={allowRangeRequests:!1,suggestedLength:void 0},g=parseInt(c("Content-Length"),10);return!Number.isInteger(g)||(r.suggestedLength=g,g<=2*A)||E||!C||c("Accept-Ranges")!=="bytes"||(c("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function _(c){const C=c("Content-Disposition");if(C){let A=(0,f.getFilenameFromContentDispositionHeader)(C);if(A.includes("%"))try{A=decodeURIComponent(A)}catch{}if((0,I.isPdfFile)(A))return A}return null}function m(c,C){return c===404||c===0&&C.startsWith("file:")?new i.MissingPDFException('Missing PDF "'+C+'".'):new i.UnexpectedResponseException(`Unexpected server response (${c}) while retrieving PDF "${C}".`,c)}function n(c){return c===200||c===206}},(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getFilenameFromContentDispositionHeader=f;var i=a(1);function f(I){let L=!0,_=m("filename\\*","i").exec(I);if(_){_=_[1];let g=A(_);return g=unescape(g),g=E(g),g=r(g),c(g)}if(_=C(I),_){const g=r(_);return c(g)}if(_=m("filename","i").exec(I),_){_=_[1];let g=A(_);return g=r(g),c(g)}function m(g,b){return new RegExp("(?:^|;)\\s*"+g+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',b)}function n(g,b){if(g){if(!/^[\x00-\xFF]+$/.test(b))return b;try{const P=new TextDecoder(g,{fatal:!0}),R=(0,i.stringToBytes)(b);b=P.decode(R),L=!1}catch{}}return b}function c(g){return L&&/[\x80-\xff]/.test(g)&&(g=n("utf-8",g),L&&(g=n("iso-8859-1",g))),g}function C(g){const b=[];let P;const R=m("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(P=R.exec(g))!==null;){let[,T,o,l]=P;if(T=parseInt(T,10),T in b){if(T===0)break;continue}b[T]=[o,l]}const v=[];for(let T=0;T<b.length&&T in b;++T){let[o,l]=b[T];l=A(l),o&&(l=unescape(l),T===0&&(l=E(l))),v.push(l)}return v.join("")}function A(g){if(g.startsWith('"')){const b=g.slice(1).split('\\"');for(let P=0;P<b.length;++P){const R=b[P].indexOf('"');R!==-1&&(b[P]=b[P].slice(0,R),b.length=P+1),b[P]=b[P].replaceAll(/\\(.)/g,"$1")}g=b.join('"')}return g}function E(g){const b=g.indexOf("'");if(b===-1)return g;const P=g.slice(0,b),v=g.slice(b+1).replace(/^[^']*'/,"");return n(P,v)}function r(g){return!g.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(g)?g:g.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(b,P,R,v){if(R==="q"||R==="Q")return v=v.replaceAll("_"," "),v=v.replaceAll(/=([0-9a-fA-F]{2})/g,function(T,o){return String.fromCharCode(parseInt(o,16))}),n(P,v);try{v=atob(v)}catch{}return n(P,v)})}return""}},(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNetworkStream=void 0;var i=a(1),f=a(20);const I=200,L=206;function _(A){const E=A.response;return typeof E!="string"?E:(0,i.stringToBytes)(E).buffer}class m{constructor(E,r={}){this.url=E,this.isHttp=/^https?:/i.test(E),this.httpHeaders=this.isHttp&&r.httpHeaders||Object.create(null),this.withCredentials=r.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(E,r,g){const b={begin:E,end:r};for(const P in g)b[P]=g[P];return this.request(b)}requestFull(E){return this.request(E)}request(E){const r=new XMLHttpRequest,g=this.currXhrId++,b=this.pendingRequests[g]={xhr:r};r.open("GET",this.url),r.withCredentials=this.withCredentials;for(const P in this.httpHeaders){const R=this.httpHeaders[P];R!==void 0&&r.setRequestHeader(P,R)}return this.isHttp&&"begin"in E&&"end"in E?(r.setRequestHeader("Range",`bytes=${E.begin}-${E.end-1}`),b.expectedStatus=L):b.expectedStatus=I,r.responseType="arraybuffer",E.onError&&(r.onerror=function(P){E.onError(r.status)}),r.onreadystatechange=this.onStateChange.bind(this,g),r.onprogress=this.onProgress.bind(this,g),b.onHeadersReceived=E.onHeadersReceived,b.onDone=E.onDone,b.onError=E.onError,b.onProgress=E.onProgress,r.send(null),g}onProgress(E,r){var b;const g=this.pendingRequests[E];g&&((b=g.onProgress)==null||b.call(g,r))}onStateChange(E,r){var T,o,l;const g=this.pendingRequests[E];if(!g)return;const b=g.xhr;if(b.readyState>=2&&g.onHeadersReceived&&(g.onHeadersReceived(),delete g.onHeadersReceived),b.readyState!==4||!(E in this.pendingRequests))return;if(delete this.pendingRequests[E],b.status===0&&this.isHttp){(T=g.onError)==null||T.call(g,b.status);return}const P=b.status||I;if(!(P===I&&g.expectedStatus===L)&&P!==g.expectedStatus){(o=g.onError)==null||o.call(g,b.status);return}const v=_(b);if(P===L){const S=b.getResponseHeader("Content-Range"),y=/bytes (\d+)-(\d+)\/(\d+)/.exec(S);g.onDone({begin:parseInt(y[1],10),chunk:v})}else v?g.onDone({begin:0,chunk:v}):(l=g.onError)==null||l.call(g,b.status)}getRequestXhr(E){return this.pendingRequests[E].xhr}isPendingRequest(E){return E in this.pendingRequests}abortRequest(E){const r=this.pendingRequests[E].xhr;delete this.pendingRequests[E],r.abort()}}class n{constructor(E){this._source=E,this._manager=new m(E.url,{httpHeaders:E.httpHeaders,withCredentials:E.withCredentials}),this._rangeChunkSize=E.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(E){const r=this._rangeRequestReaders.indexOf(E);r>=0&&this._rangeRequestReaders.splice(r,1)}getFullReader(){return(0,i.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new c(this._manager,this._source),this._fullRequestReader}getRangeReader(E,r){const g=new C(this._manager,E,r);return g.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(g),g}cancelAllRequests(E){var r;(r=this._fullRequestReader)==null||r.cancel(E);for(const g of this._rangeRequestReaders.slice(0))g.cancel(E)}}t.PDFNetworkStream=n;class c{constructor(E,r){this._manager=E;const g={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=r.url,this._fullRequestId=E.requestFull(g),this._headersReceivedCapability=new i.PromiseCapability,this._disableRange=r.disableRange||!1,this._contentLength=r.length,this._rangeChunkSize=r.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const E=this._fullRequestId,r=this._manager.getRequestXhr(E),g=R=>r.getResponseHeader(R),{allowRangeRequests:b,suggestedLength:P}=(0,f.validateRangeRequestCapabilities)({getResponseHeader:g,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});b&&(this._isRangeSupported=!0),this._contentLength=P||this._contentLength,this._filename=(0,f.extractFilenameFromHeader)(g),this._isRangeSupported&&this._manager.abortRequest(E),this._headersReceivedCapability.resolve()}_onDone(E){if(E&&(this._requests.length>0?this._requests.shift().resolve({value:E.chunk,done:!1}):this._cachedChunks.push(E.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(E){this._storedError=(0,f.createResponseStatusError)(E,this._url),this._headersReceivedCapability.reject(this._storedError);for(const r of this._requests)r.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(E){var r;(r=this.onProgress)==null||r.call(this,{loaded:E.loaded,total:E.lengthComputable?E.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const E=new i.PromiseCapability;return this._requests.push(E),E.promise}cancel(E){this._done=!0,this._headersReceivedCapability.reject(E);for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class C{constructor(E,r,g){this._manager=E;const b={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=E.url,this._requestId=E.requestRange(r,g,b),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var E;(E=this.onClosed)==null||E.call(this,this)}_onDone(E){const r=E.chunk;this._requests.length>0?this._requests.shift().resolve({value:r,done:!1}):this._queuedChunk=r,this._done=!0;for(const g of this._requests)g.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(E){this._storedError=(0,f.createResponseStatusError)(E,this._url);for(const r of this._requests)r.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(E){var r;this.isStreamingSupported||(r=this.onProgress)==null||r.call(this,{loaded:E.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const r=this._queuedChunk;return this._queuedChunk=null,{value:r,done:!1}}if(this._done)return{value:void 0,done:!0};const E=new i.PromiseCapability;return this._requests.push(E),E.promise}cancel(E){this._done=!0;for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNodeStream=void 0;var i=a(1),f=a(20);const I=/^file:\/\/\/[a-zA-Z]:\//;function L(g){const b=require$$5,P=b.parse(g);return P.protocol==="file:"||P.host?P:/^[a-z]:[/\\]/i.test(g)?b.parse(`file:///${g}`):(P.host||(P.protocol="file:"),P)}class _{constructor(b){this.source=b,this.url=L(b.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&b.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var b;return((b=this._fullRequestReader)==null?void 0:b._loaded)??0}getFullReader(){return(0,i.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new E(this):new C(this),this._fullRequestReader}getRangeReader(b,P){if(P<=this._progressiveDataLength)return null;const R=this.isFsUrl?new r(this,b,P):new A(this,b,P);return this._rangeRequestReaders.push(R),R}cancelAllRequests(b){var P;(P=this._fullRequestReader)==null||P.cancel(b);for(const R of this._rangeRequestReaders.slice(0))R.cancel(b)}}t.PDFNodeStream=_;class m{constructor(b){this._url=b.url,this._done=!1,this._storedError=null,this.onProgress=null;const P=b.source;this._contentLength=P.length,this._loaded=0,this._filename=null,this._disableRange=P.disableRange||!1,this._rangeChunkSize=P.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!P.disableStream,this._isRangeSupported=!P.disableRange,this._readableStream=null,this._readCapability=new i.PromiseCapability,this._headersCapability=new i.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var R;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const b=this._readableStream.read();return b===null?(this._readCapability=new i.PromiseCapability,this.read()):(this._loaded+=b.length,(R=this.onProgress)==null||R.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(b).buffer,done:!1})}cancel(b){if(!this._readableStream){this._error(b);return}this._readableStream.destroy(b)}_error(b){this._storedError=b,this._readCapability.resolve()}_setReadableStream(b){this._readableStream=b,b.on("readable",()=>{this._readCapability.resolve()}),b.on("end",()=>{b.destroy(),this._done=!0,this._readCapability.resolve()}),b.on("error",P=>{this._error(P)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new i.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class n{constructor(b){this._url=b.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new i.PromiseCapability;const P=b.source;this._isStreamingSupported=!P.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var R;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const b=this._readableStream.read();return b===null?(this._readCapability=new i.PromiseCapability,this.read()):(this._loaded+=b.length,(R=this.onProgress)==null||R.call(this,{loaded:this._loaded}),{value:new Uint8Array(b).buffer,done:!1})}cancel(b){if(!this._readableStream){this._error(b);return}this._readableStream.destroy(b)}_error(b){this._storedError=b,this._readCapability.resolve()}_setReadableStream(b){this._readableStream=b,b.on("readable",()=>{this._readCapability.resolve()}),b.on("end",()=>{b.destroy(),this._done=!0,this._readCapability.resolve()}),b.on("error",P=>{this._error(P)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function c(g,b){return{protocol:g.protocol,auth:g.auth,host:g.hostname,port:g.port,path:g.path,method:"GET",headers:b}}class C extends m{constructor(b){super(b);const P=R=>{if(R.statusCode===404){const l=new i.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=l,this._headersCapability.reject(l);return}this._headersCapability.resolve(),this._setReadableStream(R);const v=l=>this._readableStream.headers[l.toLowerCase()],{allowRangeRequests:T,suggestedLength:o}=(0,f.validateRangeRequestCapabilities)({getResponseHeader:v,isHttp:b.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=T,this._contentLength=o||this._contentLength,this._filename=(0,f.extractFilenameFromHeader)(v)};if(this._request=null,this._url.protocol==="http:"){const R=require$$5;this._request=R.request(c(this._url,b.httpHeaders),P)}else{const R=require$$5;this._request=R.request(c(this._url,b.httpHeaders),P)}this._request.on("error",R=>{this._storedError=R,this._headersCapability.reject(R)}),this._request.end()}}class A extends n{constructor(b,P,R){super(b),this._httpHeaders={};for(const T in b.httpHeaders){const o=b.httpHeaders[T];o!==void 0&&(this._httpHeaders[T]=o)}this._httpHeaders.Range=`bytes=${P}-${R-1}`;const v=T=>{if(T.statusCode===404){const o=new i.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=o;return}this._setReadableStream(T)};if(this._request=null,this._url.protocol==="http:"){const T=require$$5;this._request=T.request(c(this._url,this._httpHeaders),v)}else{const T=require$$5;this._request=T.request(c(this._url,this._httpHeaders),v)}this._request.on("error",T=>{this._storedError=T}),this._request.end()}}class E extends m{constructor(b){super(b);let P=decodeURIComponent(this._url.path);I.test(this._url.href)&&(P=P.replace(/^\//,""));const R=require$$5;R.lstat(P,(v,T)=>{if(v){v.code==="ENOENT"&&(v=new i.MissingPDFException(`Missing PDF "${P}".`)),this._storedError=v,this._headersCapability.reject(v);return}this._contentLength=T.size,this._setReadableStream(R.createReadStream(P)),this._headersCapability.resolve()})}}class r extends n{constructor(b,P,R){super(b);let v=decodeURIComponent(this._url.path);I.test(this._url.href)&&(v=v.replace(/^\//,""));const T=require$$5;this._setReadableStream(T.createReadStream(v,{start:P,end:R-1}))}}},(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SVGGraphics=void 0;var i=a(6),f=a(1);const I={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},L="http://www.w3.org/XML/1998/namespace",_="http://www.w3.org/1999/xlink",m=["butt","round","square"],n=["miter","round","bevel"],c=function(T,o="",l=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!l)return URL.createObjectURL(new Blob([T],{type:o}));const S="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let y=`data:${o};base64,`;for(let w=0,N=T.length;w<N;w+=3){const D=T[w]&255,G=T[w+1]&255,le=T[w+2]&255,H=D>>2,Z=(D&3)<<4|G>>4,re=w+1<N?(G&15)<<2|le>>6:64,Q=w+2<N?le&63:64;y+=S[H]+S[Z]+S[re]+S[Q]}return y},C=function(){const T=new Uint8Array([137,80,78,71,13,10,26,10]),o=12,l=new Int32Array(256);for(let le=0;le<256;le++){let H=le;for(let Z=0;Z<8;Z++)H=H&1?3988292384^H>>1&2147483647:H>>1&2147483647;l[le]=H}function S(le,H,Z){let re=-1;for(let Q=H;Q<Z;Q++){const K=(re^le[Q])&255,ue=l[K];re=re>>>8^ue}return re^-1}function y(le,H,Z,re){let Q=re;const K=H.length;Z[Q]=K>>24&255,Z[Q+1]=K>>16&255,Z[Q+2]=K>>8&255,Z[Q+3]=K&255,Q+=4,Z[Q]=le.charCodeAt(0)&255,Z[Q+1]=le.charCodeAt(1)&255,Z[Q+2]=le.charCodeAt(2)&255,Z[Q+3]=le.charCodeAt(3)&255,Q+=4,Z.set(H,Q),Q+=H.length;const ue=S(Z,re+4,Q);Z[Q]=ue>>24&255,Z[Q+1]=ue>>16&255,Z[Q+2]=ue>>8&255,Z[Q+3]=ue&255}function w(le,H,Z){let re=1,Q=0;for(let K=H;K<Z;++K)re=(re+(le[K]&255))%65521,Q=(Q+re)%65521;return Q<<16|re}function N(le){if(!f.isNodeJS)return D(le);try{const H=parseInt(process.versions.node)>=8?le:Buffer.from(le),Z=require$$5.deflateSync(H,{level:9});return Z instanceof Uint8Array?Z:new Uint8Array(Z)}catch(H){(0,f.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+H)}return D(le)}function D(le){let H=le.length;const Z=65535,re=Math.ceil(H/Z),Q=new Uint8Array(2+H+re*5+4);let K=0;Q[K++]=120,Q[K++]=156;let ue=0;for(;H>Z;)Q[K++]=0,Q[K++]=255,Q[K++]=255,Q[K++]=0,Q[K++]=0,Q.set(le.subarray(ue,ue+Z),K),K+=Z,ue+=Z,H-=Z;Q[K++]=1,Q[K++]=H&255,Q[K++]=H>>8&255,Q[K++]=~H&65535&255,Q[K++]=(~H&65535)>>8&255,Q.set(le.subarray(ue),K),K+=le.length-ue;const se=w(le,0,le.length);return Q[K++]=se>>24&255,Q[K++]=se>>16&255,Q[K++]=se>>8&255,Q[K++]=se&255,Q}function G(le,H,Z,re){const Q=le.width,K=le.height;let ue,se,Ce;const Me=le.data;switch(H){case f.ImageKind.GRAYSCALE_1BPP:se=0,ue=1,Ce=Q+7>>3;break;case f.ImageKind.RGB_24BPP:se=2,ue=8,Ce=Q*3;break;case f.ImageKind.RGBA_32BPP:se=6,ue=8,Ce=Q*4;break;default:throw new Error("invalid format")}const q=new Uint8Array((1+Ce)*K);let M=0,F=0;for(let X=0;X<K;++X)q[M++]=0,q.set(Me.subarray(F,F+Ce),M),F+=Ce,M+=Ce;if(H===f.ImageKind.GRAYSCALE_1BPP&&re){M=0;for(let X=0;X<K;X++){M++;for(let me=0;me<Ce;me++)q[M++]^=255}}const d=new Uint8Array([Q>>24&255,Q>>16&255,Q>>8&255,Q&255,K>>24&255,K>>16&255,K>>8&255,K&255,ue,se,0,0,0]),u=N(q),x=T.length+o*3+d.length+u.length,V=new Uint8Array(x);let W=0;return V.set(T,W),W+=T.length,y("IHDR",d,V,W),W+=o+d.length,y("IDATA",u,V,W),W+=o+u.length,y("IEND",new Uint8Array(0),V,W),c(V,"image/png",Z)}return function(H,Z,re){const Q=H.kind===void 0?f.ImageKind.GRAYSCALE_1BPP:H.kind;return G(H,Q,Z,re)}}();class A{constructor(){this.fontSizeScale=1,this.fontWeight=I.fontWeight,this.fontSize=0,this.textMatrix=f.IDENTITY_MATRIX,this.fontMatrix=f.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=f.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=I.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(o,l){this.x=o,this.y=l}}function E(T){let o=[];const l=[];for(const S of T){if(S.fn==="save"){o.push({fnId:92,fn:"group",items:[]}),l.push(o),o=o.at(-1).items;continue}S.fn==="restore"?o=l.pop():o.push(S)}return o}function r(T){if(Number.isInteger(T))return T.toString();const o=T.toFixed(10);let l=o.length-1;if(o[l]!=="0")return o;do l--;while(o[l]==="0");return o.substring(0,o[l]==="."?l:l+1)}function g(T){if(T[4]===0&&T[5]===0){if(T[1]===0&&T[2]===0)return T[0]===1&&T[3]===1?"":`scale(${r(T[0])} ${r(T[3])})`;if(T[0]===T[3]&&T[1]===-T[2]){const o=Math.acos(T[0])*180/Math.PI;return`rotate(${r(o)})`}}else if(T[0]===1&&T[1]===0&&T[2]===0&&T[3]===1)return`translate(${r(T[4])} ${r(T[5])})`;return`matrix(${r(T[0])} ${r(T[1])} ${r(T[2])} ${r(T[3])} ${r(T[4])} ${r(T[5])})`}let b=0,P=0,R=0;class v{constructor(o,l,S=!1){(0,i.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new i.DOMSVGFactory,this.current=new A,this.transformMatrix=f.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=o,this.objs=l,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!S,this._operatorIdMapping=[];for(const y in f.OPS)this._operatorIdMapping[f.OPS[y]]=y}getObject(o,l=null){return typeof o=="string"?o.startsWith("g_")?this.commonObjs.get(o):this.objs.get(o):l}save(){this.transformStack.push(this.transformMatrix);const o=this.current;this.extraStack.push(o),this.current=o.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(o){this.save(),this.executeOpTree(o),this.restore()}loadDependencies(o){const l=o.fnArray,S=o.argsArray;for(let y=0,w=l.length;y<w;y++)if(l[y]===f.OPS.dependency)for(const N of S[y]){const D=N.startsWith("g_")?this.commonObjs:this.objs,G=new Promise(le=>{D.get(N,le)});this.current.dependencies.push(G)}return Promise.all(this.current.dependencies)}transform(o,l,S,y,w,N){const D=[o,l,S,y,w,N];this.transformMatrix=f.Util.transform(this.transformMatrix,D),this.tgrp=null}getSVG(o,l){this.viewport=l;const S=this._initialize(l);return this.loadDependencies(o).then(()=>(this.transformMatrix=f.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(o)),S))}convertOpList(o){const l=this._operatorIdMapping,S=o.argsArray,y=o.fnArray,w=[];for(let N=0,D=y.length;N<D;N++){const G=y[N];w.push({fnId:G,fn:l[G],args:S[N]})}return E(w)}executeOpTree(o){for(const l of o){const S=l.fn,y=l.fnId,w=l.args;switch(y|0){case f.OPS.beginText:this.beginText();break;case f.OPS.dependency:break;case f.OPS.setLeading:this.setLeading(w);break;case f.OPS.setLeadingMoveText:this.setLeadingMoveText(w[0],w[1]);break;case f.OPS.setFont:this.setFont(w);break;case f.OPS.showText:this.showText(w[0]);break;case f.OPS.showSpacedText:this.showText(w[0]);break;case f.OPS.endText:this.endText();break;case f.OPS.moveText:this.moveText(w[0],w[1]);break;case f.OPS.setCharSpacing:this.setCharSpacing(w[0]);break;case f.OPS.setWordSpacing:this.setWordSpacing(w[0]);break;case f.OPS.setHScale:this.setHScale(w[0]);break;case f.OPS.setTextMatrix:this.setTextMatrix(w[0],w[1],w[2],w[3],w[4],w[5]);break;case f.OPS.setTextRise:this.setTextRise(w[0]);break;case f.OPS.setTextRenderingMode:this.setTextRenderingMode(w[0]);break;case f.OPS.setLineWidth:this.setLineWidth(w[0]);break;case f.OPS.setLineJoin:this.setLineJoin(w[0]);break;case f.OPS.setLineCap:this.setLineCap(w[0]);break;case f.OPS.setMiterLimit:this.setMiterLimit(w[0]);break;case f.OPS.setFillRGBColor:this.setFillRGBColor(w[0],w[1],w[2]);break;case f.OPS.setStrokeRGBColor:this.setStrokeRGBColor(w[0],w[1],w[2]);break;case f.OPS.setStrokeColorN:this.setStrokeColorN(w);break;case f.OPS.setFillColorN:this.setFillColorN(w);break;case f.OPS.shadingFill:this.shadingFill(w[0]);break;case f.OPS.setDash:this.setDash(w[0],w[1]);break;case f.OPS.setRenderingIntent:this.setRenderingIntent(w[0]);break;case f.OPS.setFlatness:this.setFlatness(w[0]);break;case f.OPS.setGState:this.setGState(w[0]);break;case f.OPS.fill:this.fill();break;case f.OPS.eoFill:this.eoFill();break;case f.OPS.stroke:this.stroke();break;case f.OPS.fillStroke:this.fillStroke();break;case f.OPS.eoFillStroke:this.eoFillStroke();break;case f.OPS.clip:this.clip("nonzero");break;case f.OPS.eoClip:this.clip("evenodd");break;case f.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case f.OPS.paintImageXObject:this.paintImageXObject(w[0]);break;case f.OPS.paintInlineImageXObject:this.paintInlineImageXObject(w[0]);break;case f.OPS.paintImageMaskXObject:this.paintImageMaskXObject(w[0]);break;case f.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(w[0],w[1]);break;case f.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case f.OPS.closePath:this.closePath();break;case f.OPS.closeStroke:this.closeStroke();break;case f.OPS.closeFillStroke:this.closeFillStroke();break;case f.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case f.OPS.nextLine:this.nextLine();break;case f.OPS.transform:this.transform(w[0],w[1],w[2],w[3],w[4],w[5]);break;case f.OPS.constructPath:this.constructPath(w[0],w[1]);break;case f.OPS.endPath:this.endPath();break;case 92:this.group(l.items);break;default:(0,f.warn)(`Unimplemented operator ${S}`);break}}}setWordSpacing(o){this.current.wordSpacing=o}setCharSpacing(o){this.current.charSpacing=o}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(o,l,S,y,w,N){const D=this.current;D.textMatrix=D.lineMatrix=[o,l,S,y,w,N],D.textMatrixScale=Math.hypot(o,l),D.x=D.lineX=0,D.y=D.lineY=0,D.xcoords=[],D.ycoords=[],D.tspan=this.svgFactory.createElement("svg:tspan"),D.tspan.setAttributeNS(null,"font-family",D.fontFamily),D.tspan.setAttributeNS(null,"font-size",`${r(D.fontSize)}px`),D.tspan.setAttributeNS(null,"y",r(-D.y)),D.txtElement=this.svgFactory.createElement("svg:text"),D.txtElement.append(D.tspan)}beginText(){const o=this.current;o.x=o.lineX=0,o.y=o.lineY=0,o.textMatrix=f.IDENTITY_MATRIX,o.lineMatrix=f.IDENTITY_MATRIX,o.textMatrixScale=1,o.tspan=this.svgFactory.createElement("svg:tspan"),o.txtElement=this.svgFactory.createElement("svg:text"),o.txtgrp=this.svgFactory.createElement("svg:g"),o.xcoords=[],o.ycoords=[]}moveText(o,l){const S=this.current;S.x=S.lineX+=o,S.y=S.lineY+=l,S.xcoords=[],S.ycoords=[],S.tspan=this.svgFactory.createElement("svg:tspan"),S.tspan.setAttributeNS(null,"font-family",S.fontFamily),S.tspan.setAttributeNS(null,"font-size",`${r(S.fontSize)}px`),S.tspan.setAttributeNS(null,"y",r(-S.y))}showText(o){const l=this.current,S=l.font,y=l.fontSize;if(y===0)return;const w=l.fontSizeScale,N=l.charSpacing,D=l.wordSpacing,G=l.fontDirection,le=l.textHScale*G,H=S.vertical,Z=H?1:-1,re=S.defaultVMetrics,Q=y*l.fontMatrix[0];let K=0;for(const Ce of o){if(Ce===null){K+=G*D;continue}else if(typeof Ce=="number"){K+=Z*Ce*y/1e3;continue}const Me=(Ce.isSpace?D:0)+N,q=Ce.fontChar;let M,F,d=Ce.width;if(H){let x;const V=Ce.vmetric||re;x=Ce.vmetric?V[1]:d*.5,x=-x*Q;const W=V[2]*Q;d=V?-V[0]:d,M=x/w,F=(K+W)/w}else M=K/w,F=0;(Ce.isInFont||S.missingFile)&&(l.xcoords.push(l.x+M),H&&l.ycoords.push(-l.y+F),l.tspan.textContent+=q);const u=H?d*Q-Me*G:d*Q+Me*G;K+=u}l.tspan.setAttributeNS(null,"x",l.xcoords.map(r).join(" ")),H?l.tspan.setAttributeNS(null,"y",l.ycoords.map(r).join(" ")):l.tspan.setAttributeNS(null,"y",r(-l.y)),H?l.y-=K:l.x+=K*le,l.tspan.setAttributeNS(null,"font-family",l.fontFamily),l.tspan.setAttributeNS(null,"font-size",`${r(l.fontSize)}px`),l.fontStyle!==I.fontStyle&&l.tspan.setAttributeNS(null,"font-style",l.fontStyle),l.fontWeight!==I.fontWeight&&l.tspan.setAttributeNS(null,"font-weight",l.fontWeight);const ue=l.textRenderingMode&f.TextRenderingMode.FILL_STROKE_MASK;if(ue===f.TextRenderingMode.FILL||ue===f.TextRenderingMode.FILL_STROKE?(l.fillColor!==I.fillColor&&l.tspan.setAttributeNS(null,"fill",l.fillColor),l.fillAlpha<1&&l.tspan.setAttributeNS(null,"fill-opacity",l.fillAlpha)):l.textRenderingMode===f.TextRenderingMode.ADD_TO_PATH?l.tspan.setAttributeNS(null,"fill","transparent"):l.tspan.setAttributeNS(null,"fill","none"),ue===f.TextRenderingMode.STROKE||ue===f.TextRenderingMode.FILL_STROKE){const Ce=1/(l.textMatrixScale||1);this._setStrokeAttributes(l.tspan,Ce)}let se=l.textMatrix;l.textRise!==0&&(se=se.slice(),se[5]+=l.textRise),l.txtElement.setAttributeNS(null,"transform",`${g(se)} scale(${r(le)}, -1)`),l.txtElement.setAttributeNS(L,"xml:space","preserve"),l.txtElement.append(l.tspan),l.txtgrp.append(l.txtElement),this._ensureTransformGroup().append(l.txtElement)}setLeadingMoveText(o,l){this.setLeading(-l),this.moveText(o,l)}addFontStyle(o){if(!o.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const l=c(o.data,o.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${o.loadedName}"; src: url(${l}); }
`}setFont(o){const l=this.current,S=this.commonObjs.get(o[0]);let y=o[1];l.font=S,this.embedFonts&&!S.missingFile&&!this.embeddedFonts[S.loadedName]&&(this.addFontStyle(S),this.embeddedFonts[S.loadedName]=S),l.fontMatrix=S.fontMatrix||f.FONT_IDENTITY_MATRIX;let w="normal";S.black?w="900":S.bold&&(w="bold");const N=S.italic?"italic":"normal";y<0?(y=-y,l.fontDirection=-1):l.fontDirection=1,l.fontSize=y,l.fontFamily=S.loadedName,l.fontWeight=w,l.fontStyle=N,l.tspan=this.svgFactory.createElement("svg:tspan"),l.tspan.setAttributeNS(null,"y",r(-l.y)),l.xcoords=[],l.ycoords=[]}endText(){var l;const o=this.current;o.textRenderingMode&f.TextRenderingMode.ADD_TO_PATH_FLAG&&((l=o.txtElement)!=null&&l.hasChildNodes())&&(o.element=o.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(o){o>0&&(this.current.lineWidth=o)}setLineCap(o){this.current.lineCap=m[o]}setLineJoin(o){this.current.lineJoin=n[o]}setMiterLimit(o){this.current.miterLimit=o}setStrokeAlpha(o){this.current.strokeAlpha=o}setStrokeRGBColor(o,l,S){this.current.strokeColor=f.Util.makeHexColor(o,l,S)}setFillAlpha(o){this.current.fillAlpha=o}setFillRGBColor(o,l,S){this.current.fillColor=f.Util.makeHexColor(o,l,S),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(o){this.current.strokeColor=this._makeColorN_Pattern(o)}setFillColorN(o){this.current.fillColor=this._makeColorN_Pattern(o)}shadingFill(o){const{width:l,height:S}=this.viewport,y=f.Util.inverseTransform(this.transformMatrix),[w,N,D,G]=f.Util.getAxialAlignedBoundingBox([0,0,l,S],y),le=this.svgFactory.createElement("svg:rect");le.setAttributeNS(null,"x",w),le.setAttributeNS(null,"y",N),le.setAttributeNS(null,"width",D-w),le.setAttributeNS(null,"height",G-N),le.setAttributeNS(null,"fill",this._makeShadingPattern(o)),this.current.fillAlpha<1&&le.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(le)}_makeColorN_Pattern(o){return o[0]==="TilingPattern"?this._makeTilingPattern(o):this._makeShadingPattern(o)}_makeTilingPattern(o){const l=o[1],S=o[2],y=o[3]||f.IDENTITY_MATRIX,[w,N,D,G]=o[4],le=o[5],H=o[6],Z=o[7],re=`shading${R++}`,[Q,K,ue,se]=f.Util.normalizeRect([...f.Util.applyTransform([w,N],y),...f.Util.applyTransform([D,G],y)]),[Ce,Me]=f.Util.singularValueDecompose2dScale(y),q=le*Ce,M=H*Me,F=this.svgFactory.createElement("svg:pattern");F.setAttributeNS(null,"id",re),F.setAttributeNS(null,"patternUnits","userSpaceOnUse"),F.setAttributeNS(null,"width",q),F.setAttributeNS(null,"height",M),F.setAttributeNS(null,"x",`${Q}`),F.setAttributeNS(null,"y",`${K}`);const d=this.svg,u=this.transformMatrix,x=this.current.fillColor,V=this.current.strokeColor,W=this.svgFactory.create(ue-Q,se-K);if(this.svg=W,this.transformMatrix=y,Z===2){const X=f.Util.makeHexColor(...l);this.current.fillColor=X,this.current.strokeColor=X}return this.executeOpTree(this.convertOpList(S)),this.svg=d,this.transformMatrix=u,this.current.fillColor=x,this.current.strokeColor=V,F.append(W.childNodes[0]),this.defs.append(F),`url(#${re})`}_makeShadingPattern(o){switch(typeof o=="string"&&(o=this.objs.get(o)),o[0]){case"RadialAxial":const l=`shading${R++}`,S=o[3];let y;switch(o[1]){case"axial":const w=o[4],N=o[5];y=this.svgFactory.createElement("svg:linearGradient"),y.setAttributeNS(null,"id",l),y.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),y.setAttributeNS(null,"x1",w[0]),y.setAttributeNS(null,"y1",w[1]),y.setAttributeNS(null,"x2",N[0]),y.setAttributeNS(null,"y2",N[1]);break;case"radial":const D=o[4],G=o[5],le=o[6],H=o[7];y=this.svgFactory.createElement("svg:radialGradient"),y.setAttributeNS(null,"id",l),y.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),y.setAttributeNS(null,"cx",G[0]),y.setAttributeNS(null,"cy",G[1]),y.setAttributeNS(null,"r",H),y.setAttributeNS(null,"fx",D[0]),y.setAttributeNS(null,"fy",D[1]),y.setAttributeNS(null,"fr",le);break;default:throw new Error(`Unknown RadialAxial type: ${o[1]}`)}for(const w of S){const N=this.svgFactory.createElement("svg:stop");N.setAttributeNS(null,"offset",w[0]),N.setAttributeNS(null,"stop-color",w[1]),y.append(N)}return this.defs.append(y),`url(#${l})`;case"Mesh":return(0,f.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${o[0]}`)}}setDash(o,l){this.current.dashArray=o,this.current.dashPhase=l}constructPath(o,l){const S=this.current;let y=S.x,w=S.y,N=[],D=0;for(const G of o)switch(G|0){case f.OPS.rectangle:y=l[D++],w=l[D++];const le=l[D++],H=l[D++],Z=y+le,re=w+H;N.push("M",r(y),r(w),"L",r(Z),r(w),"L",r(Z),r(re),"L",r(y),r(re),"Z");break;case f.OPS.moveTo:y=l[D++],w=l[D++],N.push("M",r(y),r(w));break;case f.OPS.lineTo:y=l[D++],w=l[D++],N.push("L",r(y),r(w));break;case f.OPS.curveTo:y=l[D+4],w=l[D+5],N.push("C",r(l[D]),r(l[D+1]),r(l[D+2]),r(l[D+3]),r(y),r(w)),D+=6;break;case f.OPS.curveTo2:N.push("C",r(y),r(w),r(l[D]),r(l[D+1]),r(l[D+2]),r(l[D+3])),y=l[D+2],w=l[D+3],D+=4;break;case f.OPS.curveTo3:y=l[D+2],w=l[D+3],N.push("C",r(l[D]),r(l[D+1]),r(y),r(w),r(y),r(w)),D+=4;break;case f.OPS.closePath:N.push("Z");break}N=N.join(" "),S.path&&o.length>0&&o[0]!==f.OPS.rectangle&&o[0]!==f.OPS.moveTo?N=S.path.getAttributeNS(null,"d")+N:(S.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(S.path)),S.path.setAttributeNS(null,"d",N),S.path.setAttributeNS(null,"fill","none"),S.element=S.path,S.setCurrentPoint(y,w)}endPath(){const o=this.current;if(o.path=null,!this.pendingClip)return;if(!o.element){this.pendingClip=null;return}const l=`clippath${b++}`,S=this.svgFactory.createElement("svg:clipPath");S.setAttributeNS(null,"id",l),S.setAttributeNS(null,"transform",g(this.transformMatrix));const y=o.element.cloneNode(!0);if(this.pendingClip==="evenodd"?y.setAttributeNS(null,"clip-rule","evenodd"):y.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,S.append(y),this.defs.append(S),o.activeClipUrl){o.clipGroup=null;for(const w of this.extraStack)w.clipGroup=null;S.setAttributeNS(null,"clip-path",o.activeClipUrl)}o.activeClipUrl=`url(#${l})`,this.tgrp=null}clip(o){this.pendingClip=o}closePath(){const o=this.current;if(o.path){const l=`${o.path.getAttributeNS(null,"d")}Z`;o.path.setAttributeNS(null,"d",l)}}setLeading(o){this.current.leading=-o}setTextRise(o){this.current.textRise=o}setTextRenderingMode(o){this.current.textRenderingMode=o}setHScale(o){this.current.textHScale=o/100}setRenderingIntent(o){}setFlatness(o){}setGState(o){for(const[l,S]of o)switch(l){case"LW":this.setLineWidth(S);break;case"LC":this.setLineCap(S);break;case"LJ":this.setLineJoin(S);break;case"ML":this.setMiterLimit(S);break;case"D":this.setDash(S[0],S[1]);break;case"RI":this.setRenderingIntent(S);break;case"FL":this.setFlatness(S);break;case"Font":this.setFont(S);break;case"CA":this.setStrokeAlpha(S);break;case"ca":this.setFillAlpha(S);break;default:(0,f.warn)(`Unimplemented graphic state operator ${l}`);break}}fill(){const o=this.current;o.element&&(o.element.setAttributeNS(null,"fill",o.fillColor),o.element.setAttributeNS(null,"fill-opacity",o.fillAlpha),this.endPath())}stroke(){const o=this.current;o.element&&(this._setStrokeAttributes(o.element),o.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(o,l=1){const S=this.current;let y=S.dashArray;l!==1&&y.length>0&&(y=y.map(function(w){return l*w})),o.setAttributeNS(null,"stroke",S.strokeColor),o.setAttributeNS(null,"stroke-opacity",S.strokeAlpha),o.setAttributeNS(null,"stroke-miterlimit",r(S.miterLimit)),o.setAttributeNS(null,"stroke-linecap",S.lineCap),o.setAttributeNS(null,"stroke-linejoin",S.lineJoin),o.setAttributeNS(null,"stroke-width",r(l*S.lineWidth)+"px"),o.setAttributeNS(null,"stroke-dasharray",y.map(r).join(" ")),o.setAttributeNS(null,"stroke-dashoffset",r(l*S.dashPhase)+"px")}eoFill(){var o;(o=this.current.element)==null||o.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var o;(o=this.current.element)==null||o.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const o=this.svgFactory.createElement("svg:rect");o.setAttributeNS(null,"x","0"),o.setAttributeNS(null,"y","0"),o.setAttributeNS(null,"width","1px"),o.setAttributeNS(null,"height","1px"),o.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(o)}paintImageXObject(o){const l=this.getObject(o);if(!l){(0,f.warn)(`Dependent image with object ID ${o} is not ready yet`);return}this.paintInlineImageXObject(l)}paintInlineImageXObject(o,l){const S=o.width,y=o.height,w=C(o,this.forceDataSchema,!!l),N=this.svgFactory.createElement("svg:rect");N.setAttributeNS(null,"x","0"),N.setAttributeNS(null,"y","0"),N.setAttributeNS(null,"width",r(S)),N.setAttributeNS(null,"height",r(y)),this.current.element=N,this.clip("nonzero");const D=this.svgFactory.createElement("svg:image");D.setAttributeNS(_,"xlink:href",w),D.setAttributeNS(null,"x","0"),D.setAttributeNS(null,"y",r(-y)),D.setAttributeNS(null,"width",r(S)+"px"),D.setAttributeNS(null,"height",r(y)+"px"),D.setAttributeNS(null,"transform",`scale(${r(1/S)} ${r(-1/y)})`),l?l.append(D):this._ensureTransformGroup().append(D)}paintImageMaskXObject(o){const l=this.getObject(o.data,o);if(l.bitmap){(0,f.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const S=this.current,y=l.width,w=l.height,N=S.fillColor;S.maskId=`mask${P++}`;const D=this.svgFactory.createElement("svg:mask");D.setAttributeNS(null,"id",S.maskId);const G=this.svgFactory.createElement("svg:rect");G.setAttributeNS(null,"x","0"),G.setAttributeNS(null,"y","0"),G.setAttributeNS(null,"width",r(y)),G.setAttributeNS(null,"height",r(w)),G.setAttributeNS(null,"fill",N),G.setAttributeNS(null,"mask",`url(#${S.maskId})`),this.defs.append(D),this._ensureTransformGroup().append(G),this.paintInlineImageXObject(l,D)}paintFormXObjectBegin(o,l){if(Array.isArray(o)&&o.length===6&&this.transform(o[0],o[1],o[2],o[3],o[4],o[5]),l){const S=l[2]-l[0],y=l[3]-l[1],w=this.svgFactory.createElement("svg:rect");w.setAttributeNS(null,"x",l[0]),w.setAttributeNS(null,"y",l[1]),w.setAttributeNS(null,"width",r(S)),w.setAttributeNS(null,"height",r(y)),this.current.element=w,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(o){const l=this.svgFactory.create(o.width,o.height),S=this.svgFactory.createElement("svg:defs");l.append(S),this.defs=S;const y=this.svgFactory.createElement("svg:g");return y.setAttributeNS(null,"transform",g(o.transform)),l.append(y),this.svg=y,l}_ensureClipGroup(){if(!this.current.clipGroup){const o=this.svgFactory.createElement("svg:g");o.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(o),this.current.clipGroup=o}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",g(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}t.SVGGraphics=v},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.XfaText=void 0;class a{static textContent(f){const I=[],L={items:I,styles:Object.create(null)};function _(m){var C;if(!m)return;let n=null;const c=m.name;if(c==="#text")n=m.value;else if(a.shouldBuildText(c))(C=m==null?void 0:m.attributes)!=null&&C.textContent?n=m.attributes.textContent:m.value&&(n=m.value);else return;if(n!==null&&I.push({str:n}),!!m.children)for(const A of m.children)_(A)}return _(f),L}static shouldBuildText(f){return!(f==="textarea"||f==="input"||f==="option"||f==="select")}}t.XfaText=a},(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TextLayerRenderTask=void 0,t.renderTextLayer=g,t.updateTextLayer=b;var i=a(1),f=a(6);const I=1e5,L=30,_=.8,m=new Map;function n(P,R){let v;if(R&&i.FeatureTest.isOffscreenCanvasSupported)v=new OffscreenCanvas(P,P).getContext("2d",{alpha:!1});else{const T=document.createElement("canvas");T.width=T.height=P,v=T.getContext("2d",{alpha:!1})}return v}function c(P,R){const v=m.get(P);if(v)return v;const T=n(L,R);T.font=`${L}px ${P}`;const o=T.measureText("");let l=o.fontBoundingBoxAscent,S=Math.abs(o.fontBoundingBoxDescent);if(l){const w=l/(l+S);return m.set(P,w),T.canvas.width=T.canvas.height=0,w}T.strokeStyle="red",T.clearRect(0,0,L,L),T.strokeText("g",0,0);let y=T.getImageData(0,0,L,L).data;S=0;for(let w=y.length-1-3;w>=0;w-=4)if(y[w]>0){S=Math.ceil(w/4/L);break}T.clearRect(0,0,L,L),T.strokeText("A",0,L),y=T.getImageData(0,0,L,L).data,l=0;for(let w=0,N=y.length;w<N;w+=4)if(y[w]>0){l=L-Math.floor(w/4/L);break}if(T.canvas.width=T.canvas.height=0,l){const w=l/(l+S);return m.set(P,w),w}return m.set(P,_),_}function C(P,R,v){const T=document.createElement("span"),o={angle:0,canvasWidth:0,hasText:R.str!=="",hasEOL:R.hasEOL,fontSize:0};P._textDivs.push(T);const l=i.Util.transform(P._transform,R.transform);let S=Math.atan2(l[1],l[0]);const y=v[R.fontName];y.vertical&&(S+=Math.PI/2);const w=Math.hypot(l[2],l[3]),N=w*c(y.fontFamily,P._isOffscreenCanvasSupported);let D,G;S===0?(D=l[4],G=l[5]-N):(D=l[4]+N*Math.sin(S),G=l[5]-N*Math.cos(S));const le="calc(var(--scale-factor)*",H=T.style;P._container===P._rootContainer?(H.left=`${(100*D/P._pageWidth).toFixed(2)}%`,H.top=`${(100*G/P._pageHeight).toFixed(2)}%`):(H.left=`${le}${D.toFixed(2)}px)`,H.top=`${le}${G.toFixed(2)}px)`),H.fontSize=`${le}${w.toFixed(2)}px)`,H.fontFamily=y.fontFamily,o.fontSize=w,T.setAttribute("role","presentation"),T.textContent=R.str,T.dir=R.dir,P._fontInspectorEnabled&&(T.dataset.fontName=R.fontName),S!==0&&(o.angle=S*(180/Math.PI));let Z=!1;if(R.str.length>1)Z=!0;else if(R.str!==" "&&R.transform[0]!==R.transform[3]){const re=Math.abs(R.transform[0]),Q=Math.abs(R.transform[3]);re!==Q&&Math.max(re,Q)/Math.min(re,Q)>1.5&&(Z=!0)}Z&&(o.canvasWidth=y.vertical?R.height:R.width),P._textDivProperties.set(T,o),P._isReadableStream&&P._layoutText(T)}function A(P){const{div:R,scale:v,properties:T,ctx:o,prevFontSize:l,prevFontFamily:S}=P,{style:y}=R;let w="";if(T.canvasWidth!==0&&T.hasText){const{fontFamily:N}=y,{canvasWidth:D,fontSize:G}=T;(l!==G||S!==N)&&(o.font=`${G*v}px ${N}`,P.prevFontSize=G,P.prevFontFamily=N);const{width:le}=o.measureText(R.textContent);le>0&&(w=`scaleX(${D*v/le})`)}T.angle!==0&&(w=`rotate(${T.angle}deg) ${w}`),w.length>0&&(y.transform=w)}function E(P){if(P._canceled)return;const R=P._textDivs,v=P._capability;if(R.length>I){v.resolve();return}if(!P._isReadableStream)for(const o of R)P._layoutText(o);v.resolve()}class r{constructor({textContentSource:R,container:v,viewport:T,textDivs:o,textDivProperties:l,textContentItemsStr:S,isOffscreenCanvasSupported:y}){var le;this._textContentSource=R,this._isReadableStream=R instanceof ReadableStream,this._container=this._rootContainer=v,this._textDivs=o||[],this._textContentItemsStr=S||[],this._isOffscreenCanvasSupported=y,this._fontInspectorEnabled=!!((le=globalThis.FontInspector)!=null&&le.enabled),this._reader=null,this._textDivProperties=l||new WeakMap,this._canceled=!1,this._capability=new i.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:T.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:n(0,y)};const{pageWidth:w,pageHeight:N,pageX:D,pageY:G}=T.rawDims;this._transform=[1,0,0,-1,-D,G+N],this._pageWidth=w,this._pageHeight=N,(0,f.setLayerDimensions)(v,T),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new i.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new i.AbortException("TextLayer task cancelled."))}_processItems(R,v){for(const T of R){if(T.str===void 0){if(T.type==="beginMarkedContentProps"||T.type==="beginMarkedContent"){const o=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),T.id!==null&&this._container.setAttribute("id",`${T.id}`),o.append(this._container)}else T.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(T.str),C(this,T,v)}}_layoutText(R){const v=this._layoutTextParams.properties=this._textDivProperties.get(R);if(this._layoutTextParams.div=R,A(this._layoutTextParams),v.hasText&&this._container.append(R),v.hasEOL){const T=document.createElement("br");T.setAttribute("role","presentation"),this._container.append(T)}}_render(){const R=new i.PromiseCapability;let v=Object.create(null);if(this._isReadableStream){const T=()=>{this._reader.read().then(({value:o,done:l})=>{if(l){R.resolve();return}Object.assign(v,o.styles),this._processItems(o.items,v),T()},R.reject)};this._reader=this._textContentSource.getReader(),T()}else if(this._textContentSource){const{items:T,styles:o}=this._textContentSource;this._processItems(T,o),R.resolve()}else throw new Error('No "textContentSource" parameter specified.');R.promise.then(()=>{v=null,E(this)},this._capability.reject)}}t.TextLayerRenderTask=r;function g(P){!P.textContentSource&&(P.textContent||P.textContentStream)&&((0,f.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),P.textContentSource=P.textContent||P.textContentStream);const{container:R,viewport:v}=P,T=getComputedStyle(R),o=T.getPropertyValue("visibility"),l=parseFloat(T.getPropertyValue("--scale-factor"));o==="visible"&&(!l||Math.abs(l-v.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const S=new r(P);return S._render(),S}function b({container:P,viewport:R,textDivs:v,textDivProperties:T,isOffscreenCanvasSupported:o,mustRotate:l=!0,mustRescale:S=!0}){if(l&&(0,f.setLayerDimensions)(P,{rotation:R.rotation}),S){const y=n(0,o),N={prevFontSize:null,prevFontFamily:null,div:null,scale:R.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:y};for(const D of v)N.properties=T.get(D),N.div=D,A(N)}}},(e,t,a)=>{var c,C,A,E,r,g,b,P,R,v,T,Ai,l,zt,y,Pi,N,Ci;Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationEditorLayer=void 0;var i=a(1),f=a(4),I=a(28),L=a(33),_=a(6),m=a(34);const G=class G{constructor({uiManager:H,pageIndex:Z,div:re,accessibilityManager:Q,annotationLayer:K,viewport:ue,l10n:se}){j(this,T);j(this,l);j(this,y);j(this,N);j(this,c,void 0);j(this,C,!1);j(this,A,null);j(this,E,this.pointerup.bind(this));j(this,r,this.pointerdown.bind(this));j(this,g,new Map);j(this,b,!1);j(this,P,!1);j(this,R,!1);j(this,v,void 0);const Ce=[I.FreeTextEditor,L.InkEditor,m.StampEditor];if(!G._initialized){G._initialized=!0;for(const Me of Ce)Me.initialize(se)}H.registerEditorTypes(Ce),he(this,v,H),this.pageIndex=Z,this.div=re,he(this,c,Q),he(this,A,K),this.viewport=ue,s(this,v).addLayer(this)}get isEmpty(){return s(this,g).size===0}updateToolbar(H){s(this,v).updateToolbar(H)}updateMode(H=s(this,v).getMode()){z(this,N,Ci).call(this),H===i.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),H!==i.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",H===i.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",H===i.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",H===i.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(H){if(!H&&s(this,v).getMode()!==i.AnnotationEditorType.INK)return;if(!H){for(const re of s(this,g).values())if(re.isEmpty()){re.setInBackground();return}}z(this,l,zt).call(this,{offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(H){s(this,v).setEditingState(H)}addCommands(H){s(this,v).addCommands(H)}enable(){this.div.style.pointerEvents="auto";const H=new Set;for(const re of s(this,g).values())re.enableEditing(),re.annotationElementId&&H.add(re.annotationElementId);if(!s(this,A))return;const Z=s(this,A).getEditableAnnotations();for(const re of Z){if(re.hide(),s(this,v).isDeletedAnnotationElement(re.data.id)||H.has(re.data.id))continue;const Q=this.deserialize(re);Q&&(this.addOrRebuild(Q),Q.enableEditing())}}disable(){var Z;he(this,R,!0),this.div.style.pointerEvents="none";const H=new Set;for(const re of s(this,g).values()){if(re.disableEditing(),!re.annotationElementId||re.serialize()!==null){H.add(re.annotationElementId);continue}(Z=this.getEditableAnnotation(re.annotationElementId))==null||Z.show(),re.remove()}if(s(this,A)){const re=s(this,A).getEditableAnnotations();for(const Q of re){const{id:K}=Q.data;H.has(K)||s(this,v).isDeletedAnnotationElement(K)||Q.show()}}z(this,N,Ci).call(this),this.isEmpty&&(this.div.hidden=!0),he(this,R,!1)}getEditableAnnotation(H){var Z;return((Z=s(this,A))==null?void 0:Z.getEditableAnnotation(H))||null}setActiveEditor(H){s(this,v).getActive()!==H&&s(this,v).setActiveEditor(H)}enableClick(){this.div.addEventListener("pointerdown",s(this,r)),this.div.addEventListener("pointerup",s(this,E))}disableClick(){this.div.removeEventListener("pointerdown",s(this,r)),this.div.removeEventListener("pointerup",s(this,E))}attach(H){s(this,g).set(H.id,H);const{annotationElementId:Z}=H;Z&&s(this,v).isDeletedAnnotationElement(Z)&&s(this,v).removeDeletedAnnotationElement(H)}detach(H){var Z;s(this,g).delete(H.id),(Z=s(this,c))==null||Z.removePointerInTextLayer(H.contentDiv),!s(this,R)&&H.annotationElementId&&s(this,v).addDeletedAnnotationElement(H)}remove(H){this.detach(H),s(this,v).removeEditor(H),H.div.contains(document.activeElement)&&setTimeout(()=>{s(this,v).focusMainContainer()},0),H.div.remove(),H.isAttachedToDOM=!1,s(this,P)||this.addInkEditorIfNeeded(!1)}changeParent(H){var Z;H.parent!==this&&(H.annotationElementId&&(s(this,v).addDeletedAnnotationElement(H.annotationElementId),f.AnnotationEditor.deleteAnnotationElement(H),H.annotationElementId=null),this.attach(H),(Z=H.parent)==null||Z.detach(H),H.setParent(this),H.div&&H.isAttachedToDOM&&(H.div.remove(),this.div.append(H.div)))}add(H){if(this.changeParent(H),s(this,v).addEditor(H),this.attach(H),!H.isAttachedToDOM){const Z=H.render();this.div.append(Z),H.isAttachedToDOM=!0}H.fixAndSetPosition(),H.onceAdded(),s(this,v).addToAnnotationStorage(H)}moveEditorInDOM(H){var re;if(!H.isAttachedToDOM)return;const{activeElement:Z}=document;H.div.contains(Z)&&(H._focusEventsAllowed=!1,setTimeout(()=>{H.div.contains(document.activeElement)?H._focusEventsAllowed=!0:(H.div.addEventListener("focusin",()=>{H._focusEventsAllowed=!0},{once:!0}),Z.focus())},0)),H._structTreeParentId=(re=s(this,c))==null?void 0:re.moveElementInDOM(this.div,H.div,H.contentDiv,!0)}addOrRebuild(H){H.needsToBeRebuilt()?H.rebuild():this.add(H)}addUndoableEditor(H){const Z=()=>H._uiManager.rebuild(H),re=()=>{H.remove()};this.addCommands({cmd:Z,undo:re,mustExec:!1})}getNextId(){return s(this,v).getId()}pasteEditor(H,Z){s(this,v).updateToolbar(H),s(this,v).updateMode(H);const{offsetX:re,offsetY:Q}=z(this,y,Pi).call(this),K=this.getNextId(),ue=z(this,T,Ai).call(this,{parent:this,id:K,x:re,y:Q,uiManager:s(this,v),isCentered:!0,...Z});ue&&this.add(ue)}deserialize(H){switch(H.annotationType??H.annotationEditorType){case i.AnnotationEditorType.FREETEXT:return I.FreeTextEditor.deserialize(H,this,s(this,v));case i.AnnotationEditorType.INK:return L.InkEditor.deserialize(H,this,s(this,v));case i.AnnotationEditorType.STAMP:return m.StampEditor.deserialize(H,this,s(this,v))}return null}addNewEditor(){z(this,l,zt).call(this,z(this,y,Pi).call(this),!0)}setSelected(H){s(this,v).setSelected(H)}toggleSelected(H){s(this,v).toggleSelected(H)}isSelected(H){return s(this,v).isSelected(H)}unselect(H){s(this,v).unselect(H)}pointerup(H){const{isMac:Z}=i.FeatureTest.platform;if(!(H.button!==0||H.ctrlKey&&Z)&&H.target===this.div&&s(this,b)){if(he(this,b,!1),!s(this,C)){he(this,C,!0);return}if(s(this,v).getMode()===i.AnnotationEditorType.STAMP){s(this,v).unselectAll();return}z(this,l,zt).call(this,H,!1)}}pointerdown(H){if(s(this,b)){he(this,b,!1);return}const{isMac:Z}=i.FeatureTest.platform;if(H.button!==0||H.ctrlKey&&Z||H.target!==this.div)return;he(this,b,!0);const re=s(this,v).getActive();he(this,C,!re||re.isEmpty())}findNewParent(H,Z,re){const Q=s(this,v).findParent(Z,re);return Q===null||Q===this?!1:(Q.changeParent(H),!0)}destroy(){var H,Z;((H=s(this,v).getActive())==null?void 0:H.parent)===this&&(s(this,v).commitOrRemove(),s(this,v).setActiveEditor(null));for(const re of s(this,g).values())(Z=s(this,c))==null||Z.removePointerInTextLayer(re.contentDiv),re.setParent(null),re.isAttachedToDOM=!1,re.div.remove();this.div=null,s(this,g).clear(),s(this,v).removeLayer(this)}render({viewport:H}){this.viewport=H,(0,_.setLayerDimensions)(this.div,H);for(const Z of s(this,v).getEditors(this.pageIndex))this.add(Z);this.updateMode()}update({viewport:H}){s(this,v).commitOrRemove(),this.viewport=H,(0,_.setLayerDimensions)(this.div,{rotation:H.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:H,pageHeight:Z}=this.viewport.rawDims;return[H,Z]}};c=new WeakMap,C=new WeakMap,A=new WeakMap,E=new WeakMap,r=new WeakMap,g=new WeakMap,b=new WeakMap,P=new WeakMap,R=new WeakMap,v=new WeakMap,T=new WeakSet,Ai=function(H){switch(s(this,v).getMode()){case i.AnnotationEditorType.FREETEXT:return new I.FreeTextEditor(H);case i.AnnotationEditorType.INK:return new L.InkEditor(H);case i.AnnotationEditorType.STAMP:return new m.StampEditor(H)}return null},l=new WeakSet,zt=function(H,Z){const re=this.getNextId(),Q=z(this,T,Ai).call(this,{parent:this,id:re,x:H.offsetX,y:H.offsetY,uiManager:s(this,v),isCentered:Z});return Q&&this.add(Q),Q},y=new WeakSet,Pi=function(){const{x:H,y:Z,width:re,height:Q}=this.div.getBoundingClientRect(),K=Math.max(0,H),ue=Math.max(0,Z),se=Math.min(window.innerWidth,H+re),Ce=Math.min(window.innerHeight,Z+Q),Me=(K+se)/2-H,q=(ue+Ce)/2-Z,[M,F]=this.viewport.rotation%180===0?[Me,q]:[q,Me];return{offsetX:M,offsetY:F}},N=new WeakSet,Ci=function(){he(this,P,!0);for(const H of s(this,g).values())H.isEmpty()&&H.remove();he(this,P,!1)},Je(G,"_initialized",!1);let n=G;t.AnnotationEditorLayer=n},(e,t,a)=>{var m,n,c,C,A,E,r,g,b,P,Dn,v,Bn,o,Vn,S,Ct,w,Ti,D,Hn,le,Ri;Object.defineProperty(t,"__esModule",{value:!0}),t.FreeTextEditor=void 0;var i=a(1),f=a(5),I=a(4),L=a(29);const Z=class Z extends I.AnnotationEditor{constructor(K){super({...K,name:"freeTextEditor"});j(this,P);j(this,v);j(this,o);j(this,S);j(this,w);j(this,D);j(this,le);j(this,m,this.editorDivBlur.bind(this));j(this,n,this.editorDivFocus.bind(this));j(this,c,this.editorDivInput.bind(this));j(this,C,this.editorDivKeydown.bind(this));j(this,A,void 0);j(this,E,"");j(this,r,`${this.id}-editor`);j(this,g,void 0);j(this,b,null);he(this,A,K.color||Z._defaultColor||I.AnnotationEditor._defaultLineColor),he(this,g,K.fontSize||Z._defaultFontSize)}static get _keyboardManager(){const K=Z.prototype,ue=Me=>Me.isEmpty(),se=f.AnnotationEditorUIManager.TRANSLATE_SMALL,Ce=f.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,i.shadow)(this,"_keyboardManager",new f.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],K.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],K.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],K._translateEmpty,{args:[-se,0],checker:ue}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],K._translateEmpty,{args:[-Ce,0],checker:ue}],[["ArrowRight","mac+ArrowRight"],K._translateEmpty,{args:[se,0],checker:ue}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],K._translateEmpty,{args:[Ce,0],checker:ue}],[["ArrowUp","mac+ArrowUp"],K._translateEmpty,{args:[0,-se],checker:ue}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],K._translateEmpty,{args:[0,-Ce],checker:ue}],[["ArrowDown","mac+ArrowDown"],K._translateEmpty,{args:[0,se],checker:ue}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],K._translateEmpty,{args:[0,Ce],checker:ue}]]))}static initialize(K){I.AnnotationEditor.initialize(K,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const ue=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(ue.getPropertyValue("--freetext-padding"))}static updateDefaultParams(K,ue){switch(K){case i.AnnotationEditorParamsType.FREETEXT_SIZE:Z._defaultFontSize=ue;break;case i.AnnotationEditorParamsType.FREETEXT_COLOR:Z._defaultColor=ue;break}}updateParams(K,ue){switch(K){case i.AnnotationEditorParamsType.FREETEXT_SIZE:z(this,P,Dn).call(this,ue);break;case i.AnnotationEditorParamsType.FREETEXT_COLOR:z(this,v,Bn).call(this,ue);break}}static get defaultPropertiesToUpdate(){return[[i.AnnotationEditorParamsType.FREETEXT_SIZE,Z._defaultFontSize],[i.AnnotationEditorParamsType.FREETEXT_COLOR,Z._defaultColor||I.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[i.AnnotationEditorParamsType.FREETEXT_SIZE,s(this,g)],[i.AnnotationEditorParamsType.FREETEXT_COLOR,s(this,A)]]}_translateEmpty(K,ue){this._uiManager.translateSelectedEditors(K,ue,!0)}getInitialTranslation(){const K=this.parentScale;return[-Z._internalPadding*K,-(Z._internalPadding+s(this,g))*K]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(i.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",s(this,C)),this.editorDiv.addEventListener("focus",s(this,n)),this.editorDiv.addEventListener("blur",s(this,m)),this.editorDiv.addEventListener("input",s(this,c)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",s(this,r)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",s(this,C)),this.editorDiv.removeEventListener("focus",s(this,n)),this.editorDiv.removeEventListener("blur",s(this,m)),this.editorDiv.removeEventListener("input",s(this,c)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(K){this._focusEventsAllowed&&(super.focusin(K),K.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var K;if(this.width){z(this,le,Ri).call(this);return}this.enableEditMode(),this.editorDiv.focus(),(K=this._initialOptions)!=null&&K.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const K=s(this,E),ue=he(this,E,z(this,o,Vn).call(this).trimEnd());if(K===ue)return;const se=Ce=>{if(he(this,E,Ce),!Ce){this.remove();return}z(this,w,Ti).call(this),this._uiManager.rebuild(this),z(this,S,Ct).call(this)};this.addCommands({cmd:()=>{se(ue)},undo:()=>{se(K)},mustExec:!1}),z(this,S,Ct).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(K){this.enterInEditMode()}keydown(K){K.target===this.div&&K.key==="Enter"&&(this.enterInEditMode(),K.preventDefault())}editorDivKeydown(K){Z._keyboardManager.exec(this,K)}editorDivFocus(K){this.isEditing=!0}editorDivBlur(K){this.isEditing=!1}editorDivInput(K){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let K,ue;this.width&&(K=this.x,ue=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",s(this,r)),this.enableEditing(),I.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(Ce=>{var Me;return(Me=this.editorDiv)==null?void 0:Me.setAttribute("aria-label",Ce)}),I.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(Ce=>{var Me;return(Me=this.editorDiv)==null?void 0:Me.setAttribute("default-content",Ce)}),this.editorDiv.contentEditable=!0;const{style:se}=this.editorDiv;if(se.fontSize=`calc(${s(this,g)}px * var(--scale-factor))`,se.color=s(this,A),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,f.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[Ce,Me]=this.parentDimensions;if(this.annotationElementId){const{position:q}=s(this,b);let[M,F]=this.getInitialTranslation();[M,F]=this.pageTranslationToScreen(M,F);const[d,u]=this.pageDimensions,[x,V]=this.pageTranslation;let W,X;switch(this.rotation){case 0:W=K+(q[0]-x)/d,X=ue+this.height-(q[1]-V)/u;break;case 90:W=K+(q[0]-x)/d,X=ue-(q[1]-V)/u,[M,F]=[F,-M];break;case 180:W=K-this.width+(q[0]-x)/d,X=ue-(q[1]-V)/u,[M,F]=[-M,-F];break;case 270:W=K+(q[0]-x-this.height*u)/d,X=ue+(q[1]-V-this.width*d)/u,[M,F]=[-F,M];break}this.setAt(W*Ce,X*Me,M,F)}else this.setAt(K*Ce,ue*Me,this.width*Ce,this.height*Me);z(this,w,Ti).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(K,ue,se){let Ce=null;if(K instanceof L.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:q,fontColor:M},rect:F,rotation:d,id:u},textContent:x,textPosition:V,parent:{page:{pageNumber:W}}}=K;if(!x||x.length===0)return null;Ce=K={annotationType:i.AnnotationEditorType.FREETEXT,color:Array.from(M),fontSize:q,value:x.join(`
`),position:V,pageIndex:W-1,rect:F,rotation:d,id:u,deleted:!1}}const Me=super.deserialize(K,ue,se);return he(Me,g,K.fontSize),he(Me,A,i.Util.makeHexColor(...K.color)),he(Me,E,K.value),Me.annotationElementId=K.id||null,he(Me,b,Ce),Me}serialize(K=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const ue=Z._internalPadding*this.parentScale,se=this.getRect(ue,ue),Ce=I.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:s(this,A)),Me={annotationType:i.AnnotationEditorType.FREETEXT,color:Ce,fontSize:s(this,g),value:s(this,E),pageIndex:this.pageIndex,rect:se,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return K?Me:this.annotationElementId&&!z(this,D,Hn).call(this,Me)?null:(Me.id=this.annotationElementId,Me)}};m=new WeakMap,n=new WeakMap,c=new WeakMap,C=new WeakMap,A=new WeakMap,E=new WeakMap,r=new WeakMap,g=new WeakMap,b=new WeakMap,P=new WeakSet,Dn=function(K){const ue=Ce=>{this.editorDiv.style.fontSize=`calc(${Ce}px * var(--scale-factor))`,this.translate(0,-(Ce-s(this,g))*this.parentScale),he(this,g,Ce),z(this,S,Ct).call(this)},se=s(this,g);this.addCommands({cmd:()=>{ue(K)},undo:()=>{ue(se)},mustExec:!0,type:i.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},v=new WeakSet,Bn=function(K){const ue=s(this,A);this.addCommands({cmd:()=>{he(this,A,this.editorDiv.style.color=K)},undo:()=>{he(this,A,this.editorDiv.style.color=ue)},mustExec:!0,type:i.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},o=new WeakSet,Vn=function(){const K=this.editorDiv.getElementsByTagName("div");if(K.length===0)return this.editorDiv.innerText;const ue=[];for(const se of K)ue.push(se.innerText.replace(/\r\n?|\n/,""));return ue.join(`
`)},S=new WeakSet,Ct=function(){const[K,ue]=this.parentDimensions;let se;if(this.isAttachedToDOM)se=this.div.getBoundingClientRect();else{const{currentLayer:Ce,div:Me}=this,q=Me.style.display;Me.style.display="hidden",Ce.div.append(this.div),se=Me.getBoundingClientRect(),Me.remove(),Me.style.display=q}this.rotation%180===this.parentRotation%180?(this.width=se.width/K,this.height=se.height/ue):(this.width=se.height/K,this.height=se.width/ue),this.fixAndSetPosition()},w=new WeakSet,Ti=function(){if(this.editorDiv.replaceChildren(),!!s(this,E))for(const K of s(this,E).split(`
`)){const ue=document.createElement("div");ue.append(K?document.createTextNode(K):document.createElement("br")),this.editorDiv.append(ue)}},D=new WeakSet,Hn=function(K){const{value:ue,fontSize:se,color:Ce,rect:Me,pageIndex:q}=s(this,b);return K.value!==ue||K.fontSize!==se||K.rect.some((M,F)=>Math.abs(M-Me[F])>=1)||K.color.some((M,F)=>M!==Ce[F])||K.pageIndex!==q},le=new WeakSet,Ri=function(K=!1){if(!this.annotationElementId)return;if(z(this,S,Ct).call(this),!K&&(this.width===0||this.height===0)){setTimeout(()=>z(this,le,Ri).call(this,!0),0);return}const ue=Z._internalPadding*this.parentScale;s(this,b).rect=this.getRect(ue,ue)},Je(Z,"_freeTextDefaultContent",""),Je(Z,"_internalPadding",0),Je(Z,"_defaultColor",null),Je(Z,"_defaultFontSize",10),Je(Z,"_type","freetext");let _=Z;t.FreeTextEditor=_},(e,t,a)=>{var F,u,ut,V,Un,X,me,B,O,$,de,te,ve,Pe,Se,oe,ae,ne,ce,be,Le,Te,Be,jn,je,Wt,Ge,xi,Qe,Mi,U,Y,Ee,ee,pe,we,ie,Li,ke,Re,Fe,Ve,zn,Oe,Ii;Object.defineProperty(t,"__esModule",{value:!0}),t.StampAnnotationElement=t.InkAnnotationElement=t.FreeTextAnnotationElement=t.AnnotationLayer=void 0;var i=a(1),f=a(6),I=a(3),L=a(30),_=a(31),m=a(32);const n=1e3,c=9,C=new WeakSet;function A($e){return{width:$e[2]-$e[0],height:$e[3]-$e[1]}}class E{static create(ge){switch(ge.data.annotationType){case i.AnnotationType.LINK:return new g(ge);case i.AnnotationType.TEXT:return new b(ge);case i.AnnotationType.WIDGET:switch(ge.data.fieldType){case"Tx":return new R(ge);case"Btn":return ge.data.radioButton?new o(ge):ge.data.checkBox?new T(ge):new l(ge);case"Ch":return new S(ge);case"Sig":return new v(ge)}return new P(ge);case i.AnnotationType.POPUP:return new y(ge);case i.AnnotationType.FREETEXT:return new N(ge);case i.AnnotationType.LINE:return new D(ge);case i.AnnotationType.SQUARE:return new G(ge);case i.AnnotationType.CIRCLE:return new le(ge);case i.AnnotationType.POLYLINE:return new H(ge);case i.AnnotationType.CARET:return new re(ge);case i.AnnotationType.INK:return new Q(ge);case i.AnnotationType.POLYGON:return new Z(ge);case i.AnnotationType.HIGHLIGHT:return new K(ge);case i.AnnotationType.UNDERLINE:return new ue(ge);case i.AnnotationType.SQUIGGLY:return new se(ge);case i.AnnotationType.STRIKEOUT:return new Ce(ge);case i.AnnotationType.STAMP:return new Me(ge);case i.AnnotationType.FILEATTACHMENT:return new q(ge);default:return new r(ge)}}}const d=class d{constructor(ge,{isRenderable:k=!1,ignoreBorder:J=!1,createQuadrilaterals:fe=!1}={}){j(this,F,!1);this.isRenderable=k,this.data=ge.data,this.layer=ge.layer,this.linkService=ge.linkService,this.downloadManager=ge.downloadManager,this.imageResourcesPath=ge.imageResourcesPath,this.renderForms=ge.renderForms,this.svgFactory=ge.svgFactory,this.annotationStorage=ge.annotationStorage,this.enableScripting=ge.enableScripting,this.hasJSActions=ge.hasJSActions,this._fieldObjects=ge.fieldObjects,this.parent=ge.parent,k&&(this.container=this._createContainer(J)),fe&&this._createQuadrilaterals()}static _hasPopupData({titleObj:ge,contentsObj:k,richText:J}){return!!(ge!=null&&ge.str||k!=null&&k.str||J!=null&&J.str)}get hasPopupData(){return d._hasPopupData(this.data)}_createContainer(ge){const{data:k,parent:{page:J,viewport:fe}}=this,ye=document.createElement("section");ye.setAttribute("data-annotation-id",k.id),this instanceof P||(ye.tabIndex=n),ye.style.zIndex=this.parent.zIndex++,this.data.popupRef&&ye.setAttribute("aria-haspopup","dialog"),k.noRotate&&ye.classList.add("norotate");const{pageWidth:Ae,pageHeight:Ie,pageX:De,pageY:ze}=fe.rawDims;if(!k.rect||this instanceof y){const{rotation:Ze}=k;return!k.hasOwnCanvas&&Ze!==0&&this.setRotation(Ze,ye),ye}const{width:He,height:tt}=A(k.rect),Xe=i.Util.normalizeRect([k.rect[0],J.view[3]-k.rect[1]+J.view[1],k.rect[2],J.view[3]-k.rect[3]+J.view[1]]);if(!ge&&k.borderStyle.width>0){ye.style.borderWidth=`${k.borderStyle.width}px`;const Ze=k.borderStyle.horizontalCornerRadius,et=k.borderStyle.verticalCornerRadius;if(Ze>0||et>0){const nt=`calc(${Ze}px * var(--scale-factor)) / calc(${et}px * var(--scale-factor))`;ye.style.borderRadius=nt}else if(this instanceof o){const nt=`calc(${He}px * var(--scale-factor)) / calc(${tt}px * var(--scale-factor))`;ye.style.borderRadius=nt}switch(k.borderStyle.style){case i.AnnotationBorderStyleType.SOLID:ye.style.borderStyle="solid";break;case i.AnnotationBorderStyleType.DASHED:ye.style.borderStyle="dashed";break;case i.AnnotationBorderStyleType.BEVELED:(0,i.warn)("Unimplemented border style: beveled");break;case i.AnnotationBorderStyleType.INSET:(0,i.warn)("Unimplemented border style: inset");break;case i.AnnotationBorderStyleType.UNDERLINE:ye.style.borderBottomStyle="solid";break}const it=k.borderColor||null;it?(he(this,F,!0),ye.style.borderColor=i.Util.makeHexColor(it[0]|0,it[1]|0,it[2]|0)):ye.style.borderWidth=0}ye.style.left=`${100*(Xe[0]-De)/Ae}%`,ye.style.top=`${100*(Xe[1]-ze)/Ie}%`;const{rotation:Ke}=k;return k.hasOwnCanvas||Ke===0?(ye.style.width=`${100*He/Ae}%`,ye.style.height=`${100*tt/Ie}%`):this.setRotation(Ke,ye),ye}setRotation(ge,k=this.container){if(!this.data.rect)return;const{pageWidth:J,pageHeight:fe}=this.parent.viewport.rawDims,{width:ye,height:Ae}=A(this.data.rect);let Ie,De;ge%180===0?(Ie=100*ye/J,De=100*Ae/fe):(Ie=100*Ae/J,De=100*ye/fe),k.style.width=`${Ie}%`,k.style.height=`${De}%`,k.setAttribute("data-main-rotation",(360-ge)%360)}get _commonActions(){const ge=(k,J,fe)=>{const ye=fe.detail[k],Ae=ye[0],Ie=ye.slice(1);fe.target.style[J]=L.ColorConverters[`${Ae}_HTML`](Ie),this.annotationStorage.setValue(this.data.id,{[J]:L.ColorConverters[`${Ae}_rgb`](Ie)})};return(0,i.shadow)(this,"_commonActions",{display:k=>{const{display:J}=k.detail,fe=J%2===1;this.container.style.visibility=fe?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:fe,noPrint:J===1||J===2})},print:k=>{this.annotationStorage.setValue(this.data.id,{noPrint:!k.detail.print})},hidden:k=>{const{hidden:J}=k.detail;this.container.style.visibility=J?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:J,noView:J})},focus:k=>{setTimeout(()=>k.target.focus({preventScroll:!1}),0)},userName:k=>{k.target.title=k.detail.userName},readonly:k=>{k.target.disabled=k.detail.readonly},required:k=>{this._setRequired(k.target,k.detail.required)},bgColor:k=>{ge("bgColor","backgroundColor",k)},fillColor:k=>{ge("fillColor","backgroundColor",k)},fgColor:k=>{ge("fgColor","color",k)},textColor:k=>{ge("textColor","color",k)},borderColor:k=>{ge("borderColor","borderColor",k)},strokeColor:k=>{ge("strokeColor","borderColor",k)},rotation:k=>{const J=k.detail.rotation;this.setRotation(J),this.annotationStorage.setValue(this.data.id,{rotation:J})}})}_dispatchEventFromSandbox(ge,k){const J=this._commonActions;for(const fe of Object.keys(k.detail)){const ye=ge[fe]||J[fe];ye==null||ye(k)}}_setDefaultPropertiesFromJS(ge){if(!this.enableScripting)return;const k=this.annotationStorage.getRawValue(this.data.id);if(!k)return;const J=this._commonActions;for(const[fe,ye]of Object.entries(k)){const Ae=J[fe];if(Ae){const Ie={detail:{[fe]:ye},target:ge};Ae(Ie),delete k[fe]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:ge}=this.data;if(!ge)return;const[k,J,fe,ye]=this.data.rect;if(ge.length===1){const[,{x:et,y:it},{x:nt,y:rt}]=ge[0];if(fe===et&&ye===it&&k===nt&&J===rt)return}const{style:Ae}=this.container;let Ie;if(s(this,F)){const{borderColor:et,borderWidth:it}=Ae;Ae.borderWidth=0,Ie=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${et}" stroke-width="${it}">`],this.container.classList.add("hasBorder")}const De=fe-k,ze=ye-J,{svgFactory:He}=this,tt=He.createElement("svg");tt.classList.add("quadrilateralsContainer"),tt.setAttribute("width",0),tt.setAttribute("height",0);const Xe=He.createElement("defs");tt.append(Xe);const Ke=He.createElement("clipPath"),Ze=`clippath_${this.data.id}`;Ke.setAttribute("id",Ze),Ke.setAttribute("clipPathUnits","objectBoundingBox"),Xe.append(Ke);for(const[,{x:et,y:it},{x:nt,y:rt}]of ge){const st=He.createElement("rect"),at=(nt-k)/De,dt=(ye-it)/ze,ht=(et-nt)/De,Pn=(it-rt)/ze;st.setAttribute("x",at),st.setAttribute("y",dt),st.setAttribute("width",ht),st.setAttribute("height",Pn),Ke.append(st),Ie==null||Ie.push(`<rect vector-effect="non-scaling-stroke" x="${at}" y="${dt}" width="${ht}" height="${Pn}"/>`)}s(this,F)&&(Ie.push("</g></svg>')"),Ae.backgroundImage=Ie.join("")),this.container.append(tt),this.container.style.clipPath=`url(#${Ze})`}_createPopup(){const{container:ge,data:k}=this;ge.setAttribute("aria-haspopup","dialog");const J=new y({data:{color:k.color,titleObj:k.titleObj,modificationDate:k.modificationDate,contentsObj:k.contentsObj,richText:k.richText,parentRect:k.rect,borderStyle:0,id:`popup_${k.id}`,rotation:k.rotation},parent:this.parent,elements:[this]});this.parent.div.append(J.render())}render(){(0,i.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(ge,k=null){const J=[];if(this._fieldObjects){const fe=this._fieldObjects[ge];if(fe)for(const{page:ye,id:Ae,exportValues:Ie}of fe){if(ye===-1||Ae===k)continue;const De=typeof Ie=="string"?Ie:null,ze=document.querySelector(`[data-element-id="${Ae}"]`);if(ze&&!C.has(ze)){(0,i.warn)(`_getElementsByName - element not allowed: ${Ae}`);continue}J.push({id:Ae,exportValue:De,domElement:ze})}return J}for(const fe of document.getElementsByName(ge)){const{exportValue:ye}=fe,Ae=fe.getAttribute("data-element-id");Ae!==k&&C.has(fe)&&J.push({id:Ae,exportValue:ye,domElement:fe})}return J}show(){var ge;this.container&&(this.container.hidden=!1),(ge=this.popup)==null||ge.maybeShow()}hide(){var ge;this.container&&(this.container.hidden=!0),(ge=this.popup)==null||ge.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const ge=this.getElementsToTriggerPopup();if(Array.isArray(ge))for(const k of ge)k.classList.add("highlightArea");else ge.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:ge,data:{id:k}}=this;this.container.addEventListener("dblclick",()=>{var J;(J=this.linkService.eventBus)==null||J.dispatch("switchannotationeditormode",{source:this,mode:ge,editId:k})})}};F=new WeakMap;let r=d;class g extends r{constructor(k,J=null){super(k,{isRenderable:!0,ignoreBorder:!!(J!=null&&J.ignoreBorder),createQuadrilaterals:!0});j(this,u);j(this,V);this.isTooltipOnly=k.data.isTooltipOnly}render(){const{data:k,linkService:J}=this,fe=document.createElement("a");fe.setAttribute("data-element-id",k.id);let ye=!1;return k.url?(J.addLinkAttributes(fe,k.url,k.newWindow),ye=!0):k.action?(this._bindNamedAction(fe,k.action),ye=!0):k.attachment?(this._bindAttachment(fe,k.attachment),ye=!0):k.setOCGState?(z(this,V,Un).call(this,fe,k.setOCGState),ye=!0):k.dest?(this._bindLink(fe,k.dest),ye=!0):(k.actions&&(k.actions.Action||k.actions["Mouse Up"]||k.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(fe,k),ye=!0),k.resetForm?(this._bindResetFormAction(fe,k.resetForm),ye=!0):this.isTooltipOnly&&!ye&&(this._bindLink(fe,""),ye=!0)),this.container.classList.add("linkAnnotation"),ye&&this.container.append(fe),this.container}_bindLink(k,J){k.href=this.linkService.getDestinationHash(J),k.onclick=()=>(J&&this.linkService.goToDestination(J),!1),(J||J==="")&&z(this,u,ut).call(this)}_bindNamedAction(k,J){k.href=this.linkService.getAnchorUrl(""),k.onclick=()=>(this.linkService.executeNamedAction(J),!1),z(this,u,ut).call(this)}_bindAttachment(k,J){k.href=this.linkService.getAnchorUrl(""),k.onclick=()=>{var fe;return(fe=this.downloadManager)==null||fe.openOrDownloadData(this.container,J.content,J.filename),!1},z(this,u,ut).call(this)}_bindJSAction(k,J){k.href=this.linkService.getAnchorUrl("");const fe=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const ye of Object.keys(J.actions)){const Ae=fe.get(ye);Ae&&(k[Ae]=()=>{var Ie;return(Ie=this.linkService.eventBus)==null||Ie.dispatch("dispatcheventinsandbox",{source:this,detail:{id:J.id,name:ye}}),!1})}k.onclick||(k.onclick=()=>!1),z(this,u,ut).call(this)}_bindResetFormAction(k,J){const fe=k.onclick;if(fe||(k.href=this.linkService.getAnchorUrl("")),z(this,u,ut).call(this),!this._fieldObjects){(0,i.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),fe||(k.onclick=()=>!1);return}k.onclick=()=>{var tt;fe==null||fe();const{fields:ye,refs:Ae,include:Ie}=J,De=[];if(ye.length!==0||Ae.length!==0){const Xe=new Set(Ae);for(const Ke of ye){const Ze=this._fieldObjects[Ke]||[];for(const{id:et}of Ze)Xe.add(et)}for(const Ke of Object.values(this._fieldObjects))for(const Ze of Ke)Xe.has(Ze.id)===Ie&&De.push(Ze)}else for(const Xe of Object.values(this._fieldObjects))De.push(...Xe);const ze=this.annotationStorage,He=[];for(const Xe of De){const{id:Ke}=Xe;switch(He.push(Ke),Xe.type){case"text":{const et=Xe.defaultValue||"";ze.setValue(Ke,{value:et});break}case"checkbox":case"radiobutton":{const et=Xe.defaultValue===Xe.exportValues;ze.setValue(Ke,{value:et});break}case"combobox":case"listbox":{const et=Xe.defaultValue||"";ze.setValue(Ke,{value:et});break}default:continue}const Ze=document.querySelector(`[data-element-id="${Ke}"]`);if(Ze){if(!C.has(Ze)){(0,i.warn)(`_bindResetFormAction - element not allowed: ${Ke}`);continue}}else continue;Ze.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((tt=this.linkService.eventBus)==null||tt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:He,name:"ResetForm"}})),!1}}}u=new WeakSet,ut=function(){this.container.setAttribute("data-internal-link","")},V=new WeakSet,Un=function(k,J){k.href=this.linkService.getAnchorUrl(""),k.onclick=()=>(this.linkService.executeSetOCGState(J),!1),z(this,u,ut).call(this)};class b extends r{constructor(ge){super(ge,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const ge=document.createElement("img");return ge.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",ge.alt="[{{type}} Annotation]",ge.dataset.l10nId="text_annotation_type",ge.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(ge),this.container}}class P extends r{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(ge){var k;this.data.hasOwnCanvas&&(((k=ge.previousSibling)==null?void 0:k.nodeName)==="CANVAS"&&(ge.previousSibling.hidden=!0),ge.hidden=!1)}_getKeyModifier(ge){const{isWin:k,isMac:J}=i.FeatureTest.platform;return k&&ge.ctrlKey||J&&ge.metaKey}_setEventListener(ge,k,J,fe,ye){J.includes("mouse")?ge.addEventListener(J,Ae=>{var Ie;(Ie=this.linkService.eventBus)==null||Ie.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:fe,value:ye(Ae),shift:Ae.shiftKey,modifier:this._getKeyModifier(Ae)}})}):ge.addEventListener(J,Ae=>{var Ie;if(J==="blur"){if(!k.focused||!Ae.relatedTarget)return;k.focused=!1}else if(J==="focus"){if(k.focused)return;k.focused=!0}ye&&((Ie=this.linkService.eventBus)==null||Ie.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:fe,value:ye(Ae)}}))})}_setEventListeners(ge,k,J,fe){var ye,Ae,Ie;for(const[De,ze]of J)(ze==="Action"||(ye=this.data.actions)!=null&&ye[ze])&&((ze==="Focus"||ze==="Blur")&&(k||(k={focused:!1})),this._setEventListener(ge,k,De,ze,fe),ze==="Focus"&&!((Ae=this.data.actions)!=null&&Ae.Blur)?this._setEventListener(ge,k,"blur","Blur",null):ze==="Blur"&&!((Ie=this.data.actions)!=null&&Ie.Focus)&&this._setEventListener(ge,k,"focus","Focus",null))}_setBackgroundColor(ge){const k=this.data.backgroundColor||null;ge.style.backgroundColor=k===null?"transparent":i.Util.makeHexColor(k[0],k[1],k[2])}_setTextStyle(ge){const k=["left","center","right"],{fontColor:J}=this.data.defaultAppearanceData,fe=this.data.defaultAppearanceData.fontSize||c,ye=ge.style;let Ae;const Ie=2,De=ze=>Math.round(10*ze)/10;if(this.data.multiLine){const ze=Math.abs(this.data.rect[3]-this.data.rect[1]-Ie),He=Math.round(ze/(i.LINE_FACTOR*fe))||1,tt=ze/He;Ae=Math.min(fe,De(tt/i.LINE_FACTOR))}else{const ze=Math.abs(this.data.rect[3]-this.data.rect[1]-Ie);Ae=Math.min(fe,De(ze/i.LINE_FACTOR))}ye.fontSize=`calc(${Ae}px * var(--scale-factor))`,ye.color=i.Util.makeHexColor(J[0],J[1],J[2]),this.data.textAlignment!==null&&(ye.textAlign=k[this.data.textAlignment])}_setRequired(ge,k){k?ge.setAttribute("required",!0):ge.removeAttribute("required"),ge.setAttribute("aria-required",k)}}class R extends P{constructor(ge){const k=ge.renderForms||!ge.data.hasAppearance&&!!ge.data.fieldValue;super(ge,{isRenderable:k})}setPropertyOnSiblings(ge,k,J,fe){const ye=this.annotationStorage;for(const Ae of this._getElementsByName(ge.name,ge.id))Ae.domElement&&(Ae.domElement[k]=J),ye.setValue(Ae.id,{[fe]:J})}render(){var fe,ye;const ge=this.annotationStorage,k=this.data.id;this.container.classList.add("textWidgetAnnotation");let J=null;if(this.renderForms){const Ae=ge.getValue(k,{value:this.data.fieldValue});let Ie=Ae.value||"";const De=ge.getValue(k,{charLimit:this.data.maxLen}).charLimit;De&&Ie.length>De&&(Ie=Ie.slice(0,De));let ze=Ae.formattedValue||((fe=this.data.textContent)==null?void 0:fe.join(`
`))||null;ze&&this.data.comb&&(ze=ze.replaceAll(/\s+/g,""));const He={userValue:Ie,formattedValue:ze,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(J=document.createElement("textarea"),J.textContent=ze??Ie,this.data.doNotScroll&&(J.style.overflowY="hidden")):(J=document.createElement("input"),J.type="text",J.setAttribute("value",ze??Ie),this.data.doNotScroll&&(J.style.overflowX="hidden")),this.data.hasOwnCanvas&&(J.hidden=!0),C.add(J),J.setAttribute("data-element-id",k),J.disabled=this.data.readOnly,J.name=this.data.fieldName,J.tabIndex=n,this._setRequired(J,this.data.required),De&&(J.maxLength=De),J.addEventListener("input",Xe=>{ge.setValue(k,{value:Xe.target.value}),this.setPropertyOnSiblings(J,"value",Xe.target.value,"value"),He.formattedValue=null}),J.addEventListener("resetform",Xe=>{const Ke=this.data.defaultFieldValue??"";J.value=He.userValue=Ke,He.formattedValue=null});let tt=Xe=>{const{formattedValue:Ke}=He;Ke!=null&&(Xe.target.value=Ke),Xe.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){J.addEventListener("focus",Ke=>{if(He.focused)return;const{target:Ze}=Ke;He.userValue&&(Ze.value=He.userValue),He.lastCommittedValue=Ze.value,He.commitKey=1,He.focused=!0}),J.addEventListener("updatefromsandbox",Ke=>{this.showElementAndHideCanvas(Ke.target);const Ze={value(et){He.userValue=et.detail.value??"",ge.setValue(k,{value:He.userValue.toString()}),et.target.value=He.userValue},formattedValue(et){const{formattedValue:it}=et.detail;He.formattedValue=it,it!=null&&et.target!==document.activeElement&&(et.target.value=it),ge.setValue(k,{formattedValue:it})},selRange(et){et.target.setSelectionRange(...et.detail.selRange)},charLimit:et=>{var st;const{charLimit:it}=et.detail,{target:nt}=et;if(it===0){nt.removeAttribute("maxLength");return}nt.setAttribute("maxLength",it);let rt=He.userValue;!rt||rt.length<=it||(rt=rt.slice(0,it),nt.value=He.userValue=rt,ge.setValue(k,{value:rt}),(st=this.linkService.eventBus)==null||st.dispatch("dispatcheventinsandbox",{source:this,detail:{id:k,name:"Keystroke",value:rt,willCommit:!0,commitKey:1,selStart:nt.selectionStart,selEnd:nt.selectionEnd}}))}};this._dispatchEventFromSandbox(Ze,Ke)}),J.addEventListener("keydown",Ke=>{var it;He.commitKey=1;let Ze=-1;if(Ke.key==="Escape"?Ze=0:Ke.key==="Enter"&&!this.data.multiLine?Ze=2:Ke.key==="Tab"&&(He.commitKey=3),Ze===-1)return;const{value:et}=Ke.target;He.lastCommittedValue!==et&&(He.lastCommittedValue=et,He.userValue=et,(it=this.linkService.eventBus)==null||it.dispatch("dispatcheventinsandbox",{source:this,detail:{id:k,name:"Keystroke",value:et,willCommit:!0,commitKey:Ze,selStart:Ke.target.selectionStart,selEnd:Ke.target.selectionEnd}}))});const Xe=tt;tt=null,J.addEventListener("blur",Ke=>{var et;if(!He.focused||!Ke.relatedTarget)return;He.focused=!1;const{value:Ze}=Ke.target;He.userValue=Ze,He.lastCommittedValue!==Ze&&((et=this.linkService.eventBus)==null||et.dispatch("dispatcheventinsandbox",{source:this,detail:{id:k,name:"Keystroke",value:Ze,willCommit:!0,commitKey:He.commitKey,selStart:Ke.target.selectionStart,selEnd:Ke.target.selectionEnd}})),Xe(Ke)}),(ye=this.data.actions)!=null&&ye.Keystroke&&J.addEventListener("beforeinput",Ke=>{var dt;He.lastCommittedValue=null;const{data:Ze,target:et}=Ke,{value:it,selectionStart:nt,selectionEnd:rt}=et;let st=nt,at=rt;switch(Ke.inputType){case"deleteWordBackward":{const ht=it.substring(0,nt).match(/\w*[^\w]*$/);ht&&(st-=ht[0].length);break}case"deleteWordForward":{const ht=it.substring(nt).match(/^[^\w]*\w*/);ht&&(at+=ht[0].length);break}case"deleteContentBackward":nt===rt&&(st-=1);break;case"deleteContentForward":nt===rt&&(at+=1);break}Ke.preventDefault(),(dt=this.linkService.eventBus)==null||dt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:k,name:"Keystroke",value:it,change:Ze||"",willCommit:!1,selStart:st,selEnd:at}})}),this._setEventListeners(J,He,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Ke=>Ke.target.value)}if(tt&&J.addEventListener("blur",tt),this.data.comb){const Ke=(this.data.rect[2]-this.data.rect[0])/De;J.classList.add("comb"),J.style.letterSpacing=`calc(${Ke}px * var(--scale-factor) - 1ch)`}}else J=document.createElement("div"),J.textContent=this.data.fieldValue,J.style.verticalAlign="middle",J.style.display="table-cell";return this._setTextStyle(J),this._setBackgroundColor(J),this._setDefaultPropertiesFromJS(J),this.container.append(J),this.container}}class v extends P{constructor(ge){super(ge,{isRenderable:!!ge.data.hasOwnCanvas})}}class T extends P{constructor(ge){super(ge,{isRenderable:ge.renderForms})}render(){const ge=this.annotationStorage,k=this.data,J=k.id;let fe=ge.getValue(J,{value:k.exportValue===k.fieldValue}).value;typeof fe=="string"&&(fe=fe!=="Off",ge.setValue(J,{value:fe})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const ye=document.createElement("input");return C.add(ye),ye.setAttribute("data-element-id",J),ye.disabled=k.readOnly,this._setRequired(ye,this.data.required),ye.type="checkbox",ye.name=k.fieldName,fe&&ye.setAttribute("checked",!0),ye.setAttribute("exportValue",k.exportValue),ye.tabIndex=n,ye.addEventListener("change",Ae=>{const{name:Ie,checked:De}=Ae.target;for(const ze of this._getElementsByName(Ie,J)){const He=De&&ze.exportValue===k.exportValue;ze.domElement&&(ze.domElement.checked=He),ge.setValue(ze.id,{value:He})}ge.setValue(J,{value:De})}),ye.addEventListener("resetform",Ae=>{const Ie=k.defaultFieldValue||"Off";Ae.target.checked=Ie===k.exportValue}),this.enableScripting&&this.hasJSActions&&(ye.addEventListener("updatefromsandbox",Ae=>{const Ie={value(De){De.target.checked=De.detail.value!=="Off",ge.setValue(J,{value:De.target.checked})}};this._dispatchEventFromSandbox(Ie,Ae)}),this._setEventListeners(ye,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Ae=>Ae.target.checked)),this._setBackgroundColor(ye),this._setDefaultPropertiesFromJS(ye),this.container.append(ye),this.container}}class o extends P{constructor(ge){super(ge,{isRenderable:ge.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const ge=this.annotationStorage,k=this.data,J=k.id;let fe=ge.getValue(J,{value:k.fieldValue===k.buttonValue}).value;typeof fe=="string"&&(fe=fe!==k.buttonValue,ge.setValue(J,{value:fe}));const ye=document.createElement("input");if(C.add(ye),ye.setAttribute("data-element-id",J),ye.disabled=k.readOnly,this._setRequired(ye,this.data.required),ye.type="radio",ye.name=k.fieldName,fe&&ye.setAttribute("checked",!0),ye.tabIndex=n,ye.addEventListener("change",Ae=>{const{name:Ie,checked:De}=Ae.target;for(const ze of this._getElementsByName(Ie,J))ge.setValue(ze.id,{value:!1});ge.setValue(J,{value:De})}),ye.addEventListener("resetform",Ae=>{const Ie=k.defaultFieldValue;Ae.target.checked=Ie!=null&&Ie===k.buttonValue}),this.enableScripting&&this.hasJSActions){const Ae=k.buttonValue;ye.addEventListener("updatefromsandbox",Ie=>{const De={value:ze=>{const He=Ae===ze.detail.value;for(const tt of this._getElementsByName(ze.target.name)){const Xe=He&&tt.id===J;tt.domElement&&(tt.domElement.checked=Xe),ge.setValue(tt.id,{value:Xe})}}};this._dispatchEventFromSandbox(De,Ie)}),this._setEventListeners(ye,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Ie=>Ie.target.checked)}return this._setBackgroundColor(ye),this._setDefaultPropertiesFromJS(ye),this.container.append(ye),this.container}}class l extends g{constructor(ge){super(ge,{ignoreBorder:ge.data.hasAppearance})}render(){const ge=super.render();ge.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(ge.title=this.data.alternativeText);const k=ge.lastChild;return this.enableScripting&&this.hasJSActions&&k&&(this._setDefaultPropertiesFromJS(k),k.addEventListener("updatefromsandbox",J=>{this._dispatchEventFromSandbox({},J)})),ge}}class S extends P{constructor(ge){super(ge,{isRenderable:ge.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const ge=this.annotationStorage,k=this.data.id,J=ge.getValue(k,{value:this.data.fieldValue}),fe=document.createElement("select");C.add(fe),fe.setAttribute("data-element-id",k),fe.disabled=this.data.readOnly,this._setRequired(fe,this.data.required),fe.name=this.data.fieldName,fe.tabIndex=n;let ye=this.data.combo&&this.data.options.length>0;this.data.combo||(fe.size=this.data.options.length,this.data.multiSelect&&(fe.multiple=!0)),fe.addEventListener("resetform",He=>{const tt=this.data.defaultFieldValue;for(const Xe of fe.options)Xe.selected=Xe.value===tt});for(const He of this.data.options){const tt=document.createElement("option");tt.textContent=He.displayValue,tt.value=He.exportValue,J.value.includes(He.exportValue)&&(tt.setAttribute("selected",!0),ye=!1),fe.append(tt)}let Ae=null;if(ye){const He=document.createElement("option");He.value=" ",He.setAttribute("hidden",!0),He.setAttribute("selected",!0),fe.prepend(He),Ae=()=>{He.remove(),fe.removeEventListener("input",Ae),Ae=null},fe.addEventListener("input",Ae)}const Ie=He=>{const tt=He?"value":"textContent",{options:Xe,multiple:Ke}=fe;return Ke?Array.prototype.filter.call(Xe,Ze=>Ze.selected).map(Ze=>Ze[tt]):Xe.selectedIndex===-1?null:Xe[Xe.selectedIndex][tt]};let De=Ie(!1);const ze=He=>{const tt=He.target.options;return Array.prototype.map.call(tt,Xe=>({displayValue:Xe.textContent,exportValue:Xe.value}))};return this.enableScripting&&this.hasJSActions?(fe.addEventListener("updatefromsandbox",He=>{const tt={value(Xe){Ae==null||Ae();const Ke=Xe.detail.value,Ze=new Set(Array.isArray(Ke)?Ke:[Ke]);for(const et of fe.options)et.selected=Ze.has(et.value);ge.setValue(k,{value:Ie(!0)}),De=Ie(!1)},multipleSelection(Xe){fe.multiple=!0},remove(Xe){const Ke=fe.options,Ze=Xe.detail.remove;Ke[Ze].selected=!1,fe.remove(Ze),Ke.length>0&&Array.prototype.findIndex.call(Ke,it=>it.selected)===-1&&(Ke[0].selected=!0),ge.setValue(k,{value:Ie(!0),items:ze(Xe)}),De=Ie(!1)},clear(Xe){for(;fe.length!==0;)fe.remove(0);ge.setValue(k,{value:null,items:[]}),De=Ie(!1)},insert(Xe){const{index:Ke,displayValue:Ze,exportValue:et}=Xe.detail.insert,it=fe.children[Ke],nt=document.createElement("option");nt.textContent=Ze,nt.value=et,it?it.before(nt):fe.append(nt),ge.setValue(k,{value:Ie(!0),items:ze(Xe)}),De=Ie(!1)},items(Xe){const{items:Ke}=Xe.detail;for(;fe.length!==0;)fe.remove(0);for(const Ze of Ke){const{displayValue:et,exportValue:it}=Ze,nt=document.createElement("option");nt.textContent=et,nt.value=it,fe.append(nt)}fe.options.length>0&&(fe.options[0].selected=!0),ge.setValue(k,{value:Ie(!0),items:ze(Xe)}),De=Ie(!1)},indices(Xe){const Ke=new Set(Xe.detail.indices);for(const Ze of Xe.target.options)Ze.selected=Ke.has(Ze.index);ge.setValue(k,{value:Ie(!0)}),De=Ie(!1)},editable(Xe){Xe.target.disabled=!Xe.detail.editable}};this._dispatchEventFromSandbox(tt,He)}),fe.addEventListener("input",He=>{var Xe;const tt=Ie(!0);ge.setValue(k,{value:tt}),He.preventDefault(),(Xe=this.linkService.eventBus)==null||Xe.dispatch("dispatcheventinsandbox",{source:this,detail:{id:k,name:"Keystroke",value:De,changeEx:tt,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(fe,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],He=>He.target.value)):fe.addEventListener("input",function(He){ge.setValue(k,{value:Ie(!0)})}),this.data.combo&&this._setTextStyle(fe),this._setBackgroundColor(fe),this._setDefaultPropertiesFromJS(fe),this.container.append(fe),this.container}}class y extends r{constructor(ge){const{data:k,elements:J}=ge;super(ge,{isRenderable:r._hasPopupData(k)}),this.elements=J}render(){this.container.classList.add("popupAnnotation");const ge=new w({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),k=[];for(const J of this.elements)J.popup=ge,k.push(J.data.id),J.addHighlightArea();return this.container.setAttribute("aria-controls",k.map(J=>`${i.AnnotationPrefix}${J}`).join(",")),this.container}}class w{constructor({container:ge,color:k,elements:J,titleObj:fe,modificationDate:ye,contentsObj:Ae,richText:Ie,parent:De,rect:ze,parentRect:He,open:tt}){j(this,Be);j(this,je);j(this,Ge);j(this,Qe);j(this,X,null);j(this,me,z(this,Be,jn).bind(this));j(this,B,z(this,Qe,Mi).bind(this));j(this,O,z(this,Ge,xi).bind(this));j(this,$,z(this,je,Wt).bind(this));j(this,de,null);j(this,te,null);j(this,ve,null);j(this,Pe,null);j(this,Se,null);j(this,oe,null);j(this,ae,!1);j(this,ne,null);j(this,ce,null);j(this,be,null);j(this,Le,null);j(this,Te,!1);var Ke;he(this,te,ge),he(this,Le,fe),he(this,ve,Ae),he(this,be,Ie),he(this,Se,De),he(this,de,k),he(this,ce,ze),he(this,oe,He),he(this,Pe,J);const Xe=f.PDFDateString.toDateObject(ye);Xe&&he(this,X,De.l10n.get("annotation_date_string",{date:Xe.toLocaleDateString(),time:Xe.toLocaleTimeString()})),this.trigger=J.flatMap(Ze=>Ze.getElementsToTriggerPopup());for(const Ze of this.trigger)Ze.addEventListener("click",s(this,$)),Ze.addEventListener("mouseenter",s(this,O)),Ze.addEventListener("mouseleave",s(this,B)),Ze.classList.add("popupTriggerArea");for(const Ze of J)(Ke=Ze.container)==null||Ke.addEventListener("keydown",s(this,me));s(this,te).hidden=!0,tt&&z(this,je,Wt).call(this)}render(){if(s(this,ne))return;const{page:{view:ge},viewport:{rawDims:{pageWidth:k,pageHeight:J,pageX:fe,pageY:ye}}}=s(this,Se),Ae=he(this,ne,document.createElement("div"));if(Ae.className="popup",s(this,de)){const st=Ae.style.outlineColor=i.Util.makeHexColor(...s(this,de));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?Ae.style.backgroundColor=`color-mix(in srgb, ${st} 30%, white)`:Ae.style.backgroundColor=i.Util.makeHexColor(...s(this,de).map(dt=>Math.floor(.7*(255-dt)+dt)))}const Ie=document.createElement("span");Ie.className="header";const De=document.createElement("h1");if(Ie.append(De),{dir:De.dir,str:De.textContent}=s(this,Le),Ae.append(Ie),s(this,X)){const st=document.createElement("span");st.classList.add("popupDate"),s(this,X).then(at=>{st.textContent=at}),Ie.append(st)}const ze=s(this,ve),He=s(this,be);if(He!=null&&He.str&&(!(ze!=null&&ze.str)||ze.str===He.str))m.XfaLayer.render({xfaHtml:He.html,intent:"richText",div:Ae}),Ae.lastChild.classList.add("richText","popupContent");else{const st=this._formatContents(ze);Ae.append(st)}let tt=!!s(this,oe),Xe=tt?s(this,oe):s(this,ce);for(const st of s(this,Pe))if(!Xe||i.Util.intersect(st.data.rect,Xe)!==null){Xe=st.data.rect,tt=!0;break}const Ke=i.Util.normalizeRect([Xe[0],ge[3]-Xe[1]+ge[1],Xe[2],ge[3]-Xe[3]+ge[1]]),Ze=5,et=tt?Xe[2]-Xe[0]+Ze:0,it=Ke[0]+et,nt=Ke[1],{style:rt}=s(this,te);rt.left=`${100*(it-fe)/k}%`,rt.top=`${100*(nt-ye)/J}%`,s(this,te).append(Ae)}_formatContents({str:ge,dir:k}){const J=document.createElement("p");J.classList.add("popupContent"),J.dir=k;const fe=ge.split(/(?:\r\n?|\n)/);for(let ye=0,Ae=fe.length;ye<Ae;++ye){const Ie=fe[ye];J.append(document.createTextNode(Ie)),ye<Ae-1&&J.append(document.createElement("br"))}return J}forceHide(){he(this,Te,this.isVisible),s(this,Te)&&(s(this,te).hidden=!0)}maybeShow(){s(this,Te)&&(he(this,Te,!1),s(this,te).hidden=!1)}get isVisible(){return s(this,te).hidden===!1}}X=new WeakMap,me=new WeakMap,B=new WeakMap,O=new WeakMap,$=new WeakMap,de=new WeakMap,te=new WeakMap,ve=new WeakMap,Pe=new WeakMap,Se=new WeakMap,oe=new WeakMap,ae=new WeakMap,ne=new WeakMap,ce=new WeakMap,be=new WeakMap,Le=new WeakMap,Te=new WeakMap,Be=new WeakSet,jn=function(ge){ge.altKey||ge.shiftKey||ge.ctrlKey||ge.metaKey||(ge.key==="Enter"||ge.key==="Escape"&&s(this,ae))&&z(this,je,Wt).call(this)},je=new WeakSet,Wt=function(){he(this,ae,!s(this,ae)),s(this,ae)?(z(this,Ge,xi).call(this),s(this,te).addEventListener("click",s(this,$)),s(this,te).addEventListener("keydown",s(this,me))):(z(this,Qe,Mi).call(this),s(this,te).removeEventListener("click",s(this,$)),s(this,te).removeEventListener("keydown",s(this,me)))},Ge=new WeakSet,xi=function(){s(this,ne)||this.render(),this.isVisible?s(this,ae)&&s(this,te).classList.add("focused"):(s(this,te).hidden=!1,s(this,te).style.zIndex=parseInt(s(this,te).style.zIndex)+1e3)},Qe=new WeakSet,Mi=function(){s(this,te).classList.remove("focused"),!(s(this,ae)||!this.isVisible)&&(s(this,te).hidden=!0,s(this,te).style.zIndex=parseInt(s(this,te).style.zIndex)-1e3)};class N extends r{constructor(ge){super(ge,{isRenderable:!0,ignoreBorder:!0}),this.textContent=ge.data.textContent,this.textPosition=ge.data.textPosition,this.annotationEditorType=i.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const ge=document.createElement("div");ge.classList.add("annotationTextContent"),ge.setAttribute("role","comment");for(const k of this.textContent){const J=document.createElement("span");J.textContent=k,ge.append(J)}this.container.append(ge)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}t.FreeTextAnnotationElement=N;class D extends r{constructor(k){super(k,{isRenderable:!0,ignoreBorder:!0});j(this,U,null)}render(){this.container.classList.add("lineAnnotation");const k=this.data,{width:J,height:fe}=A(k.rect),ye=this.svgFactory.create(J,fe,!0),Ae=he(this,U,this.svgFactory.createElement("svg:line"));return Ae.setAttribute("x1",k.rect[2]-k.lineCoordinates[0]),Ae.setAttribute("y1",k.rect[3]-k.lineCoordinates[1]),Ae.setAttribute("x2",k.rect[2]-k.lineCoordinates[2]),Ae.setAttribute("y2",k.rect[3]-k.lineCoordinates[3]),Ae.setAttribute("stroke-width",k.borderStyle.width||1),Ae.setAttribute("stroke","transparent"),Ae.setAttribute("fill","transparent"),ye.append(Ae),this.container.append(ye),!k.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return s(this,U)}addHighlightArea(){this.container.classList.add("highlightArea")}}U=new WeakMap;class G extends r{constructor(k){super(k,{isRenderable:!0,ignoreBorder:!0});j(this,Y,null)}render(){this.container.classList.add("squareAnnotation");const k=this.data,{width:J,height:fe}=A(k.rect),ye=this.svgFactory.create(J,fe,!0),Ae=k.borderStyle.width,Ie=he(this,Y,this.svgFactory.createElement("svg:rect"));return Ie.setAttribute("x",Ae/2),Ie.setAttribute("y",Ae/2),Ie.setAttribute("width",J-Ae),Ie.setAttribute("height",fe-Ae),Ie.setAttribute("stroke-width",Ae||1),Ie.setAttribute("stroke","transparent"),Ie.setAttribute("fill","transparent"),ye.append(Ie),this.container.append(ye),!k.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return s(this,Y)}addHighlightArea(){this.container.classList.add("highlightArea")}}Y=new WeakMap;class le extends r{constructor(k){super(k,{isRenderable:!0,ignoreBorder:!0});j(this,Ee,null)}render(){this.container.classList.add("circleAnnotation");const k=this.data,{width:J,height:fe}=A(k.rect),ye=this.svgFactory.create(J,fe,!0),Ae=k.borderStyle.width,Ie=he(this,Ee,this.svgFactory.createElement("svg:ellipse"));return Ie.setAttribute("cx",J/2),Ie.setAttribute("cy",fe/2),Ie.setAttribute("rx",J/2-Ae/2),Ie.setAttribute("ry",fe/2-Ae/2),Ie.setAttribute("stroke-width",Ae||1),Ie.setAttribute("stroke","transparent"),Ie.setAttribute("fill","transparent"),ye.append(Ie),this.container.append(ye),!k.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return s(this,Ee)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ee=new WeakMap;class H extends r{constructor(k){super(k,{isRenderable:!0,ignoreBorder:!0});j(this,ee,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const k=this.data,{width:J,height:fe}=A(k.rect),ye=this.svgFactory.create(J,fe,!0);let Ae=[];for(const De of k.vertices){const ze=De.x-k.rect[0],He=k.rect[3]-De.y;Ae.push(ze+","+He)}Ae=Ae.join(" ");const Ie=he(this,ee,this.svgFactory.createElement(this.svgElementName));return Ie.setAttribute("points",Ae),Ie.setAttribute("stroke-width",k.borderStyle.width||1),Ie.setAttribute("stroke","transparent"),Ie.setAttribute("fill","transparent"),ye.append(Ie),this.container.append(ye),!k.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return s(this,ee)}addHighlightArea(){this.container.classList.add("highlightArea")}}ee=new WeakMap;class Z extends H{constructor(ge){super(ge),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class re extends r{constructor(ge){super(ge,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class Q extends r{constructor(k){super(k,{isRenderable:!0,ignoreBorder:!0});j(this,pe,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=i.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const k=this.data,{width:J,height:fe}=A(k.rect),ye=this.svgFactory.create(J,fe,!0);for(const Ae of k.inkLists){let Ie=[];for(const ze of Ae){const He=ze.x-k.rect[0],tt=k.rect[3]-ze.y;Ie.push(`${He},${tt}`)}Ie=Ie.join(" ");const De=this.svgFactory.createElement(this.svgElementName);s(this,pe).push(De),De.setAttribute("points",Ie),De.setAttribute("stroke-width",k.borderStyle.width||1),De.setAttribute("stroke","transparent"),De.setAttribute("fill","transparent"),!k.popupRef&&this.hasPopupData&&this._createPopup(),ye.append(De)}return this.container.append(ye),this.container}getElementsToTriggerPopup(){return s(this,pe)}addHighlightArea(){this.container.classList.add("highlightArea")}}pe=new WeakMap,t.InkAnnotationElement=Q;class K extends r{constructor(ge){super(ge,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class ue extends r{constructor(ge){super(ge,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class se extends r{constructor(ge){super(ge,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class Ce extends r{constructor(ge){super(ge,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class Me extends r{constructor(ge){super(ge,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}t.StampAnnotationElement=Me;class q extends r{constructor(k){var ye;super(k,{isRenderable:!0});j(this,ie);j(this,we,null);const{filename:J,content:fe}=this.data.file;this.filename=(0,f.getFilenameFromUrl)(J,!0),this.content=fe,(ye=this.linkService.eventBus)==null||ye.dispatch("fileattachmentannotation",{source:this,filename:J,content:fe})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:k,data:J}=this;let fe;J.hasAppearance||J.fillAlpha===0?fe=document.createElement("div"):(fe=document.createElement("img"),fe.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(J.name)?"paperclip":"pushpin"}.svg`,J.fillAlpha&&J.fillAlpha<1&&(fe.style=`filter: opacity(${Math.round(J.fillAlpha*100)}%);`)),fe.addEventListener("dblclick",z(this,ie,Li).bind(this)),he(this,we,fe);const{isMac:ye}=i.FeatureTest.platform;return k.addEventListener("keydown",Ae=>{Ae.key==="Enter"&&(ye?Ae.metaKey:Ae.ctrlKey)&&z(this,ie,Li).call(this)}),!J.popupRef&&this.hasPopupData?this._createPopup():fe.classList.add("popupTriggerArea"),k.append(fe),k}getElementsToTriggerPopup(){return s(this,we)}addHighlightArea(){this.container.classList.add("highlightArea")}}we=new WeakMap,ie=new WeakSet,Li=function(){var k;(k=this.downloadManager)==null||k.openOrDownloadData(this.container,this.content,this.filename)};class M{constructor({div:ge,accessibilityManager:k,annotationCanvasMap:J,l10n:fe,page:ye,viewport:Ae}){j(this,Ve);j(this,Oe);j(this,ke,null);j(this,Re,null);j(this,Fe,new Map);this.div=ge,he(this,ke,k),he(this,Re,J),this.l10n=fe,this.page=ye,this.viewport=Ae,this.zIndex=0,this.l10n||(this.l10n=_.NullL10n)}async render(ge){const{annotations:k}=ge,J=this.div;(0,f.setLayerDimensions)(J,this.viewport);const fe=new Map,ye={data:null,layer:J,linkService:ge.linkService,downloadManager:ge.downloadManager,imageResourcesPath:ge.imageResourcesPath||"",renderForms:ge.renderForms!==!1,svgFactory:new f.DOMSVGFactory,annotationStorage:ge.annotationStorage||new I.AnnotationStorage,enableScripting:ge.enableScripting===!0,hasJSActions:ge.hasJSActions,fieldObjects:ge.fieldObjects,parent:this,elements:null};for(const Ae of k){if(Ae.noHTML)continue;const Ie=Ae.annotationType===i.AnnotationType.POPUP;if(Ie){const He=fe.get(Ae.id);if(!He)continue;ye.elements=He}else{const{width:He,height:tt}=A(Ae.rect);if(He<=0||tt<=0)continue}ye.data=Ae;const De=E.create(ye);if(!De.isRenderable)continue;if(!Ie&&Ae.popupRef){const He=fe.get(Ae.popupRef);He?He.push(De):fe.set(Ae.popupRef,[De])}De.annotationEditorType>0&&s(this,Fe).set(De.data.id,De);const ze=De.render();Ae.hidden&&(ze.style.visibility="hidden"),z(this,Ve,zn).call(this,ze,Ae.id)}z(this,Oe,Ii).call(this),await this.l10n.translate(J)}update({viewport:ge}){const k=this.div;this.viewport=ge,(0,f.setLayerDimensions)(k,{rotation:ge.rotation}),z(this,Oe,Ii).call(this),k.hidden=!1}getEditableAnnotations(){return Array.from(s(this,Fe).values())}getEditableAnnotation(ge){return s(this,Fe).get(ge)}}ke=new WeakMap,Re=new WeakMap,Fe=new WeakMap,Ve=new WeakSet,zn=function(ge,k){var fe;const J=ge.firstChild||ge;J.id=`${i.AnnotationPrefix}${k}`,this.div.append(ge),(fe=s(this,ke))==null||fe.moveElementInDOM(this.div,ge,J,!1)},Oe=new WeakSet,Ii=function(){if(!s(this,Re))return;const ge=this.div;for(const[k,J]of s(this,Re)){const fe=ge.querySelector(`[data-annotation-id="${k}"]`);if(!fe)continue;const{firstChild:ye}=fe;ye?ye.nodeName==="CANVAS"?ye.replaceWith(J):ye.before(J):fe.append(J)}s(this,Re).clear()},t.AnnotationLayer=M},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ColorConverters=void 0;function a(I){return Math.floor(Math.max(0,Math.min(1,I))*255).toString(16).padStart(2,"0")}function i(I){return Math.max(0,Math.min(255,255*I))}class f{static CMYK_G([L,_,m,n]){return["G",1-Math.min(1,.3*L+.59*m+.11*_+n)]}static G_CMYK([L]){return["CMYK",0,0,0,1-L]}static G_RGB([L]){return["RGB",L,L,L]}static G_rgb([L]){return L=i(L),[L,L,L]}static G_HTML([L]){const _=a(L);return`#${_}${_}${_}`}static RGB_G([L,_,m]){return["G",.3*L+.59*_+.11*m]}static RGB_rgb(L){return L.map(i)}static RGB_HTML(L){return`#${L.map(a).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([L,_,m,n]){return["RGB",1-Math.min(1,L+n),1-Math.min(1,m+n),1-Math.min(1,_+n)]}static CMYK_rgb([L,_,m,n]){return[i(1-Math.min(1,L+n)),i(1-Math.min(1,m+n)),i(1-Math.min(1,_+n))]}static CMYK_HTML(L){const _=this.CMYK_RGB(L).slice(1);return this.RGB_HTML(_)}static RGB_CMYK([L,_,m]){const n=1-L,c=1-_,C=1-m,A=Math.min(n,c,C);return["CMYK",n,c,C,A]}}t.ColorConverters=f},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NullL10n=void 0,t.getL10nFallback=i;const a={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}}  {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}}  {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};a.print_progress_percent="{{progress}}%";function i(L,_){switch(L){case"find_match_count":L=`find_match_count[${_.total===1?"one":"other"}]`;break;case"find_match_count_limit":L=`find_match_count_limit[${_.limit===1?"one":"other"}]`;break}return a[L]||""}function f(L,_){return _?L.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(m,n)=>n in _?_[n]:"{{"+n+"}}"):L}const I={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(L,_=null,m=i(L,_)){return f(m,_)},async translate(L){}};t.NullL10n=I},(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.XfaLayer=void 0;var i=a(25);class f{static setupStorage(L,_,m,n,c){const C=n.getValue(_,{value:null});switch(m.name){case"textarea":if(C.value!==null&&(L.textContent=C.value),c==="print")break;L.addEventListener("input",A=>{n.setValue(_,{value:A.target.value})});break;case"input":if(m.attributes.type==="radio"||m.attributes.type==="checkbox"){if(C.value===m.attributes.xfaOn?L.setAttribute("checked",!0):C.value===m.attributes.xfaOff&&L.removeAttribute("checked"),c==="print")break;L.addEventListener("change",A=>{n.setValue(_,{value:A.target.checked?A.target.getAttribute("xfaOn"):A.target.getAttribute("xfaOff")})})}else{if(C.value!==null&&L.setAttribute("value",C.value),c==="print")break;L.addEventListener("input",A=>{n.setValue(_,{value:A.target.value})})}break;case"select":if(C.value!==null){L.setAttribute("value",C.value);for(const A of m.children)A.attributes.value===C.value?A.attributes.selected=!0:A.attributes.hasOwnProperty("selected")&&delete A.attributes.selected}L.addEventListener("input",A=>{const E=A.target.options,r=E.selectedIndex===-1?"":E[E.selectedIndex].value;n.setValue(_,{value:r})});break}}static setAttributes({html:L,element:_,storage:m=null,intent:n,linkService:c}){const{attributes:C}=_,A=L instanceof HTMLAnchorElement;C.type==="radio"&&(C.name=`${C.name}-${n}`);for(const[E,r]of Object.entries(C))if(r!=null)switch(E){case"class":r.length&&L.setAttribute(E,r.join(" "));break;case"dataId":break;case"id":L.setAttribute("data-element-id",r);break;case"style":Object.assign(L.style,r);break;case"textContent":L.textContent=r;break;default:(!A||E!=="href"&&E!=="newWindow")&&L.setAttribute(E,r)}A&&c.addLinkAttributes(L,C.href,C.newWindow),m&&C.dataId&&this.setupStorage(L,C.dataId,_,m)}static render(L){var g;const _=L.annotationStorage,m=L.linkService,n=L.xfaHtml,c=L.intent||"display",C=document.createElement(n.name);n.attributes&&this.setAttributes({html:C,element:n,intent:c,linkService:m});const A=[[n,-1,C]],E=L.div;if(E.append(C),L.viewport){const b=`matrix(${L.viewport.transform.join(",")})`;E.style.transform=b}c!=="richText"&&E.setAttribute("class","xfaLayer xfaFont");const r=[];for(;A.length>0;){const[b,P,R]=A.at(-1);if(P+1===b.children.length){A.pop();continue}const v=b.children[++A.at(-1)[1]];if(v===null)continue;const{name:T}=v;if(T==="#text"){const l=document.createTextNode(v.value);r.push(l),R.append(l);continue}const o=(g=v==null?void 0:v.attributes)!=null&&g.xmlns?document.createElementNS(v.attributes.xmlns,T):document.createElement(T);if(R.append(o),v.attributes&&this.setAttributes({html:o,element:v,storage:_,intent:c,linkService:m}),v.children&&v.children.length>0)A.push([v,-1,o]);else if(v.value){const l=document.createTextNode(v.value);i.XfaText.shouldBuildText(T)&&r.push(l),o.append(l)}}for(const b of E.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))b.setAttribute("readOnly",!0);return{textDivs:r}}static update(L){const _=`matrix(${L.viewport.transform.join(",")})`;L.div.style.transform=_,L.div.hidden=!1}}t.XfaLayer=f},(e,t,a)=>{var n,c,C,A,E,r,g,b,P,R,v,T,o,l,S,Wn,w,$n,D,Gn,le,qn,Z,ki,Q,Xn,ue,Oi,Ce,Kn,q,Yn,F,Zn,u,Jn,V,Qn,X,lt,B,Fi,$,$t,te,Gt,Pe,bt,oe,Ni,ne,qt,be,es,Te,Di,Ne,ts,Ue,is,qe,Bi,xe,Xt,Y,_t;Object.defineProperty(t,"__esModule",{value:!0}),t.InkEditor=void 0;var i=a(1),f=a(4),I=a(29),L=a(6),_=a(5);const ee=class ee extends f.AnnotationEditor{constructor(ie){super({...ie,name:"inkEditor"});j(this,S);j(this,w);j(this,D);j(this,le);j(this,Z);j(this,Q);j(this,ue);j(this,Ce);j(this,q);j(this,F);j(this,u);j(this,V);j(this,X);j(this,B);j(this,$);j(this,te);j(this,Pe);j(this,oe);j(this,ne);j(this,Ue);j(this,qe);j(this,xe);j(this,Y);j(this,n,0);j(this,c,0);j(this,C,this.canvasPointermove.bind(this));j(this,A,this.canvasPointerleave.bind(this));j(this,E,this.canvasPointerup.bind(this));j(this,r,this.canvasPointerdown.bind(this));j(this,g,new Path2D);j(this,b,!1);j(this,P,!1);j(this,R,!1);j(this,v,null);j(this,T,0);j(this,o,0);j(this,l,null);this.color=ie.color||null,this.thickness=ie.thickness||null,this.opacity=ie.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(ie){f.AnnotationEditor.initialize(ie,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(ie,_e){switch(ie){case i.AnnotationEditorParamsType.INK_THICKNESS:ee._defaultThickness=_e;break;case i.AnnotationEditorParamsType.INK_COLOR:ee._defaultColor=_e;break;case i.AnnotationEditorParamsType.INK_OPACITY:ee._defaultOpacity=_e/100;break}}updateParams(ie,_e){switch(ie){case i.AnnotationEditorParamsType.INK_THICKNESS:z(this,S,Wn).call(this,_e);break;case i.AnnotationEditorParamsType.INK_COLOR:z(this,w,$n).call(this,_e);break;case i.AnnotationEditorParamsType.INK_OPACITY:z(this,D,Gn).call(this,_e);break}}static get defaultPropertiesToUpdate(){return[[i.AnnotationEditorParamsType.INK_THICKNESS,ee._defaultThickness],[i.AnnotationEditorParamsType.INK_COLOR,ee._defaultColor||f.AnnotationEditor._defaultLineColor],[i.AnnotationEditorParamsType.INK_OPACITY,Math.round(ee._defaultOpacity*100)]]}get propertiesToUpdate(){return[[i.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||ee._defaultThickness],[i.AnnotationEditorParamsType.INK_COLOR,this.color||ee._defaultColor||f.AnnotationEditor._defaultLineColor],[i.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??ee._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(z(this,$,$t).call(this),z(this,te,Gt).call(this)),this.isAttachedToDOM||(this.parent.add(this),z(this,Pe,bt).call(this)),z(this,Y,_t).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,s(this,v).disconnect(),he(this,v,null),super.remove())}setParent(ie){!this.parent&&ie?this._uiManager.removeShouldRescale(this):this.parent&&ie===null&&this._uiManager.addShouldRescale(this),super.setParent(ie)}onScaleChanging(){const[ie,_e]=this.parentDimensions,ke=this.width*ie,Re=this.height*_e;this.setDimensions(ke,Re)}enableEditMode(){s(this,b)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",s(this,r)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",s(this,r)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){s(this,b)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),he(this,b,!0),this.div.classList.add("disabled"),z(this,Y,_t).call(this,!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(ie){this._focusEventsAllowed&&(super.focusin(ie),this.enableEditMode())}canvasPointerdown(ie){ie.button!==0||!this.isInEditMode()||s(this,b)||(this.setInForeground(),ie.preventDefault(),ie.type!=="mouse"&&this.div.focus(),z(this,Q,Xn).call(this,ie.offsetX,ie.offsetY))}canvasPointermove(ie){ie.preventDefault(),z(this,ue,Oi).call(this,ie.offsetX,ie.offsetY)}canvasPointerup(ie){ie.preventDefault(),z(this,B,Fi).call(this,ie)}canvasPointerleave(ie){z(this,B,Fi).call(this,ie)}get isResizable(){return!this.isEmpty()&&s(this,b)}render(){if(this.div)return this.div;let ie,_e;this.width&&(ie=this.x,_e=this.y),super.render(),f.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(We=>{var Oe;return(Oe=this.div)==null?void 0:Oe.setAttribute("aria-label",We)});const[ke,Re,Fe,Ve]=z(this,le,qn).call(this);if(this.setAt(ke,Re,0,0),this.setDims(Fe,Ve),z(this,$,$t).call(this),this.width){const[We,Oe]=this.parentDimensions;this.setAspectRatio(this.width*We,this.height*Oe),this.setAt(ie*We,_e*Oe,this.width*We,this.height*Oe),he(this,R,!0),z(this,Pe,bt).call(this),this.setDims(this.width*We,this.height*Oe),z(this,X,lt).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return z(this,te,Gt).call(this),this.div}setDimensions(ie,_e){const ke=Math.round(ie),Re=Math.round(_e);if(s(this,T)===ke&&s(this,o)===Re)return;he(this,T,ke),he(this,o,Re),this.canvas.style.visibility="hidden";const[Fe,Ve]=this.parentDimensions;this.width=ie/Fe,this.height=_e/Ve,this.fixAndSetPosition(),s(this,b)&&z(this,oe,Ni).call(this,ie,_e),z(this,Pe,bt).call(this),z(this,X,lt).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(ie,_e,ke){var ye,Ae,Ie;if(ie instanceof I.InkAnnotationElement)return null;const Re=super.deserialize(ie,_e,ke);Re.thickness=ie.thickness,Re.color=i.Util.makeHexColor(...ie.color),Re.opacity=ie.opacity;const[Fe,Ve]=Re.pageDimensions,We=Re.width*Fe,Oe=Re.height*Ve,Ye=Re.parentScale,$e=ie.thickness/2;he(Re,b,!0),he(Re,T,Math.round(We)),he(Re,o,Math.round(Oe));const{paths:ge,rect:k,rotation:J}=ie;for(let{bezier:De}of ge){De=z(ye=ee,Ne,ts).call(ye,De,k,J);const ze=[];Re.paths.push(ze);let He=Ye*(De[0]-$e),tt=Ye*(De[1]-$e);for(let Ke=2,Ze=De.length;Ke<Ze;Ke+=6){const et=Ye*(De[Ke]-$e),it=Ye*(De[Ke+1]-$e),nt=Ye*(De[Ke+2]-$e),rt=Ye*(De[Ke+3]-$e),st=Ye*(De[Ke+4]-$e),at=Ye*(De[Ke+5]-$e);ze.push([[He,tt],[et,it],[nt,rt],[st,at]]),He=st,tt=at}const Xe=z(this,be,es).call(this,ze);Re.bezierPath2D.push(Xe)}const fe=z(Ae=Re,qe,Bi).call(Ae);return he(Re,c,Math.max(f.AnnotationEditor.MIN_SIZE,fe[2]-fe[0])),he(Re,n,Math.max(f.AnnotationEditor.MIN_SIZE,fe[3]-fe[1])),z(Ie=Re,oe,Ni).call(Ie,We,Oe),Re}serialize(){if(this.isEmpty())return null;const ie=this.getRect(0,0),_e=f.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:i.AnnotationEditorType.INK,color:_e,thickness:this.thickness,opacity:this.opacity,paths:z(this,Ue,is).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,ie),pageIndex:this.pageIndex,rect:ie,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};n=new WeakMap,c=new WeakMap,C=new WeakMap,A=new WeakMap,E=new WeakMap,r=new WeakMap,g=new WeakMap,b=new WeakMap,P=new WeakMap,R=new WeakMap,v=new WeakMap,T=new WeakMap,o=new WeakMap,l=new WeakMap,S=new WeakSet,Wn=function(ie){const _e=this.thickness;this.addCommands({cmd:()=>{this.thickness=ie,z(this,Y,_t).call(this)},undo:()=>{this.thickness=_e,z(this,Y,_t).call(this)},mustExec:!0,type:i.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},w=new WeakSet,$n=function(ie){const _e=this.color;this.addCommands({cmd:()=>{this.color=ie,z(this,X,lt).call(this)},undo:()=>{this.color=_e,z(this,X,lt).call(this)},mustExec:!0,type:i.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},D=new WeakSet,Gn=function(ie){ie/=100;const _e=this.opacity;this.addCommands({cmd:()=>{this.opacity=ie,z(this,X,lt).call(this)},undo:()=>{this.opacity=_e,z(this,X,lt).call(this)},mustExec:!0,type:i.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},le=new WeakSet,qn=function(){const{parentRotation:ie,parentDimensions:[_e,ke]}=this;switch(ie){case 90:return[0,ke,ke,_e];case 180:return[_e,ke,_e,ke];case 270:return[_e,0,ke,_e];default:return[0,0,_e,ke]}},Z=new WeakSet,ki=function(){const{ctx:ie,color:_e,opacity:ke,thickness:Re,parentScale:Fe,scaleFactor:Ve}=this;ie.lineWidth=Re*Fe/Ve,ie.lineCap="round",ie.lineJoin="round",ie.miterLimit=10,ie.strokeStyle=`${_e}${(0,_.opacityToHex)(ke)}`},Q=new WeakSet,Xn=function(ie,_e){this.canvas.addEventListener("contextmenu",L.noContextMenu),this.canvas.addEventListener("pointerleave",s(this,A)),this.canvas.addEventListener("pointermove",s(this,C)),this.canvas.addEventListener("pointerup",s(this,E)),this.canvas.removeEventListener("pointerdown",s(this,r)),this.isEditing=!0,s(this,R)||(he(this,R,!0),z(this,Pe,bt).call(this),this.thickness||(this.thickness=ee._defaultThickness),this.color||(this.color=ee._defaultColor||f.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=ee._defaultOpacity)),this.currentPath.push([ie,_e]),he(this,P,!1),z(this,Z,ki).call(this),he(this,l,()=>{z(this,F,Zn).call(this),s(this,l)&&window.requestAnimationFrame(s(this,l))}),window.requestAnimationFrame(s(this,l))},ue=new WeakSet,Oi=function(ie,_e){const[ke,Re]=this.currentPath.at(-1);if(this.currentPath.length>1&&ie===ke&&_e===Re)return;const Fe=this.currentPath;let Ve=s(this,g);if(Fe.push([ie,_e]),he(this,P,!0),Fe.length<=2){Ve.moveTo(...Fe[0]),Ve.lineTo(ie,_e);return}Fe.length===3&&(he(this,g,Ve=new Path2D),Ve.moveTo(...Fe[0])),z(this,u,Jn).call(this,Ve,...Fe.at(-3),...Fe.at(-2),ie,_e)},Ce=new WeakSet,Kn=function(){if(this.currentPath.length===0)return;const ie=this.currentPath.at(-1);s(this,g).lineTo(...ie)},q=new WeakSet,Yn=function(ie,_e){he(this,l,null),ie=Math.min(Math.max(ie,0),this.canvas.width),_e=Math.min(Math.max(_e,0),this.canvas.height),z(this,ue,Oi).call(this,ie,_e),z(this,Ce,Kn).call(this);let ke;if(this.currentPath.length!==1)ke=z(this,V,Qn).call(this);else{const Oe=[ie,_e];ke=[[Oe,Oe.slice(),Oe.slice(),Oe]]}const Re=s(this,g),Fe=this.currentPath;this.currentPath=[],he(this,g,new Path2D);const Ve=()=>{this.allRawPaths.push(Fe),this.paths.push(ke),this.bezierPath2D.push(Re),this.rebuild()},We=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(z(this,$,$t).call(this),z(this,te,Gt).call(this)),z(this,Y,_t).call(this))};this.addCommands({cmd:Ve,undo:We,mustExec:!0})},F=new WeakSet,Zn=function(){if(!s(this,P))return;he(this,P,!1);const ie=Math.ceil(this.thickness*this.parentScale),_e=this.currentPath.slice(-3),ke=_e.map(Ve=>Ve[0]),Re=_e.map(Ve=>Ve[1]);Math.min(...ke)-ie,Math.max(...ke)+ie,Math.min(...Re)-ie,Math.max(...Re)+ie;const{ctx:Fe}=this;Fe.save(),Fe.clearRect(0,0,this.canvas.width,this.canvas.height);for(const Ve of this.bezierPath2D)Fe.stroke(Ve);Fe.stroke(s(this,g)),Fe.restore()},u=new WeakSet,Jn=function(ie,_e,ke,Re,Fe,Ve,We){const Oe=(_e+Re)/2,Ye=(ke+Fe)/2,$e=(Re+Ve)/2,ge=(Fe+We)/2;ie.bezierCurveTo(Oe+2*(Re-Oe)/3,Ye+2*(Fe-Ye)/3,$e+2*(Re-$e)/3,ge+2*(Fe-ge)/3,$e,ge)},V=new WeakSet,Qn=function(){const ie=this.currentPath;if(ie.length<=2)return[[ie[0],ie[0],ie.at(-1),ie.at(-1)]];const _e=[];let ke,[Re,Fe]=ie[0];for(ke=1;ke<ie.length-2;ke++){const[k,J]=ie[ke],[fe,ye]=ie[ke+1],Ae=(k+fe)/2,Ie=(J+ye)/2,De=[Re+2*(k-Re)/3,Fe+2*(J-Fe)/3],ze=[Ae+2*(k-Ae)/3,Ie+2*(J-Ie)/3];_e.push([[Re,Fe],De,ze,[Ae,Ie]]),[Re,Fe]=[Ae,Ie]}const[Ve,We]=ie[ke],[Oe,Ye]=ie[ke+1],$e=[Re+2*(Ve-Re)/3,Fe+2*(We-Fe)/3],ge=[Oe+2*(Ve-Oe)/3,Ye+2*(We-Ye)/3];return _e.push([[Re,Fe],$e,ge,[Oe,Ye]]),_e},X=new WeakSet,lt=function(){if(this.isEmpty()){z(this,ne,qt).call(this);return}z(this,Z,ki).call(this);const{canvas:ie,ctx:_e}=this;_e.setTransform(1,0,0,1,0,0),_e.clearRect(0,0,ie.width,ie.height),z(this,ne,qt).call(this);for(const ke of this.bezierPath2D)_e.stroke(ke)},B=new WeakSet,Fi=function(ie){this.canvas.removeEventListener("pointerleave",s(this,A)),this.canvas.removeEventListener("pointermove",s(this,C)),this.canvas.removeEventListener("pointerup",s(this,E)),this.canvas.addEventListener("pointerdown",s(this,r)),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",L.noContextMenu)},10),z(this,q,Yn).call(this,ie.offsetX,ie.offsetY),this.addToAnnotationStorage(),this.setInBackground()},$=new WeakSet,$t=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",f.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(ie=>{var _e;return(_e=this.canvas)==null?void 0:_e.setAttribute("aria-label",ie)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},te=new WeakSet,Gt=function(){he(this,v,new ResizeObserver(ie=>{const _e=ie[0].contentRect;_e.width&&_e.height&&this.setDimensions(_e.width,_e.height)})),s(this,v).observe(this.div)},Pe=new WeakSet,bt=function(){if(!s(this,R))return;const[ie,_e]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*ie),this.canvas.height=Math.ceil(this.height*_e),z(this,ne,qt).call(this)},oe=new WeakSet,Ni=function(ie,_e){const ke=z(this,xe,Xt).call(this),Re=(ie-ke)/s(this,c),Fe=(_e-ke)/s(this,n);this.scaleFactor=Math.min(Re,Fe)},ne=new WeakSet,qt=function(){const ie=z(this,xe,Xt).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+ie,this.translationY*this.scaleFactor+ie)},be=new WeakSet,es=function(ie){const _e=new Path2D;for(let ke=0,Re=ie.length;ke<Re;ke++){const[Fe,Ve,We,Oe]=ie[ke];ke===0&&_e.moveTo(...Fe),_e.bezierCurveTo(Ve[0],Ve[1],We[0],We[1],Oe[0],Oe[1])}return _e},Te=new WeakSet,Di=function(ie,_e,ke){const[Re,Fe,Ve,We]=_e;switch(ke){case 0:for(let Oe=0,Ye=ie.length;Oe<Ye;Oe+=2)ie[Oe]+=Re,ie[Oe+1]=We-ie[Oe+1];break;case 90:for(let Oe=0,Ye=ie.length;Oe<Ye;Oe+=2){const $e=ie[Oe];ie[Oe]=ie[Oe+1]+Re,ie[Oe+1]=$e+Fe}break;case 180:for(let Oe=0,Ye=ie.length;Oe<Ye;Oe+=2)ie[Oe]=Ve-ie[Oe],ie[Oe+1]+=Fe;break;case 270:for(let Oe=0,Ye=ie.length;Oe<Ye;Oe+=2){const $e=ie[Oe];ie[Oe]=Ve-ie[Oe+1],ie[Oe+1]=We-$e}break;default:throw new Error("Invalid rotation")}return ie},Ne=new WeakSet,ts=function(ie,_e,ke){const[Re,Fe,Ve,We]=_e;switch(ke){case 0:for(let Oe=0,Ye=ie.length;Oe<Ye;Oe+=2)ie[Oe]-=Re,ie[Oe+1]=We-ie[Oe+1];break;case 90:for(let Oe=0,Ye=ie.length;Oe<Ye;Oe+=2){const $e=ie[Oe];ie[Oe]=ie[Oe+1]-Fe,ie[Oe+1]=$e-Re}break;case 180:for(let Oe=0,Ye=ie.length;Oe<Ye;Oe+=2)ie[Oe]=Ve-ie[Oe],ie[Oe+1]-=Fe;break;case 270:for(let Oe=0,Ye=ie.length;Oe<Ye;Oe+=2){const $e=ie[Oe];ie[Oe]=We-ie[Oe+1],ie[Oe+1]=Ve-$e}break;default:throw new Error("Invalid rotation")}return ie},Ue=new WeakSet,is=function(ie,_e,ke,Re){var Ye,$e;const Fe=[],Ve=this.thickness/2,We=ie*_e+Ve,Oe=ie*ke+Ve;for(const ge of this.paths){const k=[],J=[];for(let fe=0,ye=ge.length;fe<ye;fe++){const[Ae,Ie,De,ze]=ge[fe],He=ie*Ae[0]+We,tt=ie*Ae[1]+Oe,Xe=ie*Ie[0]+We,Ke=ie*Ie[1]+Oe,Ze=ie*De[0]+We,et=ie*De[1]+Oe,it=ie*ze[0]+We,nt=ie*ze[1]+Oe;fe===0&&(k.push(He,tt),J.push(He,tt)),k.push(Xe,Ke,Ze,et,it,nt),J.push(Xe,Ke),fe===ye-1&&J.push(it,nt)}Fe.push({bezier:z(Ye=ee,Te,Di).call(Ye,k,Re,this.rotation),points:z($e=ee,Te,Di).call($e,J,Re,this.rotation)})}return Fe},qe=new WeakSet,Bi=function(){let ie=1/0,_e=-1/0,ke=1/0,Re=-1/0;for(const Fe of this.paths)for(const[Ve,We,Oe,Ye]of Fe){const $e=i.Util.bezierBoundingBox(...Ve,...We,...Oe,...Ye);ie=Math.min(ie,$e[0]),ke=Math.min(ke,$e[1]),_e=Math.max(_e,$e[2]),Re=Math.max(Re,$e[3])}return[ie,ke,_e,Re]},xe=new WeakSet,Xt=function(){return s(this,b)?Math.ceil(this.thickness*this.parentScale):0},Y=new WeakSet,_t=function(ie=!1){if(this.isEmpty())return;if(!s(this,b)){z(this,X,lt).call(this);return}const _e=z(this,qe,Bi).call(this),ke=z(this,xe,Xt).call(this);he(this,c,Math.max(f.AnnotationEditor.MIN_SIZE,_e[2]-_e[0])),he(this,n,Math.max(f.AnnotationEditor.MIN_SIZE,_e[3]-_e[1]));const Re=Math.ceil(ke+s(this,c)*this.scaleFactor),Fe=Math.ceil(ke+s(this,n)*this.scaleFactor),[Ve,We]=this.parentDimensions;this.width=Re/Ve,this.height=Fe/We,this.setAspectRatio(Re,Fe);const Oe=this.translationX,Ye=this.translationY;this.translationX=-_e[0],this.translationY=-_e[1],z(this,Pe,bt).call(this),z(this,X,lt).call(this),he(this,T,Re),he(this,o,Fe),this.setDims(Re,Fe);const $e=ie?ke/this.scaleFactor/2:0;this.translate(Oe-this.translationX-$e,Ye-this.translationY-$e)},j(ee,be),j(ee,Te),j(ee,Ne),Je(ee,"_defaultColor",null),Je(ee,"_defaultOpacity",1),Je(ee,"_defaultThickness",1),Je(ee,"_type","ink");let m=ee;t.InkEditor=m},(e,t,a)=>{var m,n,c,C,A,E,r,g,b,P,R,Tt,T,Rt,l,Kt,y,Vi,N,ns,G,ss,H,Hi,re,Yt,K,rs;Object.defineProperty(t,"__esModule",{value:!0}),t.StampEditor=void 0;var i=a(1),f=a(4),I=a(6),L=a(29);const se=class se extends f.AnnotationEditor{constructor(q){super({...q,name:"stampEditor"});j(this,R);j(this,T);j(this,l);j(this,y);j(this,N);j(this,G);j(this,H);j(this,re);j(this,K);j(this,m,null);j(this,n,null);j(this,c,null);j(this,C,null);j(this,A,null);j(this,E,null);j(this,r,null);j(this,g,null);j(this,b,!1);j(this,P,!1);he(this,C,q.bitmapUrl),he(this,A,q.bitmapFile)}static initialize(q){f.AnnotationEditor.initialize(q)}static get supportedTypes(){const q=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,i.shadow)(this,"supportedTypes",q.map(M=>`image/${M}`))}static get supportedTypesStr(){return(0,i.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(q){return this.supportedTypes.includes(q)}static paste(q,M){M.pasteEditor(i.AnnotationEditorType.STAMP,{bitmapFile:q.getAsFile()})}remove(){var q,M;s(this,n)&&(he(this,m,null),this._uiManager.imageManager.deleteId(s(this,n)),(q=s(this,E))==null||q.remove(),he(this,E,null),(M=s(this,r))==null||M.disconnect(),he(this,r,null)),super.remove()}rebuild(){if(!this.parent){s(this,n)&&z(this,l,Kt).call(this);return}super.rebuild(),this.div!==null&&(s(this,n)&&z(this,l,Kt).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(s(this,c)||s(this,m)||s(this,C)||s(this,A))}get isResizable(){return!0}render(){if(this.div)return this.div;let q,M;if(this.width&&(q=this.x,M=this.y),super.render(),this.div.hidden=!0,s(this,m)?z(this,y,Vi).call(this):z(this,l,Kt).call(this),this.width){const[F,d]=this.parentDimensions;this.setAt(q*F,M*d,this.width*F,this.height*d)}return this.div}static deserialize(q,M,F){if(q instanceof L.StampAnnotationElement)return null;const d=super.deserialize(q,M,F),{rect:u,bitmapUrl:x,bitmapId:V,isSvg:W,accessibilityData:X}=q;V&&F.imageManager.isValidId(V)?he(d,n,V):he(d,C,x),he(d,b,W);const[me,B]=d.pageDimensions;return d.width=(u[2]-u[0])/me,d.height=(u[3]-u[1])/B,X&&(d.altTextData=X),d}serialize(q=!1,M=null){if(this.isEmpty())return null;const F={annotationType:i.AnnotationEditorType.STAMP,bitmapId:s(this,n),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:s(this,b),structTreeParentId:this._structTreeParentId};if(q)return F.bitmapUrl=z(this,re,Yt).call(this,!0),F.accessibilityData=this.altTextData,F;const{decorative:d,altText:u}=this.altTextData;if(!d&&u&&(F.accessibilityData={type:"Figure",alt:u}),M===null)return F;M.stamps||(M.stamps=new Map);const x=s(this,b)?(F.rect[2]-F.rect[0])*(F.rect[3]-F.rect[1]):null;if(!M.stamps.has(s(this,n)))M.stamps.set(s(this,n),{area:x,serialized:F}),F.bitmap=z(this,re,Yt).call(this,!1);else if(s(this,b)){const V=M.stamps.get(s(this,n));x>V.area&&(V.area=x,V.serialized.bitmap.close(),V.serialized.bitmap=z(this,re,Yt).call(this,!1))}return F}};m=new WeakMap,n=new WeakMap,c=new WeakMap,C=new WeakMap,A=new WeakMap,E=new WeakMap,r=new WeakMap,g=new WeakMap,b=new WeakMap,P=new WeakMap,R=new WeakSet,Tt=function(q,M=!1){if(!q){this.remove();return}he(this,m,q.bitmap),M||(he(this,n,q.id),he(this,b,q.isSvg)),z(this,y,Vi).call(this)},T=new WeakSet,Rt=function(){he(this,c,null),this._uiManager.enableWaiting(!1),s(this,E)&&this.div.focus()},l=new WeakSet,Kt=function(){if(s(this,n)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(s(this,n)).then(M=>z(this,R,Tt).call(this,M,!0)).finally(()=>z(this,T,Rt).call(this));return}if(s(this,C)){const M=s(this,C);he(this,C,null),this._uiManager.enableWaiting(!0),he(this,c,this._uiManager.imageManager.getFromUrl(M).then(F=>z(this,R,Tt).call(this,F)).finally(()=>z(this,T,Rt).call(this)));return}if(s(this,A)){const M=s(this,A);he(this,A,null),this._uiManager.enableWaiting(!0),he(this,c,this._uiManager.imageManager.getFromFile(M).then(F=>z(this,R,Tt).call(this,F)).finally(()=>z(this,T,Rt).call(this)));return}const q=document.createElement("input");q.type="file",q.accept=se.supportedTypesStr,he(this,c,new Promise(M=>{q.addEventListener("change",async()=>{if(!q.files||q.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const F=await this._uiManager.imageManager.getFromFile(q.files[0]);z(this,R,Tt).call(this,F)}M()}),q.addEventListener("cancel",()=>{this.remove(),M()})}).finally(()=>z(this,T,Rt).call(this))),q.click()},y=new WeakSet,Vi=function(){const{div:q}=this;let{width:M,height:F}=s(this,m);const[d,u]=this.pageDimensions,x=.75;if(this.width)M=this.width*d,F=this.height*u;else if(M>x*d||F>x*u){const me=Math.min(x*d/M,x*u/F);M*=me,F*=me}const[V,W]=this.parentDimensions;this.setDims(M*V/d,F*W/u),this._uiManager.enableWaiting(!1);const X=he(this,E,document.createElement("canvas"));q.append(X),q.hidden=!1,z(this,H,Hi).call(this,M,F),z(this,K,rs).call(this),s(this,P)||(this.parent.addUndoableEditor(this),he(this,P,!0)),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()},N=new WeakSet,ns=function(q,M){var x;const[F,d]=this.parentDimensions;this.width=q/F,this.height=M/d,this.setDims(q,M),(x=this._initialOptions)!=null&&x.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,s(this,g)!==null&&clearTimeout(s(this,g)),he(this,g,setTimeout(()=>{he(this,g,null),z(this,H,Hi).call(this,q,M)},200))},G=new WeakSet,ss=function(q,M){const{width:F,height:d}=s(this,m);let u=F,x=d,V=s(this,m);for(;u>2*q||x>2*M;){const W=u,X=x;u>2*q&&(u=u>=16384?Math.floor(u/2)-1:Math.ceil(u/2)),x>2*M&&(x=x>=16384?Math.floor(x/2)-1:Math.ceil(x/2));const me=new OffscreenCanvas(u,x);me.getContext("2d").drawImage(V,0,0,W,X,0,0,u,x),V=me.transferToImageBitmap()}return V},H=new WeakSet,Hi=function(q,M){q=Math.ceil(q),M=Math.ceil(M);const F=s(this,E);if(!F||F.width===q&&F.height===M)return;F.width=q,F.height=M;const d=s(this,b)?s(this,m):z(this,G,ss).call(this,q,M),u=F.getContext("2d");u.filter=this._uiManager.hcmFilter,u.drawImage(d,0,0,d.width,d.height,0,0,q,M)},re=new WeakSet,Yt=function(q){if(q){if(s(this,b)){const d=this._uiManager.imageManager.getSvgUrl(s(this,n));if(d)return d}const M=document.createElement("canvas");return{width:M.width,height:M.height}=s(this,m),M.getContext("2d").drawImage(s(this,m),0,0),M.toDataURL()}if(s(this,b)){const[M,F]=this.pageDimensions,d=Math.round(this.width*M*I.PixelsPerInch.PDF_TO_CSS_UNITS),u=Math.round(this.height*F*I.PixelsPerInch.PDF_TO_CSS_UNITS),x=new OffscreenCanvas(d,u);return x.getContext("2d").drawImage(s(this,m),0,0,s(this,m).width,s(this,m).height,0,0,d,u),x.transferToImageBitmap()}return structuredClone(s(this,m))},K=new WeakSet,rs=function(){he(this,r,new ResizeObserver(q=>{const M=q[0].contentRect;M.width&&M.height&&z(this,N,ns).call(this,M.width,M.height)})),s(this,r).observe(this.div)},Je(se,"_type","stamp");let _=se;t.StampEditor=_}],__webpack_module_cache__={};function __w_pdfjs_require__(e){var t=__webpack_module_cache__[e];if(t!==void 0)return t.exports;var a=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](a,a.exports,__w_pdfjs_require__),a.exports}var __webpack_exports__={};return(()=>{var e=__webpack_exports__;Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"AbortException",{enumerable:!0,get:function(){return t.AbortException}}),Object.defineProperty(e,"AnnotationEditorLayer",{enumerable:!0,get:function(){return I.AnnotationEditorLayer}}),Object.defineProperty(e,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return t.AnnotationEditorParamsType}}),Object.defineProperty(e,"AnnotationEditorType",{enumerable:!0,get:function(){return t.AnnotationEditorType}}),Object.defineProperty(e,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return L.AnnotationEditorUIManager}}),Object.defineProperty(e,"AnnotationLayer",{enumerable:!0,get:function(){return _.AnnotationLayer}}),Object.defineProperty(e,"AnnotationMode",{enumerable:!0,get:function(){return t.AnnotationMode}}),Object.defineProperty(e,"CMapCompressionType",{enumerable:!0,get:function(){return t.CMapCompressionType}}),Object.defineProperty(e,"DOMSVGFactory",{enumerable:!0,get:function(){return i.DOMSVGFactory}}),Object.defineProperty(e,"FeatureTest",{enumerable:!0,get:function(){return t.FeatureTest}}),Object.defineProperty(e,"GlobalWorkerOptions",{enumerable:!0,get:function(){return m.GlobalWorkerOptions}}),Object.defineProperty(e,"ImageKind",{enumerable:!0,get:function(){return t.ImageKind}}),Object.defineProperty(e,"InvalidPDFException",{enumerable:!0,get:function(){return t.InvalidPDFException}}),Object.defineProperty(e,"MissingPDFException",{enumerable:!0,get:function(){return t.MissingPDFException}}),Object.defineProperty(e,"OPS",{enumerable:!0,get:function(){return t.OPS}}),Object.defineProperty(e,"PDFDataRangeTransport",{enumerable:!0,get:function(){return a.PDFDataRangeTransport}}),Object.defineProperty(e,"PDFDateString",{enumerable:!0,get:function(){return i.PDFDateString}}),Object.defineProperty(e,"PDFWorker",{enumerable:!0,get:function(){return a.PDFWorker}}),Object.defineProperty(e,"PasswordResponses",{enumerable:!0,get:function(){return t.PasswordResponses}}),Object.defineProperty(e,"PermissionFlag",{enumerable:!0,get:function(){return t.PermissionFlag}}),Object.defineProperty(e,"PixelsPerInch",{enumerable:!0,get:function(){return i.PixelsPerInch}}),Object.defineProperty(e,"PromiseCapability",{enumerable:!0,get:function(){return t.PromiseCapability}}),Object.defineProperty(e,"RenderingCancelledException",{enumerable:!0,get:function(){return i.RenderingCancelledException}}),Object.defineProperty(e,"SVGGraphics",{enumerable:!0,get:function(){return a.SVGGraphics}}),Object.defineProperty(e,"UnexpectedResponseException",{enumerable:!0,get:function(){return t.UnexpectedResponseException}}),Object.defineProperty(e,"Util",{enumerable:!0,get:function(){return t.Util}}),Object.defineProperty(e,"VerbosityLevel",{enumerable:!0,get:function(){return t.VerbosityLevel}}),Object.defineProperty(e,"XfaLayer",{enumerable:!0,get:function(){return n.XfaLayer}}),Object.defineProperty(e,"build",{enumerable:!0,get:function(){return a.build}}),Object.defineProperty(e,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return t.createValidAbsoluteUrl}}),Object.defineProperty(e,"getDocument",{enumerable:!0,get:function(){return a.getDocument}}),Object.defineProperty(e,"getFilenameFromUrl",{enumerable:!0,get:function(){return i.getFilenameFromUrl}}),Object.defineProperty(e,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return i.getPdfFilenameFromUrl}}),Object.defineProperty(e,"getXfaPageViewport",{enumerable:!0,get:function(){return i.getXfaPageViewport}}),Object.defineProperty(e,"isDataScheme",{enumerable:!0,get:function(){return i.isDataScheme}}),Object.defineProperty(e,"isPdfFile",{enumerable:!0,get:function(){return i.isPdfFile}}),Object.defineProperty(e,"loadScript",{enumerable:!0,get:function(){return i.loadScript}}),Object.defineProperty(e,"noContextMenu",{enumerable:!0,get:function(){return i.noContextMenu}}),Object.defineProperty(e,"normalizeUnicode",{enumerable:!0,get:function(){return t.normalizeUnicode}}),Object.defineProperty(e,"renderTextLayer",{enumerable:!0,get:function(){return f.renderTextLayer}}),Object.defineProperty(e,"setLayerDimensions",{enumerable:!0,get:function(){return i.setLayerDimensions}}),Object.defineProperty(e,"shadow",{enumerable:!0,get:function(){return t.shadow}}),Object.defineProperty(e,"updateTextLayer",{enumerable:!0,get:function(){return f.updateTextLayer}}),Object.defineProperty(e,"version",{enumerable:!0,get:function(){return a.version}});var t=__w_pdfjs_require__(1),a=__w_pdfjs_require__(2),i=__w_pdfjs_require__(6),f=__w_pdfjs_require__(26),I=__w_pdfjs_require__(27),L=__w_pdfjs_require__(5),_=__w_pdfjs_require__(29),m=__w_pdfjs_require__(14),n=__w_pdfjs_require__(32)})(),__webpack_exports__})())}(pdf)),pdf.exports}(function(e,t){(function(i,f){e.exports=f()})(globalThis,()=>(()=>{var a=[,(L,_,m)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.createViewerApp=T,_.getActiveApp=v,_.getViewerConfiguration=b,_.initManager=R;var n=m(2),c=m(54),C=m(55),A=E(m(56));function E(o){return o&&o.__esModule?o:{default:o}}let r,g=null;function b(o){return{appContainer:o,mainContainer:o.querySelector("[data-dom-id='viewerContainer']"),viewerContainer:o.querySelector("[data-dom-id='viewer']"),toolbar:{container:o.querySelector("[data-dom-id='toolbarViewer']"),numPages:o.querySelector("[data-dom-id='numPages']"),pageNumber:o.querySelector("[data-dom-id='pageNumber']"),scaleSelect:o.querySelector("[data-dom-id='scaleSelect']"),customScaleOption:o.querySelector("[data-dom-id='customScaleOption']"),previous:o.querySelector("[data-dom-id='previous']"),next:o.querySelector("[data-dom-id='next']"),zoomIn:o.querySelector("[data-dom-id='zoomIn']"),zoomOut:o.querySelector("[data-dom-id='zoomOut']"),viewFind:o.querySelector("[data-dom-id='viewFind']"),openFile:o.querySelector("[data-dom-id='openFile']"),print:o.querySelector("[data-dom-id='print']"),editorFreeTextButton:o.querySelector("[data-dom-id='editorFreeText']"),editorFreeTextParamsToolbar:o.querySelector("[data-dom-id='editorFreeTextParamsToolbar']"),editorInkButton:o.querySelector("[data-dom-id='editorInk']"),editorInkParamsToolbar:o.querySelector("[data-dom-id='editorInkParamsToolbar']"),editorStampButton:o.querySelector("[data-dom-id='editorStamp']"),editorStampParamsToolbar:o.querySelector("[data-dom-id='editorStampParamsToolbar']"),download:o.querySelector("[data-dom-id='download']")},secondaryToolbar:{toolbar:o.querySelector("[data-dom-id='secondaryToolbar']"),toggleButton:o.querySelector("[data-dom-id='secondaryToolbarToggle']"),presentationModeButton:o.querySelector("[data-dom-id='presentationMode']"),openFileButton:o.querySelector("[data-dom-id='secondaryOpenFile']"),printButton:o.querySelector("[data-dom-id='secondaryPrint']"),downloadButton:o.querySelector("[data-dom-id='secondaryDownload']"),viewBookmarkButton:o.querySelector("[data-dom-id='viewBookmark']"),firstPageButton:o.querySelector("[data-dom-id='firstPage']"),lastPageButton:o.querySelector("[data-dom-id='lastPage']"),pageRotateCwButton:o.querySelector("[data-dom-id='pageRotateCw']"),pageRotateCcwButton:o.querySelector("[data-dom-id='pageRotateCcw']"),cursorSelectToolButton:o.querySelector("[data-dom-id='cursorSelectTool']"),cursorHandToolButton:o.querySelector("[data-dom-id='cursorHandTool']"),scrollPageButton:o.querySelector("[data-dom-id='scrollPage']"),scrollVerticalButton:o.querySelector("[data-dom-id='scrollVertical']"),scrollHorizontalButton:o.querySelector("[data-dom-id='scrollHorizontal']"),scrollWrappedButton:o.querySelector("[data-dom-id='scrollWrapped']"),spreadNoneButton:o.querySelector("[data-dom-id='spreadNone']"),spreadOddButton:o.querySelector("[data-dom-id='spreadOdd']"),spreadEvenButton:o.querySelector("[data-dom-id='spreadEven']"),documentPropertiesButton:o.querySelector("[data-dom-id='documentProperties']")},sidebar:{outerContainer:o.querySelector("[data-dom-id='outerContainer']"),sidebarContainer:o.querySelector("[data-dom-id='sidebarContainer']"),toggleButton:o.querySelector("[data-dom-id='sidebarToggle']"),resizer:o.querySelector("[data-dom-id='sidebarResizer']"),thumbnailButton:o.querySelector("[data-dom-id='viewThumbnail']"),outlineButton:o.querySelector("[data-dom-id='viewOutline']"),attachmentsButton:o.querySelector("[data-dom-id='viewAttachments']"),layersButton:o.querySelector("[data-dom-id='viewLayers']"),thumbnailView:o.querySelector("[data-dom-id='thumbnailView']"),outlineView:o.querySelector("[data-dom-id='outlineView']"),attachmentsView:o.querySelector("[data-dom-id='attachmentsView']"),layersView:o.querySelector("[data-dom-id='layersView']"),outlineOptionsContainer:o.querySelector("[data-dom-id='outlineOptionsContainer']"),currentOutlineItemButton:o.querySelector("[data-dom-id='currentOutlineItem']")},findBar:{bar:o.querySelector("[data-dom-id='findbar']"),toggleButton:o.querySelector("[data-dom-id='viewFind']"),findField:o.querySelector("[data-dom-id='findInput']"),highlightAllCheckbox:o.querySelector("[data-dom-id='findHighlightAll']"),caseSensitiveCheckbox:o.querySelector("[data-dom-id='findMatchCase']"),matchDiacriticsCheckbox:o.querySelector("[data-dom-id='findMatchDiacritics']"),entireWordCheckbox:o.querySelector("[data-dom-id='findEntireWord']"),findMsg:o.querySelector("[data-dom-id='findMsg']"),findResultsCount:o.querySelector("[data-dom-id='findResultsCount']"),findPreviousButton:o.querySelector("[data-dom-id='findPrevious']"),findNextButton:o.querySelector("[data-dom-id='findNext']")},passwordOverlay:{dialog:o.querySelector("[data-dom-id='passwordDialog']"),label:o.querySelector("[data-dom-id='passwordText']"),input:o.querySelector("[data-dom-id='password']"),submitButton:o.querySelector("[data-dom-id='passwordSubmit']"),cancelButton:o.querySelector("[data-dom-id='passwordCancel']")},documentProperties:{dialog:o.querySelector("[data-dom-id='documentPropertiesDialog']"),closeButton:o.querySelector("[data-dom-id='documentPropertiesClose']"),fields:{fileName:o.querySelector("[data-dom-id='fileNameField']"),fileSize:o.querySelector("[data-dom-id='fileSizeField']"),title:o.querySelector("[data-dom-id='titleField']"),author:o.querySelector("[data-dom-id='authorField']"),subject:o.querySelector("[data-dom-id='subjectField']"),keywords:o.querySelector("[data-dom-id='keywordsField']"),creationDate:o.querySelector("[data-dom-id='creationDateField']"),modificationDate:o.querySelector("[data-dom-id='modificationDateField']"),creator:o.querySelector("[data-dom-id='creatorField']"),producer:o.querySelector("[data-dom-id='producerField']"),version:o.querySelector("[data-dom-id='versionField']"),pageCount:o.querySelector("[data-dom-id='pageCountField']"),pageSize:o.querySelector("[data-dom-id='pageSizeField']"),linearized:o.querySelector("[data-dom-id='linearizedField']")}},altTextDialog:{dialog:o.querySelector("[data-dom-id='altTextDialog']"),optionDescription:o.querySelector("[data-dom-id='descriptionButton']"),optionDecorative:o.querySelector("[data-dom-id='decorativeButton']"),textarea:o.querySelector("[data-dom-id='descriptionTextarea']"),cancelButton:o.querySelector("[data-dom-id='altTextCancel']"),saveButton:o.querySelector("[data-dom-id='altTextSave']")},annotationEditorParams:{editorFreeTextFontSize:o.querySelector("[data-dom-id='editorFreeTextFontSize']"),editorFreeTextColor:o.querySelector("[data-dom-id='editorFreeTextColor']"),editorInkColor:o.querySelector("[data-dom-id='editorInkColor']"),editorInkThickness:o.querySelector("[data-dom-id='editorInkThickness']"),editorInkOpacity:o.querySelector("[data-dom-id='editorInkOpacity']"),editorStampAddImage:o.querySelector("[data-dom-id='editorStampAddImage']")},printContainer:o.querySelector("[data-dom-id='printContainer']"),openFileInput:o.querySelector("[data-dom-id='fileInput']"),debuggerScriptPath:"../pdf.js/web/debugger.js"}}function P(o){const{parent:l=null,resourcePath:S,src:y,disableCORSCheck:w=!1,disableAutoSetTitle:N=!1,appOptions:D={}}=o,G=`${S}/build/pdf.worker.js`,le=new c.AppOptions;Object.keys(D).forEach(function(re){le.set(re,D[re])}),le.set("workerSrc",G),le.set("sandboxBundleSrc",`${S}/build/pdf.sandbox.js`),le.set("defaultUrl",y),le.set("disableCORSCheck",w),le.set("disableAutoSetTitle",N),le.set("disablePreferences",!0);const H=`${S}/web/locale/locale.properties`;(0,C.injectLocaleResource)(H);const Z=new n.PDFViewerApplication(le);if(r=Z,l){const re=(0,A.default)();l.appendChild(re);const Q=b(l);Z.run(Q)}return Z}function R(o){return g||(g={createApp(l){const S=P(l);return this._register(S),S},_register(l){let S=null;const y=function(w){S||(S=window.requestAnimationFrame(()=>{S=null,g.activateApp(w)}))};l.initializedPromise.then(()=>{o.forEach(w=>{l.appConfig.sidebar.outerContainer.addEventListener(w,()=>{y(l)})})})},activateApp(l){r!==l&&(r&&window.removeEventListener("keydown",r.helper.webViewerKeyDown),r=l,window.addEventListener("keydown",r.helper.webViewerKeyDown))}},g)}function v(){return r}function T(o){return R(["mousemove","click","mousedown","touchstart"]).createApp(o)}},(L,_,m)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.PDFViewerApplication=void 0;var n=m(3),c=m(8),C=m(45);class A extends c.ViewerApplication{constructor(r){super(),this.appOptions=r,this.helper=(0,n.createHelper)(this),this.bindServices()}bindServices(){(0,C.bindExternalService)(this),(0,C.bindPrintServiceFactory)(c.PDFPrintServiceFactory)}run(r){const{validateFileURL:g}=this.helper;return super.run(r,g)}bindEvents(){const r=this.appOptions,{eventBus:g,_boundEvents:b}=this;b.beforePrint=this.beforePrint.bind(this),b.afterPrint=this.afterPrint.bind(this);const{webViewerResize:P,webViewerHashchange:R,webViewerPageRendered:v,webViewerUpdateViewarea:T,webViewerPageChanging:o,webViewerScaleChanging:l,webViewerRotationChanging:S,webViewerSidebarViewChanged:y,webViewerPageMode:w,webViewerNamedAction:N,webViewerPresentationModeChanged:D,webViewerPresentationMode:G,webViewerPrint:le,webViewerDownload:H,webViewerSave:Z,webViewerFirstPage:re,webViewerLastPage:Q,webViewerNextPage:K,webViewerPreviousPage:ue,webViewerZoomIn:se,webViewerZoomOut:Ce,webViewerZoomReset:Me,webViewerPageNumberChanged:q,webViewerScaleChanged:M,webViewerRotateCw:F,webViewerRotateCcw:d,webViewerOptionalContentConfig:u,webViewerSwitchScrollMode:x,webViewerScrollModeChanged:V,webViewerSwitchSpreadMode:W,webViewerSpreadModeChanged:X,webViewerDocumentProperties:me,webViewerFindFromUrlHash:B,webViewerUpdateFindMatchesCount:O,webViewerUpdateFindControlState:$,reportPageStatsPDFBug:de,webViewerFileInputChange:te,webViewerOpenFile:ve,webViewerSwitchAnnotationEditorMode:Pe,webViewerSwitchAnnotationEditorParams:Se,webViewerAnnotationEditorStatesChanged:oe,webViewerPageRender:ae,webViewerOpenInExternalApp:ne}=this.helper;g._on("resize",P),g._on("hashchange",R),g._on("beforeprint",b.beforePrint),g._on("afterprint",b.afterPrint),g._on("pagerender",ae),g._on("pagerendered",v),g._on("updateviewarea",T),g._on("pagechanging",o),g._on("scalechanging",l),g._on("rotationchanging",S),g._on("sidebarviewchanged",y),g._on("pagemode",w),g._on("namedaction",N),g._on("presentationmodechanged",D),g._on("presentationmode",G),g._on("switchannotationeditormode",Pe),g._on("switchannotationeditorparams",Se),g._on("print",le),g._on("download",H),g._on("openinexternalapp",ne),g._on("firstpage",re),g._on("lastpage",Q),g._on("nextpage",K),g._on("previouspage",ue),g._on("zoomin",se),g._on("zoomout",Ce),g._on("zoomreset",Me),g._on("pagenumberchanged",q),g._on("scalechanged",M),g._on("rotatecw",F),g._on("rotateccw",d),g._on("optionalcontentconfig",u),g._on("switchscrollmode",x),g._on("scrollmodechanged",V),g._on("switchspreadmode",W),g._on("spreadmodechanged",X),g._on("documentproperties",me),g._on("findfromurlhash",B),g._on("updatefindmatchescount",O),g._on("updatefindcontrolstate",$),r.get("pdfBug")&&(b.reportPageStatsPDFBug=de,g._on("pagerendered",b.reportPageStatsPDFBug),g._on("pagechanging",b.reportPageStatsPDFBug)),g._on("fileinputchange",te),g._on("openfile",ve)}setTitle(r=this._title){if(this._title=r,this.isViewerEmbedded||this.appOptions.get("disableAutoSetTitle"))return;const g=this._hasAnnotationEditors&&!this.pdfRenderingQueue.printing;document.title=`${g?"* ":""}${r}`}bindWindowEvents(){const{eventBus:r,_boundEvents:g}=this,{webViewerVisibilityChange:b,webViewerWheel:P,webViewerTouchStart:R,webViewerTouchMove:v,webViewerTouchEnd:T,webViewerClick:o,webViewerKeyDown:l,webViewerKeyUp:S,webViewerResolutionChange:y}=this.helper;function w(N=null){N&&y(N);const D=window.matchMedia(`(resolution: ${window.devicePixelRatio||1}dppx)`);D.addEventListener("change",w,{once:!0}),g.removeWindowResolutionChange||(g.removeWindowResolutionChange=function(){D.removeEventListener("change",w),g.removeWindowResolutionChange=null})}w(),g.windowResize=()=>{r.dispatch("resize",{source:window})},g.windowHashChange=()=>{r.dispatch("hashchange",{source:window,hash:document.location.hash.substring(1)})},g.windowBeforePrint=()=>{r.dispatch("beforeprint",{source:window})},g.windowAfterPrint=()=>{r.dispatch("afterprint",{source:window})},g.windowUpdateFromSandbox=N=>{r.dispatch("updatefromsandbox",{source:window,detail:N.detail})},window.addEventListener("visibilitychange",b),window.addEventListener("wheel",P,{passive:!1}),window.addEventListener("touchstart",R,{passive:!1}),window.addEventListener("touchmove",v,{passive:!1}),window.addEventListener("touchend",T,{passive:!1}),window.addEventListener("click",o),window.addEventListener("keydown",l),window.addEventListener("keyup",S),window.addEventListener("resize",g.windowResize),window.addEventListener("hashchange",g.windowHashChange),window.addEventListener("beforeprint",g.windowBeforePrint),window.addEventListener("afterprint",g.windowAfterPrint),window.addEventListener("updatefromsandbox",g.windowUpdateFromSandbox)}unbindEvents(){const{eventBus:r,_boundEvents:g}=this,{webViewerResize:b,webViewerHashchange:P,webViewerPageRendered:R,webViewerUpdateViewarea:v,webViewerPageChanging:T,webViewerScaleChanging:o,webViewerRotationChanging:l,webViewerSidebarViewChanged:S,webViewerPageMode:y,webViewerNamedAction:w,webViewerPresentationModeChanged:N,webViewerPresentationMode:D,webViewerPrint:G,webViewerDownload:le,webViewerSave:H,webViewerFirstPage:Z,webViewerLastPage:re,webViewerNextPage:Q,webViewerPreviousPage:K,webViewerZoomIn:ue,webViewerZoomOut:se,webViewerZoomReset:Ce,webViewerPageNumberChanged:Me,webViewerScaleChanged:q,webViewerRotateCw:M,webViewerRotateCcw:F,webViewerOptionalContentConfig:d,webViewerSwitchScrollMode:u,webViewerScrollModeChanged:x,webViewerSwitchSpreadMode:V,webViewerSpreadModeChanged:W,webViewerDocumentProperties:X,webViewerFindFromUrlHash:me,webViewerUpdateFindMatchesCount:B,webViewerUpdateFindControlState:O,reportPageStatsPDFBug:$,webViewerFileInputChange:de,webViewerOpenFile:te,webViewerPageRender:ve,webViewerOpenInExternalApp:Pe}=this.helper;r._off("resize",b),r._off("hashchange",P),r._off("beforeprint",g.beforePrint),r._off("afterprint",g.afterPrint),r._on("pagerender",ve),r._off("pagerendered",R),r._off("updateviewarea",v),r._off("pagechanging",T),r._off("scalechanging",o),r._off("rotationchanging",l),r._off("sidebarviewchanged",S),r._off("pagemode",y),r._off("namedaction",w),r._off("presentationmodechanged",N),r._off("presentationmode",D),r._off("print",G),r._off("download",le),r._off("openinexternalapp",Pe),r._off("firstpage",Z),r._off("lastpage",re),r._off("nextpage",Q),r._off("previouspage",K),r._off("zoomin",ue),r._off("zoomout",se),r._off("zoomreset",Ce),r._off("pagenumberchanged",Me),r._off("scalechanged",q),r._off("rotatecw",M),r._off("rotateccw",F),r._off("optionalcontentconfig",d),r._off("switchscrollmode",u),r._off("scrollmodechanged",x),r._off("switchspreadmode",V),r._off("spreadmodechanged",W),r._off("documentproperties",X),r._off("findfromurlhash",me),r._off("updatefindmatchescount",B),r._off("updatefindcontrolstate",O),g.reportPageStatsPDFBug&&(r._off("pagerendered",g.reportPageStatsPDFBug),r._off("pagechanging",g.reportPageStatsPDFBug),g.reportPageStatsPDFBug=null),r._off("fileinputchange",de),r._off("openfile",te),g.beforePrint=null,g.afterPrint=null}unbindWindowEvents(){var S;const{_boundEvents:r}=this,{webViewerVisibilityChange:g,webViewerWheel:b,webViewerTouchStart:P,webViewerTouchMove:R,webViewerTouchEnd:v,webViewerClick:T,webViewerKeyDown:o,webViewerKeyUp:l}=this.helper;window.removeEventListener("visibilitychange",g),window.removeEventListener("wheel",b,{passive:!1}),window.removeEventListener("touchstart",P,{passive:!1}),window.removeEventListener("touchmove",R,{passive:!1}),window.removeEventListener("touchend",v,{passive:!1}),window.removeEventListener("click",T),window.removeEventListener("keydown",o),window.removeEventListener("keyup",l),window.removeEventListener("resize",r.windowResize),window.removeEventListener("hashchange",r.windowHashChange),window.removeEventListener("beforeprint",r.windowBeforePrint),window.removeEventListener("afterprint",r.windowAfterPrint),window.removeEventListener("updatefromsandbox",r.windowUpdateFromSandbox),(S=r.removeWindowResolutionChange)==null||S.call(r),r.windowResize=null,r.windowHashChange=null,r.windowBeforePrint=null,r.windowAfterPrint=null,r.windowUpdateFromSandbox=null}_initializeAnnotationStorageCallbacks(r){if(r!==this.pdfDocument)return;const{annotationStorage:g}=r;g.onSetModified=()=>{window.addEventListener("beforeunload",this.helper.beforeUnload),this._annotationStorageModified=!0},g.onResetModified=()=>{window.removeEventListener("beforeunload",this.helper.beforeUnload),delete this._annotationStorageModified},g.onAnnotationEditor=b=>{this._hasAnnotationEditors=!!b,this.setTitle(),b&&this.externalServices.reportTelemetry({type:"editing",data:{type:b}})}}}_.PDFViewerApplication=A},(L,_,m)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.createHelper=E;var n=m(4),c=m(5),C=m(6);const A=1e3;function E(r){const g=r.appOptions,b=["null","http://mozilla.github.io","https://mozilla.github.io"];var P=function(ee){if(ee)try{const pe=new URL(window.location.href).origin||"null";if(b.includes(pe)||g.get("disableCORSCheck"))return;if(new URL(ee,window.location.href).origin!==pe)throw new Error("file origin does not match viewer's")}catch(pe){throw r.l10n.get("loading_error").then(we=>{r._documentError(we,{message:pe==null?void 0:pe.message})}),pe}};async function R(){var ee;(ee=c.GlobalWorkerOptions).workerSrc||(ee.workerSrc=g.get("workerSrc")),await(0,c.loadScript)(c.PDFWorker.workerSrc)}async function v(ee){const{debuggerScriptPath:pe}=ee.appConfig,{PDFBug:we}=await __non_webpack_import__(pe);ee._PDFBug=we}function T({pageNumber:ee}){var we,ie;if(!((we=globalThis.Stats)!=null&&we.enabled))return;const pe=r.pdfViewer.getPageView(ee-1);globalThis.Stats.add(ee,(ie=pe==null?void 0:pe.pdfPage)==null?void 0:ie.stats)}function o({pageNumber:ee}){var pe;ee===r.page&&((pe=r.toolbar)==null||pe.updateLoadingIndicatorState(!0))}function l({pageNumber:ee,error:pe}){var we,ie,_e;if(ee===r.page&&((we=r.toolbar)==null||we.updateLoadingIndicatorState(!1)),((ie=r.pdfSidebar)==null?void 0:ie.visibleView)===n.SidebarView.THUMBS){const ke=r.pdfViewer.getPageView(ee-1),Re=(_e=r.pdfThumbnailViewer)==null?void 0:_e.getThumbnail(ee-1);ke&&(Re==null||Re.setImage(ke))}pe&&r.l10n.get("rendering_error").then(ke=>{r._otherError(ke,pe)})}function S({mode:ee}){var we;let pe;switch(ee){case"thumbs":pe=n.SidebarView.THUMBS;break;case"bookmarks":case"outline":pe=n.SidebarView.OUTLINE;break;case"attachments":pe=n.SidebarView.ATTACHMENTS;break;case"layers":pe=n.SidebarView.LAYERS;break;case"none":pe=n.SidebarView.NONE;break;default:console.error('Invalid "pagemode" hash parameter: '+ee);return}(we=r.pdfSidebar)==null||we.switchView(pe,!0)}function y(ee){var pe;switch(ee.action){case"GoToPage":(pe=r.appConfig.toolbar)==null||pe.pageNumber.select();break;case"Find":r.supportsIntegratedFind||r==null||r.findBar.toggle();break;case"Print":r.triggerPrinting();break;case"SaveAs":r.downloadOrSave();break}}function w(ee){r.pdfViewer.presentationModeState=ee.state}function N({view:ee}){var pe;r.pdfRenderingQueue.isThumbnailViewEnabled=ee===n.SidebarView.THUMBS,r.isInitialViewSet&&((pe=r.store)==null||pe.set("sidebarView",ee).catch(()=>{}))}function D({location:ee}){var pe;if(r.isInitialViewSet&&((pe=r.store)==null||pe.setMultiple({page:ee.pageNumber,zoom:ee.scale,scrollLeft:ee.left,scrollTop:ee.top,rotation:ee.rotation}).catch(()=>{})),r.appConfig.secondaryToolbar){const we=r.pdfLinkService.getAnchorUrl(ee.pdfOpenParams);r.appConfig.secondaryToolbar.viewBookmarkButton.href=we}}function G(ee){var pe;r.isInitialViewSet&&!r.pdfViewer.isInPresentationMode&&((pe=r.store)==null||pe.set("scrollMode",ee.mode).catch(()=>{}))}function le(ee){var pe;r.isInitialViewSet&&!r.pdfViewer.isInPresentationMode&&((pe=r.store)==null||pe.set("spreadMode",ee.mode).catch(()=>{}))}function H(){const{pdfDocument:ee,pdfViewer:pe,pdfRenderingQueue:we}=r;if(we.printing&&window.matchMedia("print").matches||!ee)return;const ie=pe.currentScaleValue;(ie==="auto"||ie==="page-fit"||ie==="page-width")&&(pe.currentScaleValue=ie),pe.update()}function Z(ee){var we;const pe=ee.hash;pe&&(r.isInitialViewSet?(we=r.pdfHistory)!=null&&we.popStateInProgress||r.pdfLinkService.setHash(pe):r.initialBookmark=pe)}var re=function(ee){var we;if((we=r.pdfViewer)!=null&&we.isInPresentationMode)return;const pe=ee.fileInput.files[0];r.open({url:URL.createObjectURL(pe),originalUrl:pe.name})},Q=function(ee){r.appConfig.openFileInput.click()};function K(){r.requestPresentationMode()}function ue(ee){r.pdfViewer.annotationEditorMode=ee}function se(ee){r.pdfViewer.annotationEditorParams=ee}function Ce(){r.triggerPrinting()}function Me(){r.downloadOrSave()}function q(){r.openInExternalApp()}function M(){r.page=1}function F(){r.page=r.pagesCount}function d(){r.pdfViewer.nextPage()}function u(){r.pdfViewer.previousPage()}function x(){r.zoomIn()}function V(){r.zoomOut()}function W(){r.zoomReset()}function X(ee){var we;const pe=r.pdfViewer;ee.value!==""&&r.pdfLinkService.goToPage(ee.value),ee.value!==pe.currentPageNumber.toString()&&ee.value!==pe.currentPageLabel&&((we=r.toolbar)==null||we.setPageNumber(pe.currentPageNumber,pe.currentPageLabel))}function me(ee){r.pdfViewer.currentScaleValue=ee.value}function B(){r.rotatePages(90)}function O(){r.rotatePages(-90)}function $(ee){r.pdfViewer.optionalContentConfigPromise=ee.promise}function de(ee){r.pdfViewer.scrollMode=ee.mode}function te(ee){r.pdfViewer.spreadMode=ee.mode}function ve(){var ee;(ee=r.pdfDocumentProperties)==null||ee.open()}function Pe(ee){r.eventBus.dispatch("find",{source:ee.source,type:"",query:ee.query,caseSensitive:!1,entireWord:!1,highlightAll:!0,findPrevious:!1,matchDiacritics:!0})}function Se({matchesCount:ee}){r.supportsIntegratedFind?r.externalServices.updateFindMatchesCount(ee):r.findBar.updateResultsCount(ee)}function oe({state:ee,previous:pe,matchesCount:we,rawQuery:ie}){var _e;r.supportsIntegratedFind?r.externalServices.updateFindControlState({result:ee,findPrevious:pe,matchesCount:we,rawQuery:ie}):(_e=r.findBar)==null||_e.updateUIState(ee,pe,we)}function ae(ee){var pe;(pe=r.toolbar)==null||pe.setPageScale(ee.presetValue,ee.scale),r.pdfViewer.update()}function ne(ee){r.pdfThumbnailViewer&&(r.pdfThumbnailViewer.pagesRotation=ee.pagesRotation),r.forceRendering(),r.pdfViewer.currentPageNumber=ee.pageNumber}function ce({pageNumber:ee,pageLabel:pe}){var ie,_e,ke,Re,Fe;(ie=r.toolbar)==null||ie.setPageNumber(ee,pe),(_e=r.secondaryToolbar)==null||_e.setPageNumber(ee),((ke=r.pdfSidebar)==null?void 0:ke.visibleView)===n.SidebarView.THUMBS&&((Re=r.pdfThumbnailViewer)==null||Re.scrollThumbnailIntoView(ee));const we=r.pdfViewer.getPageView(ee-1);(Fe=r.toolbar)==null||Fe.updateLoadingIndicatorState((we==null?void 0:we.renderingState)===n.RenderingStates.RUNNING)}function be(ee){r.pdfViewer.refresh()}function Le(ee){document.visibilityState==="visible"&&Be()}let Te=null;function Be(){Te&&clearTimeout(Te),Te=setTimeout(function(){Te=null},A)}function Ne(ee){const{pdfViewer:pe,supportedMouseWheelZoomModifierKeys:we,supportsPinchToZoom:ie}=r;if(pe.isInPresentationMode)return;const _e=ee.deltaMode;let ke=Math.exp(-ee.deltaY/100);const Re=!1,Fe=ee.ctrlKey&&!r._isCtrlKeyDown&&_e===WheelEvent.DOM_DELTA_PIXEL&&ee.deltaX===0&&(Math.abs(ke-1)<.05||Re)&&ee.deltaZ===0;if(Fe||ee.ctrlKey&&we.ctrlKey||ee.metaKey&&we.metaKey){if(ee.preventDefault(),Te||document.visibilityState==="hidden"||r.overlayManager.active)return;const Ve=pe.currentScale;if(Fe&&ie)if(ke=r._accumulateFactor(Ve,ke,"_wheelUnusedFactor"),ke<1)r.zoomOut(null,ke);else if(ke>1)r.zoomIn(null,ke);else return;else{const We=(0,n.normalizeWheelEventDirection)(ee);let Oe=0;if(_e===WheelEvent.DOM_DELTA_LINE||_e===WheelEvent.DOM_DELTA_PAGE?Math.abs(We)>=1?Oe=Math.sign(We):Oe=r._accumulateTicks(We,"_wheelUnusedTicks"):Oe=r._accumulateTicks(We/30,"_wheelUnusedTicks"),Oe<0)r.zoomOut(-Oe);else if(Oe>0)r.zoomIn(Oe);else return}r._centerAtPos(Ve,ee.clientX,ee.clientY)}else Be()}function je(ee){if(r.pdfViewer.isInPresentationMode||ee.touches.length<2)return;if(ee.preventDefault(),ee.touches.length!==2||r.overlayManager.active){r._touchInfo=null;return}let[pe,we]=ee.touches;pe.identifier>we.identifier&&([pe,we]=[we,pe]),r._touchInfo={touch0X:pe.pageX,touch0Y:pe.pageY,touch1X:we.pageX,touch1Y:we.pageY}}function Ue(ee){if(!r._touchInfo||ee.touches.length!==2)return;const{pdfViewer:pe,_touchInfo:we,supportsPinchToZoom:ie}=r;let[_e,ke]=ee.touches;_e.identifier>ke.identifier&&([_e,ke]=[ke,_e]);const{pageX:Re,pageY:Fe}=_e,{pageX:Ve,pageY:We}=ke,{touch0X:Oe,touch0Y:Ye,touch1X:$e,touch1Y:ge}=we;if(Math.abs(Oe-Re)<=1&&Math.abs(Ye-Fe)<=1&&Math.abs($e-Ve)<=1&&Math.abs(ge-We)<=1)return;if(we.touch0X=Re,we.touch0Y=Fe,we.touch1X=Ve,we.touch1Y=We,Oe===Re&&Ye===Fe){const ye=$e-Re,Ae=ge-Fe,Ie=Ve-Re,De=We-Fe,ze=ye*De-Ae*Ie;if(Math.abs(ze)>.02*Math.hypot(ye,Ae)*Math.hypot(Ie,De))return}else if($e===Ve&&ge===We){const ye=Oe-Ve,Ae=Ye-We,Ie=Re-Ve,De=Fe-We,ze=ye*De-Ae*Ie;if(Math.abs(ze)>.02*Math.hypot(ye,Ae)*Math.hypot(Ie,De))return}else{const ye=Re-Oe,Ae=Ve-$e,Ie=Fe-Ye,De=We-ge;if(ye*Ae+Ie*De>=0)return}ee.preventDefault();const k=Math.hypot(Re-Ve,Fe-We)||1,J=Math.hypot(Oe-$e,Ye-ge)||1,fe=pe.currentScale;if(ie){const ye=r._accumulateFactor(fe,k/J,"_touchUnusedFactor");if(ye<1)r.zoomOut(null,ye);else if(ye>1)r.zoomIn(null,ye);else return}else{const Ae=r._accumulateTicks((k-J)/30,"_touchUnusedTicks");if(Ae<0)r.zoomOut(-Ae);else if(Ae>0)r.zoomIn(Ae);else return}r._centerAtPos(fe,(Re+Ve)/2,(Fe+We)/2)}function Ge(ee){r._touchInfo&&(ee.preventDefault(),r._touchInfo=null,r._touchUnusedTicks=0,r._touchUnusedFactor=1)}function qe(ee){var we,ie,_e;if(!((we=r.secondaryToolbar)!=null&&we.isOpen))return;const pe=r.appConfig;(r.pdfViewer.containsElement(ee.target)||(ie=pe.toolbar)!=null&&ie.container.contains(ee.target)&&ee.target!==((_e=pe.secondaryToolbar)==null?void 0:_e.toggleButton))&&r.secondaryToolbar.close()}function Qe(ee){ee.key==="Control"&&(r._isCtrlKeyDown=!1)}function xe(ee){var We,Oe,Ye,$e,ge,k;if(r._isCtrlKeyDown=ee.key==="Control",r.overlayManager.active)return;const{eventBus:pe,pdfViewer:we}=r,ie=we.isInPresentationMode;let _e=!1,ke=!1;const Re=(ee.ctrlKey?1:0)|(ee.altKey?2:0)|(ee.shiftKey?4:0)|(ee.metaKey?8:0);if(Re===1||Re===8||Re===5||Re===12)switch(ee.keyCode){case 70:!r.supportsIntegratedFind&&!ee.shiftKey&&((We=r.findBar)==null||We.open(),_e=!0);break;case 71:if(!r.supportsIntegratedFind){const{state:J}=r.findController;if(J){const fe={source:window,type:"again",findPrevious:Re===5||Re===12};pe.dispatch("find",{...J,...fe})}_e=!0}break;case 61:case 107:case 187:case 171:r.zoomIn(),_e=!0;break;case 173:case 109:case 189:r.zoomOut(),_e=!0;break;case 48:case 96:ie||(setTimeout(function(){r.zoomReset()}),_e=!1);break;case 38:(ie||r.page>1)&&(r.page=1,_e=!0,ke=!0);break;case 40:(ie||r.page<r.pagesCount)&&(r.page=r.pagesCount,_e=!0,ke=!0);break}if(Re===1||Re===8)switch(ee.keyCode){case 83:pe.dispatch("download",{source:window}),_e=!0;break;case 79:pe.dispatch("openfile",{source:window}),_e=!0;break}if(Re===3||Re===10)switch(ee.keyCode){case 80:r.requestPresentationMode(),_e=!0,r.externalServices.reportTelemetry({type:"buttons",data:{id:"presentationModeKeyboard"}});break;case 71:r.appConfig.toolbar&&(r.appConfig.toolbar.pageNumber.select(),_e=!0);break}if(_e){ke&&!ie&&we.focus(),ee.preventDefault();return}const Fe=(0,n.getActiveOrFocusedElement)(),Ve=Fe==null?void 0:Fe.tagName.toUpperCase();if(!((Ve==="INPUT"||Ve==="TEXTAREA"||Ve==="SELECT"||Fe!=null&&Fe.isContentEditable)&&ee.keyCode!==27)){if(Re===0){let J=0,fe=!1;switch(ee.keyCode){case 38:case 33:we.isVerticalScrollbarEnabled&&(fe=!0),J=-1;break;case 8:ie||(fe=!0),J=-1;break;case 37:we.isHorizontalScrollbarEnabled&&(fe=!0);case 75:case 80:J=-1;break;case 27:(Oe=r.secondaryToolbar)!=null&&Oe.isOpen&&(r.secondaryToolbar.close(),_e=!0),!r.supportsIntegratedFind&&((Ye=r.findBar)!=null&&Ye.opened)&&(r.findBar.close(),_e=!0);break;case 40:case 34:we.isVerticalScrollbarEnabled&&(fe=!0),J=1;break;case 13:case 32:ie||(fe=!0),J=1;break;case 39:we.isHorizontalScrollbarEnabled&&(fe=!0);case 74:case 78:J=1;break;case 36:(ie||r.page>1)&&(r.page=1,_e=!0,ke=!0);break;case 35:(ie||r.page<r.pagesCount)&&(r.page=r.pagesCount,_e=!0,ke=!0);break;case 83:($e=r.pdfCursorTools)==null||$e.switchTool(C.CursorTool.SELECT);break;case 72:(ge=r.pdfCursorTools)==null||ge.switchTool(C.CursorTool.HAND);break;case 82:r.rotatePages(90);break;case 115:(k=r.pdfSidebar)==null||k.toggle();break}J!==0&&(!fe||we.currentScaleValue==="page-fit")&&(J>0?we.nextPage():we.previousPage(),_e=!0)}if(Re===4)switch(ee.keyCode){case 13:case 32:if(!ie&&we.currentScaleValue!=="page-fit")break;we.previousPage(),_e=!0;break;case 82:r.rotatePages(-90);break}!_e&&!ie&&(ee.keyCode>=33&&ee.keyCode<=40||ee.keyCode===32&&Ve!=="BUTTON")&&(ke=!0),ke&&!we.containsElement(Fe)&&we.focus(),_e&&ee.preventDefault()}}function U(ee){return ee.preventDefault(),ee.returnValue="",!1}function Y(ee){r.externalServices.updateEditorStates(ee)}function Ee({details:ee}){r.externalServices.reportTelemetry(ee)}return{validateFileURL:P,loadFakeWorker:R,loadPDFBug:v,reportPageStatsPDFBug:T,webViewerPageRender:o,webViewerPageRendered:l,webViewerPageMode:S,webViewerNamedAction:y,webViewerPresentationModeChanged:w,webViewerSidebarViewChanged:N,webViewerUpdateViewarea:D,webViewerScrollModeChanged:G,webViewerSpreadModeChanged:le,webViewerResize:H,webViewerHashchange:Z,webViewerFileInputChange:re,webViewerOpenFile:Q,webViewerPresentationMode:K,webViewerSwitchAnnotationEditorMode:ue,webViewerSwitchAnnotationEditorParams:se,webViewerPrint:Ce,webViewerDownload:Me,webViewerOpenInExternalApp:q,webViewerFirstPage:M,webViewerLastPage:F,webViewerNextPage:d,webViewerPreviousPage:u,webViewerZoomIn:x,webViewerZoomOut:V,webViewerZoomReset:W,webViewerPageNumberChanged:X,webViewerScaleChanged:me,webViewerRotateCw:B,webViewerRotateCcw:O,webViewerOptionalContentConfig:$,webViewerSwitchScrollMode:de,webViewerSwitchSpreadMode:te,webViewerDocumentProperties:ve,webViewerFindFromUrlHash:Pe,webViewerUpdateFindMatchesCount:Se,webViewerUpdateFindControlState:oe,webViewerScaleChanging:ae,webViewerRotationChanging:ne,webViewerPageChanging:ce,webViewerResolutionChange:be,webViewerVisibilityChange:Le,setZoomDisabledTimeout:Be,webViewerWheel:Ne,webViewerTouchStart:je,webViewerTouchMove:Ue,webViewerTouchEnd:Ge,webViewerClick:qe,webViewerKeyUp:Qe,webViewerKeyDown:xe,beforeUnload:U,webViewerAnnotationEditorStatesChanged:Y,webViewerReportTelemetry:Ee}}},(L,_)=>{var de,te,ve,Pe,Se;Object.defineProperty(_,"__esModule",{value:!0}),_.animationStarted=_.VERTICAL_PADDING=_.UNKNOWN_SCALE=_.TextLayerMode=_.SpreadMode=_.SidebarView=_.ScrollMode=_.SCROLLBAR_PADDING=_.RenderingStates=_.ProgressBar=_.PresentationModeState=_.OutputScale=_.MIN_SCALE=_.MAX_SCALE=_.MAX_AUTO_SCALE=_.DEFAULT_SCALE_VALUE=_.DEFAULT_SCALE_DELTA=_.DEFAULT_SCALE=_.CursorTool=_.AutoPrintRegExp=void 0,_.apiPageLayoutToViewerModes=me,_.apiPageModeToSidebarView=B,_.approximateFraction=re,_.backtrackBeforeAllVisibleElements=ue,_.binarySearchFirstItem=Z,_.docStyle=void 0,_.getActiveOrFocusedElement=X,_.getPageSizeInches=K,_.getVisibleElements=se,_.isPortraitOrientation=d,_.isValidRotation=q,_.isValidScrollMode=M,_.isValidSpreadMode=F,_.normalizeWheelEventDelta=Me,_.normalizeWheelEventDirection=Ce,_.parseQueryString=G,_.removeNullCharacters=H,_.roundToDivide=Q,_.scrollIntoView=N,_.toggleCheckedBtn=O,_.toggleExpandedBtn=$,_.watchScroll=D;const m="auto";_.DEFAULT_SCALE_VALUE=m;const n=1;_.DEFAULT_SCALE=n;const c=1.1;_.DEFAULT_SCALE_DELTA=c;const C=.1;_.MIN_SCALE=C;const A=10;_.MAX_SCALE=A;const E=0;_.UNKNOWN_SCALE=E;const r=1.25;_.MAX_AUTO_SCALE=r;const g=40;_.SCROLLBAR_PADDING=g;const b=5;_.VERTICAL_PADDING=b;const P={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3};_.RenderingStates=P;const R={UNKNOWN:0,NORMAL:1,CHANGING:2,FULLSCREEN:3};_.PresentationModeState=R;const v={UNKNOWN:-1,NONE:0,THUMBS:1,OUTLINE:2,ATTACHMENTS:3,LAYERS:4};_.SidebarView=v;const T={DISABLE:0,ENABLE:1,ENABLE_PERMISSIONS:2};_.TextLayerMode=T;const o={UNKNOWN:-1,VERTICAL:0,HORIZONTAL:1,WRAPPED:2,PAGE:3};_.ScrollMode=o;const l={UNKNOWN:-1,NONE:0,ODD:1,EVEN:2};_.SpreadMode=l;const S={SELECT:0,HAND:1,ZOOM:2};_.CursorTool=S;const y=/\bprint\s*\(/;_.AutoPrintRegExp=y;class w{constructor(){const ae=window.devicePixelRatio||1;this.sx=ae,this.sy=ae}get scaled(){return this.sx!==1||this.sy!==1}}_.OutputScale=w;function N(oe,ae,ne=!1){let ce=oe.offsetParent;if(!ce){console.error("offsetParent is not set -- cannot scroll");return}let be=oe.offsetTop+oe.clientTop,Le=oe.offsetLeft+oe.clientLeft;for(;ce.clientHeight===ce.scrollHeight&&ce.clientWidth===ce.scrollWidth||ne&&(ce.classList.contains("markedContent")||getComputedStyle(ce).overflow==="hidden");)if(be+=ce.offsetTop,Le+=ce.offsetLeft,ce=ce.offsetParent,!ce)return;ae&&(ae.top!==void 0&&(be+=ae.top),ae.left!==void 0&&(Le+=ae.left,ce.scrollLeft=Le)),ce.scrollTop=be}function D(oe,ae){const ne=function(Le){be||(be=window.requestAnimationFrame(function(){be=null;const Be=oe.scrollLeft,Ne=ce.lastX;Be!==Ne&&(ce.right=Be>Ne),ce.lastX=Be;const je=oe.scrollTop,Ue=ce.lastY;je!==Ue&&(ce.down=je>Ue),ce.lastY=je,ae(ce)}))},ce={right:!0,down:!0,lastX:oe.scrollLeft,lastY:oe.scrollTop,_eventHandler:ne};let be=null;return oe.addEventListener("scroll",ne,!0),ce}function G(oe){const ae=new Map;for(const[ne,ce]of new URLSearchParams(oe))ae.set(ne.toLowerCase(),ce);return ae}const le=/[\x01-\x1F]/g;function H(oe,ae=!1){return typeof oe!="string"?(console.error("The argument must be a string."),oe):(ae&&(oe=oe.replaceAll(le," ")),oe.replaceAll("\0",""))}function Z(oe,ae,ne=0){let ce=ne,be=oe.length-1;if(be<0||!ae(oe[be]))return oe.length;if(ae(oe[ce]))return ce;for(;ce<be;){const Le=ce+be>>1,Te=oe[Le];ae(Te)?be=Le:ce=Le+1}return ce}function re(oe){if(Math.floor(oe)===oe)return[oe,1];const ae=1/oe,ne=8;if(ae>ne)return[1,ne];if(Math.floor(ae)===ae)return[1,ae];const ce=oe>1?ae:oe;let be=0,Le=1,Te=1,Be=1;for(;;){const je=be+Te,Ue=Le+Be;if(Ue>ne)break;ce<=je/Ue?(Te=je,Be=Ue):(be=je,Le=Ue)}let Ne;return ce-be/Le<Te/Be-ce?Ne=ce===oe?[be,Le]:[Le,be]:Ne=ce===oe?[Te,Be]:[Be,Te],Ne}function Q(oe,ae){const ne=oe%ae;return ne===0?oe:Math.round(oe-ne+ae)}function K({view:oe,userUnit:ae,rotate:ne}){const[ce,be,Le,Te]=oe,Be=ne%180!==0,Ne=(Le-ce)/72*ae,je=(Te-be)/72*ae;return{width:Be?je:Ne,height:Be?Ne:je}}function ue(oe,ae,ne){if(oe<2)return oe;let ce=ae[oe].div,be=ce.offsetTop+ce.clientTop;be>=ne&&(ce=ae[oe-1].div,be=ce.offsetTop+ce.clientTop);for(let Le=oe-2;Le>=0&&(ce=ae[Le].div,!(ce.offsetTop+ce.clientTop+ce.clientHeight<=be));--Le)oe=Le;return oe}function se({scrollEl:oe,views:ae,sortByVisibility:ne=!1,horizontal:ce=!1,rtl:be=!1}){const Le=oe.scrollTop,Te=Le+oe.clientHeight,Be=oe.scrollLeft,Ne=Be+oe.clientWidth;function je(ee){const pe=ee.div;return pe.offsetTop+pe.clientTop+pe.clientHeight>Le}function Ue(ee){const pe=ee.div,we=pe.offsetLeft+pe.clientLeft,ie=we+pe.clientWidth;return be?we<Ne:ie>Be}const Ge=[],qe=new Set,Qe=ae.length;let xe=Z(ae,ce?Ue:je);xe>0&&xe<Qe&&!ce&&(xe=ue(xe,ae,Le));let U=ce?Ne:-1;for(let ee=xe;ee<Qe;ee++){const pe=ae[ee],we=pe.div,ie=we.offsetLeft+we.clientLeft,_e=we.offsetTop+we.clientTop,ke=we.clientWidth,Re=we.clientHeight,Fe=ie+ke,Ve=_e+Re;if(U===-1)Ve>=Te&&(U=Ve);else if((ce?ie:_e)>U)break;if(Ve<=Le||_e>=Te||Fe<=Be||ie>=Ne)continue;const We=Math.max(0,Le-_e)+Math.max(0,Ve-Te),Oe=Math.max(0,Be-ie)+Math.max(0,Fe-Ne),Ye=(Re-We)/Re,$e=(ke-Oe)/ke,ge=Ye*$e*100|0;Ge.push({id:pe.id,x:ie,y:_e,view:pe,percent:ge,widthPercent:$e*100|0}),qe.add(pe.id)}const Y=Ge[0],Ee=Ge.at(-1);return ne&&Ge.sort(function(ee,pe){const we=ee.percent-pe.percent;return Math.abs(we)>.001?-we:ee.id-pe.id}),{first:Y,last:Ee,views:Ge,ids:qe}}function Ce(oe){let ae=Math.hypot(oe.deltaX,oe.deltaY);const ne=Math.atan2(oe.deltaY,oe.deltaX);return-.25*Math.PI<ne&&ne<.75*Math.PI&&(ae=-ae),ae}function Me(oe){const ae=oe.deltaMode;let ne=Ce(oe);const ce=30,be=30;return ae===WheelEvent.DOM_DELTA_PIXEL?ne/=ce*be:ae===WheelEvent.DOM_DELTA_LINE&&(ne/=be),ne}function q(oe){return Number.isInteger(oe)&&oe%90===0}function M(oe){return Number.isInteger(oe)&&Object.values(o).includes(oe)&&oe!==o.UNKNOWN}function F(oe){return Number.isInteger(oe)&&Object.values(l).includes(oe)&&oe!==l.UNKNOWN}function d(oe){return oe.width<=oe.height}const u=new Promise(function(oe){window.requestAnimationFrame(oe)});_.animationStarted=u;const x=document.documentElement.style;_.docStyle=x;function V(oe,ae,ne){return Math.min(Math.max(oe,ae),ne)}class W{constructor(ae){j(this,de,null);j(this,te,null);j(this,ve,0);j(this,Pe,null);j(this,Se,!0);he(this,de,ae.classList),he(this,Pe,ae.style)}get percent(){return s(this,ve)}set percent(ae){if(he(this,ve,V(ae,0,100)),isNaN(ae)){s(this,de).add("indeterminate");return}s(this,de).remove("indeterminate"),s(this,Pe).setProperty("--progressBar-percent",`${s(this,ve)}%`)}setWidth(ae){if(!ae)return;const ce=ae.parentNode.offsetWidth-ae.offsetWidth;ce>0&&s(this,Pe).setProperty("--progressBar-end-offset",`${ce}px`)}setDisableAutoFetch(ae=5e3){isNaN(s(this,ve))||(s(this,te)&&clearTimeout(s(this,te)),this.show(),he(this,te,setTimeout(()=>{he(this,te,null),this.hide()},ae)))}hide(){s(this,Se)&&(he(this,Se,!1),s(this,de).add("hidden"))}show(){s(this,Se)||(he(this,Se,!0),s(this,de).remove("hidden"))}}de=new WeakMap,te=new WeakMap,ve=new WeakMap,Pe=new WeakMap,Se=new WeakMap,_.ProgressBar=W;function X(){let oe=document,ae=oe.activeElement||oe.querySelector(":focus");for(;ae!=null&&ae.shadowRoot;)oe=ae.shadowRoot,ae=oe.activeElement||oe.querySelector(":focus");return ae}function me(oe){let ae=o.VERTICAL,ne=l.NONE;switch(oe){case"SinglePage":ae=o.PAGE;break;case"OneColumn":break;case"TwoPageLeft":ae=o.PAGE;case"TwoColumnLeft":ne=l.ODD;break;case"TwoPageRight":ae=o.PAGE;case"TwoColumnRight":ne=l.EVEN;break}return{scrollMode:ae,spreadMode:ne}}function B(oe){switch(oe){case"UseNone":return v.NONE;case"UseThumbs":return v.THUMBS;case"UseOutlines":return v.OUTLINE;case"UseAttachments":return v.ATTACHMENTS;case"UseOC":return v.LAYERS}return v.NONE}function O(oe,ae,ne=null){oe.classList.toggle("toggled",ae),oe.setAttribute("aria-checked",ae),ne==null||ne.classList.toggle("hidden",!ae)}function $(oe,ae,ne=null){oe.classList.toggle("toggled",ae),oe.setAttribute("aria-expanded",ae),ne==null||ne.classList.toggle("hidden",!ae)}},L=>{let _;typeof window<"u"&&window["pdfjs-dist/build/pdf"]?_=window["pdfjs-dist/build/pdf"]:_=requirePdf(),L.exports=_},(L,_,m)=>{var E,r,g,as;Object.defineProperty(_,"__esModule",{value:!0}),_.PDFCursorTools=void 0;var n=m(5),c=m(4),C=m(7);class A{constructor({container:R,eventBus:v,cursorToolOnLoad:T=c.CursorTool.SELECT}){j(this,g);j(this,E,c.CursorTool.SELECT);j(this,r,null);this.container=R,this.eventBus=v,z(this,g,as).call(this),Promise.resolve().then(()=>{this.switchTool(T)})}get activeTool(){return s(this,E)}switchTool(R){if(s(this,r)!==null||R===s(this,E))return;const v=()=>{switch(s(this,E)){case c.CursorTool.SELECT:break;case c.CursorTool.HAND:this._handTool.deactivate();break;case c.CursorTool.ZOOM:}};switch(R){case c.CursorTool.SELECT:v();break;case c.CursorTool.HAND:v(),this._handTool.activate();break;case c.CursorTool.ZOOM:default:console.error(`switchTool: "${R}" is an unsupported value.`);return}he(this,E,R),this.eventBus.dispatch("cursortoolchanged",{source:this,tool:R})}get _handTool(){return(0,n.shadow)(this,"_handTool",new C.GrabToPan({element:this.container}))}}E=new WeakMap,r=new WeakMap,g=new WeakSet,as=function(){this.eventBus._on("switchcursortool",l=>{this.switchTool(l.tool)});let R=n.AnnotationEditorType.NONE,v=c.PresentationModeState.NORMAL;const T=()=>{const l=s(this,E);this.switchTool(c.CursorTool.SELECT),s(this,r)??he(this,r,l)},o=()=>{const l=s(this,r);l!==null&&R===n.AnnotationEditorType.NONE&&v===c.PresentationModeState.NORMAL&&(he(this,r,null),this.switchTool(l))};this.eventBus._on("secondarytoolbarreset",l=>{s(this,r)!==null&&(R=n.AnnotationEditorType.NONE,v=c.PresentationModeState.NORMAL,o())}),this.eventBus._on("annotationeditormodechanged",({mode:l})=>{R=l,l===n.AnnotationEditorType.NONE?o():T()}),this.eventBus._on("presentationmodechanged",({state:l})=>{v=l,l===c.PresentationModeState.NORMAL?o():l===c.PresentationModeState.FULLSCREEN&&T()})},_.PDFCursorTools=A},(L,_)=>{var c,os,A,ls,r,cs;Object.defineProperty(_,"__esModule",{value:!0}),_.GrabToPan=void 0;const m="grab-to-pan-grab";class n{constructor({element:P}){j(this,c);j(this,A);j(this,r);this.element=P,this.document=P.ownerDocument,this.activate=this.activate.bind(this),this.deactivate=this.deactivate.bind(this),this.toggle=this.toggle.bind(this),this._onMouseDown=z(this,c,os).bind(this),this._onMouseMove=z(this,A,ls).bind(this),this._endPan=z(this,r,cs).bind(this);const R=this.overlay=document.createElement("div");R.className="grab-to-pan-grabbing"}activate(){this.active||(this.active=!0,this.element.addEventListener("mousedown",this._onMouseDown,!0),this.element.classList.add(m))}deactivate(){this.active&&(this.active=!1,this.element.removeEventListener("mousedown",this._onMouseDown,!0),this._endPan(),this.element.classList.remove(m))}toggle(){this.active?this.deactivate():this.activate()}ignoreTarget(P){return P.matches("a[href], a[href] *, input, textarea, button, button *, select, option")}}c=new WeakSet,os=function(P){if(P.button!==0||this.ignoreTarget(P.target))return;if(P.originalTarget)try{P.originalTarget.tagName}catch{return}this.scrollLeftStart=this.element.scrollLeft,this.scrollTopStart=this.element.scrollTop,this.clientXStart=P.clientX,this.clientYStart=P.clientY,this.document.addEventListener("mousemove",this._onMouseMove,!0),this.document.addEventListener("mouseup",this._endPan,!0),this.element.addEventListener("scroll",this._endPan,!0),P.preventDefault(),P.stopPropagation();const R=document.activeElement;R&&!R.contains(P.target)&&R.blur()},A=new WeakSet,ls=function(P){if(this.element.removeEventListener("scroll",this._endPan,!0),!(P.buttons&1)){this._endPan();return}const R=P.clientX-this.clientXStart,v=P.clientY-this.clientYStart;this.element.scrollTo({top:this.scrollTopStart-v,left:this.scrollLeftStart-R,behavior:"instant"}),this.overlay.parentNode||document.body.append(this.overlay)},r=new WeakSet,cs=function(){this.element.removeEventListener("scroll",this._endPan,!0),this.document.removeEventListener("mousemove",this._onMouseMove,!0),this.document.removeEventListener("mouseup",this._endPan,!0),this.overlay.remove()},_.GrabToPan=n},(L,_,m)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.ViewerApplication=_.PDFPrintServiceFactory=void 0;var n=m(4),c=m(5),C=m(9),A=m(10),E=m(11),r=m(12),g=m(13),b=m(14),P=m(15),R=m(16),v=m(6),T=m(18),o=m(19),l=m(20),S=m(22),y=m(23),w=m(24),N=m(25),D=m(26),G=m(27),le=m(28),H=m(29),Z=m(31),re=m(41),Q=m(42),K=m(43),ue=m(44);const se=1e4,Ce={UNKNOWN:-1,PREVIOUS:0,INITIAL:1},Me={AUTOMATIC:0,LIGHT:1,DARK:2},q={instance:{supportsPrinting:!1,createPrintService(){throw new Error("Not implemented: createPrintService")}}};_.PDFPrintServiceFactory=q;class M{constructor(){Je(this,"initialBookmark",document.location.hash.substring(1));Je(this,"_initializedCapability",new c.PromiseCapability);Je(this,"appConfig",null);Je(this,"pdfDocument",null);Je(this,"pdfLoadingTask",null);Je(this,"printService",null);Je(this,"pdfViewer",null);Je(this,"pdfThumbnailViewer",null);Je(this,"pdfRenderingQueue",null);Je(this,"pdfPresentationMode",null);Je(this,"pdfDocumentProperties",null);Je(this,"pdfLinkService",null);Je(this,"pdfHistory",null);Je(this,"pdfSidebar",null);Je(this,"pdfOutlineViewer",null);Je(this,"pdfAttachmentViewer",null);Je(this,"pdfLayerViewer",null);Je(this,"pdfCursorTools",null);Je(this,"pdfScriptingManager",null);Je(this,"store",null);Je(this,"downloadManager",null);Je(this,"overlayManager",null);Je(this,"preferences",null);Je(this,"toolbar",null);Je(this,"secondaryToolbar",null);Je(this,"eventBus",null);Je(this,"l10n",null);Je(this,"annotationEditorParams",null);Je(this,"isInitialViewSet",!1);Je(this,"downloadComplete",!1);Je(this,"isViewerEmbedded",window.parent!==window);Je(this,"url","");Je(this,"baseUrl","");Je(this,"_downloadUrl","");Je(this,"externalServices",ue.DefaultExternalServices);Je(this,"_boundEvents",Object.create(null));Je(this,"documentInfo",null);Je(this,"metadata",null);Je(this,"_contentDispositionFilename",null);Je(this,"_contentLength",null);Je(this,"_saveInProgress",!1);Je(this,"_wheelUnusedTicks",0);Je(this,"_wheelUnusedFactor",1);Je(this,"_touchUnusedTicks",0);Je(this,"_touchUnusedFactor",1);Je(this,"_PDFBug",null);Je(this,"_hasAnnotationEditors",!1);Je(this,"_title",document.title);Je(this,"_printAnnotationStoragePromise",null);Je(this,"_touchInfo",null);Je(this,"_isCtrlKeyDown",!1);Je(this,"_nimbusDataPromise",null)}async initialize(d){const{appOptions:u}=this;this.preferences=this.externalServices.createPreferences(),this.appConfig=d,await this._initializeOptions(),this._forceCssTheme(),await this._initializeL10n(),this.isViewerEmbedded&&u.get("externalLinkTarget")===E.LinkTarget.NONE&&u.set("externalLinkTarget",E.LinkTarget.TOP),await this._initializeViewerComponents(),this.bindEvents(),this.bindWindowEvents();const x=d.appContainer||document.documentElement;this.l10n.translate(x).then(()=>{this.eventBus.dispatch("localized",{source:this})}),this._initializedCapability.resolve()}async _initializeOptions(){const{appOptions:d}=this;if(d.get("disablePreferences")){d.get("pdfBugEnabled")&&await this._parseHashParams();return}d._hasUserOptions()&&console.warn('_initializeOptions: The Preferences may override manually set AppOptions; please use the "disablePreferences"-option in order to prevent that.');try{d.setAll(await this.preferences.getAll())}catch(u){console.error(`_initializeOptions: "${u.message}".`)}d.get("pdfBugEnabled")&&await this._parseHashParams()}async _parseHashParams(){const{appOptions:d}=this,u=document.location.hash.substring(1);if(!u)return;const{mainContainer:x,viewerContainer:V}=this.appConfig,W=(0,n.parseQueryString)(u);if(W.get("disableworker")==="true")try{await loadFakeWorker()}catch(X){console.error(`_parseHashParams: "${X.message}".`)}if(W.has("disablerange")&&d.set("disableRange",W.get("disablerange")==="true"),W.has("disablestream")&&d.set("disableStream",W.get("disablestream")==="true"),W.has("disableautofetch")&&d.set("disableAutoFetch",W.get("disableautofetch")==="true"),W.has("disablefontface")&&d.set("disableFontFace",W.get("disablefontface")==="true"),W.has("disablehistory")&&d.set("disableHistory",W.get("disablehistory")==="true"),W.has("verbosity")&&d.set("verbosity",W.get("verbosity")|0),W.has("textlayer"))switch(W.get("textlayer")){case"off":d.set("textLayerMode",n.TextLayerMode.DISABLE);break;case"visible":case"shadow":case"hover":V.classList.add(`textLayer-${W.get("textlayer")}`);try{await loadPDFBug(this),this._PDFBug.loadCSS()}catch(X){console.error(`_parseHashParams: "${X.message}".`)}break}if(W.has("pdfbug")){d.set("pdfBug",!0),d.set("fontExtraProperties",!0);const X=W.get("pdfbug").split(",");try{await loadPDFBug(this),this._PDFBug.init(x,X)}catch(me){console.error(`_parseHashParams: "${me.message}".`)}}W.has("locale")&&d.set("locale",W.get("locale"))}async _initializeL10n(){const{appOptions:d}=this;this.l10n=this.externalServices.createL10n({locale:d.get("locale")});const u=await this.l10n.getDirection();document.getElementsByTagName("html")[0].dir=u}_forceCssTheme(){var x;const{appOptions:d}=this,u=d.get("viewerCssTheme");if(!(u===Me.AUTOMATIC||!Object.values(Me).includes(u)))try{const V=document.styleSheets[0],W=(V==null?void 0:V.cssRules)||[];for(let X=0,me=W.length;X<me;X++){const B=W[X];if(B instanceof CSSMediaRule&&((x=B.media)==null?void 0:x[0])==="(prefers-color-scheme: dark)"){if(u===Me.LIGHT){V.deleteRule(X);return}const O=/^@media \(prefers-color-scheme: dark\) {\n\s*([\w\s-.,:;/\\{}()]+)\n}$/.exec(B.cssText);O!=null&&O[1]&&(V.deleteRule(X),V.insertRule(O[1],X));return}}}catch(V){console.error(`_forceCssTheme: "${V==null?void 0:V.message}".`)}}async _initializeViewerComponents(){var ne,ce,be,Le,Te,Be,Ne,je,Ue;const{appOptions:d}=this,{appConfig:u,externalServices:x,l10n:V}=this,W=x.isInAutomation?new A.AutomationEventBus:new A.EventBus;this.eventBus=W,this.overlayManager=new b.OverlayManager;const X=new D.PDFRenderingQueue;X.onIdle=this._cleanup.bind(this),this.pdfRenderingQueue=X;const me=new E.PDFLinkService({eventBus:W,externalLinkTarget:d.get("externalLinkTarget"),externalLinkRel:d.get("externalLinkRel"),ignoreDestinationZoom:d.get("ignoreDestinationZoom")});this.pdfLinkService=me;const B=x.createDownloadManager();this.downloadManager=B;const O=new l.PDFFindController({linkService:me,eventBus:W,updateMatchesCountOnProgress:!0});this.findController=O;const $=new G.PDFScriptingManager({eventBus:W,sandboxBundleSrc:d.get("sandboxBundleSrc"),externalServices:x,docProperties:this._scriptingDocProperties.bind(this)});this.pdfScriptingManager=$;const de=u.mainContainer,te=u.viewerContainer,ve=d.get("annotationEditorMode"),Pe=d.get("isOffscreenCanvasSupported")&&c.FeatureTest.isOffscreenCanvasSupported,Se=d.get("forcePageColors")||window.matchMedia("(forced-colors: active)").matches?{background:d.get("pageColorsBackground"),foreground:d.get("pageColorsForeground")}:null,oe=u.altTextDialog?new r.AltTextManager(u.altTextDialog,de,this.overlayManager,W):null,ae=new Z.PDFViewer({container:de,viewer:te,eventBus:W,renderingQueue:X,linkService:me,downloadManager:B,altTextManager:oe,findController:O,scriptingManager:d.get("enableScripting")&&$,l10n:V,textLayerMode:d.get("textLayerMode"),annotationMode:d.get("annotationMode"),annotationEditorMode:ve,imageResourcesPath:d.get("imageResourcesPath"),enablePrintAutoRotate:d.get("enablePrintAutoRotate"),isOffscreenCanvasSupported:Pe,maxCanvasPixels:d.get("maxCanvasPixels"),enablePermissions:d.get("enablePermissions"),pageColors:Se});if(this.pdfViewer=ae,X.setViewer(ae),me.setViewer(ae),$.setViewer(ae),(ne=u.sidebar)!=null&&ne.thumbnailView&&(this.pdfThumbnailViewer=new H.PDFThumbnailViewer({container:u.sidebar.thumbnailView,eventBus:W,renderingQueue:X,linkService:me,l10n:V,pageColors:Se}),X.setThumbnailViewer(this.pdfThumbnailViewer)),!this.isViewerEmbedded&&!d.get("disableHistory")&&(this.pdfHistory=new S.PDFHistory({linkService:me,eventBus:W}),me.setHistory(this.pdfHistory)),!this.supportsIntegratedFind&&u.findBar&&(this.findBar=new o.PDFFindBar(u.findBar,W,V)),u.annotationEditorParams)if(ve!==c.AnnotationEditorType.DISABLE)d.get("enableStampEditor")&&Pe&&((be=(ce=u.toolbar)==null?void 0:ce.editorStampButton)==null||be.classList.remove("hidden")),this.annotationEditorParams=new g.AnnotationEditorParams(u.annotationEditorParams,W);else for(const Ge of["editorModeButtons","editorModeSeparator"])(Le=document.getElementById(Ge))==null||Le.classList.add("hidden");u.documentProperties&&(this.pdfDocumentProperties=new T.PDFDocumentProperties(u.documentProperties,this.overlayManager,W,V,()=>this._docFilename)),(Te=u.secondaryToolbar)!=null&&Te.cursorHandToolButton&&(this.pdfCursorTools=new v.PDFCursorTools({container:de,eventBus:W,cursorToolOnLoad:d.get("cursorToolOnLoad")})),u.toolbar&&(this.toolbar=new Q.Toolbar(u.toolbar,W,V)),u.secondaryToolbar&&(this.secondaryToolbar=new re.SecondaryToolbar(u.secondaryToolbar,W)),this.supportsFullscreen&&((Be=u.secondaryToolbar)!=null&&Be.presentationModeButton)&&(this.pdfPresentationMode=new N.PDFPresentationMode({container:de,pdfViewer:ae,eventBus:W})),u.passwordOverlay&&(this.passwordPrompt=new P.PasswordPrompt(u.passwordOverlay,this.overlayManager,V,this.isViewerEmbedded)),(Ne=u.sidebar)!=null&&Ne.outlineView&&(this.pdfOutlineViewer=new w.PDFOutlineViewer({container:u.sidebar.outlineView,eventBus:W,linkService:me,downloadManager:B})),(je=u.sidebar)!=null&&je.attachmentsView&&(this.pdfAttachmentViewer=new R.PDFAttachmentViewer({container:u.sidebar.attachmentsView,eventBus:W,downloadManager:B})),(Ue=u.sidebar)!=null&&Ue.layersView&&(this.pdfLayerViewer=new y.PDFLayerViewer({container:u.sidebar.layersView,eventBus:W,l10n:V})),u.sidebar&&(this.pdfSidebar=new le.PDFSidebar({elements:u.sidebar,eventBus:W,l10n:V}),this.pdfSidebar.onToggled=this.forceRendering.bind(this),this.pdfSidebar.onUpdateThumbnails=()=>{var Ge;for(const qe of ae.getCachedPageViews())qe.renderingState===n.RenderingStates.FINISHED&&((Ge=this.pdfThumbnailViewer.getThumbnail(qe.id-1))==null||Ge.setImage(qe));this.pdfThumbnailViewer.scrollThumbnailIntoView(ae.currentPageNumber)})}async run(d,u){var $,de,te,ve,Pe,Se;const{appOptions:x}=this;await this.initialize(d);const{appConfig:V,eventBus:W}=this;let X;const me=document.location.search.substring(1);X=(0,n.parseQueryString)(me).get("file")??x.get("defaultUrl"),u(X);const O=V.openFileInput;O.value=null,O.addEventListener("change",function(oe){const{files:ae}=oe.target;!ae||ae.length===0||W.dispatch("fileinputchange",{source:this,fileInput:oe.target})}),V.mainContainer.addEventListener("dragover",function(oe){oe.preventDefault(),oe.dataTransfer.dropEffect=oe.dataTransfer.effectAllowed==="copy"?"copy":"move"}),V.mainContainer.addEventListener("drop",function(oe){oe.preventDefault();const{files:ae}=oe.dataTransfer;!ae||ae.length===0||W.dispatch("fileinputchange",{source:this,fileInput:oe.dataTransfer})}),this.supportsDocumentFonts||(x.set("disableFontFace",!0),this.l10n.get("web_fonts_disabled").then(oe=>{console.warn(oe)})),this.supportsPrinting||((de=($=V.toolbar)==null?void 0:$.print)==null||de.classList.add("hidden"),(te=V.secondaryToolbar)==null||te.printButton.classList.add("hidden")),this.supportsFullscreen||(ve=V.secondaryToolbar)==null||ve.presentationModeButton.classList.add("hidden"),this.supportsIntegratedFind&&((Se=(Pe=V.toolbar)==null?void 0:Pe.viewFind)==null||Se.classList.add("hidden")),V.mainContainer.addEventListener("transitionend",function(oe){oe.target===this&&W.dispatch("resize",{source:this})},!0),X?this.open({url:X}):this._hideViewBookmark()}get initialized(){return this._initializedCapability.settled}get initializedPromise(){return this._initializedCapability.promise}zoomIn(d,u){const{appOptions:x}=this;this.pdfViewer.isInPresentationMode||this.pdfViewer.increaseScale({drawingDelay:x.get("defaultZoomDelay"),steps:d,scaleFactor:u})}zoomOut(d,u){const{appOptions:x}=this;this.pdfViewer.isInPresentationMode||this.pdfViewer.decreaseScale({drawingDelay:x.get("defaultZoomDelay"),steps:d,scaleFactor:u})}zoomReset(){this.pdfViewer.isInPresentationMode||(this.pdfViewer.currentScaleValue=n.DEFAULT_SCALE_VALUE)}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return this.pdfViewer.currentPageNumber}set page(d){this.pdfViewer.currentPageNumber=d}get supportsPrinting(){return q.instance.supportsPrinting}get supportsFullscreen(){return(0,c.shadow)(this,"supportsFullscreen",document.fullscreenEnabled)}get supportsPinchToZoom(){return this.externalServices.supportsPinchToZoom}get supportsIntegratedFind(){return this.externalServices.supportsIntegratedFind}get supportsDocumentFonts(){return this.externalServices.supportsDocumentFonts}get loadingBar(){const d=document.getElementById("loadingBar"),u=d?new n.ProgressBar(d):null;return(0,c.shadow)(this,"loadingBar",u)}get supportedMouseWheelZoomModifierKeys(){return this.externalServices.supportedMouseWheelZoomModifierKeys}initPassiveLoading(d){throw new Error("Not implemented: initPassiveLoading")}setTitleUsingUrl(d="",u=null){this.url=d,this.baseUrl=d.split("#")[0],u&&(this._downloadUrl=u===d?this.baseUrl:u.split("#")[0]),(0,c.isDataScheme)(d)&&this._hideViewBookmark();let x=(0,c.getPdfFilenameFromUrl)(d,"");if(!x)try{x=decodeURIComponent((0,c.getFilenameFromUrl)(d))||d}catch{x=d}this.setTitle(x)}setTitle(d=this._title){if(this._title=d,this.isViewerEmbedded)return;const u=this._hasAnnotationEditors&&!this.pdfRenderingQueue.printing;document.title=`${u?"* ":""}${d}`}get _docFilename(){return this._contentDispositionFilename||(0,c.getPdfFilenameFromUrl)(this.url)}_hideViewBookmark(){var u;const{secondaryToolbar:d}=this.appConfig;d==null||d.viewBookmarkButton.classList.add("hidden"),d!=null&&d.presentationModeButton.classList.contains("hidden")&&((u=document.getElementById("viewBookmarkSeparator"))==null||u.classList.add("hidden"))}async close(){var u,x,V,W,X,me,B,O,$,de,te,ve;if(this._unblockDocumentLoadEvent(),this._hideViewBookmark(),!this.pdfLoadingTask)return;if(((u=this.pdfDocument)==null?void 0:u.annotationStorage.size)>0&&this._annotationStorageModified)try{await this.save()}catch{}const d=[];d.push(this.pdfLoadingTask.destroy()),this.pdfLoadingTask=null,this.pdfDocument&&(this.pdfDocument=null,(x=this.pdfThumbnailViewer)==null||x.setDocument(null),this.pdfViewer.setDocument(null),this.pdfLinkService.setDocument(null),(V=this.pdfDocumentProperties)==null||V.setDocument(null)),this.pdfLinkService.externalLinkEnabled=!0,this.store=null,this.isInitialViewSet=!1,this.downloadComplete=!1,this.url="",this.baseUrl="",this._downloadUrl="",this.documentInfo=null,this.metadata=null,this._contentDispositionFilename=null,this._contentLength=null,this._saveInProgress=!1,this._hasAnnotationEditors=!1,d.push(this.pdfScriptingManager.destroyPromise,this.passwordPrompt.close()),this.setTitle(),(W=this.pdfSidebar)==null||W.reset(),(X=this.pdfOutlineViewer)==null||X.reset(),(me=this.pdfAttachmentViewer)==null||me.reset(),(B=this.pdfLayerViewer)==null||B.reset(),(O=this.pdfHistory)==null||O.reset(),($=this.findBar)==null||$.reset(),(de=this.toolbar)==null||de.reset(),(te=this.secondaryToolbar)==null||te.reset(),(ve=this._PDFBug)==null||ve.cleanup(),await Promise.all(d)}async open(d){const{appOptions:u}=this;let x=!1;typeof d=="string"?(d={url:d},x=!0):d!=null&&d.byteLength&&(d={data:d},x=!0),x&&console.error("The `PDFViewerApplication.open` signature was updated, please use an object instead."),this.pdfLoadingTask&&await this.close();const V=u.getAll(C.OptionKind.WORKER);Object.assign(c.GlobalWorkerOptions,V),d.url&&this.setTitleUsingUrl(d.originalUrl||d.url,d.url);const W=u.getAll(C.OptionKind.API),X={canvasMaxAreaInBytes:this.externalServices.canvasMaxAreaInBytes,...W,...d},me=(0,c.getDocument)(X);return this.pdfLoadingTask=me,me.onPassword=(B,O)=>{this.isViewerEmbedded&&this._unblockDocumentLoadEvent(),this.pdfLinkService.externalLinkEnabled=!1,this.passwordPrompt.setUpdateCallback(B,O),this.passwordPrompt.open()},me.onProgress=({loaded:B,total:O})=>{this.progress(B/O)},me.promise.then(B=>{this.load(B)},B=>{if(me!==this.pdfLoadingTask)return;let O="loading_error";return B instanceof c.InvalidPDFException?O="invalid_file_error":B instanceof c.MissingPDFException?O="missing_file_error":B instanceof c.UnexpectedResponseException&&(O="unexpected_response_error"),this.l10n.get(O).then($=>{throw this._documentError($,{message:B==null?void 0:B.message}),B})})}_ensureDownloadComplete(){if(!(this.pdfDocument&&this.downloadComplete))throw new Error("PDF document not downloaded.")}async download(d={}){const u=this._downloadUrl,x=this._docFilename;try{this._ensureDownloadComplete();const V=await this.pdfDocument.getData(),W=new Blob([V],{type:"application/pdf"});await this.downloadManager.download(W,u,x,d)}catch{await this.downloadManager.downloadUrl(u,x,d)}}async save(d={}){if(this._saveInProgress)return;this._saveInProgress=!0,await this.pdfScriptingManager.dispatchWillSave();const u=this._downloadUrl,x=this._docFilename;try{this._ensureDownloadComplete();const V=await this.pdfDocument.saveDocument(),W=new Blob([V],{type:"application/pdf"});await this.downloadManager.download(W,u,x,d)}catch(V){console.error(`Error when saving the document: ${V.message}`),await this.download(d)}finally{await this.pdfScriptingManager.dispatchDidSave(),this._saveInProgress=!1}this._hasAnnotationEditors&&this.externalServices.reportTelemetry({type:"editing",data:{type:"save"}})}downloadOrSave(d={}){var u;((u=this.pdfDocument)==null?void 0:u.annotationStorage.size)>0?this.save(d):this.download(d)}openInExternalApp(){this.downloadOrSave({openInExternalApp:!0})}_documentError(d,u=null){this._unblockDocumentLoadEvent(),this._otherError(d,u),this.eventBus.dispatch("documenterror",{source:this,message:d,reason:(u==null?void 0:u.message)??null})}_otherError(d,u=null){const x=[`PDF.js v${c.version||"?"} (build: ${c.build||"?"})`];u&&(x.push(`Message: ${u.message}`),u.stack?x.push(`Stack: ${u.stack}`):(u.filename&&x.push(`File: ${u.filename}`),u.lineNumber&&x.push(`Line: ${u.lineNumber}`))),console.error(`${d}

${x.join(`
`)}`)}progress(d){var V;const{appOptions:u}=this;if(!this.loadingBar||this.downloadComplete)return;const x=Math.round(d*100);x<=this.loadingBar.percent||(this.loadingBar.percent=x,(((V=this.pdfDocument)==null?void 0:V.loadingParams.disableAutoFetch)??u.get("disableAutoFetch"))&&this.loadingBar.setDisableAutoFetch())}load(d){var de,te,ve,Pe;const{appOptions:u}=this;this.pdfDocument=d,d.getDownloadInfo().then(({length:Se})=>{var oe;this._contentLength=Se,this.downloadComplete=!0,(oe=this.loadingBar)==null||oe.hide(),me.then(()=>{this.eventBus.dispatch("documentloaded",{source:this})})});const x=d.getPageLayout().catch(()=>{}),V=d.getPageMode().catch(()=>{}),W=d.getOpenAction().catch(()=>{});(de=this.toolbar)==null||de.setPagesCount(d.numPages,!1),(te=this.secondaryToolbar)==null||te.setPagesCount(d.numPages),this.pdfLinkService.setDocument(d),(ve=this.pdfDocumentProperties)==null||ve.setDocument(d);const X=this.pdfViewer;X.setDocument(d);const{firstPagePromise:me,onePageRendered:B,pagesPromise:O}=X;(Pe=this.pdfThumbnailViewer)==null||Pe.setDocument(d);const $=(this.store=new K.ViewHistory(d.fingerprints[0])).getMultiple({page:null,zoom:n.DEFAULT_SCALE_VALUE,scrollLeft:"0",scrollTop:"0",rotation:null,sidebarView:n.SidebarView.UNKNOWN,scrollMode:n.ScrollMode.UNKNOWN,spreadMode:n.SpreadMode.UNKNOWN}).catch(()=>{});me.then(Se=>{var oe;(oe=this.loadingBar)==null||oe.setWidth(this.appConfig.viewerContainer),this._initializeAnnotationStorageCallbacks(d),Promise.all([n.animationStarted,$,x,V,W]).then(async([ae,ne,ce,be,Le])=>{const Te=u.get("viewOnLoad");this._initializePdfHistory({fingerprint:d.fingerprints[0],viewOnLoad:Te,initialDest:Le==null?void 0:Le.dest});const Be=this.initialBookmark,Ne=u.get("defaultZoomValue");let je=Ne?`zoom=${Ne}`:null,Ue=null,Ge=u.get("sidebarViewOnLoad"),qe=u.get("scrollModeOnLoad"),Qe=u.get("spreadModeOnLoad");ne!=null&&ne.page&&Te!==Ce.INITIAL&&(je=`page=${ne.page}&zoom=${Ne||ne.zoom},${ne.scrollLeft},${ne.scrollTop}`,Ue=parseInt(ne.rotation,10),Ge===n.SidebarView.UNKNOWN&&(Ge=ne.sidebarView|0),qe===n.ScrollMode.UNKNOWN&&(qe=ne.scrollMode|0),Qe===n.SpreadMode.UNKNOWN&&(Qe=ne.spreadMode|0)),be&&Ge===n.SidebarView.UNKNOWN&&(Ge=(0,n.apiPageModeToSidebarView)(be)),ce&&qe===n.ScrollMode.UNKNOWN&&Qe===n.SpreadMode.UNKNOWN&&(Qe=(0,n.apiPageLayoutToViewerModes)(ce).spreadMode),this.setInitialView(je,{rotation:Ue,sidebarView:Ge,scrollMode:qe,spreadMode:Qe}),this.eventBus.dispatch("documentinit",{source:this}),this.isViewerEmbedded||X.focus(),await Promise.race([O,new Promise(xe=>{setTimeout(xe,se)})]),!(!Be&&!je)&&(X.hasEqualPageSizes||(this.initialBookmark=Be,X.currentScaleValue=X.currentScaleValue,this.setInitialView(je)))}).catch(()=>{this.setInitialView()}).then(function(){X.update()})}),O.then(()=>{this._unblockDocumentLoadEvent(),this._initializeAutoPrint(d,W)},Se=>{this.l10n.get("loading_error").then(oe=>{this._documentError(oe,{message:Se==null?void 0:Se.message})})}),B.then(Se=>{this.externalServices.reportTelemetry({type:"pageInfo",timestamp:Se.timestamp}),this.pdfOutlineViewer&&d.getOutline().then(oe=>{d===this.pdfDocument&&this.pdfOutlineViewer.render({outline:oe,pdfDocument:d})}),this.pdfAttachmentViewer&&d.getAttachments().then(oe=>{d===this.pdfDocument&&this.pdfAttachmentViewer.render({attachments:oe})}),this.pdfLayerViewer&&X.optionalContentConfigPromise.then(oe=>{d===this.pdfDocument&&this.pdfLayerViewer.render({optionalContentConfig:oe,pdfDocument:d})})}),this._initializePageLabels(d),this._initializeMetadata(d)}async _scriptingDocProperties(d){var u,x;return!this.documentInfo&&(await new Promise(V=>{this.eventBus._on("metadataloaded",V,{once:!0})}),d!==this.pdfDocument)||!this._contentLength&&(await new Promise(V=>{this.eventBus._on("documentloaded",V,{once:!0})}),d!==this.pdfDocument)?null:{...this.documentInfo,baseURL:this.baseUrl,filesize:this._contentLength,filename:this._docFilename,metadata:(u=this.metadata)==null?void 0:u.getRaw(),authors:(x=this.metadata)==null?void 0:x.get("dc:creator"),numPages:this.pagesCount,URL:this.url}}async _initializeAutoPrint(d,u){const[x,V]=await Promise.all([u,this.pdfViewer.enableScripting?null:d.getJSActions()]);if(d!==this.pdfDocument)return;let W=(x==null?void 0:x.action)==="Print";if(V){console.warn("Warning: JavaScript support is not enabled");for(const X in V){if(W)break;switch(X){case"WillClose":case"WillSave":case"DidSave":case"WillPrint":case"DidPrint":continue}W=V[X].some(me=>n.AutoPrintRegExp.test(me))}}W&&this.triggerPrinting()}async _initializeMetadata(d){const{info:u,metadata:x,contentDispositionFilename:V,contentLength:W}=await d.getMetadata();if(d!==this.pdfDocument)return;this.documentInfo=u,this.metadata=x,this._contentDispositionFilename??(this._contentDispositionFilename=V),this._contentLength??(this._contentLength=W),console.log(`PDF ${d.fingerprints[0]} [${u.PDFFormatVersion} ${(u.Producer||"-").trim()} / ${(u.Creator||"-").trim()}] (PDF.js: ${c.version||"?"} [${c.build||"?"}])`);let X=u.Title;const me=x==null?void 0:x.get("dc:title");me&&me!=="Untitled"&&!/[\uFFF0-\uFFFF]/g.test(me)&&(X=me),X?this.setTitle(`${X} - ${this._contentDispositionFilename||this._title}`):this._contentDispositionFilename&&this.setTitle(this._contentDispositionFilename),u.IsXFAPresent&&!u.IsAcroFormPresent&&!d.isPureXfa?d.loadingParams.enableXfa?console.warn("Warning: XFA Foreground documents are not supported"):console.warn("Warning: XFA support is not enabled"):(u.IsAcroFormPresent||u.IsXFAPresent)&&!this.pdfViewer.renderForms&&console.warn("Warning: Interactive form support is not enabled"),u.IsSignaturesPresent&&console.warn("Warning: Digital signatures validation is not supported"),this.eventBus.dispatch("metadataloaded",{source:this})}async _initializePageLabels(d){const{appOptions:u}=this,x=await d.getPageLabels();if(d!==this.pdfDocument||!x||u.get("disablePageLabels"))return;const V=x.length;let W=0,X=0;for(let $=0;$<V;$++){const de=x[$];if(de===($+1).toString())W++;else if(de==="")X++;else break}if(W>=V||X>=V)return;const{pdfViewer:me,pdfThumbnailViewer:B,toolbar:O}=this;me.setPageLabels(x),B==null||B.setPageLabels(x),O==null||O.setPagesCount(V,!0),O==null||O.setPageNumber(me.currentPageNumber,me.currentPageLabel)}_initializePdfHistory({fingerprint:d,viewOnLoad:u,initialDest:x=null}){const{appOptions:V}=this;this.pdfHistory&&(this.pdfHistory.initialize({fingerprint:d,resetHistory:u===Ce.INITIAL,updateUrl:V.get("historyUpdateUrl")}),this.pdfHistory.initialBookmark&&(this.initialBookmark=this.pdfHistory.initialBookmark,this.initialRotation=this.pdfHistory.initialRotation),x&&!this.initialBookmark&&u===Ce.UNKNOWN&&(this.initialBookmark=JSON.stringify(x),this.pdfHistory.push({explicitDest:x,pageNumber:null})))}_initializeAnnotationStorageCallbacks(d){if(d!==this.pdfDocument)return;const{annotationStorage:u}=d;u.onSetModified=()=>{window.addEventListener("beforeunload",beforeUnload),this._annotationStorageModified=!0},u.onResetModified=()=>{window.removeEventListener("beforeunload",beforeUnload),delete this._annotationStorageModified},u.onAnnotationEditor=x=>{this._hasAnnotationEditors=!!x,this.setTitle(),x&&this.externalServices.reportTelemetry({type:"editing",data:{type:x}})}}setInitialView(d,{rotation:u,sidebarView:x,scrollMode:V,spreadMode:W}={}){var B,O,$;const X=de=>{(0,n.isValidRotation)(de)&&(this.pdfViewer.pagesRotation=de)},me=(de,te)=>{(0,n.isValidScrollMode)(de)&&(this.pdfViewer.scrollMode=de),(0,n.isValidSpreadMode)(te)&&(this.pdfViewer.spreadMode=te)};this.isInitialViewSet=!0,(B=this.pdfSidebar)==null||B.setInitialView(x),me(V,W),this.initialBookmark?(X(this.initialRotation),delete this.initialRotation,this.pdfLinkService.setHash(this.initialBookmark),this.initialBookmark=null):d&&(X(u),this.pdfLinkService.setHash(d)),(O=this.toolbar)==null||O.setPageNumber(this.pdfViewer.currentPageNumber,this.pdfViewer.currentPageLabel),($=this.secondaryToolbar)==null||$.setPageNumber(this.pdfViewer.currentPageNumber),this.pdfViewer.currentScaleValue||(this.pdfViewer.currentScaleValue=n.DEFAULT_SCALE_VALUE)}_cleanup(){var d;this.pdfDocument&&(this.pdfViewer.cleanup(),(d=this.pdfThumbnailViewer)==null||d.cleanup(),this.pdfDocument.cleanup())}forceRendering(){var d;this.pdfRenderingQueue.printing=!!this.printService,this.pdfRenderingQueue.isThumbnailViewEnabled=((d=this.pdfSidebar)==null?void 0:d.visibleView)===n.SidebarView.THUMBS,this.pdfRenderingQueue.renderHighestPriority()}beforePrint(){const{appOptions:d}=this;if(this._printAnnotationStoragePromise=this.pdfScriptingManager.dispatchWillPrint().catch(()=>{}).then(()=>{var me;return(me=this.pdfDocument)==null?void 0:me.annotationStorage.print}),this.printService)return;if(!this.supportsPrinting){this.l10n.get("printing_not_supported").then(me=>{this._otherError(me)});return}if(!this.pdfViewer.pageViewsReady){this.l10n.get("printing_not_ready").then(me=>{window.alert(me)});return}const u=this.pdfViewer.getPagesOverview(),x=this.appConfig.printContainer,V=d.get("printResolution"),W=this.pdfViewer.optionalContentConfigPromise,X=q.instance.createPrintService(this.pdfDocument,u,x,V,W,this._printAnnotationStoragePromise,this.l10n);this.printService=X,this.forceRendering(),this.setTitle(),X.layout(),this._hasAnnotationEditors&&this.externalServices.reportTelemetry({type:"editing",data:{type:"print"}})}afterPrint(){var d;this._printAnnotationStoragePromise&&(this._printAnnotationStoragePromise.then(()=>{this.pdfScriptingManager.dispatchDidPrint()}),this._printAnnotationStoragePromise=null),this.printService&&(this.printService.destroy(),this.printService=null,(d=this.pdfDocument)==null||d.annotationStorage.resetModified()),this.forceRendering(),this.setTitle()}rotatePages(d){this.pdfViewer.pagesRotation+=d}requestPresentationMode(){var d;(d=this.pdfPresentationMode)==null||d.request()}triggerPrinting(){this.supportsPrinting&&window.print()}bindEvents(){const{appOptions:d}=this,{eventBus:u,_boundEvents:x}=this;x.beforePrint=this.beforePrint.bind(this),x.afterPrint=this.afterPrint.bind(this),u._on("resize",webViewerResize),u._on("hashchange",webViewerHashchange),u._on("beforeprint",x.beforePrint),u._on("afterprint",x.afterPrint),u._on("pagerender",webViewerPageRender),u._on("pagerendered",webViewerPageRendered),u._on("updateviewarea",webViewerUpdateViewarea),u._on("pagechanging",webViewerPageChanging),u._on("scalechanging",webViewerScaleChanging),u._on("rotationchanging",webViewerRotationChanging),u._on("sidebarviewchanged",webViewerSidebarViewChanged),u._on("pagemode",webViewerPageMode),u._on("namedaction",webViewerNamedAction),u._on("presentationmodechanged",webViewerPresentationModeChanged),u._on("presentationmode",webViewerPresentationMode),u._on("switchannotationeditormode",webViewerSwitchAnnotationEditorMode),u._on("switchannotationeditorparams",webViewerSwitchAnnotationEditorParams),u._on("print",webViewerPrint),u._on("download",webViewerDownload),u._on("openinexternalapp",webViewerOpenInExternalApp),u._on("firstpage",webViewerFirstPage),u._on("lastpage",webViewerLastPage),u._on("nextpage",webViewerNextPage),u._on("previouspage",webViewerPreviousPage),u._on("zoomin",webViewerZoomIn),u._on("zoomout",webViewerZoomOut),u._on("zoomreset",webViewerZoomReset),u._on("pagenumberchanged",webViewerPageNumberChanged),u._on("scalechanged",webViewerScaleChanged),u._on("rotatecw",webViewerRotateCw),u._on("rotateccw",webViewerRotateCcw),u._on("optionalcontentconfig",webViewerOptionalContentConfig),u._on("switchscrollmode",webViewerSwitchScrollMode),u._on("scrollmodechanged",webViewerScrollModeChanged),u._on("switchspreadmode",webViewerSwitchSpreadMode),u._on("spreadmodechanged",webViewerSpreadModeChanged),u._on("documentproperties",webViewerDocumentProperties),u._on("findfromurlhash",webViewerFindFromUrlHash),u._on("updatefindmatchescount",webViewerUpdateFindMatchesCount),u._on("updatefindcontrolstate",webViewerUpdateFindControlState),d.get("pdfBug")&&(x.reportPageStatsPDFBug=reportPageStatsPDFBug,u._on("pagerendered",x.reportPageStatsPDFBug),u._on("pagechanging",x.reportPageStatsPDFBug)),u._on("fileinputchange",webViewerFileInputChange),u._on("openfile",webViewerOpenFile)}bindWindowEvents(){const{eventBus:d,_boundEvents:u}=this;function x(V=null){V&&webViewerResolutionChange(V);const W=window.matchMedia(`(resolution: ${window.devicePixelRatio||1}dppx)`);W.addEventListener("change",x,{once:!0}),u.removeWindowResolutionChange||(u.removeWindowResolutionChange=function(){W.removeEventListener("change",x),u.removeWindowResolutionChange=null})}x(),u.windowResize=()=>{d.dispatch("resize",{source:window})},u.windowHashChange=()=>{d.dispatch("hashchange",{source:window,hash:document.location.hash.substring(1)})},u.windowBeforePrint=()=>{d.dispatch("beforeprint",{source:window})},u.windowAfterPrint=()=>{d.dispatch("afterprint",{source:window})},u.windowUpdateFromSandbox=V=>{d.dispatch("updatefromsandbox",{source:window,detail:V.detail})},window.addEventListener("visibilitychange",webViewerVisibilityChange),window.addEventListener("wheel",webViewerWheel,{passive:!1}),window.addEventListener("touchstart",webViewerTouchStart,{passive:!1}),window.addEventListener("touchmove",webViewerTouchMove,{passive:!1}),window.addEventListener("touchend",webViewerTouchEnd,{passive:!1}),window.addEventListener("click",webViewerClick),window.addEventListener("keydown",webViewerKeyDown),window.addEventListener("keyup",webViewerKeyUp),window.addEventListener("resize",u.windowResize),window.addEventListener("hashchange",u.windowHashChange),window.addEventListener("beforeprint",u.windowBeforePrint),window.addEventListener("afterprint",u.windowAfterPrint),window.addEventListener("updatefromsandbox",u.windowUpdateFromSandbox)}unbindEvents(){const{eventBus:d,_boundEvents:u}=this;d._off("resize",webViewerResize),d._off("hashchange",webViewerHashchange),d._off("beforeprint",u.beforePrint),d._off("afterprint",u.afterPrint),d._off("pagerender",webViewerPageRender),d._off("pagerendered",webViewerPageRendered),d._off("updateviewarea",webViewerUpdateViewarea),d._off("pagechanging",webViewerPageChanging),d._off("scalechanging",webViewerScaleChanging),d._off("rotationchanging",webViewerRotationChanging),d._off("sidebarviewchanged",webViewerSidebarViewChanged),d._off("pagemode",webViewerPageMode),d._off("namedaction",webViewerNamedAction),d._off("presentationmodechanged",webViewerPresentationModeChanged),d._off("presentationmode",webViewerPresentationMode),d._off("print",webViewerPrint),d._off("download",webViewerDownload),d._off("openinexternalapp",webViewerOpenInExternalApp),d._off("firstpage",webViewerFirstPage),d._off("lastpage",webViewerLastPage),d._off("nextpage",webViewerNextPage),d._off("previouspage",webViewerPreviousPage),d._off("zoomin",webViewerZoomIn),d._off("zoomout",webViewerZoomOut),d._off("zoomreset",webViewerZoomReset),d._off("pagenumberchanged",webViewerPageNumberChanged),d._off("scalechanged",webViewerScaleChanged),d._off("rotatecw",webViewerRotateCw),d._off("rotateccw",webViewerRotateCcw),d._off("optionalcontentconfig",webViewerOptionalContentConfig),d._off("switchscrollmode",webViewerSwitchScrollMode),d._off("scrollmodechanged",webViewerScrollModeChanged),d._off("switchspreadmode",webViewerSwitchSpreadMode),d._off("spreadmodechanged",webViewerSpreadModeChanged),d._off("documentproperties",webViewerDocumentProperties),d._off("findfromurlhash",webViewerFindFromUrlHash),d._off("updatefindmatchescount",webViewerUpdateFindMatchesCount),d._off("updatefindcontrolstate",webViewerUpdateFindControlState),u.reportPageStatsPDFBug&&(d._off("pagerendered",u.reportPageStatsPDFBug),d._off("pagechanging",u.reportPageStatsPDFBug),u.reportPageStatsPDFBug=null),d._off("fileinputchange",webViewerFileInputChange),d._off("openfile",webViewerOpenFile),u.beforePrint=null,u.afterPrint=null}unbindWindowEvents(){var u;const{_boundEvents:d}=this;window.removeEventListener("visibilitychange",webViewerVisibilityChange),window.removeEventListener("wheel",webViewerWheel,{passive:!1}),window.removeEventListener("touchstart",webViewerTouchStart,{passive:!1}),window.removeEventListener("touchmove",webViewerTouchMove,{passive:!1}),window.removeEventListener("touchend",webViewerTouchEnd,{passive:!1}),window.removeEventListener("click",webViewerClick),window.removeEventListener("keydown",webViewerKeyDown),window.removeEventListener("keyup",webViewerKeyUp),window.removeEventListener("resize",d.windowResize),window.removeEventListener("hashchange",d.windowHashChange),window.removeEventListener("beforeprint",d.windowBeforePrint),window.removeEventListener("afterprint",d.windowAfterPrint),window.removeEventListener("updatefromsandbox",d.windowUpdateFromSandbox),(u=d.removeWindowResolutionChange)==null||u.call(d),d.windowResize=null,d.windowHashChange=null,d.windowBeforePrint=null,d.windowAfterPrint=null,d.windowUpdateFromSandbox=null}_accumulateTicks(d,u){(this[u]>0&&d<0||this[u]<0&&d>0)&&(this[u]=0),this[u]+=d;const x=Math.trunc(this[u]);return this[u]-=x,x}_accumulateFactor(d,u,x){if(u===1)return 1;(this[x]>1&&u<1||this[x]<1&&u>1)&&(this[x]=1);const V=Math.floor(d*u*this[x]*100)/(100*d);return this[x]=u/V,V}_centerAtPos(d,u,x){const{pdfViewer:V}=this,W=V.currentScale/d-1;if(W!==0){const[X,me]=V.containerTopLeft;V.container.scrollLeft+=(u-me)*W,V.container.scrollTop+=(x-X)*W}}_unblockDocumentLoadEvent(){var d;(d=document.blockUnblockOnload)==null||d.call(document,!1),this._unblockDocumentLoadEvent=()=>{}}get scriptingReady(){return this.pdfScriptingManager.ready}}_.ViewerApplication=M},(L,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.compatibilityParams=_.OptionKind=_.AppOptions=void 0;const m=Object.create(null);_.compatibilityParams=m;{const E=navigator.userAgent||"",r=navigator.platform||"",g=navigator.maxTouchPoints||1,b=/Android/.test(E),P=/\b(iPad|iPhone|iPod)(?=;)/.test(E)||r==="MacIntel"&&g>1;(function(){(P||b)&&(m.maxCanvasPixels=5242880)})()}const n={VIEWER:2,API:4,WORKER:8,PREFERENCE:128};_.OptionKind=n;const c={annotationEditorMode:{value:0,kind:n.VIEWER+n.PREFERENCE},annotationMode:{value:2,kind:n.VIEWER+n.PREFERENCE},cursorToolOnLoad:{value:0,kind:n.VIEWER+n.PREFERENCE},defaultZoomDelay:{value:400,kind:n.VIEWER+n.PREFERENCE},defaultZoomValue:{value:"",kind:n.VIEWER+n.PREFERENCE},disableHistory:{value:!1,kind:n.VIEWER},disablePageLabels:{value:!1,kind:n.VIEWER+n.PREFERENCE},enablePermissions:{value:!1,kind:n.VIEWER+n.PREFERENCE},enablePrintAutoRotate:{value:!0,kind:n.VIEWER+n.PREFERENCE},enableScripting:{value:!0,kind:n.VIEWER+n.PREFERENCE},enableStampEditor:{value:!0,kind:n.VIEWER+n.PREFERENCE},externalLinkRel:{value:"noopener noreferrer nofollow",kind:n.VIEWER},externalLinkTarget:{value:0,kind:n.VIEWER+n.PREFERENCE},historyUpdateUrl:{value:!1,kind:n.VIEWER+n.PREFERENCE},ignoreDestinationZoom:{value:!1,kind:n.VIEWER+n.PREFERENCE},imageResourcesPath:{value:"./images/",kind:n.VIEWER},maxCanvasPixels:{value:16777216,kind:n.VIEWER},forcePageColors:{value:!1,kind:n.VIEWER+n.PREFERENCE},pageColorsBackground:{value:"Canvas",kind:n.VIEWER+n.PREFERENCE},pageColorsForeground:{value:"CanvasText",kind:n.VIEWER+n.PREFERENCE},pdfBugEnabled:{value:!1,kind:n.VIEWER+n.PREFERENCE},printResolution:{value:150,kind:n.VIEWER},sidebarViewOnLoad:{value:-1,kind:n.VIEWER+n.PREFERENCE},scrollModeOnLoad:{value:-1,kind:n.VIEWER+n.PREFERENCE},spreadModeOnLoad:{value:-1,kind:n.VIEWER+n.PREFERENCE},textLayerMode:{value:1,kind:n.VIEWER+n.PREFERENCE},viewerCssTheme:{value:0,kind:n.VIEWER+n.PREFERENCE},viewOnLoad:{value:0,kind:n.VIEWER+n.PREFERENCE},cMapPacked:{value:!0,kind:n.API},cMapUrl:{value:"../web/cmaps/",kind:n.API},disableAutoFetch:{value:!1,kind:n.API+n.PREFERENCE},disableFontFace:{value:!1,kind:n.API+n.PREFERENCE},disableRange:{value:!1,kind:n.API+n.PREFERENCE},disableStream:{value:!1,kind:n.API+n.PREFERENCE},docBaseUrl:{value:"",kind:n.API},enableXfa:{value:!0,kind:n.API+n.PREFERENCE},fontExtraProperties:{value:!1,kind:n.API},isEvalSupported:{value:!0,kind:n.API},isOffscreenCanvasSupported:{value:!0,kind:n.API},maxImageSize:{value:-1,kind:n.API},pdfBug:{value:!1,kind:n.API},standardFontDataUrl:{value:"../web/standard_fonts/",kind:n.API},verbosity:{value:1,kind:n.API},workerPort:{value:null,kind:n.WORKER},workerSrc:{value:"../build/pdf.worker.js",kind:n.WORKER}};c.defaultUrl={value:"compressed.tracemonkey-pldi-09.pdf",kind:n.VIEWER},c.disablePreferences={value:!1,kind:n.VIEWER},c.locale={value:navigator.language||"en-US",kind:n.VIEWER},c.sandboxBundleSrc={value:"../build/pdf.sandbox.js",kind:n.VIEWER};const C=Object.create(null);class A{constructor(){throw new Error("Cannot initialize AppOptions.")}static get(r){const g=C[r];if(g!==void 0)return g;const b=c[r];if(b!==void 0)return m[r]??b.value}static getAll(r=null){const g=Object.create(null);for(const b in c){const P=c[b];if(r){if(!(r&P.kind))continue;if(r===n.PREFERENCE){const v=P.value,T=typeof v;if(T==="boolean"||T==="string"||T==="number"&&Number.isInteger(v)){g[b]=v;continue}throw new Error(`Invalid type for preference: ${b}`)}}const R=C[b];g[b]=R!==void 0?R:m[b]??P.value}return g}static set(r,g){C[r]=g}static setAll(r){for(const g in r)C[g]=r[g]}static remove(r){delete C[r]}}_.AppOptions=A,A._hasUserOptions=function(){return Object.keys(C).length>0}},(L,_)=>{var A;Object.defineProperty(_,"__esModule",{value:!0}),_.WaitOnType=_.EventBus=_.AutomationEventBus=void 0,_.waitOnEventOrTimeout=n;const m={EVENT:"event",TIMEOUT:"timeout"};_.WaitOnType=m;function n({target:E,name:r,delay:g=0}){return new Promise(function(b,P){if(typeof E!="object"||!(r&&typeof r=="string")||!(Number.isInteger(g)&&g>=0))throw new Error("waitOnEventOrTimeout - invalid parameters.");function R(l){E instanceof c?E._off(r,v):E.removeEventListener(r,v),o&&clearTimeout(o),b(l)}const v=R.bind(null,m.EVENT);E instanceof c?E._on(r,v):E.addEventListener(r,v);const T=R.bind(null,m.TIMEOUT),o=setTimeout(T,g)})}class c{constructor(){j(this,A,Object.create(null))}on(r,g,b=null){this._on(r,g,{external:!0,once:b==null?void 0:b.once})}off(r,g,b=null){this._off(r,g,{external:!0,once:b==null?void 0:b.once})}dispatch(r,g){const b=s(this,A)[r];if(!b||b.length===0)return;let P;for(const{listener:R,external:v,once:T}of b.slice(0)){if(T&&this._off(r,R),v){(P||(P=[])).push(R);continue}R(g)}if(P){for(const R of P)R(g);P=null}}_on(r,g,b=null){var R;((R=s(this,A))[r]||(R[r]=[])).push({listener:g,external:(b==null?void 0:b.external)===!0,once:(b==null?void 0:b.once)===!0})}_off(r,g,b=null){const P=s(this,A)[r];if(P){for(let R=0,v=P.length;R<v;R++)if(P[R].listener===g){P.splice(R,1);return}}}}A=new WeakMap,_.EventBus=c;class C extends c{dispatch(r,g){throw new Error("Not implemented: AutomationEventBus.dispatch")}}_.AutomationEventBus=C},(L,_,m)=>{var g,b,Ui,R,ds;Object.defineProperty(_,"__esModule",{value:!0}),_.SimpleLinkService=_.PDFLinkService=_.LinkTarget=void 0;var n=m(4);const c="noopener noreferrer nofollow",C={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4};_.LinkTarget=C;function A(o,{url:l,target:S,rel:y,enabled:w=!0}={}){if(!l||typeof l!="string")throw new Error('A valid "url" parameter must provided.');w?o.href=o.title=l:(o.href="",o.title=`Disabled: ${l}`,o.onclick=()=>!1);let N="";switch(S){case C.NONE:break;case C.SELF:N="_self";break;case C.BLANK:N="_blank";break;case C.PARENT:N="_parent";break;case C.TOP:N="_top";break}o.target=N,o.rel=typeof y=="string"?y:c}const T=class T{constructor({eventBus:l,externalLinkTarget:S=null,externalLinkRel:y=null,ignoreDestinationZoom:w=!1}={}){j(this,b);j(this,g,new Map);this.eventBus=l,this.externalLinkTarget=S,this.externalLinkRel=y,this.externalLinkEnabled=!0,this._ignoreDestinationZoom=w,this.baseUrl=null,this.pdfDocument=null,this.pdfViewer=null,this.pdfHistory=null}setDocument(l,S=null){this.baseUrl=S,this.pdfDocument=l,s(this,g).clear()}setViewer(l){this.pdfViewer=l}setHistory(l){this.pdfHistory=l}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return this.pdfViewer.currentPageNumber}set page(l){this.pdfViewer.currentPageNumber=l}get rotation(){return this.pdfViewer.pagesRotation}set rotation(l){this.pdfViewer.pagesRotation=l}get isInPresentationMode(){return this.pdfViewer.isInPresentationMode}async goToDestination(l){if(!this.pdfDocument)return;let S,y;if(typeof l=="string"?(S=l,y=await this.pdfDocument.getDestination(l)):(S=null,y=await l),!Array.isArray(y)){console.error(`PDFLinkService.goToDestination: "${y}" is not a valid destination array, for dest="${l}".`);return}z(this,b,Ui).call(this,l,S,y)}goToPage(l){if(!this.pdfDocument)return;const S=typeof l=="string"&&this.pdfViewer.pageLabelToPageNumber(l)||l|0;if(!(Number.isInteger(S)&&S>0&&S<=this.pagesCount)){console.error(`PDFLinkService.goToPage: "${l}" is not a valid page.`);return}this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.pushPage(S)),this.pdfViewer.scrollPageIntoView({pageNumber:S})}addLinkAttributes(l,S,y=!1){A(l,{url:S,target:y?C.BLANK:this.externalLinkTarget,rel:this.externalLinkRel,enabled:this.externalLinkEnabled})}getDestinationHash(l){if(typeof l=="string"){if(l.length>0)return this.getAnchorUrl("#"+escape(l))}else if(Array.isArray(l)){const S=JSON.stringify(l);if(S.length>0)return this.getAnchorUrl("#"+escape(S))}return this.getAnchorUrl("")}getAnchorUrl(l){return this.baseUrl?this.baseUrl+l:l}setHash(l){var w;if(!this.pdfDocument)return;let S,y;if(l.includes("=")){const N=(0,n.parseQueryString)(l);if(N.has("search")){const D=N.get("search").replaceAll('"',""),G=N.get("phrase")==="true";this.eventBus.dispatch("findfromurlhash",{source:this,query:G?D:D.match(/\S+/g)})}if(N.has("page")&&(S=N.get("page")|0||1),N.has("zoom")){const D=N.get("zoom").split(","),G=D[0],le=parseFloat(G);G.includes("Fit")?G==="Fit"||G==="FitB"?y=[null,{name:G}]:G==="FitH"||G==="FitBH"||G==="FitV"||G==="FitBV"?y=[null,{name:G},D.length>1?D[1]|0:null]:G==="FitR"?D.length!==5?console.error('PDFLinkService.setHash: Not enough parameters for "FitR".'):y=[null,{name:G},D[1]|0,D[2]|0,D[3]|0,D[4]|0]:console.error(`PDFLinkService.setHash: "${G}" is not a valid zoom value.`):y=[null,{name:"XYZ"},D.length>1?D[1]|0:null,D.length>2?D[2]|0:null,le?le/100:G]}y?this.pdfViewer.scrollPageIntoView({pageNumber:S||this.page,destArray:y,allowNegativeOffset:!0}):S&&(this.page=S),N.has("pagemode")&&this.eventBus.dispatch("pagemode",{source:this,mode:N.get("pagemode")}),N.has("nameddest")&&this.goToDestination(N.get("nameddest"))}else{y=unescape(l);try{y=JSON.parse(y),Array.isArray(y)||(y=y.toString())}catch{}if(typeof y=="string"||z(w=T,R,ds).call(w,y)){this.goToDestination(y);return}console.error(`PDFLinkService.setHash: "${unescape(l)}" is not a valid destination.`)}}executeNamedAction(l){var S,y;switch(l){case"GoBack":(S=this.pdfHistory)==null||S.back();break;case"GoForward":(y=this.pdfHistory)==null||y.forward();break;case"NextPage":this.pdfViewer.nextPage();break;case"PrevPage":this.pdfViewer.previousPage();break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1;break}this.eventBus.dispatch("namedaction",{source:this,action:l})}async executeSetOCGState(l){const S=this.pdfDocument,y=await this.pdfViewer.optionalContentConfigPromise;if(S!==this.pdfDocument)return;let w;for(const N of l.state){switch(N){case"ON":case"OFF":case"Toggle":w=N;continue}switch(w){case"ON":y.setVisibility(N,!0);break;case"OFF":y.setVisibility(N,!1);break;case"Toggle":const D=y.getGroup(N);D&&y.setVisibility(N,!D.visible);break}}this.pdfViewer.optionalContentConfigPromise=Promise.resolve(y)}cachePageRef(l,S){if(!S)return;const y=S.gen===0?`${S.num}R`:`${S.num}R${S.gen}`;s(this,g).set(y,l)}_cachedPageNumber(l){if(!l)return null;const S=l.gen===0?`${l.num}R`:`${l.num}R${l.gen}`;return s(this,g).get(S)||null}};g=new WeakMap,b=new WeakSet,Ui=function(l,S=null,y){const w=y[0];let N;if(typeof w=="object"&&w!==null){if(N=this._cachedPageNumber(w),!N){this.pdfDocument.getPageIndex(w).then(D=>{this.cachePageRef(D+1,w),z(this,b,Ui).call(this,l,S,y)}).catch(()=>{console.error(`PDFLinkService.#goToDestinationHelper: "${w}" is not a valid page reference, for dest="${l}".`)});return}}else if(Number.isInteger(w))N=w+1;else{console.error(`PDFLinkService.#goToDestinationHelper: "${w}" is not a valid destination reference, for dest="${l}".`);return}if(!N||N<1||N>this.pagesCount){console.error(`PDFLinkService.#goToDestinationHelper: "${N}" is not a valid page number, for dest="${l}".`);return}this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.push({namedDest:S,explicitDest:y,pageNumber:N})),this.pdfViewer.scrollPageIntoView({pageNumber:N,destArray:y,ignoreDestinationZoom:this._ignoreDestinationZoom})},R=new WeakSet,ds=function(l){if(!Array.isArray(l))return!1;const S=l.length;if(S<2)return!1;const y=l[0];if(!(typeof y=="object"&&Number.isInteger(y.num)&&Number.isInteger(y.gen))&&!(Number.isInteger(y)&&y>=0))return!1;const w=l[1];if(!(typeof w=="object"&&typeof w.name=="string"))return!1;let N=!0;switch(w.name){case"XYZ":if(S!==5)return!1;break;case"Fit":case"FitB":return S===2;case"FitH":case"FitBH":case"FitV":case"FitBV":if(S!==3)return!1;break;case"FitR":if(S!==6)return!1;N=!1;break;default:return!1}for(let D=2;D<S;D++){const G=l[D];if(!(typeof G=="number"||N&&G===null))return!1}return!0},j(T,R);let E=T;_.PDFLinkService=E;class r{constructor(){this.externalLinkEnabled=!0}get pagesCount(){return 0}get page(){return 0}set page(l){}get rotation(){return 0}set rotation(l){}get isInPresentationMode(){return!1}async goToDestination(l){}goToPage(l){}addLinkAttributes(l,S,y=!1){A(l,{url:S,enabled:this.externalLinkEnabled})}getDestinationHash(l){return"#"}getAnchorUrl(l){return"#"}setHash(l){}executeNamedAction(l){}executeSetOCGState(l){}cachePageRef(l,S){}}_.SimpleLinkService=r},(L,_,m)=>{var C,A,E,r,g,b,P,R,v,T,o,l,S,y,w,N,D,G,le,H,hs,re,ji,K,Zt,se,zi,Me,Wi,M,us,d,fs,x,$i;Object.defineProperty(_,"__esModule",{value:!0}),_.AltTextManager=void 0;var n=m(5);class c{constructor({dialog:X,optionDescription:me,optionDecorative:B,textarea:O,cancelButton:$,saveButton:de},te,ve,Pe){j(this,H);j(this,re);j(this,K);j(this,se);j(this,Me);j(this,M);j(this,d);j(this,x);j(this,C,z(this,Me,Wi).bind(this));j(this,A,z(this,re,ji).bind(this));j(this,E,z(this,d,fs).bind(this));j(this,r,null);j(this,g,void 0);j(this,b,void 0);j(this,P,void 0);j(this,R,!1);j(this,v,void 0);j(this,T,void 0);j(this,o,void 0);j(this,l,void 0);j(this,S,void 0);j(this,y,void 0);j(this,w,null);j(this,N,null);j(this,D,null);j(this,G,void 0);j(this,le,null);he(this,b,X),he(this,v,me),he(this,T,B),he(this,S,O),he(this,g,$),he(this,l,de),he(this,o,ve),he(this,P,Pe),he(this,G,te),X.addEventListener("close",z(this,se,zi).bind(this)),X.addEventListener("contextmenu",Se=>{Se.target!==s(this,S)&&Se.preventDefault()}),$.addEventListener("click",z(this,K,Zt).bind(this)),de.addEventListener("click",z(this,M,us).bind(this)),me.addEventListener("change",s(this,C)),B.addEventListener("change",s(this,C)),s(this,o).register(X)}get _elements(){return(0,n.shadow)(this,"_elements",[s(this,v),s(this,T),s(this,S),s(this,l),s(this,g)])}async editAltText(X,me){if(s(this,r)||!me)return;z(this,H,hs).call(this),he(this,R,!1);for(const $ of this._elements)$.addEventListener("click",s(this,E));const{altText:B,decorative:O}=me.altTextData;O===!0?(s(this,T).checked=!0,s(this,v).checked=!1):(s(this,T).checked=!1,s(this,v).checked=!0),he(this,w,s(this,S).value=(B==null?void 0:B.trim())||""),z(this,Me,Wi).call(this),he(this,r,me),he(this,y,X),s(this,y).removeEditListeners(),s(this,P)._on("resize",s(this,A));try{await s(this,o).open(s(this,b)),z(this,re,ji).call(this)}catch($){throw z(this,se,zi).call(this),$}}destroy(){var X;he(this,y,null),z(this,K,Zt).call(this),(X=s(this,N))==null||X.remove(),he(this,N,he(this,D,null))}}C=new WeakMap,A=new WeakMap,E=new WeakMap,r=new WeakMap,g=new WeakMap,b=new WeakMap,P=new WeakMap,R=new WeakMap,v=new WeakMap,T=new WeakMap,o=new WeakMap,l=new WeakMap,S=new WeakMap,y=new WeakMap,w=new WeakMap,N=new WeakMap,D=new WeakMap,G=new WeakMap,le=new WeakMap,H=new WeakSet,hs=function(){if(s(this,N))return;const X=new n.DOMSVGFactory,me=he(this,N,X.createElement("svg"));me.setAttribute("width","0"),me.setAttribute("height","0");const B=X.createElement("defs");me.append(B);const O=X.createElement("mask");B.append(O),O.setAttribute("id","alttext-manager-mask"),O.setAttribute("maskContentUnits","objectBoundingBox");let $=X.createElement("rect");O.append($),$.setAttribute("fill","white"),$.setAttribute("width","1"),$.setAttribute("height","1"),$.setAttribute("x","0"),$.setAttribute("y","0"),$=he(this,D,X.createElement("rect")),O.append($),$.setAttribute("fill","black"),s(this,b).append(me)},re=new WeakSet,ji=function(){if(!s(this,r))return;const X=s(this,b),{style:me}=X,{x:B,y:O,width:$,height:de}=s(this,G).getBoundingClientRect(),{innerWidth:te,innerHeight:ve}=window,{width:Pe,height:Se}=X.getBoundingClientRect(),{x:oe,y:ae,width:ne,height:ce}=s(this,r).getClientDimensions(),be=10,Le=s(this,y).direction==="ltr",Te=Math.max(oe,B),Be=Math.min(oe+ne,B+$),Ne=Math.max(ae,O),je=Math.min(ae+ce,O+de);s(this,D).setAttribute("width",`${(Be-Te)/te}`),s(this,D).setAttribute("height",`${(je-Ne)/ve}`),s(this,D).setAttribute("x",`${Te/te}`),s(this,D).setAttribute("y",`${Ne/ve}`);let Ue=null,Ge=Math.max(ae,0);Ge+=Math.min(ve-(Ge+Se),0),Le?oe+ne+be+Pe<te?Ue=oe+ne+be:oe>Pe+be&&(Ue=oe-Pe-be):oe>Pe+be?Ue=oe-Pe-be:oe+ne+be+Pe<te&&(Ue=oe+ne+be),Ue===null&&(Ge=null,Ue=Math.max(oe,0),Ue+=Math.min(te-(Ue+Pe),0),ae>Se+be?Ge=ae-Se-be:ae+ce+be+Se<ve&&(Ge=ae+ce+be)),Ge!==null?(X.classList.add("positioned"),Le?me.left=`${Ue}px`:me.right=`${te-Ue-Pe}px`,me.top=`${Ge}px`):(X.classList.remove("positioned"),me.left="",me.top="")},K=new WeakSet,Zt=function(){s(this,o).active===s(this,b)&&s(this,o).close(s(this,b))},se=new WeakSet,zi=function(){var X;s(this,P).dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:s(this,r).editorType,data:s(this,le)||{action:"alt_text_cancel",alt_text_keyboard:!s(this,R)}}}),he(this,le,null),z(this,x,$i).call(this),(X=s(this,y))==null||X.addEditListeners(),s(this,P)._off("resize",s(this,A)),he(this,r,null),he(this,y,null)},Me=new WeakSet,Wi=function(){s(this,S).disabled=s(this,T).checked},M=new WeakSet,us=function(){const X=s(this,S).value.trim(),me=s(this,T).checked;s(this,r).altTextData={altText:X,decorative:me},he(this,le,{action:"alt_text_save",alt_text_description:!!X,alt_text_edit:!!s(this,w)&&s(this,w)!==X,alt_text_decorative:me,alt_text_keyboard:!s(this,R)}),z(this,K,Zt).call(this)},d=new WeakSet,fs=function(X){X.detail!==0&&(he(this,R,!0),z(this,x,$i).call(this))},x=new WeakSet,$i=function(){for(const X of this._elements)X.removeEventListener("click",s(this,E))},_.AltTextManager=c},(L,_,m)=>{var C,ps;Object.defineProperty(_,"__esModule",{value:!0}),_.AnnotationEditorParams=void 0;var n=m(5);class c{constructor(r,g){j(this,C);this.eventBus=g,z(this,C,ps).call(this,r)}}C=new WeakSet,ps=function({editorFreeTextFontSize:r,editorFreeTextColor:g,editorInkColor:b,editorInkThickness:P,editorInkOpacity:R,editorStampAddImage:v}){const T=(o,l)=>{this.eventBus.dispatch("switchannotationeditorparams",{source:this,type:n.AnnotationEditorParamsType[o],value:l})};r.addEventListener("input",function(){T("FREETEXT_SIZE",this.valueAsNumber)}),g.addEventListener("input",function(){T("FREETEXT_COLOR",this.value)}),b.addEventListener("input",function(){T("INK_COLOR",this.value)}),P.addEventListener("input",function(){T("INK_THICKNESS",this.valueAsNumber)}),R.addEventListener("input",function(){T("INK_OPACITY",this.valueAsNumber)}),v.addEventListener("click",()=>{T("CREATE")}),this.eventBus._on("annotationeditorparamschanged",o=>{for(const[l,S]of o.details)switch(l){case n.AnnotationEditorParamsType.FREETEXT_SIZE:r.value=S;break;case n.AnnotationEditorParamsType.FREETEXT_COLOR:g.value=S;break;case n.AnnotationEditorParamsType.INK_COLOR:b.value=S;break;case n.AnnotationEditorParamsType.INK_THICKNESS:P.value=S;break;case n.AnnotationEditorParamsType.INK_OPACITY:R.value=S;break}})},_.AnnotationEditorParams=c},(L,_)=>{var n,c;Object.defineProperty(_,"__esModule",{value:!0}),_.OverlayManager=void 0;class m{constructor(){j(this,n,new WeakMap);j(this,c,null)}get active(){return s(this,c)}async register(A,E=!1){if(typeof A!="object")throw new Error("Not enough parameters.");if(s(this,n).has(A))throw new Error("The overlay is already registered.");s(this,n).set(A,{canForceClose:E}),A.addEventListener("cancel",r=>{he(this,c,null)})}async open(A){if(s(this,n).has(A)){if(s(this,c)){if(s(this,c)===A)throw new Error("The overlay is already active.");if(s(this,n).get(A).canForceClose)await this.close();else throw new Error("Another overlay is currently active.")}}else throw new Error("The overlay does not exist.");he(this,c,A),A.showModal()}async close(A=s(this,c)){if(s(this,n).has(A))if(s(this,c)){if(s(this,c)!==A)throw new Error("Another overlay is currently active.")}else throw new Error("The overlay is currently not active.");else throw new Error("The overlay does not exist.");A.close(),he(this,c,null)}}n=new WeakMap,c=new WeakMap,_.OverlayManager=m},(L,_,m)=>{var C,A,E,r,Gi,b,gs,R,qi;Object.defineProperty(_,"__esModule",{value:!0}),_.PasswordPrompt=void 0;var n=m(5);class c{constructor(o,l,S,y=!1){j(this,r);j(this,b);j(this,R);j(this,C,null);j(this,A,null);j(this,E,null);this.dialog=o.dialog,this.label=o.label,this.input=o.input,this.submitButton=o.submitButton,this.cancelButton=o.cancelButton,this.overlayManager=l,this.l10n=S,this._isViewerEmbedded=y,this.submitButton.addEventListener("click",z(this,r,Gi).bind(this)),this.cancelButton.addEventListener("click",this.close.bind(this)),this.input.addEventListener("keydown",w=>{w.keyCode===13&&z(this,r,Gi).call(this)}),this.overlayManager.register(this.dialog,!0),this.dialog.addEventListener("close",z(this,b,gs).bind(this))}async open(){s(this,C)&&await s(this,C).promise,he(this,C,new n.PromiseCapability);try{await this.overlayManager.open(this.dialog)}catch(l){throw s(this,C).resolve(),l}const o=s(this,E)===n.PasswordResponses.INCORRECT_PASSWORD;(!this._isViewerEmbedded||o)&&this.input.focus(),this.label.textContent=await this.l10n.get(`password_${o?"invalid":"label"}`)}async close(){this.overlayManager.active===this.dialog&&this.overlayManager.close(this.dialog)}async setUpdateCallback(o,l){s(this,C)&&await s(this,C).promise,he(this,A,o),he(this,E,l)}}C=new WeakMap,A=new WeakMap,E=new WeakMap,r=new WeakSet,Gi=function(){const o=this.input.value;(o==null?void 0:o.length)>0&&z(this,R,qi).call(this,o)},b=new WeakSet,gs=function(){z(this,R,qi).call(this,new Error("PasswordPrompt cancelled.")),s(this,C).resolve()},R=new WeakSet,qi=function(o){s(this,A)&&(this.close(),this.input.value="",s(this,A).call(this,o),he(this,A,null))},_.PasswordPrompt=c},(L,_,m)=>{var E,ms;Object.defineProperty(_,"__esModule",{value:!0}),_.PDFAttachmentViewer=void 0;var n=m(5),c=m(17),C=m(10);class A extends c.BaseTreeViewer{constructor(P){super(P);j(this,E);this.downloadManager=P.downloadManager,this.eventBus._on("fileattachmentannotation",z(this,E,ms).bind(this))}reset(P=!1){super.reset(),this._attachments=null,P||(this._renderedCapability=new n.PromiseCapability),this._pendingDispatchEvent=!1}async _dispatchEvent(P){this._renderedCapability.resolve(),!(P===0&&!this._pendingDispatchEvent&&(this._pendingDispatchEvent=!0,await(0,C.waitOnEventOrTimeout)({target:this.eventBus,name:"annotationlayerrendered",delay:1e3}),!this._pendingDispatchEvent))&&(this._pendingDispatchEvent=!1,this.eventBus.dispatch("attachmentsloaded",{source:this,attachmentsCount:P}))}_bindLink(P,{content:R,filename:v}){P.onclick=()=>(this.downloadManager.openOrDownloadData(P,R,v),!1)}render({attachments:P,keepRenderedCapability:R=!1}){if(this._attachments&&this.reset(R),this._attachments=P||null,!P){this._dispatchEvent(0);return}const v=document.createDocumentFragment();let T=0;for(const o in P){const l=P[o],S=l.content,y=(0,n.getFilenameFromUrl)(l.filename,!0),w=document.createElement("div");w.className="treeItem";const N=document.createElement("a");this._bindLink(N,{content:S,filename:y}),N.textContent=this._normalizeTextContent(y),w.append(N),v.append(w),T++}this._finishRendering(v,T)}}E=new WeakSet,ms=function({filename:P,content:R}){const v=this._renderedCapability.promise;v.then(()=>{if(v!==this._renderedCapability.promise)return;const T=this._attachments||Object.create(null);for(const o in T)if(P===o)return;T[P]={filename:P,content:R},this.render({attachments:T,keepRenderedCapability:!0})})},_.PDFAttachmentViewer=A},(L,_,m)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.BaseTreeViewer=void 0;var n=m(4);const c=-100,C="selected";class A{constructor(r){if(this.constructor===A)throw new Error("Cannot initialize BaseTreeViewer.");this.container=r.container,this.eventBus=r.eventBus,this.reset()}reset(){this._pdfDocument=null,this._lastToggleIsShow=!0,this._currentTreeItem=null,this.container.textContent="",this.container.classList.remove("treeWithDeepNesting")}_dispatchEvent(r){throw new Error("Not implemented: _dispatchEvent")}_bindLink(r,g){throw new Error("Not implemented: _bindLink")}_normalizeTextContent(r){return(0,n.removeNullCharacters)(r,!0)||""}_addToggleButton(r,g=!1){const b=document.createElement("div");b.className="treeItemToggler",g&&b.classList.add("treeItemsHidden"),b.onclick=P=>{if(P.stopPropagation(),b.classList.toggle("treeItemsHidden"),P.shiftKey){const R=!b.classList.contains("treeItemsHidden");this._toggleTreeItem(r,R)}},r.prepend(b)}_toggleTreeItem(r,g=!1){this._lastToggleIsShow=g;for(const b of r.querySelectorAll(".treeItemToggler"))b.classList.toggle("treeItemsHidden",!g)}_toggleAllTreeItems(){this._toggleTreeItem(this.container,!this._lastToggleIsShow)}_finishRendering(r,g,b=!1){b&&(this.container.classList.add("treeWithDeepNesting"),this._lastToggleIsShow=!r.querySelector(".treeItemsHidden")),this.container.append(r),this._dispatchEvent(g)}render(r){throw new Error("Not implemented: render")}_updateCurrentTreeItem(r=null){this._currentTreeItem&&(this._currentTreeItem.classList.remove(C),this._currentTreeItem=null),r&&(r.classList.add(C),this._currentTreeItem=r)}_scrollToCurrentTreeItem(r){if(!r)return;let g=r.parentNode;for(;g&&g!==this.container;){if(g.classList.contains("treeItem")){const b=g.firstElementChild;b==null||b.classList.remove("treeItemsHidden")}g=g.parentNode}this._updateCurrentTreeItem(r),this.container.scrollTo(r.offsetLeft,r.offsetTop+c)}}_.BaseTreeViewer=A},(L,_,m)=>{var P,R,Xi,T,xt,l,Ki,y,bs,N,Yi,G,_s;Object.defineProperty(_,"__esModule",{value:!0}),_.PDFDocumentProperties=void 0;var n=m(4),c=m(5);const C="-",A=["en-us","en-lr","my"],E={"8.5x11":"Letter","8.5x14":"Legal"},r={"297x420":"A3","210x297":"A4"};function g(H,Z,re){const Q=Z?H.width:H.height,K=Z?H.height:H.width;return re[`${Q}x${K}`]}class b{constructor({dialog:Z,fields:re,closeButton:Q},K,ue,se,Ce){j(this,R);j(this,T);j(this,l);j(this,y);j(this,N);j(this,G);j(this,P,null);this.dialog=Z,this.fields=re,this.overlayManager=K,this.l10n=se,this._fileNameLookup=Ce,z(this,R,Xi).call(this),Q.addEventListener("click",this.close.bind(this)),this.overlayManager.register(this.dialog),ue._on("pagechanging",Me=>{this._currentPageNumber=Me.pageNumber}),ue._on("rotationchanging",Me=>{this._pagesRotation=Me.pagesRotation}),this._isNonMetricLocale=!0,se.getLanguage().then(Me=>{this._isNonMetricLocale=A.includes(Me)})}async open(){await Promise.all([this.overlayManager.open(this.dialog),this._dataAvailableCapability.promise]);const Z=this._currentPageNumber,re=this._pagesRotation;if(s(this,P)&&Z===s(this,P)._currentPageNumber&&re===s(this,P)._pagesRotation){z(this,T,xt).call(this);return}const{info:Q,contentLength:K}=await this.pdfDocument.getMetadata(),[ue,se,Ce,Me,q,M]=await Promise.all([this._fileNameLookup(),z(this,l,Ki).call(this,K),z(this,N,Yi).call(this,Q.CreationDate),z(this,N,Yi).call(this,Q.ModDate),this.pdfDocument.getPage(Z).then(u=>z(this,y,bs).call(this,(0,n.getPageSizeInches)(u),re)),z(this,G,_s).call(this,Q.IsLinearized)]);he(this,P,Object.freeze({fileName:ue,fileSize:se,title:Q.Title,author:Q.Author,subject:Q.Subject,keywords:Q.Keywords,creationDate:Ce,modificationDate:Me,creator:Q.Creator,producer:Q.Producer,version:Q.PDFFormatVersion,pageCount:this.pdfDocument.numPages,pageSize:q,linearized:M,_currentPageNumber:Z,_pagesRotation:re})),z(this,T,xt).call(this);const{length:F}=await this.pdfDocument.getDownloadInfo();if(K===F)return;const d=Object.assign(Object.create(null),s(this,P));d.fileSize=await z(this,l,Ki).call(this,F),he(this,P,Object.freeze(d)),z(this,T,xt).call(this)}async close(){this.overlayManager.close(this.dialog)}setDocument(Z){this.pdfDocument&&(z(this,R,Xi).call(this),z(this,T,xt).call(this,!0)),Z&&(this.pdfDocument=Z,this._dataAvailableCapability.resolve())}}P=new WeakMap,R=new WeakSet,Xi=function(){this.pdfDocument=null,he(this,P,null),this._dataAvailableCapability=new c.PromiseCapability,this._currentPageNumber=1,this._pagesRotation=0},T=new WeakSet,xt=function(Z=!1){if(Z||!s(this,P)){for(const re in this.fields)this.fields[re].textContent=C;return}if(this.overlayManager.active===this.dialog)for(const re in this.fields){const Q=s(this,P)[re];this.fields[re].textContent=Q||Q===0?Q:C}},l=new WeakSet,Ki=async function(Z=0){const re=Z/1024,Q=re/1024;if(re)return this.l10n.get(`document_properties_${Q>=1?"mb":"kb"}`,{size_mb:Q>=1&&(+Q.toPrecision(3)).toLocaleString(),size_kb:Q<1&&(+re.toPrecision(3)).toLocaleString(),size_b:Z.toLocaleString()})},y=new WeakSet,bs=async function(Z,re){if(!Z)return;re%180!==0&&(Z={width:Z.height,height:Z.width});const Q=(0,n.isPortraitOrientation)(Z);let K={width:Math.round(Z.width*100)/100,height:Math.round(Z.height*100)/100},ue={width:Math.round(Z.width*25.4*10)/10,height:Math.round(Z.height*25.4*10)/10},se=g(K,Q,E)||g(ue,Q,r);if(!se&&!(Number.isInteger(ue.width)&&Number.isInteger(ue.height))){const d={width:Z.width*25.4,height:Z.height*25.4},u={width:Math.round(ue.width),height:Math.round(ue.height)};Math.abs(d.width-u.width)<.1&&Math.abs(d.height-u.height)<.1&&(se=g(u,Q,r),se&&(K={width:Math.round(u.width/25.4*100)/100,height:Math.round(u.height/25.4*100)/100},ue=u))}const[{width:Ce,height:Me},q,M,F]=await Promise.all([this._isNonMetricLocale?K:ue,this.l10n.get(`document_properties_page_size_unit_${this._isNonMetricLocale?"inches":"millimeters"}`),se&&this.l10n.get(`document_properties_page_size_name_${se.toLowerCase()}`),this.l10n.get(`document_properties_page_size_orientation_${Q?"portrait":"landscape"}`)]);return this.l10n.get(`document_properties_page_size_dimension_${M?"name_":""}string`,{width:Ce.toLocaleString(),height:Me.toLocaleString(),unit:q,name:M,orientation:F})},N=new WeakSet,Yi=async function(Z){const re=c.PDFDateString.toDateObject(Z);if(re)return this.l10n.get("document_properties_date_string",{date:re.toLocaleDateString(),time:re.toLocaleTimeString()})},G=new WeakSet,_s=function(Z){return this.l10n.get(`document_properties_linearized_${Z?"yes":"no"}`)},_.PDFDocumentProperties=b},(L,_,m)=>{var E,Mt;Object.defineProperty(_,"__esModule",{value:!0}),_.PDFFindBar=void 0;var n=m(20),c=m(4);const C=1e3;class A{constructor(b,P,R){j(this,E);this.opened=!1,this.bar=b.bar,this.toggleButton=b.toggleButton,this.findField=b.findField,this.highlightAll=b.highlightAllCheckbox,this.caseSensitive=b.caseSensitiveCheckbox,this.matchDiacritics=b.matchDiacriticsCheckbox,this.entireWord=b.entireWordCheckbox,this.findMsg=b.findMsg,this.findResultsCount=b.findResultsCount,this.findPreviousButton=b.findPreviousButton,this.findNextButton=b.findNextButton,this.eventBus=P,this.l10n=R,this.toggleButton.addEventListener("click",()=>{this.toggle()}),this.findField.addEventListener("input",()=>{this.dispatchEvent("")}),this.bar.addEventListener("keydown",v=>{switch(v.keyCode){case 13:v.target===this.findField&&this.dispatchEvent("again",v.shiftKey);break;case 27:this.close();break}}),this.findPreviousButton.addEventListener("click",()=>{this.dispatchEvent("again",!0)}),this.findNextButton.addEventListener("click",()=>{this.dispatchEvent("again",!1)}),this.highlightAll.addEventListener("click",()=>{this.dispatchEvent("highlightallchange")}),this.caseSensitive.addEventListener("click",()=>{this.dispatchEvent("casesensitivitychange")}),this.entireWord.addEventListener("click",()=>{this.dispatchEvent("entirewordchange")}),this.matchDiacritics.addEventListener("click",()=>{this.dispatchEvent("diacriticmatchingchange")}),this.eventBus._on("resize",z(this,E,Mt).bind(this))}reset(){this.updateUIState()}dispatchEvent(b,P=!1){this.eventBus.dispatch("find",{source:this,type:b,query:this.findField.value,caseSensitive:this.caseSensitive.checked,entireWord:this.entireWord.checked,highlightAll:this.highlightAll.checked,findPrevious:P,matchDiacritics:this.matchDiacritics.checked})}updateUIState(b,P,R){let v=Promise.resolve(""),T="";switch(b){case n.FindState.FOUND:break;case n.FindState.PENDING:T="pending";break;case n.FindState.NOT_FOUND:v=this.l10n.get("find_not_found"),T="notFound";break;case n.FindState.WRAPPED:v=this.l10n.get(`find_reached_${P?"top":"bottom"}`);break}this.findField.setAttribute("data-status",T),this.findField.setAttribute("aria-invalid",b===n.FindState.NOT_FOUND),v.then(o=>{this.findMsg.setAttribute("data-status",T),this.findMsg.textContent=o,z(this,E,Mt).call(this)}),this.updateResultsCount(R)}updateResultsCount({current:b=0,total:P=0}={}){const R=C;let v=Promise.resolve("");if(P>0)if(P>R){let T="find_match_count_limit";v=this.l10n.get(T,{limit:R})}else{let T="find_match_count";v=this.l10n.get(T,{current:b,total:P})}v.then(T=>{this.findResultsCount.textContent=T,z(this,E,Mt).call(this)})}open(){this.opened||(this.opened=!0,(0,c.toggleExpandedBtn)(this.toggleButton,!0,this.bar)),this.findField.select(),this.findField.focus(),z(this,E,Mt).call(this)}close(){this.opened&&(this.opened=!1,(0,c.toggleExpandedBtn)(this.toggleButton,!1,this.bar),this.eventBus.dispatch("findbarclose",{source:this}))}toggle(){this.opened?this.close():this.open()}}E=new WeakSet,Mt=function(){if(!this.opened)return;this.bar.classList.remove("wrapContainers");const b=this.bar.clientHeight,P=this.bar.firstElementChild.clientHeight;b>P&&this.bar.classList.add("wrapContainers")},_.PDFFindBar=A},(L,_,m)=>{var re,Q,K,ue,vs,Ce,Zi,q,Ji,F,ws,u,ys,V,Ss,X,Qi,B,Es,$,As,te,Jt,Pe,Lt,oe,vt,ne,Ps,be,en,Te,tn,Ne,Qt,Ue,Cs,qe,nn,xe,sn,Y,It;Object.defineProperty(_,"__esModule",{value:!0}),_.PDFFindController=_.FindState=void 0;var n=m(4),c=m(21),C=m(5);const A={FOUND:0,NOT_FOUND:1,WRAPPED:2,PENDING:3};_.FindState=A;const E=250,r=-50,g=-400,b={"":"-","":"'","":"'","":"'","":"'","":'"',"":'"',"":'"',"":'"',"":"1/4","":"1/2","":"3/4"},P=new Set([12441,12442,2381,2509,2637,2765,2893,3021,3149,3277,3387,3388,3405,3530,3642,3770,3972,4153,4154,5908,5940,6098,6752,6980,7082,7083,7154,7155,11647,43014,43052,43204,43347,43456,43766,44013,3158,3953,3954,3962,3963,3964,3965,3968,3956]);let R;const v=/\p{M}+/gu,T=/([.*+?^${}()|[\]\\])|(\p{P})|(\s+)|(\p{M})|(\p{L})/gu,o=/([^\p{M}])\p{M}*$/u,l=/^\p{M}*([^\p{M}])/u,S=/[\uAC00-\uD7AF\uFA6C\uFACF-\uFAD1\uFAD5-\uFAD7]+/g,y=new Map,w="[\\u1100-\\u1112\\ud7a4-\\ud7af\\ud84a\\ud84c\\ud850\\ud854\\ud857\\ud85f]",N=new Map;let D=null,G=null;function le(ee){const pe=[];let we;for(;(we=S.exec(ee))!==null;){let{index:ge}=we;for(const k of we[0]){let J=y.get(k);J||(J=k.normalize("NFD").length,y.set(k,J)),pe.push([J,ge++])}}let ie;if(pe.length===0&&D)ie=D;else if(pe.length>0&&G)ie=G;else{const ge=Object.keys(b).join(""),k=(0,c.getNormalizeWithNFKC)(),ye=`([${ge}])|([${k}])|((?:|)\\n)|(\\p{M}+(?:-\\n)?)|(\\S-\\n)|((?:\\p{Ideographic}|[-])\\n)|(\\n)`;pe.length===0?ie=D=new RegExp(ye+"|(\\u0000)","gum"):ie=G=new RegExp(ye+`|(${w})`,"gum")}const _e=[];for(;(we=v.exec(ee))!==null;)_e.push([we[0].length,we.index]);let ke=ee.normalize("NFD");const Re=[[0,0]];let Fe=0,Ve=0,We=0,Oe=0,Ye=0,$e=!1;return ke=ke.replace(ie,(ge,k,J,fe,ye,Ae,Ie,De,ze,He)=>{var tt,Xe,Ke;if(He-=Oe,k){const Ze=b[k],et=Ze.length;for(let it=1;it<et;it++)Re.push([He-We+it,We-it]);return We-=et-1,Ze}if(J){let Ze=N.get(J);Ze||(Ze=J.normalize("NFKC"),N.set(J,Ze));const et=Ze.length;for(let it=1;it<et;it++)Re.push([He-We+it,We-it]);return We-=et-1,Ze}if(fe)return $e=!0,He+Ye===((tt=_e[Fe])==null?void 0:tt[1])?++Fe:(Re.push([He-1-We+1,We-1]),We-=1,Oe+=1),Re.push([He-We+1,We]),Oe+=1,Ye+=1,fe.charAt(0);if(ye){const Ze=ye.endsWith(`
`),et=Ze?ye.length-2:ye.length;$e=!0;let it=et;He+Ye===((Xe=_e[Fe])==null?void 0:Xe[1])&&(it-=_e[Fe][0],++Fe);for(let nt=1;nt<=it;nt++)Re.push([He-1-We+nt,We-nt]);return We-=it,Oe+=it,Ze?(He+=et-1,Re.push([He-We+1,1+We]),We+=1,Oe+=1,Ye+=1,ye.slice(0,et)):ye}if(Ae){const Ze=Ae.length-2;return Re.push([He-We+Ze,1+We]),We+=1,Oe+=1,Ye+=1,Ae.slice(0,-2)}if(Ie){const Ze=Ie.length-1;return Re.push([He-We+Ze,We]),Oe+=1,Ye+=1,Ie.slice(0,-1)}if(De)return Re.push([He-We+1,We-1]),We-=1,Oe+=1,Ye+=1," ";if(He+Ye===((Ke=pe[Ve])==null?void 0:Ke[1])){const Ze=pe[Ve][0]-1;++Ve;for(let et=1;et<=Ze;et++)Re.push([He-(We-et),We-et]);We-=Ze,Oe+=Ze}return ze}),Re.push([ke.length,We]),[ke,Re,$e]}function H(ee,pe,we){if(!ee)return[pe,we];const ie=pe,_e=pe+we-1;let ke=(0,n.binarySearchFirstItem)(ee,Oe=>Oe[0]>=ie);ee[ke][0]>ie&&--ke;let Re=(0,n.binarySearchFirstItem)(ee,Oe=>Oe[0]>=_e,ke);ee[Re][0]>_e&&--Re;const Fe=ie+ee[ke][1],We=_e+ee[Re][1]+1-Fe;return[Fe,We]}class Z{constructor({linkService:pe,eventBus:we,updateMatchesCountOnProgress:ie=!0}){j(this,ue);j(this,Ce);j(this,q);j(this,F);j(this,u);j(this,V);j(this,X);j(this,B);j(this,$);j(this,te);j(this,Pe);j(this,oe);j(this,ne);j(this,be);j(this,Te);j(this,Ne);j(this,Ue);j(this,qe);j(this,xe);j(this,Y);j(this,re,null);j(this,Q,!0);j(this,K,0);this._linkService=pe,this._eventBus=we,he(this,Q,ie),this.onIsPageVisible=null,z(this,Ce,Zi).call(this),we._on("find",z(this,ue,vs).bind(this)),we._on("findbarclose",z(this,Ue,Cs).bind(this))}get highlightMatches(){return this._highlightMatches}get pageMatches(){return this._pageMatches}get pageMatchesLength(){return this._pageMatchesLength}get selected(){return this._selected}get state(){return s(this,re)}setDocument(pe){this._pdfDocument&&z(this,Ce,Zi).call(this),pe&&(this._pdfDocument=pe,this._firstPageCapability.resolve())}scrollMatchIntoView({element:pe=null,selectedLeft:we=0,pageIndex:ie=-1,matchIndex:_e=-1}){if(!this._scrollMatches||!pe)return;if(_e===-1||_e!==this._selected.matchIdx)return;if(ie===-1||ie!==this._selected.pageIdx)return;this._scrollMatches=!1;const ke={top:r,left:we+g};(0,n.scrollIntoView)(pe,ke,!0)}}re=new WeakMap,Q=new WeakMap,K=new WeakMap,ue=new WeakSet,vs=function(pe){if(!pe)return;pe.phraseSearch===!1&&(console.error("The `phraseSearch`-parameter was removed, please provide an Array of strings in the `query`-parameter instead."),typeof pe.query=="string"&&(pe.query=pe.query.match(/\S+/g)));const we=this._pdfDocument,{type:ie}=pe;(s(this,re)===null||z(this,F,ws).call(this,pe))&&(this._dirtyMatch=!0),he(this,re,pe),ie!=="highlightallchange"&&z(this,Y,It).call(this,A.PENDING),this._firstPageCapability.promise.then(()=>{if(!this._pdfDocument||we&&this._pdfDocument!==we)return;z(this,$,As).call(this);const _e=!this._highlightMatches,ke=!!this._findTimeout;this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),ie?this._dirtyMatch?z(this,oe,vt).call(this):ie==="again"?(z(this,oe,vt).call(this),_e&&s(this,re).highlightAll&&z(this,Pe,Lt).call(this)):ie==="highlightallchange"?(ke?z(this,oe,vt).call(this):this._highlightMatches=!0,z(this,Pe,Lt).call(this)):z(this,oe,vt).call(this):this._findTimeout=setTimeout(()=>{z(this,oe,vt).call(this),this._findTimeout=null},E)})},Ce=new WeakSet,Zi=function(){this._highlightMatches=!1,this._scrollMatches=!1,this._pdfDocument=null,this._pageMatches=[],this._pageMatchesLength=[],he(this,K,0),he(this,re,null),this._selected={pageIdx:-1,matchIdx:-1},this._offset={pageIdx:null,matchIdx:null,wrapped:!1},this._extractTextPromises=[],this._pageContents=[],this._pageDiffs=[],this._hasDiacritics=[],this._matchesCountTotal=0,this._pagesToSearch=null,this._pendingFindMatches=new Set,this._resumePageIdx=null,this._dirtyMatch=!1,clearTimeout(this._findTimeout),this._findTimeout=null,this._firstPageCapability=new C.PromiseCapability},q=new WeakSet,Ji=function(){const{query:pe}=s(this,re);return typeof pe=="string"?(pe!==this._rawQuery&&(this._rawQuery=pe,[this._normalizedQuery]=le(pe)),this._normalizedQuery):(pe||[]).filter(we=>!!we).map(we=>le(we)[0])},F=new WeakSet,ws=function(pe){var Re;const we=pe.query,ie=s(this,re).query,_e=typeof we;if(_e!==typeof ie)return!0;if(_e==="string"){if(we!==ie)return!0}else if(JSON.stringify(we)!==JSON.stringify(ie))return!0;switch(pe.type){case"again":const Fe=this._selected.pageIdx+1,Ve=this._linkService;return Fe>=1&&Fe<=Ve.pagesCount&&Fe!==Ve.page&&!(((Re=this.onIsPageVisible)==null?void 0:Re.call(this,Fe))??!0);case"highlightallchange":return!1}return!0},u=new WeakSet,ys=function(pe,we,ie){let _e=pe.slice(0,we).match(o);if(_e){const ke=pe.charCodeAt(we),Re=_e[1].charCodeAt(0);if((0,c.getCharacterType)(ke)===(0,c.getCharacterType)(Re))return!1}if(_e=pe.slice(we+ie).match(l),_e){const ke=pe.charCodeAt(we+ie-1),Re=_e[1].charCodeAt(0);if((0,c.getCharacterType)(ke)===(0,c.getCharacterType)(Re))return!1}return!0},V=new WeakSet,Ss=function(pe,we,ie,_e){const ke=this._pageMatches[ie]=[],Re=this._pageMatchesLength[ie]=[];if(!pe)return;const Fe=this._pageDiffs[ie];let Ve;for(;(Ve=pe.exec(_e))!==null;){if(we&&!z(this,u,ys).call(this,_e,Ve.index,Ve[0].length))continue;const[We,Oe]=H(Fe,Ve.index,Ve[0].length);Oe&&(ke.push(We),Re.push(Oe))}},X=new WeakSet,Qi=function(pe,we){const{matchDiacritics:ie}=s(this,re);let _e=!1;pe=pe.replaceAll(T,(Re,Fe,Ve,We,Oe,Ye)=>Fe?`[ ]*\\${Fe}[ ]*`:Ve?`[ ]*${Ve}[ ]*`:We?"[ ]+":ie?Oe||Ye:Oe?P.has(Oe.charCodeAt(0))?Oe:"":we?(_e=!0,`${Ye}\\p{M}*`):Ye);const ke="[ ]*";return pe.endsWith(ke)&&(pe=pe.slice(0,pe.length-ke.length)),ie&&we&&(R||(R=String.fromCharCode(...P)),_e=!0,pe=`${pe}(?=[${R}]|[^\\p{M}]|$)`),[_e,pe]},B=new WeakSet,Es=function(pe){let we=s(this,q,Ji);if(we.length===0)return;const{caseSensitive:ie,entireWord:_e}=s(this,re),ke=this._pageContents[pe],Re=this._hasDiacritics[pe];let Fe=!1;typeof we=="string"?[Fe,we]=z(this,X,Qi).call(this,we,Re):we=we.sort().reverse().map(Oe=>{const[Ye,$e]=z(this,X,Qi).call(this,Oe,Re);return Fe||(Fe=Ye),`(${$e})`}).join("|");const Ve=`g${Fe?"u":""}${ie?"":"i"}`;we=we?new RegExp(we,Ve):null,z(this,V,Ss).call(this,we,_e,pe,ke),s(this,re).highlightAll&&z(this,te,Jt).call(this,pe),this._resumePageIdx===pe&&(this._resumePageIdx=null,z(this,be,en).call(this));const We=this._pageMatches[pe].length;this._matchesCountTotal+=We,s(this,Q)?We>0&&z(this,xe,sn).call(this):++ft(this,K)._===this._linkService.pagesCount&&z(this,xe,sn).call(this)},$=new WeakSet,As=function(){if(this._extractTextPromises.length>0)return;let pe=Promise.resolve();const we={disableNormalization:!0};for(let ie=0,_e=this._linkService.pagesCount;ie<_e;ie++){const ke=new C.PromiseCapability;this._extractTextPromises[ie]=ke.promise,pe=pe.then(()=>this._pdfDocument.getPage(ie+1).then(Re=>Re.getTextContent(we)).then(Re=>{const Fe=[];for(const Ve of Re.items)Fe.push(Ve.str),Ve.hasEOL&&Fe.push(`
`);[this._pageContents[ie],this._pageDiffs[ie],this._hasDiacritics[ie]]=le(Fe.join("")),ke.resolve()},Re=>{console.error(`Unable to get text content for page ${ie+1}`,Re),this._pageContents[ie]="",this._pageDiffs[ie]=null,this._hasDiacritics[ie]=!1,ke.resolve()}))}},te=new WeakSet,Jt=function(pe){this._scrollMatches&&this._selected.pageIdx===pe&&(this._linkService.page=pe+1),this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:pe})},Pe=new WeakSet,Lt=function(){this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:-1})},oe=new WeakSet,vt=function(){const pe=s(this,re).findPrevious,we=this._linkService.page-1,ie=this._linkService.pagesCount;if(this._highlightMatches=!0,this._dirtyMatch){this._dirtyMatch=!1,this._selected.pageIdx=this._selected.matchIdx=-1,this._offset.pageIdx=we,this._offset.matchIdx=null,this._offset.wrapped=!1,this._resumePageIdx=null,this._pageMatches.length=0,this._pageMatchesLength.length=0,he(this,K,0),this._matchesCountTotal=0,z(this,Pe,Lt).call(this);for(let Re=0;Re<ie;Re++)this._pendingFindMatches.has(Re)||(this._pendingFindMatches.add(Re),this._extractTextPromises[Re].then(()=>{this._pendingFindMatches.delete(Re),z(this,B,Es).call(this,Re)}))}if(s(this,q,Ji).length===0){z(this,Y,It).call(this,A.FOUND);return}if(this._resumePageIdx)return;const ke=this._offset;if(this._pagesToSearch=ie,ke.matchIdx!==null){const Re=this._pageMatches[ke.pageIdx].length;if(!pe&&ke.matchIdx+1<Re||pe&&ke.matchIdx>0){ke.matchIdx=pe?ke.matchIdx-1:ke.matchIdx+1,z(this,Ne,Qt).call(this,!0);return}z(this,Te,tn).call(this,pe)}z(this,be,en).call(this)},ne=new WeakSet,Ps=function(pe){const we=this._offset,ie=pe.length,_e=s(this,re).findPrevious;return ie?(we.matchIdx=_e?ie-1:0,z(this,Ne,Qt).call(this,!0),!0):(z(this,Te,tn).call(this,_e),we.wrapped&&(we.matchIdx=null,this._pagesToSearch<0)?(z(this,Ne,Qt).call(this,!1),!0):!1)},be=new WeakSet,en=function(){this._resumePageIdx!==null&&console.error("There can only be one pending page.");let pe=null;do{const we=this._offset.pageIdx;if(pe=this._pageMatches[we],!pe){this._resumePageIdx=we;break}}while(!z(this,ne,Ps).call(this,pe))},Te=new WeakSet,tn=function(pe){const we=this._offset,ie=this._linkService.pagesCount;we.pageIdx=pe?we.pageIdx-1:we.pageIdx+1,we.matchIdx=null,this._pagesToSearch--,(we.pageIdx>=ie||we.pageIdx<0)&&(we.pageIdx=pe?ie-1:0,we.wrapped=!0)},Ne=new WeakSet,Qt=function(pe=!1){let we=A.NOT_FOUND;const ie=this._offset.wrapped;if(this._offset.wrapped=!1,pe){const _e=this._selected.pageIdx;this._selected.pageIdx=this._offset.pageIdx,this._selected.matchIdx=this._offset.matchIdx,we=ie?A.WRAPPED:A.FOUND,_e!==-1&&_e!==this._selected.pageIdx&&z(this,te,Jt).call(this,_e)}z(this,Y,It).call(this,we,s(this,re).findPrevious),this._selected.pageIdx!==-1&&(this._scrollMatches=!0,z(this,te,Jt).call(this,this._selected.pageIdx))},Ue=new WeakSet,Cs=function(pe){const we=this._pdfDocument;this._firstPageCapability.promise.then(()=>{!this._pdfDocument||we&&this._pdfDocument!==we||(this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),this._resumePageIdx&&(this._resumePageIdx=null,this._dirtyMatch=!0),z(this,Y,It).call(this,A.FOUND),this._highlightMatches=!1,z(this,Pe,Lt).call(this))})},qe=new WeakSet,nn=function(){var ke;const{pageIdx:pe,matchIdx:we}=this._selected;let ie=0,_e=this._matchesCountTotal;if(we!==-1){for(let Re=0;Re<pe;Re++)ie+=((ke=this._pageMatches[Re])==null?void 0:ke.length)||0;ie+=we+1}return(ie<1||ie>_e)&&(ie=_e=0),{current:ie,total:_e}},xe=new WeakSet,sn=function(){this._eventBus.dispatch("updatefindmatchescount",{source:this,matchesCount:z(this,qe,nn).call(this)})},Y=new WeakSet,It=function(pe,we=!1){var ie;!s(this,Q)&&(s(this,K)!==this._linkService.pagesCount||pe===A.PENDING)||this._eventBus.dispatch("updatefindcontrolstate",{source:this,state:pe,previous:we,matchesCount:z(this,qe,nn).call(this),rawQuery:((ie=s(this,re))==null?void 0:ie.query)??null})},_.PDFFindController=Z},(L,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.CharacterType=void 0,_.getCharacterType=v,_.getNormalizeWithNFKC=o;const m={SPACE:0,ALPHA_LETTER:1,PUNCT:2,HAN_LETTER:3,KATAKANA_LETTER:4,HIRAGANA_LETTER:5,HALFWIDTH_KATAKANA_LETTER:6,THAI_LETTER:7};_.CharacterType=m;function n(l){return l<11904}function c(l){return(l&65408)===0}function C(l){return l>=97&&l<=122||l>=65&&l<=90}function A(l){return l>=48&&l<=57}function E(l){return l===32||l===9||l===13||l===10}function r(l){return l>=13312&&l<=40959||l>=63744&&l<=64255}function g(l){return l>=12448&&l<=12543}function b(l){return l>=12352&&l<=12447}function P(l){return l>=65376&&l<=65439}function R(l){return(l&65408)===3584}function v(l){return n(l)?c(l)?E(l)?m.SPACE:C(l)||A(l)||l===95?m.ALPHA_LETTER:m.PUNCT:R(l)?m.THAI_LETTER:l===160?m.SPACE:m.ALPHA_LETTER:r(l)?m.HAN_LETTER:g(l)?m.KATAKANA_LETTER:b(l)?m.HIRAGANA_LETTER:P(l)?m.HALFWIDTH_KATAKANA_LETTER:m.ALPHA_LETTER}let T;function o(){return T||(T="---------------------------------------------------------------------------------------------------"),T}},(L,_,m)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.PDFHistory=void 0,_.isDestArraysEqual=P,_.isDestHashesEqual=b;var n=m(4),c=m(10);const C=1e3,A=50,E=1e3;function r(){return document.location.hash}class g{constructor({linkService:v,eventBus:T}){this.linkService=v,this.eventBus=T,this._initialized=!1,this._fingerprint="",this.reset(),this._boundEvents=null,this.eventBus._on("pagesinit",()=>{this._isPagesLoaded=!1,this.eventBus._on("pagesloaded",o=>{this._isPagesLoaded=!!o.pagesCount},{once:!0})})}initialize({fingerprint:v,resetHistory:T=!1,updateUrl:o=!1}){if(!v||typeof v!="string"){console.error('PDFHistory.initialize: The "fingerprint" must be a non-empty string.');return}this._initialized&&this.reset();const l=this._fingerprint!==""&&this._fingerprint!==v;this._fingerprint=v,this._updateUrl=o===!0,this._initialized=!0,this._bindEvents();const S=window.history.state;if(this._popStateInProgress=!1,this._blockHashChange=0,this._currentHash=r(),this._numPositionUpdates=0,this._uid=this._maxUid=0,this._destination=null,this._position=null,!this._isValidState(S,!0)||T){const{hash:w,page:N,rotation:D}=this._parseCurrentHash(!0);if(!w||l||T){this._pushOrReplaceState(null,!0);return}this._pushOrReplaceState({hash:w,page:N,rotation:D},!0);return}const y=S.destination;this._updateInternalState(y,S.uid,!0),y.rotation!==void 0&&(this._initialRotation=y.rotation),y.dest?(this._initialBookmark=JSON.stringify(y.dest),this._destination.page=null):y.hash?this._initialBookmark=y.hash:y.page&&(this._initialBookmark=`page=${y.page}`)}reset(){this._initialized&&(this._pageHide(),this._initialized=!1,this._unbindEvents()),this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._initialBookmark=null,this._initialRotation=null}push({namedDest:v=null,explicitDest:T,pageNumber:o}){if(!this._initialized)return;if(v&&typeof v!="string"){console.error(`PDFHistory.push: "${v}" is not a valid namedDest parameter.`);return}else if(Array.isArray(T)){if(!this._isValidPage(o)&&(o!==null||this._destination)){console.error(`PDFHistory.push: "${o}" is not a valid pageNumber parameter.`);return}}else{console.error(`PDFHistory.push: "${T}" is not a valid explicitDest parameter.`);return}const l=v||JSON.stringify(T);if(!l)return;let S=!1;if(this._destination&&(b(this._destination.hash,l)||P(this._destination.dest,T))){if(this._destination.page)return;S=!0}this._popStateInProgress&&!S||(this._pushOrReplaceState({dest:T,hash:l,page:o,rotation:this.linkService.rotation},S),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1})))}pushPage(v){var T;if(this._initialized){if(!this._isValidPage(v)){console.error(`PDFHistory.pushPage: "${v}" is not a valid page number.`);return}((T=this._destination)==null?void 0:T.page)!==v&&(this._popStateInProgress||(this._pushOrReplaceState({dest:null,hash:`page=${v}`,page:v,rotation:this.linkService.rotation}),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1}))))}}pushCurrentPosition(){!this._initialized||this._popStateInProgress||this._tryPushCurrentPosition()}back(){if(!this._initialized||this._popStateInProgress)return;const v=window.history.state;this._isValidState(v)&&v.uid>0&&window.history.back()}forward(){if(!this._initialized||this._popStateInProgress)return;const v=window.history.state;this._isValidState(v)&&v.uid<this._maxUid&&window.history.forward()}get popStateInProgress(){return this._initialized&&(this._popStateInProgress||this._blockHashChange>0)}get initialBookmark(){return this._initialized?this._initialBookmark:null}get initialRotation(){return this._initialized?this._initialRotation:null}_pushOrReplaceState(v,T=!1){const o=T||!this._destination,l={fingerprint:this._fingerprint,uid:o?this._uid:this._uid+1,destination:v};this._updateInternalState(v,l.uid);let S;if(this._updateUrl&&(v!=null&&v.hash)){const y=document.location.href.split("#")[0];y.startsWith("file://")||(S=`${y}#${v.hash}`)}o?window.history.replaceState(l,"",S):window.history.pushState(l,"",S)}_tryPushCurrentPosition(v=!1){if(!this._position)return;let T=this._position;if(v&&(T=Object.assign(Object.create(null),this._position),T.temporary=!0),!this._destination){this._pushOrReplaceState(T);return}if(this._destination.temporary){this._pushOrReplaceState(T,!0);return}if(this._destination.hash===T.hash||!this._destination.page&&this._numPositionUpdates<=A)return;let o=!1;if(this._destination.page>=T.first&&this._destination.page<=T.page){if(this._destination.dest!==void 0||!this._destination.first)return;o=!0}this._pushOrReplaceState(T,o)}_isValidPage(v){return Number.isInteger(v)&&v>0&&v<=this.linkService.pagesCount}_isValidState(v,T=!1){if(!v)return!1;if(v.fingerprint!==this._fingerprint)if(T){if(typeof v.fingerprint!="string"||v.fingerprint.length!==this._fingerprint.length)return!1;const[o]=performance.getEntriesByType("navigation");if((o==null?void 0:o.type)!=="reload")return!1}else return!1;return!(!Number.isInteger(v.uid)||v.uid<0||v.destination===null||typeof v.destination!="object")}_updateInternalState(v,T,o=!1){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),o&&(v!=null&&v.temporary)&&delete v.temporary,this._destination=v,this._uid=T,this._maxUid=Math.max(this._maxUid,T),this._numPositionUpdates=0}_parseCurrentHash(v=!1){const T=unescape(r()).substring(1),o=(0,n.parseQueryString)(T),l=o.get("nameddest")||"";let S=o.get("page")|0;return(!this._isValidPage(S)||v&&l.length>0)&&(S=null),{hash:T,page:S,rotation:this.linkService.rotation}}_updateViewarea({location:v}){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._position={hash:v.pdfOpenParams.substring(1),page:this.linkService.page,first:v.pageNumber,rotation:v.rotation},!this._popStateInProgress&&(this._isPagesLoaded&&this._destination&&!this._destination.page&&this._numPositionUpdates++,this._updateViewareaTimeout=setTimeout(()=>{this._popStateInProgress||this._tryPushCurrentPosition(!0),this._updateViewareaTimeout=null},E))}_popState({state:v}){const T=r(),o=this._currentHash!==T;if(this._currentHash=T,!v){this._uid++;const{hash:S,page:y,rotation:w}=this._parseCurrentHash();this._pushOrReplaceState({hash:S,page:y,rotation:w},!0);return}if(!this._isValidState(v))return;this._popStateInProgress=!0,o&&(this._blockHashChange++,(0,c.waitOnEventOrTimeout)({target:window,name:"hashchange",delay:C}).then(()=>{this._blockHashChange--}));const l=v.destination;this._updateInternalState(l,v.uid,!0),(0,n.isValidRotation)(l.rotation)&&(this.linkService.rotation=l.rotation),l.dest?this.linkService.goToDestination(l.dest):l.hash?this.linkService.setHash(l.hash):l.page&&(this.linkService.page=l.page),Promise.resolve().then(()=>{this._popStateInProgress=!1})}_pageHide(){(!this._destination||this._destination.temporary)&&this._tryPushCurrentPosition()}_bindEvents(){this._boundEvents||(this._boundEvents={updateViewarea:this._updateViewarea.bind(this),popState:this._popState.bind(this),pageHide:this._pageHide.bind(this)},this.eventBus._on("updateviewarea",this._boundEvents.updateViewarea),window.addEventListener("popstate",this._boundEvents.popState),window.addEventListener("pagehide",this._boundEvents.pageHide))}_unbindEvents(){this._boundEvents&&(this.eventBus._off("updateviewarea",this._boundEvents.updateViewarea),window.removeEventListener("popstate",this._boundEvents.popState),window.removeEventListener("pagehide",this._boundEvents.pageHide),this._boundEvents=null)}}_.PDFHistory=g;function b(R,v){return typeof R!="string"||typeof v!="string"?!1:R===v||(0,n.parseQueryString)(R).get("nameddest")===v}function P(R,v){function T(o,l){if(typeof o!=typeof l||Array.isArray(o)||Array.isArray(l))return!1;if(o!==null&&typeof o=="object"&&l!==null){if(Object.keys(o).length!==Object.keys(l).length)return!1;for(const S in o)if(!T(o[S],l[S]))return!1;return!0}return o===l||Number.isNaN(o)&&Number.isNaN(l)}if(!(Array.isArray(R)&&Array.isArray(v))||R.length!==v.length)return!1;for(let o=0,l=R.length;o<l;o++)if(!T(R[o],v[o]))return!1;return!0}},(L,_,m)=>{var C,rn;Object.defineProperty(_,"__esModule",{value:!0}),_.PDFLayerViewer=void 0;var n=m(17);class c extends n.BaseTreeViewer{constructor(g){super(g);j(this,C);this.l10n=g.l10n,this.eventBus._on("optionalcontentconfigchanged",b=>{z(this,C,rn).call(this,b.promise)}),this.eventBus._on("resetlayers",()=>{z(this,C,rn).call(this)}),this.eventBus._on("togglelayerstree",this._toggleAllTreeItems.bind(this))}reset(){super.reset(),this._optionalContentConfig=null,this._optionalContentHash=null}_dispatchEvent(g){this.eventBus.dispatch("layersloaded",{source:this,layersCount:g})}_bindLink(g,{groupId:b,input:P}){const R=()=>{this._optionalContentConfig.setVisibility(b,P.checked),this._optionalContentHash=this._optionalContentConfig.getHash(),this.eventBus.dispatch("optionalcontentconfig",{source:this,promise:Promise.resolve(this._optionalContentConfig)})};g.onclick=v=>v.target===P?(R(),!0):v.target!==g?!0:(P.checked=!P.checked,R(),!1)}async _setNestedName(g,{name:b=null}){if(typeof b=="string"){g.textContent=this._normalizeTextContent(b);return}g.textContent=await this.l10n.get("additional_layers"),g.style.fontStyle="italic"}_addToggleButton(g,{name:b=null}){super._addToggleButton(g,b===null)}_toggleAllTreeItems(){this._optionalContentConfig&&super._toggleAllTreeItems()}render({optionalContentConfig:g,pdfDocument:b}){this._optionalContentConfig&&this.reset(),this._optionalContentConfig=g||null,this._pdfDocument=b||null;const P=g==null?void 0:g.getOrder();if(!P){this._dispatchEvent(0);return}this._optionalContentHash=g.getHash();const R=document.createDocumentFragment(),v=[{parent:R,groups:P}];let T=0,o=!1;for(;v.length>0;){const l=v.shift();for(const S of l.groups){const y=document.createElement("div");y.className="treeItem";const w=document.createElement("a");if(y.append(w),typeof S=="object"){o=!0,this._addToggleButton(y,S),this._setNestedName(w,S);const N=document.createElement("div");N.className="treeItems",y.append(N),v.push({parent:N,groups:S.order})}else{const N=g.getGroup(S),D=document.createElement("input");this._bindLink(w,{groupId:S,input:D}),D.type="checkbox",D.checked=N.visible;const G=document.createElement("label");G.textContent=this._normalizeTextContent(N.name),G.append(D),w.append(G),T++}l.parent.append(y)}}this._finishRendering(R,T,o)}}C=new WeakSet,rn=async function(g=null){if(!this._optionalContentConfig)return;const b=this._pdfDocument,P=await(g||b.getOptionalContentConfig());if(b===this._pdfDocument){if(g){if(P.getHash()===this._optionalContentHash)return}else this.eventBus.dispatch("optionalcontentconfig",{source:this,promise:Promise.resolve(P)});this.render({optionalContentConfig:P,pdfDocument:this._pdfDocument})}},_.PDFLayerViewer=c},(L,_,m)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.PDFOutlineViewer=void 0;var n=m(17),c=m(5),C=m(4);class A extends n.BaseTreeViewer{constructor(r){super(r),this.linkService=r.linkService,this.downloadManager=r.downloadManager,this.eventBus._on("toggleoutlinetree",this._toggleAllTreeItems.bind(this)),this.eventBus._on("currentoutlineitem",this._currentOutlineItem.bind(this)),this.eventBus._on("pagechanging",g=>{this._currentPageNumber=g.pageNumber}),this.eventBus._on("pagesloaded",g=>{this._isPagesLoaded=!!g.pagesCount,this._currentOutlineItemCapability&&!this._currentOutlineItemCapability.settled&&this._currentOutlineItemCapability.resolve(this._isPagesLoaded)}),this.eventBus._on("sidebarviewchanged",g=>{this._sidebarView=g.view})}reset(){super.reset(),this._outline=null,this._pageNumberToDestHashCapability=null,this._currentPageNumber=1,this._isPagesLoaded=null,this._currentOutlineItemCapability&&!this._currentOutlineItemCapability.settled&&this._currentOutlineItemCapability.resolve(!1),this._currentOutlineItemCapability=null}_dispatchEvent(r){var g;this._currentOutlineItemCapability=new c.PromiseCapability,r===0||(g=this._pdfDocument)!=null&&g.loadingParams.disableAutoFetch?this._currentOutlineItemCapability.resolve(!1):this._isPagesLoaded!==null&&this._currentOutlineItemCapability.resolve(this._isPagesLoaded),this.eventBus.dispatch("outlineloaded",{source:this,outlineCount:r,currentOutlineItemPromise:this._currentOutlineItemCapability.promise})}_bindLink(r,{url:g,newWindow:b,action:P,attachment:R,dest:v,setOCGState:T}){const{linkService:o}=this;if(g){o.addLinkAttributes(r,g,b);return}if(P){r.href=o.getAnchorUrl(""),r.onclick=()=>(o.executeNamedAction(P),!1);return}if(R){r.href=o.getAnchorUrl(""),r.onclick=()=>(this.downloadManager.openOrDownloadData(r,R.content,R.filename),!1);return}if(T){r.href=o.getAnchorUrl(""),r.onclick=()=>(o.executeSetOCGState(T),!1);return}r.href=o.getDestinationHash(v),r.onclick=l=>(this._updateCurrentTreeItem(l.target.parentNode),v&&o.goToDestination(v),!1)}_setStyles(r,{bold:g,italic:b}){g&&(r.style.fontWeight="bold"),b&&(r.style.fontStyle="italic")}_addToggleButton(r,{count:g,items:b}){let P=!1;if(g<0){let R=b.length;if(R>0){const v=[...b];for(;v.length>0;){const{count:T,items:o}=v.shift();T>0&&o.length>0&&(R+=o.length,v.push(...o))}}Math.abs(g)===R&&(P=!0)}super._addToggleButton(r,P)}_toggleAllTreeItems(){this._outline&&super._toggleAllTreeItems()}render({outline:r,pdfDocument:g}){if(this._outline&&this.reset(),this._outline=r||null,this._pdfDocument=g||null,!r){this._dispatchEvent(0);return}const b=document.createDocumentFragment(),P=[{parent:b,items:r}];let R=0,v=!1;for(;P.length>0;){const T=P.shift();for(const o of T.items){const l=document.createElement("div");l.className="treeItem";const S=document.createElement("a");if(this._bindLink(S,o),this._setStyles(S,o),S.textContent=this._normalizeTextContent(o.title),l.append(S),o.items.length>0){v=!0,this._addToggleButton(l,o);const y=document.createElement("div");y.className="treeItems",l.append(y),P.push({parent:y,items:o.items})}T.parent.append(l),R++}}this._finishRendering(b,R,v)}async _currentOutlineItem(){if(!this._isPagesLoaded)throw new Error("_currentOutlineItem: All pages have not been loaded.");if(!this._outline||!this._pdfDocument)return;const r=await this._getPageNumberToDestHash(this._pdfDocument);if(r&&(this._updateCurrentTreeItem(null),this._sidebarView===C.SidebarView.OUTLINE))for(let g=this._currentPageNumber;g>0;g--){const b=r.get(g);if(!b)continue;const P=this.container.querySelector(`a[href="${b}"]`);if(P){this._scrollToCurrentTreeItem(P.parentNode);break}}}async _getPageNumberToDestHash(r){if(this._pageNumberToDestHashCapability)return this._pageNumberToDestHashCapability.promise;this._pageNumberToDestHashCapability=new c.PromiseCapability;const g=new Map,b=new Map,P=[{nesting:0,items:this._outline}];for(;P.length>0;){const R=P.shift(),v=R.nesting;for(const{dest:T,items:o}of R.items){let l,S;if(typeof T=="string"){if(l=await r.getDestination(T),r!==this._pdfDocument)return null}else l=T;if(Array.isArray(l)){const[y]=l;if(typeof y=="object"&&y!==null){if(S=this.linkService._cachedPageNumber(y),!S)try{if(S=await r.getPageIndex(y)+1,r!==this._pdfDocument)return null;this.linkService.cachePageRef(S,y)}catch{}}else Number.isInteger(y)&&(S=y+1);if(Number.isInteger(S)&&(!g.has(S)||v>b.get(S))){const w=this.linkService.getDestinationHash(T);g.set(S,w),b.set(S,v)}}o.length>0&&P.push({nesting:v+1,items:o})}}return this._pageNumberToDestHashCapability.resolve(g.size>0?g:null),this._pageNumberToDestHashCapability.promise}}_.PDFOutlineViewer=A},(L,_,m)=>{var v,T,o,Ts,S,kt,w,Rs,D,xs,le,Ms,Z,Ls,Q,an,ue,Is,Ce,Ot,q,ks,F,Os,u,Fs,V,Ns,X,Ds,B,on;Object.defineProperty(_,"__esModule",{value:!0}),_.PDFPresentationMode=void 0;var n=m(4),c=m(5);const C=3e3,A="pdfPresentationMode",E="pdfPresentationModeControls",r=50,g=.1,b=50,P=Math.PI/6;class R{constructor({container:de,pdfViewer:te,eventBus:ve}){j(this,o);j(this,S);j(this,w);j(this,D);j(this,le);j(this,Z);j(this,Q);j(this,ue);j(this,Ce);j(this,q);j(this,F);j(this,u);j(this,V);j(this,X);j(this,B);j(this,v,n.PresentationModeState.UNKNOWN);j(this,T,null);this.container=de,this.pdfViewer=te,this.eventBus=ve,this.contextMenuOpen=!1,this.mouseScrollTimeStamp=0,this.mouseScrollDelta=0,this.touchSwipeState=null}async request(){const{container:de,pdfViewer:te}=this;if(this.active||!te.pagesCount||!de.requestFullscreen)return!1;z(this,X,Ds).call(this),z(this,S,kt).call(this,n.PresentationModeState.CHANGING);const ve=de.requestFullscreen();he(this,T,{pageNumber:te.currentPageNumber,scaleValue:te.currentScaleValue,scrollMode:te.scrollMode,spreadMode:null,annotationEditorMode:null}),te.spreadMode!==n.SpreadMode.NONE&&!(te.pageViewsReady&&te.hasEqualPageSizes)&&(console.warn("Ignoring Spread modes when entering PresentationMode, since the document may contain varying page sizes."),s(this,T).spreadMode=te.spreadMode),te.annotationEditorMode!==c.AnnotationEditorType.DISABLE&&(s(this,T).annotationEditorMode=te.annotationEditorMode);try{return await ve,te.focus(),!0}catch{z(this,B,on).call(this),z(this,S,kt).call(this,n.PresentationModeState.NORMAL)}return!1}get active(){return s(this,v)===n.PresentationModeState.CHANGING||s(this,v)===n.PresentationModeState.FULLSCREEN}}v=new WeakMap,T=new WeakMap,o=new WeakSet,Ts=function(de){if(!this.active)return;de.preventDefault();const te=(0,n.normalizeWheelEventDelta)(de),ve=Date.now(),Pe=this.mouseScrollTimeStamp;if(!(ve>Pe&&ve-Pe<r)&&((this.mouseScrollDelta>0&&te<0||this.mouseScrollDelta<0&&te>0)&&z(this,Ce,Ot).call(this),this.mouseScrollDelta+=te,Math.abs(this.mouseScrollDelta)>=g)){const Se=this.mouseScrollDelta;z(this,Ce,Ot).call(this),(Se>0?this.pdfViewer.previousPage():this.pdfViewer.nextPage())&&(this.mouseScrollTimeStamp=ve)}},S=new WeakSet,kt=function(de){he(this,v,de),this.eventBus.dispatch("presentationmodechanged",{source:this,state:de})},w=new WeakSet,Rs=function(){z(this,S,kt).call(this,n.PresentationModeState.FULLSCREEN),this.container.classList.add(A),setTimeout(()=>{this.pdfViewer.scrollMode=n.ScrollMode.PAGE,s(this,T).spreadMode!==null&&(this.pdfViewer.spreadMode=n.SpreadMode.NONE),this.pdfViewer.currentPageNumber=s(this,T).pageNumber,this.pdfViewer.currentScaleValue="page-fit",s(this,T).annotationEditorMode!==null&&(this.pdfViewer.annotationEditorMode={mode:c.AnnotationEditorType.NONE})},0),z(this,F,Os).call(this),z(this,Q,an).call(this),this.contextMenuOpen=!1,window.getSelection().removeAllRanges()},D=new WeakSet,xs=function(){const de=this.pdfViewer.currentPageNumber;this.container.classList.remove(A),setTimeout(()=>{z(this,B,on).call(this),z(this,S,kt).call(this,n.PresentationModeState.NORMAL),this.pdfViewer.scrollMode=s(this,T).scrollMode,s(this,T).spreadMode!==null&&(this.pdfViewer.spreadMode=s(this,T).spreadMode),this.pdfViewer.currentScaleValue=s(this,T).scaleValue,this.pdfViewer.currentPageNumber=de,s(this,T).annotationEditorMode!==null&&(this.pdfViewer.annotationEditorMode={mode:s(this,T).annotationEditorMode}),he(this,T,null)},0),z(this,u,Fs).call(this),z(this,ue,Is).call(this),z(this,Ce,Ot).call(this),this.contextMenuOpen=!1},le=new WeakSet,Ms=function(de){var te;if(this.contextMenuOpen){this.contextMenuOpen=!1,de.preventDefault();return}de.button===0&&(de.target.href&&((te=de.target.parentNode)!=null&&te.hasAttribute("data-internal-link"))||(de.preventDefault(),de.shiftKey?this.pdfViewer.previousPage():this.pdfViewer.nextPage()))},Z=new WeakSet,Ls=function(){this.contextMenuOpen=!0},Q=new WeakSet,an=function(){this.controlsTimeout?clearTimeout(this.controlsTimeout):this.container.classList.add(E),this.controlsTimeout=setTimeout(()=>{this.container.classList.remove(E),delete this.controlsTimeout},C)},ue=new WeakSet,Is=function(){this.controlsTimeout&&(clearTimeout(this.controlsTimeout),this.container.classList.remove(E),delete this.controlsTimeout)},Ce=new WeakSet,Ot=function(){this.mouseScrollTimeStamp=0,this.mouseScrollDelta=0},q=new WeakSet,ks=function(de){if(this.active){if(de.touches.length>1){this.touchSwipeState=null;return}switch(de.type){case"touchstart":this.touchSwipeState={startX:de.touches[0].pageX,startY:de.touches[0].pageY,endX:de.touches[0].pageX,endY:de.touches[0].pageY};break;case"touchmove":if(this.touchSwipeState===null)return;this.touchSwipeState.endX=de.touches[0].pageX,this.touchSwipeState.endY=de.touches[0].pageY,de.preventDefault();break;case"touchend":if(this.touchSwipeState===null)return;let te=0;const ve=this.touchSwipeState.endX-this.touchSwipeState.startX,Pe=this.touchSwipeState.endY-this.touchSwipeState.startY,Se=Math.abs(Math.atan2(Pe,ve));Math.abs(ve)>b&&(Se<=P||Se>=Math.PI-P)?te=ve:Math.abs(Pe)>b&&Math.abs(Se-Math.PI/2)<=P&&(te=Pe),te>0?this.pdfViewer.previousPage():te<0&&this.pdfViewer.nextPage();break}}},F=new WeakSet,Os=function(){this.showControlsBind=z(this,Q,an).bind(this),this.mouseDownBind=z(this,le,Ms).bind(this),this.mouseWheelBind=z(this,o,Ts).bind(this),this.resetMouseScrollStateBind=z(this,Ce,Ot).bind(this),this.contextMenuBind=z(this,Z,Ls).bind(this),this.touchSwipeBind=z(this,q,ks).bind(this),window.addEventListener("mousemove",this.showControlsBind),window.addEventListener("mousedown",this.mouseDownBind),window.addEventListener("wheel",this.mouseWheelBind,{passive:!1}),window.addEventListener("keydown",this.resetMouseScrollStateBind),window.addEventListener("contextmenu",this.contextMenuBind),window.addEventListener("touchstart",this.touchSwipeBind),window.addEventListener("touchmove",this.touchSwipeBind),window.addEventListener("touchend",this.touchSwipeBind)},u=new WeakSet,Fs=function(){window.removeEventListener("mousemove",this.showControlsBind),window.removeEventListener("mousedown",this.mouseDownBind),window.removeEventListener("wheel",this.mouseWheelBind,{passive:!1}),window.removeEventListener("keydown",this.resetMouseScrollStateBind),window.removeEventListener("contextmenu",this.contextMenuBind),window.removeEventListener("touchstart",this.touchSwipeBind),window.removeEventListener("touchmove",this.touchSwipeBind),window.removeEventListener("touchend",this.touchSwipeBind),delete this.showControlsBind,delete this.mouseDownBind,delete this.mouseWheelBind,delete this.resetMouseScrollStateBind,delete this.contextMenuBind,delete this.touchSwipeBind},V=new WeakSet,Ns=function(){document.fullscreenElement?z(this,w,Rs).call(this):z(this,D,xs).call(this)},X=new WeakSet,Ds=function(){this.fullscreenChangeBind=z(this,V,Ns).bind(this),window.addEventListener("fullscreenchange",this.fullscreenChangeBind)},B=new WeakSet,on=function(){window.removeEventListener("fullscreenchange",this.fullscreenChangeBind),delete this.fullscreenChangeBind},_.PDFPresentationMode=R},(L,_,m)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.PDFRenderingQueue=void 0;var n=m(5),c=m(4);const C=3e4;class A{constructor(){this.pdfViewer=null,this.pdfThumbnailViewer=null,this.onIdle=null,this.highestPriorityPage=null,this.idleTimeout=null,this.printing=!1,this.isThumbnailViewEnabled=!1,Object.defineProperty(this,"hasViewer",{value:()=>!!this.pdfViewer})}setViewer(r){this.pdfViewer=r}setThumbnailViewer(r){this.pdfThumbnailViewer=r}isHighestPriority(r){return this.highestPriorityPage===r.renderingId}renderHighestPriority(r){var g;this.idleTimeout&&(clearTimeout(this.idleTimeout),this.idleTimeout=null),!this.pdfViewer.forceRendering(r)&&(this.isThumbnailViewEnabled&&((g=this.pdfThumbnailViewer)!=null&&g.forceRendering())||this.printing||this.onIdle&&(this.idleTimeout=setTimeout(this.onIdle.bind(this),C)))}getHighestPriority(r,g,b,P=!1){const R=r.views,v=R.length;if(v===0)return null;for(let y=0;y<v;y++){const w=R[y].view;if(!this.isViewFinished(w))return w}const T=r.first.id,o=r.last.id;if(o-T+1>v){const y=r.ids;for(let w=1,N=o-T;w<N;w++){const D=b?T+w:o-w;if(y.has(D))continue;const G=g[D-1];if(!this.isViewFinished(G))return G}}let l=b?o:T-2,S=g[l];return S&&!this.isViewFinished(S)||P&&(l+=b?1:-1,S=g[l],S&&!this.isViewFinished(S))?S:null}isViewFinished(r){return r.renderingState===c.RenderingStates.FINISHED}renderView(r){switch(r.renderingState){case c.RenderingStates.FINISHED:return!1;case c.RenderingStates.PAUSED:this.highestPriorityPage=r.renderingId,r.resume();break;case c.RenderingStates.RUNNING:this.highestPriorityPage=r.renderingId;break;case c.RenderingStates.INITIAL:this.highestPriorityPage=r.renderingId,r.draw().finally(()=>{this.renderHighestPriority()}).catch(g=>{g instanceof n.RenderingCancelledException||console.error(`renderView: "${g}"`)});break}return!0}}_.PDFRenderingQueue=A},(L,_,m)=>{var A,E,r,g,b,P,R,v,T,o,l,S,Bs,w,ei,D,ln,le,Vs,Z,Ft;Object.defineProperty(_,"__esModule",{value:!0}),_.PDFScriptingManager=void 0;var n=m(4),c=m(5);class C{constructor({eventBus:K,sandboxBundleSrc:ue=null,externalServices:se=null,docProperties:Ce=null}){j(this,S);j(this,w);j(this,D);j(this,le);j(this,Z);j(this,A,null);j(this,E,null);j(this,r,null);j(this,g,null);j(this,b,null);j(this,P,null);j(this,R,null);j(this,v,!1);j(this,T,null);j(this,o,null);j(this,l,null);he(this,g,K),he(this,T,ue),he(this,b,se),he(this,r,Ce)}setViewer(K){he(this,R,K)}async setDocument(K){var Me;if(s(this,P)&&await z(this,Z,Ft).call(this),he(this,P,K),!K)return;const[ue,se,Ce]=await Promise.all([K.getFieldObjects(),K.getCalculationOrderIds(),K.getJSActions()]);if(!ue&&!Ce){await z(this,Z,Ft).call(this);return}if(K===s(this,P)){try{he(this,o,z(this,le,Vs).call(this))}catch(q){console.error(`setDocument: "${q.message}".`),await z(this,Z,Ft).call(this);return}this._internalEvents.set("updatefromsandbox",q=>{(q==null?void 0:q.source)===window&&z(this,S,Bs).call(this,q.detail)}),this._internalEvents.set("dispatcheventinsandbox",q=>{var M;(M=s(this,o))==null||M.dispatchEventInSandbox(q.detail)}),this._internalEvents.set("pagechanging",({pageNumber:q,previous:M})=>{q!==M&&(z(this,D,ln).call(this,M),z(this,w,ei).call(this,q))}),this._internalEvents.set("pagerendered",({pageNumber:q})=>{this._pageOpenPending.has(q)&&q===s(this,R).currentPageNumber&&z(this,w,ei).call(this,q)}),this._internalEvents.set("pagesdestroy",async()=>{var q,M;await z(this,D,ln).call(this,s(this,R).currentPageNumber),await((q=s(this,o))==null?void 0:q.dispatchEventInSandbox({id:"doc",name:"WillClose"})),(M=s(this,A))==null||M.resolve()});for(const[q,M]of this._internalEvents)s(this,g)._on(q,M);try{const q=await s(this,r).call(this,K);if(K!==s(this,P))return;await s(this,o).createSandbox({objects:ue,calculationOrder:se,appInfo:{platform:navigator.platform,language:navigator.language},docInfo:{...q,actions:Ce}}),s(this,g).dispatch("sandboxcreated",{source:this})}catch(q){console.error(`setDocument: "${q.message}".`),await z(this,Z,Ft).call(this);return}await((Me=s(this,o))==null?void 0:Me.dispatchEventInSandbox({id:"doc",name:"Open"})),await z(this,w,ei).call(this,s(this,R).currentPageNumber,!0),Promise.resolve().then(()=>{K===s(this,P)&&he(this,v,!0)})}}async dispatchWillSave(){var K;return(K=s(this,o))==null?void 0:K.dispatchEventInSandbox({id:"doc",name:"WillSave"})}async dispatchDidSave(){var K;return(K=s(this,o))==null?void 0:K.dispatchEventInSandbox({id:"doc",name:"DidSave"})}async dispatchWillPrint(){var K;if(s(this,o)){await((K=s(this,l))==null?void 0:K.promise),he(this,l,new c.PromiseCapability);try{await s(this,o).dispatchEventInSandbox({id:"doc",name:"WillPrint"})}catch(ue){throw s(this,l).resolve(),he(this,l,null),ue}await s(this,l).promise}}async dispatchDidPrint(){var K;return(K=s(this,o))==null?void 0:K.dispatchEventInSandbox({id:"doc",name:"DidPrint"})}get destroyPromise(){var K;return((K=s(this,E))==null?void 0:K.promise)||null}get ready(){return s(this,v)}get _internalEvents(){return(0,c.shadow)(this,"_internalEvents",new Map)}get _pageOpenPending(){return(0,c.shadow)(this,"_pageOpenPending",new Set)}get _visitedPages(){return(0,c.shadow)(this,"_visitedPages",new Map)}}A=new WeakMap,E=new WeakMap,r=new WeakMap,g=new WeakMap,b=new WeakMap,P=new WeakMap,R=new WeakMap,v=new WeakMap,T=new WeakMap,o=new WeakMap,l=new WeakMap,S=new WeakSet,Bs=async function(K){var d,u;const ue=s(this,R),se=ue.isInPresentationMode||ue.isChangingPresentationMode,{id:Ce,siblings:Me,command:q,value:M}=K;if(!Ce){switch(q){case"clear":console.clear();break;case"error":console.error(M);break;case"layout":if(!se){const x=(0,n.apiPageLayoutToViewerModes)(M);ue.spreadMode=x.spreadMode}break;case"page-num":ue.currentPageNumber=M+1;break;case"print":await ue.pagesPromise,s(this,g).dispatch("print",{source:this});break;case"println":console.log(M);break;case"zoom":se||(ue.currentScaleValue=M);break;case"SaveAs":s(this,g).dispatch("download",{source:this});break;case"FirstPage":ue.currentPageNumber=1;break;case"LastPage":ue.currentPageNumber=ue.pagesCount;break;case"NextPage":ue.nextPage();break;case"PrevPage":ue.previousPage();break;case"ZoomViewIn":se||ue.increaseScale();break;case"ZoomViewOut":se||ue.decreaseScale();break;case"WillPrintFinished":(d=s(this,l))==null||d.resolve(),he(this,l,null);break}return}if(se&&K.focus)return;delete K.id,delete K.siblings;const F=Me?[Ce,...Me]:[Ce];for(const x of F){const V=document.querySelector(`[data-element-id="${x}"]`);V?V.dispatchEvent(new CustomEvent("updatefromsandbox",{detail:K})):(u=s(this,P))==null||u.annotationStorage.setValue(x,K)}},w=new WeakSet,ei=async function(K,ue=!1){const se=s(this,P),Ce=this._visitedPages;if(ue&&he(this,A,new c.PromiseCapability),!s(this,A))return;const Me=s(this,R).getPageView(K-1);if((Me==null?void 0:Me.renderingState)!==n.RenderingStates.FINISHED){this._pageOpenPending.add(K);return}this._pageOpenPending.delete(K);const q=(async()=>{var F,d;const M=await(Ce.has(K)?null:(F=Me.pdfPage)==null?void 0:F.getJSActions());se===s(this,P)&&await((d=s(this,o))==null?void 0:d.dispatchEventInSandbox({id:"page",name:"PageOpen",pageNumber:K,actions:M}))})();Ce.set(K,q)},D=new WeakSet,ln=async function(K){var Me;const ue=s(this,P),se=this._visitedPages;if(!s(this,A)||this._pageOpenPending.has(K))return;const Ce=se.get(K);Ce&&(se.set(K,null),await Ce,ue===s(this,P)&&await((Me=s(this,o))==null?void 0:Me.dispatchEventInSandbox({id:"page",name:"PageClose",pageNumber:K})))},le=new WeakSet,Vs=function(){if(he(this,E,new c.PromiseCapability),s(this,o))throw new Error("#initScripting: Scripting already exists.");return s(this,b).createScripting({sandboxBundleSrc:s(this,T)})},Z=new WeakSet,Ft=async function(){var K,ue,se;if(!s(this,o)){he(this,P,null),(K=s(this,E))==null||K.resolve();return}s(this,A)&&(await Promise.race([s(this,A).promise,new Promise(Ce=>{setTimeout(Ce,1e3)})]).catch(()=>{}),he(this,A,null)),he(this,P,null);try{await s(this,o).destroySandbox()}catch{}(ue=s(this,l))==null||ue.reject(new Error("Scripting destroyed.")),he(this,l,null);for(const[Ce,Me]of this._internalEvents)s(this,g)._off(Ce,Me);this._internalEvents.clear(),this._pageOpenPending.clear(),this._visitedPages.clear(),he(this,o,null),he(this,v,!1),(se=s(this,E))==null||se.resolve()},_.PDFScriptingManager=C},(L,_,m)=>{var g,b,P,R,v,T,wt,l,Hs,y,cn,N,Us,G,ti,H,js,re,zs;Object.defineProperty(_,"__esModule",{value:!0}),_.PDFSidebar=void 0;var n=m(4);const c="--sidebar-width",C=200,A="sidebarResizing",E="pdfSidebarNotification";class r{constructor({elements:ue,eventBus:se,l10n:Ce}){j(this,T);j(this,l);j(this,y);j(this,N);j(this,G);j(this,H);j(this,re);j(this,g,!1);j(this,b,z(this,H,js).bind(this));j(this,P,z(this,re,zs).bind(this));j(this,R,null);j(this,v,null);this.isOpen=!1,this.active=n.SidebarView.THUMBS,this.isInitialViewSet=!1,this.isInitialEventDispatched=!1,this.onToggled=null,this.onUpdateThumbnails=null,this.outerContainer=ue.outerContainer,this.sidebarContainer=ue.sidebarContainer,this.toggleButton=ue.toggleButton,this.resizer=ue.resizer,this.thumbnailButton=ue.thumbnailButton,this.outlineButton=ue.outlineButton,this.attachmentsButton=ue.attachmentsButton,this.layersButton=ue.layersButton,this.thumbnailView=ue.thumbnailView,this.outlineView=ue.outlineView,this.attachmentsView=ue.attachmentsView,this.layersView=ue.layersView,this._outlineOptionsContainer=ue.outlineOptionsContainer,this._currentOutlineItemButton=ue.currentOutlineItemButton,this.eventBus=se,this.l10n=Ce,Ce.getDirection().then(Me=>{he(this,g,Me==="rtl")}),z(this,N,Us).call(this)}reset(){this.isInitialViewSet=!1,this.isInitialEventDispatched=!1,z(this,y,cn).call(this,!0),this.switchView(n.SidebarView.THUMBS),this.outlineButton.disabled=!1,this.attachmentsButton.disabled=!1,this.layersButton.disabled=!1,this._currentOutlineItemButton.disabled=!0}get visibleView(){return this.isOpen?this.active:n.SidebarView.NONE}setInitialView(ue=n.SidebarView.NONE){if(!this.isInitialViewSet){if(this.isInitialViewSet=!0,ue===n.SidebarView.NONE||ue===n.SidebarView.UNKNOWN){z(this,T,wt).call(this);return}this.switchView(ue,!0),this.isInitialEventDispatched||z(this,T,wt).call(this)}}switchView(ue,se=!1){const Ce=ue!==this.active;let Me=!1;switch(ue){case n.SidebarView.NONE:this.isOpen&&this.close();return;case n.SidebarView.THUMBS:this.isOpen&&Ce&&(Me=!0);break;case n.SidebarView.OUTLINE:if(this.outlineButton.disabled)return;break;case n.SidebarView.ATTACHMENTS:if(this.attachmentsButton.disabled)return;break;case n.SidebarView.LAYERS:if(this.layersButton.disabled)return;break;default:console.error(`PDFSidebar.switchView: "${ue}" is not a valid view.`);return}if(this.active=ue,(0,n.toggleCheckedBtn)(this.thumbnailButton,ue===n.SidebarView.THUMBS,this.thumbnailView),(0,n.toggleCheckedBtn)(this.outlineButton,ue===n.SidebarView.OUTLINE,this.outlineView),(0,n.toggleCheckedBtn)(this.attachmentsButton,ue===n.SidebarView.ATTACHMENTS,this.attachmentsView),(0,n.toggleCheckedBtn)(this.layersButton,ue===n.SidebarView.LAYERS,this.layersView),this._outlineOptionsContainer.classList.toggle("hidden",ue!==n.SidebarView.OUTLINE),se&&!this.isOpen){this.open();return}Me&&(this.onUpdateThumbnails(),this.onToggled()),Ce&&z(this,T,wt).call(this)}open(){this.isOpen||(this.isOpen=!0,(0,n.toggleExpandedBtn)(this.toggleButton,!0),this.outerContainer.classList.add("sidebarMoving","sidebarOpen"),this.active===n.SidebarView.THUMBS&&this.onUpdateThumbnails(),this.onToggled(),z(this,T,wt).call(this),z(this,y,cn).call(this))}close(){this.isOpen&&(this.isOpen=!1,(0,n.toggleExpandedBtn)(this.toggleButton,!1),this.outerContainer.classList.add("sidebarMoving"),this.outerContainer.classList.remove("sidebarOpen"),this.onToggled(),z(this,T,wt).call(this))}toggle(){this.isOpen?this.close():this.open()}get outerContainerWidth(){return s(this,R)||he(this,R,this.outerContainer.clientWidth)}}g=new WeakMap,b=new WeakMap,P=new WeakMap,R=new WeakMap,v=new WeakMap,T=new WeakSet,wt=function(){this.isInitialViewSet&&(this.isInitialEventDispatched||(this.isInitialEventDispatched=!0)),this.eventBus.dispatch("sidebarviewchanged",{source:this,view:this.visibleView})},l=new WeakSet,Hs=function(){this.toggleButton.setAttribute("data-l10n-id","toggle_sidebar_notification2"),this.l10n.translate(this.toggleButton),this.isOpen||this.toggleButton.classList.add(E)},y=new WeakSet,cn=function(ue=!1){(this.isOpen||ue)&&this.toggleButton.classList.remove(E),ue&&(this.toggleButton.setAttribute("data-l10n-id","toggle_sidebar"),this.l10n.translate(this.toggleButton))},N=new WeakSet,Us=function(){this.sidebarContainer.addEventListener("transitionend",se=>{se.target===this.sidebarContainer&&this.outerContainer.classList.remove("sidebarMoving")}),this.toggleButton.addEventListener("click",()=>{this.toggle()}),this.thumbnailButton.addEventListener("click",()=>{this.switchView(n.SidebarView.THUMBS)}),this.outlineButton.addEventListener("click",()=>{this.switchView(n.SidebarView.OUTLINE)}),this.outlineButton.addEventListener("dblclick",()=>{this.eventBus.dispatch("toggleoutlinetree",{source:this})}),this.attachmentsButton.addEventListener("click",()=>{this.switchView(n.SidebarView.ATTACHMENTS)}),this.layersButton.addEventListener("click",()=>{this.switchView(n.SidebarView.LAYERS)}),this.layersButton.addEventListener("dblclick",()=>{this.eventBus.dispatch("resetlayers",{source:this})}),this._currentOutlineItemButton.addEventListener("click",()=>{this.eventBus.dispatch("currentoutlineitem",{source:this})});const ue=(se,Ce,Me)=>{Ce.disabled=!se,se?z(this,l,Hs).call(this):this.active===Me&&this.switchView(n.SidebarView.THUMBS)};this.eventBus._on("outlineloaded",se=>{ue(se.outlineCount,this.outlineButton,n.SidebarView.OUTLINE),se.currentOutlineItemPromise.then(Ce=>{this.isInitialViewSet&&(this._currentOutlineItemButton.disabled=!Ce)})}),this.eventBus._on("attachmentsloaded",se=>{ue(se.attachmentsCount,this.attachmentsButton,n.SidebarView.ATTACHMENTS)}),this.eventBus._on("layersloaded",se=>{ue(se.layersCount,this.layersButton,n.SidebarView.LAYERS)}),this.eventBus._on("presentationmodechanged",se=>{se.state===n.PresentationModeState.NORMAL&&this.visibleView===n.SidebarView.THUMBS&&this.onUpdateThumbnails()}),this.resizer.addEventListener("mousedown",se=>{se.button===0&&(this.outerContainer.classList.add(A),window.addEventListener("mousemove",s(this,b)),window.addEventListener("mouseup",s(this,P)))}),this.eventBus._on("resize",se=>{if(se.source!==window||(he(this,R,null),!s(this,v)))return;if(!this.isOpen){z(this,G,ti).call(this,s(this,v));return}this.outerContainer.classList.add(A);const Ce=z(this,G,ti).call(this,s(this,v));Promise.resolve().then(()=>{this.outerContainer.classList.remove(A),Ce&&this.eventBus.dispatch("resize",{source:this})})})},G=new WeakSet,ti=function(ue=0){const se=Math.floor(this.outerContainerWidth/2);return ue>se&&(ue=se),ue<C&&(ue=C),ue===s(this,v)?!1:(he(this,v,ue),n.docStyle.setProperty(c,`${ue}px`),!0)},H=new WeakSet,js=function(ue){let se=ue.clientX;s(this,g)&&(se=this.outerContainerWidth-se),z(this,G,ti).call(this,se)},re=new WeakSet,zs=function(ue){this.outerContainer.classList.remove(A),this.eventBus.dispatch("resize",{source:this}),window.removeEventListener("mousemove",s(this,b)),window.removeEventListener("mouseup",s(this,P))},_.PDFSidebar=r},(L,_,m)=>{var r,Ws,b,$s;Object.defineProperty(_,"__esModule",{value:!0}),_.PDFThumbnailViewer=void 0;var n=m(4),c=m(30);const C=-19,A="selected";class E{constructor({container:v,eventBus:T,linkService:o,renderingQueue:l,l10n:S,pageColors:y}){j(this,r);j(this,b);this.container=v,this.eventBus=T,this.linkService=o,this.renderingQueue=l,this.l10n=S,this.pageColors=y||null,this.scroll=(0,n.watchScroll)(this.container,this._scrollUpdated.bind(this)),this._resetView()}_scrollUpdated(){this.renderingQueue.renderHighestPriority()}getThumbnail(v){return this._thumbnails[v]}_getVisibleThumbs(){return(0,n.getVisibleElements)({scrollEl:this.container,views:this._thumbnails})}scrollThumbnailIntoView(v){if(!this.pdfDocument)return;const T=this._thumbnails[v-1];if(!T){console.error('scrollThumbnailIntoView: Invalid "pageNumber" parameter.');return}v!==this._currentPageNumber&&(this._thumbnails[this._currentPageNumber-1].div.classList.remove(A),T.div.classList.add(A));const{first:o,last:l,views:S}=this._getVisibleThumbs();if(S.length>0){let y=!1;if(v<=o.id||v>=l.id)y=!0;else for(const{id:w,percent:N}of S)if(w===v){y=N<100;break}y&&(0,n.scrollIntoView)(T.div,{top:C})}this._currentPageNumber=v}get pagesRotation(){return this._pagesRotation}set pagesRotation(v){if(!(0,n.isValidRotation)(v))throw new Error("Invalid thumbnails rotation angle.");if(!this.pdfDocument||this._pagesRotation===v)return;this._pagesRotation=v;const T={rotation:v};for(const o of this._thumbnails)o.update(T)}cleanup(){for(const v of this._thumbnails)v.renderingState!==n.RenderingStates.FINISHED&&v.reset();c.TempImageFactory.destroyCanvas()}_resetView(){this._thumbnails=[],this._currentPageNumber=1,this._pageLabels=null,this._pagesRotation=0,this.container.textContent=""}setDocument(v){if(this.pdfDocument&&(this._cancelRendering(),this._resetView()),this.pdfDocument=v,!v)return;const T=v.getPage(1),o=v.getOptionalContentConfig();T.then(l=>{var N;const S=v.numPages,y=l.getViewport({scale:1});for(let D=1;D<=S;++D){const G=new c.PDFThumbnailView({container:this.container,eventBus:this.eventBus,id:D,defaultViewport:y.clone(),optionalContentConfigPromise:o,linkService:this.linkService,renderingQueue:this.renderingQueue,l10n:this.l10n,pageColors:this.pageColors});this._thumbnails.push(G)}(N=this._thumbnails[0])==null||N.setPdfPage(l),this._thumbnails[this._currentPageNumber-1].div.classList.add(A)}).catch(l=>{console.error("Unable to initialize thumbnail viewer",l)})}_cancelRendering(){for(const v of this._thumbnails)v.cancelRendering()}setPageLabels(v){var T;if(this.pdfDocument){v?Array.isArray(v)&&this.pdfDocument.numPages===v.length?this._pageLabels=v:(this._pageLabels=null,console.error("PDFThumbnailViewer_setPageLabels: Invalid page labels.")):this._pageLabels=null;for(let o=0,l=this._thumbnails.length;o<l;o++)this._thumbnails[o].setPageLabel(((T=this._pageLabels)==null?void 0:T[o])??null)}}forceRendering(){const v=this._getVisibleThumbs(),T=z(this,b,$s).call(this,v),o=this.renderingQueue.getHighestPriority(v,this._thumbnails,T);return o?(z(this,r,Ws).call(this,o).then(()=>{this.renderingQueue.renderView(o)}),!0):!1}}r=new WeakSet,Ws=async function(v){if(v.pdfPage)return v.pdfPage;try{const T=await this.pdfDocument.getPage(v.id);return v.pdfPage||v.setPdfPage(T),T}catch(T){return console.error("Unable to get page for thumb view",T),null}},b=new WeakSet,$s=function(v){var T,o;return((T=v.first)==null?void 0:T.id)===1?!0:((o=v.last)==null?void 0:o.id)===this._thumbnails.length?!1:this.scroll.down},_.PDFThumbnailViewer=E},(L,_,m)=>{var b,P,dn,v,hn;Object.defineProperty(_,"__esModule",{value:!0}),_.TempImageFactory=_.PDFThumbnailView=void 0;var n=m(4),c=m(5);const C=2,A=3,E=98;class r{static getCanvas(l,S){const y=s(this,b)||he(this,b,document.createElement("canvas"));y.width=l,y.height=S;const w=y.getContext("2d",{alpha:!1});return w.save(),w.fillStyle="rgb(255, 255, 255)",w.fillRect(0,0,l,S),w.restore(),[y,y.getContext("2d")]}static destroyCanvas(){const l=s(this,b);l&&(l.width=0,l.height=0),he(this,b,null)}}b=new WeakMap,j(r,b,null),_.TempImageFactory=r;class g{constructor({container:l,eventBus:S,id:y,defaultViewport:w,optionalContentConfigPromise:N,linkService:D,renderingQueue:G,l10n:le,pageColors:H}){j(this,P);j(this,v);this.id=y,this.renderingId="thumbnail"+y,this.pageLabel=null,this.pdfPage=null,this.rotation=0,this.viewport=w,this.pdfPageRotate=w.rotation,this._optionalContentConfigPromise=N||null,this.pageColors=H||null,this.eventBus=S,this.linkService=D,this.renderingQueue=G,this.renderTask=null,this.renderingState=n.RenderingStates.INITIAL,this.resume=null,this.l10n=le;const Z=document.createElement("a");Z.href=D.getAnchorUrl("#page="+y),this._thumbPageTitle.then(K=>{Z.title=K}),Z.onclick=function(){return D.goToPage(y),!1},this.anchor=Z;const re=document.createElement("div");re.className="thumbnail",re.setAttribute("data-page-number",this.id),this.div=re,z(this,P,dn).call(this);const Q=document.createElement("div");Q.className="thumbnailImage",this._placeholderImg=Q,re.append(Q),Z.append(re),l.append(Z)}setPdfPage(l){this.pdfPage=l,this.pdfPageRotate=l.rotate;const S=(this.rotation+this.pdfPageRotate)%360;this.viewport=l.getViewport({scale:1,rotation:S}),this.reset()}reset(){var l;this.cancelRendering(),this.renderingState=n.RenderingStates.INITIAL,this.div.removeAttribute("data-loaded"),(l=this.image)==null||l.replaceWith(this._placeholderImg),z(this,P,dn).call(this),this.image&&(this.image.removeAttribute("src"),delete this.image)}update({rotation:l=null}){typeof l=="number"&&(this.rotation=l);const S=(this.rotation+this.pdfPageRotate)%360;this.viewport=this.viewport.clone({scale:1,rotation:S}),this.reset()}cancelRendering(){this.renderTask&&(this.renderTask.cancel(),this.renderTask=null),this.resume=null}_getPageDrawContext(l=1){const S=document.createElement("canvas"),y=S.getContext("2d",{alpha:!1}),w=new n.OutputScale;S.width=l*this.canvasWidth*w.sx|0,S.height=l*this.canvasHeight*w.sy|0;const N=w.scaled?[w.sx,0,0,w.sy,0,0]:null;return{ctx:y,canvas:S,transform:N}}_convertCanvasToImage(l){if(this.renderingState!==n.RenderingStates.FINISHED)throw new Error("_convertCanvasToImage: Rendering has not finished.");const S=this._reduceImage(l),y=document.createElement("img");y.className="thumbnailImage",this._thumbPageCanvas.then(w=>{y.setAttribute("aria-label",w)}),y.src=S.toDataURL(),this.image=y,this.div.setAttribute("data-loaded",!0),this._placeholderImg.replaceWith(y),S.width=0,S.height=0}async draw(){if(this.renderingState!==n.RenderingStates.INITIAL){console.error("Must be in new state before drawing");return}const{pdfPage:l}=this;if(!l)throw this.renderingState=n.RenderingStates.FINISHED,new Error("pdfPage is not loaded");this.renderingState=n.RenderingStates.RUNNING;const{ctx:S,canvas:y,transform:w}=this._getPageDrawContext(C),N=this.viewport.clone({scale:C*this.scale}),D=Z=>{if(!this.renderingQueue.isHighestPriority(this)){this.renderingState=n.RenderingStates.PAUSED,this.resume=()=>{this.renderingState=n.RenderingStates.RUNNING,Z()};return}Z()},G={canvasContext:S,transform:w,viewport:N,optionalContentConfigPromise:this._optionalContentConfigPromise,pageColors:this.pageColors},le=this.renderTask=l.render(G);le.onContinue=D;const H=le.promise.then(()=>z(this,v,hn).call(this,le,y),Z=>z(this,v,hn).call(this,le,y,Z));return H.finally(()=>{y.width=0,y.height=0,this.eventBus.dispatch("thumbnailrendered",{source:this,pageNumber:this.id,pdfPage:this.pdfPage})}),H}setImage(l){if(this.renderingState!==n.RenderingStates.INITIAL)return;const{thumbnailCanvas:S,pdfPage:y,scale:w}=l;S&&(this.pdfPage||this.setPdfPage(y),!(w<this.scale)&&(this.renderingState=n.RenderingStates.FINISHED,this._convertCanvasToImage(S)))}_reduceImage(l){const{ctx:S,canvas:y}=this._getPageDrawContext();if(l.width<=2*y.width)return S.drawImage(l,0,0,l.width,l.height,0,0,y.width,y.height),y;let w=y.width<<A,N=y.height<<A;const[D,G]=r.getCanvas(w,N);for(;w>l.width||N>l.height;)w>>=1,N>>=1;for(G.drawImage(l,0,0,l.width,l.height,0,0,w,N);w>2*y.width;)G.drawImage(D,0,0,w,N,0,0,w>>1,N>>1),w>>=1,N>>=1;return S.drawImage(D,0,0,w,N,0,0,y.width,y.height),y}get _thumbPageTitle(){return this.l10n.get("thumb_page_title",{page:this.pageLabel??this.id})}get _thumbPageCanvas(){return this.l10n.get("thumb_page_canvas",{page:this.pageLabel??this.id})}setPageLabel(l){this.pageLabel=typeof l=="string"?l:null,this._thumbPageTitle.then(S=>{this.anchor.title=S}),this.renderingState===n.RenderingStates.FINISHED&&this._thumbPageCanvas.then(S=>{var y;(y=this.image)==null||y.setAttribute("aria-label",S)})}}P=new WeakSet,dn=function(){const{width:l,height:S}=this.viewport,y=l/S;this.canvasWidth=E,this.canvasHeight=this.canvasWidth/y|0,this.scale=this.canvasWidth/l;const{style:w}=this.div;w.setProperty("--thumbnail-width",`${this.canvasWidth}px`),w.setProperty("--thumbnail-height",`${this.canvasHeight}px`)},v=new WeakSet,hn=async function(l,S,y=null){if(l===this.renderTask&&(this.renderTask=null),!(y instanceof c.RenderingCancelledException)&&(this.renderingState=n.RenderingStates.FINISHED,this._convertCanvasToImage(S),y))throw y},_.PDFThumbnailView=g},(L,_,m)=>{var T,o,l,un,y,w,N,D,G,le,H,Z,re,Q,K,ue,se,Ce,Me,q,M,F,Gs,u,qs,V,Xs,X,Ks,B,Nt,$,ii,te,Ys,Pe,fn,oe,Zs,ne,ct,be,pn,Te,Js,Ne,Qs,Ue,gn,qe,er;Object.defineProperty(_,"__esModule",{value:!0}),_.PagesCountLimit=_.PDFViewer=_.PDFPageViewBuffer=void 0;var n=m(5),c=m(4),C=m(32),A=m(33),E=m(26),r=m(11);const g=10,b={FORCE_SCROLL_MODE_PAGE:15e3,FORCE_LAZY_PAGE_INIT:7500,PAUSE_EAGER_PAGE_INIT:250};_.PagesCountLimit=b;function P(xe){return Object.values(n.AnnotationEditorType).includes(xe)&&xe!==n.AnnotationEditorType.DISABLE}class R{constructor(U){j(this,l);j(this,T,new Set);j(this,o,0);he(this,o,U)}push(U){const Y=s(this,T);Y.has(U)&&Y.delete(U),Y.add(U),Y.size>s(this,o)&&z(this,l,un).call(this)}resize(U,Y=null){he(this,o,U);const Ee=s(this,T);if(Y){const ee=Ee.size;let pe=1;for(const we of Ee)if(Y.has(we.id)&&(Ee.delete(we),Ee.add(we)),++pe>ee)break}for(;Ee.size>s(this,o);)z(this,l,un).call(this)}has(U){return s(this,T).has(U)}[Symbol.iterator](){return s(this,T).keys()}}T=new WeakMap,o=new WeakMap,l=new WeakSet,un=function(){const U=s(this,T).keys().next().value;U==null||U.destroy(),s(this,T).delete(U)},_.PDFPageViewBuffer=R;class v{constructor(U){j(this,F);j(this,u);j(this,V);j(this,X);j(this,B);j(this,$);j(this,te);j(this,Pe);j(this,oe);j(this,ne);j(this,be);j(this,Te);j(this,Ne);j(this,Ue);j(this,qe);j(this,y,null);j(this,w,null);j(this,N,n.AnnotationEditorType.NONE);j(this,D,null);j(this,G,n.AnnotationMode.ENABLE_FORMS);j(this,le,null);j(this,H,null);j(this,Z,!1);j(this,re,!1);j(this,Q,null);j(this,K,!1);j(this,ue,0);j(this,se,new ResizeObserver(z(this,qe,er).bind(this)));j(this,Ce,null);j(this,Me,null);j(this,q,null);j(this,M,c.TextLayerMode.ENABLE);var Ee,ee;const Y="3.11.176";if(n.version!==Y)throw new Error(`The API version "${n.version}" does not match the Viewer version "${Y}".`);if(this.container=U.container,this.viewer=U.viewer||U.container.firstElementChild,((Ee=this.container)==null?void 0:Ee.tagName)!=="DIV"||((ee=this.viewer)==null?void 0:ee.tagName)!=="DIV")throw new Error("Invalid `container` and/or `viewer` option.");if(this.container.offsetParent&&getComputedStyle(this.container).position!=="absolute")throw new Error("The `container` must be absolutely positioned.");s(this,se).observe(this.container),this.eventBus=U.eventBus,this.linkService=U.linkService||new r.SimpleLinkService,this.downloadManager=U.downloadManager||null,this.findController=U.findController||null,he(this,w,U.altTextManager||null),this.findController&&(this.findController.onIsPageVisible=pe=>this._getVisiblePages().ids.has(pe)),this._scriptingManager=U.scriptingManager||null,he(this,M,U.textLayerMode??c.TextLayerMode.ENABLE),he(this,G,U.annotationMode??n.AnnotationMode.ENABLE_FORMS),he(this,N,U.annotationEditorMode??n.AnnotationEditorType.NONE),this.imageResourcesPath=U.imageResourcesPath||"",this.enablePrintAutoRotate=U.enablePrintAutoRotate||!1,this.removePageBorders=U.removePageBorders||!1,U.useOnlyCssZoom&&(console.error("useOnlyCssZoom was removed, please use `maxCanvasPixels = 0` instead."),U.maxCanvasPixels=0),this.isOffscreenCanvasSupported=U.isOffscreenCanvasSupported??!0,this.maxCanvasPixels=U.maxCanvasPixels,this.l10n=U.l10n||C.NullL10n,he(this,Z,U.enablePermissions||!1),this.pageColors=U.pageColors||null,this.defaultRenderingQueue=!U.renderingQueue,this.defaultRenderingQueue?(this.renderingQueue=new E.PDFRenderingQueue,this.renderingQueue.setViewer(this)):this.renderingQueue=U.renderingQueue,this.scroll=(0,c.watchScroll)(this.container,this._scrollUpdate.bind(this)),this.presentationModeState=c.PresentationModeState.UNKNOWN,this._onBeforeDraw=this._onAfterDraw=null,this._resetView(),this.removePageBorders&&this.viewer.classList.add("removePageBorders"),z(this,Ue,gn).call(this),this.eventBus._on("thumbnailrendered",({pageNumber:pe,pdfPage:we})=>{const ie=this._pages[pe-1];s(this,y).has(ie)||we==null||we.cleanup()})}get pagesCount(){return this._pages.length}getPageView(U){return this._pages[U]}getCachedPageViews(){return new Set(s(this,y))}get pageViewsReady(){return this._pagesCapability.settled&&this._pages.every(U=>U==null?void 0:U.pdfPage)}get renderForms(){return s(this,G)===n.AnnotationMode.ENABLE_FORMS}get enableScripting(){return!!this._scriptingManager}get currentPageNumber(){return this._currentPageNumber}set currentPageNumber(U){if(!Number.isInteger(U))throw new Error("Invalid page number.");this.pdfDocument&&(this._setCurrentPageNumber(U,!0)||console.error(`currentPageNumber: "${U}" is not a valid page.`))}_setCurrentPageNumber(U,Y=!1){var ee;if(this._currentPageNumber===U)return Y&&z(this,be,pn).call(this),!0;if(!(0<U&&U<=this.pagesCount))return!1;const Ee=this._currentPageNumber;return this._currentPageNumber=U,this.eventBus.dispatch("pagechanging",{source:this,pageNumber:U,pageLabel:((ee=this._pageLabels)==null?void 0:ee[U-1])??null,previous:Ee}),Y&&z(this,be,pn).call(this),!0}get currentPageLabel(){var U;return((U=this._pageLabels)==null?void 0:U[this._currentPageNumber-1])??null}set currentPageLabel(U){if(!this.pdfDocument)return;let Y=U|0;if(this._pageLabels){const Ee=this._pageLabels.indexOf(U);Ee>=0&&(Y=Ee+1)}this._setCurrentPageNumber(Y,!0)||console.error(`currentPageLabel: "${U}" is not a valid page.`)}get currentScale(){return this._currentScale!==c.UNKNOWN_SCALE?this._currentScale:c.DEFAULT_SCALE}set currentScale(U){if(isNaN(U))throw new Error("Invalid numeric scale.");this.pdfDocument&&z(this,ne,ct).call(this,U,{noScroll:!1})}get currentScaleValue(){return this._currentScaleValue}set currentScaleValue(U){this.pdfDocument&&z(this,ne,ct).call(this,U,{noScroll:!1})}get pagesRotation(){return this._pagesRotation}set pagesRotation(U){if(!(0,c.isValidRotation)(U))throw new Error("Invalid pages rotation angle.");if(!this.pdfDocument||(U%=360,U<0&&(U+=360),this._pagesRotation===U))return;this._pagesRotation=U;const Y=this._currentPageNumber;this.refresh(!0,{rotation:U}),this._currentScaleValue&&z(this,ne,ct).call(this,this._currentScaleValue,{noScroll:!0}),this.eventBus.dispatch("rotationchanging",{source:this,pagesRotation:U,pageNumber:Y}),this.defaultRenderingQueue&&this.update()}get firstPagePromise(){return this.pdfDocument?this._firstPageCapability.promise:null}get onePageRendered(){return this.pdfDocument?this._onePageRenderedCapability.promise:null}get pagesPromise(){return this.pdfDocument?this._pagesCapability.promise:null}async getAllText(){const U=[],Y=[];for(let Ee=1,ee=this.pdfDocument.numPages;Ee<=ee;++Ee){if(s(this,K))return null;Y.length=0;const pe=await this.pdfDocument.getPage(Ee),{items:we}=await pe.getTextContent();for(const ie of we)ie.str&&Y.push(ie.str),ie.hasEOL&&Y.push(`
`);U.push((0,c.removeNullCharacters)(Y.join("")))}return U.join(`
`)}setDocument(U){var we,ie;if(this.pdfDocument&&(this.eventBus.dispatch("pagesdestroy",{source:this}),this._cancelRendering(),this._resetView(),(we=this.findController)==null||we.setDocument(null),(ie=this._scriptingManager)==null||ie.setDocument(null),s(this,D)&&(s(this,D).destroy(),he(this,D,null))),this.pdfDocument=U,!U)return;const Y=U.numPages,Ee=U.getPage(1),ee=U.getOptionalContentConfig(),pe=s(this,Z)?U.getPermissions():Promise.resolve();if(Y>b.FORCE_SCROLL_MODE_PAGE){console.warn("Forcing PAGE-scrolling for performance reasons, given the length of the document.");const _e=this._scrollMode=c.ScrollMode.PAGE;this.eventBus.dispatch("scrollmodechanged",{source:this,mode:_e})}this._pagesCapability.promise.then(()=>{this.eventBus.dispatch("pagesloaded",{source:this,pagesCount:Y})},()=>{}),this._onBeforeDraw=_e=>{const ke=this._pages[_e.pageNumber-1];ke&&s(this,y).push(ke)},this.eventBus._on("pagerender",this._onBeforeDraw),this._onAfterDraw=_e=>{_e.cssTransform||this._onePageRenderedCapability.settled||(this._onePageRenderedCapability.resolve({timestamp:_e.timestamp}),this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null,s(this,Me)&&(document.removeEventListener("visibilitychange",s(this,Me)),he(this,Me,null)))},this.eventBus._on("pagerendered",this._onAfterDraw),Promise.all([Ee,pe]).then(([_e,ke])=>{var k,J;if(U!==this.pdfDocument)return;this._firstPageCapability.resolve(_e),this._optionalContentConfigPromise=ee;const{annotationEditorMode:Re,annotationMode:Fe,textLayerMode:Ve}=z(this,u,qs).call(this,ke);if(Ve!==c.TextLayerMode.DISABLE){const fe=he(this,Q,document.createElement("div"));fe.id="hiddenCopyElement",this.viewer.before(fe)}if(Re!==n.AnnotationEditorType.DISABLE){const fe=Re;U.isPureXfa?console.warn("Warning: XFA-editing is not implemented."):P(fe)?(he(this,D,new n.AnnotationEditorUIManager(this.container,this.viewer,s(this,w),this.eventBus,U,this.pageColors)),fe!==n.AnnotationEditorType.NONE&&s(this,D).updateMode(fe)):console.error(`Invalid AnnotationEditor mode: ${fe}`)}const We=z(this,F,Gs).bind(this),Oe=this._scrollMode===c.ScrollMode.PAGE?null:this.viewer,Ye=this.currentScale,$e=_e.getViewport({scale:Ye*n.PixelsPerInch.PDF_TO_CSS_UNITS});this.viewer.style.setProperty("--scale-factor",$e.scale),(((k=this.pageColors)==null?void 0:k.foreground)==="CanvasText"||((J=this.pageColors)==null?void 0:J.background)==="Canvas")&&this.viewer.style.setProperty("--hcm-highligh-filter",U.filterFactory.addHighlightHCMFilter("CanvasText","Canvas","HighlightText","Highlight"));for(let fe=1;fe<=Y;++fe){const ye=new A.PDFPageView({container:Oe,eventBus:this.eventBus,id:fe,scale:Ye,defaultViewport:$e.clone(),optionalContentConfigPromise:ee,renderingQueue:this.renderingQueue,textLayerMode:Ve,annotationMode:Fe,imageResourcesPath:this.imageResourcesPath,isOffscreenCanvasSupported:this.isOffscreenCanvasSupported,maxCanvasPixels:this.maxCanvasPixels,pageColors:this.pageColors,l10n:this.l10n,layerProperties:We});this._pages.push(ye)}const ge=this._pages[0];ge&&(ge.setPdfPage(_e),this.linkService.cachePageRef(1,_e.ref)),this._scrollMode===c.ScrollMode.PAGE?z(this,B,Nt).call(this):this._spreadMode!==c.SpreadMode.NONE&&this._updateSpreadMode(),z(this,V,Xs).call(this).then(async()=>{var ye,Ae;if((ye=this.findController)==null||ye.setDocument(U),(Ae=this._scriptingManager)==null||Ae.setDocument(U),s(this,Q)&&(he(this,H,z(this,X,Ks).bind(this,Ve)),document.addEventListener("copy",s(this,H))),s(this,D)&&this.eventBus.dispatch("annotationeditormodechanged",{source:this,mode:s(this,N)}),U.loadingParams.disableAutoFetch||Y>b.FORCE_LAZY_PAGE_INIT){this._pagesCapability.resolve();return}let fe=Y-1;if(fe<=0){this._pagesCapability.resolve();return}for(let Ie=2;Ie<=Y;++Ie){const De=U.getPage(Ie).then(ze=>{const He=this._pages[Ie-1];He.pdfPage||He.setPdfPage(ze),this.linkService.cachePageRef(Ie,ze.ref),--fe===0&&this._pagesCapability.resolve()},ze=>{console.error(`Unable to get page ${Ie} to initialize viewer`,ze),--fe===0&&this._pagesCapability.resolve()});Ie%b.PAUSE_EAGER_PAGE_INIT===0&&await De}}),this.eventBus.dispatch("pagesinit",{source:this}),U.getMetadata().then(({info:fe})=>{U===this.pdfDocument&&fe.Language&&(this.viewer.lang=fe.Language)}),this.defaultRenderingQueue&&this.update()}).catch(_e=>{console.error("Unable to initialize viewer",_e),this._pagesCapability.reject(_e)})}setPageLabels(U){var Y;if(this.pdfDocument){U?Array.isArray(U)&&this.pdfDocument.numPages===U.length?this._pageLabels=U:(this._pageLabels=null,console.error("setPageLabels: Invalid page labels.")):this._pageLabels=null;for(let Ee=0,ee=this._pages.length;Ee<ee;Ee++)this._pages[Ee].setPageLabel(((Y=this._pageLabels)==null?void 0:Y[Ee])??null)}}_resetView(){this._pages=[],this._currentPageNumber=1,this._currentScale=c.UNKNOWN_SCALE,this._currentScaleValue=null,this._pageLabels=null,he(this,y,new R(g)),this._location=null,this._pagesRotation=0,this._optionalContentConfigPromise=null,this._firstPageCapability=new n.PromiseCapability,this._onePageRenderedCapability=new n.PromiseCapability,this._pagesCapability=new n.PromiseCapability,this._scrollMode=c.ScrollMode.VERTICAL,this._previousScrollMode=c.ScrollMode.UNKNOWN,this._spreadMode=c.SpreadMode.NONE,he(this,Ce,{previousPageNumber:1,scrollDown:!0,pages:[]}),this._onBeforeDraw&&(this.eventBus._off("pagerender",this._onBeforeDraw),this._onBeforeDraw=null),this._onAfterDraw&&(this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null),s(this,Me)&&(document.removeEventListener("visibilitychange",s(this,Me)),he(this,Me,null)),this.viewer.textContent="",this._updateScrollMode(),this.viewer.removeAttribute("lang"),s(this,Q)&&(document.removeEventListener("copy",s(this,H)),he(this,H,null),s(this,Q).remove(),he(this,Q,null))}_scrollUpdate(){this.pagesCount!==0&&this.update()}pageLabelToPageNumber(U){if(!this._pageLabels)return null;const Y=this._pageLabels.indexOf(U);return Y<0?null:Y+1}scrollPageIntoView({pageNumber:U,destArray:Y=null,allowNegativeOffset:Ee=!1,ignoreDestinationZoom:ee=!1}){if(!this.pdfDocument)return;const pe=Number.isInteger(U)&&this._pages[U-1];if(!pe){console.error(`scrollPageIntoView: "${U}" is not a valid pageNumber parameter.`);return}if(this.isInPresentationMode||!Y){this._setCurrentPageNumber(U,!0);return}let we=0,ie=0,_e=0,ke=0,Re,Fe;const Ve=pe.rotation%180!==0,We=(Ve?pe.height:pe.width)/pe.scale/n.PixelsPerInch.PDF_TO_CSS_UNITS,Oe=(Ve?pe.width:pe.height)/pe.scale/n.PixelsPerInch.PDF_TO_CSS_UNITS;let Ye=0;switch(Y[1].name){case"XYZ":we=Y[2],ie=Y[3],Ye=Y[4],we=we!==null?we:0,ie=ie!==null?ie:Oe;break;case"Fit":case"FitB":Ye="page-fit";break;case"FitH":case"FitBH":ie=Y[2],Ye="page-width",ie===null&&this._location?(we=this._location.left,ie=this._location.top):(typeof ie!="number"||ie<0)&&(ie=Oe);break;case"FitV":case"FitBV":we=Y[2],_e=We,ke=Oe,Ye="page-height";break;case"FitR":we=Y[2],ie=Y[3],_e=Y[4]-we,ke=Y[5]-ie;let J=c.SCROLLBAR_PADDING,fe=c.VERTICAL_PADDING;this.removePageBorders&&(J=fe=0),Re=(this.container.clientWidth-J)/_e/n.PixelsPerInch.PDF_TO_CSS_UNITS,Fe=(this.container.clientHeight-fe)/ke/n.PixelsPerInch.PDF_TO_CSS_UNITS,Ye=Math.min(Math.abs(Re),Math.abs(Fe));break;default:console.error(`scrollPageIntoView: "${Y[1].name}" is not a valid destination type.`);return}if(ee||(Ye&&Ye!==this._currentScale?this.currentScaleValue=Ye:this._currentScale===c.UNKNOWN_SCALE&&(this.currentScaleValue=c.DEFAULT_SCALE_VALUE)),Ye==="page-fit"&&!Y[4]){z(this,$,ii).call(this,pe);return}const $e=[pe.viewport.convertToViewportPoint(we,ie),pe.viewport.convertToViewportPoint(we+_e,ie+ke)];let ge=Math.min($e[0][0],$e[1][0]),k=Math.min($e[0][1],$e[1][1]);Ee||(ge=Math.max(ge,0),k=Math.max(k,0)),z(this,$,ii).call(this,pe,{left:ge,top:k})}_updateLocation(U){const Y=this._currentScale,Ee=this._currentScaleValue,ee=parseFloat(Ee)===Y?Math.round(Y*1e4)/100:Ee,pe=U.id,we=this._pages[pe-1],ie=this.container,_e=we.getPagePoint(ie.scrollLeft-U.x,ie.scrollTop-U.y),ke=Math.round(_e[0]),Re=Math.round(_e[1]);let Fe=`#page=${pe}`;this.isInPresentationMode||(Fe+=`&zoom=${ee},${ke},${Re}`),this._location={pageNumber:pe,scale:ee,top:Re,left:ke,rotation:this._pagesRotation,pdfOpenParams:Fe}}update(){const U=this._getVisiblePages(),Y=U.views,Ee=Y.length;if(Ee===0)return;const ee=Math.max(g,2*Ee+1);s(this,y).resize(ee,U.ids),this.renderingQueue.renderHighestPriority(U);const pe=this._spreadMode===c.SpreadMode.NONE&&(this._scrollMode===c.ScrollMode.PAGE||this._scrollMode===c.ScrollMode.VERTICAL),we=this._currentPageNumber;let ie=!1;for(const _e of Y){if(_e.percent<100)break;if(_e.id===we&&pe){ie=!0;break}}this._setCurrentPageNumber(ie?we:Y[0].id),this._updateLocation(U.first),this.eventBus.dispatch("updateviewarea",{source:this,location:this._location})}containsElement(U){return this.container.contains(U)}focus(){this.container.focus()}get _isContainerRtl(){return getComputedStyle(this.container).direction==="rtl"}get isInPresentationMode(){return this.presentationModeState===c.PresentationModeState.FULLSCREEN}get isChangingPresentationMode(){return this.presentationModeState===c.PresentationModeState.CHANGING}get isHorizontalScrollbarEnabled(){return this.isInPresentationMode?!1:this.container.scrollWidth>this.container.clientWidth}get isVerticalScrollbarEnabled(){return this.isInPresentationMode?!1:this.container.scrollHeight>this.container.clientHeight}_getVisiblePages(){const U=this._scrollMode===c.ScrollMode.PAGE?s(this,Ce).pages:this._pages,Y=this._scrollMode===c.ScrollMode.HORIZONTAL,Ee=Y&&this._isContainerRtl;return(0,c.getVisibleElements)({scrollEl:this.container,views:U,sortByVisibility:!0,horizontal:Y,rtl:Ee})}cleanup(){for(const U of this._pages)U.renderingState!==c.RenderingStates.FINISHED&&U.reset()}_cancelRendering(){for(const U of this._pages)U.cancelRendering()}forceRendering(U){const Y=U||this._getVisiblePages(),Ee=z(this,Ne,Qs).call(this,Y),ee=this._spreadMode!==c.SpreadMode.NONE&&this._scrollMode!==c.ScrollMode.HORIZONTAL,pe=this.renderingQueue.getHighestPriority(Y,this._pages,Ee,ee);return pe?(z(this,Te,Js).call(this,pe).then(()=>{this.renderingQueue.renderView(pe)}),!0):!1}get hasEqualPageSizes(){const U=this._pages[0];for(let Y=1,Ee=this._pages.length;Y<Ee;++Y){const ee=this._pages[Y];if(ee.width!==U.width||ee.height!==U.height)return!1}return!0}getPagesOverview(){let U;return this._pages.map(Y=>{const Ee=Y.pdfPage.getViewport({scale:1}),ee=(0,c.isPortraitOrientation)(Ee);if(U===void 0)U=ee;else if(this.enablePrintAutoRotate&&ee!==U)return{width:Ee.height,height:Ee.width,rotation:(Ee.rotation-90)%360};return{width:Ee.width,height:Ee.height,rotation:Ee.rotation}})}get optionalContentConfigPromise(){return this.pdfDocument?this._optionalContentConfigPromise?this._optionalContentConfigPromise:(console.error("optionalContentConfigPromise: Not initialized yet."),this.pdfDocument.getOptionalContentConfig()):Promise.resolve(null)}set optionalContentConfigPromise(U){if(!(U instanceof Promise))throw new Error(`Invalid optionalContentConfigPromise: ${U}`);this.pdfDocument&&this._optionalContentConfigPromise&&(this._optionalContentConfigPromise=U,this.refresh(!1,{optionalContentConfigPromise:U}),this.eventBus.dispatch("optionalcontentconfigchanged",{source:this,promise:U}))}get scrollMode(){return this._scrollMode}set scrollMode(U){if(this._scrollMode!==U){if(!(0,c.isValidScrollMode)(U))throw new Error(`Invalid scroll mode: ${U}`);this.pagesCount>b.FORCE_SCROLL_MODE_PAGE||(this._previousScrollMode=this._scrollMode,this._scrollMode=U,this.eventBus.dispatch("scrollmodechanged",{source:this,mode:U}),this._updateScrollMode(this._currentPageNumber))}}_updateScrollMode(U=null){const Y=this._scrollMode,Ee=this.viewer;Ee.classList.toggle("scrollHorizontal",Y===c.ScrollMode.HORIZONTAL),Ee.classList.toggle("scrollWrapped",Y===c.ScrollMode.WRAPPED),!(!this.pdfDocument||!U)&&(Y===c.ScrollMode.PAGE?z(this,B,Nt).call(this):this._previousScrollMode===c.ScrollMode.PAGE&&this._updateSpreadMode(),this._currentScaleValue&&isNaN(this._currentScaleValue)&&z(this,ne,ct).call(this,this._currentScaleValue,{noScroll:!0}),this._setCurrentPageNumber(U,!0),this.update())}get spreadMode(){return this._spreadMode}set spreadMode(U){if(this._spreadMode!==U){if(!(0,c.isValidSpreadMode)(U))throw new Error(`Invalid spread mode: ${U}`);this._spreadMode=U,this.eventBus.dispatch("spreadmodechanged",{source:this,mode:U}),this._updateSpreadMode(this._currentPageNumber)}}_updateSpreadMode(U=null){if(!this.pdfDocument)return;const Y=this.viewer,Ee=this._pages;if(this._scrollMode===c.ScrollMode.PAGE)z(this,B,Nt).call(this);else if(Y.textContent="",this._spreadMode===c.SpreadMode.NONE)for(const ee of this._pages)Y.append(ee.div);else{const ee=this._spreadMode-1;let pe=null;for(let we=0,ie=Ee.length;we<ie;++we)pe===null?(pe=document.createElement("div"),pe.className="spread",Y.append(pe)):we%2===ee&&(pe=pe.cloneNode(!1),Y.append(pe)),pe.append(Ee[we].div)}U&&(this._currentScaleValue&&isNaN(this._currentScaleValue)&&z(this,ne,ct).call(this,this._currentScaleValue,{noScroll:!0}),this._setCurrentPageNumber(U,!0),this.update())}_getPageAdvance(U,Y=!1){switch(this._scrollMode){case c.ScrollMode.WRAPPED:{const{views:Ee}=this._getVisiblePages(),ee=new Map;for(const{id:pe,y:we,percent:ie,widthPercent:_e}of Ee){if(ie===0||_e<100)continue;let ke=ee.get(we);ke||ee.set(we,ke||(ke=[])),ke.push(pe)}for(const pe of ee.values()){const we=pe.indexOf(U);if(we===-1)continue;const ie=pe.length;if(ie===1)break;if(Y)for(let _e=we-1,ke=0;_e>=ke;_e--){const Re=pe[_e],Fe=pe[_e+1]-1;if(Re<Fe)return U-Fe}else for(let _e=we+1,ke=ie;_e<ke;_e++){const Re=pe[_e],Fe=pe[_e-1]+1;if(Re>Fe)return Fe-U}if(Y){const _e=pe[0];if(_e<U)return U-_e+1}else{const _e=pe[ie-1];if(_e>U)return _e-U+1}break}break}case c.ScrollMode.HORIZONTAL:break;case c.ScrollMode.PAGE:case c.ScrollMode.VERTICAL:{if(this._spreadMode===c.SpreadMode.NONE)break;const Ee=this._spreadMode-1;if(Y&&U%2!==Ee)break;if(!Y&&U%2===Ee)break;const{views:ee}=this._getVisiblePages(),pe=Y?U-1:U+1;for(const{id:we,percent:ie,widthPercent:_e}of ee)if(we===pe){if(ie>0&&_e===100)return 2;break}break}}return 1}nextPage(){const U=this._currentPageNumber,Y=this.pagesCount;if(U>=Y)return!1;const Ee=this._getPageAdvance(U,!1)||1;return this.currentPageNumber=Math.min(U+Ee,Y),!0}previousPage(){const U=this._currentPageNumber;if(U<=1)return!1;const Y=this._getPageAdvance(U,!0)||1;return this.currentPageNumber=Math.max(U-Y,1),!0}increaseScale({drawingDelay:U,scaleFactor:Y,steps:Ee}={}){if(!this.pdfDocument)return;let ee=this._currentScale;if(Y>1)ee=Math.round(ee*Y*100)/100;else{Ee??(Ee=1);do ee=Math.ceil((ee*c.DEFAULT_SCALE_DELTA).toFixed(2)*10)/10;while(--Ee>0&&ee<c.MAX_SCALE)}z(this,ne,ct).call(this,Math.min(c.MAX_SCALE,ee),{noScroll:!1,drawingDelay:U})}decreaseScale({drawingDelay:U,scaleFactor:Y,steps:Ee}={}){if(!this.pdfDocument)return;let ee=this._currentScale;if(Y>0&&Y<1)ee=Math.round(ee*Y*100)/100;else{Ee??(Ee=1);do ee=Math.floor((ee/c.DEFAULT_SCALE_DELTA).toFixed(2)*10)/10;while(--Ee>0&&ee>c.MIN_SCALE)}z(this,ne,ct).call(this,Math.max(c.MIN_SCALE,ee),{noScroll:!1,drawingDelay:U})}get containerTopLeft(){return s(this,le)||he(this,le,[this.container.offsetTop,this.container.offsetLeft])}get annotationEditorMode(){return s(this,D)?s(this,N):n.AnnotationEditorType.DISABLE}set annotationEditorMode({mode:U,editId:Y=null}){if(!s(this,D))throw new Error("The AnnotationEditor is not enabled.");if(s(this,N)!==U){if(!P(U))throw new Error(`Invalid AnnotationEditor mode: ${U}`);this.pdfDocument&&(he(this,N,U),this.eventBus.dispatch("annotationeditormodechanged",{source:this,mode:U}),s(this,D).updateMode(U,Y))}}set annotationEditorParams({type:U,value:Y}){if(!s(this,D))throw new Error("The AnnotationEditor is not enabled.");s(this,D).updateParams(U,Y)}refresh(U=!1,Y=Object.create(null)){if(this.pdfDocument){for(const Ee of this._pages)Ee.update(Y);s(this,q)!==null&&(clearTimeout(s(this,q)),he(this,q,null)),U||this.update()}}}y=new WeakMap,w=new WeakMap,N=new WeakMap,D=new WeakMap,G=new WeakMap,le=new WeakMap,H=new WeakMap,Z=new WeakMap,re=new WeakMap,Q=new WeakMap,K=new WeakMap,ue=new WeakMap,se=new WeakMap,Ce=new WeakMap,Me=new WeakMap,q=new WeakMap,M=new WeakMap,F=new WeakSet,Gs=function(){const U=this;return{get annotationEditorUIManager(){return s(U,D)},get annotationStorage(){var Y;return(Y=U.pdfDocument)==null?void 0:Y.annotationStorage},get downloadManager(){return U.downloadManager},get enableScripting(){return!!U._scriptingManager},get fieldObjectsPromise(){var Y;return(Y=U.pdfDocument)==null?void 0:Y.getFieldObjects()},get findController(){return U.findController},get hasJSActionsPromise(){var Y;return(Y=U.pdfDocument)==null?void 0:Y.hasJSActions()},get linkService(){return U.linkService}}},u=new WeakSet,qs=function(U){const Y={annotationEditorMode:s(this,N),annotationMode:s(this,G),textLayerMode:s(this,M)};return U&&(!U.includes(n.PermissionFlag.COPY)&&s(this,M)===c.TextLayerMode.ENABLE&&(Y.textLayerMode=c.TextLayerMode.ENABLE_PERMISSIONS),U.includes(n.PermissionFlag.MODIFY_CONTENTS)||(Y.annotationEditorMode=n.AnnotationEditorType.DISABLE),!U.includes(n.PermissionFlag.MODIFY_ANNOTATIONS)&&!U.includes(n.PermissionFlag.FILL_INTERACTIVE_FORMS)&&s(this,G)===n.AnnotationMode.ENABLE_FORMS&&(Y.annotationMode=n.AnnotationMode.ENABLE)),Y},V=new WeakSet,Xs=function(){if(document.visibilityState==="hidden"||!this.container.offsetParent||this._getVisiblePages().views.length===0)return Promise.resolve();const U=new Promise(Y=>{he(this,Me,()=>{document.visibilityState==="hidden"&&(Y(),document.removeEventListener("visibilitychange",s(this,Me)),he(this,Me,null))}),document.addEventListener("visibilitychange",s(this,Me))});return Promise.race([this._onePageRenderedCapability.promise,U])},X=new WeakSet,Ks=function(U,Y){const Ee=document.getSelection(),{focusNode:ee,anchorNode:pe}=Ee;if(pe&&ee&&Ee.containsNode(s(this,Q))){if(s(this,re)||U===c.TextLayerMode.ENABLE_PERMISSIONS){Y.preventDefault(),Y.stopPropagation();return}he(this,re,!0);const we=this.container.style.cursor;this.container.style.cursor="wait";const ie=_e=>he(this,K,_e.key==="Escape");window.addEventListener("keydown",ie),this.getAllText().then(async _e=>{_e!==null&&await navigator.clipboard.writeText(_e)}).catch(_e=>{console.warn(`Something goes wrong when extracting the text: ${_e.message}`)}).finally(()=>{he(this,re,!1),he(this,K,!1),window.removeEventListener("keydown",ie),this.container.style.cursor=we}),Y.preventDefault(),Y.stopPropagation()}},B=new WeakSet,Nt=function(){if(this._scrollMode!==c.ScrollMode.PAGE)throw new Error("#ensurePageViewVisible: Invalid scrollMode value.");const U=this._currentPageNumber,Y=s(this,Ce),Ee=this.viewer;if(Ee.textContent="",Y.pages.length=0,this._spreadMode===c.SpreadMode.NONE&&!this.isInPresentationMode){const ee=this._pages[U-1];Ee.append(ee.div),Y.pages.push(ee)}else{const ee=new Set,pe=this._spreadMode-1;pe===-1?ee.add(U-1):U%2!==pe?(ee.add(U-1),ee.add(U)):(ee.add(U-2),ee.add(U-1));const we=document.createElement("div");if(we.className="spread",this.isInPresentationMode){const ie=document.createElement("div");ie.className="dummyPage",we.append(ie)}for(const ie of ee){const _e=this._pages[ie];_e&&(we.append(_e.div),Y.pages.push(_e))}Ee.append(we)}Y.scrollDown=U>=Y.previousPageNumber,Y.previousPageNumber=U},$=new WeakSet,ii=function(U,Y=null){const{div:Ee,id:ee}=U;if(this._currentPageNumber!==ee&&this._setCurrentPageNumber(ee),this._scrollMode===c.ScrollMode.PAGE&&(z(this,B,Nt).call(this),this.update()),!Y&&!this.isInPresentationMode){const pe=Ee.offsetLeft+Ee.clientLeft,we=pe+Ee.clientWidth,{scrollLeft:ie,clientWidth:_e}=this.container;(this._scrollMode===c.ScrollMode.HORIZONTAL||pe<ie||we>ie+_e)&&(Y={left:0,top:0})}(0,c.scrollIntoView)(Ee,Y),!this._currentScaleValue&&this._location&&(this._location=null)},te=new WeakSet,Ys=function(U){return U===this._currentScale||Math.abs(U-this._currentScale)<1e-15},Pe=new WeakSet,fn=function(U,Y,{noScroll:Ee=!1,preset:ee=!1,drawingDelay:pe=-1}){if(this._currentScaleValue=Y.toString(),z(this,te,Ys).call(this,U)){ee&&this.eventBus.dispatch("scalechanging",{source:this,scale:U,presetValue:Y});return}this.viewer.style.setProperty("--scale-factor",U*n.PixelsPerInch.PDF_TO_CSS_UNITS);const we=pe>=0&&pe<1e3;if(this.refresh(!0,{scale:U,drawingDelay:we?pe:-1}),we&&he(this,q,setTimeout(()=>{he(this,q,null),this.refresh()},pe)),this._currentScale=U,!Ee){let ie=this._currentPageNumber,_e;this._location&&!(this.isInPresentationMode||this.isChangingPresentationMode)&&(ie=this._location.pageNumber,_e=[null,{name:"XYZ"},this._location.left,this._location.top,null]),this.scrollPageIntoView({pageNumber:ie,destArray:_e,allowNegativeOffset:!0})}this.eventBus.dispatch("scalechanging",{source:this,scale:U,presetValue:ee?Y:void 0}),this.defaultRenderingQueue&&this.update()},oe=new WeakSet,Zs=function(){return this._spreadMode!==c.SpreadMode.NONE&&this._scrollMode!==c.ScrollMode.HORIZONTAL?2:1},ne=new WeakSet,ct=function(U,Y){let Ee=parseFloat(U);if(Ee>0)Y.preset=!1,z(this,Pe,fn).call(this,Ee,U,Y);else{const ee=this._pages[this._currentPageNumber-1];if(!ee)return;let pe=c.SCROLLBAR_PADDING,we=c.VERTICAL_PADDING;this.isInPresentationMode?(pe=we=4,this._spreadMode!==c.SpreadMode.NONE&&(pe*=2)):this.removePageBorders?pe=we=0:this._scrollMode===c.ScrollMode.HORIZONTAL&&([pe,we]=[we,pe]);const ie=(this.container.clientWidth-pe)/ee.width*ee.scale/s(this,oe,Zs),_e=(this.container.clientHeight-we)/ee.height*ee.scale;switch(U){case"page-actual":Ee=1;break;case"page-width":Ee=ie;break;case"page-height":Ee=_e;break;case"page-fit":Ee=Math.min(ie,_e);break;case"auto":const ke=(0,c.isPortraitOrientation)(ee)?ie:Math.min(_e,ie);Ee=Math.min(c.MAX_AUTO_SCALE,ke);break;default:console.error(`#setScale: "${U}" is an unknown zoom value.`);return}Y.preset=!0,z(this,Pe,fn).call(this,Ee,U,Y)}},be=new WeakSet,pn=function(){const U=this._pages[this._currentPageNumber-1];this.isInPresentationMode&&z(this,ne,ct).call(this,this._currentScaleValue,{noScroll:!0}),z(this,$,ii).call(this,U)},Te=new WeakSet,Js=async function(U){var Y,Ee;if(U.pdfPage)return U.pdfPage;try{const ee=await this.pdfDocument.getPage(U.id);return U.pdfPage||U.setPdfPage(ee),(Ee=(Y=this.linkService)._cachedPageNumber)!=null&&Ee.call(Y,ee.ref)||this.linkService.cachePageRef(U.id,ee.ref),ee}catch(ee){return console.error("Unable to get page for page view",ee),null}},Ne=new WeakSet,Qs=function(U){var Y,Ee;if(((Y=U.first)==null?void 0:Y.id)===1)return!0;if(((Ee=U.last)==null?void 0:Ee.id)===this.pagesCount)return!1;switch(this._scrollMode){case c.ScrollMode.PAGE:return s(this,Ce).scrollDown;case c.ScrollMode.HORIZONTAL:return this.scroll.right}return this.scroll.down},Ue=new WeakSet,gn=function(U=this.container.clientHeight){U!==s(this,ue)&&(he(this,ue,U),c.docStyle.setProperty("--viewer-container-height",`${U}px`))},qe=new WeakSet,er=function(U){for(const Y of U)if(Y.target===this.container){z(this,Ue,gn).call(this,Math.floor(Y.borderBoxSize[0].blockSize)),he(this,le,null);break}},_.PDFViewer=v},(L,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.NullL10n=void 0,_.getL10nFallback=n;const m={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}}  {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}}  {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};m.print_progress_percent="{{progress}}%";function n(A,E){switch(A){case"find_match_count":A=`find_match_count[${E.total===1?"one":"other"}]`;break;case"find_match_count_limit":A=`find_match_count_limit[${E.limit===1?"one":"other"}]`;break}return m[A]||""}function c(A,E){return E?A.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(r,g)=>g in E?E[g]:"{{"+g+"}}"):A}const C={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(A,E=null,r=n(A,E)){return c(r,E)},async translate(A){}};_.NullL10n=C},(L,_,m)=>{var S,y,w,N,D,G,le,H,Z,re,Q,ni,ue,mn,Ce,bn,q,_n,F,vn,u,tr,V,ir,X,wn;Object.defineProperty(_,"__esModule",{value:!0}),_.PDFPageView=void 0;var n=m(5),c=m(4),C=m(34),A=m(35),E=m(9),r=m(32);m(11);var g=m(36),b=m(37),P=m(38),R=m(39),v=m(40);const T=E.compatibilityParams.maxCanvasPixels||16777216,o=()=>null;class l{constructor(O){j(this,Q);j(this,ue);j(this,Ce);j(this,q);j(this,F);j(this,u);j(this,V);j(this,X);j(this,S,n.AnnotationMode.ENABLE_FORMS);j(this,y,!1);j(this,w,null);j(this,N,null);j(this,D,null);j(this,G,null);j(this,le,c.RenderingStates.INITIAL);j(this,H,c.TextLayerMode.ENABLE);j(this,Z,{directDrawing:!0,initialOptionalContent:!0,regularAnnotations:!0});j(this,re,new WeakMap);var ve;const $=O.container,de=O.defaultViewport;this.id=O.id,this.renderingId="page"+this.id,he(this,w,O.layerProperties||o),this.pdfPage=null,this.pageLabel=null,this.rotation=0,this.scale=O.scale||c.DEFAULT_SCALE,this.viewport=de,this.pdfPageRotate=de.rotation,this._optionalContentConfigPromise=O.optionalContentConfigPromise||null,he(this,H,O.textLayerMode??c.TextLayerMode.ENABLE),he(this,S,O.annotationMode??n.AnnotationMode.ENABLE_FORMS),this.imageResourcesPath=O.imageResourcesPath||"",this.isOffscreenCanvasSupported=O.isOffscreenCanvasSupported??!0,this.maxCanvasPixels=O.maxCanvasPixels??T,this.pageColors=O.pageColors||null,this.eventBus=O.eventBus,this.renderingQueue=O.renderingQueue,this.l10n=O.l10n||r.NullL10n,this.renderTask=null,this.resume=null,this._isStandalone=!((ve=this.renderingQueue)!=null&&ve.hasViewer()),this._container=$,O.useOnlyCssZoom&&(console.error("useOnlyCssZoom was removed, please use `maxCanvasPixels = 0` instead."),this.maxCanvasPixels=0),this._annotationCanvasMap=null,this.annotationLayer=null,this.annotationEditorLayer=null,this.textLayer=null,this.zoomLayer=null,this.xfaLayer=null,this.structTreeLayer=null;const te=document.createElement("div");if(te.className="page",te.setAttribute("data-page-number",this.id),te.setAttribute("role","region"),this.l10n.get("page_landmark",{page:this.id}).then(Pe=>{te.setAttribute("aria-label",Pe)}),this.div=te,z(this,Q,ni).call(this),$==null||$.append(te),this._isStandalone){$==null||$.style.setProperty("--scale-factor",this.scale*n.PixelsPerInch.PDF_TO_CSS_UNITS);const{optionalContentConfigPromise:Pe}=O;Pe&&Pe.then(Se=>{Pe===this._optionalContentConfigPromise&&(s(this,Z).initialOptionalContent=Se.hasInitialVisibility)})}}get renderingState(){return s(this,le)}set renderingState(O){if(O!==s(this,le))switch(he(this,le,O),s(this,N)&&(clearTimeout(s(this,N)),he(this,N,null)),O){case c.RenderingStates.PAUSED:this.div.classList.remove("loading");break;case c.RenderingStates.RUNNING:this.div.classList.add("loadingIcon"),he(this,N,setTimeout(()=>{this.div.classList.add("loading"),he(this,N,null)},0));break;case c.RenderingStates.INITIAL:case c.RenderingStates.FINISHED:this.div.classList.remove("loadingIcon","loading");break}}setPdfPage(O){var de,te,ve;this._isStandalone&&(((de=this.pageColors)==null?void 0:de.foreground)==="CanvasText"||((te=this.pageColors)==null?void 0:te.background)==="Canvas")&&((ve=this._container)==null||ve.style.setProperty("--hcm-highligh-filter",O.filterFactory.addHighlightHCMFilter("CanvasText","Canvas","HighlightText","Highlight"))),this.pdfPage=O,this.pdfPageRotate=O.rotate;const $=(this.rotation+this.pdfPageRotate)%360;this.viewport=O.getViewport({scale:this.scale*n.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:$}),z(this,Q,ni).call(this),this.reset()}destroy(){var O;this.reset(),(O=this.pdfPage)==null||O.cleanup()}get _textHighlighter(){return(0,n.shadow)(this,"_textHighlighter",new P.TextHighlighter({pageIndex:this.id-1,eventBus:this.eventBus,findController:s(this,w).call(this).findController}))}_resetZoomLayer(O=!1){if(!this.zoomLayer)return;const $=this.zoomLayer.firstChild;s(this,re).delete($),$.width=0,$.height=0,O&&this.zoomLayer.remove(),this.zoomLayer=null}reset({keepZoomLayer:O=!1,keepAnnotationLayer:$=!1,keepAnnotationEditorLayer:de=!1,keepXfaLayer:te=!1,keepTextLayer:ve=!1}={}){var Le,Te,Be,Ne,je;this.cancelRendering({keepAnnotationLayer:$,keepAnnotationEditorLayer:de,keepXfaLayer:te,keepTextLayer:ve}),this.renderingState=c.RenderingStates.INITIAL;const Pe=this.div,Se=Pe.childNodes,oe=O&&this.zoomLayer||null,ae=$&&((Le=this.annotationLayer)==null?void 0:Le.div)||null,ne=de&&((Te=this.annotationEditorLayer)==null?void 0:Te.div)||null,ce=te&&((Be=this.xfaLayer)==null?void 0:Be.div)||null,be=ve&&((Ne=this.textLayer)==null?void 0:Ne.div)||null;for(let Ue=Se.length-1;Ue>=0;Ue--){const Ge=Se[Ue];switch(Ge){case oe:case ae:case ne:case ce:case be:continue}Ge.remove()}Pe.removeAttribute("data-loaded"),ae&&this.annotationLayer.hide(),ne&&this.annotationEditorLayer.hide(),ce&&this.xfaLayer.hide(),be&&this.textLayer.hide(),(je=this.structTreeLayer)==null||je.hide(),oe||(this.canvas&&(s(this,re).delete(this.canvas),this.canvas.width=0,this.canvas.height=0,delete this.canvas),this._resetZoomLayer())}update({scale:O=0,rotation:$=null,optionalContentConfigPromise:de=null,drawingDelay:te=-1}){var Pe;this.scale=O||this.scale,typeof $=="number"&&(this.rotation=$),de instanceof Promise&&(this._optionalContentConfigPromise=de,de.then(Se=>{de===this._optionalContentConfigPromise&&(s(this,Z).initialOptionalContent=Se.hasInitialVisibility)})),s(this,Z).directDrawing=!0;const ve=(this.rotation+this.pdfPageRotate)%360;if(this.viewport=this.viewport.clone({scale:this.scale*n.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:ve}),z(this,Q,ni).call(this),this._isStandalone&&((Pe=this._container)==null||Pe.style.setProperty("--scale-factor",this.viewport.scale)),this.canvas){let Se=!1;if(s(this,y)){if(this.maxCanvasPixels===0)Se=!0;else if(this.maxCanvasPixels>0){const{width:ae,height:ne}=this.viewport,{sx:ce,sy:be}=this.outputScale;Se=(Math.floor(ae)*ce|0)*(Math.floor(ne)*be|0)>this.maxCanvasPixels}}const oe=!Se&&te>=0&&te<1e3;if(oe||Se){if(oe&&this.renderingState!==c.RenderingStates.FINISHED&&(this.cancelRendering({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0,cancelExtraDelay:te}),this.renderingState=c.RenderingStates.FINISHED,s(this,Z).directDrawing=!1),this.cssTransform({target:this.canvas,redrawAnnotationLayer:!0,redrawAnnotationEditorLayer:!0,redrawXfaLayer:!0,redrawTextLayer:!oe,hideTextLayer:oe}),oe)return;this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:s(this,G)});return}!this.zoomLayer&&!this.canvas.hidden&&(this.zoomLayer=this.canvas.parentNode,this.zoomLayer.style.position="absolute")}this.zoomLayer&&this.cssTransform({target:this.zoomLayer.firstChild}),this.reset({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0})}cancelRendering({keepAnnotationLayer:O=!1,keepAnnotationEditorLayer:$=!1,keepXfaLayer:de=!1,keepTextLayer:te=!1,cancelExtraDelay:ve=0}={}){var Pe;this.renderTask&&(this.renderTask.cancel(ve),this.renderTask=null),this.resume=null,this.textLayer&&(!te||!this.textLayer.div)&&(this.textLayer.cancel(),this.textLayer=null),this.structTreeLayer&&!this.textLayer&&(this.structTreeLayer=null),this.annotationLayer&&(!O||!this.annotationLayer.div)&&(this.annotationLayer.cancel(),this.annotationLayer=null,this._annotationCanvasMap=null),this.annotationEditorLayer&&(!$||!this.annotationEditorLayer.div)&&(this.annotationEditorLayer.cancel(),this.annotationEditorLayer=null),this.xfaLayer&&(!de||!this.xfaLayer.div)&&(this.xfaLayer.cancel(),this.xfaLayer=null,(Pe=this._textHighlighter)==null||Pe.disable())}cssTransform({target:O,redrawAnnotationLayer:$=!1,redrawAnnotationEditorLayer:de=!1,redrawXfaLayer:te=!1,redrawTextLayer:ve=!1,hideTextLayer:Pe=!1}){var oe;if(!O.hasAttribute("zooming")){O.setAttribute("zooming",!0);const{style:ae}=O;ae.width=ae.height=""}const Se=s(this,re).get(O);if(this.viewport!==Se){const ae=this.viewport.rotation-Se.rotation,ne=Math.abs(ae);let ce=1,be=1;if(ne===90||ne===270){const{width:Le,height:Te}=this.viewport;ce=Te/Le,be=Le/Te}O.style.transform=`rotate(${ae}deg) scale(${ce}, ${be})`}$&&this.annotationLayer&&z(this,ue,mn).call(this),de&&this.annotationEditorLayer&&z(this,Ce,bn).call(this),te&&this.xfaLayer&&z(this,q,_n).call(this),this.textLayer&&(Pe?(this.textLayer.hide(),(oe=this.structTreeLayer)==null||oe.hide()):ve&&z(this,F,vn).call(this))}get width(){return this.viewport.width}get height(){return this.viewport.height}getPagePoint(O,$){return this.viewport.convertToPdfPoint(O,$)}async draw(){this.renderingState!==c.RenderingStates.INITIAL&&(console.error("Must be in new state before drawing"),this.reset());const{div:O,l10n:$,pageColors:de,pdfPage:te,viewport:ve}=this;if(!te)throw this.renderingState=c.RenderingStates.FINISHED,new Error("pdfPage is not loaded");this.renderingState=c.RenderingStates.RUNNING;const Pe=document.createElement("div");if(Pe.classList.add("canvasWrapper"),O.append(Pe),!this.textLayer&&s(this,H)!==c.TextLayerMode.DISABLE&&!te.isPureXfa&&(this._accessibilityManager||(this._accessibilityManager=new b.TextAccessibilityManager),this.textLayer=new R.TextLayerBuilder({highlighter:this._textHighlighter,accessibilityManager:this._accessibilityManager,isOffscreenCanvasSupported:this.isOffscreenCanvasSupported,enablePermissions:s(this,H)===c.TextLayerMode.ENABLE_PERMISSIONS}),O.append(this.textLayer.div)),!this.annotationLayer&&s(this,S)!==n.AnnotationMode.DISABLE){const{annotationStorage:xe,downloadManager:U,enableScripting:Y,fieldObjectsPromise:Ee,hasJSActionsPromise:ee,linkService:pe}=s(this,w).call(this);this._annotationCanvasMap||(this._annotationCanvasMap=new Map),this.annotationLayer=new A.AnnotationLayerBuilder({pageDiv:O,pdfPage:te,annotationStorage:xe,imageResourcesPath:this.imageResourcesPath,renderForms:s(this,S)===n.AnnotationMode.ENABLE_FORMS,linkService:pe,downloadManager:U,l10n:$,enableScripting:Y,hasJSActionsPromise:ee,fieldObjectsPromise:Ee,annotationCanvasMap:this._annotationCanvasMap,accessibilityManager:this._accessibilityManager})}const Se=xe=>{if(be==null||be(!1),this.renderingQueue&&!this.renderingQueue.isHighestPriority(this)){this.renderingState=c.RenderingStates.PAUSED,this.resume=()=>{this.renderingState=c.RenderingStates.RUNNING,xe()};return}xe()},{width:oe,height:ae}=ve,ne=document.createElement("canvas");ne.setAttribute("role","presentation"),ne.hidden=!0;const ce=!!(de!=null&&de.background&&(de!=null&&de.foreground));let be=xe=>{(!ce||xe)&&(ne.hidden=!1,be=null)};Pe.append(ne),this.canvas=ne;const Le=ne.getContext("2d",{alpha:!1}),Te=this.outputScale=new c.OutputScale;if(this.maxCanvasPixels===0){const xe=1/this.scale;Te.sx*=xe,Te.sy*=xe,he(this,y,!0)}else if(this.maxCanvasPixels>0){const xe=oe*ae,U=Math.sqrt(this.maxCanvasPixels/xe);Te.sx>U||Te.sy>U?(Te.sx=U,Te.sy=U,he(this,y,!0)):he(this,y,!1)}const Be=(0,c.approximateFraction)(Te.sx),Ne=(0,c.approximateFraction)(Te.sy);ne.width=(0,c.roundToDivide)(oe*Te.sx,Be[0]),ne.height=(0,c.roundToDivide)(ae*Te.sy,Ne[0]);const{style:je}=ne;je.width=(0,c.roundToDivide)(oe,Be[1])+"px",je.height=(0,c.roundToDivide)(ae,Ne[1])+"px",s(this,re).set(ne,ve);const Ue=Te.scaled?[Te.sx,0,0,Te.sy,0,0]:null,Ge={canvasContext:Le,transform:Ue,viewport:ve,annotationMode:s(this,S),optionalContentConfigPromise:this._optionalContentConfigPromise,annotationCanvasMap:this._annotationCanvasMap,pageColors:de},qe=this.renderTask=this.pdfPage.render(Ge);qe.onContinue=Se;const Qe=qe.promise.then(async()=>{var xe;if(be==null||be(!0),await z(this,X,wn).call(this,qe),z(this,F,vn).call(this),this.annotationLayer&&await z(this,ue,mn).call(this),!this.annotationEditorLayer){const{annotationEditorUIManager:U}=s(this,w).call(this);if(!U)return;this.annotationEditorLayer=new C.AnnotationEditorLayerBuilder({uiManager:U,pageDiv:O,pdfPage:te,l10n:$,accessibilityManager:this._accessibilityManager,annotationLayer:(xe=this.annotationLayer)==null?void 0:xe.annotationLayer})}z(this,Ce,bn).call(this)},xe=>(xe instanceof n.RenderingCancelledException||be==null||be(!0),z(this,X,wn).call(this,qe,xe)));if(te.isPureXfa){if(this.xfaLayer)this.xfaLayer.div&&O.append(this.xfaLayer.div);else{const{annotationStorage:xe,linkService:U}=s(this,w).call(this);this.xfaLayer=new v.XfaLayerBuilder({pageDiv:O,pdfPage:te,annotationStorage:xe,linkService:U})}z(this,q,_n).call(this)}return O.setAttribute("data-loaded",!0),this.eventBus.dispatch("pagerender",{source:this,pageNumber:this.id}),Qe}setPageLabel(O){this.pageLabel=typeof O=="string"?O:null,this.pageLabel!==null?this.div.setAttribute("data-page-label",this.pageLabel):this.div.removeAttribute("data-page-label")}get thumbnailCanvas(){const{directDrawing:O,initialOptionalContent:$,regularAnnotations:de}=s(this,Z);return O&&$&&de?this.canvas:null}}S=new WeakMap,y=new WeakMap,w=new WeakMap,N=new WeakMap,D=new WeakMap,G=new WeakMap,le=new WeakMap,H=new WeakMap,Z=new WeakMap,re=new WeakMap,Q=new WeakSet,ni=function(){const{viewport:O}=this;if(this.pdfPage){if(s(this,D)===O.rotation)return;he(this,D,O.rotation)}(0,n.setLayerDimensions)(this.div,O,!0,!1)},ue=new WeakSet,mn=async function(){let O=null;try{await this.annotationLayer.render(this.viewport,"display")}catch($){console.error(`#renderAnnotationLayer: "${$}".`),O=$}finally{this.eventBus.dispatch("annotationlayerrendered",{source:this,pageNumber:this.id,error:O})}},Ce=new WeakSet,bn=async function(){let O=null;try{await this.annotationEditorLayer.render(this.viewport,"display")}catch($){console.error(`#renderAnnotationEditorLayer: "${$}".`),O=$}finally{this.eventBus.dispatch("annotationeditorlayerrendered",{source:this,pageNumber:this.id,error:O})}},q=new WeakSet,_n=async function(){let O=null;try{const $=await this.xfaLayer.render(this.viewport,"display");$!=null&&$.textDivs&&this._textHighlighter&&z(this,V,ir).call(this,$.textDivs)}catch($){console.error(`#renderXfaLayer: "${$}".`),O=$}finally{this.eventBus.dispatch("xfalayerrendered",{source:this,pageNumber:this.id,error:O})}},F=new WeakSet,vn=async function(){const{pdfPage:O,textLayer:$,viewport:de}=this;if(!$)return;let te=null;try{if(!$.renderingDone){const ve=O.streamTextContent({includeMarkedContent:!0,disableNormalization:!0});$.setTextContentSource(ve)}await $.render(de)}catch(ve){if(ve instanceof n.AbortException)return;console.error(`#renderTextLayer: "${ve}".`),te=ve}this.eventBus.dispatch("textlayerrendered",{source:this,pageNumber:this.id,numTextDivs:$.numTextDivs,error:te}),z(this,u,tr).call(this)},u=new WeakSet,tr=async function(){var de,te,ve;if(!this.textLayer)return;this.structTreeLayer||(this.structTreeLayer=new g.StructTreeLayerBuilder);const O=await(this.structTreeLayer.renderingDone?null:this.pdfPage.getStructTree()),$=(de=this.structTreeLayer)==null?void 0:de.render(O);$&&((te=this.canvas)==null||te.append($)),(ve=this.structTreeLayer)==null||ve.show()},V=new WeakSet,ir=async function(O){const $=await this.pdfPage.getTextContent(),de=[];for(const te of $.items)de.push(te.str);this._textHighlighter.setTextMapping(O,de),this._textHighlighter.enable()},X=new WeakSet,wn=async function(O,$=null){if(O===this.renderTask&&(this.renderTask=null),$ instanceof n.RenderingCancelledException){he(this,G,null);return}if(he(this,G,$),this.renderingState=c.RenderingStates.FINISHED,this._resetZoomLayer(!0),s(this,Z).regularAnnotations=!O.separateAnnots,this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!1,timestamp:performance.now(),error:s(this,G)}),$)throw $},_.PDFPageView=l},(L,_,m)=>{var A,E;Object.defineProperty(_,"__esModule",{value:!0}),_.AnnotationEditorLayerBuilder=void 0;var n=m(5),c=m(32);class C{constructor(g){j(this,A,null);j(this,E,void 0);this.pageDiv=g.pageDiv,this.pdfPage=g.pdfPage,this.accessibilityManager=g.accessibilityManager,this.l10n=g.l10n||c.NullL10n,this.annotationEditorLayer=null,this.div=null,this._cancelled=!1,he(this,E,g.uiManager),he(this,A,g.annotationLayer||null)}async render(g,b="display"){if(b!=="display"||this._cancelled)return;const P=g.clone({dontFlip:!0});if(this.div){this.annotationEditorLayer.update({viewport:P}),this.show();return}const R=this.div=document.createElement("div");R.className="annotationEditorLayer",R.tabIndex=0,R.hidden=!0,R.dir=s(this,E).direction,this.pageDiv.append(R),this.annotationEditorLayer=new n.AnnotationEditorLayer({uiManager:s(this,E),div:R,accessibilityManager:this.accessibilityManager,pageIndex:this.pdfPage.pageNumber-1,l10n:this.l10n,viewport:P,annotationLayer:s(this,A)});const v={viewport:P,div:R,annotations:null,intent:b};this.annotationEditorLayer.render(v),this.show()}cancel(){this._cancelled=!0,this.div&&(this.pageDiv=null,this.annotationEditorLayer.destroy(),this.div.remove())}hide(){this.div&&(this.div.hidden=!0)}show(){!this.div||this.annotationEditorLayer.isEmpty||(this.div.hidden=!1)}}A=new WeakMap,E=new WeakMap,_.AnnotationEditorLayerBuilder=C},(L,_,m)=>{var E,r,yn;Object.defineProperty(_,"__esModule",{value:!0}),_.AnnotationLayerBuilder=void 0;var n=m(5),c=m(32),C=m(4);class A{constructor({pageDiv:P,pdfPage:R,linkService:v,downloadManager:T,annotationStorage:o=null,imageResourcesPath:l="",renderForms:S=!0,l10n:y=c.NullL10n,enableScripting:w=!1,hasJSActionsPromise:N=null,fieldObjectsPromise:D=null,annotationCanvasMap:G=null,accessibilityManager:le=null}){j(this,r);j(this,E,null);this.pageDiv=P,this.pdfPage=R,this.linkService=v,this.downloadManager=T,this.imageResourcesPath=l,this.renderForms=S,this.l10n=y,this.annotationStorage=o,this.enableScripting=w,this._hasJSActionsPromise=N||Promise.resolve(!1),this._fieldObjectsPromise=D||Promise.resolve(null),this._annotationCanvasMap=G,this._accessibilityManager=le,this.annotationLayer=null,this.div=null,this._cancelled=!1,this._eventBus=v.eventBus}async render(P,R="display"){var S;if(this.div){if(this._cancelled||!this.annotationLayer)return;this.annotationLayer.update({viewport:P.clone({dontFlip:!0})});return}const[v,T,o]=await Promise.all([this.pdfPage.getAnnotations({intent:R}),this._hasJSActionsPromise,this._fieldObjectsPromise]);if(this._cancelled)return;const l=this.div=document.createElement("div");if(l.className="annotationLayer",this.pageDiv.append(l),v.length===0){this.hide();return}this.annotationLayer=new n.AnnotationLayer({div:l,accessibilityManager:this._accessibilityManager,annotationCanvasMap:this._annotationCanvasMap,l10n:this.l10n,page:this.pdfPage,viewport:P.clone({dontFlip:!0})}),await this.annotationLayer.render({annotations:v,imageResourcesPath:this.imageResourcesPath,renderForms:this.renderForms,linkService:this.linkService,downloadManager:this.downloadManager,annotationStorage:this.annotationStorage,enableScripting:this.enableScripting,hasJSActions:T,fieldObjects:o}),this.linkService.isInPresentationMode&&z(this,r,yn).call(this,C.PresentationModeState.FULLSCREEN),s(this,E)||(he(this,E,y=>{z(this,r,yn).call(this,y.state)}),(S=this._eventBus)==null||S._on("presentationmodechanged",s(this,E)))}cancel(){var P;this._cancelled=!0,s(this,E)&&((P=this._eventBus)==null||P._off("presentationmodechanged",s(this,E)),he(this,E,null))}hide(){this.div&&(this.div.hidden=!0)}}E=new WeakMap,r=new WeakSet,yn=function(P){if(!this.div)return;let R=!1;switch(P){case C.PresentationModeState.FULLSCREEN:R=!0;break;case C.PresentationModeState.NORMAL:break;default:return}for(const v of this.div.childNodes)v.hasAttribute("data-internal-link")||(v.inert=R)},_.AnnotationLayerBuilder=A},(L,_,m)=>{var E,r,Sn,b,En;Object.defineProperty(_,"__esModule",{value:!0}),_.StructTreeLayerBuilder=void 0;var n=m(4);const c={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},C=/^H(\d+)$/;class A{constructor(){j(this,r);j(this,b);j(this,E,void 0)}get renderingDone(){return s(this,E)!==void 0}render(v){if(s(this,E)!==void 0)return s(this,E);const T=z(this,b,En).call(this,v);return T==null||T.classList.add("structTree"),he(this,E,T)}hide(){s(this,E)&&!s(this,E).hidden&&(s(this,E).hidden=!0)}show(){var v;(v=s(this,E))!=null&&v.hidden&&(s(this,E).hidden=!1)}}E=new WeakMap,r=new WeakSet,Sn=function(v,T){const{alt:o,id:l,lang:S}=v;o!==void 0&&T.setAttribute("aria-label",(0,n.removeNullCharacters)(o)),l!==void 0&&T.setAttribute("aria-owns",l),S!==void 0&&T.setAttribute("lang",(0,n.removeNullCharacters)(S,!0))},b=new WeakSet,En=function(v){if(!v)return null;const T=document.createElement("span");if("role"in v){const{role:o}=v,l=o.match(C);l?(T.setAttribute("role","heading"),T.setAttribute("aria-level",l[1])):c[o]&&T.setAttribute("role",c[o])}if(z(this,r,Sn).call(this,v,T),v.children)if(v.children.length===1&&"id"in v.children[0])z(this,r,Sn).call(this,v.children[0],T);else for(const o of v.children)T.append(z(this,b,En).call(this,o));return T},_.StructTreeLayerBuilder=A},(L,_,m)=>{var C,A,E,r,g,si,P,An;Object.defineProperty(_,"__esModule",{value:!0}),_.TextAccessibilityManager=void 0;var n=m(4);const v=class v{constructor(){j(this,P);j(this,C,!1);j(this,A,null);j(this,E,new Map);j(this,r,new Map)}setTextMapping(o){he(this,A,o)}enable(){if(s(this,C))throw new Error("TextAccessibilityManager is already enabled.");if(!s(this,A))throw new Error("Text divs and strings have not been set.");if(he(this,C,!0),he(this,A,s(this,A).slice()),s(this,A).sort(z(v,g,si)),s(this,E).size>0){const o=s(this,A);for(const[l,S]of s(this,E)){if(!document.getElementById(l)){s(this,E).delete(l);continue}z(this,P,An).call(this,l,o[S])}}for(const[o,l]of s(this,r))this.addPointerInTextLayer(o,l);s(this,r).clear()}disable(){s(this,C)&&(s(this,r).clear(),he(this,A,null),he(this,C,!1))}removePointerInTextLayer(o){if(!s(this,C)){s(this,r).delete(o);return}const l=s(this,A);if(!l||l.length===0)return;const{id:S}=o,y=s(this,E).get(S);if(y===void 0)return;const w=l[y];s(this,E).delete(S);let N=w.getAttribute("aria-owns");N!=null&&N.includes(S)&&(N=N.split(" ").filter(D=>D!==S).join(" "),N?w.setAttribute("aria-owns",N):(w.removeAttribute("aria-owns"),w.setAttribute("role","presentation")))}addPointerInTextLayer(o,l){const{id:S}=o;if(!S)return null;if(!s(this,C))return s(this,r).set(o,l),null;l&&this.removePointerInTextLayer(o);const y=s(this,A);if(!y||y.length===0)return null;const w=(0,n.binarySearchFirstItem)(y,le=>{var H;return z(H=v,g,si).call(H,o,le)<0}),N=Math.max(0,w-1),D=y[N];z(this,P,An).call(this,S,D),s(this,E).set(S,N);const G=D.parentNode;return G!=null&&G.classList.contains("markedContent")?G.id:null}moveElementInDOM(o,l,S,y){const w=this.addPointerInTextLayer(S,y);if(!o.hasChildNodes())return o.append(l),w;const N=Array.from(o.childNodes).filter(le=>le!==l);if(N.length===0)return w;const D=S||l,G=(0,n.binarySearchFirstItem)(N,le=>{var H;return z(H=v,g,si).call(H,D,le)<0});return G===0?N[0].before(l):N[G-1].after(l),w}};C=new WeakMap,A=new WeakMap,E=new WeakMap,r=new WeakMap,g=new WeakSet,si=function(o,l){const S=o.getBoundingClientRect(),y=l.getBoundingClientRect();if(S.width===0&&S.height===0)return 1;if(y.width===0&&y.height===0)return-1;const w=S.y,N=S.y+S.height,D=S.y+S.height/2,G=y.y,le=y.y+y.height,H=y.y+y.height/2;if(D<=G&&H>=N)return-1;if(H<=w&&D>=le)return 1;const Z=S.x+S.width/2,re=y.x+y.width/2;return Z-re},P=new WeakSet,An=function(o,l){const S=l.getAttribute("aria-owns");S!=null&&S.includes(o)||l.setAttribute("aria-owns",S?`${S} ${o}`:o),l.removeAttribute("role")},j(v,g);let c=v;_.TextAccessibilityManager=c},(L,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.TextHighlighter=void 0;class m{constructor({findController:c,eventBus:C,pageIndex:A}){this.findController=c,this.matches=[],this.eventBus=C,this.pageIdx=A,this._onUpdateTextLayerMatches=null,this.textDivs=null,this.textContentItemsStr=null,this.enabled=!1}setTextMapping(c,C){this.textDivs=c,this.textContentItemsStr=C}enable(){if(!this.textDivs||!this.textContentItemsStr)throw new Error("Text divs and strings have not been set.");if(this.enabled)throw new Error("TextHighlighter is already enabled.");this.enabled=!0,this._onUpdateTextLayerMatches||(this._onUpdateTextLayerMatches=c=>{(c.pageIndex===this.pageIdx||c.pageIndex===-1)&&this._updateMatches()},this.eventBus._on("updatetextlayermatches",this._onUpdateTextLayerMatches)),this._updateMatches()}disable(){this.enabled&&(this.enabled=!1,this._onUpdateTextLayerMatches&&(this.eventBus._off("updatetextlayermatches",this._onUpdateTextLayerMatches),this._onUpdateTextLayerMatches=null),this._updateMatches(!0))}_convertMatches(c,C){if(!c)return[];const{textContentItemsStr:A}=this;let E=0,r=0;const g=A.length-1,b=[];for(let P=0,R=c.length;P<R;P++){let v=c[P];for(;E!==g&&v>=r+A[E].length;)r+=A[E].length,E++;E===A.length&&console.error("Could not find a matching mapping");const T={begin:{divIdx:E,offset:v-r}};for(v+=C[P];E!==g&&v>r+A[E].length;)r+=A[E].length,E++;T.end={divIdx:E,offset:v-r},b.push(T)}return b}_renderMatches(c){if(c.length===0)return;const{findController:C,pageIdx:A}=this,{textContentItemsStr:E,textDivs:r}=this,g=A===C.selected.pageIdx,b=C.selected.matchIdx,P=C.state.highlightAll;let R=null;const v={divIdx:-1,offset:void 0};function T(N,D){const G=N.divIdx;return r[G].textContent="",o(G,0,N.offset,D)}function o(N,D,G,le){let H=r[N];if(H.nodeType===Node.TEXT_NODE){const Q=document.createElement("span");H.before(Q),Q.append(H),r[N]=Q,H=Q}const Z=E[N].substring(D,G),re=document.createTextNode(Z);if(le){const Q=document.createElement("span");return Q.className=`${le} appended`,Q.append(re),H.append(Q),le.includes("selected")?Q.offsetLeft:0}return H.append(re),0}let l=b,S=l+1;if(P)l=0,S=c.length;else if(!g)return;let y=-1,w=-1;for(let N=l;N<S;N++){const D=c[N],G=D.begin;if(G.divIdx===y&&G.offset===w)continue;y=G.divIdx,w=G.offset;const le=D.end,H=g&&N===b,Z=H?" selected":"";let re=0;if(!R||G.divIdx!==R.divIdx?(R!==null&&o(R.divIdx,R.offset,v.offset),T(G)):o(R.divIdx,R.offset,G.offset),G.divIdx===le.divIdx)re=o(G.divIdx,G.offset,le.offset,"highlight"+Z);else{re=o(G.divIdx,G.offset,v.offset,"highlight begin"+Z);for(let Q=G.divIdx+1,K=le.divIdx;Q<K;Q++)r[Q].className="highlight middle"+Z;T(le,"highlight end"+Z)}R=le,H&&C.scrollMatchIntoView({element:r[G.divIdx],selectedLeft:re,pageIndex:A,matchIndex:b})}R&&o(R.divIdx,R.offset,v.offset)}_updateMatches(c=!1){if(!this.enabled&&!c)return;const{findController:C,matches:A,pageIdx:E}=this,{textContentItemsStr:r,textDivs:g}=this;let b=-1;for(const v of A){const T=Math.max(b,v.begin.divIdx);for(let o=T,l=v.end.divIdx;o<=l;o++){const S=g[o];S.textContent=r[o],S.className=""}b=v.end.divIdx+1}if(!(C!=null&&C.highlightMatches)||c)return;const P=C.pageMatches[E]||null,R=C.pageMatchesLength[E]||null;this.matches=this._convertMatches(P,R),this._renderMatches(this.matches)}}_.TextHighlighter=m},(L,_,m)=>{var A,E,r,g,b,nr,R,sr;Object.defineProperty(_,"__esModule",{value:!0}),_.TextLayerBuilder=void 0;var n=m(5),c=m(4);class C{constructor({highlighter:o=null,accessibilityManager:l=null,isOffscreenCanvasSupported:S=!0,enablePermissions:y=!1}){j(this,b);j(this,R);j(this,A,!1);j(this,E,0);j(this,r,0);j(this,g,null);this.textContentItemsStr=[],this.renderingDone=!1,this.textDivs=[],this.textDivProperties=new WeakMap,this.textLayerRenderTask=null,this.highlighter=o,this.accessibilityManager=l,this.isOffscreenCanvasSupported=S,he(this,A,y===!0),this.div=document.createElement("div"),this.div.className="textLayer",this.hide()}get numTextDivs(){return this.textDivs.length}async render(o){var y,w,N;if(!s(this,g))throw new Error('No "textContentSource" parameter specified.');const l=o.scale*(globalThis.devicePixelRatio||1),{rotation:S}=o;if(this.renderingDone){const D=S!==s(this,E),G=l!==s(this,r);(D||G)&&(this.hide(),(0,n.updateTextLayer)({container:this.div,viewport:o,textDivs:this.textDivs,textDivProperties:this.textDivProperties,isOffscreenCanvasSupported:this.isOffscreenCanvasSupported,mustRescale:G,mustRotate:D}),he(this,r,l),he(this,E,S)),this.show();return}this.cancel(),(y=this.highlighter)==null||y.setTextMapping(this.textDivs,this.textContentItemsStr),(w=this.accessibilityManager)==null||w.setTextMapping(this.textDivs),this.textLayerRenderTask=(0,n.renderTextLayer)({textContentSource:s(this,g),container:this.div,viewport:o,textDivs:this.textDivs,textDivProperties:this.textDivProperties,textContentItemsStr:this.textContentItemsStr,isOffscreenCanvasSupported:this.isOffscreenCanvasSupported}),await this.textLayerRenderTask.promise,z(this,b,nr).call(this),he(this,r,l),he(this,E,S),this.show(),(N=this.accessibilityManager)==null||N.enable()}hide(){var o;this.div.hidden||((o=this.highlighter)==null||o.disable(),this.div.hidden=!0)}show(){var o;this.div.hidden&&this.renderingDone&&(this.div.hidden=!1,(o=this.highlighter)==null||o.enable())}cancel(){var o,l;this.textLayerRenderTask&&(this.textLayerRenderTask.cancel(),this.textLayerRenderTask=null),(o=this.highlighter)==null||o.disable(),(l=this.accessibilityManager)==null||l.disable(),this.textContentItemsStr.length=0,this.textDivs.length=0,this.textDivProperties=new WeakMap}setTextContentSource(o){this.cancel(),he(this,g,o)}}A=new WeakMap,E=new WeakMap,r=new WeakMap,g=new WeakMap,b=new WeakSet,nr=function(){this.renderingDone=!0;const o=document.createElement("div");o.className="endOfContent",this.div.append(o),z(this,R,sr).call(this)},R=new WeakSet,sr=function(){const{div:o}=this;o.addEventListener("mousedown",l=>{const S=o.querySelector(".endOfContent");if(!S)return;let y=l.target!==o;if(y&&(y=getComputedStyle(S).getPropertyValue("-moz-user-select")!=="none"),y){const w=o.getBoundingClientRect(),N=Math.max(0,(l.pageY-w.top)/w.height);S.style.top=(N*100).toFixed(2)+"%"}S.classList.add("active")}),o.addEventListener("mouseup",()=>{const l=o.querySelector(".endOfContent");l&&(l.style.top="",l.classList.remove("active"))}),o.addEventListener("copy",l=>{if(!s(this,A)){const S=document.getSelection();l.clipboardData.setData("text/plain",(0,c.removeNullCharacters)((0,n.normalizeUnicode)(S.toString())))}l.preventDefault(),l.stopPropagation()})},_.TextLayerBuilder=C},(L,_,m)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.XfaLayerBuilder=void 0;var n=m(5);class c{constructor({pageDiv:A,pdfPage:E,annotationStorage:r=null,linkService:g,xfaHtml:b=null}){this.pageDiv=A,this.pdfPage=E,this.annotationStorage=r,this.linkService=g,this.xfaHtml=b,this.div=null,this._cancelled=!1}async render(A,E="display"){if(E==="print"){const b={viewport:A.clone({dontFlip:!0}),div:this.div,xfaHtml:this.xfaHtml,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:E},P=document.createElement("div");return this.pageDiv.append(P),b.div=P,n.XfaLayer.render(b)}const r=await this.pdfPage.getXfa();if(this._cancelled||!r)return{textDivs:[]};const g={viewport:A.clone({dontFlip:!0}),div:this.div,xfaHtml:r,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:E};return this.div?n.XfaLayer.update(g):(this.div=document.createElement("div"),this.pageDiv.append(this.div),g.div=this.div,n.XfaLayer.render(g))}cancel(){this._cancelled=!0}hide(){this.div&&(this.div.hidden=!0)}}_.XfaLayerBuilder=c},(L,_,m)=>{var A,ri,r,rr,b,ar,R,or,T,lr;Object.defineProperty(_,"__esModule",{value:!0}),_.SecondaryToolbar=void 0;var n=m(4),c=m(31);class C{constructor(S,y){j(this,A);j(this,r);j(this,b);j(this,R);j(this,T);this.toolbar=S.toolbar,this.toggleButton=S.toggleButton,this.buttons=[{element:S.presentationModeButton,eventName:"presentationmode",close:!0},{element:S.printButton,eventName:"print",close:!0},{element:S.downloadButton,eventName:"download",close:!0},{element:S.viewBookmarkButton,eventName:null,close:!0},{element:S.firstPageButton,eventName:"firstpage",close:!0},{element:S.lastPageButton,eventName:"lastpage",close:!0},{element:S.pageRotateCwButton,eventName:"rotatecw",close:!1},{element:S.pageRotateCcwButton,eventName:"rotateccw",close:!1},{element:S.cursorSelectToolButton,eventName:"switchcursortool",eventDetails:{tool:n.CursorTool.SELECT},close:!0},{element:S.cursorHandToolButton,eventName:"switchcursortool",eventDetails:{tool:n.CursorTool.HAND},close:!0},{element:S.scrollPageButton,eventName:"switchscrollmode",eventDetails:{mode:n.ScrollMode.PAGE},close:!0},{element:S.scrollVerticalButton,eventName:"switchscrollmode",eventDetails:{mode:n.ScrollMode.VERTICAL},close:!0},{element:S.scrollHorizontalButton,eventName:"switchscrollmode",eventDetails:{mode:n.ScrollMode.HORIZONTAL},close:!0},{element:S.scrollWrappedButton,eventName:"switchscrollmode",eventDetails:{mode:n.ScrollMode.WRAPPED},close:!0},{element:S.spreadNoneButton,eventName:"switchspreadmode",eventDetails:{mode:n.SpreadMode.NONE},close:!0},{element:S.spreadOddButton,eventName:"switchspreadmode",eventDetails:{mode:n.SpreadMode.ODD},close:!0},{element:S.spreadEvenButton,eventName:"switchspreadmode",eventDetails:{mode:n.SpreadMode.EVEN},close:!0},{element:S.documentPropertiesButton,eventName:"documentproperties",close:!0}],this.buttons.push({element:S.openFileButton,eventName:"openfile",close:!0}),this.items={firstPage:S.firstPageButton,lastPage:S.lastPageButton,pageRotateCw:S.pageRotateCwButton,pageRotateCcw:S.pageRotateCcwButton},this.eventBus=y,this.opened=!1,z(this,r,rr).call(this),z(this,b,ar).call(this,S),z(this,R,or).call(this,S),z(this,T,lr).call(this,S),this.reset()}get isOpen(){return this.opened}setPageNumber(S){this.pageNumber=S,z(this,A,ri).call(this)}setPagesCount(S){this.pagesCount=S,z(this,A,ri).call(this)}reset(){this.pageNumber=0,this.pagesCount=0,z(this,A,ri).call(this),this.eventBus.dispatch("secondarytoolbarreset",{source:this})}open(){this.opened||(this.opened=!0,(0,n.toggleExpandedBtn)(this.toggleButton,!0,this.toolbar))}close(){this.opened&&(this.opened=!1,(0,n.toggleExpandedBtn)(this.toggleButton,!1,this.toolbar))}toggle(){this.opened?this.close():this.open()}}A=new WeakSet,ri=function(){this.items.firstPage.disabled=this.pageNumber<=1,this.items.lastPage.disabled=this.pageNumber>=this.pagesCount,this.items.pageRotateCw.disabled=this.pagesCount===0,this.items.pageRotateCcw.disabled=this.pagesCount===0},r=new WeakSet,rr=function(){this.toggleButton.addEventListener("click",this.toggle.bind(this));for(const{element:S,eventName:y,close:w,eventDetails:N}of this.buttons)S.addEventListener("click",D=>{y!==null&&this.eventBus.dispatch(y,{source:this,...N}),w&&this.close(),this.eventBus.dispatch("reporttelemetry",{source:this,details:{type:"buttons",data:{id:S.id}}})})},b=new WeakSet,ar=function({cursorSelectToolButton:S,cursorHandToolButton:y}){this.eventBus._on("cursortoolchanged",({tool:w})=>{(0,n.toggleCheckedBtn)(S,w===n.CursorTool.SELECT),(0,n.toggleCheckedBtn)(y,w===n.CursorTool.HAND)})},R=new WeakSet,or=function({scrollPageButton:S,scrollVerticalButton:y,scrollHorizontalButton:w,scrollWrappedButton:N,spreadNoneButton:D,spreadOddButton:G,spreadEvenButton:le}){const H=({mode:Z})=>{(0,n.toggleCheckedBtn)(S,Z===n.ScrollMode.PAGE),(0,n.toggleCheckedBtn)(y,Z===n.ScrollMode.VERTICAL),(0,n.toggleCheckedBtn)(w,Z===n.ScrollMode.HORIZONTAL),(0,n.toggleCheckedBtn)(N,Z===n.ScrollMode.WRAPPED);const re=this.pagesCount>c.PagesCountLimit.FORCE_SCROLL_MODE_PAGE;S.disabled=re,y.disabled=re,w.disabled=re,N.disabled=re;const Q=Z===n.ScrollMode.HORIZONTAL;D.disabled=Q,G.disabled=Q,le.disabled=Q};this.eventBus._on("scrollmodechanged",H),this.eventBus._on("secondarytoolbarreset",Z=>{Z.source===this&&H({mode:n.ScrollMode.VERTICAL})})},T=new WeakSet,lr=function({spreadNoneButton:S,spreadOddButton:y,spreadEvenButton:w}){const N=({mode:D})=>{(0,n.toggleCheckedBtn)(S,D===n.SpreadMode.NONE),(0,n.toggleCheckedBtn)(y,D===n.SpreadMode.ODD),(0,n.toggleCheckedBtn)(w,D===n.SpreadMode.EVEN)};this.eventBus._on("spreadmodechanged",N),this.eventBus._on("secondarytoolbarreset",D=>{D.source===this&&N({mode:n.SpreadMode.NONE})})},_.SecondaryToolbar=C},(L,_,m)=>{var E,r,cr,b,dr,R,yt,T,hr;Object.defineProperty(_,"__esModule",{value:!0}),_.Toolbar=void 0;var n=m(4),c=m(5);const C="visiblePageIsLoading";class A{constructor(S,y,w){j(this,r);j(this,b);j(this,R);j(this,T);j(this,E,!1);this.toolbar=S.container,this.eventBus=y,this.l10n=w,this.buttons=[{element:S.previous,eventName:"previouspage"},{element:S.next,eventName:"nextpage"},{element:S.zoomIn,eventName:"zoomin"},{element:S.zoomOut,eventName:"zoomout"},{element:S.print,eventName:"print"},{element:S.download,eventName:"download"},{element:S.editorFreeTextButton,eventName:"switchannotationeditormode",eventDetails:{get mode(){const{classList:N}=S.editorFreeTextButton;return N.contains("toggled")?c.AnnotationEditorType.NONE:c.AnnotationEditorType.FREETEXT}}},{element:S.editorInkButton,eventName:"switchannotationeditormode",eventDetails:{get mode(){const{classList:N}=S.editorInkButton;return N.contains("toggled")?c.AnnotationEditorType.NONE:c.AnnotationEditorType.INK}}},{element:S.editorStampButton,eventName:"switchannotationeditormode",eventDetails:{get mode(){const{classList:N}=S.editorStampButton;return N.contains("toggled")?c.AnnotationEditorType.NONE:c.AnnotationEditorType.STAMP}}}],this.buttons.push({element:S.openFile,eventName:"openfile"}),this.items={numPages:S.numPages,pageNumber:S.pageNumber,scaleSelect:S.scaleSelect,customScaleOption:S.customScaleOption,previous:S.previous,next:S.next,zoomIn:S.zoomIn,zoomOut:S.zoomOut},z(this,r,cr).call(this,S),this.reset()}setPageNumber(S,y){this.pageNumber=S,this.pageLabel=y,z(this,R,yt).call(this,!1)}setPagesCount(S,y){this.pagesCount=S,this.hasPageLabels=y,z(this,R,yt).call(this,!0)}setPageScale(S,y){this.pageScaleValue=(S||y).toString(),this.pageScale=y,z(this,R,yt).call(this,!1)}reset(){this.pageNumber=0,this.pageLabel=null,this.hasPageLabels=!1,this.pagesCount=0,this.pageScaleValue=n.DEFAULT_SCALE_VALUE,this.pageScale=n.DEFAULT_SCALE,z(this,R,yt).call(this,!0),this.updateLoadingIndicatorState(),this.eventBus.dispatch("toolbarreset",{source:this})}updateLoadingIndicatorState(S=!1){const{pageNumber:y}=this.items;y.classList.toggle(C,S)}}E=new WeakMap,r=new WeakSet,cr=function(S){const{pageNumber:y,scaleSelect:w}=this.items,N=this;for(const{element:D,eventName:G,eventDetails:le}of this.buttons)D.addEventListener("click",H=>{G!==null&&this.eventBus.dispatch(G,{source:this,...le})});y.addEventListener("click",function(){this.select()}),y.addEventListener("change",function(){N.eventBus.dispatch("pagenumberchanged",{source:N,value:this.value})}),w.addEventListener("change",function(){this.value!=="custom"&&N.eventBus.dispatch("scalechanged",{source:N,value:this.value})}),w.addEventListener("click",function(D){const G=D.target;this.value===N.pageScaleValue&&G.tagName.toUpperCase()==="OPTION"&&this.blur()}),w.oncontextmenu=c.noContextMenu,this.eventBus._on("localized",()=>{he(this,E,!0),z(this,T,hr).call(this),z(this,R,yt).call(this,!0)}),z(this,b,dr).call(this,S)},b=new WeakSet,dr=function({editorFreeTextButton:S,editorFreeTextParamsToolbar:y,editorInkButton:w,editorInkParamsToolbar:N,editorStampButton:D,editorStampParamsToolbar:G}){const le=({mode:H})=>{(0,n.toggleCheckedBtn)(S,H===c.AnnotationEditorType.FREETEXT,y),(0,n.toggleCheckedBtn)(w,H===c.AnnotationEditorType.INK,N),(0,n.toggleCheckedBtn)(D,H===c.AnnotationEditorType.STAMP,G);const Z=H===c.AnnotationEditorType.DISABLE;S.disabled=Z,w.disabled=Z,D.disabled=Z};this.eventBus._on("annotationeditormodechanged",le),this.eventBus._on("toolbarreset",H=>{H.source===this&&le({mode:c.AnnotationEditorType.DISABLE})})},R=new WeakSet,yt=function(S=!1){if(!s(this,E))return;const{pageNumber:y,pagesCount:w,pageScaleValue:N,pageScale:D,items:G}=this;S&&(this.hasPageLabels?G.pageNumber.type="text":(G.pageNumber.type="number",this.l10n.get("of_pages",{pagesCount:w}).then(le=>{G.numPages.textContent=le})),G.pageNumber.max=w),this.hasPageLabels?(G.pageNumber.value=this.pageLabel,this.l10n.get("page_of_pages",{pageNumber:y,pagesCount:w}).then(le=>{G.numPages.textContent=le})):G.pageNumber.value=y,G.previous.disabled=y<=1,G.next.disabled=y>=w,G.zoomOut.disabled=D<=n.MIN_SCALE,G.zoomIn.disabled=D>=n.MAX_SCALE,this.l10n.get("page_scale_percent",{scale:Math.round(D*1e4)/100}).then(le=>{let H=!1;for(const Z of G.scaleSelect.options){if(Z.value!==N){Z.selected=!1;continue}Z.selected=!0,H=!0}H||(G.customScaleOption.textContent=le,G.customScaleOption.selected=!0)})},T=new WeakSet,hr=async function(){const{items:S,l10n:y}=this,w=Promise.all([y.get("page_scale_auto"),y.get("page_scale_actual"),y.get("page_scale_fit"),y.get("page_scale_width")]);await n.animationStarted;const N=getComputedStyle(S.scaleSelect),D=parseFloat(N.getPropertyValue("--scale-select-width")),G=document.createElement("canvas"),le=G.getContext("2d",{alpha:!1});le.font=`${N.fontSize} ${N.fontFamily}`;let H=0;for(const Z of await w){const{width:re}=le.measureText(Z);re>H&&(H=re)}H+=.3*D,H>D&&S.scaleSelect.parentNode.style.setProperty("--scale-select-width",`${H}px`),G.width=0,G.height=0},_.Toolbar=A},(L,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.ViewHistory=void 0;const m=20;class n{constructor(C,A=m){this.fingerprint=C,this.cacheSize=A,this._initializedPromise=this._readFromStorage().then(E=>{const r=JSON.parse(E||"{}");let g=-1;if(!Array.isArray(r.files))r.files=[];else{for(;r.files.length>=this.cacheSize;)r.files.shift();for(let b=0,P=r.files.length;b<P;b++)if(r.files[b].fingerprint===this.fingerprint){g=b;break}}g===-1&&(g=r.files.push({fingerprint:this.fingerprint})-1),this.file=r.files[g],this.database=r})}async _writeToStorage(){const C=JSON.stringify(this.database);localStorage.setItem("pdfjs.history",C)}async _readFromStorage(){return localStorage.getItem("pdfjs.history")}async set(C,A){return await this._initializedPromise,this.file[C]=A,this._writeToStorage()}async setMultiple(C){await this._initializedPromise;for(const A in C)this.file[A]=C[A];return this._writeToStorage()}async get(C,A){await this._initializedPromise;const E=this.file[C];return E!==void 0?E:A}async getMultiple(C){await this._initializedPromise;const A=Object.create(null);for(const E in C){const r=this.file[E];A[E]=r!==void 0?r:C[E]}return A}}_.ViewHistory=n},(L,_,m)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.DefaultExternalServices=void 0;var n=m(5);class c{constructor(){throw new Error("Cannot initialize DefaultExternalServices.")}static updateFindControlState(A){}static updateFindMatchesCount(A){}static initPassiveLoading(A){}static reportTelemetry(A){}static createDownloadManager(){throw new Error("Not implemented: createDownloadManager")}static createPreferences(){throw new Error("Not implemented: createPreferences")}static createL10n(A){throw new Error("Not implemented: createL10n")}static createScripting(A){throw new Error("Not implemented: createScripting")}static get supportsPinchToZoom(){return(0,n.shadow)(this,"supportsPinchToZoom",!0)}static get supportsIntegratedFind(){return(0,n.shadow)(this,"supportsIntegratedFind",!1)}static get supportsDocumentFonts(){return(0,n.shadow)(this,"supportsDocumentFonts",!0)}static get supportedMouseWheelZoomModifierKeys(){return(0,n.shadow)(this,"supportedMouseWheelZoomModifierKeys",{ctrlKey:!0,metaKey:!0})}static get isInAutomation(){return(0,n.shadow)(this,"isInAutomation",!1)}static updateEditorStates(A){throw new Error("Not implemented: updateEditorStates")}static get canvasMaxAreaInBytes(){return(0,n.shadow)(this,"canvasMaxAreaInBytes",-1)}static getNimbusExperimentData(){return(0,n.shadow)(this,"getNimbusExperimentData",Promise.resolve(null))}}_.DefaultExternalServices=c},(L,_,m)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.bindPrintServiceFactory=_.bindExternalService=void 0;let n;_.bindPrintServiceFactory=n;let c;_.bindExternalService=c,_.bindExternalService=c=m(46).bindExternalService,_.bindPrintServiceFactory=n=m(52).bindPrintServiceFactory,document.blockUnblockOnload&&document.blockUnblockOnload(!0)},(L,_,m)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.bindExternalService=b;var n=m(44),c=m(47),C=m(48),A=m(49),E=m(51);class r extends c.BasePreferences{async _writeToStorage(R){localStorage.setItem("pdfjs.preferences",JSON.stringify(R))}async _readFromStorage(R){return JSON.parse(localStorage.getItem("pdfjs.preferences"))}}class g extends n.DefaultExternalServices{static createDownloadManager(){return new C.DownloadManager}static createPreferences(){return new r}static createL10n({locale:R="en-US"}){return new A.GenericL10n(R)}static createScripting({sandboxBundleSrc:R}){return new E.GenericScripting(R)}}function b(P){P.externalServices=g}},(L,_,m)=>{var c,C,A;Object.defineProperty(_,"__esModule",{value:!0}),_.BasePreferences=void 0,m(9);const E=class E{constructor(){j(this,c,Object.freeze({annotationEditorMode:0,annotationMode:2,cursorToolOnLoad:0,defaultZoomDelay:400,defaultZoomValue:"",disablePageLabels:!1,enablePermissions:!1,enablePrintAutoRotate:!0,enableScripting:!0,enableStampEditor:!0,externalLinkTarget:0,historyUpdateUrl:!1,ignoreDestinationZoom:!1,forcePageColors:!1,pageColorsBackground:"Canvas",pageColorsForeground:"CanvasText",pdfBugEnabled:!1,sidebarViewOnLoad:-1,scrollModeOnLoad:-1,spreadModeOnLoad:-1,textLayerMode:1,viewerCssTheme:0,viewOnLoad:0,disableAutoFetch:!1,disableFontFace:!1,disableRange:!1,disableStream:!1,enableXfa:!0}));j(this,C,Object.create(null));j(this,A,null);if(this.constructor===E)throw new Error("Cannot initialize BasePreferences.");he(this,A,this._readFromStorage(s(this,c)).then(g=>{for(const b in s(this,c)){const P=g==null?void 0:g[b];typeof P==typeof s(this,c)[b]&&(s(this,C)[b]=P)}}))}async _writeToStorage(g){throw new Error("Not implemented: _writeToStorage")}async _readFromStorage(g){throw new Error("Not implemented: _readFromStorage")}async reset(){await s(this,A);const g=s(this,C);return he(this,C,Object.create(null)),this._writeToStorage(s(this,c)).catch(b=>{throw he(this,C,g),b})}async set(g,b){await s(this,A);const P=s(this,c)[g],R=s(this,C);if(P===void 0)throw new Error(`Set preference: "${g}" is undefined.`);if(b===void 0)throw new Error("Set preference: no value is specified.");const v=typeof b,T=typeof P;if(v!==T)if(v==="number"&&T==="string")b=b.toString();else throw new Error(`Set preference: "${b}" is a ${v}, expected a ${T}.`);else if(v==="number"&&!Number.isInteger(b))throw new Error(`Set preference: "${b}" must be an integer.`);return s(this,C)[g]=b,this._writeToStorage(s(this,C)).catch(o=>{throw he(this,C,R),o})}async get(g){await s(this,A);const b=s(this,c)[g];if(b===void 0)throw new Error(`Get preference: "${g}" is undefined.`);return s(this,C)[g]??b}async getAll(){await s(this,A);const g=Object.create(null);for(const b in s(this,c))g[b]=s(this,C)[b]??s(this,c)[b];return g}};c=new WeakMap,C=new WeakMap,A=new WeakMap;let n=E;_.BasePreferences=n},(L,_,m)=>{var A;Object.defineProperty(_,"__esModule",{value:!0}),_.DownloadManager=void 0;var n=m(5);function c(E,r){const g=document.createElement("a");if(!g.click)throw new Error('DownloadManager: "a.click()" is not supported.');g.href=E,g.target="_parent","download"in g&&(g.download=r),(document.body||document.documentElement).append(g),g.click(),g.remove()}class C{constructor(){j(this,A,new WeakMap)}downloadUrl(r,g,b){if(!(0,n.createValidAbsoluteUrl)(r,"http://example.com")){console.error(`downloadUrl - not a valid URL: ${r}`);return}c(r+"#pdfjs.action=download",g)}downloadData(r,g,b){const P=URL.createObjectURL(new Blob([r],{type:b}));c(P,g)}openOrDownloadData(r,g,b){const P=(0,n.isPdfFile)(b),R=P?"application/pdf":"";if(P){let v=s(this,A).get(r);v||(v=URL.createObjectURL(new Blob([g],{type:R})),s(this,A).set(r,v));let T;T="?file="+encodeURIComponent(v+"#"+b);try{return window.open(T),!0}catch(o){console.error(`openOrDownloadData: ${o}`),URL.revokeObjectURL(v),s(this,A).delete(r)}}return this.downloadData(g,b,R),!1}download(r,g,b,P){const R=URL.createObjectURL(r);c(R,b)}}A=new WeakMap,_.DownloadManager=C},(L,_,m)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.GenericL10n=void 0,m(50);var n=m(32);const c={en:"en-US",es:"es-ES",fy:"fy-NL",ga:"ga-IE",gu:"gu-IN",hi:"hi-IN",hy:"hy-AM",nb:"nb-NO",ne:"ne-NP",nn:"nn-NO",pa:"pa-IN",pt:"pt-PT",sv:"sv-SE",zh:"zh-CN"};function C(E){return c[E==null?void 0:E.toLowerCase()]||E}class A{constructor(r){const{webL10n:g}=document;this._lang=r,this._ready=new Promise((b,P)=>{g.setLanguage(C(r),()=>{b(g)})})}async getLanguage(){return(await this._ready).getLanguage()}async getDirection(){return(await this._ready).getDirection()}async get(r,g=null,b=(0,n.getL10nFallback)(r,g)){return(await this._ready).get(r,g,b)}async translate(r){return(await this._ready).translate(r)}}_.GenericL10n=A},()=>{document.webL10n=function(L,_){var m={},n="",c="textContent",C="",A={},E="loading",r=!0;function g(){return _.querySelectorAll('link[type="application/l10n"]')}function b(){var H=_.querySelector('script[type="application/l10n"]');return H?JSON.parse(H.innerHTML):null}function P(H){return H?H.querySelectorAll("*[data-l10n-id]"):[]}function R(H){if(!H)return{};var Z=H.getAttribute("data-l10n-id"),re=H.getAttribute("data-l10n-args"),Q={};if(re)try{Q=JSON.parse(re)}catch{console.warn("could not parse arguments for #"+Z)}return{id:Z,args:Q}}function v(H,Z,re){Z=Z||function(ue){},re=re||function(){};var Q=new XMLHttpRequest;Q.open("GET",H,r),Q.overrideMimeType&&Q.overrideMimeType("text/plain; charset=utf-8"),Q.onreadystatechange=function(){Q.readyState==4&&(Q.status==200||Q.status===0?Z(Q.responseText):re())},Q.onerror=re,Q.ontimeout=re;try{Q.send(null)}catch{re()}}function T(H,Z,re,Q){var K=H.replace(/[^\/]*$/,"")||"./";function ue(Ce){return Ce.lastIndexOf("\\")<0?Ce:Ce.replace(/\\\\/g,"\\").replace(/\\n/g,`
`).replace(/\\r/g,"\r").replace(/\\t/g,"	").replace(/\\b/g,"\b").replace(/\\f/g,"\f").replace(/\\{/g,"{").replace(/\\}/g,"}").replace(/\\"/g,'"').replace(/\\'/g,"'")}function se(Ce,Me){var q={},M=/^\s*|\s*$/,F=/^\s*#|^\s*$/,d=/^\s*\[(.*)\]\s*$/,u=/^\s*@import\s+url\((.*)\)\s*$/i,x=/^([^=\s]*)\s*=\s*(.+)$/;function V(X,me,B){var O=X.replace(M,"").split(/[\r\n]+/),$="*",de=Z.split("-",1)[0],te=!1,ve="";function Pe(){for(;;){if(!O.length){B();return}var Se=O.shift();if(!F.test(Se)){if(me){if(ve=d.exec(Se),ve){$=ve[1].toLowerCase(),te=$!=="*"&&$!==Z&&$!==de;continue}else if(te)continue;if(ve=u.exec(Se),ve){W(K+ve[1],Pe);return}}var oe=Se.match(x);oe&&oe.length==3&&(q[oe[1]]=ue(oe[2]))}}}Pe()}function W(X,me){v(X,function(B){V(B,!1,me)},function(){console.warn(X+" not found."),me()})}V(Ce,!0,function(){Me(q)})}v(H,function(Ce){n+=Ce,se(Ce,function(Me){for(var q in Me){var M,F,d=q.lastIndexOf(".");d>0?(M=q.substring(0,d),F=q.substring(d+1)):(M=q,F=c),m[M]||(m[M]={}),m[M][F]=Me[q]}re&&re()})},Q)}function o(H,Z){H&&(H=H.toLowerCase()),Z=Z||function(){},l(),C=H;var re=g(),Q=re.length;if(Q===0){var K=b();if(K&&K.locales&&K.default_locale){if(console.log("using the embedded JSON directory, early way out"),m=K.locales[H],!m){var ue=K.default_locale.toLowerCase();for(var se in K.locales)if(se=se.toLowerCase(),se===H){m=K.locales[H];break}else se===ue&&(m=K.locales[ue])}Z()}else console.log("no resource to load, early way out");E="complete";return}var Ce=null,Me=0;Ce=function(){Me++,Me>=Q&&(Z(),E="complete")};function q(d){var u=d.href;this.load=function(x,V){T(u,x,V,function(){console.warn(u+" not found."),console.warn('"'+x+'" resource not found'),C="",V()})}}for(var M=0;M<Q;M++){var F=new q(re[M]);F.load(H,Ce)}}function l(){m={},n="",C=""}function S(H){var Z={af:3,ak:4,am:4,ar:1,asa:3,az:0,be:11,bem:3,bez:3,bg:3,bh:4,bm:0,bn:3,bo:0,br:20,brx:3,bs:11,ca:3,cgg:3,chr:3,cs:12,cy:17,da:3,de:3,dv:3,dz:0,ee:3,el:3,en:3,eo:3,es:3,et:3,eu:3,fa:0,ff:5,fi:3,fil:4,fo:3,fr:5,fur:3,fy:3,ga:8,gd:24,gl:3,gsw:3,gu:3,guw:4,gv:23,ha:3,haw:3,he:2,hi:4,hr:11,hu:0,id:0,ig:0,ii:0,is:3,it:3,iu:7,ja:0,jmc:3,jv:0,ka:0,kab:5,kaj:3,kcg:3,kde:0,kea:0,kk:3,kl:3,km:0,kn:0,ko:0,ksb:3,ksh:21,ku:3,kw:7,lag:18,lb:3,lg:3,ln:4,lo:0,lt:10,lv:6,mas:3,mg:4,mk:16,ml:3,mn:3,mo:9,mr:3,ms:0,mt:15,my:0,nah:3,naq:7,nb:3,nd:3,ne:3,nl:3,nn:3,no:3,nr:3,nso:4,ny:3,nyn:3,om:3,or:3,pa:3,pap:3,pl:13,ps:3,pt:3,rm:3,ro:9,rof:3,ru:11,rwk:3,sah:0,saq:3,se:7,seh:3,ses:0,sg:0,sh:11,shi:19,sk:12,sl:14,sma:7,smi:7,smj:7,smn:7,sms:7,sn:3,so:3,sq:3,sr:11,ss:3,ssy:3,st:3,sv:3,sw:3,syr:3,ta:3,te:3,teo:3,th:0,ti:4,tig:3,tk:3,tl:4,tn:3,to:0,tr:0,ts:3,tzm:22,uk:11,ur:3,ve:3,vi:0,vun:3,wa:4,wae:3,wo:0,xh:3,xog:3,yo:0,zh:0,zu:3};function re(se,Ce){return Ce.indexOf(se)!==-1}function Q(se,Ce,Me){return Ce<=se&&se<=Me}var K={0:function(se){return"other"},1:function(se){return Q(se%100,3,10)?"few":se===0?"zero":Q(se%100,11,99)?"many":se==2?"two":se==1?"one":"other"},2:function(se){return se!==0&&se%10===0?"many":se==2?"two":se==1?"one":"other"},3:function(se){return se==1?"one":"other"},4:function(se){return Q(se,0,1)?"one":"other"},5:function(se){return Q(se,0,2)&&se!=2?"one":"other"},6:function(se){return se===0?"zero":se%10==1&&se%100!=11?"one":"other"},7:function(se){return se==2?"two":se==1?"one":"other"},8:function(se){return Q(se,3,6)?"few":Q(se,7,10)?"many":se==2?"two":se==1?"one":"other"},9:function(se){return se===0||se!=1&&Q(se%100,1,19)?"few":se==1?"one":"other"},10:function(se){return Q(se%10,2,9)&&!Q(se%100,11,19)?"few":se%10==1&&!Q(se%100,11,19)?"one":"other"},11:function(se){return Q(se%10,2,4)&&!Q(se%100,12,14)?"few":se%10===0||Q(se%10,5,9)||Q(se%100,11,14)?"many":se%10==1&&se%100!=11?"one":"other"},12:function(se){return Q(se,2,4)?"few":se==1?"one":"other"},13:function(se){return Q(se%10,2,4)&&!Q(se%100,12,14)?"few":se!=1&&Q(se%10,0,1)||Q(se%10,5,9)||Q(se%100,12,14)?"many":se==1?"one":"other"},14:function(se){return Q(se%100,3,4)?"few":se%100==2?"two":se%100==1?"one":"other"},15:function(se){return se===0||Q(se%100,2,10)?"few":Q(se%100,11,19)?"many":se==1?"one":"other"},16:function(se){return se%10==1&&se!=11?"one":"other"},17:function(se){return se==3?"few":se===0?"zero":se==6?"many":se==2?"two":se==1?"one":"other"},18:function(se){return se===0?"zero":Q(se,0,2)&&se!==0&&se!=2?"one":"other"},19:function(se){return Q(se,2,10)?"few":Q(se,0,1)?"one":"other"},20:function(se){return(Q(se%10,3,4)||se%10==9)&&!(Q(se%100,10,19)||Q(se%100,70,79)||Q(se%100,90,99))?"few":se%1e6===0&&se!==0?"many":se%10==2&&!re(se%100,[12,72,92])?"two":se%10==1&&!re(se%100,[11,71,91])?"one":"other"},21:function(se){return se===0?"zero":se==1?"one":"other"},22:function(se){return Q(se,0,1)||Q(se,11,99)?"one":"other"},23:function(se){return Q(se%10,1,2)||se%20===0?"one":"other"},24:function(se){return Q(se,3,10)||Q(se,13,19)?"few":re(se,[2,12])?"two":re(se,[1,11])?"one":"other"}},ue=Z[H.replace(/-.*$/,"")];return ue in K?K[ue]:(console.warn("plural form unknown for ["+H+"]"),function(){return"other"})}A.plural=function(H,Z,re,Q){var K=parseFloat(Z);if(isNaN(K)||Q!=c)return H;A._pluralRules||(A._pluralRules=S(C));var ue="["+A._pluralRules(K)+"]";return K===0&&re+"[zero]"in m?H=m[re+"[zero]"][Q]:K==1&&re+"[one]"in m?H=m[re+"[one]"][Q]:K==2&&re+"[two]"in m?H=m[re+"[two]"][Q]:re+ue in m?H=m[re+ue][Q]:re+"[other]"in m&&(H=m[re+"[other]"][Q]),H};function y(H,Z,re){var Q=m[H];if(!Q){if(console.warn("#"+H+" is undefined."),!re)return null;Q=re}var K={};for(var ue in Q){var se=Q[ue];se=w(se,Z,H,ue),se=N(se,Z,H),K[ue]=se}return K}function w(H,Z,re,Q){var K=/\{\[\s*([a-zA-Z]+)\(([a-zA-Z]+)\)\s*\]\}/,ue=K.exec(H);if(!ue||!ue.length)return H;var se=ue[1],Ce=ue[2],Me;if(Z&&Ce in Z?Me=Z[Ce]:Ce in m&&(Me=m[Ce]),se in A){var q=A[se];H=q(H,Me,re,Q)}return H}function N(H,Z,re){var Q=/\{\{\s*(.+?)\s*\}\}/g;return H.replace(Q,function(K,ue){return Z&&ue in Z?Z[ue]:ue in m?m[ue]:(console.log("argument {{"+ue+"}} for #"+re+" is undefined."),K)})}function D(H){var Z=R(H);if(Z.id){var re=y(Z.id,Z.args);if(!re){console.warn("#"+Z.id+" is undefined.");return}if(re[c]){if(G(H)===0)H[c]=re[c];else{for(var Q=H.childNodes,K=!1,ue=0,se=Q.length;ue<se;ue++)Q[ue].nodeType===3&&/\S/.test(Q[ue].nodeValue)&&(K?Q[ue].nodeValue="":(Q[ue].nodeValue=re[c],K=!0));if(!K){var Ce=_.createTextNode(re[c]);H.prepend(Ce)}}delete re[c]}for(var Me in re)H[Me]=re[Me]}}function G(H){if(H.children)return H.children.length;if(typeof H.childElementCount<"u")return H.childElementCount;for(var Z=0,re=0;re<H.childNodes.length;re++)Z+=H.nodeType===1?1:0;return Z}function le(H){H=H||_.documentElement;for(var Z=P(H),re=Z.length,Q=0;Q<re;Q++)D(Z[Q]);D(H)}return{get:function(H,Z,re){var Q=H.lastIndexOf("."),K=c;Q>0&&(K=H.substring(Q+1),H=H.substring(0,Q));var ue;re&&(ue={},ue[K]=re);var se=y(H,Z,ue);return se&&K in se?se[K]:"{{"+H+"}}"},getData:function(){return m},getText:function(){return n},getLanguage:function(){return C},setLanguage:function(H,Z){o(H,function(){Z&&Z()})},getDirection:function(){var H=["ar","he","fa","ps","ur"],Z=C.split("-",1)[0];return H.indexOf(Z)>=0?"rtl":"ltr"},translate:le,getReadyState:function(){return E},ready:function(H){if(H)E=="complete"||E=="interactive"?L.setTimeout(function(){H()}):_.addEventListener&&_.addEventListener("localized",function Z(){_.removeEventListener("localized",Z),H()});else return}}}(window,document)},(L,_,m)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.GenericScripting=void 0,_.docProperties=c;var n=m(5);async function c(A){const E="",r=E.split("#")[0];let{info:g,metadata:b,contentDispositionFilename:P,contentLength:R}=await A.getMetadata();if(!R){const{length:v}=await A.getDownloadInfo();R=v}return{...g,baseURL:r,filesize:R,filename:P||(0,n.getPdfFilenameFromUrl)(E),metadata:b==null?void 0:b.getRaw(),authors:b==null?void 0:b.get("dc:creator"),numPages:A.numPages,URL:E}}class C{constructor(E){this._ready=(0,n.loadScript)(E,!0).then(()=>window.pdfjsSandbox.QuickJSSandbox())}async createSandbox(E){(await this._ready).create(E)}async dispatchEventInSandbox(E){const r=await this._ready;setTimeout(()=>r.dispatchEvent(E),0)}async destroySandbox(){(await this._ready).nukeSandbox()}}_.GenericScripting=C},(L,_,m)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.bindPrintServiceFactory=S;var n=m(5),c=m(53),C=m(1);let A=null,E=null,r=null;function g(y,w,N,D,G,le,H){const Z=A.scratchCanvas,re=G/n.PixelsPerInch.PDF;Z.width=Math.floor(D.width*re),Z.height=Math.floor(D.height*re);const Q=Z.getContext("2d");return Q.save(),Q.fillStyle="rgb(255, 255, 255)",Q.fillRect(0,0,Z.width,Z.height),Q.restore(),Promise.all([w.getPage(N),H]).then(function([K,ue]){const se={canvasContext:Q,transform:[re,0,0,re,0,0],viewport:K.getViewport({scale:1,rotation:D.rotation}),intent:"print",annotationMode:n.AnnotationMode.ENABLE_STORAGE,optionalContentConfigPromise:le,printAnnotationStorage:ue};return K.render(se).promise})}class b{constructor(w,N,D,G,le=null,H=null,Z){this.pdfDocument=w,this.pagesOverview=N,this.printContainer=D,this._printResolution=G||150,this._optionalContentConfigPromise=le||w.getOptionalContentConfig(),this._printAnnotationStoragePromise=H||Promise.resolve(),this.l10n=Z,this.currentPage=-1,this.scratchCanvas=document.createElement("canvas")}layout(){this.throwIfInactive();const w=document.querySelector("body");w.setAttribute("data-pdfjsprinting",!0);const{width:N,height:D}=this.pagesOverview[0];this.pagesOverview.every(le=>le.width===N&&le.height===D)||console.warn("Not all pages have the same size. The printed result may be incorrect!"),this.pageStyleSheet=document.createElement("style"),this.pageStyleSheet.textContent=`@page { size: ${N}pt ${D}pt;}`,w.append(this.pageStyleSheet)}destroy(){if(A!==this)return;this.printContainer.textContent="",document.querySelector("body").removeAttribute("data-pdfjsprinting"),this.pageStyleSheet&&(this.pageStyleSheet.remove(),this.pageStyleSheet=null),this.scratchCanvas.width=this.scratchCanvas.height=0,this.scratchCanvas=null,A=null,l().then(function(){r.active===E&&r.close(E)})}renderPages(){if(this.pdfDocument.isPureXfa)return(0,c.getXfaHtmlForPrinting)(this.printContainer,this.pdfDocument),Promise.resolve();const w=this.pagesOverview.length,N=(D,G)=>{if(this.throwIfInactive(),++this.currentPage>=w){T(w,w,this.l10n),D();return}const le=this.currentPage;T(le,w,this.l10n),g(this,this.pdfDocument,le+1,this.pagesOverview[le],this._printResolution,this._optionalContentConfigPromise,this._printAnnotationStoragePromise).then(this.useRenderedPage.bind(this)).then(function(){N(D,G)},G)};return new Promise(N)}useRenderedPage(){this.throwIfInactive();const w=document.createElement("img"),N=this.scratchCanvas;"toBlob"in N?N.toBlob(function(G){w.src=URL.createObjectURL(G)}):w.src=N.toDataURL();const D=document.createElement("div");return D.className="printedPage",D.append(w),this.printContainer.append(D),new Promise(function(G,le){w.onload=G,w.onerror=le})}performPrint(){return this.throwIfInactive(),new Promise(w=>{setTimeout(()=>{if(!this.active){w();return}P.call(window),setTimeout(w,20)},0)})}get active(){return this===A}throwIfInactive(){if(!this.active)throw new Error("This print request was cancelled or completed.")}}const P=window.print;window.print=function(){if(A){console.warn("Ignored window.print() because of a pending print job.");return}l().then(function(){A&&r.open(E)});try{R("beforeprint")}finally{if(!A){console.error("Expected print service to be initialized."),l().then(function(){r.active===E&&r.close(E)});return}const y=A;A.renderPages().then(function(){return y.performPrint()}).catch(function(){}).then(function(){y.active&&v()})}};function R(y){const w=new CustomEvent(y,{bubbles:!1,cancelable:!1,detail:"custom"});window.dispatchEvent(w)}function v(){A&&(A.destroy(),R("afterprint"))}function T(y,w,N){const D=(0,C.getActiveApp)();E||(E=D.appConfig.appContainer.querySelector(".printServiceDialog"));const G=Math.round(100*y/w),le=E.querySelector("progress"),H=E.querySelector(".relative-progress");le.value=G,N.get("print_progress_percent",{progress:G}).then(Z=>{H.textContent=Z})}if(window.addEventListener("keydown",function(y){y.keyCode===80&&(y.ctrlKey||y.metaKey)&&!y.altKey&&(!y.shiftKey||window.chrome||window.opera)&&(window.print(),y.preventDefault(),y.stopImmediatePropagation())},!0),"onbeforeprint"in window){const y=function(w){w.detail!=="custom"&&w.stopImmediatePropagation()};window.addEventListener("beforeprint",y),window.addEventListener("afterprint",y)}let o;function l(){if(!o){const y=(0,C.getActiveApp)();if(r=y.overlayManager,!r)throw new Error("The overlay manager has not yet been initialized.");E||(E=y.appConfig.appContainer.querySelector(".printServiceDialog")),o=r.register(E,!0),y.appConfig.appContainer.querySelector(".printCancel").onclick=v,E.addEventListener("close",v)}return o}function S(y){y.instance={supportsPrinting:!0,createPrintService(w,N,D,G,le,H,Z){if(A)throw new Error("The print service is created and active.");return A=new b(w,N,D,G,le,H,Z),A}}}},(L,_,m)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.getXfaHtmlForPrinting=A;var n=m(5),c=m(11),C=m(40);function A(E,r){const g=r.allXfaHtml,b=new c.SimpleLinkService,P=Math.round(n.PixelsPerInch.PDF_TO_CSS_UNITS*100)/100;for(const R of g.children){const v=document.createElement("div");v.className="xfaPrintedPage",E.append(v);const T=new C.XfaLayerBuilder({pageDiv:v,pdfPage:null,annotationStorage:r.annotationStorage,linkService:b,xfaHtml:R}),o=(0,n.getXfaPageViewport)(R,{scale:P});T.render(o,"print")}}},(L,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.compatibilityParams=_.OptionKind=_.AppOptions=void 0;const m=Object.create(null);_.compatibilityParams=m;{const A=navigator.userAgent||"",E=navigator.platform||"",r=navigator.maxTouchPoints||1,g=/Android/.test(A),b=/\b(iPad|iPhone|iPod)(?=;)/.test(A)||E==="MacIntel"&&r>1;(function(){(b||g)&&(m.maxCanvasPixels=5242880)})()}const n={VIEWER:2,API:4,WORKER:8,PREFERENCE:128};_.OptionKind=n;const c={annotationEditorMode:{value:0,kind:n.VIEWER+n.PREFERENCE},annotationMode:{value:2,kind:n.VIEWER+n.PREFERENCE},cursorToolOnLoad:{value:0,kind:n.VIEWER+n.PREFERENCE},defaultZoomDelay:{value:400,kind:n.VIEWER+n.PREFERENCE},defaultZoomValue:{value:"",kind:n.VIEWER+n.PREFERENCE},disableHistory:{value:!1,kind:n.VIEWER},disablePageLabels:{value:!1,kind:n.VIEWER+n.PREFERENCE},enablePermissions:{value:!1,kind:n.VIEWER+n.PREFERENCE},enablePrintAutoRotate:{value:!0,kind:n.VIEWER+n.PREFERENCE},enableScripting:{value:!0,kind:n.VIEWER+n.PREFERENCE},enableStampEditor:{value:!0,kind:n.VIEWER+n.PREFERENCE},externalLinkRel:{value:"noopener noreferrer nofollow",kind:n.VIEWER},externalLinkTarget:{value:0,kind:n.VIEWER+n.PREFERENCE},historyUpdateUrl:{value:!1,kind:n.VIEWER+n.PREFERENCE},ignoreDestinationZoom:{value:!1,kind:n.VIEWER+n.PREFERENCE},imageResourcesPath:{value:"./images/",kind:n.VIEWER},maxCanvasPixels:{value:16777216,kind:n.VIEWER},forcePageColors:{value:!1,kind:n.VIEWER+n.PREFERENCE},pageColorsBackground:{value:"Canvas",kind:n.VIEWER+n.PREFERENCE},pageColorsForeground:{value:"CanvasText",kind:n.VIEWER+n.PREFERENCE},pdfBugEnabled:{value:!1,kind:n.VIEWER+n.PREFERENCE},printResolution:{value:150,kind:n.VIEWER},sidebarViewOnLoad:{value:-1,kind:n.VIEWER+n.PREFERENCE},scrollModeOnLoad:{value:-1,kind:n.VIEWER+n.PREFERENCE},spreadModeOnLoad:{value:-1,kind:n.VIEWER+n.PREFERENCE},textLayerMode:{value:1,kind:n.VIEWER+n.PREFERENCE},viewerCssTheme:{value:0,kind:n.VIEWER+n.PREFERENCE},viewOnLoad:{value:0,kind:n.VIEWER+n.PREFERENCE},cMapPacked:{value:!0,kind:n.API},cMapUrl:{value:"../web/cmaps/",kind:n.API},disableAutoFetch:{value:!1,kind:n.API+n.PREFERENCE},disableFontFace:{value:!1,kind:n.API+n.PREFERENCE},disableRange:{value:!1,kind:n.API+n.PREFERENCE},disableStream:{value:!1,kind:n.API+n.PREFERENCE},docBaseUrl:{value:"",kind:n.API},enableXfa:{value:!0,kind:n.API+n.PREFERENCE},fontExtraProperties:{value:!1,kind:n.API},isEvalSupported:{value:!0,kind:n.API},isOffscreenCanvasSupported:{value:!0,kind:n.API},maxImageSize:{value:-1,kind:n.API},pdfBug:{value:!1,kind:n.API},standardFontDataUrl:{value:"../web/standard_fonts/",kind:n.API},verbosity:{value:1,kind:n.API},workerPort:{value:null,kind:n.WORKER},workerSrc:{value:"../build/pdf.worker.js",kind:n.WORKER}};c.defaultUrl={value:"compressed.tracemonkey-pldi-09.pdf",kind:n.VIEWER},c.disablePreferences={value:!1,kind:n.VIEWER},c.locale={value:navigator.language||"en-US",kind:n.VIEWER},c.sandboxBundleSrc={value:"../build/pdf.sandbox.js",kind:n.VIEWER};class C{constructor(){this.userOptions=Object.create(null)}get(E){const r=this.userOptions[E];if(r!==void 0)return r;const g=c[E];if(g!==void 0)return m[E]??g.value}getAll(E=null){const r=Object.create(null);for(const g in c){const b=c[g];if(E&&!(E&b.kind))continue;const P=this.userOptions[g];r[g]=P!==void 0?P:m[g]??b.value}return r}set(E,r){this.userOptions[E]=r}setAll(E,r=!1){if(r){if(this.get("disablePreferences"))return;Object.keys(this.userOptions).length&&console.warn('setAll: The Preferences may override manually set AppOptions; please use the "disablePreferences"-option in order to prevent that.')}for(const g in E)this.userOptions[g]=E[g]}remove(E){delete this.userOptions[E]}_hasUserOptions(){return Object.keys(this.userOptions).length>0}}_.AppOptions=C},(L,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.injectLocaleResource=m;function m(n){const c="application/l10n";let C=document.querySelector(`link[type="${c}"]`);C&&C.getAttribute("href")===n||(C=document.createElement("link"),C.rel="resource",C.type=c,C.href=n,document.head.appendChild(C))}},(L,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.default=void 0;const m=`
<div data-dom-id="outerContainer" class="outerContainer">
  <div data-dom-id="sidebarContainer" class="sidebarContainer">
    <div data-dom-id="toolbarSidebar" class="toolbarSidebar">
      <div data-dom-id="toolbarSidebarLeft" class="toolbarSidebarLeft">
        <div
          role="radiogroup"
          data-dom-id="sidebarViewButtons"
          class="splitToolbarButton toggled sidebarViewButtons"
        >
          <button
            title="Show Thumbnails"
            tabindex="2"
            data-l10n-id="thumbs"
            role="radio"
            aria-checked="true"
            aria-controls="thumbnailView"
            data-dom-id="viewThumbnail"
            class="toolbarButton toggled viewThumbnail"
          >
            <span data-l10n-id="thumbs_label">Thumbnails</span></button
          ><button
            title="Show Document Outline (double-click to expand/collapse all items)"
            tabindex="3"
            data-l10n-id="document_outline"
            role="radio"
            aria-checked="false"
            aria-controls="outlineView"
            data-dom-id="viewOutline"
            class="toolbarButton viewOutline"
          >
            <span data-l10n-id="document_outline_label"
              >Document Outline</span
            ></button
          ><button
            title="Show Attachments"
            tabindex="4"
            data-l10n-id="attachments"
            role="radio"
            aria-checked="false"
            aria-controls="attachmentsView"
            data-dom-id="viewAttachments"
            class="toolbarButton viewAttachments"
          >
            <span data-l10n-id="attachments_label">Attachments</span></button
          ><button
            title="Show Layers (double-click to reset all layers to the default state)"
            tabindex="5"
            data-l10n-id="layers"
            role="radio"
            aria-checked="false"
            aria-controls="layersView"
            data-dom-id="viewLayers"
            class="toolbarButton viewLayers"
          >
            <span data-l10n-id="layers_label">Layers</span>
          </button>
        </div>
      </div>
      <div data-dom-id="toolbarSidebarRight" class="toolbarSidebarRight">
        <div
          data-dom-id="outlineOptionsContainer"
          class="hidden outlineOptionsContainer"
        >
          <div class="verticalToolbarSeparator"></div>
          <button
            disabled="disabled"
            title="Find Current Outline Item"
            tabindex="6"
            data-l10n-id="current_outline_item"
            data-dom-id="currentOutlineItem"
            class="toolbarButton currentOutlineItem"
          >
            <span data-l10n-id="current_outline_item_label"
              >Current Outline Item</span
            >
          </button>
        </div>
      </div>
    </div>
    <div data-dom-id="sidebarContent" class="sidebarContent">
      <div data-dom-id="thumbnailView" class="thumbnailView"></div>
      <div data-dom-id="outlineView" class="hidden outlineView"></div>
      <div data-dom-id="attachmentsView" class="hidden attachmentsView"></div>
      <div data-dom-id="layersView" class="hidden layersView"></div>
    </div>
    <div data-dom-id="sidebarResizer" class="sidebarResizer"></div>
  </div>
  <!-- sidebarContainer -->
  <div data-dom-id="mainContainer" class="mainContainer">
    <div class="findbar hidden doorHanger" data-dom-id="findbar">
      <div data-dom-id="findbarInputContainer" class="findbarInputContainer">
        <input
          title="Find"
          placeholder="Find in document"
          tabindex="91"
          data-l10n-id="find_input"
          aria-invalid="false"
          data-dom-id="findInput"
          class="toolbarField findInput"
        />
        <div class="splitToolbarButton">
          <button
            title="Find the previous occurrence of the phrase"
            tabindex="92"
            data-l10n-id="find_previous"
            data-dom-id="findPrevious"
            class="toolbarButton findPrevious"
          >
            <span data-l10n-id="find_previous_label">Previous</span>
          </button>
          <div class="splitToolbarButtonSeparator"></div>
          <button
            title="Find the next occurrence of the phrase"
            tabindex="93"
            data-l10n-id="find_next"
            data-dom-id="findNext"
            class="toolbarButton findNext"
          >
            <span data-l10n-id="find_next_label">Next</span>
          </button>
        </div>
      </div>
      <div
        data-dom-id="findbarOptionsOneContainer"
        class="findbarOptionsOneContainer"
      >
        <label
          ><input
            type="checkbox"
            tabindex="94"
            data-dom-id="findHighlightAll"
            class="toolbarField findHighlightAll"
          /><span class="toolbarLabel" data-l10n-id="find_highlight"
            >Highlight All</span
          ></label
        ><!--Removed!--><label
          ><input
            type="checkbox"
            tabindex="95"
            data-dom-id="findMatchCase"
            class="toolbarField findMatchCase"
          /><span class="toolbarLabel" data-l10n-id="find_match_case_label"
            >Match Case</span
          ></label
        ><!--Removed!-->
      </div>
      <div
        data-dom-id="findbarOptionsTwoContainer"
        class="findbarOptionsTwoContainer"
      >
        <label
          ><input
            type="checkbox"
            tabindex="96"
            data-dom-id="findMatchDiacritics"
            class="toolbarField findMatchDiacritics"
          /><span
            class="toolbarLabel"
            data-l10n-id="find_match_diacritics_label"
            >Match Diacritics</span
          ></label
        ><!--Removed!--><label
          ><input
            type="checkbox"
            tabindex="97"
            data-dom-id="findEntireWord"
            class="toolbarField findEntireWord"
          /><span class="toolbarLabel" data-l10n-id="find_entire_word_label"
            >Whole Words</span
          ></label
        ><!--Removed!-->
      </div>
      <div
        aria-live="polite"
        data-dom-id="findbarMessageContainer"
        class="findbarMessageContainer"
      >
        <span
          data-dom-id="findResultsCount"
          class="toolbarLabel findResultsCount"
        ></span
        ><span data-dom-id="findMsg" class="toolbarLabel findMsg"></span>
      </div>
    </div>
    <!-- findbar -->
    <div
      data-dom-id="editorFreeTextParamsToolbar"
      class="editorParamsToolbar hidden doorHangerRight editorFreeTextParamsToolbar"
    >
      <div class="editorParamsToolbarContainer">
        <div class="editorParamsSetter">
          <!--Removed!--><label
            ><input
              type="color"
              tabindex="100"
              data-dom-id="editorFreeTextColor"
              class="editorParamsColor editorFreeTextColor"
            /><span class="toolbarLabel" data-l10n-id="editor_free_text_color"
              >Color</span
            ></label
          >
        </div>
        <div class="editorParamsSetter">
          <!--Removed!--><label
            ><input
              type="range"
              value="10"
              min="5"
              max="100"
              step="1"
              tabindex="101"
              data-dom-id="editorFreeTextFontSize"
              class="editorParamsSlider editorFreeTextFontSize"
            /><span class="toolbarLabel" data-l10n-id="editor_free_text_size"
              >Size</span
            ></label
          >
        </div>
      </div>
    </div>
    <div
      data-dom-id="editorInkParamsToolbar"
      class="editorParamsToolbar hidden doorHangerRight editorInkParamsToolbar"
    >
      <div class="editorParamsToolbarContainer">
        <div class="editorParamsSetter">
          <!--Removed!--><label
            ><input
              type="color"
              tabindex="102"
              data-dom-id="editorInkColor"
              class="editorParamsColor editorInkColor"
            /><span class="toolbarLabel" data-l10n-id="editor_ink_color"
              >Color</span
            ></label
          >
        </div>
        <div class="editorParamsSetter">
          <!--Removed!--><label
            ><input
              type="range"
              value="1"
              min="1"
              max="20"
              step="1"
              tabindex="103"
              data-dom-id="editorInkThickness"
              class="editorParamsSlider editorInkThickness"
            /><span class="toolbarLabel" data-l10n-id="editor_ink_thickness"
              >Thickness</span
            ></label
          >
        </div>
        <div class="editorParamsSetter">
          <!--Removed!--><label
            ><input
              type="range"
              value="100"
              min="1"
              max="100"
              step="1"
              tabindex="104"
              data-dom-id="editorInkOpacity"
              class="editorParamsSlider editorInkOpacity"
            /><span class="toolbarLabel" data-l10n-id="editor_ink_opacity"
              >Opacity</span
            ></label
          >
        </div>
      </div>
    </div>
    <div
      data-dom-id="editorStampParamsToolbar"
      class="editorParamsToolbar hidden doorHangerRight editorStampParamsToolbar"
    >
      <div class="editorParamsToolbarContainer">
        <button
          title="Add image"
          tabindex="105"
          data-l10n-id="editor_stamp_add_image"
          data-dom-id="editorStampAddImage"
          class="secondaryToolbarButton editorStampAddImage"
        >
          <span data-l10n-id="editor_stamp_add_image_label">Add image</span>
        </button>
      </div>
    </div>
    <div
      class="secondaryToolbar hidden doorHangerRight"
      data-dom-id="secondaryToolbar"
    >
      <div
        data-dom-id="secondaryToolbarButtonContainer"
        class="secondaryToolbarButtonContainer"
      >
        <!--#if GENERIC--><button
          title="Open File"
          tabindex="51"
          data-l10n-id="open_file"
          data-dom-id="secondaryOpenFile"
          class="secondaryToolbarButton visibleLargeView secondaryOpenFile"
        >
          <span data-l10n-id="open_file_label">Open</span></button
        ><!--#endif--><button
          title="Print"
          tabindex="52"
          data-l10n-id="print"
          data-dom-id="secondaryPrint"
          class="secondaryToolbarButton visibleMediumView secondaryPrint"
        >
          <span data-l10n-id="print_label">Print</span></button
        ><button
          title="Save"
          tabindex="53"
          data-l10n-id="save"
          data-dom-id="secondaryDownload"
          class="secondaryToolbarButton visibleMediumView secondaryDownload"
        >
          <span data-l10n-id="save_label">Save</span></button
        ><!--#if GENERIC-->
        <div class="horizontalToolbarSeparator visibleLargeView"></div>
        <!--#else--><!--        <div class="horizontalToolbarSeparator visibleMediumView"></div>--><!--#endif--><button
          title="Switch to Presentation Mode"
          tabindex="54"
          data-l10n-id="presentation_mode"
          data-dom-id="presentationMode"
          class="secondaryToolbarButton presentationMode"
        >
          <span data-l10n-id="presentation_mode_label"
            >Presentation Mode</span
          ></button
        ><a
          href="#"
          title="Current Page (View URL from Current Page)"
          tabindex="55"
          data-l10n-id="bookmark1"
          data-dom-id="viewBookmark"
          class="secondaryToolbarButton viewBookmark"
          ><span data-l10n-id="bookmark1_label">Current Page</span></a
        >
        <div
          data-dom-id="viewBookmarkSeparator"
          class="horizontalToolbarSeparator viewBookmarkSeparator"
        ></div>
        <button
          title="Go to First Page"
          tabindex="56"
          data-l10n-id="first_page"
          data-dom-id="firstPage"
          class="secondaryToolbarButton firstPage"
        >
          <span data-l10n-id="first_page_label">Go to First Page</span></button
        ><button
          title="Go to Last Page"
          tabindex="57"
          data-l10n-id="last_page"
          data-dom-id="lastPage"
          class="secondaryToolbarButton lastPage"
        >
          <span data-l10n-id="last_page_label">Go to Last Page</span>
        </button>
        <div class="horizontalToolbarSeparator"></div>
        <button
          title="Rotate Clockwise"
          tabindex="58"
          data-l10n-id="page_rotate_cw"
          data-dom-id="pageRotateCw"
          class="secondaryToolbarButton pageRotateCw"
        >
          <span data-l10n-id="page_rotate_cw_label"
            >Rotate Clockwise</span
          ></button
        ><button
          title="Rotate Counterclockwise"
          tabindex="59"
          data-l10n-id="page_rotate_ccw"
          data-dom-id="pageRotateCcw"
          class="secondaryToolbarButton pageRotateCcw"
        >
          <span data-l10n-id="page_rotate_ccw_label"
            >Rotate Counterclockwise</span
          >
        </button>
        <div class="horizontalToolbarSeparator"></div>
        <div
          role="radiogroup"
          data-dom-id="cursorToolButtons"
          class="cursorToolButtons"
        >
          <button
            title="Enable Text Selection Tool"
            tabindex="60"
            data-l10n-id="cursor_text_select_tool"
            role="radio"
            aria-checked="true"
            data-dom-id="cursorSelectTool"
            class="secondaryToolbarButton toggled cursorSelectTool"
          >
            <span data-l10n-id="cursor_text_select_tool_label"
              >Text Selection Tool</span
            ></button
          ><button
            title="Enable Hand Tool"
            tabindex="61"
            data-l10n-id="cursor_hand_tool"
            role="radio"
            aria-checked="false"
            data-dom-id="cursorHandTool"
            class="secondaryToolbarButton cursorHandTool"
          >
            <span data-l10n-id="cursor_hand_tool_label">Hand Tool</span>
          </button>
        </div>
        <div class="horizontalToolbarSeparator"></div>
        <div
          role="radiogroup"
          data-dom-id="scrollModeButtons"
          class="scrollModeButtons"
        >
          <button
            title="Use Page Scrolling"
            tabindex="62"
            data-l10n-id="scroll_page"
            role="radio"
            aria-checked="false"
            data-dom-id="scrollPage"
            class="secondaryToolbarButton scrollPage"
          >
            <span data-l10n-id="scroll_page_label">Page Scrolling</span></button
          ><button
            title="Use Vertical Scrolling"
            tabindex="63"
            data-l10n-id="scroll_vertical"
            role="radio"
            aria-checked="true"
            data-dom-id="scrollVertical"
            class="secondaryToolbarButton toggled scrollVertical"
          >
            <span data-l10n-id="scroll_vertical_label"
              >Vertical Scrolling</span
            ></button
          ><button
            title="Use Horizontal Scrolling"
            tabindex="64"
            data-l10n-id="scroll_horizontal"
            role="radio"
            aria-checked="false"
            data-dom-id="scrollHorizontal"
            class="secondaryToolbarButton scrollHorizontal"
          >
            <span data-l10n-id="scroll_horizontal_label"
              >Horizontal Scrolling</span
            ></button
          ><button
            title="Use Wrapped Scrolling"
            tabindex="65"
            data-l10n-id="scroll_wrapped"
            role="radio"
            aria-checked="false"
            data-dom-id="scrollWrapped"
            class="secondaryToolbarButton scrollWrapped"
          >
            <span data-l10n-id="scroll_wrapped_label">Wrapped Scrolling</span>
          </button>
        </div>
        <div class="horizontalToolbarSeparator"></div>
        <div
          role="radiogroup"
          data-dom-id="spreadModeButtons"
          class="spreadModeButtons"
        >
          <button
            title="Do not join page spreads"
            tabindex="66"
            data-l10n-id="spread_none"
            role="radio"
            aria-checked="true"
            data-dom-id="spreadNone"
            class="secondaryToolbarButton toggled spreadNone"
          >
            <span data-l10n-id="spread_none_label">No Spreads</span></button
          ><button
            title="Join page spreads starting with odd-numbered pages"
            tabindex="67"
            data-l10n-id="spread_odd"
            role="radio"
            aria-checked="false"
            data-dom-id="spreadOdd"
            class="secondaryToolbarButton spreadOdd"
          >
            <span data-l10n-id="spread_odd_label">Odd Spreads</span></button
          ><button
            title="Join page spreads starting with even-numbered pages"
            tabindex="68"
            data-l10n-id="spread_even"
            role="radio"
            aria-checked="false"
            data-dom-id="spreadEven"
            class="secondaryToolbarButton spreadEven"
          >
            <span data-l10n-id="spread_even_label">Even Spreads</span>
          </button>
        </div>
        <div class="horizontalToolbarSeparator"></div>
        <button
          title="Document Properties"
          tabindex="69"
          data-l10n-id="document_properties"
          aria-controls="documentPropertiesDialog"
          data-dom-id="documentProperties"
          class="secondaryToolbarButton documentProperties"
        >
          <span data-l10n-id="document_properties_label"
            >Document Properties</span
          >
        </button>
      </div>
    </div>
    <!-- secondaryToolbar -->
    <div class="toolbar">
      <div data-dom-id="toolbarContainer" class="toolbarContainer">
        <div data-dom-id="toolbarViewer" class="toolbarViewer">
          <div data-dom-id="toolbarViewerLeft" class="toolbarViewerLeft">
            <button
              title="Toggle Sidebar"
              tabindex="11"
              data-l10n-id="toggle_sidebar"
              aria-expanded="false"
              aria-controls="sidebarContainer"
              data-dom-id="sidebarToggle"
              class="toolbarButton sidebarToggle"
            >
              <span data-l10n-id="toggle_sidebar_label">Toggle Sidebar</span>
            </button>
            <div class="toolbarButtonSpacer"></div>
            <button
              title="Find in Document"
              tabindex="12"
              data-l10n-id="findbar"
              aria-expanded="false"
              aria-controls="findbar"
              data-dom-id="viewFind"
              class="toolbarButton viewFind"
            >
              <span data-l10n-id="findbar_label">Find</span>
            </button>
            <div class="splitToolbarButton hiddenSmallView">
              <button
                title="Previous Page"
                tabindex="13"
                data-l10n-id="previous"
                data-dom-id="previous"
                class="toolbarButton previous"
              >
                <span data-l10n-id="previous_label">Previous</span>
              </button>
              <div class="splitToolbarButtonSeparator"></div>
              <button
                title="Next Page"
                tabindex="14"
                data-l10n-id="next"
                data-dom-id="next"
                class="toolbarButton next"
              >
                <span data-l10n-id="next_label">Next</span>
              </button>
            </div>
            <input
              type="number"
              title="Page"
              value="1"
              min="1"
              tabindex="15"
              data-l10n-id="page"
              autocomplete="off"
              data-dom-id="pageNumber"
              class="toolbarField pageNumber"
            /><span data-dom-id="numPages" class="toolbarLabel numPages"></span>
          </div>
          <div data-dom-id="toolbarViewerRight" class="toolbarViewerRight">
            <!--#if GENERIC--><button
              title="Open File"
              tabindex="31"
              data-l10n-id="open_file"
              data-dom-id="openFile"
              class="toolbarButton hiddenLargeView openFile"
            >
              <span data-l10n-id="open_file_label">Open</span></button
            ><!--#endif--><button
              title="Print"
              tabindex="32"
              data-l10n-id="print"
              data-dom-id="print"
              class="toolbarButton hiddenMediumView print"
            >
              <span data-l10n-id="print_label">Print</span></button
            ><button
              title="Save"
              tabindex="33"
              data-l10n-id="save"
              data-dom-id="download"
              class="toolbarButton hiddenMediumView download"
            >
              <span data-l10n-id="save_label">Save</span>
            </button>
            <div class="verticalToolbarSeparator hiddenMediumView"></div>
            <div
              role="radiogroup"
              data-dom-id="editorModeButtons"
              class="splitToolbarButton toggled editorModeButtons"
            >
              <button
                disabled="disabled"
                title="Text"
                role="radio"
                aria-checked="false"
                aria-controls="editorFreeTextParamsToolbar"
                tabindex="34"
                data-l10n-id="editor_free_text2"
                data-dom-id="editorFreeText"
                class="toolbarButton editorFreeText"
              >
                <span data-l10n-id="editor_free_text2_label">Text</span></button
              ><button
                disabled="disabled"
                title="Draw"
                role="radio"
                aria-checked="false"
                aria-controls="editorInkParamsToolbar"
                tabindex="35"
                data-l10n-id="editor_ink2"
                data-dom-id="editorInk"
                class="toolbarButton editorInk"
              >
                <span data-l10n-id="editor_ink2_label">Draw</span></button
              ><button
                disabled="disabled"
                title="Add or edit images"
                role="radio"
                aria-checked="false"
                aria-controls="editorStampParamsToolbar"
                tabindex="36"
                data-l10n-id="editor_stamp1"
                data-dom-id="editorStamp"
                class="toolbarButton hidden editorStamp"
              >
                <span data-l10n-id="editor_stamp1_label"
                  >Add or edit images</span
                >
              </button>
            </div>
            <div
              data-dom-id="editorModeSeparator"
              class="verticalToolbarSeparator editorModeSeparator"
            ></div>
            <button
              title="Tools"
              tabindex="48"
              data-l10n-id="tools"
              aria-expanded="false"
              aria-controls="secondaryToolbar"
              data-dom-id="secondaryToolbarToggle"
              class="toolbarButton secondaryToolbarToggle"
            >
              <span data-l10n-id="tools_label">Tools</span>
            </button>
          </div>
          <div data-dom-id="toolbarViewerMiddle" class="toolbarViewerMiddle">
            <div class="splitToolbarButton">
              <button
                title="Zoom Out"
                tabindex="21"
                data-l10n-id="zoom_out"
                data-dom-id="zoomOut"
                class="toolbarButton zoomOut"
              >
                <span data-l10n-id="zoom_out_label">Zoom Out</span>
              </button>
              <div class="splitToolbarButtonSeparator"></div>
              <button
                title="Zoom In"
                tabindex="22"
                data-l10n-id="zoom_in"
                data-dom-id="zoomIn"
                class="toolbarButton zoomIn"
              >
                <span data-l10n-id="zoom_in_label">Zoom In</span>
              </button>
            </div>
            <span
              data-dom-id="scaleSelectContainer"
              class="dropdownToolbarButton scaleSelectContainer"
              ><select
                title="Zoom"
                tabindex="23"
                data-l10n-id="zoom"
                data-dom-id="scaleSelect"
                class="scaleSelect"
              >
                <option
                  id="pageAutoOption"
                  title=""
                  value="auto"
                  selected="selected"
                  data-l10n-id="page_scale_auto"
                >
                  Automatic Zoom
                </option>
                <option
                  id="pageActualOption"
                  title=""
                  value="page-actual"
                  data-l10n-id="page_scale_actual"
                >
                  Actual Size
                </option>
                <option
                  id="pageFitOption"
                  title=""
                  value="page-fit"
                  data-l10n-id="page_scale_fit"
                >
                  Page Fit
                </option>
                <option
                  id="pageWidthOption"
                  title=""
                  value="page-width"
                  data-l10n-id="page_scale_width"
                >
                  Page Width
                </option>
                <option
                  id="customScaleOption"
                  title=""
                  value="custom"
                  disabled="disabled"
                  hidden="true"
                ></option>
                <option
                  title=""
                  value="0.5"
                  data-l10n-id="page_scale_percent"
                  data-l10n-args='{ "scale": 50 }'
                >
                  50%
                </option>
                <option
                  title=""
                  value="0.75"
                  data-l10n-id="page_scale_percent"
                  data-l10n-args='{ "scale": 75 }'
                >
                  75%
                </option>
                <option
                  title=""
                  value="1"
                  data-l10n-id="page_scale_percent"
                  data-l10n-args='{ "scale": 100 }'
                >
                  100%
                </option>
                <option
                  title=""
                  value="1.25"
                  data-l10n-id="page_scale_percent"
                  data-l10n-args='{ "scale": 125 }'
                >
                  125%
                </option>
                <option
                  title=""
                  value="1.5"
                  data-l10n-id="page_scale_percent"
                  data-l10n-args='{ "scale": 150 }'
                >
                  150%
                </option>
                <option
                  title=""
                  value="2"
                  data-l10n-id="page_scale_percent"
                  data-l10n-args='{ "scale": 200 }'
                >
                  200%
                </option>
                <option
                  title=""
                  value="3"
                  data-l10n-id="page_scale_percent"
                  data-l10n-args='{ "scale": 300 }'
                >
                  300%
                </option>
                <option
                  title=""
                  value="4"
                  data-l10n-id="page_scale_percent"
                  data-l10n-args='{ "scale": 400 }'
                >
                  400%
                </option>
              </select></span
            >
          </div>
        </div>
        <div data-dom-id="loadingBar" class="loadingBar">
          <div class="progress"><div class="glimmer"></div></div>
        </div>
      </div>
    </div>
    <div tabindex="0" data-dom-id="viewerContainer" class="viewerContainer">
      <div data-dom-id="viewer" class="pdfViewer viewer"></div>
    </div>
  </div>
  <!-- mainContainer -->
  <div data-dom-id="dialogContainer" class="dialogContainer">
    <dialog data-dom-id="passwordDialog" class="passwordDialog">
      <div class="row"><!--Removed!--></div>
      <div class="row">
        <input
          type="password"
          data-dom-id="password"
          class="toolbarField password"
        />
      </div>
      <div class="buttonRow">
        <button
          data-dom-id="passwordCancel"
          class="dialogButton passwordCancel"
        >
          <span data-l10n-id="password_cancel">Cancel</span></button
        ><button
          data-dom-id="passwordSubmit"
          class="dialogButton passwordSubmit"
        >
          <span data-l10n-id="password_ok">OK</span>
        </button>
      </div>
    </dialog>
    <dialog
      data-dom-id="documentPropertiesDialog"
      class="documentPropertiesDialog"
    >
      <div class="row">
        <span
          data-l10n-id="document_properties_file_name"
          data-dom-id="fileNameLabel"
          class="fileNameLabel"
          >File name:</span
        >
        <p
          aria-labelledby="fileNameLabel"
          data-dom-id="fileNameField"
          class="fileNameField"
        >
          -
        </p>
      </div>
      <div class="row">
        <span
          data-l10n-id="document_properties_file_size"
          data-dom-id="fileSizeLabel"
          class="fileSizeLabel"
          >File size:</span
        >
        <p
          aria-labelledby="fileSizeLabel"
          data-dom-id="fileSizeField"
          class="fileSizeField"
        >
          -
        </p>
      </div>
      <div class="separator"></div>
      <div class="row">
        <span
          data-l10n-id="document_properties_title"
          data-dom-id="titleLabel"
          class="titleLabel"
          >Title:</span
        >
        <p
          aria-labelledby="titleLabel"
          data-dom-id="titleField"
          class="titleField"
        >
          -
        </p>
      </div>
      <div class="row">
        <span
          data-l10n-id="document_properties_author"
          data-dom-id="authorLabel"
          class="authorLabel"
          >Author:</span
        >
        <p
          aria-labelledby="authorLabel"
          data-dom-id="authorField"
          class="authorField"
        >
          -
        </p>
      </div>
      <div class="row">
        <span
          data-l10n-id="document_properties_subject"
          data-dom-id="subjectLabel"
          class="subjectLabel"
          >Subject:</span
        >
        <p
          aria-labelledby="subjectLabel"
          data-dom-id="subjectField"
          class="subjectField"
        >
          -
        </p>
      </div>
      <div class="row">
        <span
          data-l10n-id="document_properties_keywords"
          data-dom-id="keywordsLabel"
          class="keywordsLabel"
          >Keywords:</span
        >
        <p
          aria-labelledby="keywordsLabel"
          data-dom-id="keywordsField"
          class="keywordsField"
        >
          -
        </p>
      </div>
      <div class="row">
        <span
          data-l10n-id="document_properties_creation_date"
          data-dom-id="creationDateLabel"
          class="creationDateLabel"
          >Creation Date:</span
        >
        <p
          aria-labelledby="creationDateLabel"
          data-dom-id="creationDateField"
          class="creationDateField"
        >
          -
        </p>
      </div>
      <div class="row">
        <span
          data-l10n-id="document_properties_modification_date"
          data-dom-id="modificationDateLabel"
          class="modificationDateLabel"
          >Modification Date:</span
        >
        <p
          aria-labelledby="modificationDateLabel"
          data-dom-id="modificationDateField"
          class="modificationDateField"
        >
          -
        </p>
      </div>
      <div class="row">
        <span
          data-l10n-id="document_properties_creator"
          data-dom-id="creatorLabel"
          class="creatorLabel"
          >Creator:</span
        >
        <p
          aria-labelledby="creatorLabel"
          data-dom-id="creatorField"
          class="creatorField"
        >
          -
        </p>
      </div>
      <div class="separator"></div>
      <div class="row">
        <span
          data-l10n-id="document_properties_producer"
          data-dom-id="producerLabel"
          class="producerLabel"
          >PDF Producer:</span
        >
        <p
          aria-labelledby="producerLabel"
          data-dom-id="producerField"
          class="producerField"
        >
          -
        </p>
      </div>
      <div class="row">
        <span
          data-l10n-id="document_properties_version"
          data-dom-id="versionLabel"
          class="versionLabel"
          >PDF Version:</span
        >
        <p
          aria-labelledby="versionLabel"
          data-dom-id="versionField"
          class="versionField"
        >
          -
        </p>
      </div>
      <div class="row">
        <span
          data-l10n-id="document_properties_page_count"
          data-dom-id="pageCountLabel"
          class="pageCountLabel"
          >Page Count:</span
        >
        <p
          aria-labelledby="pageCountLabel"
          data-dom-id="pageCountField"
          class="pageCountField"
        >
          -
        </p>
      </div>
      <div class="row">
        <span
          data-l10n-id="document_properties_page_size"
          data-dom-id="pageSizeLabel"
          class="pageSizeLabel"
          >Page Size:</span
        >
        <p
          aria-labelledby="pageSizeLabel"
          data-dom-id="pageSizeField"
          class="pageSizeField"
        >
          -
        </p>
      </div>
      <div class="separator"></div>
      <div class="row">
        <span
          data-l10n-id="document_properties_linearized"
          data-dom-id="linearizedLabel"
          class="linearizedLabel"
          >Fast Web View:</span
        >
        <p
          aria-labelledby="linearizedLabel"
          data-dom-id="linearizedField"
          class="linearizedField"
        >
          -
        </p>
      </div>
      <div class="buttonRow">
        <button
          data-dom-id="documentPropertiesClose"
          class="dialogButton documentPropertiesClose"
        >
          <span data-l10n-id="document_properties_close">Close</span>
        </button>
      </div>
    </dialog>
    <dialog
      aria-labelledby="dialogLabel"
      aria-describedby="dialogDescription"
      data-dom-id="altTextDialog"
      class="altTextDialog"
    >
      <div data-dom-id="altTextContainer" class="altTextContainer">
        <div data-dom-id="overallDescription" class="overallDescription">
          <span
            data-l10n-id="editor_alt_text_dialog_label"
            data-dom-id="dialogLabel"
            class="title dialogLabel"
            >Choose an option</span
          ><span
            data-l10n-id="editor_alt_text_dialog_description"
            data-dom-id="dialogDescription"
            class="dialogDescription"
          >
            Alt text (alternative text) helps when people cant see the image or
            when it doesnt load.
          </span>
        </div>
        <div data-dom-id="addDescription" class="addDescription">
          <div class="radio">
            <div class="radioButton">
              <label
                ><input
                  type="radio"
                  name="altTextOption"
                  tabindex="0"
                  aria-describedby="descriptionAreaLabel"
                  checked=""
                  data-dom-id="descriptionButton"
                  class="descriptionButton"
                /><span
                  class="toolbarLabel"
                  data-l10n-id="editor_alt_text_add_description_label"
                  >Add a description</span
                ></label
              ><!--Removed!-->
            </div>
            <div class="radioLabel">
              <span
                data-l10n-id="editor_alt_text_add_description_description"
                data-dom-id="descriptionAreaLabel"
                class="descriptionAreaLabel"
              >
                Aim for 1-2 sentences that describe the subject, setting, or
                actions.
              </span>
            </div>
          </div>
          <div class="descriptionArea">
            <textarea
              placeholder="For example, A young man sits down at a table to eat a meal"
              aria-labelledby="descriptionAreaLabel"
              data-l10n-id="editor_alt_text_textarea"
              tabindex="0"
              data-dom-id="descriptionTextarea"
              class="descriptionTextarea"
            ></textarea>
          </div>
        </div>
        <div data-dom-id="markAsDecorative" class="markAsDecorative">
          <div class="radio">
            <div class="radioButton">
              <label
                ><input
                  type="radio"
                  name="altTextOption"
                  aria-describedby="decorativeLabel"
                  data-dom-id="decorativeButton"
                  class="decorativeButton"
                /><span
                  class="toolbarLabel"
                  data-l10n-id="editor_alt_text_mark_decorative_label"
                  >Mark as decorative</span
                ></label
              ><!--Removed!-->
            </div>
            <div class="radioLabel">
              <span
                data-l10n-id="editor_alt_text_mark_decorative_description"
                data-dom-id="decorativeLabel"
                class="decorativeLabel"
              >
                This is used for ornamental images, like borders or watermarks.
              </span>
            </div>
          </div>
        </div>
        <div data-dom-id="buttons" class="buttons">
          <button
            tabindex="0"
            data-dom-id="altTextCancel"
            class="altTextCancel"
          >
            <span data-l10n-id="editor_alt_text_cancel_button"
              >Cancel</span
            ></button
          ><button tabindex="0" data-dom-id="altTextSave" class="altTextSave">
            <span data-l10n-id="editor_alt_text_save_button">Save</span>
          </button>
        </div>
      </div>
    </dialog>
    <!--#if !MOZCENTRAL-->
    <dialog
      style="min-width: 200px"
      data-dom-id="printServiceDialog"
      class="printServiceDialog"
    >
      <div class="row">
        <span data-l10n-id="print_progress_message"
          >Preparing document for printing</span
        >
      </div>
      <div class="row">
        <progress value="0" max="100"></progress
        ><span
          data-l10n-id="print_progress_percent"
          data-l10n-args='{ "progress": 0 }'
          class="relative-progress"
          >0%</span
        >
      </div>
      <div class="buttonRow">
        <button data-dom-id="printCancel" class="dialogButton printCancel">
          <span data-l10n-id="print_progress_close">Cancel</span>
        </button>
      </div>
    </dialog>
    <!--#endif--><!--#if CHROME--><!--#include viewer-snippet-chrome-overlays.html--><!--#endif-->
  </div>
  <!-- dialogContainer -->
</div>
<!-- outerContainer -->
<div data-dom-id="printContainer" class="printContainer"></div>
<!--#if GENERIC--><input
  type="file"
  data-dom-id="fileInput"
  class="hidden fileInput"
/><!--#endif-->
`;let n;function c(){if(!n){const A=document.createElement("template");A.innerHTML=m,n=A.content}return document.importNode(n,!0)}var C=c;_.default=C}],i={};function f(L){var _=i[L];if(_!==void 0)return _.exports;var m=i[L]={exports:{}};return a[L](m,m.exports,f),m.exports}var I={};return(()=>{var m;var L=I;Object.defineProperty(L,"__esModule",{value:!0}),Object.defineProperty(L,"createViewerApp",{enumerable:!0,get:function(){return _.createViewerApp}}),Object.defineProperty(L,"getViewerConfiguration",{enumerable:!0,get:function(){return _.getViewerConfiguration}});var _=f(1);(m=document.blockUnblockOnload)==null||m.call(document,!0)})(),I})())})(app$1);var appExports=app$1.exports;const viewer="";let src="./document-viewer/web/compressed.tracemonkey-pldi-09.pdf";const appOptions={src,resourcePath:"document-viewer",disableCORSCheck:!0,disableAutoSetTitle:!0};function injectApp(e){return console.log("injectApp",e),appExports.createViewerApp({parent:e,...appOptions})}const CustomToolbar_vue_vue_type_style_index_0_scoped_e7dda392_lang="",_withScopeId=e=>(pushScopeId("data-v-e7dda392"),e=e(),popScopeId(),e),_hoisted_1$1={class:"pdf-viewer"},_hoisted_2$1={class:"viewer-header"},_hoisted_3$1=_withScopeId(()=>createBaseVNode("svg",{viewBox:"0 0 24 24",width:"22",height:"22",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[createBaseVNode("path",{d:"M4 6H20V8H4V6ZM4 11H20V13H4V11ZM4 16H20V18H4V16Z",fill:"black"})],-1)),_hoisted_4$1=[_hoisted_3$1],_hoisted_5={class:"header-item"},_hoisted_6=_withScopeId(()=>createBaseVNode("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 12 12",width:"22",height:"22"},[createBaseVNode("path",{d:"M7.5,2l-4,4,4,4,1-1-3-3,3-3Z"})],-1)),_hoisted_7=[_hoisted_6],_hoisted_8=["value"],_hoisted_9=_withScopeId(()=>createBaseVNode("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 12 12",width:"22",height:"22"},[createBaseVNode("path",{d:"M4.5,10l4-4-4-4-1,1,3,3-3,3Z"})],-1)),_hoisted_10=[_hoisted_9],_sfc_main$1={__name:"CustomToolbar",setup(e){const t=ref(null),a=shallowRef(null),i=ref(1);onMounted(function(){a.value=injectApp(t.value),a.value.initializedPromise.then(function(){a.value.eventBus.on("pagechanging",function(m){i.value=m.pageNumber})})});function f(){a.value.pdfSidebar.toggle()}function I(){a.value.eventBus.dispatch("previouspage")}function L(){a.value.eventBus.dispatch("nextpage")}function _(m){const n=parseInt(m.target.value,10);a.value.pdfViewer.currentPageNumber=n}return(m,n)=>(openBlock(),createElementBlock("div",_hoisted_1$1,[createBaseVNode("div",_hoisted_2$1,[createBaseVNode("div",{class:"header-item"},[createBaseVNode("button",{onClick:f,class:"menu-outline header-icon"},_hoisted_4$1)]),createBaseVNode("div",_hoisted_5,[createBaseVNode("button",{onClick:I,class:"prev-page header-icon"},_hoisted_7),createBaseVNode("input",{class:"page-input",type:"text",value:i.value,onChange:_},null,40,_hoisted_8),createBaseVNode("button",{onClick:L,class:"next-page header-icon"},_hoisted_10)])]),createBaseVNode("div",{ref_key:"el$",ref:t,class:"viewer-content"},null,512)]))}},CustomToolbar=_export_sfc(_sfc_main$1,[["__scopeId","data-v-e7dda392"]]);let src1="./lc_pdf_overview_format.pdf",src2="./recognizing_malformed_pdf_f.pdf";const options1={src:src1,resourcePath:"document-viewer",disableCORSCheck:!0,disableAutoSetTitle:!0},options2={src:src2,resourcePath:"document-viewer",disableCORSCheck:!0,disableAutoSetTitle:!0};function injectApps(){appExports.createViewerApp({parent:document.getElementById("app1"),...options1}),appExports.createViewerApp({parent:document.getElementById("app2"),...options2})}const MultipleFiles_vue_vue_type_style_index_0_lang="",_hoisted_1={class:"main"},_hoisted_2=createBaseVNode("div",{id:"app1"},null,-1),_hoisted_3=createBaseVNode("div",{id:"app2"},null,-1),_hoisted_4=[_hoisted_2,_hoisted_3],_sfc_main={__name:"MultipleFiles",setup(e){return onMounted(function(){injectApps()}),(t,a)=>(openBlock(),createElementBlock("div",_hoisted_1,_hoisted_4))}},router=createRouter({history:createWebHashHistory("/document-viewer/demos/"),routes:[{path:"/",name:"home",redirect:"/custom-toolbar"},{path:"/custom-toolbar",name:"customToolbar",component:CustomToolbar},{path:"/multiple-pdf-files",name:"multiplePDFFiles",component:_sfc_main}]}),app=createApp(App);app.use(router);app.mount("#app");
