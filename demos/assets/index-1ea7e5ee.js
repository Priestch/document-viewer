var zs=Object.defineProperty;var js=(xe,z,Ae)=>z in xe?zs(xe,z,{enumerable:!0,configurable:!0,writable:!0,value:Ae}):xe[z]=Ae;var $e=(xe,z,Ae)=>(js(xe,typeof z!="symbol"?z+"":z,Ae),Ae),$t=(xe,z,Ae)=>{if(!z.has(xe))throw TypeError("Cannot "+Ae)};var t=(xe,z,Ae)=>($t(xe,z,"read from private field"),Ae?Ae.call(xe):z.get(xe)),R=(xe,z,Ae)=>{if(z.has(xe))throw TypeError("Cannot add the same private member more than once");z instanceof WeakSet?z.add(xe):z.set(xe,Ae)},ie=(xe,z,Ae,N)=>($t(xe,z,"write to private field"),N?N.call(xe,Ae):z.set(xe,Ae),Ae),it=(xe,z,Ae,N)=>({set _(Z){ie(xe,z,Z,Ae)},get _(){return t(xe,z,N)}}),D=(xe,z,Ae)=>($t(xe,z,"access private method"),Ae);(function(){const z=document.createElement("link").relList;if(z&&z.supports&&z.supports("modulepreload"))return;for(const Z of document.querySelectorAll('link[rel="modulepreload"]'))N(Z);new MutationObserver(Z=>{for(const Ee of Z)if(Ee.type==="childList")for(const oe of Ee.addedNodes)oe.tagName==="LINK"&&oe.rel==="modulepreload"&&N(oe)}).observe(document,{childList:!0,subtree:!0});function Ae(Z){const Ee={};return Z.integrity&&(Ee.integrity=Z.integrity),Z.referrerPolicy&&(Ee.referrerPolicy=Z.referrerPolicy),Z.crossOrigin==="use-credentials"?Ee.credentials="include":Z.crossOrigin==="anonymous"?Ee.credentials="omit":Ee.credentials="same-origin",Ee}function N(Z){if(Z.ep)return;Z.ep=!0;const Ee=Ae(Z);fetch(Z.href,Ee)}})();function getAugmentedNamespace(xe){if(xe.__esModule)return xe;var z=xe.default;if(typeof z=="function"){var Ae=function N(){if(this instanceof N){var Z=[null];Z.push.apply(Z,arguments);var Ee=Function.bind.apply(z,Z);return new Ee}return z.apply(this,arguments)};Ae.prototype=z.prototype}else Ae={};return Object.defineProperty(Ae,"__esModule",{value:!0}),Object.keys(xe).forEach(function(N){var Z=Object.getOwnPropertyDescriptor(xe,N);Object.defineProperty(Ae,N,Z.get?Z:{enumerable:!0,get:function(){return xe[N]}})}),Ae}var appExports={},app={get exports(){return appExports},set exports(xe){appExports=xe}};function commonjsRequire(xe){throw new Error('Could not dynamically require "'+xe+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdfExports={},pdf={get exports(){return pdfExports},set exports(xe){pdfExports=xe}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1),canvas=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),require$$1=getAugmentedNamespace(canvas);var hasRequiredPdf;function requirePdf(){return hasRequiredPdf||(hasRequiredPdf=1,function(module,exports){(function(z,Ae){module.exports=Ae()})(globalThis,()=>(()=>{var __webpack_modules__=[,(xe,z)=>{var ze;Object.defineProperty(z,"__esModule",{value:!0}),z.VerbosityLevel=z.Util=z.UnknownErrorException=z.UnexpectedResponseException=z.TextRenderingMode=z.RenderingIntentFlag=z.PromiseCapability=z.PermissionFlag=z.PasswordResponses=z.PasswordException=z.PageActionEventType=z.OPS=z.MissingPDFException=z.MAX_IMAGE_SIZE_TO_CACHE=z.LINE_FACTOR=z.LINE_DESCENT_FACTOR=z.InvalidPDFException=z.ImageKind=z.IDENTITY_MATRIX=z.FormatError=z.FeatureTest=z.FONT_IDENTITY_MATRIX=z.DocumentActionEventType=z.CMapCompressionType=z.BaseException=z.BASELINE_FACTOR=z.AnnotationType=z.AnnotationReplyType=z.AnnotationMode=z.AnnotationFlag=z.AnnotationFieldFlag=z.AnnotationEditorType=z.AnnotationEditorPrefix=z.AnnotationEditorParamsType=z.AnnotationBorderStyleType=z.AnnotationActionEventType=z.AbortException=void 0,z.assert=$,z.bytesToString=ee,z.createValidAbsoluteUrl=ce,z.getModificationDate=Me,z.getUuid=We,z.getVerbosityLevel=E,z.info=O,z.isArrayBuffer=fe,z.isArrayEqual=Ce,z.isNodeJS=void 0,z.normalizeUnicode=Ge,z.objectFromMap=de,z.objectSize=ne,z.setVerbosityLevel=V,z.shadow=we,z.string32=pe,z.stringToBytes=_e,z.stringToPDFString=ae,z.stringToUTF8String=J,z.unreachable=B,z.utf8StringToString=le,z.warn=y;const Ae=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");z.isNodeJS=Ae;const N=[1,0,0,1,0,0];z.IDENTITY_MATRIX=N;const Z=[.001,0,0,.001,0,0];z.FONT_IDENTITY_MATRIX=Z;const Ee=1e7;z.MAX_IMAGE_SIZE_TO_CACHE=Ee;const oe=1.35;z.LINE_FACTOR=oe;const T=.35;z.LINE_DESCENT_FACTOR=T;const C=T/oe;z.BASELINE_FACTOR=C;const a={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};z.RenderingIntentFlag=a;const l={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};z.AnnotationMode=l;const L="pdfjs_internal_editor_";z.AnnotationEditorPrefix=L;const S={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};z.AnnotationEditorType=S;const w={RESIZE:1,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};z.AnnotationEditorParamsType=w;const e={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};z.PermissionFlag=e;const r={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};z.TextRenderingMode=r;const d={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};z.ImageKind=d;const m={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};z.AnnotationType=m;const v={GROUP:"Group",REPLY:"R"};z.AnnotationReplyType=v;const f={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};z.AnnotationFlag=f;const b={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};z.AnnotationFieldFlag=b;const i={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};z.AnnotationBorderStyleType=i;const n={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};z.AnnotationActionEventType=n;const u={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};z.DocumentActionEventType=u;const c={O:"PageOpen",C:"PageClose"};z.PageActionEventType=c;const o={ERRORS:0,WARNINGS:1,INFOS:5};z.VerbosityLevel=o;const h={NONE:0,BINARY:1};z.CMapCompressionType=h;const g={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};z.OPS=g;const x={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};z.PasswordResponses=x;let j=o.WARNINGS;function V(Pe){Number.isInteger(Pe)&&(j=Pe)}function E(){return j}function O(Pe){j>=o.INFOS&&console.log(`Info: ${Pe}`)}function y(Pe){j>=o.WARNINGS&&console.log(`Warning: ${Pe}`)}function B(Pe){throw new Error(Pe)}function $(Pe,A){Pe||B(A)}function I(Pe){switch(Pe==null?void 0:Pe.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function ce(Pe,A=null,H=null){if(!Pe)return null;try{if(H&&typeof Pe=="string"){if(H.addDefaultProtocol&&Pe.startsWith("www.")){const Q=Pe.match(/\./g);(Q==null?void 0:Q.length)>=2&&(Pe=`http://${Pe}`)}if(H.tryConvertEncoding)try{Pe=J(Pe)}catch{}}const be=A?new URL(Pe,A):new URL(Pe);if(I(be))return be}catch{}return null}function we(Pe,A,H,be=!1){return Object.defineProperty(Pe,A,{value:H,enumerable:!be,configurable:!0,writable:!1}),H}const q=function(){function A(H,be){this.constructor===A&&B("Cannot initialize BaseException."),this.message=H,this.name=be}return A.prototype=new Error,A.constructor=A,A}();z.BaseException=q;class P extends q{constructor(A,H){super(A,"PasswordException"),this.code=H}}z.PasswordException=P;class s extends q{constructor(A,H){super(A,"UnknownErrorException"),this.details=H}}z.UnknownErrorException=s;class p extends q{constructor(A){super(A,"InvalidPDFException")}}z.InvalidPDFException=p;class F extends q{constructor(A){super(A,"MissingPDFException")}}z.MissingPDFException=F;class U extends q{constructor(A,H){super(A,"UnexpectedResponseException"),this.status=H}}z.UnexpectedResponseException=U;class X extends q{constructor(A){super(A,"FormatError")}}z.FormatError=X;class Y extends q{constructor(A){super(A,"AbortException")}}z.AbortException=Y;function ee(Pe){(typeof Pe!="object"||(Pe==null?void 0:Pe.length)===void 0)&&B("Invalid argument for bytesToString");const A=Pe.length,H=8192;if(A<H)return String.fromCharCode.apply(null,Pe);const be=[];for(let Q=0;Q<A;Q+=H){const he=Math.min(Q+H,A),se=Pe.subarray(Q,he);be.push(String.fromCharCode.apply(null,se))}return be.join("")}function _e(Pe){typeof Pe!="string"&&B("Invalid argument for stringToBytes");const A=Pe.length,H=new Uint8Array(A);for(let be=0;be<A;++be)H[be]=Pe.charCodeAt(be)&255;return H}function pe(Pe){return String.fromCharCode(Pe>>24&255,Pe>>16&255,Pe>>8&255,Pe&255)}function ne(Pe){return Object.keys(Pe).length}function de(Pe){const A=Object.create(null);for(const[H,be]of Pe)A[H]=be;return A}function ye(){const Pe=new Uint8Array(4);return Pe[0]=1,new Uint32Array(Pe.buffer,0,1)[0]===1}function me(){try{return new Function(""),!0}catch{return!1}}class Te{static get isLittleEndian(){return we(this,"isLittleEndian",ye())}static get isEvalSupported(){return we(this,"isEvalSupported",me())}static get isOffscreenCanvasSupported(){return we(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?we(this,"platform",{isWin:!1,isMac:!1}):we(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}}z.FeatureTest=Te;const Ie=[...Array(256).keys()].map(Pe=>Pe.toString(16).padStart(2,"0"));class Se{static makeHexColor(A,H,be){return`#${Ie[A]}${Ie[H]}${Ie[be]}`}static scaleMinMax(A,H){let be;A[0]?(A[0]<0&&(be=H[0],H[0]=H[1],H[1]=be),H[0]*=A[0],H[1]*=A[0],A[3]<0&&(be=H[2],H[2]=H[3],H[3]=be),H[2]*=A[3],H[3]*=A[3]):(be=H[0],H[0]=H[2],H[2]=be,be=H[1],H[1]=H[3],H[3]=be,A[1]<0&&(be=H[2],H[2]=H[3],H[3]=be),H[2]*=A[1],H[3]*=A[1],A[2]<0&&(be=H[0],H[0]=H[1],H[1]=be),H[0]*=A[2],H[1]*=A[2]),H[0]+=A[4],H[1]+=A[4],H[2]+=A[5],H[3]+=A[5]}static transform(A,H){return[A[0]*H[0]+A[2]*H[1],A[1]*H[0]+A[3]*H[1],A[0]*H[2]+A[2]*H[3],A[1]*H[2]+A[3]*H[3],A[0]*H[4]+A[2]*H[5]+A[4],A[1]*H[4]+A[3]*H[5]+A[5]]}static applyTransform(A,H){const be=A[0]*H[0]+A[1]*H[2]+H[4],Q=A[0]*H[1]+A[1]*H[3]+H[5];return[be,Q]}static applyInverseTransform(A,H){const be=H[0]*H[3]-H[1]*H[2],Q=(A[0]*H[3]-A[1]*H[2]+H[2]*H[5]-H[4]*H[3])/be,he=(-A[0]*H[1]+A[1]*H[0]+H[4]*H[1]-H[5]*H[0])/be;return[Q,he]}static getAxialAlignedBoundingBox(A,H){const be=this.applyTransform(A,H),Q=this.applyTransform(A.slice(2,4),H),he=this.applyTransform([A[0],A[3]],H),se=this.applyTransform([A[2],A[1]],H);return[Math.min(be[0],Q[0],he[0],se[0]),Math.min(be[1],Q[1],he[1],se[1]),Math.max(be[0],Q[0],he[0],se[0]),Math.max(be[1],Q[1],he[1],se[1])]}static inverseTransform(A){const H=A[0]*A[3]-A[1]*A[2];return[A[3]/H,-A[1]/H,-A[2]/H,A[0]/H,(A[2]*A[5]-A[4]*A[3])/H,(A[4]*A[1]-A[5]*A[0])/H]}static singularValueDecompose2dScale(A){const H=[A[0],A[2],A[1],A[3]],be=A[0]*H[0]+A[1]*H[2],Q=A[0]*H[1]+A[1]*H[3],he=A[2]*H[0]+A[3]*H[2],se=A[2]*H[1]+A[3]*H[3],ge=(be+se)/2,_=Math.sqrt((be+se)**2-4*(be*se-he*Q))/2,K=ge+_||1,ue=ge-_||1;return[Math.sqrt(K),Math.sqrt(ue)]}static normalizeRect(A){const H=A.slice(0);return A[0]>A[2]&&(H[0]=A[2],H[2]=A[0]),A[1]>A[3]&&(H[1]=A[3],H[3]=A[1]),H}static intersect(A,H){const be=Math.max(Math.min(A[0],A[2]),Math.min(H[0],H[2])),Q=Math.min(Math.max(A[0],A[2]),Math.max(H[0],H[2]));if(be>Q)return null;const he=Math.max(Math.min(A[1],A[3]),Math.min(H[1],H[3])),se=Math.min(Math.max(A[1],A[3]),Math.max(H[1],H[3]));return he>se?null:[be,he,Q,se]}static bezierBoundingBox(A,H,be,Q,he,se,ge,_){const K=[],ue=[[],[]];let re,k,M,W,G,te,ve,Le;for(let He=0;He<2;++He){if(He===0?(k=6*A-12*be+6*he,re=-3*A+9*be-9*he+3*ge,M=3*be-3*A):(k=6*H-12*Q+6*se,re=-3*H+9*Q-9*se+3*_,M=3*Q-3*H),Math.abs(re)<1e-12){if(Math.abs(k)<1e-12)continue;W=-M/k,0<W&&W<1&&K.push(W);continue}ve=k*k-4*M*re,Le=Math.sqrt(ve),!(ve<0)&&(G=(-k+Le)/(2*re),0<G&&G<1&&K.push(G),te=(-k-Le)/(2*re),0<te&&te<1&&K.push(te))}let Fe=K.length,Re;const ke=Fe;for(;Fe--;)W=K[Fe],Re=1-W,ue[0][Fe]=Re*Re*Re*A+3*Re*Re*W*be+3*Re*W*W*he+W*W*W*ge,ue[1][Fe]=Re*Re*Re*H+3*Re*Re*W*Q+3*Re*W*W*se+W*W*W*_;return ue[0][ke]=A,ue[1][ke]=H,ue[0][ke+1]=ge,ue[1][ke+1]=_,ue[0].length=ue[1].length=ke+2,[Math.min(...ue[0]),Math.min(...ue[1]),Math.max(...ue[0]),Math.max(...ue[1])]}}z.Util=Se;const Oe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function ae(Pe){if(Pe[0]>="ï"){let H;if(Pe[0]==="þ"&&Pe[1]==="ÿ"?H="utf-16be":Pe[0]==="ÿ"&&Pe[1]==="þ"?H="utf-16le":Pe[0]==="ï"&&Pe[1]==="»"&&Pe[2]==="¿"&&(H="utf-8"),H)try{const be=new TextDecoder(H,{fatal:!0}),Q=_e(Pe);return be.decode(Q)}catch(be){y(`stringToPDFString: "${be}".`)}}const A=[];for(let H=0,be=Pe.length;H<be;H++){const Q=Oe[Pe.charCodeAt(H)];A.push(Q?String.fromCharCode(Q):Pe.charAt(H))}return A.join("")}function J(Pe){return decodeURIComponent(escape(Pe))}function le(Pe){return unescape(encodeURIComponent(Pe))}function fe(Pe){return typeof Pe=="object"&&(Pe==null?void 0:Pe.byteLength)!==void 0}function Ce(Pe,A){if(Pe.length!==A.length)return!1;for(let H=0,be=Pe.length;H<be;H++)if(Pe[H]!==A[H])return!1;return!0}function Me(Pe=new Date){return[Pe.getUTCFullYear().toString(),(Pe.getUTCMonth()+1).toString().padStart(2,"0"),Pe.getUTCDate().toString().padStart(2,"0"),Pe.getUTCHours().toString().padStart(2,"0"),Pe.getUTCMinutes().toString().padStart(2,"0"),Pe.getUTCSeconds().toString().padStart(2,"0")].join("")}class Ne{constructor(){R(this,ze,!1);this.promise=new Promise((A,H)=>{this.resolve=be=>{ie(this,ze,!0),A(be)},this.reject=be=>{ie(this,ze,!0),H(be)}})}get settled(){return t(this,ze)}}ze=new WeakMap,z.PromiseCapability=Ne;let Ue=null,Ve=null;function Ge(Pe){return Ue||(Ue=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Ve=new Map([["ﬅ","ſt"]])),Pe.replaceAll(Ue,(A,H,be)=>H?H.normalize("NFKC"):Ve.get(be))}function We(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const Pe=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(Pe);else for(let A=0;A<32;A++)Pe[A]=Math.floor(Math.random()*255);return ee(Pe)}},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var xe,Ae,N,Z,ot,oe,Lt,C,a,l,L,S,w,e,r,d,Xt,v,f,qt,i,n;Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(c){if(typeof c=="string"||c instanceof URL?c={url:c}:(0,_util.isArrayBuffer)(c)&&(c={data:c}),typeof c!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!c.url&&!c.data&&!c.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const o=new PDFDocumentLoadingTask,{docId:h}=o,g=c.url?getUrlProp(c.url):null,x=c.data?getDataProp(c.data):null,j=c.httpHeaders||null,V=c.withCredentials===!0,E=c.password??null,O=c.range instanceof PDFDataRangeTransport?c.range:null,y=Number.isInteger(c.rangeChunkSize)&&c.rangeChunkSize>0?c.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let B=c.worker instanceof PDFWorker?c.worker:null;const $=c.verbosity,I=typeof c.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(c.docBaseUrl)?c.docBaseUrl:null,ce=typeof c.cMapUrl=="string"?c.cMapUrl:null,we=c.cMapPacked!==!1,q=c.CMapReaderFactory||DefaultCMapReaderFactory,P=typeof c.standardFontDataUrl=="string"?c.standardFontDataUrl:null,s=c.StandardFontDataFactory||DefaultStandardFontDataFactory,p=c.stopAtErrors!==!0,F=Number.isInteger(c.maxImageSize)&&c.maxImageSize>-1?c.maxImageSize:-1,U=c.isEvalSupported!==!1,X=typeof c.isOffscreenCanvasSupported=="boolean"?c.isOffscreenCanvasSupported:!_util.isNodeJS,Y=Number.isInteger(c.canvasMaxAreaInBytes)?c.canvasMaxAreaInBytes:-1,ee=typeof c.disableFontFace=="boolean"?c.disableFontFace:_util.isNodeJS,_e=c.fontExtraProperties===!0,pe=c.enableXfa===!0,ne=c.ownerDocument||globalThis.document,de=c.disableRange===!0,ye=c.disableStream===!0,me=c.disableAutoFetch===!0,Te=c.pdfBug===!0,Ie=O?O.length:c.length??NaN,Se=typeof c.useSystemFonts=="boolean"?c.useSystemFonts:!_util.isNodeJS&&!ee,Oe=typeof c.useWorkerFetch=="boolean"?c.useWorkerFetch:q===_display_utils.DOMCMapReaderFactory&&s===_display_utils.DOMStandardFontDataFactory&&ce&&P&&(0,_display_utils.isValidFetchUrl)(ce,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(P,document.baseURI),ae=c.canvasFactory||new DefaultCanvasFactory({ownerDocument:ne}),J=c.filterFactory||new DefaultFilterFactory({docId:h,ownerDocument:ne}),le=null;(0,_util.setVerbosityLevel)($);const fe={canvasFactory:ae,filterFactory:J};if(Oe||(fe.cMapReaderFactory=new q({baseUrl:ce,isCompressed:we}),fe.standardFontDataFactory=new s({baseUrl:P})),!B){const Ne={verbosity:$,port:_worker_options.GlobalWorkerOptions.workerPort};B=Ne.port?PDFWorker.fromPort(Ne):new PDFWorker(Ne),o._worker=B}const Ce={docId:h,apiVersion:"3.10.0",data:x,password:E,disableAutoFetch:me,rangeChunkSize:y,length:Ie,docBaseUrl:I,enableXfa:pe,evaluatorOptions:{maxImageSize:F,disableFontFace:ee,ignoreErrors:p,isEvalSupported:U,isOffscreenCanvasSupported:X,canvasMaxAreaInBytes:Y,fontExtraProperties:_e,useSystemFonts:Se,cMapUrl:Oe?ce:null,standardFontDataUrl:Oe?P:null}},Me={ignoreErrors:p,isEvalSupported:U,disableFontFace:ee,fontExtraProperties:_e,enableXfa:pe,ownerDocument:ne,disableAutoFetch:me,pdfBug:Te,styleElement:le};return B.promise.then(function(){if(o.destroyed)throw new Error("Loading aborted");const Ne=_fetchDocument(B,Ce),Ue=new Promise(function(Ve){let Ge;O?Ge=new _transport_stream.PDFDataTransportStream({length:Ie,initialData:O.initialData,progressiveDone:O.progressiveDone,contentDispositionFilename:O.contentDispositionFilename,disableRange:de,disableStream:ye},O):x||(Ge=(ze=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(ze):(0,_display_utils.isValidFetchUrl)(ze.url)?new _displayFetch_stream.PDFFetchStream(ze):new _displayNetwork.PDFNetworkStream(ze))({url:g,length:Ie,httpHeaders:j,withCredentials:V,rangeChunkSize:y,disableRange:de,disableStream:ye})),Ve(Ge)});return Promise.all([Ne,Ue]).then(function([Ve,Ge]){if(o.destroyed)throw new Error("Loading aborted");const We=new _message_handler.MessageHandler(h,Ve,B.port),ze=new WorkerTransport(We,o,Ge,Me,fe);o._transport=ze,We.send("Ready",null)})}).catch(o._capability.reject),o}async function _fetchDocument(c,o){if(c.destroyed)throw new Error("Worker was destroyed");const h=await c.messageHandler.sendWithPromise("GetDocRequest",o,o.data?[o.data.buffer]:null);if(c.destroyed)throw new Error("Worker was destroyed");return h}function getUrlProp(c){if(c instanceof URL)return c.href;try{return new URL(c,window.location).href}catch{if(_util.isNodeJS&&typeof c=="string")return c}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(c){if(_util.isNodeJS&&typeof Buffer<"u"&&c instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(c instanceof Uint8Array&&c.byteLength===c.buffer.byteLength)return c;if(typeof c=="string")return(0,_util.stringToBytes)(c);if(typeof c=="object"&&!isNaN(c==null?void 0:c.length)||(0,_util.isArrayBuffer)(c))return new Uint8Array(c);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const z=class{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${it(z,xe)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var o;this.destroyed=!0,await((o=this._transport)==null?void 0:o.destroy()),this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};let PDFDocumentLoadingTask=z;xe=new WeakMap,R(PDFDocumentLoadingTask,xe,0),exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(o,h,g=!1,x=null){this.length=o,this.initialData=h,this.progressiveDone=g,this.contentDispositionFilename=x,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(o){this._rangeListeners.push(o)}addProgressListener(o){this._progressListeners.push(o)}addProgressiveReadListener(o){this._progressiveReadListeners.push(o)}addProgressiveDoneListener(o){this._progressiveDoneListeners.push(o)}onDataRange(o,h){for(const g of this._rangeListeners)g(o,h)}onDataProgress(o,h){this._readyCapability.promise.then(()=>{for(const g of this._progressListeners)g(o,h)})}onDataProgressiveRead(o){this._readyCapability.promise.then(()=>{for(const h of this._progressiveReadListeners)h(o)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const o of this._progressiveDoneListeners)o()})}transportReady(){this._readyCapability.resolve()}requestDataRange(o,h){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(o,h){this._pdfInfo=o,this._transport=h}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(o){return this._transport.getPage(o)}getPageIndex(o){return this._transport.getPageIndex(o)}getDestinations(){return this._transport.getDestinations()}getDestination(o){return this._transport.getDestination(o)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(o=!1){return this._transport.startCleanup(o||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(o,h,g,x=!1){R(this,Z);R(this,oe);R(this,Ae,null);R(this,N,!1);this._pageIndex=o,this._pageInfo=h,this._transport=g,this._stats=x?new _display_utils.StatTimer:null,this._pdfBug=x,this.commonObjs=g.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:o,rotation:h=this.rotate,offsetX:g=0,offsetY:x=0,dontFlip:j=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:o,rotation:h,offsetX:g,offsetY:x,dontFlip:j})}getAnnotations({intent:o="display"}={}){const h=this._transport.getRenderingIntent(o);return this._transport.getAnnotations(this._pageIndex,h.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var o;return((o=this._transport._htmlForXfa)==null?void 0:o.children[this._pageIndex])||null}render({canvasContext:o,viewport:h,intent:g="display",annotationMode:x=_util.AnnotationMode.ENABLE,transform:j=null,background:V=null,optionalContentConfigPromise:E=null,annotationCanvasMap:O=null,pageColors:y=null,printAnnotationStorage:B=null}){var s,p;(s=this._stats)==null||s.time("Overall");const $=this._transport.getRenderingIntent(g,x,B);ie(this,N,!1),D(this,oe,Lt).call(this),E||(E=this._transport.getOptionalContentConfig());let I=this._intentStates.get($.cacheKey);I||(I=Object.create(null),this._intentStates.set($.cacheKey,I)),I.streamReaderCancelTimeout&&(clearTimeout(I.streamReaderCancelTimeout),I.streamReaderCancelTimeout=null);const ce=!!($.renderingIntent&_util.RenderingIntentFlag.PRINT);I.displayReadyCapability||(I.displayReadyCapability=new _util.PromiseCapability,I.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(p=this._stats)==null||p.time("Page Request"),this._pumpOperatorList($));const we=F=>{var U,X;I.renderTasks.delete(q),(this._maybeCleanupAfterRender||ce)&&ie(this,N,!0),D(this,Z,ot).call(this,!ce),F?(q.capability.reject(F),this._abortOperatorList({intentState:I,reason:F instanceof Error?F:new Error(F)})):q.capability.resolve(),(U=this._stats)==null||U.timeEnd("Rendering"),(X=this._stats)==null||X.timeEnd("Overall")},q=new InternalRenderTask({callback:we,params:{canvasContext:o,viewport:h,transform:j,background:V},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:O,operatorList:I.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!ce,pdfBug:this._pdfBug,pageColors:y});(I.renderTasks||(I.renderTasks=new Set)).add(q);const P=q.task;return Promise.all([I.displayReadyCapability.promise,E]).then(([F,U])=>{var X;if(this.destroyed){we();return}(X=this._stats)==null||X.time("Rendering"),q.initializeGraphics({transparency:F,optionalContentConfig:U}),q.operatorListChanged()}).catch(we),P}getOperatorList({intent:o="display",annotationMode:h=_util.AnnotationMode.ENABLE,printAnnotationStorage:g=null}={}){var O;function x(){V.operatorList.lastChunk&&(V.opListReadCapability.resolve(V.operatorList),V.renderTasks.delete(E))}const j=this._transport.getRenderingIntent(o,h,g,!0);let V=this._intentStates.get(j.cacheKey);V||(V=Object.create(null),this._intentStates.set(j.cacheKey,V));let E;return V.opListReadCapability||(E=Object.create(null),E.operatorListChanged=x,V.opListReadCapability=new _util.PromiseCapability,(V.renderTasks||(V.renderTasks=new Set)).add(E),V.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(O=this._stats)==null||O.time("Page Request"),this._pumpOperatorList(j)),V.opListReadCapability.promise}streamTextContent({includeMarkedContent:o=!1,disableNormalization:h=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:o===!0,disableNormalization:h===!0},{highWaterMark:100,size(x){return x.items.length}})}getTextContent(o={}){if(this._transport._htmlForXfa)return this.getXfa().then(g=>_xfa_text.XfaText.textContent(g));const h=this.streamTextContent(o);return new Promise(function(g,x){function j(){V.read().then(function({value:O,done:y}){if(y){g(E);return}Object.assign(E.styles,O.styles),E.items.push(...O.items),j()},x)}const V=h.getReader(),E={items:[],styles:Object.create(null)};j()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const o=[];for(const h of this._intentStates.values())if(this._abortOperatorList({intentState:h,reason:new Error("Page was destroyed."),force:!0}),!h.opListReadCapability)for(const g of h.renderTasks)o.push(g.completed),g.cancel();return this.objs.clear(),ie(this,N,!1),D(this,oe,Lt).call(this),Promise.all(o)}cleanup(o=!1){ie(this,N,!0);const h=D(this,Z,ot).call(this,!1);return o&&h&&this._stats&&(this._stats=new _display_utils.StatTimer),h}_startRenderPage(o,h){var x,j;const g=this._intentStates.get(h);g&&((x=this._stats)==null||x.timeEnd("Page Request"),(j=g.displayReadyCapability)==null||j.resolve(o))}_renderPageChunk(o,h){for(let g=0,x=o.length;g<x;g++)h.operatorList.fnArray.push(o.fnArray[g]),h.operatorList.argsArray.push(o.argsArray[g]);h.operatorList.lastChunk=o.lastChunk,h.operatorList.separateAnnots=o.separateAnnots;for(const g of h.renderTasks)g.operatorListChanged();o.lastChunk&&D(this,Z,ot).call(this,!0)}_pumpOperatorList({renderingIntent:o,cacheKey:h,annotationStorageSerializable:g}){const{map:x,transfers:j}=g,E=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:o,cacheKey:h,annotationStorage:x},j).getReader(),O=this._intentStates.get(h);O.streamReader=E;const y=()=>{E.read().then(({value:B,done:$})=>{if($){O.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(B,O),y())},B=>{if(O.streamReader=null,!this._transport.destroyed){if(O.operatorList){O.operatorList.lastChunk=!0;for(const $ of O.renderTasks)$.operatorListChanged();D(this,Z,ot).call(this,!0)}if(O.displayReadyCapability)O.displayReadyCapability.reject(B);else if(O.opListReadCapability)O.opListReadCapability.reject(B);else throw B}})};y()}_abortOperatorList({intentState:o,reason:h,force:g=!1}){if(o.streamReader){if(o.streamReaderCancelTimeout&&(clearTimeout(o.streamReaderCancelTimeout),o.streamReaderCancelTimeout=null),!g){if(o.renderTasks.size>0)return;if(h instanceof _display_utils.RenderingCancelledException){let x=RENDERING_CANCELLED_TIMEOUT;h.extraDelay>0&&h.extraDelay<1e3&&(x+=h.extraDelay),o.streamReaderCancelTimeout=setTimeout(()=>{o.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:o,reason:h,force:!0})},x);return}}if(o.streamReader.cancel(new _util.AbortException(h.message)).catch(()=>{}),o.streamReader=null,!this._transport.destroyed){for(const[x,j]of this._intentStates)if(j===o){this._intentStates.delete(x);break}this.cleanup()}}}get stats(){return this._stats}}Ae=new WeakMap,N=new WeakMap,Z=new WeakSet,ot=function(o=!1){if(D(this,oe,Lt).call(this),!t(this,N)||this.destroyed)return!1;if(o)return ie(this,Ae,setTimeout(()=>{ie(this,Ae,null),D(this,Z,ot).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:h,operatorList:g}of this._intentStates.values())if(h.size>0||!g.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),ie(this,N,!1),!0},oe=new WeakSet,Lt=function(){t(this,Ae)&&(clearTimeout(t(this,Ae)),ie(this,Ae,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){R(this,C,new Set);R(this,a,Promise.resolve())}postMessage(o,h){const g={data:structuredClone(o,h?{transfer:h}:null)};t(this,a).then(()=>{for(const x of t(this,C))x.call(this,g)})}addEventListener(o,h){t(this,C).add(h)}removeEventListener(o,h){t(this,C).delete(h)}terminate(){t(this,C).clear()}}C=new WeakMap,a=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const c=(l=document==null?void 0:document.currentScript)==null?void 0:l.src;c&&(PDFWorkerUtil.fallbackWorkerSrc=c.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(c,o){let h;try{if(h=new URL(c),!h.origin||h.origin==="null")return!1}catch{return!1}const g=new URL(o,h);return h.origin===g.origin},PDFWorkerUtil.createCDNWrapper=function(c){const o=`importScripts("${c}");`;return URL.createObjectURL(new Blob([o]))}}const _PDFWorker=class{constructor({name:c=null,port:o=null,verbosity:h=(0,_util.getVerbosityLevel)()}={}){if(o&&t(_PDFWorker,L).has(o))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=c,this.destroyed=!1,this.verbosity=h,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,o){t(_PDFWorker,L).set(o,this),this._initializeFromPort(o);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(c){this._port=c,this._messageHandler=new _message_handler.MessageHandler("main","worker",c),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:c}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,c)||(c=PDFWorkerUtil.createCDNWrapper(new URL(c,window.location).href));const o=new Worker(c),h=new _message_handler.MessageHandler("main","worker",o),g=()=>{o.removeEventListener("error",x),h.destroy(),o.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},x=()=>{this._webWorker||g()};o.addEventListener("error",x),h.on("test",V=>{if(o.removeEventListener("error",x),this.destroyed){g();return}V?(this._messageHandler=h,this._port=o,this._webWorker=o,this._readyCapability.resolve(),h.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),h.destroy(),o.terminate())}),h.on("ready",V=>{if(o.removeEventListener("error",x),this.destroyed){g();return}try{j()}catch{this._setupFakeWorker()}});const j=()=>{const V=new Uint8Array;h.send("test",V,[V.buffer])};j();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(c=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const o=new LoopbackPort;this._port=o;const h=`fake${PDFWorkerUtil.fakeWorkerId++}`,g=new _message_handler.MessageHandler(h+"_worker",h,o);c.setup(g,o);const x=new _message_handler.MessageHandler(h,h+"_worker",o);this._messageHandler=x,this._readyCapability.resolve(),x.send("configure",{verbosity:this.verbosity})}).catch(c=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${c.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),t(_PDFWorker,L).delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(c){if(!(c!=null&&c.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return t(this,L).has(c.port)?t(this,L).get(c.port):new _PDFWorker(c)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var c;try{return((c=globalThis.pdfjsWorker)==null?void 0:c.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};let PDFWorker=_PDFWorker;L=new WeakMap,R(PDFWorker,L,new WeakMap),exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(o,h,g,x,j){R(this,d);R(this,S,new Map);R(this,w,new Map);R(this,e,new Map);R(this,r,null);this.messageHandler=o,this.loadingTask=h,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:x.ownerDocument,styleElement:x.styleElement}),this._params=x,this.canvasFactory=j.canvasFactory,this.filterFactory=j.filterFactory,this.cMapReaderFactory=j.cMapReaderFactory,this.standardFontDataFactory=j.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=g,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(o,h=_util.AnnotationMode.ENABLE,g=null,x=!1){let j=_util.RenderingIntentFlag.DISPLAY,V=_annotation_storage.SerializableEmpty;switch(o){case"any":j=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":j=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${o}`)}switch(h){case _util.AnnotationMode.DISABLE:j+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:j+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:j+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,V=(j&_util.RenderingIntentFlag.PRINT&&g instanceof _annotation_storage.PrintAnnotationStorage?g:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${h}`)}return x&&(j+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:j,cacheKey:`${j}_${V.hash}`,annotationStorageSerializable:V}}destroy(){var g;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,(g=t(this,r))==null||g.reject(new Error("Worker was destroyed during onPassword callback"));const o=[];for(const x of t(this,w).values())o.push(x._destroy());t(this,w).clear(),t(this,e).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const h=this.messageHandler.sendWithPromise("Terminate",null);return o.push(h),Promise.all(o).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),t(this,S).clear(),this.filterFactory.destroy(),this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:o,loadingTask:h}=this;o.on("GetReader",(g,x)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=j=>{this._lastProgress={loaded:j.loaded,total:j.total}},x.onPull=()=>{this._fullReader.read().then(function({value:j,done:V}){if(V){x.close();return}(0,_util.assert)(j instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),x.enqueue(new Uint8Array(j),1,[j])}).catch(j=>{x.error(j)})},x.onCancel=j=>{this._fullReader.cancel(j),x.ready.catch(V=>{if(!this.destroyed)throw V})}}),o.on("ReaderHeadersReady",g=>{const x=new _util.PromiseCapability,j=this._fullReader;return j.headersReady.then(()=>{var V;(!j.isStreamingSupported||!j.isRangeSupported)&&(this._lastProgress&&((V=h.onProgress)==null||V.call(h,this._lastProgress)),j.onProgress=E=>{var O;(O=h.onProgress)==null||O.call(h,{loaded:E.loaded,total:E.total})}),x.resolve({isStreamingSupported:j.isStreamingSupported,isRangeSupported:j.isRangeSupported,contentLength:j.contentLength})},x.reject),x.promise}),o.on("GetRangeReader",(g,x)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const j=this._networkStream.getRangeReader(g.begin,g.end);if(!j){x.close();return}x.onPull=()=>{j.read().then(function({value:V,done:E}){if(E){x.close();return}(0,_util.assert)(V instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),x.enqueue(new Uint8Array(V),1,[V])}).catch(V=>{x.error(V)})},x.onCancel=V=>{j.cancel(V),x.ready.catch(E=>{if(!this.destroyed)throw E})}}),o.on("GetDoc",({pdfInfo:g})=>{this._numPages=g.numPages,this._htmlForXfa=g.htmlForXfa,delete g.htmlForXfa,h._capability.resolve(new PDFDocumentProxy(g,this))}),o.on("DocException",function(g){let x;switch(g.name){case"PasswordException":x=new _util.PasswordException(g.message,g.code);break;case"InvalidPDFException":x=new _util.InvalidPDFException(g.message);break;case"MissingPDFException":x=new _util.MissingPDFException(g.message);break;case"UnexpectedResponseException":x=new _util.UnexpectedResponseException(g.message,g.status);break;case"UnknownErrorException":x=new _util.UnknownErrorException(g.message,g.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}h._capability.reject(x)}),o.on("PasswordRequest",g=>{if(ie(this,r,new _util.PromiseCapability),h.onPassword){const x=j=>{j instanceof Error?t(this,r).reject(j):t(this,r).resolve({password:j})};try{h.onPassword(x,g.code)}catch(j){t(this,r).reject(j)}}else t(this,r).reject(new _util.PasswordException(g.message,g.code));return t(this,r).promise}),o.on("DataLoaded",g=>{var x;(x=h.onProgress)==null||x.call(h,{loaded:g.length,total:g.length}),this.downloadInfoCapability.resolve(g)}),o.on("StartRenderPage",g=>{if(this.destroyed)return;t(this,w).get(g.pageIndex)._startRenderPage(g.transparency,g.cacheKey)}),o.on("commonobj",([g,x,j])=>{var V;if(!this.destroyed&&!this.commonObjs.has(g))switch(x){case"Font":const E=this._params;if("error"in j){const B=j.error;(0,_util.warn)(`Error during font loading: ${B}`),this.commonObjs.resolve(g,B);break}const O=E.pdfBug&&((V=globalThis.FontInspector)!=null&&V.enabled)?(B,$)=>globalThis.FontInspector.fontAdded(B,$):null,y=new _font_loader.FontFaceObject(j,{isEvalSupported:E.isEvalSupported,disableFontFace:E.disableFontFace,ignoreErrors:E.ignoreErrors,inspectFont:O});this.fontLoader.bind(y).catch(B=>o.sendWithPromise("FontFallback",{id:g})).finally(()=>{!E.fontExtraProperties&&y.data&&(y.data=null),this.commonObjs.resolve(g,y)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(g,j);break;default:throw new Error(`Got unknown common object type ${x}`)}}),o.on("obj",([g,x,j,V])=>{var O;if(this.destroyed)return;const E=t(this,w).get(x);if(!E.objs.has(g))switch(j){case"Image":if(E.objs.resolve(g,V),V){let y;if(V.bitmap){const{width:B,height:$}=V;y=B*$*4}else y=((O=V.data)==null?void 0:O.length)||0;y>_util.MAX_IMAGE_SIZE_TO_CACHE&&(E._maybeCleanupAfterRender=!0)}break;case"Pattern":E.objs.resolve(g,V);break;default:throw new Error(`Got unknown object type ${j}`)}}),o.on("DocProgress",g=>{var x;this.destroyed||(x=h.onProgress)==null||x.call(h,{loaded:g.loaded,total:g.total})}),o.on("FetchBuiltInCMap",g=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(g):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),o.on("FetchStandardFontData",g=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(g):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var g;this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:o,transfers:h}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:o,filename:((g=this._fullReader)==null?void 0:g.filename)??null},h).finally(()=>{this.annotationStorage.resetModified()})}getPage(o){if(!Number.isInteger(o)||o<=0||o>this._numPages)return Promise.reject(new Error("Invalid page request."));const h=o-1,g=t(this,e).get(h);if(g)return g;const x=this.messageHandler.sendWithPromise("GetPage",{pageIndex:h}).then(j=>{if(this.destroyed)throw new Error("Transport destroyed");const V=new PDFPageProxy(h,j,this,this._params.pdfBug);return t(this,w).set(h,V),V});return t(this,e).set(h,x),x}getPageIndex(o){return typeof o!="object"||o===null||!Number.isInteger(o.num)||o.num<0||!Number.isInteger(o.gen)||o.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:o.num,gen:o.gen})}getAnnotations(o,h){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:o,intent:h})}getFieldObjects(){return D(this,d,Xt).call(this,"GetFieldObjects")}hasJSActions(){return D(this,d,Xt).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(o){return typeof o!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:o})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(o){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:o})}getStructTree(o){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:o})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(o=>new _optional_content_config.OptionalContentConfig(o))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const o="GetMetadata",h=t(this,S).get(o);if(h)return h;const g=this.messageHandler.sendWithPromise(o,null).then(x=>{var j,V;return{info:x[0],metadata:x[1]?new _metadata.Metadata(x[1]):null,contentDispositionFilename:((j=this._fullReader)==null?void 0:j.filename)??null,contentLength:((V=this._fullReader)==null?void 0:V.contentLength)??null}});return t(this,S).set(o,g),g}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(o=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const h of t(this,w).values())if(!h.cleanup())throw new Error(`startCleanup: Page ${h.pageNumber} is currently rendering.`);this.commonObjs.clear(),o||this.fontLoader.clear(),t(this,S).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:o,enableXfa:h}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:o,enableXfa:h})}}S=new WeakMap,w=new WeakMap,e=new WeakMap,r=new WeakMap,d=new WeakSet,Xt=function(o,h=null){const g=t(this,S).get(o);if(g)return g;const x=this.messageHandler.sendWithPromise(o,h);return t(this,S).set(o,x),x};class PDFObjects{constructor(){R(this,f);R(this,v,Object.create(null))}get(o,h=null){if(h){const x=D(this,f,qt).call(this,o);return x.capability.promise.then(()=>h(x.data)),null}const g=t(this,v)[o];if(!(g!=null&&g.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${o}.`);return g.data}has(o){const h=t(this,v)[o];return(h==null?void 0:h.capability.settled)||!1}resolve(o,h=null){const g=D(this,f,qt).call(this,o);g.data=h,g.capability.resolve()}clear(){var o;for(const h in t(this,v)){const{data:g}=t(this,v)[h];(o=g==null?void 0:g.bitmap)==null||o.close()}ie(this,v,Object.create(null))}}v=new WeakMap,f=new WeakSet,qt=function(o){const h=t(this,v)[o];return h||(t(this,v)[o]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(o){R(this,i,null);ie(this,i,o),this.onContinue=null}get promise(){return t(this,i).capability.promise}cancel(o=0){t(this,i).cancel(null,o)}get separateAnnots(){const{separateAnnots:o}=t(this,i).operatorList;if(!o)return!1;const{annotationCanvasMap:h}=t(this,i);return o.form||o.canvas&&(h==null?void 0:h.size)>0}}i=new WeakMap,exports.RenderTask=RenderTask;const u=class{constructor({callback:o,params:h,objs:g,commonObjs:x,annotationCanvasMap:j,operatorList:V,pageIndex:E,canvasFactory:O,filterFactory:y,useRequestAnimationFrame:B=!1,pdfBug:$=!1,pageColors:I=null}){this.callback=o,this.params=h,this.objs=g,this.commonObjs=x,this.annotationCanvasMap=j,this.operatorListIdx=null,this.operatorList=V,this._pageIndex=E,this.canvasFactory=O,this.filterFactory=y,this._pdfBug=$,this.pageColors=I,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=B===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=h.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:o=!1,optionalContentConfig:h}){var E,O;if(this.cancelled)return;if(this._canvas){if(t(u,n).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");t(u,n).add(this._canvas)}this._pdfBug&&((E=globalThis.StepperManager)!=null&&E.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:g,viewport:x,transform:j,background:V}=this.params;this.gfx=new _canvas.CanvasGraphics(g,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:h},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:j,viewport:x,transparency:o,background:V}),this.operatorListIdx=0,this.graphicsReady=!0,(O=this.graphicsReadyCallback)==null||O.call(this)}cancel(o=null,h=0){var g;this.running=!1,this.cancelled=!0,(g=this.gfx)==null||g.endDrawing(),this._canvas&&t(u,n).delete(this._canvas),this.callback(o||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,h))}operatorListChanged(){var o;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(o=this.stepper)==null||o.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(this.pageColors),this._canvas&&t(u,n).delete(this._canvas),this.callback())))}};let InternalRenderTask=u;n=new WeakMap,R(InternalRenderTask,n,new WeakSet);const version="3.10.0";exports.version=version;const build="8ad0f0809";exports.build=build},(xe,z,Ae)=>{var a,l,L,nn,w;Object.defineProperty(z,"__esModule",{value:!0}),z.SerializableEmpty=z.PrintAnnotationStorage=z.AnnotationStorage=void 0;var N=Ae(1),Z=Ae(4),Ee=Ae(8);const oe=Object.freeze({map:null,hash:"",transfers:void 0});z.SerializableEmpty=oe;class T{constructor(){R(this,L);R(this,a,!1);R(this,l,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(r,d){const m=t(this,l).get(r);return m===void 0?d:Object.assign(d,m)}getRawValue(r){return t(this,l).get(r)}remove(r){if(t(this,l).delete(r),t(this,l).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const d of t(this,l).values())if(d instanceof Z.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(r,d){const m=t(this,l).get(r);let v=!1;if(m!==void 0)for(const[f,b]of Object.entries(d))m[f]!==b&&(v=!0,m[f]=b);else v=!0,t(this,l).set(r,d);v&&D(this,L,nn).call(this),d instanceof Z.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(d.constructor._type)}has(r){return t(this,l).has(r)}getAll(){return t(this,l).size>0?(0,N.objectFromMap)(t(this,l)):null}setAll(r){for(const[d,m]of Object.entries(r))this.setValue(d,m)}get size(){return t(this,l).size}resetModified(){t(this,a)&&(ie(this,a,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new C(this)}get serializable(){if(t(this,l).size===0)return oe;const r=new Map,d=new Ee.MurmurHash3_64,m=[],v=Object.create(null);let f=!1;for(const[b,i]of t(this,l)){const n=i instanceof Z.AnnotationEditor?i.serialize(!1,v):i;n&&(r.set(b,n),d.update(`${b}:${JSON.stringify(n)}`),f||(f=!!n.bitmap))}if(f)for(const b of r.values())b.bitmap&&m.push(b.bitmap);return r.size>0?{map:r,hash:d.hexdigest(),transfers:m}:oe}}a=new WeakMap,l=new WeakMap,L=new WeakSet,nn=function(){t(this,a)||(ie(this,a,!0),typeof this.onSetModified=="function"&&this.onSetModified())},z.AnnotationStorage=T;class C extends T{constructor(d){super();R(this,w,void 0);const{map:m,hash:v,transfers:f}=d.serializable,b=structuredClone(m,f?{transfer:f}:null);ie(this,w,{map:b,hash:v,transfers:f})}get print(){(0,N.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return t(this,w)}}w=new WeakMap,z.PrintAnnotationStorage=C},(xe,z,Ae)=>{var T,C,a,l,L,S,w,e,r,d,Kt,v,sn,b,an,n,rn;Object.defineProperty(z,"__esModule",{value:!0}),z.AnnotationEditor=void 0;var N=Ae(1),Z=Ae(5);const c=class{constructor(h){R(this,d);R(this,v);R(this,b);R(this,n);R(this,T,!1);R(this,C,null);R(this,a,null);R(this,l,this.focusin.bind(this));R(this,L,this.focusout.bind(this));R(this,S,!1);R(this,w,!1);R(this,e,!1);$e(this,"_uiManager",null);R(this,r,c._zIndex++);this.constructor===c&&(0,N.unreachable)("Cannot initialize AnnotationEditor."),this.parent=h.parent,this.id=h.id,this.width=this.height=null,this.pageIndex=h.parent.pageIndex,this.name=h.name,this.div=null,this._uiManager=h.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1;const{rotation:g,rawDims:{pageWidth:x,pageHeight:j,pageX:V,pageY:E}}=this.parent.viewport;this.rotation=g,this.pageRotation=(360+g-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[x,j],this.pageTranslation=[V,E];const[O,y]=this.parentDimensions;this.x=h.x/O,this.y=h.y/y,this.isAttachedToDOM=!1,this.deleted=!1}static get _defaultLineColor(){return(0,N.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(h){const g=new oe({id:h.parent.getNextId(),parent:h.parent,uiManager:h._uiManager});g.annotationElementId=h.annotationElementId,g.deleted=!0,g._uiManager.addToAnnotationStorage(g)}static initialize(h){}static updateDefaultParams(h,g){}static get defaultPropertiesToUpdate(){return[]}get propertiesToUpdate(){return[]}addCommands(h){this._uiManager.addCommands(h)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=t(this,r)}setParent(h){h!==null&&(this.pageIndex=h.pageIndex,this.pageDimensions=h.pageDimensions),this.parent=h}focusin(h){t(this,S)?ie(this,S,!1):this.parent.setSelected(this)}focusout(h){var x;if(!this.isAttachedToDOM)return;const g=h.relatedTarget;g!=null&&g.closest(`#${this.id}`)||(h.preventDefault(),(x=this.parent)!=null&&x.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}dragstart(h){const g=this.parent.div.getBoundingClientRect();this.startX=h.clientX-g.x,this.startY=h.clientY-g.y,h.dataTransfer.setData("text/plain",this.id),h.dataTransfer.effectAllowed="move"}setAt(h,g,x,j){const[V,E]=this.parentDimensions;[x,j]=this.screenToPageTranslation(x,j),this.x=(h+x)/V,this.y=(g+j)/E,this.fixAndSetPosition()}translate(h,g){D(this,d,Kt).call(this,this.parentDimensions,h,g)}translateInPage(h,g){D(this,d,Kt).call(this,this.pageDimensions,h,g),this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(){const[h,g]=this.pageDimensions;let{x,y:j,width:V,height:E}=this;switch(V*=h,E*=g,x*=h,j*=g,this.rotation){case 0:x=Math.max(0,Math.min(h-V,x)),j=Math.max(0,Math.min(g-E,j));break;case 90:x=Math.max(0,Math.min(h-E,x)),j=Math.min(g,Math.max(V,j));break;case 180:x=Math.min(h,Math.max(V,x)),j=Math.min(g,Math.max(E,j));break;case 270:x=Math.min(h,Math.max(E,x)),j=Math.max(0,Math.min(g-V,j));break}this.x=x/h,this.y=j/g,this.div.style.left=`${(100*this.x).toFixed(2)}%`,this.div.style.top=`${(100*this.y).toFixed(2)}%`}screenToPageTranslation(h,g){switch(this.parentRotation){case 90:return[g,-h];case 180:return[-h,-g];case 270:return[-g,h];default:return[h,g]}}pageTranslationToScreen(h,g){switch(this.parentRotation){case 90:return[-g,h];case 180:return[-h,-g];case 270:return[g,-h];default:return[h,g]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{realScale:h}=this._uiManager.viewParameters,[g,x]=this.pageDimensions;return[g*h,x*h]}setDims(h,g){const[x,j]=this.parentDimensions;this.div.style.width=`${(100*h/x).toFixed(2)}%`,t(this,T)||(this.div.style.height=`${(100*g/j).toFixed(2)}%`)}fixDims(){const{style:h}=this.div,{height:g,width:x}=h,j=x.endsWith("%"),V=!t(this,T)&&g.endsWith("%");if(j&&V)return;const[E,O]=this.parentDimensions;j||(h.width=`${(100*parseFloat(x)/E).toFixed(2)}%`),!t(this,T)&&!V&&(h.height=`${(100*parseFloat(g)/O).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",t(this,l)),this.div.addEventListener("focusout",t(this,L));const[h,g]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*g/h).toFixed(2)}%`,this.div.style.maxHeight=`${(100*h/g).toFixed(2)}%`);const[x,j]=this.getInitialTranslation();return this.translate(x,j),(0,Z.bindEvents)(this,this.div,["dragstart","pointerdown"]),this.div}pointerdown(h){const{isMac:g}=N.FeatureTest.platform;if(h.button!==0||h.ctrlKey&&g){h.preventDefault();return}h.ctrlKey&&!g||h.shiftKey||h.metaKey&&g?this.parent.toggleSelected(this):this.parent.setSelected(this),ie(this,S,!0)}getRect(h,g){const x=this.parentScale,[j,V]=this.pageDimensions,[E,O]=this.pageTranslation,y=h/x,B=g/x,$=this.x*j,I=this.y*V,ce=this.width*j,we=this.height*V;switch(this.rotation){case 0:return[$+y+E,V-I-B-we+O,$+y+ce+E,V-I-B+O];case 90:return[$+B+E,V-I+y+O,$+B+we+E,V-I+y+ce+O];case 180:return[$-y-ce+E,V-I+B+O,$-y+E,V-I+B+we+O];case 270:return[$-B-we+E,V-I-y-ce+O,$-B+E,V-I-y+O];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(h,g){const[x,j,V,E]=h,O=V-x,y=E-j;switch(this.rotation){case 0:return[x,g-E,O,y];case 90:return[x,g-j,y,O];case 180:return[V,g-j,O,y];case 270:return[V,g-E,y,O];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){ie(this,e,!0)}disableEditMode(){ie(this,e,!1)}isInEditMode(){return t(this,e)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var h,g;(h=this.div)==null||h.addEventListener("focusin",t(this,l)),(g=this.div)==null||g.addEventListener("focusout",t(this,L))}serialize(h=!1,g=null){(0,N.unreachable)("An editor must be serializable")}static deserialize(h,g,x){const j=new this.prototype.constructor({parent:g,id:g.getNextId(),uiManager:x});j.rotation=h.rotation;const[V,E]=j.pageDimensions,[O,y,B,$]=j.getRectInCurrentCoords(h.rect,E);return j.x=O/V,j.y=y/E,j.width=B/V,j.height=$/E,j}remove(){this.div.removeEventListener("focusin",t(this,l)),this.div.removeEventListener("focusout",t(this,L)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this)}get isResizable(){return!1}makeResizable(){this.isResizable&&(D(this,v,sn).call(this),t(this,C).classList.remove("hidden"))}select(){var h;this.makeResizable(),(h=this.div)==null||h.classList.add("selectedEditor")}unselect(){var h,g,x;(h=t(this,C))==null||h.classList.add("hidden"),(g=this.div)==null||g.classList.remove("selectedEditor"),(x=this.div)!=null&&x.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(h,g){}disableEditing(){}enableEditing(){}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return t(this,w)}set isEditing(h){ie(this,w,h),this.parent&&(h?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(h,g){ie(this,T,!0);const x=h/g,{style:j}=this.div;j.aspectRatio=x,j.height="auto"}static get MIN_SIZE(){return 16}};let Ee=c;T=new WeakMap,C=new WeakMap,a=new WeakMap,l=new WeakMap,L=new WeakMap,S=new WeakMap,w=new WeakMap,e=new WeakMap,r=new WeakMap,d=new WeakSet,Kt=function([h,g],x,j){[x,j]=this.screenToPageTranslation(x,j),this.x+=x/h,this.y+=j/g,this.fixAndSetPosition()},v=new WeakSet,sn=function(){if(t(this,C))return;ie(this,C,document.createElement("div")),t(this,C).classList.add("resizers");const h=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||h.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const g of h){const x=document.createElement("div");t(this,C).append(x),x.classList.add("resizer",g),x.addEventListener("pointerdown",D(this,b,an).bind(this,g))}this.div.prepend(t(this,C))},b=new WeakSet,an=function(h,g){g.preventDefault(),ie(this,a,[g.clientX,g.clientY]);const x=D(this,n,rn).bind(this,h),j=this.div.draggable;this.div.draggable=!1;const V=`resizing${h.charAt(0).toUpperCase()}${h.slice(1)}`;this.parent.div.classList.add(V);const E={passive:!0,capture:!0};window.addEventListener("pointermove",x,E);const O=()=>{this._uiManager.stopUndoAccumulation(),this.div.draggable=j,this.parent.div.classList.remove(V),window.removeEventListener("pointermove",x,E)};window.addEventListener("pointerup",O,{once:!0})},n=new WeakSet,rn=function(h,g){const{clientX:x,clientY:j}=g,V=x-t(this,a)[0],E=j-t(this,a)[1];t(this,a)[0]=x,t(this,a)[1]=j;const[O,y]=this.parentDimensions,B=this.x,$=this.y,I=this.width,ce=this.height,we=c.MIN_SIZE/O,q=c.MIN_SIZE/y;let P;const s=U=>Math.round(U*1e4)/1e4,p=(U,X)=>{const[Y,ee]=this.parentDimensions;this.setDims(Y*U,ee*X),this.fixAndSetPosition()},F=()=>{this.width=I,this.height=ce,this.x=B,this.y=$,p(I,ce)};switch(h){case"topLeft":{if(Math.sign(V)*Math.sign(E)<0)return;const U=Math.hypot(V,E),X=Math.hypot(I*O,ce*y),Y=s(B+I),ee=s($+ce),_e=Math.max(Math.min(1-Math.sign(V)*(U/X),1/I,1/ce),we/I,q/ce),pe=s(I*_e),ne=s(ce*_e),de=Y-pe,ye=ee-ne;P=()=>{this.width=pe,this.height=ne,this.x=de,this.y=ye,p(pe,ne)};break}case"topMiddle":{const U=s(this.y+ce),X=s(Math.max(q,Math.min(1,ce-E/y))),Y=U-X;P=()=>{this.height=X,this.y=Y,p(I,X)};break}case"topRight":{if(Math.sign(V)*Math.sign(E)>0)return;const U=Math.hypot(V,E),X=Math.hypot(this.width*O,this.height*y),Y=s($+this.height),ee=Math.max(Math.min(1+Math.sign(V)*(U/X),1/I,1/ce),we/I,q/ce),_e=s(I*ee),pe=s(ce*ee),ne=Y-pe;P=()=>{this.width=_e,this.height=pe,this.y=ne,p(_e,pe)};break}case"middleRight":{const U=s(Math.max(we,Math.min(1,I+V/O)));P=()=>{this.width=U,p(U,ce)};break}case"bottomRight":{if(Math.sign(V)*Math.sign(E)<0)return;const U=Math.hypot(V,E),X=Math.hypot(this.width*O,this.height*y),Y=Math.max(Math.min(1+Math.sign(V)*(U/X),1/I,1/ce),we/I,q/ce),ee=s(I*Y),_e=s(ce*Y);P=()=>{this.width=ee,this.height=_e,p(ee,_e)};break}case"bottomMiddle":{const U=s(Math.max(q,Math.min(1,ce+E/y)));P=()=>{this.height=U,p(I,U)};break}case"bottomLeft":{if(Math.sign(V)*Math.sign(E)>0)return;const U=Math.hypot(V,E),X=Math.hypot(this.width*O,this.height*y),Y=s(B+this.width),ee=Math.max(Math.min(1-Math.sign(V)*(U/X),1/I,1/ce),we/I,q/ce),_e=s(I*ee),pe=s(ce*ee),ne=Y-_e;P=()=>{this.width=_e,this.height=pe,this.x=ne,p(_e,pe)};break}case"middleLeft":{const U=s(B+I),X=s(Math.max(we,Math.min(1,I-V/O))),Y=U-X;P=()=>{this.width=X,this.x=Y,p(X,ce)};break}}this.addCommands({cmd:P,undo:F,mustExec:!0,type:N.AnnotationEditorParamsType.RESIZE,overwriteIfSameType:!0,keepUndo:!0})},$e(Ee,"_colorManager",new Z.ColorManager),$e(Ee,"_zIndex",1),z.AnnotationEditor=Ee;class oe extends Ee{constructor(h){super(h),this.annotationElementId=h.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(xe,z,Ae)=>{var w,e,r,d,m,Yt,f,b,i,n,u,on,h,g,x,j,V,E,O,y,B,$,I,ce,we,q,P,s,p,F,U,X,Y,ee,_e,pe,ne,de,ye,me,Te,ln,Se,Zt,ae,dn,le,cn,Ce,nt,Ne,gt,Ve,hn,We,un,Pe,Qt,H,mt,Q,Jt;Object.defineProperty(z,"__esModule",{value:!0}),z.KeyboardManager=z.CommandManager=z.ColorManager=z.AnnotationEditorUIManager=void 0,z.bindEvents=Ee,z.opacityToHex=oe;var N=Ae(1),Z=Ae(6);function Ee(ge,_,K){for(const ue of K)_.addEventListener(ue,ge[ue].bind(ge))}function oe(ge){return Math.round(Math.min(255,Math.max(1,255*ge))).toString(16).padStart(2,"0")}class T{constructor(){R(this,w,0)}getId(){return`${N.AnnotationEditorPrefix}${it(this,w)._++}`}}w=new WeakMap;class C{constructor(){R(this,m);R(this,e,(0,N.getUuid)());R(this,r,0);R(this,d,null)}async getFromFile(_){const{lastModified:K,name:ue,size:re,type:k}=_;return D(this,m,Yt).call(this,`${K}_${ue}_${re}_${k}`,_)}async getFromUrl(_){return D(this,m,Yt).call(this,_,_)}async getFromId(_){t(this,d)||ie(this,d,new Map);const K=t(this,d).get(_);return K?K.bitmap?(K.refCounter+=1,K):K.file?this.getFromFile(K.file):this.getFromUrl(K.url):null}getSvgUrl(_){const K=t(this,d).get(_);return K!=null&&K.isSvg?K.svgUrl:null}deleteId(_){t(this,d)||ie(this,d,new Map);const K=t(this,d).get(_);K&&(K.refCounter-=1,K.refCounter===0&&(K.bitmap=null))}isValidId(_){return _.startsWith(`image_${t(this,e)}_`)}}e=new WeakMap,r=new WeakMap,d=new WeakMap,m=new WeakSet,Yt=async function(_,K){t(this,d)||ie(this,d,new Map);let ue=t(this,d).get(_);if(ue===null)return null;if(ue!=null&&ue.bitmap)return ue.refCounter+=1,ue;try{ue||(ue={bitmap:null,id:`image_${t(this,e)}_${it(this,r)._++}`,refCounter:0,isSvg:!1});let re;if(typeof K=="string"){ue.url=K;const k=await fetch(K);if(!k.ok)throw new Error(k.statusText);re=await k.blob()}else re=ue.file=K;if(re.type==="image/svg+xml"){const k=new FileReader,M=new Image,W=new Promise((G,te)=>{M.onload=()=>{ue.bitmap=M,ue.isSvg=!0,G()},k.onload=()=>{M.src=ue.svgUrl=k.result},M.onerror=k.onerror=te});k.readAsDataURL(re),await W}else ue.bitmap=await createImageBitmap(re);ue.refCounter=1}catch(re){console.error(re),ue=null}return t(this,d).set(_,ue),ue&&t(this,d).set(ue.id,ue),ue};class a{constructor(_=128){R(this,f,[]);R(this,b,!1);R(this,i,void 0);R(this,n,-1);ie(this,i,_)}add({cmd:_,undo:K,mustExec:ue,type:re=NaN,overwriteIfSameType:k=!1,keepUndo:M=!1}){if(ue&&_(),t(this,b))return;const W={cmd:_,undo:K,type:re};if(t(this,n)===-1){t(this,f).length>0&&(t(this,f).length=0),ie(this,n,0),t(this,f).push(W);return}if(k&&t(this,f)[t(this,n)].type===re){M&&(W.undo=t(this,f)[t(this,n)].undo),t(this,f)[t(this,n)]=W;return}const G=t(this,n)+1;G===t(this,i)?t(this,f).splice(0,1):(ie(this,n,G),G<t(this,f).length&&t(this,f).splice(G)),t(this,f).push(W)}stopUndoAccumulation(){t(this,n)!==-1&&(t(this,f)[t(this,n)].type=NaN)}undo(){t(this,n)!==-1&&(ie(this,b,!0),t(this,f)[t(this,n)].undo(),ie(this,b,!1),ie(this,n,t(this,n)-1))}redo(){t(this,n)<t(this,f).length-1&&(ie(this,n,t(this,n)+1),ie(this,b,!0),t(this,f)[t(this,n)].cmd(),ie(this,b,!1))}hasSomethingToUndo(){return t(this,n)!==-1}hasSomethingToRedo(){return t(this,n)<t(this,f).length-1}destroy(){ie(this,f,null)}}f=new WeakMap,b=new WeakMap,i=new WeakMap,n=new WeakMap,z.CommandManager=a;class l{constructor(_){R(this,u);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:K}=N.FeatureTest.platform;for(const[ue,re,k={}]of _)for(const M of ue){const W=M.startsWith("mac+");K&&W?(this.callbacks.set(M.slice(4),{callback:re,options:k}),this.allKeys.add(M.split("+").at(-1))):!K&&!W&&(this.callbacks.set(M,{callback:re,options:k}),this.allKeys.add(M.split("+").at(-1)))}}exec(_,K){if(!this.allKeys.has(K.key))return;const ue=this.callbacks.get(D(this,u,on).call(this,K));if(!ue)return;const{callback:re,options:{bubbles:k=!1,args:M=[],checker:W=null}}=ue;W&&!W(_,K)||(re.bind(_,...M)(),k||(K.stopPropagation(),K.preventDefault()))}}u=new WeakSet,on=function(_){_.altKey&&this.buffer.push("alt"),_.ctrlKey&&this.buffer.push("ctrl"),_.metaKey&&this.buffer.push("meta"),_.shiftKey&&this.buffer.push("shift"),this.buffer.push(_.key);const K=this.buffer.join("+");return this.buffer.length=0,K},z.KeyboardManager=l;const o=class{get _colors(){const _=new Map([["CanvasText",null],["Canvas",null]]);return(0,Z.getColorValues)(_),(0,N.shadow)(this,"_colors",_)}convert(_){const K=(0,Z.getRGB)(_);if(!window.matchMedia("(forced-colors: active)").matches)return K;for(const[ue,re]of this._colors)if(re.every((k,M)=>k===K[M]))return o._colorsMapping.get(ue);return K}getHexCode(_){const K=this._colors.get(_);return K?N.Util.makeHexColor(...K):_}};let L=o;$e(L,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]])),z.ColorManager=L;const se=class{constructor(_,K,ue,re){R(this,Te);R(this,Se);R(this,ae);R(this,le);R(this,Ce);R(this,Ne);R(this,Ve);R(this,We);R(this,Pe);R(this,H);R(this,Q);R(this,h,null);R(this,g,new Map);R(this,x,new Map);R(this,j,null);R(this,V,new a);R(this,E,0);R(this,O,new Set);R(this,y,null);R(this,B,new Set);R(this,$,null);R(this,I,null);R(this,ce,new T);R(this,we,!1);R(this,q,N.AnnotationEditorType.NONE);R(this,P,new Set);R(this,s,null);R(this,p,this.copy.bind(this));R(this,F,this.cut.bind(this));R(this,U,this.paste.bind(this));R(this,X,this.keydown.bind(this));R(this,Y,this.onEditingAction.bind(this));R(this,ee,this.onPageChanging.bind(this));R(this,_e,this.onScaleChanging.bind(this));R(this,pe,this.onRotationChanging.bind(this));R(this,ne,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});R(this,de,[0,0]);R(this,ye,null);R(this,me,null);ie(this,me,_),ie(this,$,K),t(this,$)._on("editingaction",t(this,Y)),t(this,$)._on("pagechanging",t(this,ee)),t(this,$)._on("scalechanging",t(this,_e)),t(this,$)._on("rotationchanging",t(this,pe)),ie(this,j,ue.annotationStorage),ie(this,I,ue.filterFactory),ie(this,s,re),this.viewParameters={realScale:Z.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}static get _keyboardManager(){const _=se.prototype,K=k=>{const{activeElement:M}=document;return M&&t(k,me).contains(M)&&k.hasSomethingToControl()},ue=this.TRANSLATE_SMALL,re=this.TRANSLATE_BIG;return(0,N.shadow)(this,"_keyboardManager",new l([[["ctrl+a","mac+meta+a"],_.selectAll],[["ctrl+z","mac+meta+z"],_.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],_.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],_.delete],[["Escape","mac+Escape"],_.unselectAll],[["ArrowLeft","mac+ArrowLeft"],_.translateSelectedEditors,{args:[-ue,0],checker:K}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],_.translateSelectedEditors,{args:[-re,0],checker:K}],[["ArrowRight","mac+ArrowRight"],_.translateSelectedEditors,{args:[ue,0],checker:K}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],_.translateSelectedEditors,{args:[re,0],checker:K}],[["ArrowUp","mac+ArrowUp"],_.translateSelectedEditors,{args:[0,-ue],checker:K}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],_.translateSelectedEditors,{args:[0,-re],checker:K}],[["ArrowDown","mac+ArrowDown"],_.translateSelectedEditors,{args:[0,ue],checker:K}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],_.translateSelectedEditors,{args:[0,re],checker:K}]]))}destroy(){D(this,Se,Zt).call(this),t(this,$)._off("editingaction",t(this,Y)),t(this,$)._off("pagechanging",t(this,ee)),t(this,$)._off("scalechanging",t(this,_e)),t(this,$)._off("rotationchanging",t(this,pe));for(const _ of t(this,x).values())_.destroy();t(this,x).clear(),t(this,g).clear(),t(this,B).clear(),ie(this,h,null),t(this,P).clear(),t(this,V).destroy()}get hcmFilter(){return(0,N.shadow)(this,"hcmFilter",t(this,s)?t(this,I).addHCMFilter(t(this,s).foreground,t(this,s).background):"none")}onPageChanging({pageNumber:_}){ie(this,E,_-1)}focusMainContainer(){t(this,me).focus()}addShouldRescale(_){t(this,B).add(_)}removeShouldRescale(_){t(this,B).delete(_)}onScaleChanging({scale:_}){this.commitOrRemove(),this.viewParameters.realScale=_*Z.PixelsPerInch.PDF_TO_CSS_UNITS;for(const K of t(this,B))K.onScaleChanging()}onRotationChanging({pagesRotation:_}){this.commitOrRemove(),this.viewParameters.rotation=_}addToAnnotationStorage(_){!_.isEmpty()&&t(this,j)&&!t(this,j).has(_.id)&&t(this,j).setValue(_.id,_)}copy(_){if(_.preventDefault(),t(this,h)&&t(this,h).commitOrRemove(),!this.hasSelection)return;const K=[];for(const ue of t(this,P)){const re=ue.serialize(!0);re&&K.push(re)}K.length!==0&&_.clipboardData.setData("application/pdfjs",JSON.stringify(K))}cut(_){this.copy(_),this.delete()}paste(_){_.preventDefault();let K=_.clipboardData.getData("application/pdfjs");if(!K)return;try{K=JSON.parse(K)}catch(re){(0,N.warn)(`paste: "${re.message}".`);return}if(!Array.isArray(K))return;this.unselectAll();const ue=this.currentLayer;try{const re=[];for(const W of K){const G=ue.deserialize(W);if(!G)return;re.push(G)}const k=()=>{for(const W of re)D(this,Pe,Qt).call(this,W);D(this,Q,Jt).call(this,re)},M=()=>{for(const W of re)W.remove()};this.addCommands({cmd:k,undo:M,mustExec:!0})}catch(re){(0,N.warn)(`paste: "${re.message}".`)}}keydown(_){var K;(K=this.getActive())!=null&&K.shouldGetKeyboardEvents()||se._keyboardManager.exec(this,_)}onEditingAction(_){["undo","redo","delete","selectAll"].includes(_.name)&&this[_.name]()}setEditingState(_){_?(D(this,Te,ln).call(this),D(this,ae,dn).call(this),D(this,Ce,nt).call(this,{isEditing:t(this,q)!==N.AnnotationEditorType.NONE,isEmpty:D(this,H,mt).call(this),hasSomethingToUndo:t(this,V).hasSomethingToUndo(),hasSomethingToRedo:t(this,V).hasSomethingToRedo(),hasSelectedEditor:!1})):(D(this,Se,Zt).call(this),D(this,le,cn).call(this),D(this,Ce,nt).call(this,{isEditing:!1}))}registerEditorTypes(_){if(!t(this,y)){ie(this,y,_);for(const K of t(this,y))D(this,Ne,gt).call(this,K.defaultPropertiesToUpdate)}}getId(){return t(this,ce).getId()}get currentLayer(){return t(this,x).get(t(this,E))}get currentPageIndex(){return t(this,E)}addLayer(_){t(this,x).set(_.pageIndex,_),t(this,we)?_.enable():_.disable()}removeLayer(_){t(this,x).delete(_.pageIndex)}updateMode(_,K=null){if(ie(this,q,_),_===N.AnnotationEditorType.NONE){this.setEditingState(!1),D(this,We,un).call(this);return}this.setEditingState(!0),D(this,Ve,hn).call(this);for(const ue of t(this,x).values())ue.updateMode(_);if(K){for(const ue of t(this,g).values())if(ue.annotationElementId===K){this.setSelected(ue),ue.enterInEditMode();break}}}updateToolbar(_){_!==t(this,q)&&t(this,$).dispatch("switchannotationeditormode",{source:this,mode:_})}updateParams(_,K){if(t(this,y)){for(const ue of t(this,P))ue.updateParams(_,K);for(const ue of t(this,y))ue.updateDefaultParams(_,K)}}getEditors(_){const K=[];for(const ue of t(this,g).values())ue.pageIndex===_&&K.push(ue);return K}getEditor(_){return t(this,g).get(_)}addEditor(_){t(this,g).set(_.id,_)}removeEditor(_){var K;t(this,g).delete(_.id),this.unselect(_),(!_.annotationElementId||!t(this,O).has(_.annotationElementId))&&((K=t(this,j))==null||K.remove(_.id))}addDeletedAnnotationElement(_){t(this,O).add(_.annotationElementId),_.deleted=!0}isDeletedAnnotationElement(_){return t(this,O).has(_)}removeDeletedAnnotationElement(_){t(this,O).delete(_.annotationElementId),_.deleted=!1}setActiveEditor(_){t(this,h)!==_&&(ie(this,h,_),_&&D(this,Ne,gt).call(this,_.propertiesToUpdate))}toggleSelected(_){if(t(this,P).has(_)){t(this,P).delete(_),_.unselect(),D(this,Ce,nt).call(this,{hasSelectedEditor:this.hasSelection});return}t(this,P).add(_),_.select(),D(this,Ne,gt).call(this,_.propertiesToUpdate),D(this,Ce,nt).call(this,{hasSelectedEditor:!0})}setSelected(_){for(const K of t(this,P))K!==_&&K.unselect();t(this,P).clear(),t(this,P).add(_),_.select(),D(this,Ne,gt).call(this,_.propertiesToUpdate),D(this,Ce,nt).call(this,{hasSelectedEditor:!0})}isSelected(_){return t(this,P).has(_)}unselect(_){_.unselect(),t(this,P).delete(_),D(this,Ce,nt).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return t(this,P).size!==0}stopUndoAccumulation(){t(this,V).stopUndoAccumulation()}undo(){t(this,V).undo(),D(this,Ce,nt).call(this,{hasSomethingToUndo:t(this,V).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:D(this,H,mt).call(this)})}redo(){t(this,V).redo(),D(this,Ce,nt).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:t(this,V).hasSomethingToRedo(),isEmpty:D(this,H,mt).call(this)})}addCommands(_){t(this,V).add(_),D(this,Ce,nt).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:D(this,H,mt).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const _=[...t(this,P)],K=()=>{for(const re of _)re.remove()},ue=()=>{for(const re of _)D(this,Pe,Qt).call(this,re)};this.addCommands({cmd:K,undo:ue,mustExec:!0})}commitOrRemove(){var _;(_=t(this,h))==null||_.commitOrRemove()}hasSomethingToControl(){return t(this,h)||this.hasSelection}selectAll(){for(const _ of t(this,P))_.commit();D(this,Q,Jt).call(this,t(this,g).values())}unselectAll(){if(t(this,h)){t(this,h).commitOrRemove();return}if(this.hasSelection){for(const _ of t(this,P))_.unselect();t(this,P).clear(),D(this,Ce,nt).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(_,K,ue=!1){if(ue||this.commitOrRemove(),!this.hasSelection)return;t(this,de)[0]+=_,t(this,de)[1]+=K;const[re,k]=t(this,de),M=[...t(this,P)],W=1e3;t(this,ye)&&clearTimeout(t(this,ye)),ie(this,ye,setTimeout(()=>{ie(this,ye,null),t(this,de)[0]=t(this,de)[1]=0,this.addCommands({cmd:()=>{for(const G of M)t(this,g).has(G.id)&&G.translateInPage(re,k)},undo:()=>{for(const G of M)t(this,g).has(G.id)&&G.translateInPage(-re,-k)},mustExec:!1})},W));for(const G of M)G.translateInPage(_,K)}isActive(_){return t(this,h)===_}getActive(){return t(this,h)}getMode(){return t(this,q)}get imageManager(){return(0,N.shadow)(this,"imageManager",new C)}};let S=se;h=new WeakMap,g=new WeakMap,x=new WeakMap,j=new WeakMap,V=new WeakMap,E=new WeakMap,O=new WeakMap,y=new WeakMap,B=new WeakMap,$=new WeakMap,I=new WeakMap,ce=new WeakMap,we=new WeakMap,q=new WeakMap,P=new WeakMap,s=new WeakMap,p=new WeakMap,F=new WeakMap,U=new WeakMap,X=new WeakMap,Y=new WeakMap,ee=new WeakMap,_e=new WeakMap,pe=new WeakMap,ne=new WeakMap,de=new WeakMap,ye=new WeakMap,me=new WeakMap,Te=new WeakSet,ln=function(){window.addEventListener("keydown",t(this,X),{capture:!0})},Se=new WeakSet,Zt=function(){window.removeEventListener("keydown",t(this,X),{capture:!0})},ae=new WeakSet,dn=function(){document.addEventListener("copy",t(this,p)),document.addEventListener("cut",t(this,F)),document.addEventListener("paste",t(this,U))},le=new WeakSet,cn=function(){document.removeEventListener("copy",t(this,p)),document.removeEventListener("cut",t(this,F)),document.removeEventListener("paste",t(this,U))},Ce=new WeakSet,nt=function(_){Object.entries(_).some(([ue,re])=>t(this,ne)[ue]!==re)&&t(this,$).dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(t(this,ne),_)})},Ne=new WeakSet,gt=function(_){t(this,$).dispatch("annotationeditorparamschanged",{source:this,details:_})},Ve=new WeakSet,hn=function(){if(!t(this,we)){ie(this,we,!0);for(const _ of t(this,x).values())_.enable()}},We=new WeakSet,un=function(){if(this.unselectAll(),t(this,we)){ie(this,we,!1);for(const _ of t(this,x).values())_.disable()}},Pe=new WeakSet,Qt=function(_){const K=t(this,x).get(_.pageIndex);K?K.addOrRebuild(_):this.addEditor(_)},H=new WeakSet,mt=function(){if(t(this,g).size===0)return!0;if(t(this,g).size===1)for(const _ of t(this,g).values())return _.isEmpty();return!1},Q=new WeakSet,Jt=function(_){t(this,P).clear();for(const K of _)K.isEmpty()||(t(this,P).add(K),K.select());D(this,Ce,nt).call(this,{hasSelectedEditor:!0})},$e(S,"TRANSLATE_SMALL",1),$e(S,"TRANSLATE_BIG",10),z.AnnotationEditorUIManager=S},(xe,z,Ae)=>{var y,B,$,I,ce,we,q,P,s,p,F,U,lt,Y,dt,_e,ei,ne,xt,ye,Rt,Te,bt,Se,_t;Object.defineProperty(z,"__esModule",{value:!0}),z.StatTimer=z.RenderingCancelledException=z.PixelsPerInch=z.PageViewport=z.PDFDateString=z.DOMStandardFontDataFactory=z.DOMSVGFactory=z.DOMFilterFactory=z.DOMCanvasFactory=z.DOMCMapReaderFactory=z.AnnotationPrefix=void 0,z.deprecated=u,z.getColorValues=x,z.getCurrentTransform=j,z.getCurrentTransformInverse=V,z.getFilenameFromUrl=v,z.getPdfFilenameFromUrl=f,z.getRGB=g,z.getXfaPageViewport=h,z.isDataScheme=d,z.isPdfFile=m,z.isValidFetchUrl=i,z.loadScript=n,z.setLayerDimensions=E;var N=Ae(7),Z=Ae(1);const Ee="http://www.w3.org/2000/svg",oe="pdfjs_internal_id_";z.AnnotationPrefix=oe;const O=class{};let T=O;$e(T,"CSS",96),$e(T,"PDF",72),$e(T,"PDF_TO_CSS_UNITS",O.CSS/O.PDF),z.PixelsPerInch=T;class C extends N.BaseFilterFactory{constructor({docId:le,ownerDocument:fe=globalThis.document}={}){super();R(this,U);R(this,Y);R(this,_e);R(this,ne);R(this,ye);R(this,Te);R(this,Se);R(this,y,void 0);R(this,B,void 0);R(this,$,void 0);R(this,I,void 0);R(this,ce,void 0);R(this,we,void 0);R(this,q,void 0);R(this,P,void 0);R(this,s,void 0);R(this,p,void 0);R(this,F,0);ie(this,$,le),ie(this,I,fe)}addFilter(le){if(!le)return"none";let fe=t(this,U,lt).get(le);if(fe)return fe;let Ce,Me,Ne,Ue;if(le.length===1){const ze=le[0],Pe=new Array(256);for(let A=0;A<256;A++)Pe[A]=ze[A]/255;Ue=Ce=Me=Ne=Pe.join(",")}else{const[ze,Pe,A]=le,H=new Array(256),be=new Array(256),Q=new Array(256);for(let he=0;he<256;he++)H[he]=ze[he]/255,be[he]=Pe[he]/255,Q[he]=A[he]/255;Ce=H.join(","),Me=be.join(","),Ne=Q.join(","),Ue=`${Ce}${Me}${Ne}`}if(fe=t(this,U,lt).get(Ue),fe)return t(this,U,lt).set(le,fe),fe;const Ve=`g_${t(this,$)}_transfer_map_${it(this,F)._++}`,Ge=`url(#${Ve})`;t(this,U,lt).set(le,Ge),t(this,U,lt).set(Ue,Ge);const We=D(this,ne,xt).call(this,Ve);return D(this,Te,bt).call(this,Ce,Me,Ne,We),Ge}addHCMFilter(le,fe){var Pe;const Ce=`${le}-${fe}`;if(t(this,we)===Ce)return t(this,q);if(ie(this,we,Ce),ie(this,q,"none"),(Pe=t(this,ce))==null||Pe.remove(),!le||!fe)return t(this,q);const Me=D(this,Se,_t).call(this,le);le=Z.Util.makeHexColor(...Me);const Ne=D(this,Se,_t).call(this,fe);if(fe=Z.Util.makeHexColor(...Ne),t(this,Y,dt).style.color="",le==="#000000"&&fe==="#ffffff"||le===fe)return t(this,q);const Ue=new Array(256);for(let A=0;A<=255;A++){const H=A/255;Ue[A]=H<=.03928?H/12.92:((H+.055)/1.055)**2.4}const Ve=Ue.join(","),Ge=`g_${t(this,$)}_hcm_filter`,We=ie(this,P,D(this,ne,xt).call(this,Ge));D(this,Te,bt).call(this,Ve,Ve,Ve,We),D(this,_e,ei).call(this,We);const ze=(A,H)=>{const be=Me[A]/255,Q=Ne[A]/255,he=new Array(H+1);for(let se=0;se<=H;se++)he[se]=be+se/H*(Q-be);return he.join(",")};return D(this,Te,bt).call(this,ze(0,5),ze(1,5),ze(2,5),We),ie(this,q,`url(#${Ge})`),t(this,q)}addHighlightHCMFilter(le,fe,Ce,Me){var Q;const Ne=`${le}-${fe}-${Ce}-${Me}`;if(t(this,s)===Ne)return t(this,p);if(ie(this,s,Ne),ie(this,p,"none"),(Q=t(this,P))==null||Q.remove(),!le||!fe)return t(this,p);const[Ue,Ve]=[le,fe].map(D(this,Se,_t).bind(this));let Ge=Math.round(.2126*Ue[0]+.7152*Ue[1]+.0722*Ue[2]),We=Math.round(.2126*Ve[0]+.7152*Ve[1]+.0722*Ve[2]),[ze,Pe]=[Ce,Me].map(D(this,Se,_t).bind(this));We<Ge&&([Ge,We,ze,Pe]=[We,Ge,Pe,ze]),t(this,Y,dt).style.color="";const A=(he,se,ge)=>{const _=new Array(256),K=(We-Ge)/ge,ue=he/255,re=(se-he)/(255*ge);let k=0;for(let M=0;M<=ge;M++){const W=Math.round(Ge+M*K),G=ue+M*re;for(let te=k;te<=W;te++)_[te]=G;k=W+1}for(let M=k;M<256;M++)_[M]=_[k-1];return _.join(",")},H=`g_${t(this,$)}_hcm_highlight_filter`,be=ie(this,P,D(this,ne,xt).call(this,H));return D(this,_e,ei).call(this,be),D(this,Te,bt).call(this,A(ze[0],Pe[0],5),A(ze[1],Pe[1],5),A(ze[2],Pe[2],5),be),ie(this,p,`url(#${H})`),t(this,p)}destroy(le=!1){le&&(t(this,q)||t(this,p))||(t(this,B)&&(t(this,B).parentNode.parentNode.remove(),ie(this,B,null)),t(this,y)&&(t(this,y).clear(),ie(this,y,null)),ie(this,F,0))}}y=new WeakMap,B=new WeakMap,$=new WeakMap,I=new WeakMap,ce=new WeakMap,we=new WeakMap,q=new WeakMap,P=new WeakMap,s=new WeakMap,p=new WeakMap,F=new WeakMap,U=new WeakSet,lt=function(){return t(this,y)||ie(this,y,new Map)},Y=new WeakSet,dt=function(){if(!t(this,B)){const le=t(this,I).createElement("div"),{style:fe}=le;fe.visibility="hidden",fe.contain="strict",fe.width=fe.height=0,fe.position="absolute",fe.top=fe.left=0,fe.zIndex=-1;const Ce=t(this,I).createElementNS(Ee,"svg");Ce.setAttribute("width",0),Ce.setAttribute("height",0),ie(this,B,t(this,I).createElementNS(Ee,"defs")),le.append(Ce),Ce.append(t(this,B)),t(this,I).body.append(le)}return t(this,B)},_e=new WeakSet,ei=function(le){const fe=t(this,I).createElementNS(Ee,"feColorMatrix");fe.setAttribute("type","matrix"),fe.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),le.append(fe)},ne=new WeakSet,xt=function(le){const fe=t(this,I).createElementNS(Ee,"filter");return fe.setAttribute("color-interpolation-filters","sRGB"),fe.setAttribute("id",le),t(this,Y,dt).append(fe),fe},ye=new WeakSet,Rt=function(le,fe,Ce){const Me=t(this,I).createElementNS(Ee,fe);Me.setAttribute("type","discrete"),Me.setAttribute("tableValues",Ce),le.append(Me)},Te=new WeakSet,bt=function(le,fe,Ce,Me){const Ne=t(this,I).createElementNS(Ee,"feComponentTransfer");Me.append(Ne),D(this,ye,Rt).call(this,Ne,"feFuncR",le),D(this,ye,Rt).call(this,Ne,"feFuncG",fe),D(this,ye,Rt).call(this,Ne,"feFuncB",Ce)},Se=new WeakSet,_t=function(le){return t(this,Y,dt).style.color=le,g(getComputedStyle(t(this,Y,dt)).getPropertyValue("color"))},z.DOMFilterFactory=C;class a extends N.BaseCanvasFactory{constructor({ownerDocument:J=globalThis.document}={}){super(),this._document=J}_createCanvas(J,le){const fe=this._document.createElement("canvas");return fe.width=J,fe.height=le,fe}}z.DOMCanvasFactory=a;async function l(ae,J=!1){if(i(ae,document.baseURI)){const le=await fetch(ae);if(!le.ok)throw new Error(le.statusText);return J?new Uint8Array(await le.arrayBuffer()):(0,Z.stringToBytes)(await le.text())}return new Promise((le,fe)=>{const Ce=new XMLHttpRequest;Ce.open("GET",ae,!0),J&&(Ce.responseType="arraybuffer"),Ce.onreadystatechange=()=>{if(Ce.readyState===XMLHttpRequest.DONE){if(Ce.status===200||Ce.status===0){let Me;if(J&&Ce.response?Me=new Uint8Array(Ce.response):!J&&Ce.responseText&&(Me=(0,Z.stringToBytes)(Ce.responseText)),Me){le(Me);return}}fe(new Error(Ce.statusText))}},Ce.send(null)})}class L extends N.BaseCMapReaderFactory{_fetchData(J,le){return l(J,this.isCompressed).then(fe=>({cMapData:fe,compressionType:le}))}}z.DOMCMapReaderFactory=L;class S extends N.BaseStandardFontDataFactory{_fetchData(J){return l(J,!0)}}z.DOMStandardFontDataFactory=S;class w extends N.BaseSVGFactory{_createSVG(J){return document.createElementNS(Ee,J)}}z.DOMSVGFactory=w;class e{constructor({viewBox:J,scale:le,rotation:fe,offsetX:Ce=0,offsetY:Me=0,dontFlip:Ne=!1}){this.viewBox=J,this.scale=le,this.rotation=fe,this.offsetX=Ce,this.offsetY=Me;const Ue=(J[2]+J[0])/2,Ve=(J[3]+J[1])/2;let Ge,We,ze,Pe;switch(fe%=360,fe<0&&(fe+=360),fe){case 180:Ge=-1,We=0,ze=0,Pe=1;break;case 90:Ge=0,We=1,ze=1,Pe=0;break;case 270:Ge=0,We=-1,ze=-1,Pe=0;break;case 0:Ge=1,We=0,ze=0,Pe=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}Ne&&(ze=-ze,Pe=-Pe);let A,H,be,Q;Ge===0?(A=Math.abs(Ve-J[1])*le+Ce,H=Math.abs(Ue-J[0])*le+Me,be=(J[3]-J[1])*le,Q=(J[2]-J[0])*le):(A=Math.abs(Ue-J[0])*le+Ce,H=Math.abs(Ve-J[1])*le+Me,be=(J[2]-J[0])*le,Q=(J[3]-J[1])*le),this.transform=[Ge*le,We*le,ze*le,Pe*le,A-Ge*le*Ue-ze*le*Ve,H-We*le*Ue-Pe*le*Ve],this.width=be,this.height=Q}get rawDims(){const{viewBox:J}=this;return(0,Z.shadow)(this,"rawDims",{pageWidth:J[2]-J[0],pageHeight:J[3]-J[1],pageX:J[0],pageY:J[1]})}clone({scale:J=this.scale,rotation:le=this.rotation,offsetX:fe=this.offsetX,offsetY:Ce=this.offsetY,dontFlip:Me=!1}={}){return new e({viewBox:this.viewBox.slice(),scale:J,rotation:le,offsetX:fe,offsetY:Ce,dontFlip:Me})}convertToViewportPoint(J,le){return Z.Util.applyTransform([J,le],this.transform)}convertToViewportRectangle(J){const le=Z.Util.applyTransform([J[0],J[1]],this.transform),fe=Z.Util.applyTransform([J[2],J[3]],this.transform);return[le[0],le[1],fe[0],fe[1]]}convertToPdfPoint(J,le){return Z.Util.applyInverseTransform([J,le],this.transform)}}z.PageViewport=e;class r extends Z.BaseException{constructor(J,le=0){super(J,"RenderingCancelledException"),this.extraDelay=le}}z.RenderingCancelledException=r;function d(ae){const J=ae.length;let le=0;for(;le<J&&ae[le].trim()==="";)le++;return ae.substring(le,le+5).toLowerCase()==="data:"}function m(ae){return typeof ae=="string"&&/\.pdf$/i.test(ae)}function v(ae,J=!1){return J||([ae]=ae.split(/[#?]/,1)),ae.substring(ae.lastIndexOf("/")+1)}function f(ae,J="document.pdf"){if(typeof ae!="string")return J;if(d(ae))return(0,Z.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),J;const le=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,fe=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,Ce=le.exec(ae);let Me=fe.exec(Ce[1])||fe.exec(Ce[2])||fe.exec(Ce[3]);if(Me&&(Me=Me[0],Me.includes("%")))try{Me=fe.exec(decodeURIComponent(Me))[0]}catch{}return Me||J}class b{constructor(){$e(this,"started",Object.create(null));$e(this,"times",[])}time(J){J in this.started&&(0,Z.warn)(`Timer is already running for ${J}`),this.started[J]=Date.now()}timeEnd(J){J in this.started||(0,Z.warn)(`Timer has not been started for ${J}`),this.times.push({name:J,start:this.started[J],end:Date.now()}),delete this.started[J]}toString(){const J=[];let le=0;for(const{name:fe}of this.times)le=Math.max(fe.length,le);for(const{name:fe,start:Ce,end:Me}of this.times)J.push(`${fe.padEnd(le)} ${Me-Ce}ms
`);return J.join("")}}z.StatTimer=b;function i(ae,J){try{const{protocol:le}=J?new URL(ae,J):new URL(ae);return le==="http:"||le==="https:"}catch{return!1}}function n(ae,J=!1){return new Promise((le,fe)=>{const Ce=document.createElement("script");Ce.src=ae,Ce.onload=function(Me){J&&Ce.remove(),le(Me)},Ce.onerror=function(){fe(new Error(`Cannot load script at: ${Ce.src}`))},(document.head||document.documentElement).append(Ce)})}function u(ae){console.log("Deprecated API usage: "+ae)}let c;class o{static toDateObject(J){if(!J||typeof J!="string")return null;c||(c=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const le=c.exec(J);if(!le)return null;const fe=parseInt(le[1],10);let Ce=parseInt(le[2],10);Ce=Ce>=1&&Ce<=12?Ce-1:0;let Me=parseInt(le[3],10);Me=Me>=1&&Me<=31?Me:1;let Ne=parseInt(le[4],10);Ne=Ne>=0&&Ne<=23?Ne:0;let Ue=parseInt(le[5],10);Ue=Ue>=0&&Ue<=59?Ue:0;let Ve=parseInt(le[6],10);Ve=Ve>=0&&Ve<=59?Ve:0;const Ge=le[7]||"Z";let We=parseInt(le[8],10);We=We>=0&&We<=23?We:0;let ze=parseInt(le[9],10)||0;return ze=ze>=0&&ze<=59?ze:0,Ge==="-"?(Ne+=We,Ue+=ze):Ge==="+"&&(Ne-=We,Ue-=ze),new Date(Date.UTC(fe,Ce,Me,Ne,Ue,Ve))}}z.PDFDateString=o;function h(ae,{scale:J=1,rotation:le=0}){const{width:fe,height:Ce}=ae.attributes.style,Me=[0,0,parseInt(fe),parseInt(Ce)];return new e({viewBox:Me,scale:J,rotation:le})}function g(ae){if(ae.startsWith("#")){const J=parseInt(ae.slice(1),16);return[(J&16711680)>>16,(J&65280)>>8,J&255]}return ae.startsWith("rgb(")?ae.slice(4,-1).split(",").map(J=>parseInt(J)):ae.startsWith("rgba(")?ae.slice(5,-1).split(",").map(J=>parseInt(J)).slice(0,3):((0,Z.warn)(`Not a valid color format: "${ae}"`),[0,0,0])}function x(ae){const J=document.createElement("span");J.style.visibility="hidden",document.body.append(J);for(const le of ae.keys()){J.style.color=le;const fe=window.getComputedStyle(J).color;ae.set(le,g(fe))}J.remove()}function j(ae){const{a:J,b:le,c:fe,d:Ce,e:Me,f:Ne}=ae.getTransform();return[J,le,fe,Ce,Me,Ne]}function V(ae){const{a:J,b:le,c:fe,d:Ce,e:Me,f:Ne}=ae.getTransform().invertSelf();return[J,le,fe,Ce,Me,Ne]}function E(ae,J,le=!1,fe=!0){if(J instanceof e){const{pageWidth:Ce,pageHeight:Me}=J.rawDims,{style:Ne}=ae,Ue=`calc(var(--scale-factor) * ${Ce}px)`,Ve=`calc(var(--scale-factor) * ${Me}px)`;!le||J.rotation%180===0?(Ne.width=Ue,Ne.height=Ve):(Ne.width=Ve,Ne.height=Ue)}fe&&ae.setAttribute("data-main-rotation",J.rotation)}},(xe,z,Ae)=>{Object.defineProperty(z,"__esModule",{value:!0}),z.BaseStandardFontDataFactory=z.BaseSVGFactory=z.BaseFilterFactory=z.BaseCanvasFactory=z.BaseCMapReaderFactory=void 0;var N=Ae(1);class Z{constructor(){this.constructor===Z&&(0,N.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(l){return"none"}addHCMFilter(l,L){return"none"}addHighlightHCMFilter(l,L,S,w){return"none"}destroy(l=!1){}}z.BaseFilterFactory=Z;class Ee{constructor(){this.constructor===Ee&&(0,N.unreachable)("Cannot initialize BaseCanvasFactory.")}create(l,L){if(l<=0||L<=0)throw new Error("Invalid canvas size");const S=this._createCanvas(l,L);return{canvas:S,context:S.getContext("2d")}}reset(l,L,S){if(!l.canvas)throw new Error("Canvas is not specified");if(L<=0||S<=0)throw new Error("Invalid canvas size");l.canvas.width=L,l.canvas.height=S}destroy(l){if(!l.canvas)throw new Error("Canvas is not specified");l.canvas.width=0,l.canvas.height=0,l.canvas=null,l.context=null}_createCanvas(l,L){(0,N.unreachable)("Abstract method `_createCanvas` called.")}}z.BaseCanvasFactory=Ee;class oe{constructor({baseUrl:l=null,isCompressed:L=!0}){this.constructor===oe&&(0,N.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=l,this.isCompressed=L}async fetch({name:l}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!l)throw new Error("CMap name must be specified.");const L=this.baseUrl+l+(this.isCompressed?".bcmap":""),S=this.isCompressed?N.CMapCompressionType.BINARY:N.CMapCompressionType.NONE;return this._fetchData(L,S).catch(w=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${L}`)})}_fetchData(l,L){(0,N.unreachable)("Abstract method `_fetchData` called.")}}z.BaseCMapReaderFactory=oe;class T{constructor({baseUrl:l=null}){this.constructor===T&&(0,N.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=l}async fetch({filename:l}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!l)throw new Error("Font filename must be specified.");const L=`${this.baseUrl}${l}`;return this._fetchData(L).catch(S=>{throw new Error(`Unable to load font data at: ${L}`)})}_fetchData(l){(0,N.unreachable)("Abstract method `_fetchData` called.")}}z.BaseStandardFontDataFactory=T;class C{constructor(){this.constructor===C&&(0,N.unreachable)("Cannot initialize BaseSVGFactory.")}create(l,L,S=!1){if(l<=0||L<=0)throw new Error("Invalid SVG dimensions");const w=this._createSVG("svg:svg");return w.setAttribute("version","1.1"),S||(w.setAttribute("width",`${l}px`),w.setAttribute("height",`${L}px`)),w.setAttribute("preserveAspectRatio","none"),w.setAttribute("viewBox",`0 0 ${l} ${L}`),w}createElement(l){if(typeof l!="string")throw new Error("Invalid SVG element type");return this._createSVG(l)}_createSVG(l){(0,N.unreachable)("Abstract method `_createSVG` called.")}}z.BaseSVGFactory=C},(xe,z,Ae)=>{Object.defineProperty(z,"__esModule",{value:!0}),z.MurmurHash3_64=void 0;var N=Ae(1);const Z=3285377520,Ee=4294901760,oe=65535;class T{constructor(a){this.h1=a?a&4294967295:Z,this.h2=a?a&4294967295:Z}update(a){let l,L;if(typeof a=="string"){l=new Uint8Array(a.length*2),L=0;for(let u=0,c=a.length;u<c;u++){const o=a.charCodeAt(u);o<=255?l[L++]=o:(l[L++]=o>>>8,l[L++]=o&255)}}else if((0,N.isArrayBuffer)(a))l=a.slice(),L=l.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const S=L>>2,w=L-S*4,e=new Uint32Array(l.buffer,0,S);let r=0,d=0,m=this.h1,v=this.h2;const f=3432918353,b=461845907,i=f&oe,n=b&oe;for(let u=0;u<S;u++)u&1?(r=e[u],r=r*f&Ee|r*i&oe,r=r<<15|r>>>17,r=r*b&Ee|r*n&oe,m^=r,m=m<<13|m>>>19,m=m*5+3864292196):(d=e[u],d=d*f&Ee|d*i&oe,d=d<<15|d>>>17,d=d*b&Ee|d*n&oe,v^=d,v=v<<13|v>>>19,v=v*5+3864292196);switch(r=0,w){case 3:r^=l[S*4+2]<<16;case 2:r^=l[S*4+1]<<8;case 1:r^=l[S*4],r=r*f&Ee|r*i&oe,r=r<<15|r>>>17,r=r*b&Ee|r*n&oe,S&1?m^=r:v^=r}this.h1=m,this.h2=v}hexdigest(){let a=this.h1,l=this.h2;return a^=l>>>1,a=a*3981806797&Ee|a*36045&oe,l=l*4283543511&Ee|((l<<16|a>>>16)*2950163797&Ee)>>>16,a^=l>>>1,a=a*444984403&Ee|a*60499&oe,l=l*3301882366&Ee|((l<<16|a>>>16)*3120437893&Ee)>>>16,a^=l>>>1,(a>>>0).toString(16).padStart(8,"0")+(l>>>0).toString(16).padStart(8,"0")}}z.MurmurHash3_64=T},(xe,z,Ae)=>{var oe;Object.defineProperty(z,"__esModule",{value:!0}),z.FontLoader=z.FontFaceObject=void 0;var N=Ae(1);class Z{constructor({ownerDocument:C=globalThis.document,styleElement:a=null}){R(this,oe,new Set);this._document=C,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(C){this.nativeFontFaces.add(C),this._document.fonts.add(C)}removeNativeFontFace(C){this.nativeFontFaces.delete(C),this._document.fonts.delete(C)}insertRule(C){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const a=this.styleElement.sheet;a.insertRule(C,a.cssRules.length)}clear(){for(const C of this.nativeFontFaces)this._document.fonts.delete(C);this.nativeFontFaces.clear(),t(this,oe).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(C){if(!(!C||t(this,oe).has(C.loadedName))){if((0,N.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:a,src:l,style:L}=C,S=new FontFace(a,l,L);this.addNativeFontFace(S);try{await S.load(),t(this,oe).add(a)}catch{(0,N.warn)(`Cannot load system font: ${C.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(S)}return}(0,N.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(C){if(C.attached||C.missingFile&&!C.systemFontInfo)return;if(C.attached=!0,C.systemFontInfo){await this.loadSystemFont(C.systemFontInfo);return}if(this.isFontLoadingAPISupported){const l=C.createNativeFontFace();if(l){this.addNativeFontFace(l);try{await l.loaded}catch(L){throw(0,N.warn)(`Failed to load font '${l.family}': '${L}'.`),C.disableFontFace=!0,L}}return}const a=C.createFontFaceRule();if(a){if(this.insertRule(a),this.isSyncFontLoadingSupported)return;await new Promise(l=>{const L=this._queueLoadingCallback(l);this._prepareFontLoadEvent(C,L)})}}get isFontLoadingAPISupported(){var a;const C=!!((a=this._document)!=null&&a.fonts);return(0,N.shadow)(this,"isFontLoadingAPISupported",C)}get isSyncFontLoadingSupported(){let C=!1;return(N.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(C=!0),(0,N.shadow)(this,"isSyncFontLoadingSupported",C)}_queueLoadingCallback(C){function a(){for((0,N.assert)(!L.done,"completeRequest() cannot be called twice."),L.done=!0;l.length>0&&l[0].done;){const S=l.shift();setTimeout(S.callback,0)}}const{loadingRequests:l}=this,L={done:!1,complete:a,callback:C};return l.push(L),L}get _loadTestFont(){const C=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,N.shadow)(this,"_loadTestFont",C)}_prepareFontLoadEvent(C,a){function l(g,x){return g.charCodeAt(x)<<24|g.charCodeAt(x+1)<<16|g.charCodeAt(x+2)<<8|g.charCodeAt(x+3)&255}function L(g,x,j,V){const E=g.substring(0,x),O=g.substring(x+j);return E+V+O}let S,w;const e=this._document.createElement("canvas");e.width=1,e.height=1;const r=e.getContext("2d");let d=0;function m(g,x){if(++d>30){(0,N.warn)("Load test font never loaded."),x();return}if(r.font="30px "+g,r.fillText(".",0,20),r.getImageData(0,0,1,1).data[3]>0){x();return}setTimeout(m.bind(null,g,x))}const v=`lt${Date.now()}${this.loadTestFontId++}`;let f=this._loadTestFont;f=L(f,976,v.length,v);const i=16,n=1482184792;let u=l(f,i);for(S=0,w=v.length-3;S<w;S+=4)u=u-n+l(v,S)|0;S<v.length&&(u=u-n+l(v+"XXX",S)|0),f=L(f,i,4,(0,N.string32)(u));const c=`url(data:font/opentype;base64,${btoa(f)});`,o=`@font-face {font-family:"${v}";src:${c}}`;this.insertRule(o);const h=this._document.createElement("div");h.style.visibility="hidden",h.style.width=h.style.height="10px",h.style.position="absolute",h.style.top=h.style.left="0px";for(const g of[C.loadedName,v]){const x=this._document.createElement("span");x.textContent="Hi",x.style.fontFamily=g,h.append(x)}this._document.body.append(h),m(v,()=>{h.remove(),a.complete()})}}oe=new WeakMap,z.FontLoader=Z;class Ee{constructor(C,{isEvalSupported:a=!0,disableFontFace:l=!1,ignoreErrors:L=!1,inspectFont:S=null}){this.compiledGlyphs=Object.create(null);for(const w in C)this[w]=C[w];this.isEvalSupported=a!==!1,this.disableFontFace=l===!0,this.ignoreErrors=L===!0,this._inspectFont=S}createNativeFontFace(){var a;if(!this.data||this.disableFontFace)return null;let C;if(!this.cssFontInfo)C=new FontFace(this.loadedName,this.data,{});else{const l={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(l.style=`oblique ${this.cssFontInfo.italicAngle}deg`),C=new FontFace(this.cssFontInfo.fontFamily,this.data,l)}return(a=this._inspectFont)==null||a.call(this,this),C}createFontFaceRule(){var L;if(!this.data||this.disableFontFace)return null;const C=(0,N.bytesToString)(this.data),a=`url(data:${this.mimetype};base64,${btoa(C)});`;let l;if(!this.cssFontInfo)l=`@font-face {font-family:"${this.loadedName}";src:${a}}`;else{let S=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(S+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),l=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${S}src:${a}}`}return(L=this._inspectFont)==null||L.call(this,this,a),l}getPathGenerator(C,a){if(this.compiledGlyphs[a]!==void 0)return this.compiledGlyphs[a];let l;try{l=C.get(this.loadedName+"_path_"+a)}catch(L){if(!this.ignoreErrors)throw L;return(0,N.warn)(`getPathGenerator - ignoring character: "${L}".`),this.compiledGlyphs[a]=function(S,w){}}if(this.isEvalSupported&&N.FeatureTest.isEvalSupported){const L=[];for(const S of l){const w=S.args!==void 0?S.args.join(","):"";L.push("c.",S.cmd,"(",w,`);
`)}return this.compiledGlyphs[a]=new Function("c","size",L.join(""))}return this.compiledGlyphs[a]=function(L,S){for(const w of l)w.cmd==="scale"&&(w.args=[S,-S]),L[w.cmd].apply(L,w.args)}}}z.FontFaceObject=Ee},(xe,z,Ae)=>{Object.defineProperty(z,"__esModule",{value:!0}),z.NodeStandardFontDataFactory=z.NodeFilterFactory=z.NodeCanvasFactory=z.NodeCMapReaderFactory=void 0;var N=Ae(7);Ae(1);const Z=function(a){return new Promise((l,L)=>{require$$5.readFile(a,(w,e)=>{if(w||!e){L(new Error(w));return}l(new Uint8Array(e))})})};class Ee extends N.BaseFilterFactory{}z.NodeFilterFactory=Ee;class oe extends N.BaseCanvasFactory{_createCanvas(l,L){return require$$1.createCanvas(l,L)}}z.NodeCanvasFactory=oe;class T extends N.BaseCMapReaderFactory{_fetchData(l,L){return Z(l).then(S=>({cMapData:S,compressionType:L}))}}z.NodeCMapReaderFactory=T;class C extends N.BaseStandardFontDataFactory{_fetchData(l){return Z(l)}}z.NodeStandardFontDataFactory=C},(xe,z,Ae)=>{var B,ti,I,ii;Object.defineProperty(z,"__esModule",{value:!0}),z.CanvasGraphics=void 0;var N=Ae(1),Z=Ae(6),Ee=Ae(12),oe=Ae(13);const T=16,C=100,a=4096,l=15,L=10,S=1e3,w=16;function e(q,P){if(q._removeMirroring)throw new Error("Context is already forwarding operations.");q.__originalSave=q.save,q.__originalRestore=q.restore,q.__originalRotate=q.rotate,q.__originalScale=q.scale,q.__originalTranslate=q.translate,q.__originalTransform=q.transform,q.__originalSetTransform=q.setTransform,q.__originalResetTransform=q.resetTransform,q.__originalClip=q.clip,q.__originalMoveTo=q.moveTo,q.__originalLineTo=q.lineTo,q.__originalBezierCurveTo=q.bezierCurveTo,q.__originalRect=q.rect,q.__originalClosePath=q.closePath,q.__originalBeginPath=q.beginPath,q._removeMirroring=()=>{q.save=q.__originalSave,q.restore=q.__originalRestore,q.rotate=q.__originalRotate,q.scale=q.__originalScale,q.translate=q.__originalTranslate,q.transform=q.__originalTransform,q.setTransform=q.__originalSetTransform,q.resetTransform=q.__originalResetTransform,q.clip=q.__originalClip,q.moveTo=q.__originalMoveTo,q.lineTo=q.__originalLineTo,q.bezierCurveTo=q.__originalBezierCurveTo,q.rect=q.__originalRect,q.closePath=q.__originalClosePath,q.beginPath=q.__originalBeginPath,delete q._removeMirroring},q.save=function(){P.save(),this.__originalSave()},q.restore=function(){P.restore(),this.__originalRestore()},q.translate=function(p,F){P.translate(p,F),this.__originalTranslate(p,F)},q.scale=function(p,F){P.scale(p,F),this.__originalScale(p,F)},q.transform=function(p,F,U,X,Y,ee){P.transform(p,F,U,X,Y,ee),this.__originalTransform(p,F,U,X,Y,ee)},q.setTransform=function(p,F,U,X,Y,ee){P.setTransform(p,F,U,X,Y,ee),this.__originalSetTransform(p,F,U,X,Y,ee)},q.resetTransform=function(){P.resetTransform(),this.__originalResetTransform()},q.rotate=function(p){P.rotate(p),this.__originalRotate(p)},q.clip=function(p){P.clip(p),this.__originalClip(p)},q.moveTo=function(s,p){P.moveTo(s,p),this.__originalMoveTo(s,p)},q.lineTo=function(s,p){P.lineTo(s,p),this.__originalLineTo(s,p)},q.bezierCurveTo=function(s,p,F,U,X,Y){P.bezierCurveTo(s,p,F,U,X,Y),this.__originalBezierCurveTo(s,p,F,U,X,Y)},q.rect=function(s,p,F,U){P.rect(s,p,F,U),this.__originalRect(s,p,F,U)},q.closePath=function(){P.closePath(),this.__originalClosePath()},q.beginPath=function(){P.beginPath(),this.__originalBeginPath()}}class r{constructor(P){this.canvasFactory=P,this.cache=Object.create(null)}getCanvas(P,s,p){let F;return this.cache[P]!==void 0?(F=this.cache[P],this.canvasFactory.reset(F,s,p)):(F=this.canvasFactory.create(s,p),this.cache[P]=F),F}delete(P){delete this.cache[P]}clear(){for(const P in this.cache){const s=this.cache[P];this.canvasFactory.destroy(s),delete this.cache[P]}}}function d(q,P,s,p,F,U,X,Y,ee,_e){const[pe,ne,de,ye,me,Te]=(0,Z.getCurrentTransform)(q);if(ne===0&&de===0){const Oe=X*pe+me,ae=Math.round(Oe),J=Y*ye+Te,le=Math.round(J),fe=(X+ee)*pe+me,Ce=Math.abs(Math.round(fe)-ae)||1,Me=(Y+_e)*ye+Te,Ne=Math.abs(Math.round(Me)-le)||1;return q.setTransform(Math.sign(pe),0,0,Math.sign(ye),ae,le),q.drawImage(P,s,p,F,U,0,0,Ce,Ne),q.setTransform(pe,ne,de,ye,me,Te),[Ce,Ne]}if(pe===0&&ye===0){const Oe=Y*de+me,ae=Math.round(Oe),J=X*ne+Te,le=Math.round(J),fe=(Y+_e)*de+me,Ce=Math.abs(Math.round(fe)-ae)||1,Me=(X+ee)*ne+Te,Ne=Math.abs(Math.round(Me)-le)||1;return q.setTransform(0,Math.sign(ne),Math.sign(de),0,ae,le),q.drawImage(P,s,p,F,U,0,0,Ne,Ce),q.setTransform(pe,ne,de,ye,me,Te),[Ne,Ce]}q.drawImage(P,s,p,F,U,X,Y,ee,_e);const Ie=Math.hypot(pe,ne),Se=Math.hypot(de,ye);return[Ie*ee,Se*_e]}function m(q){const{width:P,height:s}=q;if(P>S||s>S)return null;const p=1e3,F=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),U=P+1;let X=new Uint8Array(U*(s+1)),Y,ee,_e;const pe=P+7&-8;let ne=new Uint8Array(pe*s),de=0;for(const Se of q.data){let Oe=128;for(;Oe>0;)ne[de++]=Se&Oe?0:255,Oe>>=1}let ye=0;for(de=0,ne[de]!==0&&(X[0]=1,++ye),ee=1;ee<P;ee++)ne[de]!==ne[de+1]&&(X[ee]=ne[de]?2:1,++ye),de++;for(ne[de]!==0&&(X[ee]=2,++ye),Y=1;Y<s;Y++){de=Y*pe,_e=Y*U,ne[de-pe]!==ne[de]&&(X[_e]=ne[de]?1:8,++ye);let Se=(ne[de]?4:0)+(ne[de-pe]?8:0);for(ee=1;ee<P;ee++)Se=(Se>>2)+(ne[de+1]?4:0)+(ne[de-pe+1]?8:0),F[Se]&&(X[_e+ee]=F[Se],++ye),de++;if(ne[de-pe]!==ne[de]&&(X[_e+ee]=ne[de]?2:4,++ye),ye>p)return null}for(de=pe*(s-1),_e=Y*U,ne[de]!==0&&(X[_e]=8,++ye),ee=1;ee<P;ee++)ne[de]!==ne[de+1]&&(X[_e+ee]=ne[de]?4:8,++ye),de++;if(ne[de]!==0&&(X[_e+ee]=4,++ye),ye>p)return null;const me=new Int32Array([0,U,-1,0,-U,0,0,0,1]),Te=new Path2D;for(Y=0;ye&&Y<=s;Y++){let Se=Y*U;const Oe=Se+P;for(;Se<Oe&&!X[Se];)Se++;if(Se===Oe)continue;Te.moveTo(Se%U,Y);const ae=Se;let J=X[Se];do{const le=me[J];do Se+=le;while(!X[Se]);const fe=X[Se];fe!==5&&fe!==10?(J=fe,X[Se]=0):(J=fe&51*J>>4,X[Se]&=J>>2|J<<2),Te.lineTo(Se%U,Se/U|0),X[Se]||--ye}while(ae!==Se);--Y}return ne=null,X=null,function(Se){Se.save(),Se.scale(1/P,-1/s),Se.translate(0,-s),Se.fill(Te),Se.beginPath(),Se.restore()}}class v{constructor(P,s){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=N.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=N.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=N.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,P,s])}clone(){const P=Object.create(this);return P.clipBox=this.clipBox.slice(),P}setCurrentPoint(P,s){this.x=P,this.y=s}updatePathMinMax(P,s,p){[s,p]=N.Util.applyTransform([s,p],P),this.minX=Math.min(this.minX,s),this.minY=Math.min(this.minY,p),this.maxX=Math.max(this.maxX,s),this.maxY=Math.max(this.maxY,p)}updateRectMinMax(P,s){const p=N.Util.applyTransform(s,P),F=N.Util.applyTransform(s.slice(2),P);this.minX=Math.min(this.minX,p[0],F[0]),this.minY=Math.min(this.minY,p[1],F[1]),this.maxX=Math.max(this.maxX,p[0],F[0]),this.maxY=Math.max(this.maxY,p[1],F[1])}updateScalingPathMinMax(P,s){N.Util.scaleMinMax(P,s),this.minX=Math.min(this.minX,s[0]),this.maxX=Math.max(this.maxX,s[1]),this.minY=Math.min(this.minY,s[2]),this.maxY=Math.max(this.maxY,s[3])}updateCurvePathMinMax(P,s,p,F,U,X,Y,ee,_e,pe){const ne=N.Util.bezierBoundingBox(s,p,F,U,X,Y,ee,_e);if(pe){pe[0]=Math.min(pe[0],ne[0],ne[2]),pe[1]=Math.max(pe[1],ne[0],ne[2]),pe[2]=Math.min(pe[2],ne[1],ne[3]),pe[3]=Math.max(pe[3],ne[1],ne[3]);return}this.updateRectMinMax(P,ne)}getPathBoundingBox(P=Ee.PathType.FILL,s=null){const p=[this.minX,this.minY,this.maxX,this.maxY];if(P===Ee.PathType.STROKE){s||(0,N.unreachable)("Stroke bounding box must include transform.");const F=N.Util.singularValueDecompose2dScale(s),U=F[0]*this.lineWidth/2,X=F[1]*this.lineWidth/2;p[0]-=U,p[1]-=X,p[2]+=U,p[3]+=X}return p}updateClipFromPath(){const P=N.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(P||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(P){this.clipBox=P,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(P=Ee.PathType.FILL,s=null){return N.Util.intersect(this.clipBox,this.getPathBoundingBox(P,s))}}function f(q,P){if(typeof ImageData<"u"&&P instanceof ImageData){q.putImageData(P,0,0);return}const s=P.height,p=P.width,F=s%w,U=(s-F)/w,X=F===0?U:U+1,Y=q.createImageData(p,w);let ee=0,_e;const pe=P.data,ne=Y.data;let de,ye,me,Te;if(P.kind===N.ImageKind.GRAYSCALE_1BPP){const Ie=pe.byteLength,Se=new Uint32Array(ne.buffer,0,ne.byteLength>>2),Oe=Se.length,ae=p+7>>3,J=4294967295,le=N.FeatureTest.isLittleEndian?4278190080:255;for(de=0;de<X;de++){for(me=de<U?w:F,_e=0,ye=0;ye<me;ye++){const fe=Ie-ee;let Ce=0;const Me=fe>ae?p:fe*8-7,Ne=Me&-8;let Ue=0,Ve=0;for(;Ce<Ne;Ce+=8)Ve=pe[ee++],Se[_e++]=Ve&128?J:le,Se[_e++]=Ve&64?J:le,Se[_e++]=Ve&32?J:le,Se[_e++]=Ve&16?J:le,Se[_e++]=Ve&8?J:le,Se[_e++]=Ve&4?J:le,Se[_e++]=Ve&2?J:le,Se[_e++]=Ve&1?J:le;for(;Ce<Me;Ce++)Ue===0&&(Ve=pe[ee++],Ue=128),Se[_e++]=Ve&Ue?J:le,Ue>>=1}for(;_e<Oe;)Se[_e++]=0;q.putImageData(Y,0,de*w)}}else if(P.kind===N.ImageKind.RGBA_32BPP){for(ye=0,Te=p*w*4,de=0;de<U;de++)ne.set(pe.subarray(ee,ee+Te)),ee+=Te,q.putImageData(Y,0,ye),ye+=w;de<X&&(Te=p*F*4,ne.set(pe.subarray(ee,ee+Te)),q.putImageData(Y,0,ye))}else if(P.kind===N.ImageKind.RGB_24BPP)for(me=w,Te=p*me,de=0;de<X;de++){for(de>=U&&(me=F,Te=p*me),_e=0,ye=Te;ye--;)ne[_e++]=pe[ee++],ne[_e++]=pe[ee++],ne[_e++]=pe[ee++],ne[_e++]=255;q.putImageData(Y,0,de*w)}else throw new Error(`bad image kind: ${P.kind}`)}function b(q,P){if(P.bitmap){q.drawImage(P.bitmap,0,0);return}const s=P.height,p=P.width,F=s%w,U=(s-F)/w,X=F===0?U:U+1,Y=q.createImageData(p,w);let ee=0;const _e=P.data,pe=Y.data;for(let ne=0;ne<X;ne++){const de=ne<U?w:F;({srcPos:ee}=(0,oe.convertBlackAndWhiteToRGBA)({src:_e,srcPos:ee,dest:pe,width:p,height:de,nonBlackColor:0})),q.putImageData(Y,0,ne*w)}}function i(q,P){const s=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const p of s)q[p]!==void 0&&(P[p]=q[p]);q.setLineDash!==void 0&&(P.setLineDash(q.getLineDash()),P.lineDashOffset=q.lineDashOffset)}function n(q){if(q.strokeStyle=q.fillStyle="#000000",q.fillRule="nonzero",q.globalAlpha=1,q.lineWidth=1,q.lineCap="butt",q.lineJoin="miter",q.miterLimit=10,q.globalCompositeOperation="source-over",q.font="10px sans-serif",q.setLineDash!==void 0&&(q.setLineDash([]),q.lineDashOffset=0),!N.isNodeJS){const{filter:P}=q;P!=="none"&&P!==""&&(q.filter="none")}}function u(q,P,s,p){const F=q.length;for(let U=3;U<F;U+=4){const X=q[U];if(X===0)q[U-3]=P,q[U-2]=s,q[U-1]=p;else if(X<255){const Y=255-X;q[U-3]=q[U-3]*X+P*Y>>8,q[U-2]=q[U-2]*X+s*Y>>8,q[U-1]=q[U-1]*X+p*Y>>8}}}function c(q,P,s){const p=q.length,F=1/255;for(let U=3;U<p;U+=4){const X=s?s[q[U]]:q[U];P[U]=P[U]*X*F|0}}function o(q,P,s){const p=q.length;for(let F=3;F<p;F+=4){const U=q[F-3]*77+q[F-2]*152+q[F-1]*28;P[F]=s?P[F]*s[U>>8]>>8:P[F]*U>>16}}function h(q,P,s,p,F,U,X,Y,ee,_e,pe){const ne=!!U,de=ne?U[0]:0,ye=ne?U[1]:0,me=ne?U[2]:0,Te=F==="Luminosity"?o:c,Se=Math.min(p,Math.ceil(1048576/s));for(let Oe=0;Oe<p;Oe+=Se){const ae=Math.min(Se,p-Oe),J=q.getImageData(Y-_e,Oe+(ee-pe),s,ae),le=P.getImageData(Y,Oe+ee,s,ae);ne&&u(J.data,de,ye,me),Te(J.data,le.data,X),P.putImageData(le,Y,Oe+ee)}}function g(q,P,s,p){const F=p[0],U=p[1],X=p[2]-F,Y=p[3]-U;X===0||Y===0||(h(P.context,s,X,Y,P.subtype,P.backdrop,P.transferMap,F,U,P.offsetX,P.offsetY),q.save(),q.globalAlpha=1,q.globalCompositeOperation="source-over",q.setTransform(1,0,0,1,0,0),q.drawImage(s.canvas,0,0),q.restore())}function x(q,P){const s=N.Util.singularValueDecompose2dScale(q);s[0]=Math.fround(s[0]),s[1]=Math.fround(s[1]);const p=Math.fround((globalThis.devicePixelRatio||1)*Z.PixelsPerInch.PDF_TO_CSS_UNITS);return P!==void 0?P:s[0]<=p||s[1]<=p}const j=["butt","round","square"],V=["miter","round","bevel"],E={},O={},we=class{constructor(P,s,p,F,U,{optionalContentConfig:X,markedContentStack:Y=null},ee,_e){R(this,B);R(this,I);this.ctx=P,this.current=new v(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=s,this.objs=p,this.canvasFactory=F,this.filterFactory=U,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=Y||[],this.optionalContentConfig=X,this.cachedCanvases=new r(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=ee,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=_e,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(P,s=null){return typeof P=="string"?P.startsWith("g_")?this.commonObjs.get(P):this.objs.get(P):s}beginDrawing({transform:P,viewport:s,transparency:p=!1,background:F=null}){const U=this.ctx.canvas.width,X=this.ctx.canvas.height,Y=this.ctx.fillStyle;if(this.ctx.fillStyle=F||"#ffffff",this.ctx.fillRect(0,0,U,X),this.ctx.fillStyle=Y,p){const ee=this.cachedCanvases.getCanvas("transparent",U,X);this.compositeCtx=this.ctx,this.transparentCanvas=ee.canvas,this.ctx=ee.context,this.ctx.save(),this.ctx.transform(...(0,Z.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),n(this.ctx),P&&(this.ctx.transform(...P),this.outputScaleX=P[0],this.outputScaleY=P[0]),this.ctx.transform(...s.transform),this.viewportScale=s.scale,this.baseTransform=(0,Z.getCurrentTransform)(this.ctx)}executeOperatorList(P,s,p,F){const U=P.argsArray,X=P.fnArray;let Y=s||0;const ee=U.length;if(ee===Y)return Y;const _e=ee-Y>L&&typeof p=="function",pe=_e?Date.now()+l:0;let ne=0;const de=this.commonObjs,ye=this.objs;let me;for(;;){if(F!==void 0&&Y===F.nextBreakPoint)return F.breakIt(Y,p),Y;if(me=X[Y],me!==N.OPS.dependency)this[me].apply(this,U[Y]);else for(const Te of U[Y]){const Ie=Te.startsWith("g_")?de:ye;if(!Ie.has(Te))return Ie.get(Te,p),Y}if(Y++,Y===ee)return Y;if(_e&&++ne>L){if(Date.now()>pe)return p(),Y;ne=0}}}endDrawing(){D(this,B,ti).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const P of this._cachedBitmapsMap.values()){for(const s of P.values())typeof HTMLCanvasElement<"u"&&s instanceof HTMLCanvasElement&&(s.width=s.height=0);P.clear()}this._cachedBitmapsMap.clear(),D(this,I,ii).call(this)}_scaleImage(P,s){const p=P.width,F=P.height;let U=Math.max(Math.hypot(s[0],s[1]),1),X=Math.max(Math.hypot(s[2],s[3]),1),Y=p,ee=F,_e="prescale1",pe,ne;for(;U>2&&Y>1||X>2&&ee>1;){let de=Y,ye=ee;U>2&&Y>1&&(de=Y>=16384?Math.floor(Y/2)-1||1:Math.ceil(Y/2),U/=Y/de),X>2&&ee>1&&(ye=ee>=16384?Math.floor(ee/2)-1||1:Math.ceil(ee)/2,X/=ee/ye),pe=this.cachedCanvases.getCanvas(_e,de,ye),ne=pe.context,ne.clearRect(0,0,de,ye),ne.drawImage(P,0,0,Y,ee,0,0,de,ye),P=pe.canvas,Y=de,ee=ye,_e=_e==="prescale1"?"prescale2":"prescale1"}return{img:P,paintWidth:Y,paintHeight:ee}}_createMaskCanvas(P){const s=this.ctx,{width:p,height:F}=P,U=this.current.fillColor,X=this.current.patternFill,Y=(0,Z.getCurrentTransform)(s);let ee,_e,pe,ne;if((P.bitmap||P.data)&&P.count>1){const Ce=P.bitmap||P.data.buffer;_e=JSON.stringify(X?Y:[Y.slice(0,4),U]),ee=this._cachedBitmapsMap.get(Ce),ee||(ee=new Map,this._cachedBitmapsMap.set(Ce,ee));const Me=ee.get(_e);if(Me&&!X){const Ne=Math.round(Math.min(Y[0],Y[2])+Y[4]),Ue=Math.round(Math.min(Y[1],Y[3])+Y[5]);return{canvas:Me,offsetX:Ne,offsetY:Ue}}pe=Me}pe||(ne=this.cachedCanvases.getCanvas("maskCanvas",p,F),b(ne.context,P));let de=N.Util.transform(Y,[1/p,0,0,-1/F,0,0]);de=N.Util.transform(de,[1,0,0,1,0,-F]);const ye=N.Util.applyTransform([0,0],de),me=N.Util.applyTransform([p,F],de),Te=N.Util.normalizeRect([ye[0],ye[1],me[0],me[1]]),Ie=Math.round(Te[2]-Te[0])||1,Se=Math.round(Te[3]-Te[1])||1,Oe=this.cachedCanvases.getCanvas("fillCanvas",Ie,Se),ae=Oe.context,J=Math.min(ye[0],me[0]),le=Math.min(ye[1],me[1]);ae.translate(-J,-le),ae.transform(...de),pe||(pe=this._scaleImage(ne.canvas,(0,Z.getCurrentTransformInverse)(ae)),pe=pe.img,ee&&X&&ee.set(_e,pe)),ae.imageSmoothingEnabled=x((0,Z.getCurrentTransform)(ae),P.interpolate),d(ae,pe,0,0,pe.width,pe.height,0,0,p,F),ae.globalCompositeOperation="source-in";const fe=N.Util.transform((0,Z.getCurrentTransformInverse)(ae),[1,0,0,1,-J,-le]);return ae.fillStyle=X?U.getPattern(s,this,fe,Ee.PathType.FILL):U,ae.fillRect(0,0,p,F),ee&&!X&&(this.cachedCanvases.delete("fillCanvas"),ee.set(_e,Oe.canvas)),{canvas:Oe.canvas,offsetX:Math.round(J),offsetY:Math.round(le)}}setLineWidth(P){P!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=P,this.ctx.lineWidth=P}setLineCap(P){this.ctx.lineCap=j[P]}setLineJoin(P){this.ctx.lineJoin=V[P]}setMiterLimit(P){this.ctx.miterLimit=P}setDash(P,s){const p=this.ctx;p.setLineDash!==void 0&&(p.setLineDash(P),p.lineDashOffset=s)}setRenderingIntent(P){}setFlatness(P){}setGState(P){for(const[s,p]of P)switch(s){case"LW":this.setLineWidth(p);break;case"LC":this.setLineCap(p);break;case"LJ":this.setLineJoin(p);break;case"ML":this.setMiterLimit(p);break;case"D":this.setDash(p[0],p[1]);break;case"RI":this.setRenderingIntent(p);break;case"FL":this.setFlatness(p);break;case"Font":this.setFont(p[0],p[1]);break;case"CA":this.current.strokeAlpha=p;break;case"ca":this.current.fillAlpha=p,this.ctx.globalAlpha=p;break;case"BM":this.ctx.globalCompositeOperation=p;break;case"SMask":this.current.activeSMask=p?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(p);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const P=this.inSMaskMode;this.current.activeSMask&&!P?this.beginSMaskMode():!this.current.activeSMask&&P&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const P=this.ctx.canvas.width,s=this.ctx.canvas.height,p="smaskGroupAt"+this.groupLevel,F=this.cachedCanvases.getCanvas(p,P,s);this.suspendedCtx=this.ctx,this.ctx=F.context;const U=this.ctx;U.setTransform(...(0,Z.getCurrentTransform)(this.suspendedCtx)),i(this.suspendedCtx,U),e(U,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),i(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(P){if(!this.current.activeSMask)return;P?(P[0]=Math.floor(P[0]),P[1]=Math.floor(P[1]),P[2]=Math.ceil(P[2]),P[3]=Math.ceil(P[3])):P=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const s=this.current.activeSMask,p=this.suspendedCtx;g(p,s,this.ctx,P),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(i(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const P=this.current;this.stateStack.push(P),this.current=P.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),i(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(P,s,p,F,U,X){this.ctx.transform(P,s,p,F,U,X),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(P,s,p){const F=this.ctx,U=this.current;let X=U.x,Y=U.y,ee,_e;const pe=(0,Z.getCurrentTransform)(F),ne=pe[0]===0&&pe[3]===0||pe[1]===0&&pe[2]===0,de=ne?p.slice(0):null;for(let ye=0,me=0,Te=P.length;ye<Te;ye++)switch(P[ye]|0){case N.OPS.rectangle:X=s[me++],Y=s[me++];const Ie=s[me++],Se=s[me++],Oe=X+Ie,ae=Y+Se;F.moveTo(X,Y),Ie===0||Se===0?F.lineTo(Oe,ae):(F.lineTo(Oe,Y),F.lineTo(Oe,ae),F.lineTo(X,ae)),ne||U.updateRectMinMax(pe,[X,Y,Oe,ae]),F.closePath();break;case N.OPS.moveTo:X=s[me++],Y=s[me++],F.moveTo(X,Y),ne||U.updatePathMinMax(pe,X,Y);break;case N.OPS.lineTo:X=s[me++],Y=s[me++],F.lineTo(X,Y),ne||U.updatePathMinMax(pe,X,Y);break;case N.OPS.curveTo:ee=X,_e=Y,X=s[me+4],Y=s[me+5],F.bezierCurveTo(s[me],s[me+1],s[me+2],s[me+3],X,Y),U.updateCurvePathMinMax(pe,ee,_e,s[me],s[me+1],s[me+2],s[me+3],X,Y,de),me+=6;break;case N.OPS.curveTo2:ee=X,_e=Y,F.bezierCurveTo(X,Y,s[me],s[me+1],s[me+2],s[me+3]),U.updateCurvePathMinMax(pe,ee,_e,X,Y,s[me],s[me+1],s[me+2],s[me+3],de),X=s[me+2],Y=s[me+3],me+=4;break;case N.OPS.curveTo3:ee=X,_e=Y,X=s[me+2],Y=s[me+3],F.bezierCurveTo(s[me],s[me+1],X,Y,X,Y),U.updateCurvePathMinMax(pe,ee,_e,s[me],s[me+1],X,Y,X,Y,de),me+=4;break;case N.OPS.closePath:F.closePath();break}ne&&U.updateScalingPathMinMax(pe,de),U.setCurrentPoint(X,Y)}closePath(){this.ctx.closePath()}stroke(P=!0){const s=this.ctx,p=this.current.strokeColor;s.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof p=="object"&&(p!=null&&p.getPattern)?(s.save(),s.strokeStyle=p.getPattern(s,this,(0,Z.getCurrentTransformInverse)(s),Ee.PathType.STROKE),this.rescaleAndStroke(!1),s.restore()):this.rescaleAndStroke(!0)),P&&this.consumePath(this.current.getClippedPathBoundingBox()),s.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(P=!0){const s=this.ctx,p=this.current.fillColor,F=this.current.patternFill;let U=!1;F&&(s.save(),s.fillStyle=p.getPattern(s,this,(0,Z.getCurrentTransformInverse)(s),Ee.PathType.FILL),U=!0);const X=this.current.getClippedPathBoundingBox();this.contentVisible&&X!==null&&(this.pendingEOFill?(s.fill("evenodd"),this.pendingEOFill=!1):s.fill()),U&&s.restore(),P&&this.consumePath(X)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=E}eoClip(){this.pendingClip=O}beginText(){this.current.textMatrix=N.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const P=this.pendingTextPaths,s=this.ctx;if(P===void 0){s.beginPath();return}s.save(),s.beginPath();for(const p of P)s.setTransform(...p.transform),s.translate(p.x,p.y),p.addToPath(s,p.fontSize);s.restore(),s.clip(),s.beginPath(),delete this.pendingTextPaths}setCharSpacing(P){this.current.charSpacing=P}setWordSpacing(P){this.current.wordSpacing=P}setHScale(P){this.current.textHScale=P/100}setLeading(P){this.current.leading=-P}setFont(P,s){var pe;const p=this.commonObjs.get(P),F=this.current;if(!p)throw new Error(`Can't find font for ${P}`);if(F.fontMatrix=p.fontMatrix||N.FONT_IDENTITY_MATRIX,(F.fontMatrix[0]===0||F.fontMatrix[3]===0)&&(0,N.warn)("Invalid font matrix for font "+P),s<0?(s=-s,F.fontDirection=-1):F.fontDirection=1,this.current.font=p,this.current.fontSize=s,p.isType3Font)return;const U=p.loadedName||"sans-serif",X=((pe=p.systemFontInfo)==null?void 0:pe.css)||`"${U}", ${p.fallbackName}`;let Y="normal";p.black?Y="900":p.bold&&(Y="bold");const ee=p.italic?"italic":"normal";let _e=s;s<T?_e=T:s>C&&(_e=C),this.current.fontSizeScale=s/_e,this.ctx.font=`${ee} ${Y} ${_e}px ${X}`}setTextRenderingMode(P){this.current.textRenderingMode=P}setTextRise(P){this.current.textRise=P}moveText(P,s){this.current.x=this.current.lineX+=P,this.current.y=this.current.lineY+=s}setLeadingMoveText(P,s){this.setLeading(-s),this.moveText(P,s)}setTextMatrix(P,s,p,F,U,X){this.current.textMatrix=[P,s,p,F,U,X],this.current.textMatrixScale=Math.hypot(P,s),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(P,s,p,F){const U=this.ctx,X=this.current,Y=X.font,ee=X.textRenderingMode,_e=X.fontSize/X.fontSizeScale,pe=ee&N.TextRenderingMode.FILL_STROKE_MASK,ne=!!(ee&N.TextRenderingMode.ADD_TO_PATH_FLAG),de=X.patternFill&&!Y.missingFile;let ye;(Y.disableFontFace||ne||de)&&(ye=Y.getPathGenerator(this.commonObjs,P)),Y.disableFontFace||de?(U.save(),U.translate(s,p),U.beginPath(),ye(U,_e),F&&U.setTransform(...F),(pe===N.TextRenderingMode.FILL||pe===N.TextRenderingMode.FILL_STROKE)&&U.fill(),(pe===N.TextRenderingMode.STROKE||pe===N.TextRenderingMode.FILL_STROKE)&&U.stroke(),U.restore()):((pe===N.TextRenderingMode.FILL||pe===N.TextRenderingMode.FILL_STROKE)&&U.fillText(P,s,p),(pe===N.TextRenderingMode.STROKE||pe===N.TextRenderingMode.FILL_STROKE)&&U.strokeText(P,s,p)),ne&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,Z.getCurrentTransform)(U),x:s,y:p,fontSize:_e,addToPath:ye})}get isFontSubpixelAAEnabled(){const{context:P}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);P.scale(1.5,1),P.fillText("I",0,10);const s=P.getImageData(0,0,10,10).data;let p=!1;for(let F=3;F<s.length;F+=4)if(s[F]>0&&s[F]<255){p=!0;break}return(0,N.shadow)(this,"isFontSubpixelAAEnabled",p)}showText(P){const s=this.current,p=s.font;if(p.isType3Font)return this.showType3Text(P);const F=s.fontSize;if(F===0)return;const U=this.ctx,X=s.fontSizeScale,Y=s.charSpacing,ee=s.wordSpacing,_e=s.fontDirection,pe=s.textHScale*_e,ne=P.length,de=p.vertical,ye=de?1:-1,me=p.defaultVMetrics,Te=F*s.fontMatrix[0],Ie=s.textRenderingMode===N.TextRenderingMode.FILL&&!p.disableFontFace&&!s.patternFill;U.save(),U.transform(...s.textMatrix),U.translate(s.x,s.y+s.textRise),_e>0?U.scale(pe,-1):U.scale(pe,1);let Se;if(s.patternFill){U.save();const fe=s.fillColor.getPattern(U,this,(0,Z.getCurrentTransformInverse)(U),Ee.PathType.FILL);Se=(0,Z.getCurrentTransform)(U),U.restore(),U.fillStyle=fe}let Oe=s.lineWidth;const ae=s.textMatrixScale;if(ae===0||Oe===0){const fe=s.textRenderingMode&N.TextRenderingMode.FILL_STROKE_MASK;(fe===N.TextRenderingMode.STROKE||fe===N.TextRenderingMode.FILL_STROKE)&&(Oe=this.getSinglePixelWidth())}else Oe/=ae;if(X!==1&&(U.scale(X,X),Oe/=X),U.lineWidth=Oe,p.isInvalidPDFjsFont){const fe=[];let Ce=0;for(const Me of P)fe.push(Me.unicode),Ce+=Me.width;U.fillText(fe.join(""),0,0),s.x+=Ce*Te*pe,U.restore(),this.compose();return}let J=0,le;for(le=0;le<ne;++le){const fe=P[le];if(typeof fe=="number"){J+=ye*fe*F/1e3;continue}let Ce=!1;const Me=(fe.isSpace?ee:0)+Y,Ne=fe.fontChar,Ue=fe.accent;let Ve,Ge,We=fe.width;if(de){const Pe=fe.vmetric||me,A=-(fe.vmetric?Pe[1]:We*.5)*Te,H=Pe[2]*Te;We=Pe?-Pe[0]:We,Ve=A/X,Ge=(J+H)/X}else Ve=J/X,Ge=0;if(p.remeasure&&We>0){const Pe=U.measureText(Ne).width*1e3/F*X;if(We<Pe&&this.isFontSubpixelAAEnabled){const A=We/Pe;Ce=!0,U.save(),U.scale(A,1),Ve/=A}else We!==Pe&&(Ve+=(We-Pe)/2e3*F/X)}if(this.contentVisible&&(fe.isInFont||p.missingFile)){if(Ie&&!Ue)U.fillText(Ne,Ve,Ge);else if(this.paintChar(Ne,Ve,Ge,Se),Ue){const Pe=Ve+F*Ue.offset.x/X,A=Ge-F*Ue.offset.y/X;this.paintChar(Ue.fontChar,Pe,A,Se)}}const ze=de?We*Te-Me*_e:We*Te+Me*_e;J+=ze,Ce&&U.restore()}de?s.y-=J:s.x+=J*pe,U.restore(),this.compose()}showType3Text(P){const s=this.ctx,p=this.current,F=p.font,U=p.fontSize,X=p.fontDirection,Y=F.vertical?1:-1,ee=p.charSpacing,_e=p.wordSpacing,pe=p.textHScale*X,ne=p.fontMatrix||N.FONT_IDENTITY_MATRIX,de=P.length,ye=p.textRenderingMode===N.TextRenderingMode.INVISIBLE;let me,Te,Ie,Se;if(!(ye||U===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,s.save(),s.transform(...p.textMatrix),s.translate(p.x,p.y),s.scale(pe,X),me=0;me<de;++me){if(Te=P[me],typeof Te=="number"){Se=Y*Te*U/1e3,this.ctx.translate(Se,0),p.x+=Se*pe;continue}const Oe=(Te.isSpace?_e:0)+ee,ae=F.charProcOperatorList[Te.operatorListId];if(!ae){(0,N.warn)(`Type3 character "${Te.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=Te,this.save(),s.scale(U,U),s.transform(...ne),this.executeOperatorList(ae),this.restore()),Ie=N.Util.applyTransform([Te.width,0],ne)[0]*U+Oe,s.translate(Ie,0),p.x+=Ie*pe}s.restore(),this.processingType3=null}}setCharWidth(P,s){}setCharWidthAndBounds(P,s,p,F,U,X){this.ctx.rect(p,F,U-p,X-F),this.ctx.clip(),this.endPath()}getColorN_Pattern(P){let s;if(P[0]==="TilingPattern"){const p=P[1],F=this.baseTransform||(0,Z.getCurrentTransform)(this.ctx),U={createCanvasGraphics:X=>new we(X,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};s=new Ee.TilingPattern(P,p,this.ctx,U,F)}else s=this._getPattern(P[1],P[2]);return s}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(P,s,p){const F=N.Util.makeHexColor(P,s,p);this.ctx.strokeStyle=F,this.current.strokeColor=F}setFillRGBColor(P,s,p){const F=N.Util.makeHexColor(P,s,p);this.ctx.fillStyle=F,this.current.fillColor=F,this.current.patternFill=!1}_getPattern(P,s=null){let p;return this.cachedPatterns.has(P)?p=this.cachedPatterns.get(P):(p=(0,Ee.getShadingPattern)(this.getObject(P)),this.cachedPatterns.set(P,p)),s&&(p.matrix=s),p}shadingFill(P){if(!this.contentVisible)return;const s=this.ctx;this.save();const p=this._getPattern(P);s.fillStyle=p.getPattern(s,this,(0,Z.getCurrentTransformInverse)(s),Ee.PathType.SHADING);const F=(0,Z.getCurrentTransformInverse)(s);if(F){const{width:U,height:X}=s.canvas,[Y,ee,_e,pe]=N.Util.getAxialAlignedBoundingBox([0,0,U,X],F);this.ctx.fillRect(Y,ee,_e-Y,pe-ee)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,N.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,N.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(P,s){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(P)&&P.length===6&&this.transform(...P),this.baseTransform=(0,Z.getCurrentTransform)(this.ctx),s)){const p=s[2]-s[0],F=s[3]-s[1];this.ctx.rect(s[0],s[1],p,F),this.current.updateRectMinMax((0,Z.getCurrentTransform)(this.ctx),s),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(P){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const s=this.ctx;P.isolated||(0,N.info)("TODO: Support non-isolated groups."),P.knockout&&(0,N.warn)("Knockout groups not supported.");const p=(0,Z.getCurrentTransform)(s);if(P.matrix&&s.transform(...P.matrix),!P.bbox)throw new Error("Bounding box is required.");let F=N.Util.getAxialAlignedBoundingBox(P.bbox,(0,Z.getCurrentTransform)(s));const U=[0,0,s.canvas.width,s.canvas.height];F=N.Util.intersect(F,U)||[0,0,0,0];const X=Math.floor(F[0]),Y=Math.floor(F[1]);let ee=Math.max(Math.ceil(F[2])-X,1),_e=Math.max(Math.ceil(F[3])-Y,1),pe=1,ne=1;ee>a&&(pe=ee/a,ee=a),_e>a&&(ne=_e/a,_e=a),this.current.startNewPathAndClipBox([0,0,ee,_e]);let de="groupAt"+this.groupLevel;P.smask&&(de+="_smask_"+this.smaskCounter++%2);const ye=this.cachedCanvases.getCanvas(de,ee,_e),me=ye.context;me.scale(1/pe,1/ne),me.translate(-X,-Y),me.transform(...p),P.smask?this.smaskStack.push({canvas:ye.canvas,context:me,offsetX:X,offsetY:Y,scaleX:pe,scaleY:ne,subtype:P.smask.subtype,backdrop:P.smask.backdrop,transferMap:P.smask.transferMap||null,startTransformInverse:null}):(s.setTransform(1,0,0,1,0,0),s.translate(X,Y),s.scale(pe,ne),s.save()),i(s,me),this.ctx=me,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(s),this.groupLevel++}endGroup(P){if(!this.contentVisible)return;this.groupLevel--;const s=this.ctx,p=this.groupStack.pop();if(this.ctx=p,this.ctx.imageSmoothingEnabled=!1,P.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const F=(0,Z.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...F);const U=N.Util.getAxialAlignedBoundingBox([0,0,s.canvas.width,s.canvas.height],F);this.ctx.drawImage(s.canvas,0,0),this.ctx.restore(),this.compose(U)}}beginAnnotation(P,s,p,F,U){if(D(this,B,ti).call(this),n(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(s)&&s.length===4){const X=s[2]-s[0],Y=s[3]-s[1];if(U&&this.annotationCanvasMap){p=p.slice(),p[4]-=s[0],p[5]-=s[1],s=s.slice(),s[0]=s[1]=0,s[2]=X,s[3]=Y;const[ee,_e]=N.Util.singularValueDecompose2dScale((0,Z.getCurrentTransform)(this.ctx)),{viewportScale:pe}=this,ne=Math.ceil(X*this.outputScaleX*pe),de=Math.ceil(Y*this.outputScaleY*pe);this.annotationCanvas=this.canvasFactory.create(ne,de);const{canvas:ye,context:me}=this.annotationCanvas;this.annotationCanvasMap.set(P,ye),this.annotationCanvas.savedCtx=this.ctx,this.ctx=me,this.ctx.save(),this.ctx.setTransform(ee,0,0,-_e,0,Y*_e),n(this.ctx)}else n(this.ctx),this.ctx.rect(s[0],s[1],X,Y),this.ctx.clip(),this.endPath()}this.current=new v(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...p),this.transform(...F)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),D(this,I,ii).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(P){if(!this.contentVisible)return;const s=P.count;P=this.getObject(P.data,P),P.count=s;const p=this.ctx,F=this.processingType3;if(F&&(F.compiled===void 0&&(F.compiled=m(P)),F.compiled)){F.compiled(p);return}const U=this._createMaskCanvas(P),X=U.canvas;p.save(),p.setTransform(1,0,0,1,0,0),p.drawImage(X,U.offsetX,U.offsetY),p.restore(),this.compose()}paintImageMaskXObjectRepeat(P,s,p=0,F=0,U,X){if(!this.contentVisible)return;P=this.getObject(P.data,P);const Y=this.ctx;Y.save();const ee=(0,Z.getCurrentTransform)(Y);Y.transform(s,p,F,U,0,0);const _e=this._createMaskCanvas(P);Y.setTransform(1,0,0,1,_e.offsetX-ee[4],_e.offsetY-ee[5]);for(let pe=0,ne=X.length;pe<ne;pe+=2){const de=N.Util.transform(ee,[s,p,F,U,X[pe],X[pe+1]]),[ye,me]=N.Util.applyTransform([0,0],de);Y.drawImage(_e.canvas,ye,me)}Y.restore(),this.compose()}paintImageMaskXObjectGroup(P){if(!this.contentVisible)return;const s=this.ctx,p=this.current.fillColor,F=this.current.patternFill;for(const U of P){const{data:X,width:Y,height:ee,transform:_e}=U,pe=this.cachedCanvases.getCanvas("maskCanvas",Y,ee),ne=pe.context;ne.save();const de=this.getObject(X,U);b(ne,de),ne.globalCompositeOperation="source-in",ne.fillStyle=F?p.getPattern(ne,this,(0,Z.getCurrentTransformInverse)(s),Ee.PathType.FILL):p,ne.fillRect(0,0,Y,ee),ne.restore(),s.save(),s.transform(..._e),s.scale(1,-1),d(s,pe.canvas,0,0,Y,ee,0,-1,1,1),s.restore()}this.compose()}paintImageXObject(P){if(!this.contentVisible)return;const s=this.getObject(P);if(!s){(0,N.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(s)}paintImageXObjectRepeat(P,s,p,F){if(!this.contentVisible)return;const U=this.getObject(P);if(!U){(0,N.warn)("Dependent image isn't ready yet");return}const X=U.width,Y=U.height,ee=[];for(let _e=0,pe=F.length;_e<pe;_e+=2)ee.push({transform:[s,0,0,p,F[_e],F[_e+1]],x:0,y:0,w:X,h:Y});this.paintInlineImageXObjectGroup(U,ee)}applyTransferMapsToCanvas(P){return this.current.transferMaps!=="none"&&(P.filter=this.current.transferMaps,P.drawImage(P.canvas,0,0),P.filter="none"),P.canvas}applyTransferMapsToBitmap(P){if(this.current.transferMaps==="none")return P.bitmap;const{bitmap:s,width:p,height:F}=P,U=this.cachedCanvases.getCanvas("inlineImage",p,F),X=U.context;return X.filter=this.current.transferMaps,X.drawImage(s,0,0),X.filter="none",U.canvas}paintInlineImageXObject(P){if(!this.contentVisible)return;const s=P.width,p=P.height,F=this.ctx;if(this.save(),!N.isNodeJS){const{filter:Y}=F;Y!=="none"&&Y!==""&&(F.filter="none")}F.scale(1/s,-1/p);let U;if(P.bitmap)U=this.applyTransferMapsToBitmap(P);else if(typeof HTMLElement=="function"&&P instanceof HTMLElement||!P.data)U=P;else{const ee=this.cachedCanvases.getCanvas("inlineImage",s,p).context;f(ee,P),U=this.applyTransferMapsToCanvas(ee)}const X=this._scaleImage(U,(0,Z.getCurrentTransformInverse)(F));F.imageSmoothingEnabled=x((0,Z.getCurrentTransform)(F),P.interpolate),d(F,X.img,0,0,X.paintWidth,X.paintHeight,0,-p,s,p),this.compose(),this.restore()}paintInlineImageXObjectGroup(P,s){if(!this.contentVisible)return;const p=this.ctx;let F;if(P.bitmap)F=P.bitmap;else{const U=P.width,X=P.height,ee=this.cachedCanvases.getCanvas("inlineImage",U,X).context;f(ee,P),F=this.applyTransferMapsToCanvas(ee)}for(const U of s)p.save(),p.transform(...U.transform),p.scale(1,-1),d(p,F,U.x,U.y,U.w,U.h,0,-1,1,1),p.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(P){}markPointProps(P,s){}beginMarkedContent(P){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(P,s){P==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(s)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(P){const s=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(P);const p=this.ctx;this.pendingClip&&(s||(this.pendingClip===O?p.clip("evenodd"):p.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),p.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const P=(0,Z.getCurrentTransform)(this.ctx);if(P[1]===0&&P[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(P[0]),Math.abs(P[3]));else{const s=Math.abs(P[0]*P[3]-P[2]*P[1]),p=Math.hypot(P[0],P[2]),F=Math.hypot(P[1],P[3]);this._cachedGetSinglePixelWidth=Math.max(p,F)/s}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:P}=this.current,{a:s,b:p,c:F,d:U}=this.ctx.getTransform();let X,Y;if(p===0&&F===0){const ee=Math.abs(s),_e=Math.abs(U);if(ee===_e)if(P===0)X=Y=1/ee;else{const pe=ee*P;X=Y=pe<1?1/pe:1}else if(P===0)X=1/ee,Y=1/_e;else{const pe=ee*P,ne=_e*P;X=pe<1?1/pe:1,Y=ne<1?1/ne:1}}else{const ee=Math.abs(s*U-p*F),_e=Math.hypot(s,p),pe=Math.hypot(F,U);if(P===0)X=pe/ee,Y=_e/ee;else{const ne=P*ee;X=pe>ne?pe/ne:1,Y=_e>ne?_e/ne:1}}this._cachedScaleForStroking[0]=X,this._cachedScaleForStroking[1]=Y}return this._cachedScaleForStroking}rescaleAndStroke(P){const{ctx:s}=this,{lineWidth:p}=this.current,[F,U]=this.getScaleForStroking();if(s.lineWidth=p||1,F===1&&U===1){s.stroke();return}const X=s.getLineDash();if(P&&s.save(),s.scale(F,U),X.length>0){const Y=Math.max(F,U);s.setLineDash(X.map(ee=>ee/Y)),s.lineDashOffset/=Y}s.stroke(),P&&s.restore()}isContentVisible(){for(let P=this.markedContentStack.length-1;P>=0;P--)if(!this.markedContentStack[P].visible)return!1;return!0}};let y=we;B=new WeakSet,ti=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},I=new WeakSet,ii=function(){if(this.pageColors){const P=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(P!=="none"){const s=this.ctx.filter;this.ctx.filter=P,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=s}}},z.CanvasGraphics=y;for(const q in N.OPS)y.prototype[q]!==void 0&&(y.prototype[N.OPS[q]]=y.prototype[q])},(xe,z,Ae)=>{Object.defineProperty(z,"__esModule",{value:!0}),z.TilingPattern=z.PathType=void 0,z.getShadingPattern=w;var N=Ae(1),Z=Ae(6);const Ee={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};z.PathType=Ee;function oe(m,v){if(!v)return;const f=v[2]-v[0],b=v[3]-v[1],i=new Path2D;i.rect(v[0],v[1],f,b),m.clip(i)}class T{constructor(){this.constructor===T&&(0,N.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,N.unreachable)("Abstract method `getPattern` called.")}}class C extends T{constructor(v){super(),this._type=v[1],this._bbox=v[2],this._colorStops=v[3],this._p0=v[4],this._p1=v[5],this._r0=v[6],this._r1=v[7],this.matrix=null}_createGradient(v){let f;this._type==="axial"?f=v.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(f=v.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const b of this._colorStops)f.addColorStop(b[0],b[1]);return f}getPattern(v,f,b,i){let n;if(i===Ee.STROKE||i===Ee.FILL){const u=f.current.getClippedPathBoundingBox(i,(0,Z.getCurrentTransform)(v))||[0,0,0,0],c=Math.ceil(u[2]-u[0])||1,o=Math.ceil(u[3]-u[1])||1,h=f.cachedCanvases.getCanvas("pattern",c,o,!0),g=h.context;g.clearRect(0,0,g.canvas.width,g.canvas.height),g.beginPath(),g.rect(0,0,g.canvas.width,g.canvas.height),g.translate(-u[0],-u[1]),b=N.Util.transform(b,[1,0,0,1,u[0],u[1]]),g.transform(...f.baseTransform),this.matrix&&g.transform(...this.matrix),oe(g,this._bbox),g.fillStyle=this._createGradient(g),g.fill(),n=v.createPattern(h.canvas,"no-repeat");const x=new DOMMatrix(b);n.setTransform(x)}else oe(v,this._bbox),n=this._createGradient(v);return n}}function a(m,v,f,b,i,n,u,c){const o=v.coords,h=v.colors,g=m.data,x=m.width*4;let j;o[f+1]>o[b+1]&&(j=f,f=b,b=j,j=n,n=u,u=j),o[b+1]>o[i+1]&&(j=b,b=i,i=j,j=u,u=c,c=j),o[f+1]>o[b+1]&&(j=f,f=b,b=j,j=n,n=u,u=j);const V=(o[f]+v.offsetX)*v.scaleX,E=(o[f+1]+v.offsetY)*v.scaleY,O=(o[b]+v.offsetX)*v.scaleX,y=(o[b+1]+v.offsetY)*v.scaleY,B=(o[i]+v.offsetX)*v.scaleX,$=(o[i+1]+v.offsetY)*v.scaleY;if(E>=$)return;const I=h[n],ce=h[n+1],we=h[n+2],q=h[u],P=h[u+1],s=h[u+2],p=h[c],F=h[c+1],U=h[c+2],X=Math.round(E),Y=Math.round($);let ee,_e,pe,ne,de,ye,me,Te;for(let Ie=X;Ie<=Y;Ie++){if(Ie<y){const le=Ie<E?0:(E-Ie)/(E-y);ee=V-(V-O)*le,_e=I-(I-q)*le,pe=ce-(ce-P)*le,ne=we-(we-s)*le}else{let le;Ie>$?le=1:y===$?le=0:le=(y-Ie)/(y-$),ee=O-(O-B)*le,_e=q-(q-p)*le,pe=P-(P-F)*le,ne=s-(s-U)*le}let Se;Ie<E?Se=0:Ie>$?Se=1:Se=(E-Ie)/(E-$),de=V-(V-B)*Se,ye=I-(I-p)*Se,me=ce-(ce-F)*Se,Te=we-(we-U)*Se;const Oe=Math.round(Math.min(ee,de)),ae=Math.round(Math.max(ee,de));let J=x*Ie+Oe*4;for(let le=Oe;le<=ae;le++)Se=(ee-le)/(ee-de),Se<0?Se=0:Se>1&&(Se=1),g[J++]=_e-(_e-ye)*Se|0,g[J++]=pe-(pe-me)*Se|0,g[J++]=ne-(ne-Te)*Se|0,g[J++]=255}}function l(m,v,f){const b=v.coords,i=v.colors;let n,u;switch(v.type){case"lattice":const c=v.verticesPerRow,o=Math.floor(b.length/c)-1,h=c-1;for(n=0;n<o;n++){let g=n*c;for(let x=0;x<h;x++,g++)a(m,f,b[g],b[g+1],b[g+c],i[g],i[g+1],i[g+c]),a(m,f,b[g+c+1],b[g+1],b[g+c],i[g+c+1],i[g+1],i[g+c])}break;case"triangles":for(n=0,u=b.length;n<u;n+=3)a(m,f,b[n],b[n+1],b[n+2],i[n],i[n+1],i[n+2]);break;default:throw new Error("illegal figure")}}class L extends T{constructor(v){super(),this._coords=v[2],this._colors=v[3],this._figures=v[4],this._bounds=v[5],this._bbox=v[7],this._background=v[8],this.matrix=null}_createMeshCanvas(v,f,b){const c=Math.floor(this._bounds[0]),o=Math.floor(this._bounds[1]),h=Math.ceil(this._bounds[2])-c,g=Math.ceil(this._bounds[3])-o,x=Math.min(Math.ceil(Math.abs(h*v[0]*1.1)),3e3),j=Math.min(Math.ceil(Math.abs(g*v[1]*1.1)),3e3),V=h/x,E=g/j,O={coords:this._coords,colors:this._colors,offsetX:-c,offsetY:-o,scaleX:1/V,scaleY:1/E},y=x+2*2,B=j+2*2,$=b.getCanvas("mesh",y,B,!1),I=$.context,ce=I.createImageData(x,j);if(f){const q=ce.data;for(let P=0,s=q.length;P<s;P+=4)q[P]=f[0],q[P+1]=f[1],q[P+2]=f[2],q[P+3]=255}for(const q of this._figures)l(ce,q,O);return I.putImageData(ce,2,2),{canvas:$.canvas,offsetX:c-2*V,offsetY:o-2*E,scaleX:V,scaleY:E}}getPattern(v,f,b,i){oe(v,this._bbox);let n;if(i===Ee.SHADING)n=N.Util.singularValueDecompose2dScale((0,Z.getCurrentTransform)(v));else if(n=N.Util.singularValueDecompose2dScale(f.baseTransform),this.matrix){const c=N.Util.singularValueDecompose2dScale(this.matrix);n=[n[0]*c[0],n[1]*c[1]]}const u=this._createMeshCanvas(n,i===Ee.SHADING?null:this._background,f.cachedCanvases);return i!==Ee.SHADING&&(v.setTransform(...f.baseTransform),this.matrix&&v.transform(...this.matrix)),v.translate(u.offsetX,u.offsetY),v.scale(u.scaleX,u.scaleY),v.createPattern(u.canvas,"no-repeat")}}class S extends T{getPattern(){return"hotpink"}}function w(m){switch(m[0]){case"RadialAxial":return new C(m);case"Mesh":return new L(m);case"Dummy":return new S}throw new Error(`Unknown IR type: ${m[0]}`)}const e={COLORED:1,UNCOLORED:2},d=class{constructor(v,f,b,i,n){this.operatorList=v[2],this.matrix=v[3]||[1,0,0,1,0,0],this.bbox=v[4],this.xstep=v[5],this.ystep=v[6],this.paintType=v[7],this.tilingType=v[8],this.color=f,this.ctx=b,this.canvasGraphicsFactory=i,this.baseTransform=n}createPatternCanvas(v){const f=this.operatorList,b=this.bbox,i=this.xstep,n=this.ystep,u=this.paintType,c=this.tilingType,o=this.color,h=this.canvasGraphicsFactory;(0,N.info)("TilingType: "+c);const g=b[0],x=b[1],j=b[2],V=b[3],E=N.Util.singularValueDecompose2dScale(this.matrix),O=N.Util.singularValueDecompose2dScale(this.baseTransform),y=[E[0]*O[0],E[1]*O[1]],B=this.getSizeAndScale(i,this.ctx.canvas.width,y[0]),$=this.getSizeAndScale(n,this.ctx.canvas.height,y[1]),I=v.cachedCanvases.getCanvas("pattern",B.size,$.size,!0),ce=I.context,we=h.createCanvasGraphics(ce);we.groupLevel=v.groupLevel,this.setFillAndStrokeStyleToContext(we,u,o);let q=g,P=x,s=j,p=V;return g<0&&(q=0,s+=Math.abs(g)),x<0&&(P=0,p+=Math.abs(x)),ce.translate(-(B.scale*q),-($.scale*P)),we.transform(B.scale,0,0,$.scale,0,0),ce.save(),this.clipBbox(we,q,P,s,p),we.baseTransform=(0,Z.getCurrentTransform)(we.ctx),we.executeOperatorList(f),we.endDrawing(),{canvas:I.canvas,scaleX:B.scale,scaleY:$.scale,offsetX:q,offsetY:P}}getSizeAndScale(v,f,b){v=Math.abs(v);const i=Math.max(d.MAX_PATTERN_SIZE,f);let n=Math.ceil(v*b);return n>=i?n=i:b=n/v,{scale:b,size:n}}clipBbox(v,f,b,i,n){const u=i-f,c=n-b;v.ctx.rect(f,b,u,c),v.current.updateRectMinMax((0,Z.getCurrentTransform)(v.ctx),[f,b,i,n]),v.clip(),v.endPath()}setFillAndStrokeStyleToContext(v,f,b){const i=v.ctx,n=v.current;switch(f){case e.COLORED:const u=this.ctx;i.fillStyle=u.fillStyle,i.strokeStyle=u.strokeStyle,n.fillColor=u.fillStyle,n.strokeColor=u.strokeStyle;break;case e.UNCOLORED:const c=N.Util.makeHexColor(b[0],b[1],b[2]);i.fillStyle=c,i.strokeStyle=c,n.fillColor=c,n.strokeColor=c;break;default:throw new N.FormatError(`Unsupported paint type: ${f}`)}}getPattern(v,f,b,i){let n=b;i!==Ee.SHADING&&(n=N.Util.transform(n,f.baseTransform),this.matrix&&(n=N.Util.transform(n,this.matrix)));const u=this.createPatternCanvas(f);let c=new DOMMatrix(n);c=c.translate(u.offsetX,u.offsetY),c=c.scale(1/u.scaleX,1/u.scaleY);const o=v.createPattern(u.canvas,"repeat");return o.setTransform(c),o}};let r=d;$e(r,"MAX_PATTERN_SIZE",3e3),z.TilingPattern=r},(xe,z,Ae)=>{Object.defineProperty(z,"__esModule",{value:!0}),z.convertBlackAndWhiteToRGBA=Ee,z.convertToRGBA=Z,z.grayToRGBA=T;var N=Ae(1);function Z(C){switch(C.kind){case N.ImageKind.GRAYSCALE_1BPP:return Ee(C);case N.ImageKind.RGB_24BPP:return oe(C)}return null}function Ee({src:C,srcPos:a=0,dest:l,width:L,height:S,nonBlackColor:w=4294967295,inverseDecode:e=!1}){const r=N.FeatureTest.isLittleEndian?4278190080:255,[d,m]=e?[w,r]:[r,w],v=L>>3,f=L&7,b=C.length;l=new Uint32Array(l.buffer);let i=0;for(let n=0;n<S;n++){for(const c=a+v;a<c;a++){const o=a<b?C[a]:255;l[i++]=o&128?m:d,l[i++]=o&64?m:d,l[i++]=o&32?m:d,l[i++]=o&16?m:d,l[i++]=o&8?m:d,l[i++]=o&4?m:d,l[i++]=o&2?m:d,l[i++]=o&1?m:d}if(f===0)continue;const u=a<b?C[a++]:255;for(let c=0;c<f;c++)l[i++]=u&1<<7-c?m:d}return{srcPos:a,destPos:i}}function oe({src:C,srcPos:a=0,dest:l,destPos:L=0,width:S,height:w}){let e=0;const r=C.length>>2,d=new Uint32Array(C.buffer,a,r);if(N.FeatureTest.isLittleEndian){for(;e<r-2;e+=3,L+=4){const m=d[e],v=d[e+1],f=d[e+2];l[L]=m|4278190080,l[L+1]=m>>>24|v<<8|4278190080,l[L+2]=v>>>16|f<<16|4278190080,l[L+3]=f>>>8|4278190080}for(let m=e*4,v=C.length;m<v;m+=3)l[L++]=C[m]|C[m+1]<<8|C[m+2]<<16|4278190080}else{for(;e<r-2;e+=3,L+=4){const m=d[e],v=d[e+1],f=d[e+2];l[L]=m|255,l[L+1]=m<<24|v>>>8|255,l[L+2]=v<<16|f>>>16|255,l[L+3]=f<<8|255}for(let m=e*4,v=C.length;m<v;m+=3)l[L++]=C[m]<<24|C[m+1]<<16|C[m+2]<<8|255}return{srcPos:a,destPos:L}}function T(C,a){if(N.FeatureTest.isLittleEndian)for(let l=0,L=C.length;l<L;l++)a[l]=C[l]*65793|4278190080;else for(let l=0,L=C.length;l<L;l++)a[l]=C[l]*16843008|255}},(xe,z)=>{Object.defineProperty(z,"__esModule",{value:!0}),z.GlobalWorkerOptions=void 0;const Ae=Object.create(null);z.GlobalWorkerOptions=Ae,Ae.workerPort=null,Ae.workerSrc=""},(xe,z,Ae)=>{var C,fn,l,pn,S,kt;Object.defineProperty(z,"__esModule",{value:!0}),z.MessageHandler=void 0;var N=Ae(1);const Z={UNKNOWN:0,DATA:1,ERROR:2},Ee={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function oe(e){switch(e instanceof Error||typeof e=="object"&&e!==null||(0,N.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),e.name){case"AbortException":return new N.AbortException(e.message);case"MissingPDFException":return new N.MissingPDFException(e.message);case"PasswordException":return new N.PasswordException(e.message,e.code);case"UnexpectedResponseException":return new N.UnexpectedResponseException(e.message,e.status);case"UnknownErrorException":return new N.UnknownErrorException(e.message,e.details);default:return new N.UnknownErrorException(e.message,e.toString())}}class T{constructor(r,d,m){R(this,C);R(this,l);R(this,S);this.sourceName=r,this.targetName=d,this.comObj=m,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=v=>{const f=v.data;if(f.targetName!==this.sourceName)return;if(f.stream){D(this,l,pn).call(this,f);return}if(f.callback){const i=f.callbackId,n=this.callbackCapabilities[i];if(!n)throw new Error(`Cannot resolve callback ${i}`);if(delete this.callbackCapabilities[i],f.callback===Z.DATA)n.resolve(f.data);else if(f.callback===Z.ERROR)n.reject(oe(f.reason));else throw new Error("Unexpected callback case");return}const b=this.actionHandler[f.action];if(!b)throw new Error(`Unknown action from worker: ${f.action}`);if(f.callbackId){const i=this.sourceName,n=f.sourceName;new Promise(function(u){u(b(f.data))}).then(function(u){m.postMessage({sourceName:i,targetName:n,callback:Z.DATA,callbackId:f.callbackId,data:u})},function(u){m.postMessage({sourceName:i,targetName:n,callback:Z.ERROR,callbackId:f.callbackId,reason:oe(u)})});return}if(f.streamId){D(this,C,fn).call(this,f);return}b(f.data)},m.addEventListener("message",this._onComObjOnMessage)}on(r,d){const m=this.actionHandler;if(m[r])throw new Error(`There is already an actionName called "${r}"`);m[r]=d}send(r,d,m){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:r,data:d},m)}sendWithPromise(r,d,m){const v=this.callbackId++,f=new N.PromiseCapability;this.callbackCapabilities[v]=f;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:r,callbackId:v,data:d},m)}catch(b){f.reject(b)}return f.promise}sendWithStream(r,d,m,v){const f=this.streamId++,b=this.sourceName,i=this.targetName,n=this.comObj;return new ReadableStream({start:u=>{const c=new N.PromiseCapability;return this.streamControllers[f]={controller:u,startCall:c,pullCall:null,cancelCall:null,isClosed:!1},n.postMessage({sourceName:b,targetName:i,action:r,streamId:f,data:d,desiredSize:u.desiredSize},v),c.promise},pull:u=>{const c=new N.PromiseCapability;return this.streamControllers[f].pullCall=c,n.postMessage({sourceName:b,targetName:i,stream:Ee.PULL,streamId:f,desiredSize:u.desiredSize}),c.promise},cancel:u=>{(0,N.assert)(u instanceof Error,"cancel must have a valid reason");const c=new N.PromiseCapability;return this.streamControllers[f].cancelCall=c,this.streamControllers[f].isClosed=!0,n.postMessage({sourceName:b,targetName:i,stream:Ee.CANCEL,streamId:f,reason:oe(u)}),c.promise}},m)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}C=new WeakSet,fn=function(r){const d=r.streamId,m=this.sourceName,v=r.sourceName,f=this.comObj,b=this,i=this.actionHandler[r.action],n={enqueue(u,c=1,o){if(this.isCancelled)return;const h=this.desiredSize;this.desiredSize-=c,h>0&&this.desiredSize<=0&&(this.sinkCapability=new N.PromiseCapability,this.ready=this.sinkCapability.promise),f.postMessage({sourceName:m,targetName:v,stream:Ee.ENQUEUE,streamId:d,chunk:u},o)},close(){this.isCancelled||(this.isCancelled=!0,f.postMessage({sourceName:m,targetName:v,stream:Ee.CLOSE,streamId:d}),delete b.streamSinks[d])},error(u){(0,N.assert)(u instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,f.postMessage({sourceName:m,targetName:v,stream:Ee.ERROR,streamId:d,reason:oe(u)}))},sinkCapability:new N.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:r.desiredSize,ready:null};n.sinkCapability.resolve(),n.ready=n.sinkCapability.promise,this.streamSinks[d]=n,new Promise(function(u){u(i(r.data,n))}).then(function(){f.postMessage({sourceName:m,targetName:v,stream:Ee.START_COMPLETE,streamId:d,success:!0})},function(u){f.postMessage({sourceName:m,targetName:v,stream:Ee.START_COMPLETE,streamId:d,reason:oe(u)})})},l=new WeakSet,pn=function(r){const d=r.streamId,m=this.sourceName,v=r.sourceName,f=this.comObj,b=this.streamControllers[d],i=this.streamSinks[d];switch(r.stream){case Ee.START_COMPLETE:r.success?b.startCall.resolve():b.startCall.reject(oe(r.reason));break;case Ee.PULL_COMPLETE:r.success?b.pullCall.resolve():b.pullCall.reject(oe(r.reason));break;case Ee.PULL:if(!i){f.postMessage({sourceName:m,targetName:v,stream:Ee.PULL_COMPLETE,streamId:d,success:!0});break}i.desiredSize<=0&&r.desiredSize>0&&i.sinkCapability.resolve(),i.desiredSize=r.desiredSize,new Promise(function(n){var u;n((u=i.onPull)==null?void 0:u.call(i))}).then(function(){f.postMessage({sourceName:m,targetName:v,stream:Ee.PULL_COMPLETE,streamId:d,success:!0})},function(n){f.postMessage({sourceName:m,targetName:v,stream:Ee.PULL_COMPLETE,streamId:d,reason:oe(n)})});break;case Ee.ENQUEUE:if((0,N.assert)(b,"enqueue should have stream controller"),b.isClosed)break;b.controller.enqueue(r.chunk);break;case Ee.CLOSE:if((0,N.assert)(b,"close should have stream controller"),b.isClosed)break;b.isClosed=!0,b.controller.close(),D(this,S,kt).call(this,b,d);break;case Ee.ERROR:(0,N.assert)(b,"error should have stream controller"),b.controller.error(oe(r.reason)),D(this,S,kt).call(this,b,d);break;case Ee.CANCEL_COMPLETE:r.success?b.cancelCall.resolve():b.cancelCall.reject(oe(r.reason)),D(this,S,kt).call(this,b,d);break;case Ee.CANCEL:if(!i)break;new Promise(function(n){var u;n((u=i.onCancel)==null?void 0:u.call(i,oe(r.reason)))}).then(function(){f.postMessage({sourceName:m,targetName:v,stream:Ee.CANCEL_COMPLETE,streamId:d,success:!0})},function(n){f.postMessage({sourceName:m,targetName:v,stream:Ee.CANCEL_COMPLETE,streamId:d,reason:oe(n)})}),i.sinkCapability.reject(oe(r.reason)),i.isCancelled=!0,delete this.streamSinks[d];break;default:throw new Error("Unexpected stream case")}},S=new WeakSet,kt=async function(r,d){var m,v,f;await Promise.allSettled([(m=r.startCall)==null?void 0:m.promise,(v=r.pullCall)==null?void 0:v.promise,(f=r.cancelCall)==null?void 0:f.promise]),delete this.streamControllers[d]},z.MessageHandler=T},(xe,z,Ae)=>{var Ee,oe;Object.defineProperty(z,"__esModule",{value:!0}),z.Metadata=void 0;var N=Ae(1);class Z{constructor({parsedData:C,rawData:a}){R(this,Ee,void 0);R(this,oe,void 0);ie(this,Ee,C),ie(this,oe,a)}getRaw(){return t(this,oe)}get(C){return t(this,Ee).get(C)??null}getAll(){return(0,N.objectFromMap)(t(this,Ee))}has(C){return t(this,Ee).has(C)}}Ee=new WeakMap,oe=new WeakMap,z.Metadata=Z},(xe,z,Ae)=>{var C,a,l,L,S,w,ni;Object.defineProperty(z,"__esModule",{value:!0}),z.OptionalContentConfig=void 0;var N=Ae(1),Z=Ae(8);const Ee=Symbol("INTERNAL");class oe{constructor(d,m){R(this,C,!0);this.name=d,this.intent=m}get visible(){return t(this,C)}_setVisible(d,m){d!==Ee&&(0,N.unreachable)("Internal method `_setVisible` called."),ie(this,C,m)}}C=new WeakMap;class T{constructor(d){R(this,w);R(this,a,null);R(this,l,new Map);R(this,L,null);R(this,S,null);if(this.name=null,this.creator=null,d!==null){this.name=d.name,this.creator=d.creator,ie(this,S,d.order);for(const m of d.groups)t(this,l).set(m.id,new oe(m.name,m.intent));if(d.baseState==="OFF")for(const m of t(this,l).values())m._setVisible(Ee,!1);for(const m of d.on)t(this,l).get(m)._setVisible(Ee,!0);for(const m of d.off)t(this,l).get(m)._setVisible(Ee,!1);ie(this,L,this.getHash())}}isVisible(d){if(t(this,l).size===0)return!0;if(!d)return(0,N.warn)("Optional content group not defined."),!0;if(d.type==="OCG")return t(this,l).has(d.id)?t(this,l).get(d.id).visible:((0,N.warn)(`Optional content group not found: ${d.id}`),!0);if(d.type==="OCMD"){if(d.expression)return D(this,w,ni).call(this,d.expression);if(!d.policy||d.policy==="AnyOn"){for(const m of d.ids){if(!t(this,l).has(m))return(0,N.warn)(`Optional content group not found: ${m}`),!0;if(t(this,l).get(m).visible)return!0}return!1}else if(d.policy==="AllOn"){for(const m of d.ids){if(!t(this,l).has(m))return(0,N.warn)(`Optional content group not found: ${m}`),!0;if(!t(this,l).get(m).visible)return!1}return!0}else if(d.policy==="AnyOff"){for(const m of d.ids){if(!t(this,l).has(m))return(0,N.warn)(`Optional content group not found: ${m}`),!0;if(!t(this,l).get(m).visible)return!0}return!1}else if(d.policy==="AllOff"){for(const m of d.ids){if(!t(this,l).has(m))return(0,N.warn)(`Optional content group not found: ${m}`),!0;if(t(this,l).get(m).visible)return!1}return!0}return(0,N.warn)(`Unknown optional content policy ${d.policy}.`),!0}return(0,N.warn)(`Unknown group type ${d.type}.`),!0}setVisibility(d,m=!0){if(!t(this,l).has(d)){(0,N.warn)(`Optional content group not found: ${d}`);return}t(this,l).get(d)._setVisible(Ee,!!m),ie(this,a,null)}get hasInitialVisibility(){return this.getHash()===t(this,L)}getOrder(){return t(this,l).size?t(this,S)?t(this,S).slice():[...t(this,l).keys()]:null}getGroups(){return t(this,l).size>0?(0,N.objectFromMap)(t(this,l)):null}getGroup(d){return t(this,l).get(d)||null}getHash(){if(t(this,a)!==null)return t(this,a);const d=new Z.MurmurHash3_64;for(const[m,v]of t(this,l))d.update(`${m}:${v.visible}`);return ie(this,a,d.hexdigest())}}a=new WeakMap,l=new WeakMap,L=new WeakMap,S=new WeakMap,w=new WeakSet,ni=function(d){const m=d.length;if(m<2)return!0;const v=d[0];for(let f=1;f<m;f++){const b=d[f];let i;if(Array.isArray(b))i=D(this,w,ni).call(this,b);else if(t(this,l).has(b))i=t(this,l).get(b).visible;else return(0,N.warn)(`Optional content group not found: ${b}`),!0;switch(v){case"And":if(!i)return!1;break;case"Or":if(i)return!0;break;case"Not":return!i;default:return!0}}return v==="And"},z.OptionalContentConfig=T},(xe,z,Ae)=>{Object.defineProperty(z,"__esModule",{value:!0}),z.PDFDataTransportStream=void 0;var N=Ae(1),Z=Ae(6);class Ee{constructor({length:a,initialData:l,progressiveDone:L=!1,contentDispositionFilename:S=null,disableRange:w=!1,disableStream:e=!1},r){if((0,N.assert)(r,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=L,this._contentDispositionFilename=S,(l==null?void 0:l.length)>0){const d=l instanceof Uint8Array&&l.byteLength===l.buffer.byteLength?l.buffer:new Uint8Array(l).buffer;this._queuedChunks.push(d)}this._pdfDataRangeTransport=r,this._isStreamingSupported=!e,this._isRangeSupported=!w,this._contentLength=a,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((d,m)=>{this._onReceiveData({begin:d,chunk:m})}),this._pdfDataRangeTransport.addProgressListener((d,m)=>{this._onProgress({loaded:d,total:m})}),this._pdfDataRangeTransport.addProgressiveReadListener(d=>{this._onReceiveData({chunk:d})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:a,chunk:l}){const L=l instanceof Uint8Array&&l.byteLength===l.buffer.byteLength?l.buffer:new Uint8Array(l).buffer;if(a===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(L):this._queuedChunks.push(L);else{const S=this._rangeReaders.some(function(w){return w._begin!==a?!1:(w._enqueue(L),!0)});(0,N.assert)(S,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var a;return((a=this._fullRequestReader)==null?void 0:a._loaded)??0}_onProgress(a){var l,L,S,w;a.total===void 0?(L=(l=this._rangeReaders[0])==null?void 0:l.onProgress)==null||L.call(l,{loaded:a.loaded}):(w=(S=this._fullRequestReader)==null?void 0:S.onProgress)==null||w.call(S,{loaded:a.loaded,total:a.total})}_onProgressiveDone(){var a;(a=this._fullRequestReader)==null||a.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(a){const l=this._rangeReaders.indexOf(a);l>=0&&this._rangeReaders.splice(l,1)}getFullReader(){(0,N.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const a=this._queuedChunks;return this._queuedChunks=null,new oe(this,a,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(a,l){if(l<=this._progressiveDataLength)return null;const L=new T(this,a,l);return this._pdfDataRangeTransport.requestDataRange(a,l),this._rangeReaders.push(L),L}cancelAllRequests(a){var l;(l=this._fullRequestReader)==null||l.cancel(a);for(const L of this._rangeReaders.slice(0))L.cancel(a);this._pdfDataRangeTransport.abort()}}z.PDFDataTransportStream=Ee;class oe{constructor(a,l,L=!1,S=null){this._stream=a,this._done=L||!1,this._filename=(0,Z.isPdfFile)(S)?S:null,this._queuedChunks=l||[],this._loaded=0;for(const w of this._queuedChunks)this._loaded+=w.byteLength;this._requests=[],this._headersReady=Promise.resolve(),a._fullRequestReader=this,this.onProgress=null}_enqueue(a){this._done||(this._requests.length>0?this._requests.shift().resolve({value:a,done:!1}):this._queuedChunks.push(a),this._loaded+=a.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const a=new N.PromiseCapability;return this._requests.push(a),a.promise}cancel(a){this._done=!0;for(const l of this._requests)l.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class T{constructor(a,l,L){this._stream=a,this._begin=l,this._end=L,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(a){if(!this._done){if(this._requests.length===0)this._queuedChunk=a;else{this._requests.shift().resolve({value:a,done:!1});for(const L of this._requests)L.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const l=this._queuedChunk;return this._queuedChunk=null,{value:l,done:!1}}if(this._done)return{value:void 0,done:!0};const a=new N.PromiseCapability;return this._requests.push(a),a.promise}cancel(a){this._done=!0;for(const l of this._requests)l.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(xe,z,Ae)=>{Object.defineProperty(z,"__esModule",{value:!0}),z.PDFFetchStream=void 0;var N=Ae(1),Z=Ae(20);function Ee(L,S,w){return{method:"GET",headers:L,signal:w.signal,mode:"cors",credentials:S?"include":"same-origin",redirect:"follow"}}function oe(L){const S=new Headers;for(const w in L){const e=L[w];e!==void 0&&S.append(w,e)}return S}function T(L){return L instanceof Uint8Array?L.buffer:L instanceof ArrayBuffer?L:((0,N.warn)(`getArrayBuffer - unexpected data format: ${L}`),new Uint8Array(L).buffer)}class C{constructor(S){this.source=S,this.isHttp=/^https?:/i.test(S.url),this.httpHeaders=this.isHttp&&S.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var S;return((S=this._fullRequestReader)==null?void 0:S._loaded)??0}getFullReader(){return(0,N.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new a(this),this._fullRequestReader}getRangeReader(S,w){if(w<=this._progressiveDataLength)return null;const e=new l(this,S,w);return this._rangeRequestReaders.push(e),e}cancelAllRequests(S){var w;(w=this._fullRequestReader)==null||w.cancel(S);for(const e of this._rangeRequestReaders.slice(0))e.cancel(S)}}z.PDFFetchStream=C;class a{constructor(S){this._stream=S,this._reader=null,this._loaded=0,this._filename=null;const w=S.source;this._withCredentials=w.withCredentials||!1,this._contentLength=w.length,this._headersCapability=new N.PromiseCapability,this._disableRange=w.disableRange||!1,this._rangeChunkSize=w.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!w.disableStream,this._isRangeSupported=!w.disableRange,this._headers=oe(this._stream.httpHeaders);const e=w.url;fetch(e,Ee(this._headers,this._withCredentials,this._abortController)).then(r=>{if(!(0,Z.validateResponseStatus)(r.status))throw(0,Z.createResponseStatusError)(r.status,e);this._reader=r.body.getReader(),this._headersCapability.resolve();const d=f=>r.headers.get(f),{allowRangeRequests:m,suggestedLength:v}=(0,Z.validateRangeRequestCapabilities)({getResponseHeader:d,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=m,this._contentLength=v||this._contentLength,this._filename=(0,Z.extractFilenameFromHeader)(d),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new N.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;await this._headersCapability.promise;const{value:S,done:w}=await this._reader.read();return w?{value:S,done:w}:(this._loaded+=S.byteLength,(e=this.onProgress)==null||e.call(this,{loaded:this._loaded,total:this._contentLength}),{value:T(S),done:!1})}cancel(S){var w;(w=this._reader)==null||w.cancel(S),this._abortController.abort()}}class l{constructor(S,w,e){this._stream=S,this._reader=null,this._loaded=0;const r=S.source;this._withCredentials=r.withCredentials||!1,this._readCapability=new N.PromiseCapability,this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController,this._headers=oe(this._stream.httpHeaders),this._headers.append("Range",`bytes=${w}-${e-1}`);const d=r.url;fetch(d,Ee(this._headers,this._withCredentials,this._abortController)).then(m=>{if(!(0,Z.validateResponseStatus)(m.status))throw(0,Z.createResponseStatusError)(m.status,d);this._readCapability.resolve(),this._reader=m.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;await this._readCapability.promise;const{value:S,done:w}=await this._reader.read();return w?{value:S,done:w}:(this._loaded+=S.byteLength,(e=this.onProgress)==null||e.call(this,{loaded:this._loaded}),{value:T(S),done:!1})}cancel(S){var w;(w=this._reader)==null||w.cancel(S),this._abortController.abort()}}},(xe,z,Ae)=>{Object.defineProperty(z,"__esModule",{value:!0}),z.createResponseStatusError=C,z.extractFilenameFromHeader=T,z.validateRangeRequestCapabilities=oe,z.validateResponseStatus=a;var N=Ae(1),Z=Ae(21),Ee=Ae(6);function oe({getResponseHeader:l,isHttp:L,rangeChunkSize:S,disableRange:w}){const e={allowRangeRequests:!1,suggestedLength:void 0},r=parseInt(l("Content-Length"),10);return!Number.isInteger(r)||(e.suggestedLength=r,r<=2*S)||w||!L||l("Accept-Ranges")!=="bytes"||(l("Content-Encoding")||"identity")!=="identity"||(e.allowRangeRequests=!0),e}function T(l){const L=l("Content-Disposition");if(L){let S=(0,Z.getFilenameFromContentDispositionHeader)(L);if(S.includes("%"))try{S=decodeURIComponent(S)}catch{}if((0,Ee.isPdfFile)(S))return S}return null}function C(l,L){return l===404||l===0&&L.startsWith("file:")?new N.MissingPDFException('Missing PDF "'+L+'".'):new N.UnexpectedResponseException(`Unexpected server response (${l}) while retrieving PDF "${L}".`,l)}function a(l){return l===200||l===206}},(xe,z,Ae)=>{Object.defineProperty(z,"__esModule",{value:!0}),z.getFilenameFromContentDispositionHeader=Z;var N=Ae(1);function Z(Ee){let oe=!0,T=C("filename\\*","i").exec(Ee);if(T){T=T[1];let r=S(T);return r=unescape(r),r=w(r),r=e(r),l(r)}if(T=L(Ee),T){const r=e(T);return l(r)}if(T=C("filename","i").exec(Ee),T){T=T[1];let r=S(T);return r=e(r),l(r)}function C(r,d){return new RegExp("(?:^|;)\\s*"+r+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',d)}function a(r,d){if(r){if(!/^[\x00-\xFF]+$/.test(d))return d;try{const m=new TextDecoder(r,{fatal:!0}),v=(0,N.stringToBytes)(d);d=m.decode(v),oe=!1}catch{}}return d}function l(r){return oe&&/[\x80-\xff]/.test(r)&&(r=a("utf-8",r),oe&&(r=a("iso-8859-1",r))),r}function L(r){const d=[];let m;const v=C("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(m=v.exec(r))!==null;){let[,b,i,n]=m;if(b=parseInt(b,10),b in d){if(b===0)break;continue}d[b]=[i,n]}const f=[];for(let b=0;b<d.length&&b in d;++b){let[i,n]=d[b];n=S(n),i&&(n=unescape(n),b===0&&(n=w(n))),f.push(n)}return f.join("")}function S(r){if(r.startsWith('"')){const d=r.slice(1).split('\\"');for(let m=0;m<d.length;++m){const v=d[m].indexOf('"');v!==-1&&(d[m]=d[m].slice(0,v),d.length=m+1),d[m]=d[m].replaceAll(/\\(.)/g,"$1")}r=d.join('"')}return r}function w(r){const d=r.indexOf("'");if(d===-1)return r;const m=r.slice(0,d),f=r.slice(d+1).replace(/^[^']*'/,"");return a(m,f)}function e(r){return!r.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(r)?r:r.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(d,m,v,f){if(v==="q"||v==="Q")return f=f.replaceAll("_"," "),f=f.replaceAll(/=([0-9a-fA-F]{2})/g,function(b,i){return String.fromCharCode(parseInt(i,16))}),a(m,f);try{f=atob(f)}catch{}return a(m,f)})}return""}},(xe,z,Ae)=>{Object.defineProperty(z,"__esModule",{value:!0}),z.PDFNetworkStream=void 0;var N=Ae(1),Z=Ae(20);const Ee=200,oe=206;function T(S){const w=S.response;return typeof w!="string"?w:(0,N.stringToBytes)(w).buffer}class C{constructor(w,e={}){this.url=w,this.isHttp=/^https?:/i.test(w),this.httpHeaders=this.isHttp&&e.httpHeaders||Object.create(null),this.withCredentials=e.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(w,e,r){const d={begin:w,end:e};for(const m in r)d[m]=r[m];return this.request(d)}requestFull(w){return this.request(w)}request(w){const e=new XMLHttpRequest,r=this.currXhrId++,d=this.pendingRequests[r]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const m in this.httpHeaders){const v=this.httpHeaders[m];v!==void 0&&e.setRequestHeader(m,v)}return this.isHttp&&"begin"in w&&"end"in w?(e.setRequestHeader("Range",`bytes=${w.begin}-${w.end-1}`),d.expectedStatus=oe):d.expectedStatus=Ee,e.responseType="arraybuffer",w.onError&&(e.onerror=function(m){w.onError(e.status)}),e.onreadystatechange=this.onStateChange.bind(this,r),e.onprogress=this.onProgress.bind(this,r),d.onHeadersReceived=w.onHeadersReceived,d.onDone=w.onDone,d.onError=w.onError,d.onProgress=w.onProgress,e.send(null),r}onProgress(w,e){var d;const r=this.pendingRequests[w];r&&((d=r.onProgress)==null||d.call(r,e))}onStateChange(w,e){var b,i,n;const r=this.pendingRequests[w];if(!r)return;const d=r.xhr;if(d.readyState>=2&&r.onHeadersReceived&&(r.onHeadersReceived(),delete r.onHeadersReceived),d.readyState!==4||!(w in this.pendingRequests))return;if(delete this.pendingRequests[w],d.status===0&&this.isHttp){(b=r.onError)==null||b.call(r,d.status);return}const m=d.status||Ee;if(!(m===Ee&&r.expectedStatus===oe)&&m!==r.expectedStatus){(i=r.onError)==null||i.call(r,d.status);return}const f=T(d);if(m===oe){const u=d.getResponseHeader("Content-Range"),c=/bytes (\d+)-(\d+)\/(\d+)/.exec(u);r.onDone({begin:parseInt(c[1],10),chunk:f})}else f?r.onDone({begin:0,chunk:f}):(n=r.onError)==null||n.call(r,d.status)}getRequestXhr(w){return this.pendingRequests[w].xhr}isPendingRequest(w){return w in this.pendingRequests}abortRequest(w){const e=this.pendingRequests[w].xhr;delete this.pendingRequests[w],e.abort()}}class a{constructor(w){this._source=w,this._manager=new C(w.url,{httpHeaders:w.httpHeaders,withCredentials:w.withCredentials}),this._rangeChunkSize=w.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(w){const e=this._rangeRequestReaders.indexOf(w);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return(0,N.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new l(this._manager,this._source),this._fullRequestReader}getRangeReader(w,e){const r=new L(this._manager,w,e);return r.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(r),r}cancelAllRequests(w){var e;(e=this._fullRequestReader)==null||e.cancel(w);for(const r of this._rangeRequestReaders.slice(0))r.cancel(w)}}z.PDFNetworkStream=a;class l{constructor(w,e){this._manager=w;const r={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._fullRequestId=w.requestFull(r),this._headersReceivedCapability=new N.PromiseCapability,this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const w=this._fullRequestId,e=this._manager.getRequestXhr(w),r=v=>e.getResponseHeader(v),{allowRangeRequests:d,suggestedLength:m}=(0,Z.validateRangeRequestCapabilities)({getResponseHeader:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});d&&(this._isRangeSupported=!0),this._contentLength=m||this._contentLength,this._filename=(0,Z.extractFilenameFromHeader)(r),this._isRangeSupported&&this._manager.abortRequest(w),this._headersReceivedCapability.resolve()}_onDone(w){if(w&&(this._requests.length>0?this._requests.shift().resolve({value:w.chunk,done:!1}):this._cachedChunks.push(w.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(w){this._storedError=(0,Z.createResponseStatusError)(w,this._url),this._headersReceivedCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(w){var e;(e=this.onProgress)==null||e.call(this,{loaded:w.loaded,total:w.lengthComputable?w.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const w=new N.PromiseCapability;return this._requests.push(w),w.promise}cancel(w){this._done=!0,this._headersReceivedCapability.reject(w);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class L{constructor(w,e,r){this._manager=w;const d={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=w.url,this._requestId=w.requestRange(e,r,d),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var w;(w=this.onClosed)==null||w.call(this,this)}_onDone(w){const e=w.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(w){this._storedError=(0,Z.createResponseStatusError)(w,this._url);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(w){var e;this.isStreamingSupported||(e=this.onProgress)==null||e.call(this,{loaded:w.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const w=new N.PromiseCapability;return this._requests.push(w),w.promise}cancel(w){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(xe,z,Ae)=>{Object.defineProperty(z,"__esModule",{value:!0}),z.PDFNodeStream=void 0;var N=Ae(1),Z=Ae(20);const Ee=/^file:\/\/\/[a-zA-Z]:\//;function oe(r){const d=require$$5,m=d.parse(r);return m.protocol==="file:"||m.host?m:/^[a-z]:[/\\]/i.test(r)?d.parse(`file:///${r}`):(m.host||(m.protocol="file:"),m)}class T{constructor(d){this.source=d,this.url=oe(d.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&d.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var d;return((d=this._fullRequestReader)==null?void 0:d._loaded)??0}getFullReader(){return(0,N.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new w(this):new L(this),this._fullRequestReader}getRangeReader(d,m){if(m<=this._progressiveDataLength)return null;const v=this.isFsUrl?new e(this,d,m):new S(this,d,m);return this._rangeRequestReaders.push(v),v}cancelAllRequests(d){var m;(m=this._fullRequestReader)==null||m.cancel(d);for(const v of this._rangeRequestReaders.slice(0))v.cancel(d)}}z.PDFNodeStream=T;class C{constructor(d){this._url=d.url,this._done=!1,this._storedError=null,this.onProgress=null;const m=d.source;this._contentLength=m.length,this._loaded=0,this._filename=null,this._disableRange=m.disableRange||!1,this._rangeChunkSize=m.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!m.disableStream,this._isRangeSupported=!m.disableRange,this._readableStream=null,this._readCapability=new N.PromiseCapability,this._headersCapability=new N.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var v;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const d=this._readableStream.read();return d===null?(this._readCapability=new N.PromiseCapability,this.read()):(this._loaded+=d.length,(v=this.onProgress)==null||v.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(d).buffer,done:!1})}cancel(d){if(!this._readableStream){this._error(d);return}this._readableStream.destroy(d)}_error(d){this._storedError=d,this._readCapability.resolve()}_setReadableStream(d){this._readableStream=d,d.on("readable",()=>{this._readCapability.resolve()}),d.on("end",()=>{d.destroy(),this._done=!0,this._readCapability.resolve()}),d.on("error",m=>{this._error(m)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new N.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class a{constructor(d){this._url=d.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new N.PromiseCapability;const m=d.source;this._isStreamingSupported=!m.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var v;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const d=this._readableStream.read();return d===null?(this._readCapability=new N.PromiseCapability,this.read()):(this._loaded+=d.length,(v=this.onProgress)==null||v.call(this,{loaded:this._loaded}),{value:new Uint8Array(d).buffer,done:!1})}cancel(d){if(!this._readableStream){this._error(d);return}this._readableStream.destroy(d)}_error(d){this._storedError=d,this._readCapability.resolve()}_setReadableStream(d){this._readableStream=d,d.on("readable",()=>{this._readCapability.resolve()}),d.on("end",()=>{d.destroy(),this._done=!0,this._readCapability.resolve()}),d.on("error",m=>{this._error(m)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function l(r,d){return{protocol:r.protocol,auth:r.auth,host:r.hostname,port:r.port,path:r.path,method:"GET",headers:d}}class L extends C{constructor(d){super(d);const m=v=>{if(v.statusCode===404){const n=new N.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=n,this._headersCapability.reject(n);return}this._headersCapability.resolve(),this._setReadableStream(v);const f=n=>this._readableStream.headers[n.toLowerCase()],{allowRangeRequests:b,suggestedLength:i}=(0,Z.validateRangeRequestCapabilities)({getResponseHeader:f,isHttp:d.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=b,this._contentLength=i||this._contentLength,this._filename=(0,Z.extractFilenameFromHeader)(f)};if(this._request=null,this._url.protocol==="http:"){const v=require$$5;this._request=v.request(l(this._url,d.httpHeaders),m)}else{const v=require$$5;this._request=v.request(l(this._url,d.httpHeaders),m)}this._request.on("error",v=>{this._storedError=v,this._headersCapability.reject(v)}),this._request.end()}}class S extends a{constructor(d,m,v){super(d),this._httpHeaders={};for(const b in d.httpHeaders){const i=d.httpHeaders[b];i!==void 0&&(this._httpHeaders[b]=i)}this._httpHeaders.Range=`bytes=${m}-${v-1}`;const f=b=>{if(b.statusCode===404){const i=new N.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=i;return}this._setReadableStream(b)};if(this._request=null,this._url.protocol==="http:"){const b=require$$5;this._request=b.request(l(this._url,this._httpHeaders),f)}else{const b=require$$5;this._request=b.request(l(this._url,this._httpHeaders),f)}this._request.on("error",b=>{this._storedError=b}),this._request.end()}}class w extends C{constructor(d){super(d);let m=decodeURIComponent(this._url.path);Ee.test(this._url.href)&&(m=m.replace(/^\//,""));const v=require$$5;v.lstat(m,(f,b)=>{if(f){f.code==="ENOENT"&&(f=new N.MissingPDFException(`Missing PDF "${m}".`)),this._storedError=f,this._headersCapability.reject(f);return}this._contentLength=b.size,this._setReadableStream(v.createReadStream(m)),this._headersCapability.resolve()})}}class e extends a{constructor(d,m,v){super(d);let f=decodeURIComponent(this._url.path);Ee.test(this._url.href)&&(f=f.replace(/^\//,""));const b=require$$5;this._setReadableStream(b.createReadStream(f,{start:m,end:v-1}))}}},(xe,z,Ae)=>{Object.defineProperty(z,"__esModule",{value:!0}),z.SVGGraphics=void 0;var N=Ae(6),Z=Ae(1);const Ee={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},oe="http://www.w3.org/XML/1998/namespace",T="http://www.w3.org/1999/xlink",C=["butt","round","square"],a=["miter","round","bevel"],l=function(b,i="",n=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!n)return URL.createObjectURL(new Blob([b],{type:i}));const u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let c=`data:${i};base64,`;for(let o=0,h=b.length;o<h;o+=3){const g=b[o]&255,x=b[o+1]&255,j=b[o+2]&255,V=g>>2,E=(g&3)<<4|x>>4,O=o+1<h?(x&15)<<2|j>>6:64,y=o+2<h?j&63:64;c+=u[V]+u[E]+u[O]+u[y]}return c},L=function(){const b=new Uint8Array([137,80,78,71,13,10,26,10]),i=12,n=new Int32Array(256);for(let j=0;j<256;j++){let V=j;for(let E=0;E<8;E++)V=V&1?3988292384^V>>1&2147483647:V>>1&2147483647;n[j]=V}function u(j,V,E){let O=-1;for(let y=V;y<E;y++){const B=(O^j[y])&255,$=n[B];O=O>>>8^$}return O^-1}function c(j,V,E,O){let y=O;const B=V.length;E[y]=B>>24&255,E[y+1]=B>>16&255,E[y+2]=B>>8&255,E[y+3]=B&255,y+=4,E[y]=j.charCodeAt(0)&255,E[y+1]=j.charCodeAt(1)&255,E[y+2]=j.charCodeAt(2)&255,E[y+3]=j.charCodeAt(3)&255,y+=4,E.set(V,y),y+=V.length;const $=u(E,O+4,y);E[y]=$>>24&255,E[y+1]=$>>16&255,E[y+2]=$>>8&255,E[y+3]=$&255}function o(j,V,E){let O=1,y=0;for(let B=V;B<E;++B)O=(O+(j[B]&255))%65521,y=(y+O)%65521;return y<<16|O}function h(j){if(!Z.isNodeJS)return g(j);try{const V=parseInt(process.versions.node)>=8?j:Buffer.from(j),E=require$$5.deflateSync(V,{level:9});return E instanceof Uint8Array?E:new Uint8Array(E)}catch(V){(0,Z.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+V)}return g(j)}function g(j){let V=j.length;const E=65535,O=Math.ceil(V/E),y=new Uint8Array(2+V+O*5+4);let B=0;y[B++]=120,y[B++]=156;let $=0;for(;V>E;)y[B++]=0,y[B++]=255,y[B++]=255,y[B++]=0,y[B++]=0,y.set(j.subarray($,$+E),B),B+=E,$+=E,V-=E;y[B++]=1,y[B++]=V&255,y[B++]=V>>8&255,y[B++]=~V&65535&255,y[B++]=(~V&65535)>>8&255,y.set(j.subarray($),B),B+=j.length-$;const I=o(j,0,j.length);return y[B++]=I>>24&255,y[B++]=I>>16&255,y[B++]=I>>8&255,y[B++]=I&255,y}function x(j,V,E,O){const y=j.width,B=j.height;let $,I,ce;const we=j.data;switch(V){case Z.ImageKind.GRAYSCALE_1BPP:I=0,$=1,ce=y+7>>3;break;case Z.ImageKind.RGB_24BPP:I=2,$=8,ce=y*3;break;case Z.ImageKind.RGBA_32BPP:I=6,$=8,ce=y*4;break;default:throw new Error("invalid format")}const q=new Uint8Array((1+ce)*B);let P=0,s=0;for(let ee=0;ee<B;++ee)q[P++]=0,q.set(we.subarray(s,s+ce),P),s+=ce,P+=ce;if(V===Z.ImageKind.GRAYSCALE_1BPP&&O){P=0;for(let ee=0;ee<B;ee++){P++;for(let _e=0;_e<ce;_e++)q[P++]^=255}}const p=new Uint8Array([y>>24&255,y>>16&255,y>>8&255,y&255,B>>24&255,B>>16&255,B>>8&255,B&255,$,I,0,0,0]),F=h(q),U=b.length+i*3+p.length+F.length,X=new Uint8Array(U);let Y=0;return X.set(b,Y),Y+=b.length,c("IHDR",p,X,Y),Y+=i+p.length,c("IDATA",F,X,Y),Y+=i+F.length,c("IEND",new Uint8Array(0),X,Y),l(X,"image/png",E)}return function(V,E,O){const y=V.kind===void 0?Z.ImageKind.GRAYSCALE_1BPP:V.kind;return x(V,y,E,O)}}();class S{constructor(){this.fontSizeScale=1,this.fontWeight=Ee.fontWeight,this.fontSize=0,this.textMatrix=Z.IDENTITY_MATRIX,this.fontMatrix=Z.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=Z.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=Ee.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(i,n){this.x=i,this.y=n}}function w(b){let i=[];const n=[];for(const u of b){if(u.fn==="save"){i.push({fnId:92,fn:"group",items:[]}),n.push(i),i=i.at(-1).items;continue}u.fn==="restore"?i=n.pop():i.push(u)}return i}function e(b){if(Number.isInteger(b))return b.toString();const i=b.toFixed(10);let n=i.length-1;if(i[n]!=="0")return i;do n--;while(i[n]==="0");return i.substring(0,i[n]==="."?n:n+1)}function r(b){if(b[4]===0&&b[5]===0){if(b[1]===0&&b[2]===0)return b[0]===1&&b[3]===1?"":`scale(${e(b[0])} ${e(b[3])})`;if(b[0]===b[3]&&b[1]===-b[2]){const i=Math.acos(b[0])*180/Math.PI;return`rotate(${e(i)})`}}else if(b[0]===1&&b[1]===0&&b[2]===0&&b[3]===1)return`translate(${e(b[4])} ${e(b[5])})`;return`matrix(${e(b[0])} ${e(b[1])} ${e(b[2])} ${e(b[3])} ${e(b[4])} ${e(b[5])})`}let d=0,m=0,v=0;class f{constructor(i,n,u=!1){(0,N.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new N.DOMSVGFactory,this.current=new S,this.transformMatrix=Z.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=i,this.objs=n,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!u,this._operatorIdMapping=[];for(const c in Z.OPS)this._operatorIdMapping[Z.OPS[c]]=c}getObject(i,n=null){return typeof i=="string"?i.startsWith("g_")?this.commonObjs.get(i):this.objs.get(i):n}save(){this.transformStack.push(this.transformMatrix);const i=this.current;this.extraStack.push(i),this.current=i.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(i){this.save(),this.executeOpTree(i),this.restore()}loadDependencies(i){const n=i.fnArray,u=i.argsArray;for(let c=0,o=n.length;c<o;c++)if(n[c]===Z.OPS.dependency)for(const h of u[c]){const g=h.startsWith("g_")?this.commonObjs:this.objs,x=new Promise(j=>{g.get(h,j)});this.current.dependencies.push(x)}return Promise.all(this.current.dependencies)}transform(i,n,u,c,o,h){const g=[i,n,u,c,o,h];this.transformMatrix=Z.Util.transform(this.transformMatrix,g),this.tgrp=null}getSVG(i,n){this.viewport=n;const u=this._initialize(n);return this.loadDependencies(i).then(()=>(this.transformMatrix=Z.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(i)),u))}convertOpList(i){const n=this._operatorIdMapping,u=i.argsArray,c=i.fnArray,o=[];for(let h=0,g=c.length;h<g;h++){const x=c[h];o.push({fnId:x,fn:n[x],args:u[h]})}return w(o)}executeOpTree(i){for(const n of i){const u=n.fn,c=n.fnId,o=n.args;switch(c|0){case Z.OPS.beginText:this.beginText();break;case Z.OPS.dependency:break;case Z.OPS.setLeading:this.setLeading(o);break;case Z.OPS.setLeadingMoveText:this.setLeadingMoveText(o[0],o[1]);break;case Z.OPS.setFont:this.setFont(o);break;case Z.OPS.showText:this.showText(o[0]);break;case Z.OPS.showSpacedText:this.showText(o[0]);break;case Z.OPS.endText:this.endText();break;case Z.OPS.moveText:this.moveText(o[0],o[1]);break;case Z.OPS.setCharSpacing:this.setCharSpacing(o[0]);break;case Z.OPS.setWordSpacing:this.setWordSpacing(o[0]);break;case Z.OPS.setHScale:this.setHScale(o[0]);break;case Z.OPS.setTextMatrix:this.setTextMatrix(o[0],o[1],o[2],o[3],o[4],o[5]);break;case Z.OPS.setTextRise:this.setTextRise(o[0]);break;case Z.OPS.setTextRenderingMode:this.setTextRenderingMode(o[0]);break;case Z.OPS.setLineWidth:this.setLineWidth(o[0]);break;case Z.OPS.setLineJoin:this.setLineJoin(o[0]);break;case Z.OPS.setLineCap:this.setLineCap(o[0]);break;case Z.OPS.setMiterLimit:this.setMiterLimit(o[0]);break;case Z.OPS.setFillRGBColor:this.setFillRGBColor(o[0],o[1],o[2]);break;case Z.OPS.setStrokeRGBColor:this.setStrokeRGBColor(o[0],o[1],o[2]);break;case Z.OPS.setStrokeColorN:this.setStrokeColorN(o);break;case Z.OPS.setFillColorN:this.setFillColorN(o);break;case Z.OPS.shadingFill:this.shadingFill(o[0]);break;case Z.OPS.setDash:this.setDash(o[0],o[1]);break;case Z.OPS.setRenderingIntent:this.setRenderingIntent(o[0]);break;case Z.OPS.setFlatness:this.setFlatness(o[0]);break;case Z.OPS.setGState:this.setGState(o[0]);break;case Z.OPS.fill:this.fill();break;case Z.OPS.eoFill:this.eoFill();break;case Z.OPS.stroke:this.stroke();break;case Z.OPS.fillStroke:this.fillStroke();break;case Z.OPS.eoFillStroke:this.eoFillStroke();break;case Z.OPS.clip:this.clip("nonzero");break;case Z.OPS.eoClip:this.clip("evenodd");break;case Z.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case Z.OPS.paintImageXObject:this.paintImageXObject(o[0]);break;case Z.OPS.paintInlineImageXObject:this.paintInlineImageXObject(o[0]);break;case Z.OPS.paintImageMaskXObject:this.paintImageMaskXObject(o[0]);break;case Z.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(o[0],o[1]);break;case Z.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case Z.OPS.closePath:this.closePath();break;case Z.OPS.closeStroke:this.closeStroke();break;case Z.OPS.closeFillStroke:this.closeFillStroke();break;case Z.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case Z.OPS.nextLine:this.nextLine();break;case Z.OPS.transform:this.transform(o[0],o[1],o[2],o[3],o[4],o[5]);break;case Z.OPS.constructPath:this.constructPath(o[0],o[1]);break;case Z.OPS.endPath:this.endPath();break;case 92:this.group(n.items);break;default:(0,Z.warn)(`Unimplemented operator ${u}`);break}}}setWordSpacing(i){this.current.wordSpacing=i}setCharSpacing(i){this.current.charSpacing=i}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(i,n,u,c,o,h){const g=this.current;g.textMatrix=g.lineMatrix=[i,n,u,c,o,h],g.textMatrixScale=Math.hypot(i,n),g.x=g.lineX=0,g.y=g.lineY=0,g.xcoords=[],g.ycoords=[],g.tspan=this.svgFactory.createElement("svg:tspan"),g.tspan.setAttributeNS(null,"font-family",g.fontFamily),g.tspan.setAttributeNS(null,"font-size",`${e(g.fontSize)}px`),g.tspan.setAttributeNS(null,"y",e(-g.y)),g.txtElement=this.svgFactory.createElement("svg:text"),g.txtElement.append(g.tspan)}beginText(){const i=this.current;i.x=i.lineX=0,i.y=i.lineY=0,i.textMatrix=Z.IDENTITY_MATRIX,i.lineMatrix=Z.IDENTITY_MATRIX,i.textMatrixScale=1,i.tspan=this.svgFactory.createElement("svg:tspan"),i.txtElement=this.svgFactory.createElement("svg:text"),i.txtgrp=this.svgFactory.createElement("svg:g"),i.xcoords=[],i.ycoords=[]}moveText(i,n){const u=this.current;u.x=u.lineX+=i,u.y=u.lineY+=n,u.xcoords=[],u.ycoords=[],u.tspan=this.svgFactory.createElement("svg:tspan"),u.tspan.setAttributeNS(null,"font-family",u.fontFamily),u.tspan.setAttributeNS(null,"font-size",`${e(u.fontSize)}px`),u.tspan.setAttributeNS(null,"y",e(-u.y))}showText(i){const n=this.current,u=n.font,c=n.fontSize;if(c===0)return;const o=n.fontSizeScale,h=n.charSpacing,g=n.wordSpacing,x=n.fontDirection,j=n.textHScale*x,V=u.vertical,E=V?1:-1,O=u.defaultVMetrics,y=c*n.fontMatrix[0];let B=0;for(const ce of i){if(ce===null){B+=x*g;continue}else if(typeof ce=="number"){B+=E*ce*c/1e3;continue}const we=(ce.isSpace?g:0)+h,q=ce.fontChar;let P,s,p=ce.width;if(V){let U;const X=ce.vmetric||O;U=ce.vmetric?X[1]:p*.5,U=-U*y;const Y=X[2]*y;p=X?-X[0]:p,P=U/o,s=(B+Y)/o}else P=B/o,s=0;(ce.isInFont||u.missingFile)&&(n.xcoords.push(n.x+P),V&&n.ycoords.push(-n.y+s),n.tspan.textContent+=q);const F=V?p*y-we*x:p*y+we*x;B+=F}n.tspan.setAttributeNS(null,"x",n.xcoords.map(e).join(" ")),V?n.tspan.setAttributeNS(null,"y",n.ycoords.map(e).join(" ")):n.tspan.setAttributeNS(null,"y",e(-n.y)),V?n.y-=B:n.x+=B*j,n.tspan.setAttributeNS(null,"font-family",n.fontFamily),n.tspan.setAttributeNS(null,"font-size",`${e(n.fontSize)}px`),n.fontStyle!==Ee.fontStyle&&n.tspan.setAttributeNS(null,"font-style",n.fontStyle),n.fontWeight!==Ee.fontWeight&&n.tspan.setAttributeNS(null,"font-weight",n.fontWeight);const $=n.textRenderingMode&Z.TextRenderingMode.FILL_STROKE_MASK;if($===Z.TextRenderingMode.FILL||$===Z.TextRenderingMode.FILL_STROKE?(n.fillColor!==Ee.fillColor&&n.tspan.setAttributeNS(null,"fill",n.fillColor),n.fillAlpha<1&&n.tspan.setAttributeNS(null,"fill-opacity",n.fillAlpha)):n.textRenderingMode===Z.TextRenderingMode.ADD_TO_PATH?n.tspan.setAttributeNS(null,"fill","transparent"):n.tspan.setAttributeNS(null,"fill","none"),$===Z.TextRenderingMode.STROKE||$===Z.TextRenderingMode.FILL_STROKE){const ce=1/(n.textMatrixScale||1);this._setStrokeAttributes(n.tspan,ce)}let I=n.textMatrix;n.textRise!==0&&(I=I.slice(),I[5]+=n.textRise),n.txtElement.setAttributeNS(null,"transform",`${r(I)} scale(${e(j)}, -1)`),n.txtElement.setAttributeNS(oe,"xml:space","preserve"),n.txtElement.append(n.tspan),n.txtgrp.append(n.txtElement),this._ensureTransformGroup().append(n.txtElement)}setLeadingMoveText(i,n){this.setLeading(-n),this.moveText(i,n)}addFontStyle(i){if(!i.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const n=l(i.data,i.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${i.loadedName}"; src: url(${n}); }
`}setFont(i){const n=this.current,u=this.commonObjs.get(i[0]);let c=i[1];n.font=u,this.embedFonts&&!u.missingFile&&!this.embeddedFonts[u.loadedName]&&(this.addFontStyle(u),this.embeddedFonts[u.loadedName]=u),n.fontMatrix=u.fontMatrix||Z.FONT_IDENTITY_MATRIX;let o="normal";u.black?o="900":u.bold&&(o="bold");const h=u.italic?"italic":"normal";c<0?(c=-c,n.fontDirection=-1):n.fontDirection=1,n.fontSize=c,n.fontFamily=u.loadedName,n.fontWeight=o,n.fontStyle=h,n.tspan=this.svgFactory.createElement("svg:tspan"),n.tspan.setAttributeNS(null,"y",e(-n.y)),n.xcoords=[],n.ycoords=[]}endText(){var n;const i=this.current;i.textRenderingMode&Z.TextRenderingMode.ADD_TO_PATH_FLAG&&((n=i.txtElement)!=null&&n.hasChildNodes())&&(i.element=i.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(i){i>0&&(this.current.lineWidth=i)}setLineCap(i){this.current.lineCap=C[i]}setLineJoin(i){this.current.lineJoin=a[i]}setMiterLimit(i){this.current.miterLimit=i}setStrokeAlpha(i){this.current.strokeAlpha=i}setStrokeRGBColor(i,n,u){this.current.strokeColor=Z.Util.makeHexColor(i,n,u)}setFillAlpha(i){this.current.fillAlpha=i}setFillRGBColor(i,n,u){this.current.fillColor=Z.Util.makeHexColor(i,n,u),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(i){this.current.strokeColor=this._makeColorN_Pattern(i)}setFillColorN(i){this.current.fillColor=this._makeColorN_Pattern(i)}shadingFill(i){const{width:n,height:u}=this.viewport,c=Z.Util.inverseTransform(this.transformMatrix),[o,h,g,x]=Z.Util.getAxialAlignedBoundingBox([0,0,n,u],c),j=this.svgFactory.createElement("svg:rect");j.setAttributeNS(null,"x",o),j.setAttributeNS(null,"y",h),j.setAttributeNS(null,"width",g-o),j.setAttributeNS(null,"height",x-h),j.setAttributeNS(null,"fill",this._makeShadingPattern(i)),this.current.fillAlpha<1&&j.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(j)}_makeColorN_Pattern(i){return i[0]==="TilingPattern"?this._makeTilingPattern(i):this._makeShadingPattern(i)}_makeTilingPattern(i){const n=i[1],u=i[2],c=i[3]||Z.IDENTITY_MATRIX,[o,h,g,x]=i[4],j=i[5],V=i[6],E=i[7],O=`shading${v++}`,[y,B,$,I]=Z.Util.normalizeRect([...Z.Util.applyTransform([o,h],c),...Z.Util.applyTransform([g,x],c)]),[ce,we]=Z.Util.singularValueDecompose2dScale(c),q=j*ce,P=V*we,s=this.svgFactory.createElement("svg:pattern");s.setAttributeNS(null,"id",O),s.setAttributeNS(null,"patternUnits","userSpaceOnUse"),s.setAttributeNS(null,"width",q),s.setAttributeNS(null,"height",P),s.setAttributeNS(null,"x",`${y}`),s.setAttributeNS(null,"y",`${B}`);const p=this.svg,F=this.transformMatrix,U=this.current.fillColor,X=this.current.strokeColor,Y=this.svgFactory.create($-y,I-B);if(this.svg=Y,this.transformMatrix=c,E===2){const ee=Z.Util.makeHexColor(...n);this.current.fillColor=ee,this.current.strokeColor=ee}return this.executeOpTree(this.convertOpList(u)),this.svg=p,this.transformMatrix=F,this.current.fillColor=U,this.current.strokeColor=X,s.append(Y.childNodes[0]),this.defs.append(s),`url(#${O})`}_makeShadingPattern(i){switch(typeof i=="string"&&(i=this.objs.get(i)),i[0]){case"RadialAxial":const n=`shading${v++}`,u=i[3];let c;switch(i[1]){case"axial":const o=i[4],h=i[5];c=this.svgFactory.createElement("svg:linearGradient"),c.setAttributeNS(null,"id",n),c.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),c.setAttributeNS(null,"x1",o[0]),c.setAttributeNS(null,"y1",o[1]),c.setAttributeNS(null,"x2",h[0]),c.setAttributeNS(null,"y2",h[1]);break;case"radial":const g=i[4],x=i[5],j=i[6],V=i[7];c=this.svgFactory.createElement("svg:radialGradient"),c.setAttributeNS(null,"id",n),c.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),c.setAttributeNS(null,"cx",x[0]),c.setAttributeNS(null,"cy",x[1]),c.setAttributeNS(null,"r",V),c.setAttributeNS(null,"fx",g[0]),c.setAttributeNS(null,"fy",g[1]),c.setAttributeNS(null,"fr",j);break;default:throw new Error(`Unknown RadialAxial type: ${i[1]}`)}for(const o of u){const h=this.svgFactory.createElement("svg:stop");h.setAttributeNS(null,"offset",o[0]),h.setAttributeNS(null,"stop-color",o[1]),c.append(h)}return this.defs.append(c),`url(#${n})`;case"Mesh":return(0,Z.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${i[0]}`)}}setDash(i,n){this.current.dashArray=i,this.current.dashPhase=n}constructPath(i,n){const u=this.current;let c=u.x,o=u.y,h=[],g=0;for(const x of i)switch(x|0){case Z.OPS.rectangle:c=n[g++],o=n[g++];const j=n[g++],V=n[g++],E=c+j,O=o+V;h.push("M",e(c),e(o),"L",e(E),e(o),"L",e(E),e(O),"L",e(c),e(O),"Z");break;case Z.OPS.moveTo:c=n[g++],o=n[g++],h.push("M",e(c),e(o));break;case Z.OPS.lineTo:c=n[g++],o=n[g++],h.push("L",e(c),e(o));break;case Z.OPS.curveTo:c=n[g+4],o=n[g+5],h.push("C",e(n[g]),e(n[g+1]),e(n[g+2]),e(n[g+3]),e(c),e(o)),g+=6;break;case Z.OPS.curveTo2:h.push("C",e(c),e(o),e(n[g]),e(n[g+1]),e(n[g+2]),e(n[g+3])),c=n[g+2],o=n[g+3],g+=4;break;case Z.OPS.curveTo3:c=n[g+2],o=n[g+3],h.push("C",e(n[g]),e(n[g+1]),e(c),e(o),e(c),e(o)),g+=4;break;case Z.OPS.closePath:h.push("Z");break}h=h.join(" "),u.path&&i.length>0&&i[0]!==Z.OPS.rectangle&&i[0]!==Z.OPS.moveTo?h=u.path.getAttributeNS(null,"d")+h:(u.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(u.path)),u.path.setAttributeNS(null,"d",h),u.path.setAttributeNS(null,"fill","none"),u.element=u.path,u.setCurrentPoint(c,o)}endPath(){const i=this.current;if(i.path=null,!this.pendingClip)return;if(!i.element){this.pendingClip=null;return}const n=`clippath${d++}`,u=this.svgFactory.createElement("svg:clipPath");u.setAttributeNS(null,"id",n),u.setAttributeNS(null,"transform",r(this.transformMatrix));const c=i.element.cloneNode(!0);if(this.pendingClip==="evenodd"?c.setAttributeNS(null,"clip-rule","evenodd"):c.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,u.append(c),this.defs.append(u),i.activeClipUrl){i.clipGroup=null;for(const o of this.extraStack)o.clipGroup=null;u.setAttributeNS(null,"clip-path",i.activeClipUrl)}i.activeClipUrl=`url(#${n})`,this.tgrp=null}clip(i){this.pendingClip=i}closePath(){const i=this.current;if(i.path){const n=`${i.path.getAttributeNS(null,"d")}Z`;i.path.setAttributeNS(null,"d",n)}}setLeading(i){this.current.leading=-i}setTextRise(i){this.current.textRise=i}setTextRenderingMode(i){this.current.textRenderingMode=i}setHScale(i){this.current.textHScale=i/100}setRenderingIntent(i){}setFlatness(i){}setGState(i){for(const[n,u]of i)switch(n){case"LW":this.setLineWidth(u);break;case"LC":this.setLineCap(u);break;case"LJ":this.setLineJoin(u);break;case"ML":this.setMiterLimit(u);break;case"D":this.setDash(u[0],u[1]);break;case"RI":this.setRenderingIntent(u);break;case"FL":this.setFlatness(u);break;case"Font":this.setFont(u);break;case"CA":this.setStrokeAlpha(u);break;case"ca":this.setFillAlpha(u);break;default:(0,Z.warn)(`Unimplemented graphic state operator ${n}`);break}}fill(){const i=this.current;i.element&&(i.element.setAttributeNS(null,"fill",i.fillColor),i.element.setAttributeNS(null,"fill-opacity",i.fillAlpha),this.endPath())}stroke(){const i=this.current;i.element&&(this._setStrokeAttributes(i.element),i.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(i,n=1){const u=this.current;let c=u.dashArray;n!==1&&c.length>0&&(c=c.map(function(o){return n*o})),i.setAttributeNS(null,"stroke",u.strokeColor),i.setAttributeNS(null,"stroke-opacity",u.strokeAlpha),i.setAttributeNS(null,"stroke-miterlimit",e(u.miterLimit)),i.setAttributeNS(null,"stroke-linecap",u.lineCap),i.setAttributeNS(null,"stroke-linejoin",u.lineJoin),i.setAttributeNS(null,"stroke-width",e(n*u.lineWidth)+"px"),i.setAttributeNS(null,"stroke-dasharray",c.map(e).join(" ")),i.setAttributeNS(null,"stroke-dashoffset",e(n*u.dashPhase)+"px")}eoFill(){var i;(i=this.current.element)==null||i.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var i;(i=this.current.element)==null||i.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const i=this.svgFactory.createElement("svg:rect");i.setAttributeNS(null,"x","0"),i.setAttributeNS(null,"y","0"),i.setAttributeNS(null,"width","1px"),i.setAttributeNS(null,"height","1px"),i.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(i)}paintImageXObject(i){const n=this.getObject(i);if(!n){(0,Z.warn)(`Dependent image with object ID ${i} is not ready yet`);return}this.paintInlineImageXObject(n)}paintInlineImageXObject(i,n){const u=i.width,c=i.height,o=L(i,this.forceDataSchema,!!n),h=this.svgFactory.createElement("svg:rect");h.setAttributeNS(null,"x","0"),h.setAttributeNS(null,"y","0"),h.setAttributeNS(null,"width",e(u)),h.setAttributeNS(null,"height",e(c)),this.current.element=h,this.clip("nonzero");const g=this.svgFactory.createElement("svg:image");g.setAttributeNS(T,"xlink:href",o),g.setAttributeNS(null,"x","0"),g.setAttributeNS(null,"y",e(-c)),g.setAttributeNS(null,"width",e(u)+"px"),g.setAttributeNS(null,"height",e(c)+"px"),g.setAttributeNS(null,"transform",`scale(${e(1/u)} ${e(-1/c)})`),n?n.append(g):this._ensureTransformGroup().append(g)}paintImageMaskXObject(i){const n=this.getObject(i.data,i);if(n.bitmap){(0,Z.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const u=this.current,c=n.width,o=n.height,h=u.fillColor;u.maskId=`mask${m++}`;const g=this.svgFactory.createElement("svg:mask");g.setAttributeNS(null,"id",u.maskId);const x=this.svgFactory.createElement("svg:rect");x.setAttributeNS(null,"x","0"),x.setAttributeNS(null,"y","0"),x.setAttributeNS(null,"width",e(c)),x.setAttributeNS(null,"height",e(o)),x.setAttributeNS(null,"fill",h),x.setAttributeNS(null,"mask",`url(#${u.maskId})`),this.defs.append(g),this._ensureTransformGroup().append(x),this.paintInlineImageXObject(n,g)}paintFormXObjectBegin(i,n){if(Array.isArray(i)&&i.length===6&&this.transform(i[0],i[1],i[2],i[3],i[4],i[5]),n){const u=n[2]-n[0],c=n[3]-n[1],o=this.svgFactory.createElement("svg:rect");o.setAttributeNS(null,"x",n[0]),o.setAttributeNS(null,"y",n[1]),o.setAttributeNS(null,"width",e(u)),o.setAttributeNS(null,"height",e(c)),this.current.element=o,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(i){const n=this.svgFactory.create(i.width,i.height),u=this.svgFactory.createElement("svg:defs");n.append(u),this.defs=u;const c=this.svgFactory.createElement("svg:g");return c.setAttributeNS(null,"transform",r(i.transform)),n.append(c),this.svg=c,n}_ensureClipGroup(){if(!this.current.clipGroup){const i=this.svgFactory.createElement("svg:g");i.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(i),this.current.clipGroup=i}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",r(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}z.SVGGraphics=f},(xe,z)=>{Object.defineProperty(z,"__esModule",{value:!0}),z.XfaText=void 0;class Ae{static textContent(Z){const Ee=[],oe={items:Ee,styles:Object.create(null)};function T(C){var L;if(!C)return;let a=null;const l=C.name;if(l==="#text")a=C.value;else if(Ae.shouldBuildText(l))(L=C==null?void 0:C.attributes)!=null&&L.textContent?a=C.attributes.textContent:C.value&&(a=C.value);else return;if(a!==null&&Ee.push({str:a}),!!C.children)for(const S of C.children)T(S)}return T(Z),oe}static shouldBuildText(Z){return!(Z==="textarea"||Z==="input"||Z==="option"||Z==="select")}}z.XfaText=Ae},(xe,z,Ae)=>{Object.defineProperty(z,"__esModule",{value:!0}),z.TextLayerRenderTask=void 0,z.renderTextLayer=r,z.updateTextLayer=d;var N=Ae(1),Z=Ae(6);const Ee=1e5,oe=30,T=.8,C=new Map;function a(m,v){let f;if(v&&N.FeatureTest.isOffscreenCanvasSupported)f=new OffscreenCanvas(m,m).getContext("2d",{alpha:!1});else{const b=document.createElement("canvas");b.width=b.height=m,f=b.getContext("2d",{alpha:!1})}return f}function l(m,v){const f=C.get(m);if(f)return f;const b=a(oe,v);b.font=`${oe}px ${m}`;const i=b.measureText("");let n=i.fontBoundingBoxAscent,u=Math.abs(i.fontBoundingBoxDescent);if(n){const o=n/(n+u);return C.set(m,o),b.canvas.width=b.canvas.height=0,o}b.strokeStyle="red",b.clearRect(0,0,oe,oe),b.strokeText("g",0,0);let c=b.getImageData(0,0,oe,oe).data;u=0;for(let o=c.length-1-3;o>=0;o-=4)if(c[o]>0){u=Math.ceil(o/4/oe);break}b.clearRect(0,0,oe,oe),b.strokeText("A",0,oe),c=b.getImageData(0,0,oe,oe).data,n=0;for(let o=0,h=c.length;o<h;o+=4)if(c[o]>0){n=oe-Math.floor(o/4/oe);break}if(b.canvas.width=b.canvas.height=0,n){const o=n/(n+u);return C.set(m,o),o}return C.set(m,T),T}function L(m,v,f){const b=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:v.str!=="",hasEOL:v.hasEOL,fontSize:0};m._textDivs.push(b);const n=N.Util.transform(m._transform,v.transform);let u=Math.atan2(n[1],n[0]);const c=f[v.fontName];c.vertical&&(u+=Math.PI/2);const o=Math.hypot(n[2],n[3]),h=o*l(c.fontFamily,m._isOffscreenCanvasSupported);let g,x;u===0?(g=n[4],x=n[5]-h):(g=n[4]+h*Math.sin(u),x=n[5]-h*Math.cos(u));const j="calc(var(--scale-factor)*",V=b.style;m._container===m._rootContainer?(V.left=`${(100*g/m._pageWidth).toFixed(2)}%`,V.top=`${(100*x/m._pageHeight).toFixed(2)}%`):(V.left=`${j}${g.toFixed(2)}px)`,V.top=`${j}${x.toFixed(2)}px)`),V.fontSize=`${j}${o.toFixed(2)}px)`,V.fontFamily=c.fontFamily,i.fontSize=o,b.setAttribute("role","presentation"),b.textContent=v.str,b.dir=v.dir,m._fontInspectorEnabled&&(b.dataset.fontName=v.fontName),u!==0&&(i.angle=u*(180/Math.PI));let E=!1;if(v.str.length>1)E=!0;else if(v.str!==" "&&v.transform[0]!==v.transform[3]){const O=Math.abs(v.transform[0]),y=Math.abs(v.transform[3]);O!==y&&Math.max(O,y)/Math.min(O,y)>1.5&&(E=!0)}E&&(i.canvasWidth=c.vertical?v.height:v.width),m._textDivProperties.set(b,i),m._isReadableStream&&m._layoutText(b)}function S(m){const{div:v,scale:f,properties:b,ctx:i,prevFontSize:n,prevFontFamily:u}=m,{style:c}=v;let o="";if(b.canvasWidth!==0&&b.hasText){const{fontFamily:h}=c,{canvasWidth:g,fontSize:x}=b;(n!==x||u!==h)&&(i.font=`${x*f}px ${h}`,m.prevFontSize=x,m.prevFontFamily=h);const{width:j}=i.measureText(v.textContent);j>0&&(o=`scaleX(${g*f/j})`)}b.angle!==0&&(o=`rotate(${b.angle}deg) ${o}`),o.length>0&&(c.transform=o)}function w(m){if(m._canceled)return;const v=m._textDivs,f=m._capability;if(v.length>Ee){f.resolve();return}if(!m._isReadableStream)for(const i of v)m._layoutText(i);f.resolve()}class e{constructor({textContentSource:v,container:f,viewport:b,textDivs:i,textDivProperties:n,textContentItemsStr:u,isOffscreenCanvasSupported:c}){var j;this._textContentSource=v,this._isReadableStream=v instanceof ReadableStream,this._container=this._rootContainer=f,this._textDivs=i||[],this._textContentItemsStr=u||[],this._isOffscreenCanvasSupported=c,this._fontInspectorEnabled=!!((j=globalThis.FontInspector)!=null&&j.enabled),this._reader=null,this._textDivProperties=n||new WeakMap,this._canceled=!1,this._capability=new N.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:b.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:a(0,c)};const{pageWidth:o,pageHeight:h,pageX:g,pageY:x}=b.rawDims;this._transform=[1,0,0,-1,-g,x+h],this._pageWidth=o,this._pageHeight=h,(0,Z.setLayerDimensions)(f,b),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new N.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new N.AbortException("TextLayer task cancelled."))}_processItems(v,f){for(const b of v){if(b.str===void 0){if(b.type==="beginMarkedContentProps"||b.type==="beginMarkedContent"){const i=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),b.id!==null&&this._container.setAttribute("id",`${b.id}`),i.append(this._container)}else b.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(b.str),L(this,b,f)}}_layoutText(v){const f=this._layoutTextParams.properties=this._textDivProperties.get(v);if(this._layoutTextParams.div=v,S(this._layoutTextParams),f.hasText&&this._container.append(v),f.hasEOL){const b=document.createElement("br");b.setAttribute("role","presentation"),this._container.append(b)}}_render(){const v=new N.PromiseCapability;let f=Object.create(null);if(this._isReadableStream){const b=()=>{this._reader.read().then(({value:i,done:n})=>{if(n){v.resolve();return}Object.assign(f,i.styles),this._processItems(i.items,f),b()},v.reject)};this._reader=this._textContentSource.getReader(),b()}else if(this._textContentSource){const{items:b,styles:i}=this._textContentSource;this._processItems(b,i),v.resolve()}else throw new Error('No "textContentSource" parameter specified.');v.promise.then(()=>{f=null,w(this)},this._capability.reject)}}z.TextLayerRenderTask=e;function r(m){!m.textContentSource&&(m.textContent||m.textContentStream)&&((0,Z.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),m.textContentSource=m.textContent||m.textContentStream);const{container:v,viewport:f}=m,b=getComputedStyle(v),i=b.getPropertyValue("visibility"),n=parseFloat(b.getPropertyValue("--scale-factor"));i==="visible"&&(!n||Math.abs(n-f.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const u=new e(m);return u._render(),u}function d({container:m,viewport:v,textDivs:f,textDivProperties:b,isOffscreenCanvasSupported:i,mustRotate:n=!0,mustRescale:u=!0}){if(n&&(0,Z.setLayerDimensions)(m,{rotation:v.rotation}),u){const c=a(0,i),h={prevFontSize:null,prevFontFamily:null,div:null,scale:v.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:c};for(const g of f)h.properties=b.get(g),h.div=g,S(h)}}},(xe,z,Ae)=>{var L,S,w,e,r,d,m,v,f,b,i,si,u,gn,o,ai,g,ri;Object.defineProperty(z,"__esModule",{value:!0}),z.AnnotationEditorLayer=void 0;var N=Ae(1),Z=Ae(4),Ee=Ae(5),oe=Ae(28),T=Ae(33),C=Ae(6),a=Ae(34);const j=class{constructor({uiManager:E,pageIndex:O,div:y,accessibilityManager:B,annotationLayer:$,viewport:I,l10n:ce}){R(this,i);R(this,u);R(this,o);R(this,g);R(this,L,void 0);R(this,S,!1);R(this,w,null);R(this,e,this.pointerup.bind(this));R(this,r,this.pointerdown.bind(this));R(this,d,new Map);R(this,m,!1);R(this,v,!1);R(this,f,!1);R(this,b,void 0);const we=[oe.FreeTextEditor,T.InkEditor,a.StampEditor];if(!j._initialized){j._initialized=!0;for(const q of we)q.initialize(ce)}E.registerEditorTypes(we),ie(this,b,E),this.pageIndex=O,this.div=y,ie(this,L,B),ie(this,w,$),this.viewport=I,t(this,b).addLayer(this)}get isEmpty(){return t(this,d).size===0}updateToolbar(E){t(this,b).updateToolbar(E)}updateMode(E=t(this,b).getMode()){D(this,g,ri).call(this),E===N.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),t(this,b).unselectAll(),E!==N.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",E===N.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",E===N.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",E===N.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(E){if(!E&&t(this,b).getMode()!==N.AnnotationEditorType.INK)return;if(!E){for(const y of t(this,d).values())if(y.isEmpty()){y.setInBackground();return}}D(this,o,ai).call(this,{offsetX:0,offsetY:0}).setInBackground()}setEditingState(E){t(this,b).setEditingState(E)}addCommands(E){t(this,b).addCommands(E)}enable(){this.div.style.pointerEvents="auto";const E=new Set;for(const y of t(this,d).values())y.enableEditing(),y.annotationElementId&&E.add(y.annotationElementId);if(!t(this,w))return;const O=t(this,w).getEditableAnnotations();for(const y of O){if(y.hide(),t(this,b).isDeletedAnnotationElement(y.data.id)||E.has(y.data.id))continue;const B=this.deserialize(y);B&&(this.addOrRebuild(B),B.enableEditing())}}disable(){var O;ie(this,f,!0),this.div.style.pointerEvents="none";const E=new Set;for(const y of t(this,d).values()){if(y.disableEditing(),!y.annotationElementId||y.serialize()!==null){E.add(y.annotationElementId);continue}(O=this.getEditableAnnotation(y.annotationElementId))==null||O.show(),y.remove()}if(t(this,w)){const y=t(this,w).getEditableAnnotations();for(const B of y){const{id:$}=B.data;E.has($)||t(this,b).isDeletedAnnotationElement($)||B.show()}}D(this,g,ri).call(this),this.isEmpty&&(this.div.hidden=!0),ie(this,f,!1)}getEditableAnnotation(E){var O;return((O=t(this,w))==null?void 0:O.getEditableAnnotation(E))||null}setActiveEditor(E){t(this,b).getActive()!==E&&t(this,b).setActiveEditor(E)}enableClick(){this.div.addEventListener("pointerdown",t(this,r)),this.div.addEventListener("pointerup",t(this,e))}disableClick(){this.div.removeEventListener("pointerdown",t(this,r)),this.div.removeEventListener("pointerup",t(this,e))}attach(E){t(this,d).set(E.id,E);const{annotationElementId:O}=E;O&&t(this,b).isDeletedAnnotationElement(O)&&t(this,b).removeDeletedAnnotationElement(E)}detach(E){var O;t(this,d).delete(E.id),(O=t(this,L))==null||O.removePointerInTextLayer(E.contentDiv),!t(this,f)&&E.annotationElementId&&t(this,b).addDeletedAnnotationElement(E)}remove(E){this.detach(E),t(this,b).removeEditor(E),E.div.style.display="none",setTimeout(()=>{E.div.style.display="",E.div.remove(),E.isAttachedToDOM=!1,document.activeElement===document.body&&t(this,b).focusMainContainer()},0),t(this,v)||this.addInkEditorIfNeeded(!1)}add(E){if(D(this,i,si).call(this,E),t(this,b).addEditor(E),this.attach(E),!E.isAttachedToDOM){const O=E.render();this.div.append(O),E.isAttachedToDOM=!0}this.moveEditorInDOM(E),E.onceAdded(),t(this,b).addToAnnotationStorage(E)}moveEditorInDOM(E){var O;(O=t(this,L))==null||O.moveElementInDOM(this.div,E.div,E.contentDiv,!0)}addOrRebuild(E){E.needsToBeRebuilt()?E.rebuild():this.add(E)}addUndoableEditor(E){const O=()=>{this.addOrRebuild(E)},y=()=>{E.remove()};this.addCommands({cmd:O,undo:y,mustExec:!1})}getNextId(){return t(this,b).getId()}deserialize(E){switch(E.annotationType??E.annotationEditorType){case N.AnnotationEditorType.FREETEXT:return oe.FreeTextEditor.deserialize(E,this,t(this,b));case N.AnnotationEditorType.INK:return T.InkEditor.deserialize(E,this,t(this,b));case N.AnnotationEditorType.STAMP:return a.StampEditor.deserialize(E,this,t(this,b))}return null}setSelected(E){t(this,b).setSelected(E)}toggleSelected(E){t(this,b).toggleSelected(E)}isSelected(E){return t(this,b).isSelected(E)}unselect(E){t(this,b).unselect(E)}pointerup(E){const{isMac:O}=N.FeatureTest.platform;if(!(E.button!==0||E.ctrlKey&&O)&&E.target===this.div&&t(this,m)){if(ie(this,m,!1),!t(this,S)){ie(this,S,!0);return}D(this,o,ai).call(this,E)}}pointerdown(E){if(t(this,m)){ie(this,m,!1);return}const{isMac:O}=N.FeatureTest.platform;if(E.button!==0||E.ctrlKey&&O||E.target!==this.div)return;ie(this,m,!0);const y=t(this,b).getActive();ie(this,S,!y||y.isEmpty())}drop(E){const O=E.dataTransfer.getData("text/plain"),y=t(this,b).getEditor(O);if(!y)return;E.preventDefault(),E.dataTransfer.dropEffect="move",D(this,i,si).call(this,y);const B=this.div.getBoundingClientRect(),$=E.clientX-B.x,I=E.clientY-B.y;y.translate($-y.startX,I-y.startY),this.moveEditorInDOM(y),y.div.focus()}dragover(E){E.preventDefault()}destroy(){var E,O;((E=t(this,b).getActive())==null?void 0:E.parent)===this&&t(this,b).setActiveEditor(null);for(const y of t(this,d).values())(O=t(this,L))==null||O.removePointerInTextLayer(y.contentDiv),y.setParent(null),y.isAttachedToDOM=!1,y.div.remove();this.div=null,t(this,d).clear(),t(this,b).removeLayer(this)}render({viewport:E}){this.viewport=E,(0,C.setLayerDimensions)(this.div,E),(0,Ee.bindEvents)(this,this.div,["dragover","drop"]);for(const O of t(this,b).getEditors(this.pageIndex))this.add(O);this.updateMode()}update({viewport:E}){t(this,b).commitOrRemove(),this.viewport=E,(0,C.setLayerDimensions)(this.div,{rotation:E.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:E,pageHeight:O}=this.viewport.rawDims;return[E,O]}};let l=j;L=new WeakMap,S=new WeakMap,w=new WeakMap,e=new WeakMap,r=new WeakMap,d=new WeakMap,m=new WeakMap,v=new WeakMap,f=new WeakMap,b=new WeakMap,i=new WeakSet,si=function(E){var O;E.parent!==this&&(E.annotationElementId&&(t(this,b).addDeletedAnnotationElement(E.annotationElementId),Z.AnnotationEditor.deleteAnnotationElement(E),E.annotationElementId=null),this.attach(E),(O=E.parent)==null||O.detach(E),E.setParent(this),E.div&&E.isAttachedToDOM&&(E.div.remove(),this.div.append(E.div)))},u=new WeakSet,gn=function(E){switch(t(this,b).getMode()){case N.AnnotationEditorType.FREETEXT:return new oe.FreeTextEditor(E);case N.AnnotationEditorType.INK:return new T.InkEditor(E);case N.AnnotationEditorType.STAMP:return new a.StampEditor(E)}return null},o=new WeakSet,ai=function(E){const O=this.getNextId(),y=D(this,u,gn).call(this,{parent:this,id:O,x:E.offsetX,y:E.offsetY,uiManager:t(this,b)});return y&&this.add(y),y},g=new WeakSet,ri=function(){ie(this,v,!0);for(const E of t(this,d).values())E.isEmpty()&&E.remove();ie(this,v,!1)},$e(l,"_initialized",!1),z.AnnotationEditorLayer=l},(xe,z,Ae)=>{var C,a,l,L,S,w,e,r,d,m,mn,f,bn,i,_n,u,vt,o,oi,g,vn,j,li;Object.defineProperty(z,"__esModule",{value:!0}),z.FreeTextEditor=void 0;var N=Ae(1),Z=Ae(5),Ee=Ae(4),oe=Ae(29);const E=class extends Ee.AnnotationEditor{constructor(B){super({...B,name:"freeTextEditor"});R(this,m);R(this,f);R(this,i);R(this,u);R(this,o);R(this,g);R(this,j);R(this,C,this.editorDivBlur.bind(this));R(this,a,this.editorDivFocus.bind(this));R(this,l,this.editorDivInput.bind(this));R(this,L,this.editorDivKeydown.bind(this));R(this,S,void 0);R(this,w,"");R(this,e,`${this.id}-editor`);R(this,r,void 0);R(this,d,null);ie(this,S,B.color||E._defaultColor||Ee.AnnotationEditor._defaultLineColor),ie(this,r,B.fontSize||E._defaultFontSize)}static get _keyboardManager(){const B=E.prototype,$=we=>we.isEmpty(),I=Z.AnnotationEditorUIManager.TRANSLATE_SMALL,ce=Z.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,N.shadow)(this,"_keyboardManager",new Z.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],B.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],B.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],B._translateEmpty,{args:[-I,0],checker:$}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],B._translateEmpty,{args:[-ce,0],checker:$}],[["ArrowRight","mac+ArrowRight"],B._translateEmpty,{args:[I,0],checker:$}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],B._translateEmpty,{args:[ce,0],checker:$}],[["ArrowUp","mac+ArrowUp"],B._translateEmpty,{args:[0,-I],checker:$}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],B._translateEmpty,{args:[0,-ce],checker:$}],[["ArrowDown","mac+ArrowDown"],B._translateEmpty,{args:[0,I],checker:$}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],B._translateEmpty,{args:[0,ce],checker:$}]]))}static initialize(B){this._l10nPromise=new Map(["free_text2_default_content","editor_free_text2_aria_label"].map(I=>[I,B.get(I)]));const $=getComputedStyle(document.documentElement);this._internalPadding=parseFloat($.getPropertyValue("--freetext-padding"))}static updateDefaultParams(B,$){switch(B){case N.AnnotationEditorParamsType.FREETEXT_SIZE:E._defaultFontSize=$;break;case N.AnnotationEditorParamsType.FREETEXT_COLOR:E._defaultColor=$;break}}updateParams(B,$){switch(B){case N.AnnotationEditorParamsType.FREETEXT_SIZE:D(this,m,mn).call(this,$);break;case N.AnnotationEditorParamsType.FREETEXT_COLOR:D(this,f,bn).call(this,$);break}}static get defaultPropertiesToUpdate(){return[[N.AnnotationEditorParamsType.FREETEXT_SIZE,E._defaultFontSize],[N.AnnotationEditorParamsType.FREETEXT_COLOR,E._defaultColor||Ee.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[N.AnnotationEditorParamsType.FREETEXT_SIZE,t(this,r)],[N.AnnotationEditorParamsType.FREETEXT_COLOR,t(this,S)]]}_translateEmpty(B,$){this._uiManager.translateSelectedEditors(B,$,!0)}getInitialTranslation(){const B=this.parentScale;return[-E._internalPadding*B,-(E._internalPadding+t(this,r))*B]}rebuild(){super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(N.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this.div.draggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",t(this,L)),this.editorDiv.addEventListener("focus",t(this,a)),this.editorDiv.addEventListener("blur",t(this,C)),this.editorDiv.addEventListener("input",t(this,l)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",t(this,e)),this.div.draggable=!0,this.editorDiv.removeEventListener("keydown",t(this,L)),this.editorDiv.removeEventListener("focus",t(this,a)),this.editorDiv.removeEventListener("blur",t(this,C)),this.editorDiv.removeEventListener("input",t(this,l)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(B){super.focusin(B),B.target!==this.editorDiv&&this.editorDiv.focus()}onceAdded(){if(this.width){D(this,j,li).call(this);return}this.enableEditMode(),this.editorDiv.focus()}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const B=t(this,w),$=ie(this,w,D(this,i,_n).call(this).trimEnd());if(B===$)return;const I=ce=>{if(ie(this,w,ce),!ce){this.remove();return}D(this,o,oi).call(this),this.rebuild(),D(this,u,vt).call(this)};this.addCommands({cmd:()=>{I($)},undo:()=>{I(B)},mustExec:!1}),D(this,u,vt).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(B){this.enterInEditMode()}keydown(B){B.target===this.div&&B.key==="Enter"&&this.enterInEditMode()}editorDivKeydown(B){E._keyboardManager.exec(this,B)}editorDivFocus(B){this.isEditing=!0}editorDivBlur(B){this.isEditing=!1}editorDivInput(B){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let B,$;this.width&&(B=this.x,$=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",t(this,e)),this.enableEditing(),E._l10nPromise.get("editor_free_text2_aria_label").then(ce=>{var we;return(we=this.editorDiv)==null?void 0:we.setAttribute("aria-label",ce)}),E._l10nPromise.get("free_text2_default_content").then(ce=>{var we;return(we=this.editorDiv)==null?void 0:we.setAttribute("default-content",ce)}),this.editorDiv.contentEditable=!0;const{style:I}=this.editorDiv;if(I.fontSize=`calc(${t(this,r)}px * var(--scale-factor))`,I.color=t(this,S),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,Z.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[ce,we]=this.parentDimensions;if(this.annotationElementId){const{position:q}=t(this,d);let[P,s]=this.getInitialTranslation();[P,s]=this.pageTranslationToScreen(P,s);const[p,F]=this.pageDimensions,[U,X]=this.pageTranslation;let Y,ee;switch(this.rotation){case 0:Y=B+(q[0]-U)/p,ee=$+this.height-(q[1]-X)/F;break;case 90:Y=B+(q[0]-U)/p,ee=$-(q[1]-X)/F,[P,s]=[s,-P];break;case 180:Y=B-this.width+(q[0]-U)/p,ee=$-(q[1]-X)/F,[P,s]=[-P,-s];break;case 270:Y=B+(q[0]-U-this.height*F)/p,ee=$+(q[1]-X-this.width*p)/F,[P,s]=[-s,P];break}this.setAt(Y*ce,ee*we,P,s)}else this.setAt(B*ce,$*we,this.width*ce,this.height*we);D(this,o,oi).call(this),this.div.draggable=!0,this.editorDiv.contentEditable=!1}else this.div.draggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(B,$,I){let ce=null;if(B instanceof oe.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:q,fontColor:P},rect:s,rotation:p,id:F},textContent:U,textPosition:X,parent:{page:{pageNumber:Y}}}=B;if(!U||U.length===0)return null;ce=B={annotationType:N.AnnotationEditorType.FREETEXT,color:Array.from(P),fontSize:q,value:U.join(`
`),position:X,pageIndex:Y-1,rect:s,rotation:p,id:F,deleted:!1}}const we=super.deserialize(B,$,I);return ie(we,r,B.fontSize),ie(we,S,N.Util.makeHexColor(...B.color)),ie(we,w,B.value),we.annotationElementId=B.id||null,ie(we,d,ce),we}serialize(B=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const $=E._internalPadding*this.parentScale,I=this.getRect($,$),ce=Ee.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:t(this,S)),we={annotationType:N.AnnotationEditorType.FREETEXT,color:ce,fontSize:t(this,r),value:t(this,w),pageIndex:this.pageIndex,rect:I,rotation:this.rotation};return B?we:this.annotationElementId&&!D(this,g,vn).call(this,we)?null:(we.id=this.annotationElementId,we)}};let T=E;C=new WeakMap,a=new WeakMap,l=new WeakMap,L=new WeakMap,S=new WeakMap,w=new WeakMap,e=new WeakMap,r=new WeakMap,d=new WeakMap,m=new WeakSet,mn=function(B){const $=ce=>{this.editorDiv.style.fontSize=`calc(${ce}px * var(--scale-factor))`,this.translate(0,-(ce-t(this,r))*this.parentScale),ie(this,r,ce),D(this,u,vt).call(this)},I=t(this,r);this.addCommands({cmd:()=>{$(B)},undo:()=>{$(I)},mustExec:!0,type:N.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},f=new WeakSet,bn=function(B){const $=t(this,S);this.addCommands({cmd:()=>{ie(this,S,this.editorDiv.style.color=B)},undo:()=>{ie(this,S,this.editorDiv.style.color=$)},mustExec:!0,type:N.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},i=new WeakSet,_n=function(){const B=this.editorDiv.getElementsByTagName("div");if(B.length===0)return this.editorDiv.innerText;const $=[];for(const I of B)$.push(I.innerText.replace(/\r\n?|\n/,""));return $.join(`
`)},u=new WeakSet,vt=function(){const[B,$]=this.parentDimensions;let I;if(this.isAttachedToDOM)I=this.div.getBoundingClientRect();else{const{currentLayer:ce,div:we}=this,q=we.style.display;we.style.display="hidden",ce.div.append(this.div),I=we.getBoundingClientRect(),we.remove(),we.style.display=q}this.rotation%180===this.parentRotation%180?(this.width=I.width/B,this.height=I.height/$):(this.width=I.height/B,this.height=I.width/$),this.fixAndSetPosition()},o=new WeakSet,oi=function(){if(this.editorDiv.replaceChildren(),!!t(this,w))for(const B of t(this,w).split(`
`)){const $=document.createElement("div");$.append(B?document.createTextNode(B):document.createElement("br")),this.editorDiv.append($)}},g=new WeakSet,vn=function(B){const{value:$,fontSize:I,color:ce,rect:we,pageIndex:q}=t(this,d);return B.value!==$||B.fontSize!==I||B.rect.some((P,s)=>Math.abs(P-we[s])>=1)||B.color.some((P,s)=>P!==ce[s])||B.pageIndex!==q},j=new WeakSet,li=function(B=!1){if(!this.annotationElementId)return;if(D(this,u,vt).call(this),!B&&(this.width===0||this.height===0)){setTimeout(()=>D(this,j,li).call(this,!0),0);return}const $=E._internalPadding*this.parentScale;t(this,d).rect=this.getRect($,$)},$e(T,"_freeTextDefaultContent",""),$e(T,"_l10nPromise"),$e(T,"_internalPadding",0),$e(T,"_defaultColor",null),$e(T,"_defaultFontSize",10),$e(T,"_type","freetext"),z.FreeTextEditor=T},(xe,z,Ae)=>{var s,p,rt,U,wn,Y,ee,_e,pe,ne,de,ye,me,Te,Ie,Se,Oe,ae,J,le,fe,Ce,di,Ne,ci,Ve,hi,We,ze,Pe,A,H,be,Q,he,se,ge,yn,K,ui;Object.defineProperty(z,"__esModule",{value:!0}),z.StampAnnotationElement=z.InkAnnotationElement=z.FreeTextAnnotationElement=z.AnnotationLayer=void 0;var N=Ae(1),Z=Ae(6),Ee=Ae(3),oe=Ae(30),T=Ae(31),C=Ae(32);const a=1e3,l=9,L=new WeakSet;function S(re){return{width:re[2]-re[0],height:re[3]-re[1]}}class w{static create(k){switch(k.data.annotationType){case N.AnnotationType.LINK:return new r(k);case N.AnnotationType.TEXT:return new d(k);case N.AnnotationType.WIDGET:switch(k.data.fieldType){case"Tx":return new v(k);case"Btn":return k.data.radioButton?new i(k):k.data.checkBox?new b(k):new n(k);case"Ch":return new u(k);case"Sig":return new f(k)}return new m(k);case N.AnnotationType.POPUP:return new c(k);case N.AnnotationType.FREETEXT:return new h(k);case N.AnnotationType.LINE:return new g(k);case N.AnnotationType.SQUARE:return new x(k);case N.AnnotationType.CIRCLE:return new j(k);case N.AnnotationType.POLYLINE:return new V(k);case N.AnnotationType.CARET:return new O(k);case N.AnnotationType.INK:return new y(k);case N.AnnotationType.POLYGON:return new E(k);case N.AnnotationType.HIGHLIGHT:return new B(k);case N.AnnotationType.UNDERLINE:return new $(k);case N.AnnotationType.SQUIGGLY:return new I(k);case N.AnnotationType.STRIKEOUT:return new ce(k);case N.AnnotationType.STAMP:return new we(k);case N.AnnotationType.FILEATTACHMENT:return new q(k);default:return new e(k)}}}class e{constructor(k,{isRenderable:M=!1,ignoreBorder:W=!1,createQuadrilaterals:G=!1}={}){R(this,s,!1);this.isRenderable=M,this.data=k.data,this.layer=k.layer,this.linkService=k.linkService,this.downloadManager=k.downloadManager,this.imageResourcesPath=k.imageResourcesPath,this.renderForms=k.renderForms,this.svgFactory=k.svgFactory,this.annotationStorage=k.annotationStorage,this.enableScripting=k.enableScripting,this.hasJSActions=k.hasJSActions,this._fieldObjects=k.fieldObjects,this.parent=k.parent,M&&(this.container=this._createContainer(W)),G&&this._createQuadrilaterals()}_createContainer(k){const{data:M,parent:{page:W,viewport:G}}=this,te=document.createElement("section");te.setAttribute("data-annotation-id",M.id),te.style.zIndex=this.parent.zIndex++,this.data.popupRef&&te.setAttribute("aria-haspopup","dialog"),M.noRotate&&te.classList.add("norotate");const{pageWidth:ve,pageHeight:Le,pageX:Fe,pageY:Re}=G.rawDims;if(!M.rect||this instanceof c){const{rotation:je}=M;return!M.hasOwnCanvas&&je!==0&&this.setRotation(je,te),te}const{width:ke,height:He}=S(M.rect),De=N.Util.normalizeRect([M.rect[0],W.view[3]-M.rect[1]+W.view[1],M.rect[2],W.view[3]-M.rect[3]+W.view[1]]);if(!k&&M.borderStyle.width>0){te.style.borderWidth=`${M.borderStyle.width}px`;const je=M.borderStyle.horizontalCornerRadius,Xe=M.borderStyle.verticalCornerRadius;if(je>0||Xe>0){const Ke=`calc(${je}px * var(--scale-factor)) / calc(${Xe}px * var(--scale-factor))`;te.style.borderRadius=Ke}else if(this instanceof i){const Ke=`calc(${ke}px * var(--scale-factor)) / calc(${He}px * var(--scale-factor))`;te.style.borderRadius=Ke}switch(M.borderStyle.style){case N.AnnotationBorderStyleType.SOLID:te.style.borderStyle="solid";break;case N.AnnotationBorderStyleType.DASHED:te.style.borderStyle="dashed";break;case N.AnnotationBorderStyleType.BEVELED:(0,N.warn)("Unimplemented border style: beveled");break;case N.AnnotationBorderStyleType.INSET:(0,N.warn)("Unimplemented border style: inset");break;case N.AnnotationBorderStyleType.UNDERLINE:te.style.borderBottomStyle="solid";break}const qe=M.borderColor||null;qe?(ie(this,s,!0),te.style.borderColor=N.Util.makeHexColor(qe[0]|0,qe[1]|0,qe[2]|0)):te.style.borderWidth=0}te.style.left=`${100*(De[0]-Fe)/ve}%`,te.style.top=`${100*(De[1]-Re)/Le}%`;const{rotation:Be}=M;return M.hasOwnCanvas||Be===0?(te.style.width=`${100*ke/ve}%`,te.style.height=`${100*He/Le}%`):this.setRotation(Be,te),te}setRotation(k,M=this.container){if(!this.data.rect)return;const{pageWidth:W,pageHeight:G}=this.parent.viewport.rawDims,{width:te,height:ve}=S(this.data.rect);let Le,Fe;k%180===0?(Le=100*te/W,Fe=100*ve/G):(Le=100*ve/W,Fe=100*te/G),M.style.width=`${Le}%`,M.style.height=`${Fe}%`,M.setAttribute("data-main-rotation",(360-k)%360)}get _commonActions(){const k=(M,W,G)=>{const te=G.detail[M];G.target.style[W]=oe.ColorConverters[`${te[0]}_HTML`](te.slice(1))};return(0,N.shadow)(this,"_commonActions",{display:M=>{const W=M.detail.display%2===1;this.container.style.visibility=W?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:W,print:M.detail.display===0||M.detail.display===3})},print:M=>{this.annotationStorage.setValue(this.data.id,{print:M.detail.print})},hidden:M=>{this.container.style.visibility=M.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:M.detail.hidden})},focus:M=>{setTimeout(()=>M.target.focus({preventScroll:!1}),0)},userName:M=>{M.target.title=M.detail.userName},readonly:M=>{M.detail.readonly?M.target.setAttribute("readonly",""):M.target.removeAttribute("readonly")},required:M=>{this._setRequired(M.target,M.detail.required)},bgColor:M=>{k("bgColor","backgroundColor",M)},fillColor:M=>{k("fillColor","backgroundColor",M)},fgColor:M=>{k("fgColor","color",M)},textColor:M=>{k("textColor","color",M)},borderColor:M=>{k("borderColor","borderColor",M)},strokeColor:M=>{k("strokeColor","borderColor",M)},rotation:M=>{const W=M.detail.rotation;this.setRotation(W),this.annotationStorage.setValue(this.data.id,{rotation:W})}})}_dispatchEventFromSandbox(k,M){const W=this._commonActions;for(const G of Object.keys(M.detail)){const te=k[G]||W[G];te==null||te(M)}}_setDefaultPropertiesFromJS(k){if(!this.enableScripting)return;const M=this.annotationStorage.getRawValue(this.data.id);if(!M)return;const W=this._commonActions;for(const[G,te]of Object.entries(M)){const ve=W[G];if(ve){const Le={detail:{[G]:te},target:k};ve(Le),delete M[G]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:k}=this.data;if(!k)return;const[M,W,G,te]=this.data.rect;if(k.length===1){const[,{x:Xe,y:qe},{x:Ke,y:et}]=k[0];if(G===Xe&&te===qe&&M===Ke&&W===et)return}const{style:ve}=this.container;let Le;if(t(this,s)){const{borderColor:Xe,borderWidth:qe}=ve;ve.borderWidth=0,Le=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${Xe}" stroke-width="${qe}">`],this.container.classList.add("hasBorder")}const Fe=G-M,Re=te-W,{svgFactory:ke}=this,He=ke.createElement("svg");He.classList.add("quadrilateralsContainer"),He.setAttribute("width",0),He.setAttribute("height",0);const De=ke.createElement("defs");He.append(De);const Be=ke.createElement("clipPath"),je=`clippath_${this.data.id}`;Be.setAttribute("id",je),Be.setAttribute("clipPathUnits","objectBoundingBox"),De.append(Be);for(const[,{x:Xe,y:qe},{x:Ke,y:et}]of k){const Ye=ke.createElement("rect"),Ze=(Ke-M)/Fe,Je=(te-qe)/Re,Qe=(Xe-Ke)/Fe,tt=(qe-et)/Re;Ye.setAttribute("x",Ze),Ye.setAttribute("y",Je),Ye.setAttribute("width",Qe),Ye.setAttribute("height",tt),Be.append(Ye),Le==null||Le.push(`<rect vector-effect="non-scaling-stroke" x="${Ze}" y="${Je}" width="${Qe}" height="${tt}"/>`)}t(this,s)&&(Le.push("</g></svg>')"),ve.backgroundImage=Le.join("")),this.container.append(He),this.container.style.clipPath=`url(#${je})`}_createPopup(){const{container:k,data:M}=this;k.setAttribute("aria-haspopup","dialog");const W=new c({data:{color:M.color,titleObj:M.titleObj,modificationDate:M.modificationDate,contentsObj:M.contentsObj,richText:M.richText,parentRect:M.rect,borderStyle:0,id:`popup_${M.id}`,rotation:M.rotation},parent:this.parent,elements:[this]});this.parent.div.append(W.render())}render(){(0,N.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(k,M=null){const W=[];if(this._fieldObjects){const G=this._fieldObjects[k];if(G)for(const{page:te,id:ve,exportValues:Le}of G){if(te===-1||ve===M)continue;const Fe=typeof Le=="string"?Le:null,Re=document.querySelector(`[data-element-id="${ve}"]`);if(Re&&!L.has(Re)){(0,N.warn)(`_getElementsByName - element not allowed: ${ve}`);continue}W.push({id:ve,exportValue:Fe,domElement:Re})}return W}for(const G of document.getElementsByName(k)){const{exportValue:te}=G,ve=G.getAttribute("data-element-id");ve!==M&&L.has(G)&&W.push({id:ve,exportValue:te,domElement:G})}return W}show(){var k;this.container&&(this.container.hidden=!1),(k=this.popup)==null||k.maybeShow()}hide(){var k;this.container&&(this.container.hidden=!0),(k=this.popup)==null||k.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const k=this.getElementsToTriggerPopup();if(Array.isArray(k))for(const M of k)M.classList.add("highlightArea");else k.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:k,data:{id:M}}=this;this.container.addEventListener("dblclick",()=>{var W;(W=this.linkService.eventBus)==null||W.dispatch("switchannotationeditormode",{source:this,mode:k,editId:M})})}}s=new WeakMap;class r extends e{constructor(M,W=null){super(M,{isRenderable:!0,ignoreBorder:!!(W!=null&&W.ignoreBorder),createQuadrilaterals:!0});R(this,p);R(this,U);this.isTooltipOnly=M.data.isTooltipOnly}render(){const{data:M,linkService:W}=this,G=document.createElement("a");G.setAttribute("data-element-id",M.id);let te=!1;return M.url?(W.addLinkAttributes(G,M.url,M.newWindow),te=!0):M.action?(this._bindNamedAction(G,M.action),te=!0):M.attachment?(this._bindAttachment(G,M.attachment),te=!0):M.setOCGState?(D(this,U,wn).call(this,G,M.setOCGState),te=!0):M.dest?(this._bindLink(G,M.dest),te=!0):(M.actions&&(M.actions.Action||M.actions["Mouse Up"]||M.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(G,M),te=!0),M.resetForm?(this._bindResetFormAction(G,M.resetForm),te=!0):this.isTooltipOnly&&!te&&(this._bindLink(G,""),te=!0)),this.container.classList.add("linkAnnotation"),te&&this.container.append(G),this.container}_bindLink(M,W){M.href=this.linkService.getDestinationHash(W),M.onclick=()=>(W&&this.linkService.goToDestination(W),!1),(W||W==="")&&D(this,p,rt).call(this)}_bindNamedAction(M,W){M.href=this.linkService.getAnchorUrl(""),M.onclick=()=>(this.linkService.executeNamedAction(W),!1),D(this,p,rt).call(this)}_bindAttachment(M,W){M.href=this.linkService.getAnchorUrl(""),M.onclick=()=>{var G;return(G=this.downloadManager)==null||G.openOrDownloadData(this.container,W.content,W.filename),!1},D(this,p,rt).call(this)}_bindJSAction(M,W){M.href=this.linkService.getAnchorUrl("");const G=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const te of Object.keys(W.actions)){const ve=G.get(te);ve&&(M[ve]=()=>{var Le;return(Le=this.linkService.eventBus)==null||Le.dispatch("dispatcheventinsandbox",{source:this,detail:{id:W.id,name:te}}),!1})}M.onclick||(M.onclick=()=>!1),D(this,p,rt).call(this)}_bindResetFormAction(M,W){const G=M.onclick;if(G||(M.href=this.linkService.getAnchorUrl("")),D(this,p,rt).call(this),!this._fieldObjects){(0,N.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),G||(M.onclick=()=>!1);return}M.onclick=()=>{var He;G==null||G();const{fields:te,refs:ve,include:Le}=W,Fe=[];if(te.length!==0||ve.length!==0){const De=new Set(ve);for(const Be of te){const je=this._fieldObjects[Be]||[];for(const{id:Xe}of je)De.add(Xe)}for(const Be of Object.values(this._fieldObjects))for(const je of Be)De.has(je.id)===Le&&Fe.push(je)}else for(const De of Object.values(this._fieldObjects))Fe.push(...De);const Re=this.annotationStorage,ke=[];for(const De of Fe){const{id:Be}=De;switch(ke.push(Be),De.type){case"text":{const Xe=De.defaultValue||"";Re.setValue(Be,{value:Xe});break}case"checkbox":case"radiobutton":{const Xe=De.defaultValue===De.exportValues;Re.setValue(Be,{value:Xe});break}case"combobox":case"listbox":{const Xe=De.defaultValue||"";Re.setValue(Be,{value:Xe});break}default:continue}const je=document.querySelector(`[data-element-id="${Be}"]`);if(je){if(!L.has(je)){(0,N.warn)(`_bindResetFormAction - element not allowed: ${Be}`);continue}}else continue;je.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((He=this.linkService.eventBus)==null||He.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:ke,name:"ResetForm"}})),!1}}}p=new WeakSet,rt=function(){this.container.setAttribute("data-internal-link","")},U=new WeakSet,wn=function(M,W){M.href=this.linkService.getAnchorUrl(""),M.onclick=()=>(this.linkService.executeSetOCGState(W),!1),D(this,p,rt).call(this)};class d extends e{constructor(k){var W,G,te;const M=!!(k.data.popupRef||(W=k.data.titleObj)!=null&&W.str||(G=k.data.contentsObj)!=null&&G.str||(te=k.data.richText)!=null&&te.str);super(k,{isRenderable:M})}render(){this.container.classList.add("textAnnotation");const k=document.createElement("img");return k.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",k.alt="[{{type}} Annotation]",k.dataset.l10nId="text_annotation_type",k.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.popupRef||this._createPopup(),this.container.append(k),this.container}}class m extends e{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(k){var M;this.data.hasOwnCanvas&&(((M=k.previousSibling)==null?void 0:M.nodeName)==="CANVAS"&&(k.previousSibling.hidden=!0),k.hidden=!1)}_getKeyModifier(k){const{isWin:M,isMac:W}=N.FeatureTest.platform;return M&&k.ctrlKey||W&&k.metaKey}_setEventListener(k,M,W,G){M.includes("mouse")?k.addEventListener(M,te=>{var ve;(ve=this.linkService.eventBus)==null||ve.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:W,value:G(te),shift:te.shiftKey,modifier:this._getKeyModifier(te)}})}):k.addEventListener(M,te=>{var ve;(ve=this.linkService.eventBus)==null||ve.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:W,value:G(te)}})})}_setEventListeners(k,M,W){var G;for(const[te,ve]of M)(ve==="Action"||(G=this.data.actions)!=null&&G[ve])&&this._setEventListener(k,te,ve,W)}_setBackgroundColor(k){const M=this.data.backgroundColor||null;k.style.backgroundColor=M===null?"transparent":N.Util.makeHexColor(M[0],M[1],M[2])}_setTextStyle(k){const M=["left","center","right"],{fontColor:W}=this.data.defaultAppearanceData,G=this.data.defaultAppearanceData.fontSize||l,te=k.style;let ve;const Le=2,Fe=Re=>Math.round(10*Re)/10;if(this.data.multiLine){const Re=Math.abs(this.data.rect[3]-this.data.rect[1]-Le),ke=Math.round(Re/(N.LINE_FACTOR*G))||1,He=Re/ke;ve=Math.min(G,Fe(He/N.LINE_FACTOR))}else{const Re=Math.abs(this.data.rect[3]-this.data.rect[1]-Le);ve=Math.min(G,Fe(Re/N.LINE_FACTOR))}te.fontSize=`calc(${ve}px * var(--scale-factor))`,te.color=N.Util.makeHexColor(W[0],W[1],W[2]),this.data.textAlignment!==null&&(te.textAlign=M[this.data.textAlignment])}_setRequired(k,M){M?k.setAttribute("required",!0):k.removeAttribute("required"),k.setAttribute("aria-required",M)}}class v extends m{constructor(k){const M=k.renderForms||!k.data.hasAppearance&&!!k.data.fieldValue;super(k,{isRenderable:M})}setPropertyOnSiblings(k,M,W,G){const te=this.annotationStorage;for(const ve of this._getElementsByName(k.name,k.id))ve.domElement&&(ve.domElement[M]=W),te.setValue(ve.id,{[G]:W})}render(){var G,te;const k=this.annotationStorage,M=this.data.id;this.container.classList.add("textWidgetAnnotation");let W=null;if(this.renderForms){const ve=k.getValue(M,{value:this.data.fieldValue});let Le=ve.value||"";const Fe=k.getValue(M,{charLimit:this.data.maxLen}).charLimit;Fe&&Le.length>Fe&&(Le=Le.slice(0,Fe));let Re=ve.formattedValue||((G=this.data.textContent)==null?void 0:G.join(`
`))||null;Re&&this.data.comb&&(Re=Re.replaceAll(/\s+/g,""));const ke={userValue:Le,formattedValue:Re,lastCommittedValue:null,commitKey:1};this.data.multiLine?(W=document.createElement("textarea"),W.textContent=Re??Le,this.data.doNotScroll&&(W.style.overflowY="hidden")):(W=document.createElement("input"),W.type="text",W.setAttribute("value",Re??Le),this.data.doNotScroll&&(W.style.overflowX="hidden")),this.data.hasOwnCanvas&&(W.hidden=!0),L.add(W),W.setAttribute("data-element-id",M),W.disabled=this.data.readOnly,W.name=this.data.baseFieldName||this.data.fieldName,W.tabIndex=a,this._setRequired(W,this.data.required),Fe&&(W.maxLength=Fe),W.addEventListener("input",De=>{k.setValue(M,{value:De.target.value}),this.setPropertyOnSiblings(W,"value",De.target.value,"value"),ke.formattedValue=null}),W.addEventListener("resetform",De=>{const Be=this.data.defaultFieldValue??"";W.value=ke.userValue=Be,ke.formattedValue=null});let He=De=>{const{formattedValue:Be}=ke;Be!=null&&(De.target.value=Be),De.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){W.addEventListener("focus",Be=>{const{target:je}=Be;ke.userValue&&(je.value=ke.userValue),ke.lastCommittedValue=je.value,ke.commitKey=1}),W.addEventListener("updatefromsandbox",Be=>{this.showElementAndHideCanvas(Be.target);const je={value(Xe){ke.userValue=Xe.detail.value??"",k.setValue(M,{value:ke.userValue.toString()}),Xe.target.value=ke.userValue},formattedValue(Xe){const{formattedValue:qe}=Xe.detail;ke.formattedValue=qe,qe!=null&&Xe.target!==document.activeElement&&(Xe.target.value=qe),k.setValue(M,{formattedValue:qe})},selRange(Xe){Xe.target.setSelectionRange(...Xe.detail.selRange)},charLimit:Xe=>{var Ye;const{charLimit:qe}=Xe.detail,{target:Ke}=Xe;if(qe===0){Ke.removeAttribute("maxLength");return}Ke.setAttribute("maxLength",qe);let et=ke.userValue;!et||et.length<=qe||(et=et.slice(0,qe),Ke.value=ke.userValue=et,k.setValue(M,{value:et}),(Ye=this.linkService.eventBus)==null||Ye.dispatch("dispatcheventinsandbox",{source:this,detail:{id:M,name:"Keystroke",value:et,willCommit:!0,commitKey:1,selStart:Ke.selectionStart,selEnd:Ke.selectionEnd}}))}};this._dispatchEventFromSandbox(je,Be)}),W.addEventListener("keydown",Be=>{var qe;ke.commitKey=1;let je=-1;if(Be.key==="Escape"?je=0:Be.key==="Enter"&&!this.data.multiLine?je=2:Be.key==="Tab"&&(ke.commitKey=3),je===-1)return;const{value:Xe}=Be.target;ke.lastCommittedValue!==Xe&&(ke.lastCommittedValue=Xe,ke.userValue=Xe,(qe=this.linkService.eventBus)==null||qe.dispatch("dispatcheventinsandbox",{source:this,detail:{id:M,name:"Keystroke",value:Xe,willCommit:!0,commitKey:je,selStart:Be.target.selectionStart,selEnd:Be.target.selectionEnd}}))});const De=He;He=null,W.addEventListener("blur",Be=>{var Xe;if(!Be.relatedTarget)return;const{value:je}=Be.target;ke.userValue=je,ke.lastCommittedValue!==je&&((Xe=this.linkService.eventBus)==null||Xe.dispatch("dispatcheventinsandbox",{source:this,detail:{id:M,name:"Keystroke",value:je,willCommit:!0,commitKey:ke.commitKey,selStart:Be.target.selectionStart,selEnd:Be.target.selectionEnd}})),De(Be)}),(te=this.data.actions)!=null&&te.Keystroke&&W.addEventListener("beforeinput",Be=>{var Je;ke.lastCommittedValue=null;const{data:je,target:Xe}=Be,{value:qe,selectionStart:Ke,selectionEnd:et}=Xe;let Ye=Ke,Ze=et;switch(Be.inputType){case"deleteWordBackward":{const Qe=qe.substring(0,Ke).match(/\w*[^\w]*$/);Qe&&(Ye-=Qe[0].length);break}case"deleteWordForward":{const Qe=qe.substring(Ke).match(/^[^\w]*\w*/);Qe&&(Ze+=Qe[0].length);break}case"deleteContentBackward":Ke===et&&(Ye-=1);break;case"deleteContentForward":Ke===et&&(Ze+=1);break}Be.preventDefault(),(Je=this.linkService.eventBus)==null||Je.dispatch("dispatcheventinsandbox",{source:this,detail:{id:M,name:"Keystroke",value:qe,change:je||"",willCommit:!1,selStart:Ye,selEnd:Ze}})}),this._setEventListeners(W,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Be=>Be.target.value)}if(He&&W.addEventListener("blur",He),this.data.comb){const Be=(this.data.rect[2]-this.data.rect[0])/Fe;W.classList.add("comb"),W.style.letterSpacing=`calc(${Be}px * var(--scale-factor) - 1ch)`}}else W=document.createElement("div"),W.textContent=this.data.fieldValue,W.style.verticalAlign="middle",W.style.display="table-cell";return this._setTextStyle(W),this._setBackgroundColor(W),this._setDefaultPropertiesFromJS(W),this.container.append(W),this.container}}class f extends m{constructor(k){super(k,{isRenderable:!!k.data.hasOwnCanvas})}}class b extends m{constructor(k){super(k,{isRenderable:k.renderForms})}render(){const k=this.annotationStorage,M=this.data,W=M.id;let G=k.getValue(W,{value:M.exportValue===M.fieldValue}).value;typeof G=="string"&&(G=G!=="Off",k.setValue(W,{value:G})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const te=document.createElement("input");return L.add(te),te.setAttribute("data-element-id",W),te.disabled=M.readOnly,this._setRequired(te,this.data.required),te.type="checkbox",te.name=M.baseFieldName||M.fieldName,G&&te.setAttribute("checked",!0),te.setAttribute("exportValue",M.exportValue),te.tabIndex=a,te.addEventListener("change",ve=>{const{name:Le,checked:Fe}=ve.target;for(const Re of this._getElementsByName(Le,W)){const ke=Fe&&Re.exportValue===M.exportValue;Re.domElement&&(Re.domElement.checked=ke),k.setValue(Re.id,{value:ke})}k.setValue(W,{value:Fe})}),te.addEventListener("resetform",ve=>{const Le=M.defaultFieldValue||"Off";ve.target.checked=Le===M.exportValue}),this.enableScripting&&this.hasJSActions&&(te.addEventListener("updatefromsandbox",ve=>{const Le={value(Fe){Fe.target.checked=Fe.detail.value!=="Off",k.setValue(W,{value:Fe.target.checked})}};this._dispatchEventFromSandbox(Le,ve)}),this._setEventListeners(te,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],ve=>ve.target.checked)),this._setBackgroundColor(te),this._setDefaultPropertiesFromJS(te),this.container.append(te),this.container}}class i extends m{constructor(k){super(k,{isRenderable:k.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const k=this.annotationStorage,M=this.data,W=M.id;let G=k.getValue(W,{value:M.fieldValue===M.buttonValue}).value;typeof G=="string"&&(G=G!==M.buttonValue,k.setValue(W,{value:G}));const te=document.createElement("input");if(L.add(te),te.setAttribute("data-element-id",W),te.disabled=M.readOnly,this._setRequired(te,this.data.required),te.type="radio",te.name=M.baseFieldName||M.fieldName,G&&te.setAttribute("checked",!0),te.tabIndex=a,te.addEventListener("change",ve=>{const{name:Le,checked:Fe}=ve.target;for(const Re of this._getElementsByName(Le,W))k.setValue(Re.id,{value:!1});k.setValue(W,{value:Fe})}),te.addEventListener("resetform",ve=>{const Le=M.defaultFieldValue;ve.target.checked=Le!=null&&Le===M.buttonValue}),this.enableScripting&&this.hasJSActions){const ve=M.buttonValue;te.addEventListener("updatefromsandbox",Le=>{const Fe={value:Re=>{const ke=ve===Re.detail.value;for(const He of this._getElementsByName(Re.target.name)){const De=ke&&He.id===W;He.domElement&&(He.domElement.checked=De),k.setValue(He.id,{value:De})}}};this._dispatchEventFromSandbox(Fe,Le)}),this._setEventListeners(te,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Le=>Le.target.checked)}return this._setBackgroundColor(te),this._setDefaultPropertiesFromJS(te),this.container.append(te),this.container}}class n extends r{constructor(k){super(k,{ignoreBorder:k.data.hasAppearance})}render(){const k=super.render();k.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(k.title=this.data.alternativeText);const M=k.lastChild;return this.enableScripting&&this.hasJSActions&&M&&(this._setDefaultPropertiesFromJS(M),M.addEventListener("updatefromsandbox",W=>{this._dispatchEventFromSandbox({},W)})),k}}class u extends m{constructor(k){super(k,{isRenderable:k.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const k=this.annotationStorage,M=this.data.id,W=k.getValue(M,{value:this.data.fieldValue}),G=document.createElement("select");L.add(G),G.setAttribute("data-element-id",M),G.disabled=this.data.readOnly,this._setRequired(G,this.data.required),G.name=this.data.baseFieldName||this.data.fieldName,G.tabIndex=a;let te=this.data.combo&&this.data.options.length>0;this.data.combo||(G.size=this.data.options.length,this.data.multiSelect&&(G.multiple=!0)),G.addEventListener("resetform",ke=>{const He=this.data.defaultFieldValue;for(const De of G.options)De.selected=De.value===He});for(const ke of this.data.options){const He=document.createElement("option");He.textContent=ke.displayValue,He.value=ke.exportValue,W.value.includes(ke.exportValue)&&(He.setAttribute("selected",!0),te=!1),G.append(He)}let ve=null;if(te){const ke=document.createElement("option");ke.value=" ",ke.setAttribute("hidden",!0),ke.setAttribute("selected",!0),G.prepend(ke),ve=()=>{ke.remove(),G.removeEventListener("input",ve),ve=null},G.addEventListener("input",ve)}const Le=ke=>{const He=ke?"value":"textContent",{options:De,multiple:Be}=G;return Be?Array.prototype.filter.call(De,je=>je.selected).map(je=>je[He]):De.selectedIndex===-1?null:De[De.selectedIndex][He]};let Fe=Le(!1);const Re=ke=>{const He=ke.target.options;return Array.prototype.map.call(He,De=>({displayValue:De.textContent,exportValue:De.value}))};return this.enableScripting&&this.hasJSActions?(G.addEventListener("updatefromsandbox",ke=>{const He={value(De){ve==null||ve();const Be=De.detail.value,je=new Set(Array.isArray(Be)?Be:[Be]);for(const Xe of G.options)Xe.selected=je.has(Xe.value);k.setValue(M,{value:Le(!0)}),Fe=Le(!1)},multipleSelection(De){G.multiple=!0},remove(De){const Be=G.options,je=De.detail.remove;Be[je].selected=!1,G.remove(je),Be.length>0&&Array.prototype.findIndex.call(Be,qe=>qe.selected)===-1&&(Be[0].selected=!0),k.setValue(M,{value:Le(!0),items:Re(De)}),Fe=Le(!1)},clear(De){for(;G.length!==0;)G.remove(0);k.setValue(M,{value:null,items:[]}),Fe=Le(!1)},insert(De){const{index:Be,displayValue:je,exportValue:Xe}=De.detail.insert,qe=G.children[Be],Ke=document.createElement("option");Ke.textContent=je,Ke.value=Xe,qe?qe.before(Ke):G.append(Ke),k.setValue(M,{value:Le(!0),items:Re(De)}),Fe=Le(!1)},items(De){const{items:Be}=De.detail;for(;G.length!==0;)G.remove(0);for(const je of Be){const{displayValue:Xe,exportValue:qe}=je,Ke=document.createElement("option");Ke.textContent=Xe,Ke.value=qe,G.append(Ke)}G.options.length>0&&(G.options[0].selected=!0),k.setValue(M,{value:Le(!0),items:Re(De)}),Fe=Le(!1)},indices(De){const Be=new Set(De.detail.indices);for(const je of De.target.options)je.selected=Be.has(je.index);k.setValue(M,{value:Le(!0)}),Fe=Le(!1)},editable(De){De.target.disabled=!De.detail.editable}};this._dispatchEventFromSandbox(He,ke)}),G.addEventListener("input",ke=>{var De;const He=Le(!0);k.setValue(M,{value:He}),ke.preventDefault(),(De=this.linkService.eventBus)==null||De.dispatch("dispatcheventinsandbox",{source:this,detail:{id:M,name:"Keystroke",value:Fe,changeEx:He,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(G,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],ke=>ke.target.value)):G.addEventListener("input",function(ke){k.setValue(M,{value:Le(!0)})}),this.data.combo&&this._setTextStyle(G),this._setBackgroundColor(G),this._setDefaultPropertiesFromJS(G),this.container.append(G),this.container}}class c extends e{constructor(k){var te,ve,Le;const{data:M,elements:W}=k,G=!!((te=M.titleObj)!=null&&te.str||(ve=M.contentsObj)!=null&&ve.str||(Le=M.richText)!=null&&Le.str);super(k,{isRenderable:G}),this.elements=W}render(){this.container.classList.add("popupAnnotation");const k=new o({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),M=[];for(const W of this.elements)W.popup=k,M.push(W.data.id),W.addHighlightArea();return this.container.setAttribute("aria-controls",M.join(",")),this.container}}class o{constructor({container:k,color:M,elements:W,titleObj:G,modificationDate:te,contentsObj:ve,richText:Le,parent:Fe,rect:Re,parentRect:ke,open:He}){R(this,Ce);R(this,Ne);R(this,Ve);R(this,Y,null);R(this,ee,D(this,Ve,hi).bind(this));R(this,_e,D(this,Ne,ci).bind(this));R(this,pe,D(this,Ce,di).bind(this));R(this,ne,null);R(this,de,null);R(this,ye,null);R(this,me,null);R(this,Te,null);R(this,Ie,null);R(this,Se,!1);R(this,Oe,null);R(this,ae,null);R(this,J,null);R(this,le,null);R(this,fe,!1);ie(this,de,k),ie(this,le,G),ie(this,ye,ve),ie(this,J,Le),ie(this,Te,Fe),ie(this,ne,M),ie(this,ae,Re),ie(this,Ie,ke),ie(this,me,W);const De=Z.PDFDateString.toDateObject(te);De&&ie(this,Y,Fe.l10n.get("annotation_date_string",{date:De.toLocaleDateString(),time:De.toLocaleTimeString()})),this.trigger=W.flatMap(Be=>Be.getElementsToTriggerPopup());for(const Be of this.trigger)Be.addEventListener("click",t(this,pe)),Be.addEventListener("mouseenter",t(this,_e)),Be.addEventListener("mouseleave",t(this,ee));t(this,de).hidden=!0,He&&D(this,Ce,di).call(this)}render(){if(t(this,Oe))return;const{page:{view:k},viewport:{rawDims:{pageWidth:M,pageHeight:W,pageX:G,pageY:te}}}=t(this,Te),ve=ie(this,Oe,document.createElement("div"));if(ve.className="popup",t(this,ne)){const Ye=ve.style.outlineColor=N.Util.makeHexColor(...t(this,ne));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?ve.style.backgroundColor=`color-mix(in srgb, ${Ye} 30%, white)`:ve.style.backgroundColor=N.Util.makeHexColor(...t(this,ne).map(Je=>Math.floor(.7*(255-Je)+Je)))}const Le=document.createElement("span");Le.className="header";const Fe=document.createElement("h1");if(Le.append(Fe),{dir:Fe.dir,str:Fe.textContent}=t(this,le),ve.append(Le),t(this,Y)){const Ye=document.createElement("span");Ye.classList.add("popupDate"),t(this,Y).then(Ze=>{Ye.textContent=Ze}),Le.append(Ye)}const Re=t(this,ye),ke=t(this,J);if(ke!=null&&ke.str&&(!(Re!=null&&Re.str)||Re.str===ke.str))C.XfaLayer.render({xfaHtml:ke.html,intent:"richText",div:ve}),ve.lastChild.classList.add("richText","popupContent");else{const Ye=this._formatContents(Re);ve.append(Ye)}let He=!!t(this,Ie),De=He?t(this,Ie):t(this,ae);for(const Ye of t(this,me))if(!De||N.Util.intersect(Ye.data.rect,De)!==null){De=Ye.data.rect,He=!0;break}const Be=N.Util.normalizeRect([De[0],k[3]-De[1]+k[1],De[2],k[3]-De[3]+k[1]]),je=5,Xe=He?De[2]-De[0]+je:0,qe=Be[0]+Xe,Ke=Be[1],{style:et}=t(this,de);et.left=`${100*(qe-G)/M}%`,et.top=`${100*(Ke-te)/W}%`,t(this,de).append(ve)}_formatContents({str:k,dir:M}){const W=document.createElement("p");W.classList.add("popupContent"),W.dir=M;const G=k.split(/(?:\r\n?|\n)/);for(let te=0,ve=G.length;te<ve;++te){const Le=G[te];W.append(document.createTextNode(Le)),te<ve-1&&W.append(document.createElement("br"))}return W}forceHide(){ie(this,fe,this.isVisible),t(this,fe)&&(t(this,de).hidden=!0)}maybeShow(){t(this,fe)&&(ie(this,fe,!1),t(this,de).hidden=!1)}get isVisible(){return t(this,de).hidden===!1}}Y=new WeakMap,ee=new WeakMap,_e=new WeakMap,pe=new WeakMap,ne=new WeakMap,de=new WeakMap,ye=new WeakMap,me=new WeakMap,Te=new WeakMap,Ie=new WeakMap,Se=new WeakMap,Oe=new WeakMap,ae=new WeakMap,J=new WeakMap,le=new WeakMap,fe=new WeakMap,Ce=new WeakSet,di=function(){ie(this,Se,!t(this,Se)),t(this,Se)?(D(this,Ne,ci).call(this),t(this,de).addEventListener("click",t(this,pe))):(D(this,Ve,hi).call(this),t(this,de).removeEventListener("click",t(this,pe)))},Ne=new WeakSet,ci=function(){t(this,Oe)||this.render(),this.isVisible?t(this,Se)&&t(this,de).classList.add("focused"):(t(this,de).hidden=!1,t(this,de).style.zIndex=parseInt(t(this,de).style.zIndex)+1e3)},Ve=new WeakSet,hi=function(){t(this,de).classList.remove("focused"),!(t(this,Se)||!this.isVisible)&&(t(this,de).hidden=!0,t(this,de).style.zIndex=parseInt(t(this,de).style.zIndex)-1e3)};class h extends e{constructor(k){var W,G,te;const M=!!(k.data.popupRef||(W=k.data.titleObj)!=null&&W.str||(G=k.data.contentsObj)!=null&&G.str||(te=k.data.richText)!=null&&te.str);super(k,{isRenderable:M,ignoreBorder:!0}),this.textContent=k.data.textContent,this.textPosition=k.data.textPosition,this.annotationEditorType=N.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const k=document.createElement("div");k.classList.add("annotationTextContent"),k.setAttribute("role","comment");for(const M of this.textContent){const W=document.createElement("span");W.textContent=M,k.append(W)}this.container.append(k)}return this.data.popupRef||this._createPopup(),this._editOnDoubleClick(),this.container}}z.FreeTextAnnotationElement=h;class g extends e{constructor(M){var G,te,ve;const W=!!(M.data.popupRef||(G=M.data.titleObj)!=null&&G.str||(te=M.data.contentsObj)!=null&&te.str||(ve=M.data.richText)!=null&&ve.str);super(M,{isRenderable:W,ignoreBorder:!0});R(this,We,null)}render(){this.container.classList.add("lineAnnotation");const M=this.data,{width:W,height:G}=S(M.rect),te=this.svgFactory.create(W,G,!0),ve=ie(this,We,this.svgFactory.createElement("svg:line"));return ve.setAttribute("x1",M.rect[2]-M.lineCoordinates[0]),ve.setAttribute("y1",M.rect[3]-M.lineCoordinates[1]),ve.setAttribute("x2",M.rect[2]-M.lineCoordinates[2]),ve.setAttribute("y2",M.rect[3]-M.lineCoordinates[3]),ve.setAttribute("stroke-width",M.borderStyle.width||1),ve.setAttribute("stroke","transparent"),ve.setAttribute("fill","transparent"),te.append(ve),this.container.append(te),M.popupRef||this._createPopup(),this.container}getElementsToTriggerPopup(){return t(this,We)}addHighlightArea(){this.container.classList.add("highlightArea")}}We=new WeakMap;class x extends e{constructor(M){var G,te,ve;const W=!!(M.data.popupRef||(G=M.data.titleObj)!=null&&G.str||(te=M.data.contentsObj)!=null&&te.str||(ve=M.data.richText)!=null&&ve.str);super(M,{isRenderable:W,ignoreBorder:!0});R(this,ze,null)}render(){this.container.classList.add("squareAnnotation");const M=this.data,{width:W,height:G}=S(M.rect),te=this.svgFactory.create(W,G,!0),ve=M.borderStyle.width,Le=ie(this,ze,this.svgFactory.createElement("svg:rect"));return Le.setAttribute("x",ve/2),Le.setAttribute("y",ve/2),Le.setAttribute("width",W-ve),Le.setAttribute("height",G-ve),Le.setAttribute("stroke-width",ve||1),Le.setAttribute("stroke","transparent"),Le.setAttribute("fill","transparent"),te.append(Le),this.container.append(te),M.popupRef||this._createPopup(),this.container}getElementsToTriggerPopup(){return t(this,ze)}addHighlightArea(){this.container.classList.add("highlightArea")}}ze=new WeakMap;class j extends e{constructor(M){var G,te,ve;const W=!!(M.data.popupRef||(G=M.data.titleObj)!=null&&G.str||(te=M.data.contentsObj)!=null&&te.str||(ve=M.data.richText)!=null&&ve.str);super(M,{isRenderable:W,ignoreBorder:!0});R(this,Pe,null)}render(){this.container.classList.add("circleAnnotation");const M=this.data,{width:W,height:G}=S(M.rect),te=this.svgFactory.create(W,G,!0),ve=M.borderStyle.width,Le=ie(this,Pe,this.svgFactory.createElement("svg:ellipse"));return Le.setAttribute("cx",W/2),Le.setAttribute("cy",G/2),Le.setAttribute("rx",W/2-ve/2),Le.setAttribute("ry",G/2-ve/2),Le.setAttribute("stroke-width",ve||1),Le.setAttribute("stroke","transparent"),Le.setAttribute("fill","transparent"),te.append(Le),this.container.append(te),M.popupRef||this._createPopup(),this.container}getElementsToTriggerPopup(){return t(this,Pe)}addHighlightArea(){this.container.classList.add("highlightArea")}}Pe=new WeakMap;class V extends e{constructor(M){var G,te,ve;const W=!!(M.data.popupRef||(G=M.data.titleObj)!=null&&G.str||(te=M.data.contentsObj)!=null&&te.str||(ve=M.data.richText)!=null&&ve.str);super(M,{isRenderable:W,ignoreBorder:!0});R(this,A,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const M=this.data,{width:W,height:G}=S(M.rect),te=this.svgFactory.create(W,G,!0);let ve=[];for(const Fe of M.vertices){const Re=Fe.x-M.rect[0],ke=M.rect[3]-Fe.y;ve.push(Re+","+ke)}ve=ve.join(" ");const Le=ie(this,A,this.svgFactory.createElement(this.svgElementName));return Le.setAttribute("points",ve),Le.setAttribute("stroke-width",M.borderStyle.width||1),Le.setAttribute("stroke","transparent"),Le.setAttribute("fill","transparent"),te.append(Le),this.container.append(te),M.popupRef||this._createPopup(Le,M),this.container}getElementsToTriggerPopup(){return t(this,A)}addHighlightArea(){this.container.classList.add("highlightArea")}}A=new WeakMap;class E extends V{constructor(k){super(k),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class O extends e{constructor(k){var W,G,te;const M=!!(k.data.popupRef||(W=k.data.titleObj)!=null&&W.str||(G=k.data.contentsObj)!=null&&G.str||(te=k.data.richText)!=null&&te.str);super(k,{isRenderable:M,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),this.data.popupRef||this._createPopup(),this.container}}class y extends e{constructor(M){var G,te,ve;const W=!!(M.data.popupRef||(G=M.data.titleObj)!=null&&G.str||(te=M.data.contentsObj)!=null&&te.str||(ve=M.data.richText)!=null&&ve.str);super(M,{isRenderable:W,ignoreBorder:!0});R(this,H,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=N.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const M=this.data,{width:W,height:G}=S(M.rect),te=this.svgFactory.create(W,G,!0);for(const ve of M.inkLists){let Le=[];for(const Re of ve){const ke=Re.x-M.rect[0],He=M.rect[3]-Re.y;Le.push(`${ke},${He}`)}Le=Le.join(" ");const Fe=this.svgFactory.createElement(this.svgElementName);t(this,H).push(Fe),Fe.setAttribute("points",Le),Fe.setAttribute("stroke-width",M.borderStyle.width||1),Fe.setAttribute("stroke","transparent"),Fe.setAttribute("fill","transparent"),M.popupRef||this._createPopup(Fe,M),te.append(Fe)}return this.container.append(te),this.container}getElementsToTriggerPopup(){return t(this,H)}addHighlightArea(){this.container.classList.add("highlightArea")}}H=new WeakMap,z.InkAnnotationElement=y;class B extends e{constructor(k){var W,G,te;const M=!!(k.data.popupRef||(W=k.data.titleObj)!=null&&W.str||(G=k.data.contentsObj)!=null&&G.str||(te=k.data.richText)!=null&&te.str);super(k,{isRenderable:M,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.popupRef||this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class $ extends e{constructor(k){var W,G,te;const M=!!(k.data.popupRef||(W=k.data.titleObj)!=null&&W.str||(G=k.data.contentsObj)!=null&&G.str||(te=k.data.richText)!=null&&te.str);super(k,{isRenderable:M,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.popupRef||this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class I extends e{constructor(k){var W,G,te;const M=!!(k.data.popupRef||(W=k.data.titleObj)!=null&&W.str||(G=k.data.contentsObj)!=null&&G.str||(te=k.data.richText)!=null&&te.str);super(k,{isRenderable:M,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.popupRef||this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class ce extends e{constructor(k){var W,G,te;const M=!!(k.data.popupRef||(W=k.data.titleObj)!=null&&W.str||(G=k.data.contentsObj)!=null&&G.str||(te=k.data.richText)!=null&&te.str);super(k,{isRenderable:M,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.popupRef||this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class we extends e{constructor(k){var W,G,te;const M=!!(k.data.popupRef||(W=k.data.titleObj)!=null&&W.str||(G=k.data.contentsObj)!=null&&G.str||(te=k.data.richText)!=null&&te.str);super(k,{isRenderable:M,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),this.data.popupRef||this._createPopup(),this.container}}z.StampAnnotationElement=we;class q extends e{constructor(M){var te;super(M,{isRenderable:!0});R(this,be,null);const{filename:W,content:G}=this.data.file;this.filename=(0,Z.getFilenameFromUrl)(W,!0),this.content=G,(te=this.linkService.eventBus)==null||te.dispatch("fileattachmentannotation",{source:this,filename:W,content:G})}render(){var W,G;this.container.classList.add("fileAttachmentAnnotation");let M;return this.data.hasAppearance?M=document.createElement("div"):(M=document.createElement("img"),M.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(this.data.name)?"paperclip":"pushpin"}.svg`),M.classList.add("popupTriggerArea"),M.addEventListener("dblclick",this._download.bind(this)),ie(this,be,M),!this.data.popupRef&&((W=this.data.titleObj)!=null&&W.str||(G=this.data.contentsObj)!=null&&G.str||this.data.richText)&&this._createPopup(),this.container.append(M),this.container}getElementsToTriggerPopup(){return t(this,be)}addHighlightArea(){this.container.classList.add("highlightArea")}_download(){var M;(M=this.downloadManager)==null||M.openOrDownloadData(this.container,this.content,this.filename)}}be=new WeakMap;class P{constructor({div:k,accessibilityManager:M,annotationCanvasMap:W,l10n:G,page:te,viewport:ve}){R(this,ge);R(this,K);R(this,Q,null);R(this,he,null);R(this,se,new Map);this.div=k,ie(this,Q,M),ie(this,he,W),this.l10n=G,this.page=te,this.viewport=ve,this.zIndex=0,this.l10n||(this.l10n=T.NullL10n)}async render(k){const{annotations:M}=k,W=this.div;(0,Z.setLayerDimensions)(W,this.viewport);const G=new Map,te={data:null,layer:W,linkService:k.linkService,downloadManager:k.downloadManager,imageResourcesPath:k.imageResourcesPath||"",renderForms:k.renderForms!==!1,svgFactory:new Z.DOMSVGFactory,annotationStorage:k.annotationStorage||new Ee.AnnotationStorage,enableScripting:k.enableScripting===!0,hasJSActions:k.hasJSActions,fieldObjects:k.fieldObjects,parent:this,elements:null};for(const ve of M){if(ve.noHTML)continue;const Le=ve.annotationType===N.AnnotationType.POPUP;if(Le){const ke=G.get(ve.id);if(!ke)continue;te.elements=ke}else{const{width:ke,height:He}=S(ve.rect);if(ke<=0||He<=0)continue}te.data=ve;const Fe=w.create(te);if(!Fe.isRenderable)continue;if(!Le&&ve.popupRef){const ke=G.get(ve.popupRef);ke?ke.push(Fe):G.set(ve.popupRef,[Fe])}Fe.annotationEditorType>0&&t(this,se).set(Fe.data.id,Fe);const Re=Fe.render();ve.hidden&&(Re.style.visibility="hidden"),D(this,ge,yn).call(this,Re,ve.id)}D(this,K,ui).call(this),await this.l10n.translate(W)}update({viewport:k}){const M=this.div;this.viewport=k,(0,Z.setLayerDimensions)(M,{rotation:k.rotation}),D(this,K,ui).call(this),M.hidden=!1}getEditableAnnotations(){return Array.from(t(this,se).values())}getEditableAnnotation(k){return t(this,se).get(k)}}Q=new WeakMap,he=new WeakMap,se=new WeakMap,ge=new WeakSet,yn=function(k,M){var G;const W=k.firstChild||k;W.id=`${Z.AnnotationPrefix}${M}`,this.div.append(k),(G=t(this,Q))==null||G.moveElementInDOM(this.div,k,W,!1)},K=new WeakSet,ui=function(){if(!t(this,he))return;const k=this.div;for(const[M,W]of t(this,he)){const G=k.querySelector(`[data-annotation-id="${M}"]`);if(!G)continue;const{firstChild:te}=G;te?te.nodeName==="CANVAS"?te.replaceWith(W):te.before(W):G.append(W)}t(this,he).clear()},z.AnnotationLayer=P},(xe,z)=>{Object.defineProperty(z,"__esModule",{value:!0}),z.ColorConverters=void 0;function Ae(Z){return Math.floor(Math.max(0,Math.min(1,Z))*255).toString(16).padStart(2,"0")}class N{static CMYK_G([Ee,oe,T,C]){return["G",1-Math.min(1,.3*Ee+.59*T+.11*oe+C)]}static G_CMYK([Ee]){return["CMYK",0,0,0,1-Ee]}static G_RGB([Ee]){return["RGB",Ee,Ee,Ee]}static G_HTML([Ee]){const oe=Ae(Ee);return`#${oe}${oe}${oe}`}static RGB_G([Ee,oe,T]){return["G",.3*Ee+.59*oe+.11*T]}static RGB_HTML([Ee,oe,T]){const C=Ae(Ee),a=Ae(oe),l=Ae(T);return`#${C}${a}${l}`}static T_HTML(){return"#00000000"}static CMYK_RGB([Ee,oe,T,C]){return["RGB",1-Math.min(1,Ee+C),1-Math.min(1,T+C),1-Math.min(1,oe+C)]}static CMYK_HTML(Ee){const oe=this.CMYK_RGB(Ee).slice(1);return this.RGB_HTML(oe)}static RGB_CMYK([Ee,oe,T]){const C=1-Ee,a=1-oe,l=1-T,L=Math.min(C,a,l);return["CMYK",C,a,l,L]}}z.ColorConverters=N},(xe,z)=>{Object.defineProperty(z,"__esModule",{value:!0}),z.NullL10n=void 0,z.getL10nFallback=N;const Ae={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} × {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} × {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing…",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image"};Ae.print_progress_percent="{{progress}}%";function N(oe,T){switch(oe){case"find_match_count":oe=`find_match_count[${T.total===1?"one":"other"}]`;break;case"find_match_count_limit":oe=`find_match_count_limit[${T.limit===1?"one":"other"}]`;break}return Ae[oe]||""}function Z(oe,T){return T?oe.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(C,a)=>a in T?T[a]:"{{"+a+"}}"):oe}const Ee={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(oe,T=null,C=N(oe,T)){return Z(C,T)},async translate(oe){}};z.NullL10n=Ee},(xe,z,Ae)=>{Object.defineProperty(z,"__esModule",{value:!0}),z.XfaLayer=void 0;var N=Ae(25);class Z{static setupStorage(oe,T,C,a,l){const L=a.getValue(T,{value:null});switch(C.name){case"textarea":if(L.value!==null&&(oe.textContent=L.value),l==="print")break;oe.addEventListener("input",S=>{a.setValue(T,{value:S.target.value})});break;case"input":if(C.attributes.type==="radio"||C.attributes.type==="checkbox"){if(L.value===C.attributes.xfaOn?oe.setAttribute("checked",!0):L.value===C.attributes.xfaOff&&oe.removeAttribute("checked"),l==="print")break;oe.addEventListener("change",S=>{a.setValue(T,{value:S.target.checked?S.target.getAttribute("xfaOn"):S.target.getAttribute("xfaOff")})})}else{if(L.value!==null&&oe.setAttribute("value",L.value),l==="print")break;oe.addEventListener("input",S=>{a.setValue(T,{value:S.target.value})})}break;case"select":if(L.value!==null){oe.setAttribute("value",L.value);for(const S of C.children)S.attributes.value===L.value?S.attributes.selected=!0:S.attributes.hasOwnProperty("selected")&&delete S.attributes.selected}oe.addEventListener("input",S=>{const w=S.target.options,e=w.selectedIndex===-1?"":w[w.selectedIndex].value;a.setValue(T,{value:e})});break}}static setAttributes({html:oe,element:T,storage:C=null,intent:a,linkService:l}){const{attributes:L}=T,S=oe instanceof HTMLAnchorElement;L.type==="radio"&&(L.name=`${L.name}-${a}`);for(const[w,e]of Object.entries(L))if(e!=null)switch(w){case"class":e.length&&oe.setAttribute(w,e.join(" "));break;case"dataId":break;case"id":oe.setAttribute("data-element-id",e);break;case"style":Object.assign(oe.style,e);break;case"textContent":oe.textContent=e;break;default:(!S||w!=="href"&&w!=="newWindow")&&oe.setAttribute(w,e)}S&&l.addLinkAttributes(oe,L.href,L.newWindow),C&&L.dataId&&this.setupStorage(oe,L.dataId,T,C)}static render(oe){var r;const T=oe.annotationStorage,C=oe.linkService,a=oe.xfaHtml,l=oe.intent||"display",L=document.createElement(a.name);a.attributes&&this.setAttributes({html:L,element:a,intent:l,linkService:C});const S=[[a,-1,L]],w=oe.div;if(w.append(L),oe.viewport){const d=`matrix(${oe.viewport.transform.join(",")})`;w.style.transform=d}l!=="richText"&&w.setAttribute("class","xfaLayer xfaFont");const e=[];for(;S.length>0;){const[d,m,v]=S.at(-1);if(m+1===d.children.length){S.pop();continue}const f=d.children[++S.at(-1)[1]];if(f===null)continue;const{name:b}=f;if(b==="#text"){const n=document.createTextNode(f.value);e.push(n),v.append(n);continue}const i=(r=f==null?void 0:f.attributes)!=null&&r.xmlns?document.createElementNS(f.attributes.xmlns,b):document.createElement(b);if(v.append(i),f.attributes&&this.setAttributes({html:i,element:f,storage:T,intent:l,linkService:C}),f.children&&f.children.length>0)S.push([f,-1,i]);else if(f.value){const n=document.createTextNode(f.value);N.XfaText.shouldBuildText(b)&&e.push(n),i.append(n)}}for(const d of w.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))d.setAttribute("readOnly",!0);return{textDivs:e}}static update(oe){const T=`matrix(${oe.viewport.transform.join(",")})`;oe.div.style.transform=T,oe.div.hidden=!1}}z.XfaLayer=Z},(xe,z,Ae)=>{var C,a,l,L,S,w,e,r,d,m,v,f,b,i,n,u,Sn,o,En,g,An,j,Pn,E,fi,y,Cn,$,pi,ce,Tn,q,Mn,s,Ln,F,xn,X,Rn,ee,st,pe,gi,de,It,me,Ft,Ie,ct,Oe,mi,J,Ot,fe,kn,Me,bi,Ue,In,Ge,Fn,ze,_i,A,Dt,be,ht;Object.defineProperty(z,"__esModule",{value:!0}),z.InkEditor=void 0;var N=Ae(1),Z=Ae(4),Ee=Ae(29),oe=Ae(5);const he=class extends Z.AnnotationEditor{constructor(_){super({..._,name:"inkEditor"});R(this,u);R(this,o);R(this,g);R(this,j);R(this,E);R(this,y);R(this,$);R(this,ce);R(this,q);R(this,s);R(this,F);R(this,X);R(this,ee);R(this,pe);R(this,de);R(this,me);R(this,Ie);R(this,Oe);R(this,J);R(this,Ge);R(this,ze);R(this,A);R(this,be);R(this,C,0);R(this,a,0);R(this,l,this.canvasContextMenu.bind(this));R(this,L,this.canvasPointermove.bind(this));R(this,S,this.canvasPointerleave.bind(this));R(this,w,this.canvasPointerup.bind(this));R(this,e,this.canvasPointerdown.bind(this));R(this,r,new Path2D);R(this,d,!1);R(this,m,!1);R(this,v,!1);R(this,f,null);R(this,b,0);R(this,i,0);R(this,n,null);this.color=_.color||null,this.thickness=_.thickness||null,this.opacity=_.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(_){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink2_aria_label"].map(K=>[K,_.get(K)]))}static updateDefaultParams(_,K){switch(_){case N.AnnotationEditorParamsType.INK_THICKNESS:he._defaultThickness=K;break;case N.AnnotationEditorParamsType.INK_COLOR:he._defaultColor=K;break;case N.AnnotationEditorParamsType.INK_OPACITY:he._defaultOpacity=K/100;break}}updateParams(_,K){switch(_){case N.AnnotationEditorParamsType.INK_THICKNESS:D(this,u,Sn).call(this,K);break;case N.AnnotationEditorParamsType.INK_COLOR:D(this,o,En).call(this,K);break;case N.AnnotationEditorParamsType.INK_OPACITY:D(this,g,An).call(this,K);break}}static get defaultPropertiesToUpdate(){return[[N.AnnotationEditorParamsType.INK_THICKNESS,he._defaultThickness],[N.AnnotationEditorParamsType.INK_COLOR,he._defaultColor||Z.AnnotationEditor._defaultLineColor],[N.AnnotationEditorParamsType.INK_OPACITY,Math.round(he._defaultOpacity*100)]]}get propertiesToUpdate(){return[[N.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||he._defaultThickness],[N.AnnotationEditorParamsType.INK_COLOR,this.color||he._defaultColor||Z.AnnotationEditor._defaultLineColor],[N.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??he._defaultOpacity))]]}rebuild(){super.rebuild(),this.div!==null&&(this.canvas||(D(this,de,It).call(this),D(this,me,Ft).call(this)),this.isAttachedToDOM||(this.parent.add(this),D(this,Ie,ct).call(this)),D(this,be,ht).call(this))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,t(this,f).disconnect(),ie(this,f,null),super.remove())}setParent(_){!this.parent&&_?this._uiManager.removeShouldRescale(this):this.parent&&_===null&&this._uiManager.addShouldRescale(this),super.setParent(_)}onScaleChanging(){const[_,K]=this.parentDimensions,ue=this.width*_,re=this.height*K;this.setDimensions(ue,re)}enableEditMode(){t(this,d)||this.canvas===null||(super.enableEditMode(),this.div.draggable=!1,this.canvas.addEventListener("pointerdown",t(this,e)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this.div.draggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",t(this,e)))}onceAdded(){this.div.draggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){t(this,d)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),ie(this,d,!0),this.div.classList.add("disabled"),D(this,be,ht).call(this,!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.parent.moveEditorInDOM(this),this.div.focus({preventScroll:!0}))}focusin(_){super.focusin(_),this.enableEditMode()}canvasPointerdown(_){_.button!==0||!this.isInEditMode()||t(this,d)||(this.setInForeground(),_.preventDefault(),_.type!=="mouse"&&this.div.focus(),D(this,y,Cn).call(this,_.offsetX,_.offsetY))}canvasContextMenu(_){_.preventDefault()}canvasPointermove(_){_.preventDefault(),D(this,$,pi).call(this,_.offsetX,_.offsetY)}canvasPointerup(_){_.preventDefault(),D(this,pe,gi).call(this,_)}canvasPointerleave(_){D(this,pe,gi).call(this,_)}get isResizable(){return!this.isEmpty()&&t(this,d)}render(){if(this.div)return this.div;let _,K;this.width&&(_=this.x,K=this.y),super.render(),he._l10nPromise.get("editor_ink2_aria_label").then(W=>{var G;return(G=this.div)==null?void 0:G.setAttribute("aria-label",W)});const[ue,re,k,M]=D(this,j,Pn).call(this);if(this.setAt(ue,re,0,0),this.setDims(k,M),D(this,de,It).call(this),this.width){const[W,G]=this.parentDimensions;this.setAspectRatio(this.width*W,this.height*G),this.setAt(_*W,K*G,this.width*W,this.height*G),ie(this,v,!0),D(this,Ie,ct).call(this),this.setDims(this.width*W,this.height*G),D(this,ee,st).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return D(this,me,Ft).call(this),this.div}setDimensions(_,K){const ue=Math.round(_),re=Math.round(K);if(t(this,b)===ue&&t(this,i)===re)return;ie(this,b,ue),ie(this,i,re),this.canvas.style.visibility="hidden";const[k,M]=this.parentDimensions;this.width=_/k,this.height=K/M,this.fixAndSetPosition(),t(this,d)&&D(this,Oe,mi).call(this,_,K),D(this,Ie,ct).call(this),D(this,ee,st).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(_,K,ue){var He,De,Be;if(_ instanceof Ee.InkAnnotationElement)return null;const re=super.deserialize(_,K,ue);re.thickness=_.thickness,re.color=N.Util.makeHexColor(..._.color),re.opacity=_.opacity;const[k,M]=re.pageDimensions,W=re.width*k,G=re.height*M,te=re.parentScale,ve=_.thickness/2;ie(re,d,!0),ie(re,b,Math.round(W)),ie(re,i,Math.round(G));const{paths:Le,rect:Fe,rotation:Re}=_;for(let{bezier:je}of Le){je=D(He=he,Ue,In).call(He,je,Fe,Re);const Xe=[];re.paths.push(Xe);let qe=te*(je[0]-ve),Ke=te*(je[1]-ve);for(let Ye=2,Ze=je.length;Ye<Ze;Ye+=6){const Je=te*(je[Ye]-ve),Qe=te*(je[Ye+1]-ve),tt=te*(je[Ye+2]-ve),Hs=te*(je[Ye+3]-ve),en=te*(je[Ye+4]-ve),tn=te*(je[Ye+5]-ve);Xe.push([[qe,Ke],[Je,Qe],[tt,Hs],[en,tn]]),qe=en,Ke=tn}const et=D(this,fe,kn).call(this,Xe);re.bezierPath2D.push(et)}const ke=D(De=re,ze,_i).call(De);return ie(re,a,Math.max(Z.AnnotationEditor.MIN_SIZE,ke[2]-ke[0])),ie(re,C,Math.max(Z.AnnotationEditor.MIN_SIZE,ke[3]-ke[1])),D(Be=re,Oe,mi).call(Be,W,G),re}serialize(){if(this.isEmpty())return null;const _=this.getRect(0,0),K=Z.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:N.AnnotationEditorType.INK,color:K,thickness:this.thickness,opacity:this.opacity,paths:D(this,Ge,Fn).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,_),pageIndex:this.pageIndex,rect:_,rotation:this.rotation}}};let T=he;C=new WeakMap,a=new WeakMap,l=new WeakMap,L=new WeakMap,S=new WeakMap,w=new WeakMap,e=new WeakMap,r=new WeakMap,d=new WeakMap,m=new WeakMap,v=new WeakMap,f=new WeakMap,b=new WeakMap,i=new WeakMap,n=new WeakMap,u=new WeakSet,Sn=function(_){const K=this.thickness;this.addCommands({cmd:()=>{this.thickness=_,D(this,be,ht).call(this)},undo:()=>{this.thickness=K,D(this,be,ht).call(this)},mustExec:!0,type:N.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},o=new WeakSet,En=function(_){const K=this.color;this.addCommands({cmd:()=>{this.color=_,D(this,ee,st).call(this)},undo:()=>{this.color=K,D(this,ee,st).call(this)},mustExec:!0,type:N.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},g=new WeakSet,An=function(_){_/=100;const K=this.opacity;this.addCommands({cmd:()=>{this.opacity=_,D(this,ee,st).call(this)},undo:()=>{this.opacity=K,D(this,ee,st).call(this)},mustExec:!0,type:N.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},j=new WeakSet,Pn=function(){const{parentRotation:_,parentDimensions:[K,ue]}=this;switch(_){case 90:return[0,ue,ue,K];case 180:return[K,ue,K,ue];case 270:return[K,0,ue,K];default:return[0,0,K,ue]}},E=new WeakSet,fi=function(){const{ctx:_,color:K,opacity:ue,thickness:re,parentScale:k,scaleFactor:M}=this;_.lineWidth=re*k/M,_.lineCap="round",_.lineJoin="round",_.miterLimit=10,_.strokeStyle=`${K}${(0,oe.opacityToHex)(ue)}`},y=new WeakSet,Cn=function(_,K){this.canvas.addEventListener("contextmenu",t(this,l)),this.canvas.addEventListener("pointerleave",t(this,S)),this.canvas.addEventListener("pointermove",t(this,L)),this.canvas.addEventListener("pointerup",t(this,w)),this.canvas.removeEventListener("pointerdown",t(this,e)),this.isEditing=!0,t(this,v)||(ie(this,v,!0),D(this,Ie,ct).call(this),this.thickness||(this.thickness=he._defaultThickness),this.color||(this.color=he._defaultColor||Z.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=he._defaultOpacity)),this.currentPath.push([_,K]),ie(this,m,!1),D(this,E,fi).call(this),ie(this,n,()=>{D(this,s,Ln).call(this),t(this,n)&&window.requestAnimationFrame(t(this,n))}),window.requestAnimationFrame(t(this,n))},$=new WeakSet,pi=function(_,K){const[ue,re]=this.currentPath.at(-1);if(this.currentPath.length>1&&_===ue&&K===re)return;const k=this.currentPath;let M=t(this,r);if(k.push([_,K]),ie(this,m,!0),k.length<=2){M.moveTo(...k[0]),M.lineTo(_,K);return}k.length===3&&(ie(this,r,M=new Path2D),M.moveTo(...k[0])),D(this,F,xn).call(this,M,...k.at(-3),...k.at(-2),_,K)},ce=new WeakSet,Tn=function(){if(this.currentPath.length===0)return;const _=this.currentPath.at(-1);t(this,r).lineTo(..._)},q=new WeakSet,Mn=function(_,K){ie(this,n,null),_=Math.min(Math.max(_,0),this.canvas.width),K=Math.min(Math.max(K,0),this.canvas.height),D(this,$,pi).call(this,_,K),D(this,ce,Tn).call(this);let ue;if(this.currentPath.length!==1)ue=D(this,X,Rn).call(this);else{const G=[_,K];ue=[[G,G.slice(),G.slice(),G]]}const re=t(this,r),k=this.currentPath;this.currentPath=[],ie(this,r,new Path2D);const M=()=>{this.allRawPaths.push(k),this.paths.push(ue),this.bezierPath2D.push(re),this.rebuild()},W=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(D(this,de,It).call(this),D(this,me,Ft).call(this)),D(this,be,ht).call(this))};this.addCommands({cmd:M,undo:W,mustExec:!0})},s=new WeakSet,Ln=function(){if(!t(this,m))return;ie(this,m,!1);const _=Math.ceil(this.thickness*this.parentScale),K=this.currentPath.slice(-3),ue=K.map(M=>M[0]),re=K.map(M=>M[1]);Math.min(...ue)-_,Math.max(...ue)+_,Math.min(...re)-_,Math.max(...re)+_;const{ctx:k}=this;k.save(),k.clearRect(0,0,this.canvas.width,this.canvas.height);for(const M of this.bezierPath2D)k.stroke(M);k.stroke(t(this,r)),k.restore()},F=new WeakSet,xn=function(_,K,ue,re,k,M,W){const G=(K+re)/2,te=(ue+k)/2,ve=(re+M)/2,Le=(k+W)/2;_.bezierCurveTo(G+2*(re-G)/3,te+2*(k-te)/3,ve+2*(re-ve)/3,Le+2*(k-Le)/3,ve,Le)},X=new WeakSet,Rn=function(){const _=this.currentPath;if(_.length<=2)return[[_[0],_[0],_.at(-1),_.at(-1)]];const K=[];let ue,[re,k]=_[0];for(ue=1;ue<_.length-2;ue++){const[Fe,Re]=_[ue],[ke,He]=_[ue+1],De=(Fe+ke)/2,Be=(Re+He)/2,je=[re+2*(Fe-re)/3,k+2*(Re-k)/3],Xe=[De+2*(Fe-De)/3,Be+2*(Re-Be)/3];K.push([[re,k],je,Xe,[De,Be]]),[re,k]=[De,Be]}const[M,W]=_[ue],[G,te]=_[ue+1],ve=[re+2*(M-re)/3,k+2*(W-k)/3],Le=[G+2*(M-G)/3,te+2*(W-te)/3];return K.push([[re,k],ve,Le,[G,te]]),K},ee=new WeakSet,st=function(){if(this.isEmpty()){D(this,J,Ot).call(this);return}D(this,E,fi).call(this);const{canvas:_,ctx:K}=this;K.setTransform(1,0,0,1,0,0),K.clearRect(0,0,_.width,_.height),D(this,J,Ot).call(this);for(const ue of this.bezierPath2D)K.stroke(ue)},pe=new WeakSet,gi=function(_){this.canvas.removeEventListener("pointerleave",t(this,S)),this.canvas.removeEventListener("pointermove",t(this,L)),this.canvas.removeEventListener("pointerup",t(this,w)),this.canvas.addEventListener("pointerdown",t(this,e)),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",t(this,l))},10),D(this,q,Mn).call(this,_.offsetX,_.offsetY),this.addToAnnotationStorage(),this.setInBackground()},de=new WeakSet,It=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",he._l10nPromise.get("editor_ink_canvas_aria_label").then(_=>{var K;return(K=this.canvas)==null?void 0:K.setAttribute("aria-label",_)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},me=new WeakSet,Ft=function(){ie(this,f,new ResizeObserver(_=>{const K=_[0].contentRect;K.width&&K.height&&this.setDimensions(K.width,K.height)})),t(this,f).observe(this.div)},Ie=new WeakSet,ct=function(){if(!t(this,v))return;const[_,K]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*_),this.canvas.height=Math.ceil(this.height*K),D(this,J,Ot).call(this)},Oe=new WeakSet,mi=function(_,K){const ue=D(this,A,Dt).call(this),re=(_-ue)/t(this,a),k=(K-ue)/t(this,C);this.scaleFactor=Math.min(re,k)},J=new WeakSet,Ot=function(){const _=D(this,A,Dt).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+_,this.translationY*this.scaleFactor+_)},fe=new WeakSet,kn=function(_){const K=new Path2D;for(let ue=0,re=_.length;ue<re;ue++){const[k,M,W,G]=_[ue];ue===0&&K.moveTo(...k),K.bezierCurveTo(M[0],M[1],W[0],W[1],G[0],G[1])}return K},Me=new WeakSet,bi=function(_,K,ue){const[re,k,M,W]=K;switch(ue){case 0:for(let G=0,te=_.length;G<te;G+=2)_[G]+=re,_[G+1]=W-_[G+1];break;case 90:for(let G=0,te=_.length;G<te;G+=2){const ve=_[G];_[G]=_[G+1]+re,_[G+1]=ve+k}break;case 180:for(let G=0,te=_.length;G<te;G+=2)_[G]=M-_[G],_[G+1]+=k;break;case 270:for(let G=0,te=_.length;G<te;G+=2){const ve=_[G];_[G]=M-_[G+1],_[G+1]=W-ve}break;default:throw new Error("Invalid rotation")}return _},Ue=new WeakSet,In=function(_,K,ue){const[re,k,M,W]=K;switch(ue){case 0:for(let G=0,te=_.length;G<te;G+=2)_[G]-=re,_[G+1]=W-_[G+1];break;case 90:for(let G=0,te=_.length;G<te;G+=2){const ve=_[G];_[G]=_[G+1]-k,_[G+1]=ve-re}break;case 180:for(let G=0,te=_.length;G<te;G+=2)_[G]=M-_[G],_[G+1]-=k;break;case 270:for(let G=0,te=_.length;G<te;G+=2){const ve=_[G];_[G]=W-_[G+1],_[G+1]=M-ve}break;default:throw new Error("Invalid rotation")}return _},Ge=new WeakSet,Fn=function(_,K,ue,re){var te,ve;const k=[],M=this.thickness/2,W=_*K+M,G=_*ue+M;for(const Le of this.paths){const Fe=[],Re=[];for(let ke=0,He=Le.length;ke<He;ke++){const[De,Be,je,Xe]=Le[ke],qe=_*De[0]+W,Ke=_*De[1]+G,et=_*Be[0]+W,Ye=_*Be[1]+G,Ze=_*je[0]+W,Je=_*je[1]+G,Qe=_*Xe[0]+W,tt=_*Xe[1]+G;ke===0&&(Fe.push(qe,Ke),Re.push(qe,Ke)),Fe.push(et,Ye,Ze,Je,Qe,tt),Re.push(et,Ye),ke===He-1&&Re.push(Qe,tt)}k.push({bezier:D(te=he,Me,bi).call(te,Fe,re,this.rotation),points:D(ve=he,Me,bi).call(ve,Re,re,this.rotation)})}return k},ze=new WeakSet,_i=function(){let _=1/0,K=-1/0,ue=1/0,re=-1/0;for(const k of this.paths)for(const[M,W,G,te]of k){const ve=N.Util.bezierBoundingBox(...M,...W,...G,...te);_=Math.min(_,ve[0]),ue=Math.min(ue,ve[1]),K=Math.max(K,ve[2]),re=Math.max(re,ve[3])}return[_,ue,K,re]},A=new WeakSet,Dt=function(){return t(this,d)?Math.ceil(this.thickness*this.parentScale):0},be=new WeakSet,ht=function(_=!1){if(this.isEmpty())return;if(!t(this,d)){D(this,ee,st).call(this);return}const K=D(this,ze,_i).call(this),ue=D(this,A,Dt).call(this);ie(this,a,Math.max(Z.AnnotationEditor.MIN_SIZE,K[2]-K[0])),ie(this,C,Math.max(Z.AnnotationEditor.MIN_SIZE,K[3]-K[1]));const re=Math.ceil(ue+t(this,a)*this.scaleFactor),k=Math.ceil(ue+t(this,C)*this.scaleFactor),[M,W]=this.parentDimensions;this.width=re/M,this.height=k/W,this.setAspectRatio(re,k);const G=this.translationX,te=this.translationY;this.translationX=-K[0],this.translationY=-K[1],D(this,Ie,ct).call(this),D(this,ee,st).call(this),ie(this,b,re),ie(this,i,k),this.setDims(re,k);const ve=_?ue/this.scaleFactor/2:0;this.translate(G-this.translationX-ve,te-this.translationY-ve)},R(T,fe),R(T,Me),R(T,Ue),$e(T,"_defaultColor",null),$e(T,"_defaultOpacity",1),$e(T,"_defaultThickness",1),$e(T,"_l10nPromise"),$e(T,"_type","ink"),z.InkEditor=T},(xe,z,Ae)=>{var C,a,l,L,S,w,e,r,d,vi,v,wt,b,On,n,Dn,c,wi,h,Nt,x,Nn;Object.defineProperty(z,"__esModule",{value:!0}),z.StampEditor=void 0;var N=Ae(4),Z=Ae(1),Ee=Ae(6),oe=Ae(29);class T extends N.AnnotationEditor{constructor(O){super({...O,name:"stampEditor"});R(this,d);R(this,v);R(this,b);R(this,n);R(this,c);R(this,h);R(this,x);R(this,C,null);R(this,a,null);R(this,l,null);R(this,L,null);R(this,S,null);R(this,w,null);R(this,e,null);R(this,r,!1);ie(this,L,O.bitmapUrl)}remove(){var O,y;t(this,a)&&(ie(this,C,null),this._uiManager.imageManager.deleteId(t(this,a)),(O=t(this,S))==null||O.remove(),ie(this,S,null),(y=t(this,w))==null||y.disconnect(),ie(this,w,null)),super.remove()}rebuild(){super.rebuild(),this.div!==null&&(t(this,a)&&D(this,d,vi).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this.div.draggable=!0,this.parent.addUndoableEditor(this),this.div.focus()}isEmpty(){return t(this,l)===null&&t(this,C)===null&&t(this,L)===null}get isResizable(){return!0}render(){if(this.div)return this.div;let O,y;if(this.width&&(O=this.x,y=this.y),super.render(),t(this,C)?D(this,v,wt).call(this):(this.div.classList.add("loading"),D(this,d,vi).call(this)),this.width){const[B,$]=this.parentDimensions;this.setAt(O*B,y*$,this.width*B,this.height*$)}return this.div}static deserialize(O,y,B){if(O instanceof oe.StampAnnotationElement)return null;const $=super.deserialize(O,y,B),{rect:I,bitmapUrl:ce,bitmapId:we,isSvg:q}=O;we&&B.imageManager.isValidId(we)?ie($,a,we):ie($,L,ce),ie($,r,q);const[P,s]=$.pageDimensions;return $.width=(I[2]-I[0])/P,$.height=(I[3]-I[1])/s,$}serialize(O=!1,y=null){if(this.isEmpty())return null;const B={annotationType:Z.AnnotationEditorType.STAMP,bitmapId:t(this,a),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:t(this,r)};if(O)return B.bitmapUrl=D(this,h,Nt).call(this,!0),B;if(y===null)return B;y.stamps||(y.stamps=new Map);const $=t(this,r)?(B.rect[2]-B.rect[0])*(B.rect[3]-B.rect[1]):null;if(!y.stamps.has(t(this,a)))y.stamps.set(t(this,a),{area:$,serialized:B}),B.bitmap=D(this,h,Nt).call(this,!1);else if(t(this,r)){const I=y.stamps.get(t(this,a));$>I.area&&(I.area=$,I.serialized.bitmap.close(),I.serialized.bitmap=D(this,h,Nt).call(this,!1))}return B}}C=new WeakMap,a=new WeakMap,l=new WeakMap,L=new WeakMap,S=new WeakMap,w=new WeakMap,e=new WeakMap,r=new WeakMap,d=new WeakSet,vi=function(){if(t(this,a)){this._uiManager.imageManager.getFromId(t(this,a)).then(y=>{if(!y){this.remove();return}ie(this,C,y.bitmap),D(this,v,wt).call(this)});return}if(t(this,L)){const y=t(this,L);ie(this,L,null),ie(this,l,this._uiManager.imageManager.getFromUrl(y).then(B=>{if(ie(this,l,null),!B){this.remove();return}({bitmap:it(this,C)._,id:it(this,a)._,isSvg:it(this,r)._}=B),D(this,v,wt).call(this)}));return}const O=document.createElement("input");O.type="file",O.accept="image/*",ie(this,l,new Promise(y=>{O.addEventListener("change",async()=>{if(ie(this,l,null),!O.files||O.files.length===0)this.remove();else{const B=await this._uiManager.imageManager.getFromFile(O.files[0]);if(!B){this.remove();return}({bitmap:it(this,C)._,id:it(this,a)._,isSvg:it(this,r)._}=B),D(this,v,wt).call(this)}y()}),O.addEventListener("cancel",()=>{ie(this,l,null),this.remove(),y()})})),O.click()},v=new WeakSet,wt=function(){const{div:O}=this;let{width:y,height:B}=t(this,C);const[$,I]=this.pageDimensions,ce=.75;if(this.width)y=this.width*$,B=this.height*I;else if(y>ce*$||B>ce*I){const s=Math.min(ce*$/y,ce*I/B);y*=s,B*=s}const[we,q]=this.parentDimensions;this.setDims(y*we/$,B*q/I);const P=ie(this,S,document.createElement("canvas"));O.append(P),D(this,c,wi).call(this,y,B),D(this,x,Nn).call(this),O.classList.remove("loading")},b=new WeakSet,On=function(O,y){const[B,$]=this.parentDimensions;this.width=O/B,this.height=y/$,this.setDims(O,y),this.fixAndSetPosition(),t(this,e)!==null&&clearTimeout(t(this,e)),ie(this,e,setTimeout(()=>{ie(this,e,null),D(this,c,wi).call(this,O,y)},200))},n=new WeakSet,Dn=function(O,y){const{width:B,height:$}=t(this,C);let I=B,ce=$,we=t(this,C);for(;I>2*O||ce>2*y;){const q=I,P=ce;I>2*O&&(I=I>=16384?Math.floor(I/2)-1:Math.ceil(I/2)),ce>2*y&&(ce=ce>=16384?Math.floor(ce/2)-1:Math.ceil(ce/2));const s=new OffscreenCanvas(I,ce);s.getContext("2d").drawImage(we,0,0,q,P,0,0,I,ce),we=s.transferToImageBitmap()}return we},c=new WeakSet,wi=function(O,y){const B=t(this,S);if(!B||B.width===O&&B.height===y)return;B.width=O,B.height=y;const $=t(this,r)?t(this,C):D(this,n,Dn).call(this,O,y),I=B.getContext("2d");I.filter=this._uiManager.hcmFilter,I.drawImage($,0,0,$.width,$.height,0,0,O,y)},h=new WeakSet,Nt=function(O){if(O){if(t(this,r)){const $=this._uiManager.imageManager.getSvgUrl(t(this,a));if($)return $}const y=document.createElement("canvas");return{width:y.width,height:y.height}=t(this,C),y.getContext("2d").drawImage(t(this,C),0,0),y.toDataURL()}if(t(this,r)){const[y,B]=this.pageDimensions,$=Math.round(this.width*y*Ee.PixelsPerInch.PDF_TO_CSS_UNITS),I=Math.round(this.height*B*Ee.PixelsPerInch.PDF_TO_CSS_UNITS),ce=new OffscreenCanvas($,I);return ce.getContext("2d").drawImage(t(this,C),0,0,t(this,C).width,t(this,C).height,0,0,$,I),ce.transferToImageBitmap()}return structuredClone(t(this,C))},x=new WeakSet,Nn=function(){ie(this,w,new ResizeObserver(O=>{const y=O[0].contentRect;y.width&&y.height&&D(this,b,On).call(this,y.width,y.height)})),t(this,w).observe(this.div)},$e(T,"_type","stamp"),z.StampEditor=T}],__webpack_module_cache__={};function __w_pdfjs_require__(xe){var z=__webpack_module_cache__[xe];if(z!==void 0)return z.exports;var Ae=__webpack_module_cache__[xe]={exports:{}};return __webpack_modules__[xe](Ae,Ae.exports,__w_pdfjs_require__),Ae.exports}var __webpack_exports__={};return(()=>{var xe=__webpack_exports__;Object.defineProperty(xe,"__esModule",{value:!0}),Object.defineProperty(xe,"AbortException",{enumerable:!0,get:function(){return z.AbortException}}),Object.defineProperty(xe,"AnnotationEditorLayer",{enumerable:!0,get:function(){return Ee.AnnotationEditorLayer}}),Object.defineProperty(xe,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return z.AnnotationEditorParamsType}}),Object.defineProperty(xe,"AnnotationEditorType",{enumerable:!0,get:function(){return z.AnnotationEditorType}}),Object.defineProperty(xe,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return oe.AnnotationEditorUIManager}}),Object.defineProperty(xe,"AnnotationLayer",{enumerable:!0,get:function(){return T.AnnotationLayer}}),Object.defineProperty(xe,"AnnotationMode",{enumerable:!0,get:function(){return z.AnnotationMode}}),Object.defineProperty(xe,"CMapCompressionType",{enumerable:!0,get:function(){return z.CMapCompressionType}}),Object.defineProperty(xe,"FeatureTest",{enumerable:!0,get:function(){return z.FeatureTest}}),Object.defineProperty(xe,"GlobalWorkerOptions",{enumerable:!0,get:function(){return C.GlobalWorkerOptions}}),Object.defineProperty(xe,"ImageKind",{enumerable:!0,get:function(){return z.ImageKind}}),Object.defineProperty(xe,"InvalidPDFException",{enumerable:!0,get:function(){return z.InvalidPDFException}}),Object.defineProperty(xe,"MissingPDFException",{enumerable:!0,get:function(){return z.MissingPDFException}}),Object.defineProperty(xe,"OPS",{enumerable:!0,get:function(){return z.OPS}}),Object.defineProperty(xe,"PDFDataRangeTransport",{enumerable:!0,get:function(){return Ae.PDFDataRangeTransport}}),Object.defineProperty(xe,"PDFDateString",{enumerable:!0,get:function(){return N.PDFDateString}}),Object.defineProperty(xe,"PDFWorker",{enumerable:!0,get:function(){return Ae.PDFWorker}}),Object.defineProperty(xe,"PasswordResponses",{enumerable:!0,get:function(){return z.PasswordResponses}}),Object.defineProperty(xe,"PermissionFlag",{enumerable:!0,get:function(){return z.PermissionFlag}}),Object.defineProperty(xe,"PixelsPerInch",{enumerable:!0,get:function(){return N.PixelsPerInch}}),Object.defineProperty(xe,"PromiseCapability",{enumerable:!0,get:function(){return z.PromiseCapability}}),Object.defineProperty(xe,"RenderingCancelledException",{enumerable:!0,get:function(){return N.RenderingCancelledException}}),Object.defineProperty(xe,"SVGGraphics",{enumerable:!0,get:function(){return Ae.SVGGraphics}}),Object.defineProperty(xe,"UnexpectedResponseException",{enumerable:!0,get:function(){return z.UnexpectedResponseException}}),Object.defineProperty(xe,"Util",{enumerable:!0,get:function(){return z.Util}}),Object.defineProperty(xe,"VerbosityLevel",{enumerable:!0,get:function(){return z.VerbosityLevel}}),Object.defineProperty(xe,"XfaLayer",{enumerable:!0,get:function(){return a.XfaLayer}}),Object.defineProperty(xe,"build",{enumerable:!0,get:function(){return Ae.build}}),Object.defineProperty(xe,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return z.createValidAbsoluteUrl}}),Object.defineProperty(xe,"getDocument",{enumerable:!0,get:function(){return Ae.getDocument}}),Object.defineProperty(xe,"getFilenameFromUrl",{enumerable:!0,get:function(){return N.getFilenameFromUrl}}),Object.defineProperty(xe,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return N.getPdfFilenameFromUrl}}),Object.defineProperty(xe,"getXfaPageViewport",{enumerable:!0,get:function(){return N.getXfaPageViewport}}),Object.defineProperty(xe,"isDataScheme",{enumerable:!0,get:function(){return N.isDataScheme}}),Object.defineProperty(xe,"isPdfFile",{enumerable:!0,get:function(){return N.isPdfFile}}),Object.defineProperty(xe,"loadScript",{enumerable:!0,get:function(){return N.loadScript}}),Object.defineProperty(xe,"normalizeUnicode",{enumerable:!0,get:function(){return z.normalizeUnicode}}),Object.defineProperty(xe,"renderTextLayer",{enumerable:!0,get:function(){return Z.renderTextLayer}}),Object.defineProperty(xe,"setLayerDimensions",{enumerable:!0,get:function(){return N.setLayerDimensions}}),Object.defineProperty(xe,"shadow",{enumerable:!0,get:function(){return z.shadow}}),Object.defineProperty(xe,"updateTextLayer",{enumerable:!0,get:function(){return Z.updateTextLayer}}),Object.defineProperty(xe,"version",{enumerable:!0,get:function(){return Ae.version}});var z=__w_pdfjs_require__(1),Ae=__w_pdfjs_require__(2),N=__w_pdfjs_require__(6),Z=__w_pdfjs_require__(26),Ee=__w_pdfjs_require__(27),oe=__w_pdfjs_require__(5),T=__w_pdfjs_require__(29),C=__w_pdfjs_require__(14),a=__w_pdfjs_require__(32)})(),__webpack_exports__})())}(pdf)),pdfExports}(function(xe,z){(function(N,Z){xe.exports=Z()})(globalThis,()=>(()=>{var Ae=[,(oe,T,C)=>{Object.defineProperty(T,"__esModule",{value:!0}),T.createViewerApp=b,T.getActiveApp=f,T.getViewerConfiguration=d,T.initManager=v;var a=C(2),l=C(9),L=C(53),S=w(C(54));function w(i){return i&&i.__esModule?i:{default:i}}let e,r=null;function d(i){return{appContainer:i,mainContainer:i.querySelector("[data-dom-id='viewerContainer']"),viewerContainer:i.querySelector("[data-dom-id='viewer']"),toolbar:{container:i.querySelector("[data-dom-id='toolbarViewer']"),numPages:i.querySelector("[data-dom-id='numPages']"),pageNumber:i.querySelector("[data-dom-id='pageNumber']"),scaleSelect:i.querySelector("[data-dom-id='scaleSelect']"),customScaleOption:i.querySelector("[data-dom-id='customScaleOption']"),previous:i.querySelector("[data-dom-id='previous']"),next:i.querySelector("[data-dom-id='next']"),zoomIn:i.querySelector("[data-dom-id='zoomIn']"),zoomOut:i.querySelector("[data-dom-id='zoomOut']"),viewFind:i.querySelector("[data-dom-id='viewFind']"),openFile:i.querySelector("[data-dom-id='openFile']"),print:i.querySelector("[data-dom-id='print']"),editorFreeTextButton:i.querySelector("[data-dom-id='editorFreeText']"),editorFreeTextParamsToolbar:i.querySelector("[data-dom-id='editorFreeTextParamsToolbar']"),editorInkButton:i.querySelector("[data-dom-id='editorInk']"),editorInkParamsToolbar:i.querySelector("[data-dom-id='editorInkParamsToolbar']"),editorStampButton:i.querySelector("[data-dom-id='editorStamp']"),download:i.querySelector("[data-dom-id='download']")},secondaryToolbar:{toolbar:i.querySelector("[data-dom-id='secondaryToolbar']"),toggleButton:i.querySelector("[data-dom-id='secondaryToolbarToggle']"),presentationModeButton:i.querySelector("[data-dom-id='presentationMode']"),openFileButton:i.querySelector("[data-dom-id='secondaryOpenFile']"),printButton:i.querySelector("[data-dom-id='secondaryPrint']"),downloadButton:i.querySelector("[data-dom-id='secondaryDownload']"),viewBookmarkButton:i.querySelector("[data-dom-id='viewBookmark']"),firstPageButton:i.querySelector("[data-dom-id='firstPage']"),lastPageButton:i.querySelector("[data-dom-id='lastPage']"),pageRotateCwButton:i.querySelector("[data-dom-id='pageRotateCw']"),pageRotateCcwButton:i.querySelector("[data-dom-id='pageRotateCcw']"),cursorSelectToolButton:i.querySelector("[data-dom-id='cursorSelectTool']"),cursorHandToolButton:i.querySelector("[data-dom-id='cursorHandTool']"),scrollPageButton:i.querySelector("[data-dom-id='scrollPage']"),scrollVerticalButton:i.querySelector("[data-dom-id='scrollVertical']"),scrollHorizontalButton:i.querySelector("[data-dom-id='scrollHorizontal']"),scrollWrappedButton:i.querySelector("[data-dom-id='scrollWrapped']"),spreadNoneButton:i.querySelector("[data-dom-id='spreadNone']"),spreadOddButton:i.querySelector("[data-dom-id='spreadOdd']"),spreadEvenButton:i.querySelector("[data-dom-id='spreadEven']"),documentPropertiesButton:i.querySelector("[data-dom-id='documentProperties']")},sidebar:{outerContainer:i.querySelector("[data-dom-id='outerContainer']"),sidebarContainer:i.querySelector("[data-dom-id='sidebarContainer']"),toggleButton:i.querySelector("[data-dom-id='sidebarToggle']"),resizer:i.querySelector("[data-dom-id='sidebarResizer']"),thumbnailButton:i.querySelector("[data-dom-id='viewThumbnail']"),outlineButton:i.querySelector("[data-dom-id='viewOutline']"),attachmentsButton:i.querySelector("[data-dom-id='viewAttachments']"),layersButton:i.querySelector("[data-dom-id='viewLayers']"),thumbnailView:i.querySelector("[data-dom-id='thumbnailView']"),outlineView:i.querySelector("[data-dom-id='outlineView']"),attachmentsView:i.querySelector("[data-dom-id='attachmentsView']"),layersView:i.querySelector("[data-dom-id='layersView']"),outlineOptionsContainer:i.querySelector("[data-dom-id='outlineOptionsContainer']"),currentOutlineItemButton:i.querySelector("[data-dom-id='currentOutlineItem']")},findBar:{bar:i.querySelector("[data-dom-id='findbar']"),toggleButton:i.querySelector("[data-dom-id='viewFind']"),findField:i.querySelector("[data-dom-id='findInput']"),highlightAllCheckbox:i.querySelector("[data-dom-id='findHighlightAll']"),caseSensitiveCheckbox:i.querySelector("[data-dom-id='findMatchCase']"),matchDiacriticsCheckbox:i.querySelector("[data-dom-id='findMatchDiacritics']"),entireWordCheckbox:i.querySelector("[data-dom-id='findEntireWord']"),findMsg:i.querySelector("[data-dom-id='findMsg']"),findResultsCount:i.querySelector("[data-dom-id='findResultsCount']"),findPreviousButton:i.querySelector("[data-dom-id='findPrevious']"),findNextButton:i.querySelector("[data-dom-id='findNext']")},passwordOverlay:{dialog:i.querySelector("[data-dom-id='passwordDialog']"),label:i.querySelector("[data-dom-id='passwordText']"),input:i.querySelector("[data-dom-id='password']"),submitButton:i.querySelector("[data-dom-id='passwordSubmit']"),cancelButton:i.querySelector("[data-dom-id='passwordCancel']")},documentProperties:{dialog:i.querySelector("[data-dom-id='documentPropertiesDialog']"),closeButton:i.querySelector("[data-dom-id='documentPropertiesClose']"),fields:{fileName:i.querySelector("[data-dom-id='fileNameField']"),fileSize:i.querySelector("[data-dom-id='fileSizeField']"),title:i.querySelector("[data-dom-id='titleField']"),author:i.querySelector("[data-dom-id='authorField']"),subject:i.querySelector("[data-dom-id='subjectField']"),keywords:i.querySelector("[data-dom-id='keywordsField']"),creationDate:i.querySelector("[data-dom-id='creationDateField']"),modificationDate:i.querySelector("[data-dom-id='modificationDateField']"),creator:i.querySelector("[data-dom-id='creatorField']"),producer:i.querySelector("[data-dom-id='producerField']"),version:i.querySelector("[data-dom-id='versionField']"),pageCount:i.querySelector("[data-dom-id='pageCountField']"),pageSize:i.querySelector("[data-dom-id='pageSizeField']"),linearized:i.querySelector("[data-dom-id='linearizedField']")}},annotationEditorParams:{editorFreeTextFontSize:i.querySelector("[data-dom-id='editorFreeTextFontSize']"),editorFreeTextColor:i.querySelector("[data-dom-id='editorFreeTextColor']"),editorInkColor:i.querySelector("[data-dom-id='editorInkColor']"),editorInkThickness:i.querySelector("[data-dom-id='editorInkThickness']"),editorInkOpacity:i.querySelector("[data-dom-id='editorInkOpacity']")},printContainer:i.querySelector("[data-dom-id='printContainer']"),openFileInput:i.querySelector("[data-dom-id='fileInput']"),debuggerScriptPath:"../pdf.js/web/debugger.js"}}function m(i){const{parent:n=null,resourcePath:u,src:c,disableCORSCheck:o=!1,disableAutoSetTitle:h=!1,appOptions:g={}}=i,x=`${u}/build/pdf.worker.js`,j=l.AppOptions;Object.keys(g).forEach(function(O){j.set(O,g[O])}),j.set("workerSrc",x),j.set("sandboxBundleSrc",`${u}/build/pdf.sandbox.js`),j.set("defaultUrl",c),j.set("disableCORSCheck",o),j.set("disableAutoSetTitle",h),j.set("disablePreferences",!0);const V=`${u}/web/locale/locale.properties`;(0,L.injectLocaleResource)(V);const E=new a.PDFViewerApplication(j);if(e=E,n){const O=(0,S.default)();n.appendChild(O);const y=d(n);E.run(y)}return E}function v(i){return r||(r={createApp(n){const u=m(n);return this._register(u),u},_register(n){let u=null;const c=function(o){u||(u=window.requestAnimationFrame(()=>{u=null,r.activateApp(o)}))};n.initializedPromise.then(()=>{i.forEach(o=>{n.appConfig.sidebar.outerContainer.addEventListener(o,()=>{c(n)})})})},activateApp(n){e!==n&&(e&&window.removeEventListener("keydown",e.helper.webViewerKeyDown),e=n,window.addEventListener("keydown",e.helper.webViewerKeyDown))}},r)}function f(){return e}function b(i){return v(["mousemove","click","mousedown","touchstart"]).createApp(i)}},(oe,T,C)=>{Object.defineProperty(T,"__esModule",{value:!0}),T.PDFViewerApplication=void 0;var a=C(3),l=C(8),L=C(44);class S extends l.ViewerApplication{constructor(e){super(),this.appOptions=e,this.helper=(0,a.createHelper)(this),this.bindServices()}bindServices(){(0,L.bindExternalService)(this),(0,L.bindPrintServiceFactory)(l.PDFPrintServiceFactory)}run(e){const{validateFileURL:r}=this.helper;return super.run(e,r)}bindEvents(){const e=this.appOptions,{eventBus:r,_boundEvents:d}=this;d.beforePrint=this.beforePrint.bind(this),d.afterPrint=this.afterPrint.bind(this);const{webViewerResize:m,webViewerHashchange:v,webViewerPageRendered:f,webViewerUpdateViewarea:b,webViewerPageChanging:i,webViewerScaleChanging:n,webViewerRotationChanging:u,webViewerSidebarViewChanged:c,webViewerPageMode:o,webViewerNamedAction:h,webViewerPresentationModeChanged:g,webViewerPresentationMode:x,webViewerPrint:j,webViewerDownload:V,webViewerSave:E,webViewerFirstPage:O,webViewerLastPage:y,webViewerNextPage:B,webViewerPreviousPage:$,webViewerZoomIn:I,webViewerZoomOut:ce,webViewerZoomReset:we,webViewerPageNumberChanged:q,webViewerScaleChanged:P,webViewerRotateCw:s,webViewerRotateCcw:p,webViewerOptionalContentConfig:F,webViewerSwitchScrollMode:U,webViewerScrollModeChanged:X,webViewerSwitchSpreadMode:Y,webViewerSpreadModeChanged:ee,webViewerDocumentProperties:_e,webViewerFindFromUrlHash:pe,webViewerUpdateFindMatchesCount:ne,webViewerUpdateFindControlState:de,reportPageStatsPDFBug:ye,webViewerFileInputChange:me,webViewerOpenFile:Te,webViewerSwitchAnnotationEditorMode:Ie,webViewerSwitchAnnotationEditorParams:Se,webViewerAnnotationEditorStatesChanged:Oe,webViewerPageRender:ae,webViewerOpenInExternalApp:J}=this.helper;r._on("resize",m),r._on("hashchange",v),r._on("beforeprint",d.beforePrint),r._on("afterprint",d.afterPrint),r._on("pagerender",ae),r._on("pagerendered",f),r._on("updateviewarea",b),r._on("pagechanging",i),r._on("scalechanging",n),r._on("rotationchanging",u),r._on("sidebarviewchanged",c),r._on("pagemode",o),r._on("namedaction",h),r._on("presentationmodechanged",g),r._on("presentationmode",x),r._on("switchannotationeditormode",Ie),r._on("switchannotationeditorparams",Se),r._on("print",j),r._on("download",V),r._on("openinexternalapp",J),r._on("firstpage",O),r._on("lastpage",y),r._on("nextpage",B),r._on("previouspage",$),r._on("zoomin",I),r._on("zoomout",ce),r._on("zoomreset",we),r._on("pagenumberchanged",q),r._on("scalechanged",P),r._on("rotatecw",s),r._on("rotateccw",p),r._on("optionalcontentconfig",F),r._on("switchscrollmode",U),r._on("scrollmodechanged",X),r._on("switchspreadmode",Y),r._on("spreadmodechanged",ee),r._on("documentproperties",_e),r._on("findfromurlhash",pe),r._on("updatefindmatchescount",ne),r._on("updatefindcontrolstate",de),e.get("pdfBug")&&(d.reportPageStatsPDFBug=ye,r._on("pagerendered",d.reportPageStatsPDFBug),r._on("pagechanging",d.reportPageStatsPDFBug)),r._on("fileinputchange",me),r._on("openfile",Te)}setTitle(e=this._title){if(this._title=e,this.isViewerEmbedded||this.appOptions.get("disableAutoSetTitle"))return;const r=this._hasAnnotationEditors&&!this.pdfRenderingQueue.printing;document.title=`${r?"* ":""}${e}`}bindWindowEvents(){const{eventBus:e,_boundEvents:r}=this,{webViewerVisibilityChange:d,webViewerWheel:m,webViewerTouchStart:v,webViewerTouchMove:f,webViewerTouchEnd:b,webViewerClick:i,webViewerKeyDown:n,webViewerKeyUp:u,webViewerResolutionChange:c}=this.helper;function o(h=null){h&&c(h);const g=window.matchMedia(`(resolution: ${window.devicePixelRatio||1}dppx)`);g.addEventListener("change",o,{once:!0}),r.removeWindowResolutionChange||(r.removeWindowResolutionChange=function(){g.removeEventListener("change",o),r.removeWindowResolutionChange=null})}o(),r.windowResize=()=>{e.dispatch("resize",{source:window})},r.windowHashChange=()=>{e.dispatch("hashchange",{source:window,hash:document.location.hash.substring(1)})},r.windowBeforePrint=()=>{e.dispatch("beforeprint",{source:window})},r.windowAfterPrint=()=>{e.dispatch("afterprint",{source:window})},r.windowUpdateFromSandbox=h=>{e.dispatch("updatefromsandbox",{source:window,detail:h.detail})},window.addEventListener("visibilitychange",d),window.addEventListener("wheel",m,{passive:!1}),window.addEventListener("touchstart",v,{passive:!1}),window.addEventListener("touchmove",f,{passive:!1}),window.addEventListener("touchend",b,{passive:!1}),window.addEventListener("click",i),window.addEventListener("keydown",n),window.addEventListener("keyup",u),window.addEventListener("resize",r.windowResize),window.addEventListener("hashchange",r.windowHashChange),window.addEventListener("beforeprint",r.windowBeforePrint),window.addEventListener("afterprint",r.windowAfterPrint),window.addEventListener("updatefromsandbox",r.windowUpdateFromSandbox)}unbindEvents(){const{eventBus:e,_boundEvents:r}=this,{webViewerResize:d,webViewerHashchange:m,webViewerPageRendered:v,webViewerUpdateViewarea:f,webViewerPageChanging:b,webViewerScaleChanging:i,webViewerRotationChanging:n,webViewerSidebarViewChanged:u,webViewerPageMode:c,webViewerNamedAction:o,webViewerPresentationModeChanged:h,webViewerPresentationMode:g,webViewerPrint:x,webViewerDownload:j,webViewerSave:V,webViewerFirstPage:E,webViewerLastPage:O,webViewerNextPage:y,webViewerPreviousPage:B,webViewerZoomIn:$,webViewerZoomOut:I,webViewerZoomReset:ce,webViewerPageNumberChanged:we,webViewerScaleChanged:q,webViewerRotateCw:P,webViewerRotateCcw:s,webViewerOptionalContentConfig:p,webViewerSwitchScrollMode:F,webViewerScrollModeChanged:U,webViewerSwitchSpreadMode:X,webViewerSpreadModeChanged:Y,webViewerDocumentProperties:ee,webViewerFindFromUrlHash:_e,webViewerUpdateFindMatchesCount:pe,webViewerUpdateFindControlState:ne,reportPageStatsPDFBug:de,webViewerFileInputChange:ye,webViewerOpenFile:me,webViewerPageRender:Te,webViewerOpenInExternalApp:Ie}=this.helper;e._off("resize",d),e._off("hashchange",m),e._off("beforeprint",r.beforePrint),e._off("afterprint",r.afterPrint),e._on("pagerender",Te),e._off("pagerendered",v),e._off("updateviewarea",f),e._off("pagechanging",b),e._off("scalechanging",i),e._off("rotationchanging",n),e._off("sidebarviewchanged",u),e._off("pagemode",c),e._off("namedaction",o),e._off("presentationmodechanged",h),e._off("presentationmode",g),e._off("print",x),e._off("download",j),e._off("openinexternalapp",Ie),e._off("firstpage",E),e._off("lastpage",O),e._off("nextpage",y),e._off("previouspage",B),e._off("zoomin",$),e._off("zoomout",I),e._off("zoomreset",ce),e._off("pagenumberchanged",we),e._off("scalechanged",q),e._off("rotatecw",P),e._off("rotateccw",s),e._off("optionalcontentconfig",p),e._off("switchscrollmode",F),e._off("scrollmodechanged",U),e._off("switchspreadmode",X),e._off("spreadmodechanged",Y),e._off("documentproperties",ee),e._off("findfromurlhash",_e),e._off("updatefindmatchescount",pe),e._off("updatefindcontrolstate",ne),r.reportPageStatsPDFBug&&(e._off("pagerendered",r.reportPageStatsPDFBug),e._off("pagechanging",r.reportPageStatsPDFBug),r.reportPageStatsPDFBug=null),e._off("fileinputchange",ye),e._off("openfile",me),r.beforePrint=null,r.afterPrint=null}unbindWindowEvents(){var u;const{_boundEvents:e}=this,{webViewerVisibilityChange:r,webViewerWheel:d,webViewerTouchStart:m,webViewerTouchMove:v,webViewerTouchEnd:f,webViewerClick:b,webViewerKeyDown:i,webViewerKeyUp:n}=this.helper;window.removeEventListener("visibilitychange",r),window.removeEventListener("wheel",d,{passive:!1}),window.removeEventListener("touchstart",m,{passive:!1}),window.removeEventListener("touchmove",v,{passive:!1}),window.removeEventListener("touchend",f,{passive:!1}),window.removeEventListener("click",b),window.removeEventListener("keydown",i),window.removeEventListener("keyup",n),window.removeEventListener("resize",e.windowResize),window.removeEventListener("hashchange",e.windowHashChange),window.removeEventListener("beforeprint",e.windowBeforePrint),window.removeEventListener("afterprint",e.windowAfterPrint),window.removeEventListener("updatefromsandbox",e.windowUpdateFromSandbox),(u=e.removeWindowResolutionChange)==null||u.call(e),e.windowResize=null,e.windowHashChange=null,e.windowBeforePrint=null,e.windowAfterPrint=null,e.windowUpdateFromSandbox=null}_initializeAnnotationStorageCallbacks(e){if(e!==this.pdfDocument)return;const{annotationStorage:r}=e;r.onSetModified=()=>{window.addEventListener("beforeunload",this.helper.beforeUnload),this._annotationStorageModified=!0},r.onResetModified=()=>{window.removeEventListener("beforeunload",this.helper.beforeUnload),delete this._annotationStorageModified},r.onAnnotationEditor=d=>{this._hasAnnotationEditors=!!d,this.setTitle(),d&&this.externalServices.reportTelemetry({type:"editing",data:{type:d}})}}}T.PDFViewerApplication=S},(oe,T,C)=>{Object.defineProperty(T,"__esModule",{value:!0}),T.createHelper=w;var a=C(4),l=C(5),L=C(6);const S=1e3;function w(e){const r=e.appOptions,d=["null","http://mozilla.github.io","https://mozilla.github.io"];var m=function(Q){if(Q)try{const he=new URL(window.location.href).origin||"null";if(d.includes(he)||r.get("disableCORSCheck"))return;if(new URL(Q,window.location.href).origin!==he)throw new Error("file origin does not match viewer's")}catch(he){throw e.l10n.get("loading_error").then(se=>{e._documentError(se,{message:he==null?void 0:he.message})}),he}};async function v(){var Q;(Q=l.GlobalWorkerOptions).workerSrc||(Q.workerSrc=r.get("workerSrc")),await(0,l.loadScript)(l.PDFWorker.workerSrc)}async function f(Q){const{debuggerScriptPath:he}=Q.appConfig,{PDFBug:se}=await __non_webpack_import__(he);Q._PDFBug=se}function b({pageNumber:Q}){var se,ge;if(!((se=globalThis.Stats)!=null&&se.enabled))return;const he=e.pdfViewer.getPageView(Q-1);globalThis.Stats.add(Q,(ge=he==null?void 0:he.pdfPage)==null?void 0:ge.stats)}function i({pageNumber:Q}){var he;Q===e.page&&((he=e.toolbar)==null||he.updateLoadingIndicatorState(!0))}function n({pageNumber:Q,error:he}){var se,ge,_;if(Q===e.page&&((se=e.toolbar)==null||se.updateLoadingIndicatorState(!1)),((ge=e.pdfSidebar)==null?void 0:ge.visibleView)===a.SidebarView.THUMBS){const K=e.pdfViewer.getPageView(Q-1),ue=(_=e.pdfThumbnailViewer)==null?void 0:_.getThumbnail(Q-1);K&&(ue==null||ue.setImage(K))}he&&e.l10n.get("rendering_error").then(K=>{e._otherError(K,he)})}function u({mode:Q}){var se;let he;switch(Q){case"thumbs":he=a.SidebarView.THUMBS;break;case"bookmarks":case"outline":he=a.SidebarView.OUTLINE;break;case"attachments":he=a.SidebarView.ATTACHMENTS;break;case"layers":he=a.SidebarView.LAYERS;break;case"none":he=a.SidebarView.NONE;break;default:console.error('Invalid "pagemode" hash parameter: '+Q);return}(se=e.pdfSidebar)==null||se.switchView(he,!0)}function c(Q){var he;switch(Q.action){case"GoToPage":(he=e.appConfig.toolbar)==null||he.pageNumber.select();break;case"Find":e.supportsIntegratedFind||e==null||e.findBar.toggle();break;case"Print":e.triggerPrinting();break;case"SaveAs":e.downloadOrSave();break}}function o(Q){e.pdfViewer.presentationModeState=Q.state}function h({view:Q}){var he;e.pdfRenderingQueue.isThumbnailViewEnabled=Q===a.SidebarView.THUMBS,e.isInitialViewSet&&((he=e.store)==null||he.set("sidebarView",Q).catch(()=>{}))}function g({location:Q}){var he;if(e.isInitialViewSet&&((he=e.store)==null||he.setMultiple({page:Q.pageNumber,zoom:Q.scale,scrollLeft:Q.left,scrollTop:Q.top,rotation:Q.rotation}).catch(()=>{})),e.appConfig.secondaryToolbar){const se=e.pdfLinkService.getAnchorUrl(Q.pdfOpenParams);e.appConfig.secondaryToolbar.viewBookmarkButton.href=se}}function x(Q){var he;e.isInitialViewSet&&!e.pdfViewer.isInPresentationMode&&((he=e.store)==null||he.set("scrollMode",Q.mode).catch(()=>{}))}function j(Q){var he;e.isInitialViewSet&&!e.pdfViewer.isInPresentationMode&&((he=e.store)==null||he.set("spreadMode",Q.mode).catch(()=>{}))}function V(){const{pdfDocument:Q,pdfViewer:he,pdfRenderingQueue:se}=e;if(se.printing&&window.matchMedia("print").matches||!Q)return;const ge=he.currentScaleValue;(ge==="auto"||ge==="page-fit"||ge==="page-width")&&(he.currentScaleValue=ge),he.update()}function E(Q){var se;const he=Q.hash;he&&(e.isInitialViewSet?(se=e.pdfHistory)!=null&&se.popStateInProgress||e.pdfLinkService.setHash(he):e.initialBookmark=he)}var O=function(Q){var se;if((se=e.pdfViewer)!=null&&se.isInPresentationMode)return;const he=Q.fileInput.files[0];e.open({url:URL.createObjectURL(he),originalUrl:he.name})},y=function(Q){e.appConfig.openFileInput.click()};function B(){e.requestPresentationMode()}function $(Q){e.pdfViewer.annotationEditorMode=Q}function I(Q){e.pdfViewer.annotationEditorParams=Q}function ce(){e.triggerPrinting()}function we(){e.downloadOrSave()}function q(){e.openInExternalApp()}function P(){e.page=1}function s(){e.page=e.pagesCount}function p(){e.pdfViewer.nextPage()}function F(){e.pdfViewer.previousPage()}function U(){e.zoomIn()}function X(){e.zoomOut()}function Y(){e.zoomReset()}function ee(Q){var se;const he=e.pdfViewer;Q.value!==""&&e.pdfLinkService.goToPage(Q.value),Q.value!==he.currentPageNumber.toString()&&Q.value!==he.currentPageLabel&&((se=e.toolbar)==null||se.setPageNumber(he.currentPageNumber,he.currentPageLabel))}function _e(Q){e.pdfViewer.currentScaleValue=Q.value}function pe(){e.rotatePages(90)}function ne(){e.rotatePages(-90)}function de(Q){e.pdfViewer.optionalContentConfigPromise=Q.promise}function ye(Q){e.pdfViewer.scrollMode=Q.mode}function me(Q){e.pdfViewer.spreadMode=Q.mode}function Te(){var Q;(Q=e.pdfDocumentProperties)==null||Q.open()}function Ie(Q){e.eventBus.dispatch("find",{source:Q.source,type:"",query:Q.query,caseSensitive:!1,entireWord:!1,highlightAll:!0,findPrevious:!1,matchDiacritics:!0})}function Se({matchesCount:Q}){e.supportsIntegratedFind?e.externalServices.updateFindMatchesCount(Q):e.findBar.updateResultsCount(Q)}function Oe({state:Q,previous:he,matchesCount:se,rawQuery:ge}){var _;e.supportsIntegratedFind?e.externalServices.updateFindControlState({result:Q,findPrevious:he,matchesCount:se,rawQuery:ge}):(_=e.findBar)==null||_.updateUIState(Q,he,se)}function ae(Q){var he;(he=e.toolbar)==null||he.setPageScale(Q.presetValue,Q.scale),e.pdfViewer.update()}function J(Q){e.pdfThumbnailViewer&&(e.pdfThumbnailViewer.pagesRotation=Q.pagesRotation),e.forceRendering(),e.pdfViewer.currentPageNumber=Q.pageNumber}function le({pageNumber:Q,pageLabel:he}){var ge,_,K,ue,re;(ge=e.toolbar)==null||ge.setPageNumber(Q,he),(_=e.secondaryToolbar)==null||_.setPageNumber(Q),((K=e.pdfSidebar)==null?void 0:K.visibleView)===a.SidebarView.THUMBS&&((ue=e.pdfThumbnailViewer)==null||ue.scrollThumbnailIntoView(Q));const se=e.pdfViewer.getPageView(Q-1);(re=e.toolbar)==null||re.updateLoadingIndicatorState((se==null?void 0:se.renderingState)===a.RenderingStates.RUNNING)}function fe(Q){e.pdfViewer.refresh()}function Ce(Q){document.visibilityState==="visible"&&Ne()}let Me=null;function Ne(){Me&&clearTimeout(Me),Me=setTimeout(function(){Me=null},S)}function Ue(Q){const{pdfViewer:he,supportedMouseWheelZoomModifierKeys:se,supportsPinchToZoom:ge}=e;if(he.isInPresentationMode)return;const _=Q.deltaMode;let K=Math.exp(-Q.deltaY/100);const ue=!1,re=Q.ctrlKey&&!e._isCtrlKeyDown&&_===WheelEvent.DOM_DELTA_PIXEL&&Q.deltaX===0&&(Math.abs(K-1)<.05||ue)&&Q.deltaZ===0;if(re||Q.ctrlKey&&se.ctrlKey||Q.metaKey&&se.metaKey){if(Q.preventDefault(),Me||document.visibilityState==="hidden")return;const k=he.currentScale;if(re&&ge)if(K=e._accumulateFactor(k,K,"_wheelUnusedFactor"),K<1)e.zoomOut(null,K);else if(K>1)e.zoomIn(null,K);else return;else{const M=(0,a.normalizeWheelEventDirection)(Q);let W=0;if(_===WheelEvent.DOM_DELTA_LINE||_===WheelEvent.DOM_DELTA_PAGE?Math.abs(M)>=1?W=Math.sign(M):W=e._accumulateTicks(M,"_wheelUnusedTicks"):W=e._accumulateTicks(M/30,"_wheelUnusedTicks"),W<0)e.zoomOut(-W);else if(W>0)e.zoomIn(W);else return}e._centerAtPos(k,Q.clientX,Q.clientY)}else Ne()}function Ve(Q){if(e.pdfViewer.isInPresentationMode||Q.touches.length<2)return;if(Q.preventDefault(),Q.touches.length!==2){e._touchInfo=null;return}let[he,se]=Q.touches;he.identifier>se.identifier&&([he,se]=[se,he]),e._touchInfo={touch0X:he.pageX,touch0Y:he.pageY,touch1X:se.pageX,touch1Y:se.pageY}}function Ge(Q){if(!e._touchInfo||Q.touches.length!==2)return;const{pdfViewer:he,_touchInfo:se,supportsPinchToZoom:ge}=e;let[_,K]=Q.touches;_.identifier>K.identifier&&([_,K]=[K,_]);const{pageX:ue,pageY:re}=_,{pageX:k,pageY:M}=K,{touch0X:W,touch0Y:G,touch1X:te,touch1Y:ve}=se;if(Math.abs(W-ue)<=1&&Math.abs(G-re)<=1&&Math.abs(te-k)<=1&&Math.abs(ve-M)<=1)return;if(se.touch0X=ue,se.touch0Y=re,se.touch1X=k,se.touch1Y=M,W===ue&&G===re){const ke=te-ue,He=ve-re,De=k-ue,Be=M-re,je=ke*Be-He*De;if(Math.abs(je)>.02*Math.hypot(ke,He)*Math.hypot(De,Be))return}else if(te===k&&ve===M){const ke=W-k,He=G-M,De=ue-k,Be=re-M,je=ke*Be-He*De;if(Math.abs(je)>.02*Math.hypot(ke,He)*Math.hypot(De,Be))return}else{const ke=ue-W,He=k-te,De=re-G,Be=M-ve;if(ke*He+De*Be>=0)return}Q.preventDefault();const Le=Math.hypot(ue-k,re-M)||1,Fe=Math.hypot(W-te,G-ve)||1,Re=he.currentScale;if(ge){const ke=e._accumulateFactor(Re,Le/Fe,"_touchUnusedFactor");if(ke<1)e.zoomOut(null,ke);else if(ke>1)e.zoomIn(null,ke);else return}else{const He=e._accumulateTicks((Le-Fe)/30,"_touchUnusedTicks");if(He<0)e.zoomOut(-He);else if(He>0)e.zoomIn(He);else return}e._centerAtPos(Re,(ue+k)/2,(re+M)/2)}function We(Q){e._touchInfo&&(Q.preventDefault(),e._touchInfo=null,e._touchUnusedTicks=0,e._touchUnusedFactor=1)}function ze(Q){var se,ge,_;if(!((se=e.secondaryToolbar)!=null&&se.isOpen))return;const he=e.appConfig;(e.pdfViewer.containsElement(Q.target)||(ge=he.toolbar)!=null&&ge.container.contains(Q.target)&&Q.target!==((_=he.secondaryToolbar)==null?void 0:_.toggleButton))&&e.secondaryToolbar.close()}function Pe(Q){Q.key==="Control"&&(e._isCtrlKeyDown=!1)}function A(Q){var M,W,G,te,ve,Le;if(e._isCtrlKeyDown=Q.key==="Control",e.overlayManager.active)return;const{eventBus:he,pdfViewer:se}=e,ge=se.isInPresentationMode;let _=!1,K=!1;const ue=(Q.ctrlKey?1:0)|(Q.altKey?2:0)|(Q.shiftKey?4:0)|(Q.metaKey?8:0);if(ue===1||ue===8||ue===5||ue===12)switch(Q.keyCode){case 70:!e.supportsIntegratedFind&&!Q.shiftKey&&((M=e.findBar)==null||M.open(),_=!0);break;case 71:if(!e.supportsIntegratedFind){const{state:Fe}=e.findController;if(Fe){const Re={source:window,type:"again",findPrevious:ue===5||ue===12};he.dispatch("find",{...Fe,...Re})}_=!0}break;case 61:case 107:case 187:case 171:e.zoomIn(),_=!0;break;case 173:case 109:case 189:e.zoomOut(),_=!0;break;case 48:case 96:ge||(setTimeout(function(){e.zoomReset()}),_=!1);break;case 38:(ge||e.page>1)&&(e.page=1,_=!0,K=!0);break;case 40:(ge||e.page<e.pagesCount)&&(e.page=e.pagesCount,_=!0,K=!0);break}if(ue===1||ue===8)switch(Q.keyCode){case 83:he.dispatch("download",{source:window}),_=!0;break;case 79:he.dispatch("openfile",{source:window}),_=!0;break}if(ue===3||ue===10)switch(Q.keyCode){case 80:e.requestPresentationMode(),_=!0,e.externalServices.reportTelemetry({type:"buttons",data:{id:"presentationModeKeyboard"}});break;case 71:e.appConfig.toolbar&&(e.appConfig.toolbar.pageNumber.select(),_=!0);break}if(_){K&&!ge&&se.focus(),Q.preventDefault();return}const re=(0,a.getActiveOrFocusedElement)(),k=re==null?void 0:re.tagName.toUpperCase();if(!((k==="INPUT"||k==="TEXTAREA"||k==="SELECT"||re!=null&&re.isContentEditable)&&Q.keyCode!==27)){if(ue===0){let Fe=0,Re=!1;switch(Q.keyCode){case 38:case 33:se.isVerticalScrollbarEnabled&&(Re=!0),Fe=-1;break;case 8:ge||(Re=!0),Fe=-1;break;case 37:se.isHorizontalScrollbarEnabled&&(Re=!0);case 75:case 80:Fe=-1;break;case 27:(W=e.secondaryToolbar)!=null&&W.isOpen&&(e.secondaryToolbar.close(),_=!0),!e.supportsIntegratedFind&&((G=e.findBar)!=null&&G.opened)&&(e.findBar.close(),_=!0);break;case 40:case 34:se.isVerticalScrollbarEnabled&&(Re=!0),Fe=1;break;case 13:case 32:ge||(Re=!0),Fe=1;break;case 39:se.isHorizontalScrollbarEnabled&&(Re=!0);case 74:case 78:Fe=1;break;case 36:(ge||e.page>1)&&(e.page=1,_=!0,K=!0);break;case 35:(ge||e.page<e.pagesCount)&&(e.page=e.pagesCount,_=!0,K=!0);break;case 83:(te=e.pdfCursorTools)==null||te.switchTool(L.CursorTool.SELECT);break;case 72:(ve=e.pdfCursorTools)==null||ve.switchTool(L.CursorTool.HAND);break;case 82:e.rotatePages(90);break;case 115:(Le=e.pdfSidebar)==null||Le.toggle();break}Fe!==0&&(!Re||se.currentScaleValue==="page-fit")&&(Fe>0?se.nextPage():se.previousPage(),_=!0)}if(ue===4)switch(Q.keyCode){case 13:case 32:if(!ge&&se.currentScaleValue!=="page-fit")break;se.previousPage(),_=!0;break;case 82:e.rotatePages(-90);break}!_&&!ge&&(Q.keyCode>=33&&Q.keyCode<=40||Q.keyCode===32&&k!=="BUTTON")&&(K=!0),K&&!se.containsElement(re)&&se.focus(),_&&Q.preventDefault()}}function H(Q){return Q.preventDefault(),Q.returnValue="",!1}function be(Q){e.externalServices.updateEditorStates(Q)}return{validateFileURL:m,loadFakeWorker:v,loadPDFBug:f,reportPageStatsPDFBug:b,webViewerPageRender:i,webViewerPageRendered:n,webViewerPageMode:u,webViewerNamedAction:c,webViewerPresentationModeChanged:o,webViewerSidebarViewChanged:h,webViewerUpdateViewarea:g,webViewerScrollModeChanged:x,webViewerSpreadModeChanged:j,webViewerResize:V,webViewerHashchange:E,webViewerFileInputChange:O,webViewerOpenFile:y,webViewerPresentationMode:B,webViewerSwitchAnnotationEditorMode:$,webViewerSwitchAnnotationEditorParams:I,webViewerPrint:ce,webViewerDownload:we,webViewerOpenInExternalApp:q,webViewerFirstPage:P,webViewerLastPage:s,webViewerNextPage:p,webViewerPreviousPage:F,webViewerZoomIn:U,webViewerZoomOut:X,webViewerZoomReset:Y,webViewerPageNumberChanged:ee,webViewerScaleChanged:_e,webViewerRotateCw:pe,webViewerRotateCcw:ne,webViewerOptionalContentConfig:de,webViewerSwitchScrollMode:ye,webViewerSwitchSpreadMode:me,webViewerDocumentProperties:Te,webViewerFindFromUrlHash:Ie,webViewerUpdateFindMatchesCount:Se,webViewerUpdateFindControlState:Oe,webViewerScaleChanging:ae,webViewerRotationChanging:J,webViewerPageChanging:le,webViewerResolutionChange:fe,webViewerVisibilityChange:Ce,setZoomDisabledTimeout:Ne,webViewerWheel:Ue,webViewerTouchStart:Ve,webViewerTouchMove:Ge,webViewerTouchEnd:We,webViewerClick:ze,webViewerKeyUp:Pe,webViewerKeyDown:A,beforeUnload:H,webViewerAnnotationEditorStatesChanged:be}}},(oe,T)=>{var me,Te,Ie,Se,Oe;Object.defineProperty(T,"__esModule",{value:!0}),T.animationStarted=T.VERTICAL_PADDING=T.UNKNOWN_SCALE=T.TextLayerMode=T.SpreadMode=T.SidebarView=T.ScrollMode=T.SCROLLBAR_PADDING=T.RenderingStates=T.ProgressBar=T.PresentationModeState=T.OutputScale=T.MIN_SCALE=T.MAX_SCALE=T.MAX_AUTO_SCALE=T.DEFAULT_SCALE_VALUE=T.DEFAULT_SCALE_DELTA=T.DEFAULT_SCALE=T.CursorTool=T.AutoPrintRegExp=void 0,T.apiPageLayoutToViewerModes=pe,T.apiPageModeToSidebarView=ne,T.approximateFraction=O,T.backtrackBeforeAllVisibleElements=$,T.binarySearchFirstItem=E,T.docStyle=void 0,T.getActiveOrFocusedElement=_e,T.getPageSizeInches=B,T.getVisibleElements=I,T.isPortraitOrientation=F,T.isValidRotation=P,T.isValidScrollMode=s,T.isValidSpreadMode=p,T.noContextMenuHandler=ce,T.normalizeWheelEventDelta=q,T.normalizeWheelEventDirection=we,T.parseQueryString=x,T.removeNullCharacters=V,T.roundToDivide=y,T.scrollIntoView=h,T.toggleCheckedBtn=de,T.toggleExpandedBtn=ye,T.watchScroll=g;const C="auto";T.DEFAULT_SCALE_VALUE=C;const a=1;T.DEFAULT_SCALE=a;const l=1.1;T.DEFAULT_SCALE_DELTA=l;const L=.1;T.MIN_SCALE=L;const S=10;T.MAX_SCALE=S;const w=0;T.UNKNOWN_SCALE=w;const e=1.25;T.MAX_AUTO_SCALE=e;const r=40;T.SCROLLBAR_PADDING=r;const d=5;T.VERTICAL_PADDING=d;const m={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3};T.RenderingStates=m;const v={UNKNOWN:0,NORMAL:1,CHANGING:2,FULLSCREEN:3};T.PresentationModeState=v;const f={UNKNOWN:-1,NONE:0,THUMBS:1,OUTLINE:2,ATTACHMENTS:3,LAYERS:4};T.SidebarView=f;const b={DISABLE:0,ENABLE:1,ENABLE_PERMISSIONS:2};T.TextLayerMode=b;const i={UNKNOWN:-1,VERTICAL:0,HORIZONTAL:1,WRAPPED:2,PAGE:3};T.ScrollMode=i;const n={UNKNOWN:-1,NONE:0,ODD:1,EVEN:2};T.SpreadMode=n;const u={SELECT:0,HAND:1,ZOOM:2};T.CursorTool=u;const c=/\bprint\s*\(/;T.AutoPrintRegExp=c;class o{constructor(){const J=window.devicePixelRatio||1;this.sx=J,this.sy=J}get scaled(){return this.sx!==1||this.sy!==1}}T.OutputScale=o;function h(ae,J,le=!1){let fe=ae.offsetParent;if(!fe){console.error("offsetParent is not set -- cannot scroll");return}let Ce=ae.offsetTop+ae.clientTop,Me=ae.offsetLeft+ae.clientLeft;for(;fe.clientHeight===fe.scrollHeight&&fe.clientWidth===fe.scrollWidth||le&&(fe.classList.contains("markedContent")||getComputedStyle(fe).overflow==="hidden");)if(Ce+=fe.offsetTop,Me+=fe.offsetLeft,fe=fe.offsetParent,!fe)return;J&&(J.top!==void 0&&(Ce+=J.top),J.left!==void 0&&(Me+=J.left,fe.scrollLeft=Me)),fe.scrollTop=Ce}function g(ae,J){const le=function(Me){Ce||(Ce=window.requestAnimationFrame(function(){Ce=null;const Ue=ae.scrollLeft,Ve=fe.lastX;Ue!==Ve&&(fe.right=Ue>Ve),fe.lastX=Ue;const Ge=ae.scrollTop,We=fe.lastY;Ge!==We&&(fe.down=Ge>We),fe.lastY=Ge,J(fe)}))},fe={right:!0,down:!0,lastX:ae.scrollLeft,lastY:ae.scrollTop,_eventHandler:le};let Ce=null;return ae.addEventListener("scroll",le,!0),fe}function x(ae){const J=new Map;for(const[le,fe]of new URLSearchParams(ae))J.set(le.toLowerCase(),fe);return J}const j=/[\x01-\x1F]/g;function V(ae,J=!1){return typeof ae!="string"?(console.error("The argument must be a string."),ae):(J&&(ae=ae.replaceAll(j," ")),ae.replaceAll("\0",""))}function E(ae,J,le=0){let fe=le,Ce=ae.length-1;if(Ce<0||!J(ae[Ce]))return ae.length;if(J(ae[fe]))return fe;for(;fe<Ce;){const Me=fe+Ce>>1,Ne=ae[Me];J(Ne)?Ce=Me:fe=Me+1}return fe}function O(ae){if(Math.floor(ae)===ae)return[ae,1];const J=1/ae,le=8;if(J>le)return[1,le];if(Math.floor(J)===J)return[1,J];const fe=ae>1?J:ae;let Ce=0,Me=1,Ne=1,Ue=1;for(;;){const Ge=Ce+Ne,We=Me+Ue;if(We>le)break;fe<=Ge/We?(Ne=Ge,Ue=We):(Ce=Ge,Me=We)}let Ve;return fe-Ce/Me<Ne/Ue-fe?Ve=fe===ae?[Ce,Me]:[Me,Ce]:Ve=fe===ae?[Ne,Ue]:[Ue,Ne],Ve}function y(ae,J){const le=ae%J;return le===0?ae:Math.round(ae-le+J)}function B({view:ae,userUnit:J,rotate:le}){const[fe,Ce,Me,Ne]=ae,Ue=le%180!==0,Ve=(Me-fe)/72*J,Ge=(Ne-Ce)/72*J;return{width:Ue?Ge:Ve,height:Ue?Ve:Ge}}function $(ae,J,le){if(ae<2)return ae;let fe=J[ae].div,Ce=fe.offsetTop+fe.clientTop;Ce>=le&&(fe=J[ae-1].div,Ce=fe.offsetTop+fe.clientTop);for(let Me=ae-2;Me>=0&&(fe=J[Me].div,!(fe.offsetTop+fe.clientTop+fe.clientHeight<=Ce));--Me)ae=Me;return ae}function I({scrollEl:ae,views:J,sortByVisibility:le=!1,horizontal:fe=!1,rtl:Ce=!1}){const Me=ae.scrollTop,Ne=Me+ae.clientHeight,Ue=ae.scrollLeft,Ve=Ue+ae.clientWidth;function Ge(se){const ge=se.div;return ge.offsetTop+ge.clientTop+ge.clientHeight>Me}function We(se){const ge=se.div,_=ge.offsetLeft+ge.clientLeft,K=_+ge.clientWidth;return Ce?_<Ve:K>Ue}const ze=[],Pe=new Set,A=J.length;let H=E(J,fe?We:Ge);H>0&&H<A&&!fe&&(H=$(H,J,Me));let be=fe?Ve:-1;for(let se=H;se<A;se++){const ge=J[se],_=ge.div,K=_.offsetLeft+_.clientLeft,ue=_.offsetTop+_.clientTop,re=_.clientWidth,k=_.clientHeight,M=K+re,W=ue+k;if(be===-1)W>=Ne&&(be=W);else if((fe?K:ue)>be)break;if(W<=Me||ue>=Ne||M<=Ue||K>=Ve)continue;const G=Math.max(0,Me-ue)+Math.max(0,W-Ne),te=Math.max(0,Ue-K)+Math.max(0,M-Ve),ve=(k-G)/k,Le=(re-te)/re,Fe=ve*Le*100|0;ze.push({id:ge.id,x:K,y:ue,view:ge,percent:Fe,widthPercent:Le*100|0}),Pe.add(ge.id)}const Q=ze[0],he=ze.at(-1);return le&&ze.sort(function(se,ge){const _=se.percent-ge.percent;return Math.abs(_)>.001?-_:se.id-ge.id}),{first:Q,last:he,views:ze,ids:Pe}}function ce(ae){ae.preventDefault()}function we(ae){let J=Math.hypot(ae.deltaX,ae.deltaY);const le=Math.atan2(ae.deltaY,ae.deltaX);return-.25*Math.PI<le&&le<.75*Math.PI&&(J=-J),J}function q(ae){const J=ae.deltaMode;let le=we(ae);const fe=30,Ce=30;return J===WheelEvent.DOM_DELTA_PIXEL?le/=fe*Ce:J===WheelEvent.DOM_DELTA_LINE&&(le/=Ce),le}function P(ae){return Number.isInteger(ae)&&ae%90===0}function s(ae){return Number.isInteger(ae)&&Object.values(i).includes(ae)&&ae!==i.UNKNOWN}function p(ae){return Number.isInteger(ae)&&Object.values(n).includes(ae)&&ae!==n.UNKNOWN}function F(ae){return ae.width<=ae.height}const U=new Promise(function(ae){window.requestAnimationFrame(ae)});T.animationStarted=U;const X=document.documentElement.style;T.docStyle=X;function Y(ae,J,le){return Math.min(Math.max(ae,J),le)}class ee{constructor(J){R(this,me,null);R(this,Te,null);R(this,Ie,0);R(this,Se,null);R(this,Oe,!0);ie(this,me,J.classList),ie(this,Se,J.style)}get percent(){return t(this,Ie)}set percent(J){if(ie(this,Ie,Y(J,0,100)),isNaN(J)){t(this,me).add("indeterminate");return}t(this,me).remove("indeterminate"),t(this,Se).setProperty("--progressBar-percent",`${t(this,Ie)}%`)}setWidth(J){if(!J)return;const fe=J.parentNode.offsetWidth-J.offsetWidth;fe>0&&t(this,Se).setProperty("--progressBar-end-offset",`${fe}px`)}setDisableAutoFetch(J=5e3){isNaN(t(this,Ie))||(t(this,Te)&&clearTimeout(t(this,Te)),this.show(),ie(this,Te,setTimeout(()=>{ie(this,Te,null),this.hide()},J)))}hide(){t(this,Oe)&&(ie(this,Oe,!1),t(this,me).add("hidden"))}show(){t(this,Oe)||(ie(this,Oe,!0),t(this,me).remove("hidden"))}}me=new WeakMap,Te=new WeakMap,Ie=new WeakMap,Se=new WeakMap,Oe=new WeakMap,T.ProgressBar=ee;function _e(){let ae=document,J=ae.activeElement||ae.querySelector(":focus");for(;J!=null&&J.shadowRoot;)ae=J.shadowRoot,J=ae.activeElement||ae.querySelector(":focus");return J}function pe(ae){let J=i.VERTICAL,le=n.NONE;switch(ae){case"SinglePage":J=i.PAGE;break;case"OneColumn":break;case"TwoPageLeft":J=i.PAGE;case"TwoColumnLeft":le=n.ODD;break;case"TwoPageRight":J=i.PAGE;case"TwoColumnRight":le=n.EVEN;break}return{scrollMode:J,spreadMode:le}}function ne(ae){switch(ae){case"UseNone":return f.NONE;case"UseThumbs":return f.THUMBS;case"UseOutlines":return f.OUTLINE;case"UseAttachments":return f.ATTACHMENTS;case"UseOC":return f.LAYERS}return f.NONE}function de(ae,J,le=null){ae.classList.toggle("toggled",J),ae.setAttribute("aria-checked",J),le==null||le.classList.toggle("hidden",!J)}function ye(ae,J,le=null){ae.classList.toggle("toggled",J),ae.setAttribute("aria-expanded",J),le==null||le.classList.toggle("hidden",!J)}},oe=>{let T;typeof window<"u"&&window["pdfjs-dist/build/pdf"]?T=window["pdfjs-dist/build/pdf"]:T=requirePdf(),oe.exports=T},(oe,T,C)=>{var w,e,r,Bn;Object.defineProperty(T,"__esModule",{value:!0}),T.PDFCursorTools=void 0;var a=C(5),l=C(4),L=C(7);class S{constructor({container:v,eventBus:f,cursorToolOnLoad:b=l.CursorTool.SELECT}){R(this,r);R(this,w,l.CursorTool.SELECT);R(this,e,null);this.container=v,this.eventBus=f,D(this,r,Bn).call(this),Promise.resolve().then(()=>{this.switchTool(b)})}get activeTool(){return t(this,w)}switchTool(v){if(t(this,e)!==null||v===t(this,w))return;const f=()=>{switch(t(this,w)){case l.CursorTool.SELECT:break;case l.CursorTool.HAND:this._handTool.deactivate();break;case l.CursorTool.ZOOM:}};switch(v){case l.CursorTool.SELECT:f();break;case l.CursorTool.HAND:f(),this._handTool.activate();break;case l.CursorTool.ZOOM:default:console.error(`switchTool: "${v}" is an unsupported value.`);return}ie(this,w,v),this.eventBus.dispatch("cursortoolchanged",{source:this,tool:v})}get _handTool(){return(0,a.shadow)(this,"_handTool",new L.GrabToPan({element:this.container}))}}w=new WeakMap,e=new WeakMap,r=new WeakSet,Bn=function(){this.eventBus._on("switchcursortool",n=>{this.switchTool(n.tool)});let v=a.AnnotationEditorType.NONE,f=l.PresentationModeState.NORMAL;const b=()=>{const n=t(this,w);this.switchTool(l.CursorTool.SELECT),t(this,e)??ie(this,e,n)},i=()=>{const n=t(this,e);n!==null&&v===a.AnnotationEditorType.NONE&&f===l.PresentationModeState.NORMAL&&(ie(this,e,null),this.switchTool(n))};this.eventBus._on("secondarytoolbarreset",n=>{t(this,e)!==null&&(v=a.AnnotationEditorType.NONE,f=l.PresentationModeState.NORMAL,i())}),this.eventBus._on("annotationeditormodechanged",({mode:n})=>{v=n,n===a.AnnotationEditorType.NONE?i():b()}),this.eventBus._on("presentationmodechanged",({state:n})=>{f=n,n===l.PresentationModeState.NORMAL?i():n===l.PresentationModeState.FULLSCREEN&&b()})},T.PDFCursorTools=S},(oe,T)=>{var l,Vn,S,Un,e,Hn;Object.defineProperty(T,"__esModule",{value:!0}),T.GrabToPan=void 0;const C="grab-to-pan-grab";class a{constructor({element:m}){R(this,l);R(this,S);R(this,e);this.element=m,this.document=m.ownerDocument,this.activate=this.activate.bind(this),this.deactivate=this.deactivate.bind(this),this.toggle=this.toggle.bind(this),this._onMouseDown=D(this,l,Vn).bind(this),this._onMouseMove=D(this,S,Un).bind(this),this._endPan=D(this,e,Hn).bind(this);const v=this.overlay=document.createElement("div");v.className="grab-to-pan-grabbing"}activate(){this.active||(this.active=!0,this.element.addEventListener("mousedown",this._onMouseDown,!0),this.element.classList.add(C))}deactivate(){this.active&&(this.active=!1,this.element.removeEventListener("mousedown",this._onMouseDown,!0),this._endPan(),this.element.classList.remove(C))}toggle(){this.active?this.deactivate():this.activate()}ignoreTarget(m){return m.matches("a[href], a[href] *, input, textarea, button, button *, select, option")}}l=new WeakSet,Vn=function(m){if(m.button!==0||this.ignoreTarget(m.target))return;if(m.originalTarget)try{m.originalTarget.tagName}catch{return}this.scrollLeftStart=this.element.scrollLeft,this.scrollTopStart=this.element.scrollTop,this.clientXStart=m.clientX,this.clientYStart=m.clientY,this.document.addEventListener("mousemove",this._onMouseMove,!0),this.document.addEventListener("mouseup",this._endPan,!0),this.element.addEventListener("scroll",this._endPan,!0),m.preventDefault(),m.stopPropagation();const v=document.activeElement;v&&!v.contains(m.target)&&v.blur()},S=new WeakSet,Un=function(m){if(this.element.removeEventListener("scroll",this._endPan,!0),!(m.buttons&1)){this._endPan();return}const v=m.clientX-this.clientXStart,f=m.clientY-this.clientYStart;this.element.scrollTo({top:this.scrollTopStart-f,left:this.scrollLeftStart-v,behavior:"instant"}),this.overlay.parentNode||document.body.append(this.overlay)},e=new WeakSet,Hn=function(){this.element.removeEventListener("scroll",this._endPan,!0),this.document.removeEventListener("mousemove",this._onMouseMove,!0),this.document.removeEventListener("mouseup",this._endPan,!0),this.overlay.remove()},T.GrabToPan=a},(oe,T,C)=>{Object.defineProperty(T,"__esModule",{value:!0}),T.ViewerApplication=T.PDFPrintServiceFactory=void 0;var a=C(4),l=C(5),L=C(9),S=C(10),w=C(11),e=C(12),r=C(13),d=C(14),m=C(15),v=C(6),f=C(17),b=C(18),i=C(19),n=C(21),u=C(22),c=C(23),o=C(24),h=C(25),g=C(26),x=C(27),j=C(28),V=C(30),E=C(40),O=C(41),y=C(42),B=C(43);const $=1e4,I={UNKNOWN:-1,PREVIOUS:0,INITIAL:1},ce={AUTOMATIC:0,LIGHT:1,DARK:2},we={instance:{supportsPrinting:!1,createPrintService(){throw new Error("Not implemented: createPrintService")}}};T.PDFPrintServiceFactory=we;class q{constructor(){$e(this,"initialBookmark",document.location.hash.substring(1));$e(this,"_initializedCapability",new l.PromiseCapability);$e(this,"appConfig",null);$e(this,"pdfDocument",null);$e(this,"pdfLoadingTask",null);$e(this,"printService",null);$e(this,"pdfViewer",null);$e(this,"pdfThumbnailViewer",null);$e(this,"pdfRenderingQueue",null);$e(this,"pdfPresentationMode",null);$e(this,"pdfDocumentProperties",null);$e(this,"pdfLinkService",null);$e(this,"pdfHistory",null);$e(this,"pdfSidebar",null);$e(this,"pdfOutlineViewer",null);$e(this,"pdfAttachmentViewer",null);$e(this,"pdfLayerViewer",null);$e(this,"pdfCursorTools",null);$e(this,"pdfScriptingManager",null);$e(this,"store",null);$e(this,"downloadManager",null);$e(this,"overlayManager",null);$e(this,"preferences",null);$e(this,"toolbar",null);$e(this,"secondaryToolbar",null);$e(this,"eventBus",null);$e(this,"l10n",null);$e(this,"annotationEditorParams",null);$e(this,"isInitialViewSet",!1);$e(this,"downloadComplete",!1);$e(this,"isViewerEmbedded",window.parent!==window);$e(this,"url","");$e(this,"baseUrl","");$e(this,"_downloadUrl","");$e(this,"externalServices",B.DefaultExternalServices);$e(this,"_boundEvents",Object.create(null));$e(this,"documentInfo",null);$e(this,"metadata",null);$e(this,"_contentDispositionFilename",null);$e(this,"_contentLength",null);$e(this,"_saveInProgress",!1);$e(this,"_wheelUnusedTicks",0);$e(this,"_wheelUnusedFactor",1);$e(this,"_touchUnusedTicks",0);$e(this,"_touchUnusedFactor",1);$e(this,"_PDFBug",null);$e(this,"_hasAnnotationEditors",!1);$e(this,"_title",document.title);$e(this,"_printAnnotationStoragePromise",null);$e(this,"_touchInfo",null);$e(this,"_isCtrlKeyDown",!1);$e(this,"_nimbusDataPromise",null)}async initialize(s){const{appOptions:p}=this;this.preferences=this.externalServices.createPreferences(),this.appConfig=s,await this._initializeOptions(),this._forceCssTheme(),await this._initializeL10n(),this.isViewerEmbedded&&p.get("externalLinkTarget")===w.LinkTarget.NONE&&p.set("externalLinkTarget",w.LinkTarget.TOP),await this._initializeViewerComponents(),this.bindEvents(),this.bindWindowEvents();const F=s.appContainer||document.documentElement;this.l10n.translate(F).then(()=>{this.eventBus.dispatch("localized",{source:this})}),this._initializedCapability.resolve()}async _initializeOptions(){const{appOptions:s}=this;if(s.get("disablePreferences")){s.get("pdfBugEnabled")&&await this._parseHashParams();return}s._hasUserOptions()&&console.warn('_initializeOptions: The Preferences may override manually set AppOptions; please use the "disablePreferences"-option in order to prevent that.');try{s.setAll(await this.preferences.getAll())}catch(p){console.error(`_initializeOptions: "${p.message}".`)}s.get("pdfBugEnabled")&&await this._parseHashParams()}async _parseHashParams(){const{appOptions:s}=this,p=document.location.hash.substring(1);if(!p)return;const{mainContainer:F,viewerContainer:U}=this.appConfig,X=(0,a.parseQueryString)(p);if(X.get("disableworker")==="true")try{await loadFakeWorker()}catch(Y){console.error(`_parseHashParams: "${Y.message}".`)}if(X.has("disablerange")&&s.set("disableRange",X.get("disablerange")==="true"),X.has("disablestream")&&s.set("disableStream",X.get("disablestream")==="true"),X.has("disableautofetch")&&s.set("disableAutoFetch",X.get("disableautofetch")==="true"),X.has("disablefontface")&&s.set("disableFontFace",X.get("disablefontface")==="true"),X.has("disablehistory")&&s.set("disableHistory",X.get("disablehistory")==="true"),X.has("verbosity")&&s.set("verbosity",X.get("verbosity")|0),X.has("textlayer"))switch(X.get("textlayer")){case"off":s.set("textLayerMode",a.TextLayerMode.DISABLE);break;case"visible":case"shadow":case"hover":U.classList.add(`textLayer-${X.get("textlayer")}`);try{await loadPDFBug(this),this._PDFBug.loadCSS()}catch(Y){console.error(`_parseHashParams: "${Y.message}".`)}break}if(X.has("pdfbug")){s.set("pdfBug",!0),s.set("fontExtraProperties",!0);const Y=X.get("pdfbug").split(",");try{await loadPDFBug(this),this._PDFBug.init(F,Y)}catch(ee){console.error(`_parseHashParams: "${ee.message}".`)}}X.has("locale")&&s.set("locale",X.get("locale"))}async _initializeL10n(){const{appOptions:s}=this;this.l10n=this.externalServices.createL10n({locale:s.get("locale")});const p=await this.l10n.getDirection();document.getElementsByTagName("html")[0].dir=p}_forceCssTheme(){var F;const{appOptions:s}=this,p=s.get("viewerCssTheme");if(!(p===ce.AUTOMATIC||!Object.values(ce).includes(p)))try{const U=document.styleSheets[0],X=(U==null?void 0:U.cssRules)||[];for(let Y=0,ee=X.length;Y<ee;Y++){const _e=X[Y];if(_e instanceof CSSMediaRule&&((F=_e.media)==null?void 0:F[0])==="(prefers-color-scheme: dark)"){if(p===ce.LIGHT){U.deleteRule(Y);return}const pe=/^@media \(prefers-color-scheme: dark\) {\n\s*([\w\s-.,:;/\\{}()]+)\n}$/.exec(_e.cssText);pe!=null&&pe[1]&&(U.deleteRule(Y),U.insertRule(pe[1],Y));return}}}catch(U){console.error(`_forceCssTheme: "${U==null?void 0:U.message}".`)}}async _initializeViewerComponents(){var Oe,ae,J,le,fe,Ce,Me,Ne,Ue;const{appOptions:s}=this,{appConfig:p,externalServices:F,l10n:U}=this,X=F.isInAutomation?new S.AutomationEventBus:new S.EventBus;this.eventBus=X,this.overlayManager=new r.OverlayManager;const Y=new h.PDFRenderingQueue;Y.onIdle=this._cleanup.bind(this),this.pdfRenderingQueue=Y;const ee=new w.PDFLinkService({eventBus:X,externalLinkTarget:s.get("externalLinkTarget"),externalLinkRel:s.get("externalLinkRel"),ignoreDestinationZoom:s.get("ignoreDestinationZoom")});this.pdfLinkService=ee;const _e=F.createDownloadManager();this.downloadManager=_e;const pe=new i.PDFFindController({linkService:ee,eventBus:X,updateMatchesCountOnProgress:!0});this.findController=pe;const ne=new g.PDFScriptingManager({eventBus:X,sandboxBundleSrc:s.get("sandboxBundleSrc"),externalServices:F,docProperties:this._scriptingDocProperties.bind(this)});this.pdfScriptingManager=ne;const de=p.mainContainer,ye=p.viewerContainer,me=s.get("annotationEditorMode"),Te=s.get("isOffscreenCanvasSupported")&&l.FeatureTest.isOffscreenCanvasSupported,Ie=s.get("forcePageColors")||window.matchMedia("(forced-colors: active)").matches?{background:s.get("pageColorsBackground"),foreground:s.get("pageColorsForeground")}:null,Se=new V.PDFViewer({container:de,viewer:ye,eventBus:X,renderingQueue:Y,linkService:ee,downloadManager:_e,findController:pe,scriptingManager:s.get("enableScripting")&&ne,l10n:U,textLayerMode:s.get("textLayerMode"),annotationMode:s.get("annotationMode"),annotationEditorMode:me,imageResourcesPath:s.get("imageResourcesPath"),enablePrintAutoRotate:s.get("enablePrintAutoRotate"),isOffscreenCanvasSupported:Te,maxCanvasPixels:s.get("maxCanvasPixels"),enablePermissions:s.get("enablePermissions"),pageColors:Ie});if(this.pdfViewer=Se,Y.setViewer(Se),ee.setViewer(Se),ne.setViewer(Se),(Oe=p.sidebar)!=null&&Oe.thumbnailView&&(this.pdfThumbnailViewer=new j.PDFThumbnailViewer({container:p.sidebar.thumbnailView,eventBus:X,renderingQueue:Y,linkService:ee,l10n:U,pageColors:Ie}),Y.setThumbnailViewer(this.pdfThumbnailViewer)),!this.isViewerEmbedded&&!s.get("disableHistory")&&(this.pdfHistory=new n.PDFHistory({linkService:ee,eventBus:X}),ee.setHistory(this.pdfHistory)),!this.supportsIntegratedFind&&p.findBar&&(this.findBar=new b.PDFFindBar(p.findBar,X,U)),p.annotationEditorParams)if(me!==l.AnnotationEditorType.DISABLE)s.get("enableStampEditor")&&Te&&((J=(ae=p.toolbar)==null?void 0:ae.editorStampButton)==null||J.classList.remove("hidden")),this.annotationEditorParams=new e.AnnotationEditorParams(p.annotationEditorParams,X);else for(const Ve of["editorModeButtons","editorModeSeparator"])(le=document.getElementById(Ve))==null||le.classList.add("hidden");p.documentProperties&&(this.pdfDocumentProperties=new f.PDFDocumentProperties(p.documentProperties,this.overlayManager,X,U,()=>this._docFilename)),(fe=p.secondaryToolbar)!=null&&fe.cursorHandToolButton&&(this.pdfCursorTools=new v.PDFCursorTools({container:de,eventBus:X,cursorToolOnLoad:s.get("cursorToolOnLoad")})),p.toolbar&&(this.toolbar=new O.Toolbar(p.toolbar,X,U)),p.secondaryToolbar&&(this.secondaryToolbar=new E.SecondaryToolbar(p.secondaryToolbar,X,F)),this.supportsFullscreen&&((Ce=p.secondaryToolbar)!=null&&Ce.presentationModeButton)&&(this.pdfPresentationMode=new o.PDFPresentationMode({container:de,pdfViewer:Se,eventBus:X})),p.passwordOverlay&&(this.passwordPrompt=new d.PasswordPrompt(p.passwordOverlay,this.overlayManager,U,this.isViewerEmbedded)),(Me=p.sidebar)!=null&&Me.outlineView&&(this.pdfOutlineViewer=new c.PDFOutlineViewer({container:p.sidebar.outlineView,eventBus:X,linkService:ee,downloadManager:_e})),(Ne=p.sidebar)!=null&&Ne.attachmentsView&&(this.pdfAttachmentViewer=new m.PDFAttachmentViewer({container:p.sidebar.attachmentsView,eventBus:X,downloadManager:_e})),(Ue=p.sidebar)!=null&&Ue.layersView&&(this.pdfLayerViewer=new u.PDFLayerViewer({container:p.sidebar.layersView,eventBus:X,l10n:U})),p.sidebar&&(this.pdfSidebar=new x.PDFSidebar({elements:p.sidebar,eventBus:X,l10n:U}),this.pdfSidebar.onToggled=this.forceRendering.bind(this),this.pdfSidebar.onUpdateThumbnails=()=>{var Ve;for(const Ge of Se.getCachedPageViews())Ge.renderingState===a.RenderingStates.FINISHED&&((Ve=this.pdfThumbnailViewer.getThumbnail(Ge.id-1))==null||Ve.setImage(Ge));this.pdfThumbnailViewer.scrollThumbnailIntoView(Se.currentPageNumber)})}async run(s,p){var ne,de,ye,me,Te,Ie;const{appOptions:F}=this;await this.initialize(s);const{appConfig:U,eventBus:X}=this;let Y;const ee=document.location.search.substring(1);Y=(0,a.parseQueryString)(ee).get("file")??F.get("defaultUrl"),p(Y);const pe=U.openFileInput;pe.value=null,pe.addEventListener("change",function(Se){const{files:Oe}=Se.target;!Oe||Oe.length===0||X.dispatch("fileinputchange",{source:this,fileInput:Se.target})}),U.mainContainer.addEventListener("dragover",function(Se){Se.preventDefault(),Se.dataTransfer.dropEffect=Se.dataTransfer.effectAllowed==="copy"?"copy":"move"}),U.mainContainer.addEventListener("drop",function(Se){Se.preventDefault();const{files:Oe}=Se.dataTransfer;!Oe||Oe.length===0||X.dispatch("fileinputchange",{source:this,fileInput:Se.dataTransfer})}),this.supportsDocumentFonts||(F.set("disableFontFace",!0),this.l10n.get("web_fonts_disabled").then(Se=>{console.warn(Se)})),this.supportsPrinting||((de=(ne=U.toolbar)==null?void 0:ne.print)==null||de.classList.add("hidden"),(ye=U.secondaryToolbar)==null||ye.printButton.classList.add("hidden")),this.supportsFullscreen||(me=U.secondaryToolbar)==null||me.presentationModeButton.classList.add("hidden"),this.supportsIntegratedFind&&((Ie=(Te=U.toolbar)==null?void 0:Te.viewFind)==null||Ie.classList.add("hidden")),U.mainContainer.addEventListener("transitionend",function(Se){Se.target===this&&X.dispatch("resize",{source:this})},!0),Y?this.open({url:Y}):this._hideViewBookmark()}get initialized(){return this._initializedCapability.settled}get initializedPromise(){return this._initializedCapability.promise}zoomIn(s,p){const{appOptions:F}=this;this.pdfViewer.isInPresentationMode||this.pdfViewer.increaseScale({drawingDelay:F.get("defaultZoomDelay"),steps:s,scaleFactor:p})}zoomOut(s,p){const{appOptions:F}=this;this.pdfViewer.isInPresentationMode||this.pdfViewer.decreaseScale({drawingDelay:F.get("defaultZoomDelay"),steps:s,scaleFactor:p})}zoomReset(){this.pdfViewer.isInPresentationMode||(this.pdfViewer.currentScaleValue=a.DEFAULT_SCALE_VALUE)}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return this.pdfViewer.currentPageNumber}set page(s){this.pdfViewer.currentPageNumber=s}get supportsPrinting(){return we.instance.supportsPrinting}get supportsFullscreen(){return(0,l.shadow)(this,"supportsFullscreen",document.fullscreenEnabled)}get supportsPinchToZoom(){return this.externalServices.supportsPinchToZoom}get supportsIntegratedFind(){return this.externalServices.supportsIntegratedFind}get supportsDocumentFonts(){return this.externalServices.supportsDocumentFonts}get loadingBar(){const s=document.getElementById("loadingBar"),p=s?new a.ProgressBar(s):null;return(0,l.shadow)(this,"loadingBar",p)}get supportedMouseWheelZoomModifierKeys(){return this.externalServices.supportedMouseWheelZoomModifierKeys}initPassiveLoading(s){throw new Error("Not implemented: initPassiveLoading")}setTitleUsingUrl(s="",p=null){this.url=s,this.baseUrl=s.split("#")[0],p&&(this._downloadUrl=p===s?this.baseUrl:p.split("#")[0]),(0,l.isDataScheme)(s)&&this._hideViewBookmark();let F=(0,l.getPdfFilenameFromUrl)(s,"");if(!F)try{F=decodeURIComponent((0,l.getFilenameFromUrl)(s))||s}catch{F=s}this.setTitle(F)}setTitle(s=this._title){if(this._title=s,this.isViewerEmbedded)return;const p=this._hasAnnotationEditors&&!this.pdfRenderingQueue.printing;document.title=`${p?"* ":""}${s}`}get _docFilename(){return this._contentDispositionFilename||(0,l.getPdfFilenameFromUrl)(this.url)}_hideViewBookmark(){var p;const{secondaryToolbar:s}=this.appConfig;s==null||s.viewBookmarkButton.classList.add("hidden"),s!=null&&s.presentationModeButton.classList.contains("hidden")&&((p=document.getElementById("viewBookmarkSeparator"))==null||p.classList.add("hidden"))}async close(){var p,F,U,X,Y,ee,_e,pe,ne,de,ye,me;if(this._unblockDocumentLoadEvent(),this._hideViewBookmark(),!this.pdfLoadingTask)return;if(((p=this.pdfDocument)==null?void 0:p.annotationStorage.size)>0&&this._annotationStorageModified)try{await this.save()}catch{}const s=[];s.push(this.pdfLoadingTask.destroy()),this.pdfLoadingTask=null,this.pdfDocument&&(this.pdfDocument=null,(F=this.pdfThumbnailViewer)==null||F.setDocument(null),this.pdfViewer.setDocument(null),this.pdfLinkService.setDocument(null),(U=this.pdfDocumentProperties)==null||U.setDocument(null)),this.pdfLinkService.externalLinkEnabled=!0,this.store=null,this.isInitialViewSet=!1,this.downloadComplete=!1,this.url="",this.baseUrl="",this._downloadUrl="",this.documentInfo=null,this.metadata=null,this._contentDispositionFilename=null,this._contentLength=null,this._saveInProgress=!1,this._hasAnnotationEditors=!1,s.push(this.pdfScriptingManager.destroyPromise),this.setTitle(),(X=this.pdfSidebar)==null||X.reset(),(Y=this.pdfOutlineViewer)==null||Y.reset(),(ee=this.pdfAttachmentViewer)==null||ee.reset(),(_e=this.pdfLayerViewer)==null||_e.reset(),(pe=this.pdfHistory)==null||pe.reset(),(ne=this.findBar)==null||ne.reset(),(de=this.toolbar)==null||de.reset(),(ye=this.secondaryToolbar)==null||ye.reset(),(me=this._PDFBug)==null||me.cleanup(),await Promise.all(s)}async open(s){const{appOptions:p}=this;let F=!1;typeof s=="string"?(s={url:s},F=!0):s!=null&&s.byteLength&&(s={data:s},F=!0),F&&console.error("The `PDFViewerApplication.open` signature was updated, please use an object instead."),this.pdfLoadingTask&&await this.close();const U=p.getAll(L.OptionKind.WORKER);Object.assign(l.GlobalWorkerOptions,U),s.url&&this.setTitleUsingUrl(s.originalUrl||s.url,s.url);const X=p.getAll(L.OptionKind.API),Y={canvasMaxAreaInBytes:this.externalServices.canvasMaxAreaInBytes,...X,...s},ee=(0,l.getDocument)(Y);return this.pdfLoadingTask=ee,ee.onPassword=(_e,pe)=>{this.isViewerEmbedded&&this._unblockDocumentLoadEvent(),this.pdfLinkService.externalLinkEnabled=!1,this.passwordPrompt.setUpdateCallback(_e,pe),this.passwordPrompt.open()},ee.onProgress=({loaded:_e,total:pe})=>{this.progress(_e/pe)},ee.promise.then(_e=>{this.load(_e)},_e=>{if(ee!==this.pdfLoadingTask)return;let pe="loading_error";return _e instanceof l.InvalidPDFException?pe="invalid_file_error":_e instanceof l.MissingPDFException?pe="missing_file_error":_e instanceof l.UnexpectedResponseException&&(pe="unexpected_response_error"),this.l10n.get(pe).then(ne=>{throw this._documentError(ne,{message:_e==null?void 0:_e.message}),_e})})}_ensureDownloadComplete(){if(!(this.pdfDocument&&this.downloadComplete))throw new Error("PDF document not downloaded.")}async download(s={}){const p=this._downloadUrl,F=this._docFilename;try{this._ensureDownloadComplete();const U=await this.pdfDocument.getData(),X=new Blob([U],{type:"application/pdf"});await this.downloadManager.download(X,p,F,s)}catch{await this.downloadManager.downloadUrl(p,F,s)}}async save(s={}){if(this._saveInProgress)return;this._saveInProgress=!0,await this.pdfScriptingManager.dispatchWillSave();const p=this._downloadUrl,F=this._docFilename;try{this._ensureDownloadComplete();const U=await this.pdfDocument.saveDocument(),X=new Blob([U],{type:"application/pdf"});await this.downloadManager.download(X,p,F,s)}catch(U){console.error(`Error when saving the document: ${U.message}`),await this.download(s)}finally{await this.pdfScriptingManager.dispatchDidSave(),this._saveInProgress=!1}this._hasAnnotationEditors&&this.externalServices.reportTelemetry({type:"editing",data:{type:"save"}})}downloadOrSave(s={}){var p;((p=this.pdfDocument)==null?void 0:p.annotationStorage.size)>0?this.save(s):this.download(s)}openInExternalApp(){this.downloadOrSave({openInExternalApp:!0})}_documentError(s,p=null){this._unblockDocumentLoadEvent(),this._otherError(s,p),this.eventBus.dispatch("documenterror",{source:this,message:s,reason:(p==null?void 0:p.message)??null})}_otherError(s,p=null){const F=[`PDF.js v${l.version||"?"} (build: ${l.build||"?"})`];p&&(F.push(`Message: ${p.message}`),p.stack?F.push(`Stack: ${p.stack}`):(p.filename&&F.push(`File: ${p.filename}`),p.lineNumber&&F.push(`Line: ${p.lineNumber}`))),console.error(`${s}

${F.join(`
`)}`)}progress(s){var U;const{appOptions:p}=this;if(!this.loadingBar||this.downloadComplete)return;const F=Math.round(s*100);F<=this.loadingBar.percent||(this.loadingBar.percent=F,(((U=this.pdfDocument)==null?void 0:U.loadingParams.disableAutoFetch)??p.get("disableAutoFetch"))&&this.loadingBar.setDisableAutoFetch())}load(s){var de,ye,me,Te;const{appOptions:p}=this;this.pdfDocument=s,s.getDownloadInfo().then(({length:Ie})=>{var Se;this._contentLength=Ie,this.downloadComplete=!0,(Se=this.loadingBar)==null||Se.hide(),ee.then(()=>{this.eventBus.dispatch("documentloaded",{source:this})})});const F=s.getPageLayout().catch(()=>{}),U=s.getPageMode().catch(()=>{}),X=s.getOpenAction().catch(()=>{});(de=this.toolbar)==null||de.setPagesCount(s.numPages,!1),(ye=this.secondaryToolbar)==null||ye.setPagesCount(s.numPages),this.pdfLinkService.setDocument(s),(me=this.pdfDocumentProperties)==null||me.setDocument(s);const Y=this.pdfViewer;Y.setDocument(s);const{firstPagePromise:ee,onePageRendered:_e,pagesPromise:pe}=Y;(Te=this.pdfThumbnailViewer)==null||Te.setDocument(s);const ne=(this.store=new y.ViewHistory(s.fingerprints[0])).getMultiple({page:null,zoom:a.DEFAULT_SCALE_VALUE,scrollLeft:"0",scrollTop:"0",rotation:null,sidebarView:a.SidebarView.UNKNOWN,scrollMode:a.ScrollMode.UNKNOWN,spreadMode:a.SpreadMode.UNKNOWN}).catch(()=>{});ee.then(Ie=>{var Se;(Se=this.loadingBar)==null||Se.setWidth(this.appConfig.viewerContainer),this._initializeAnnotationStorageCallbacks(s),Promise.all([a.animationStarted,ne,F,U,X]).then(async([Oe,ae,J,le,fe])=>{const Ce=p.get("viewOnLoad");this._initializePdfHistory({fingerprint:s.fingerprints[0],viewOnLoad:Ce,initialDest:fe==null?void 0:fe.dest});const Me=this.initialBookmark,Ne=p.get("defaultZoomValue");let Ue=Ne?`zoom=${Ne}`:null,Ve=null,Ge=p.get("sidebarViewOnLoad"),We=p.get("scrollModeOnLoad"),ze=p.get("spreadModeOnLoad");ae!=null&&ae.page&&Ce!==I.INITIAL&&(Ue=`page=${ae.page}&zoom=${Ne||ae.zoom},${ae.scrollLeft},${ae.scrollTop}`,Ve=parseInt(ae.rotation,10),Ge===a.SidebarView.UNKNOWN&&(Ge=ae.sidebarView|0),We===a.ScrollMode.UNKNOWN&&(We=ae.scrollMode|0),ze===a.SpreadMode.UNKNOWN&&(ze=ae.spreadMode|0)),le&&Ge===a.SidebarView.UNKNOWN&&(Ge=(0,a.apiPageModeToSidebarView)(le)),J&&We===a.ScrollMode.UNKNOWN&&ze===a.SpreadMode.UNKNOWN&&(ze=(0,a.apiPageLayoutToViewerModes)(J).spreadMode),this.setInitialView(Ue,{rotation:Ve,sidebarView:Ge,scrollMode:We,spreadMode:ze}),this.eventBus.dispatch("documentinit",{source:this}),this.isViewerEmbedded||Y.focus(),await Promise.race([pe,new Promise(Pe=>{setTimeout(Pe,$)})]),!(!Me&&!Ue)&&(Y.hasEqualPageSizes||(this.initialBookmark=Me,Y.currentScaleValue=Y.currentScaleValue,this.setInitialView(Ue)))}).catch(()=>{this.setInitialView()}).then(function(){Y.update()})}),pe.then(()=>{this._unblockDocumentLoadEvent(),this._initializeAutoPrint(s,X)},Ie=>{this.l10n.get("loading_error").then(Se=>{this._documentError(Se,{message:Ie==null?void 0:Ie.message})})}),_e.then(Ie=>{this.externalServices.reportTelemetry({type:"pageInfo",timestamp:Ie.timestamp}),this.pdfOutlineViewer&&s.getOutline().then(Se=>{s===this.pdfDocument&&this.pdfOutlineViewer.render({outline:Se,pdfDocument:s})}),this.pdfAttachmentViewer&&s.getAttachments().then(Se=>{s===this.pdfDocument&&this.pdfAttachmentViewer.render({attachments:Se})}),this.pdfLayerViewer&&Y.optionalContentConfigPromise.then(Se=>{s===this.pdfDocument&&this.pdfLayerViewer.render({optionalContentConfig:Se,pdfDocument:s})})}),this._initializePageLabels(s),this._initializeMetadata(s)}async _scriptingDocProperties(s){var p,F;return!this.documentInfo&&(await new Promise(U=>{this.eventBus._on("metadataloaded",U,{once:!0})}),s!==this.pdfDocument)||!this._contentLength&&(await new Promise(U=>{this.eventBus._on("documentloaded",U,{once:!0})}),s!==this.pdfDocument)?null:{...this.documentInfo,baseURL:this.baseUrl,filesize:this._contentLength,filename:this._docFilename,metadata:(p=this.metadata)==null?void 0:p.getRaw(),authors:(F=this.metadata)==null?void 0:F.get("dc:creator"),numPages:this.pagesCount,URL:this.url}}async _initializeAutoPrint(s,p){const[F,U]=await Promise.all([p,this.pdfViewer.enableScripting?null:s.getJavaScript()]);if(s!==this.pdfDocument)return;let X=!1;if((F==null?void 0:F.action)==="Print"&&(X=!0),U&&(U.some(Y=>Y?(console.warn("Warning: JavaScript support is not enabled"),!0):!1),!X)){for(const Y of U)if(Y&&a.AutoPrintRegExp.test(Y)){X=!0;break}}X&&this.triggerPrinting()}async _initializeMetadata(s){const{info:p,metadata:F,contentDispositionFilename:U,contentLength:X}=await s.getMetadata();if(s!==this.pdfDocument)return;this.documentInfo=p,this.metadata=F,this._contentDispositionFilename??(this._contentDispositionFilename=U),this._contentLength??(this._contentLength=X),console.log(`PDF ${s.fingerprints[0]} [${p.PDFFormatVersion} ${(p.Producer||"-").trim()} / ${(p.Creator||"-").trim()}] (PDF.js: ${l.version||"?"} [${l.build||"?"}])`);let Y=p.Title;const ee=F==null?void 0:F.get("dc:title");ee&&ee!=="Untitled"&&!/[\uFFF0-\uFFFF]/g.test(ee)&&(Y=ee),Y?this.setTitle(`${Y} - ${this._contentDispositionFilename||this._title}`):this._contentDispositionFilename&&this.setTitle(this._contentDispositionFilename),p.IsXFAPresent&&!p.IsAcroFormPresent&&!s.isPureXfa?s.loadingParams.enableXfa?console.warn("Warning: XFA Foreground documents are not supported"):console.warn("Warning: XFA support is not enabled"):(p.IsAcroFormPresent||p.IsXFAPresent)&&!this.pdfViewer.renderForms&&console.warn("Warning: Interactive form support is not enabled"),p.IsSignaturesPresent&&console.warn("Warning: Digital signatures validation is not supported"),this.eventBus.dispatch("metadataloaded",{source:this})}async _initializePageLabels(s){const{appOptions:p}=this,F=await s.getPageLabels();if(s!==this.pdfDocument||!F||p.get("disablePageLabels"))return;const U=F.length;let X=0,Y=0;for(let ne=0;ne<U;ne++){const de=F[ne];if(de===(ne+1).toString())X++;else if(de==="")Y++;else break}if(X>=U||Y>=U)return;const{pdfViewer:ee,pdfThumbnailViewer:_e,toolbar:pe}=this;ee.setPageLabels(F),_e==null||_e.setPageLabels(F),pe==null||pe.setPagesCount(U,!0),pe==null||pe.setPageNumber(ee.currentPageNumber,ee.currentPageLabel)}_initializePdfHistory({fingerprint:s,viewOnLoad:p,initialDest:F=null}){const{appOptions:U}=this;this.pdfHistory&&(this.pdfHistory.initialize({fingerprint:s,resetHistory:p===I.INITIAL,updateUrl:U.get("historyUpdateUrl")}),this.pdfHistory.initialBookmark&&(this.initialBookmark=this.pdfHistory.initialBookmark,this.initialRotation=this.pdfHistory.initialRotation),F&&!this.initialBookmark&&p===I.UNKNOWN&&(this.initialBookmark=JSON.stringify(F),this.pdfHistory.push({explicitDest:F,pageNumber:null})))}_initializeAnnotationStorageCallbacks(s){if(s!==this.pdfDocument)return;const{annotationStorage:p}=s;p.onSetModified=()=>{window.addEventListener("beforeunload",beforeUnload),this._annotationStorageModified=!0},p.onResetModified=()=>{window.removeEventListener("beforeunload",beforeUnload),delete this._annotationStorageModified},p.onAnnotationEditor=F=>{this._hasAnnotationEditors=!!F,this.setTitle(),F&&this.externalServices.reportTelemetry({type:"editing",data:{type:F}})}}setInitialView(s,{rotation:p,sidebarView:F,scrollMode:U,spreadMode:X}={}){var _e,pe,ne;const Y=de=>{(0,a.isValidRotation)(de)&&(this.pdfViewer.pagesRotation=de)},ee=(de,ye)=>{(0,a.isValidScrollMode)(de)&&(this.pdfViewer.scrollMode=de),(0,a.isValidSpreadMode)(ye)&&(this.pdfViewer.spreadMode=ye)};this.isInitialViewSet=!0,(_e=this.pdfSidebar)==null||_e.setInitialView(F),ee(U,X),this.initialBookmark?(Y(this.initialRotation),delete this.initialRotation,this.pdfLinkService.setHash(this.initialBookmark),this.initialBookmark=null):s&&(Y(p),this.pdfLinkService.setHash(s)),(pe=this.toolbar)==null||pe.setPageNumber(this.pdfViewer.currentPageNumber,this.pdfViewer.currentPageLabel),(ne=this.secondaryToolbar)==null||ne.setPageNumber(this.pdfViewer.currentPageNumber),this.pdfViewer.currentScaleValue||(this.pdfViewer.currentScaleValue=a.DEFAULT_SCALE_VALUE)}_cleanup(){var s;this.pdfDocument&&(this.pdfViewer.cleanup(),(s=this.pdfThumbnailViewer)==null||s.cleanup(),this.pdfDocument.cleanup())}forceRendering(){var s;this.pdfRenderingQueue.printing=!!this.printService,this.pdfRenderingQueue.isThumbnailViewEnabled=((s=this.pdfSidebar)==null?void 0:s.visibleView)===a.SidebarView.THUMBS,this.pdfRenderingQueue.renderHighestPriority()}beforePrint(){const{appOptions:s}=this;if(this._printAnnotationStoragePromise=this.pdfScriptingManager.dispatchWillPrint().catch(()=>{}).then(()=>{var ee;return(ee=this.pdfDocument)==null?void 0:ee.annotationStorage.print}),this.printService)return;if(!this.supportsPrinting){this.l10n.get("printing_not_supported").then(ee=>{this._otherError(ee)});return}if(!this.pdfViewer.pageViewsReady){this.l10n.get("printing_not_ready").then(ee=>{window.alert(ee)});return}const p=this.pdfViewer.getPagesOverview(),F=this.appConfig.printContainer,U=s.get("printResolution"),X=this.pdfViewer.optionalContentConfigPromise,Y=we.instance.createPrintService(this.pdfDocument,p,F,U,X,this._printAnnotationStoragePromise,this.l10n);this.printService=Y,this.forceRendering(),this.setTitle(),Y.layout(),this._hasAnnotationEditors&&this.externalServices.reportTelemetry({type:"editing",data:{type:"print"}})}afterPrint(){var s;this._printAnnotationStoragePromise&&(this._printAnnotationStoragePromise.then(()=>{this.pdfScriptingManager.dispatchDidPrint()}),this._printAnnotationStoragePromise=null),this.printService&&(this.printService.destroy(),this.printService=null,(s=this.pdfDocument)==null||s.annotationStorage.resetModified()),this.forceRendering(),this.setTitle()}rotatePages(s){this.pdfViewer.pagesRotation+=s}requestPresentationMode(){var s;(s=this.pdfPresentationMode)==null||s.request()}triggerPrinting(){this.supportsPrinting&&window.print()}bindEvents(){const{appOptions:s}=this,{eventBus:p,_boundEvents:F}=this;F.beforePrint=this.beforePrint.bind(this),F.afterPrint=this.afterPrint.bind(this),p._on("resize",webViewerResize),p._on("hashchange",webViewerHashchange),p._on("beforeprint",F.beforePrint),p._on("afterprint",F.afterPrint),p._on("pagerender",webViewerPageRender),p._on("pagerendered",webViewerPageRendered),p._on("updateviewarea",webViewerUpdateViewarea),p._on("pagechanging",webViewerPageChanging),p._on("scalechanging",webViewerScaleChanging),p._on("rotationchanging",webViewerRotationChanging),p._on("sidebarviewchanged",webViewerSidebarViewChanged),p._on("pagemode",webViewerPageMode),p._on("namedaction",webViewerNamedAction),p._on("presentationmodechanged",webViewerPresentationModeChanged),p._on("presentationmode",webViewerPresentationMode),p._on("switchannotationeditormode",webViewerSwitchAnnotationEditorMode),p._on("switchannotationeditorparams",webViewerSwitchAnnotationEditorParams),p._on("print",webViewerPrint),p._on("download",webViewerDownload),p._on("openinexternalapp",webViewerOpenInExternalApp),p._on("firstpage",webViewerFirstPage),p._on("lastpage",webViewerLastPage),p._on("nextpage",webViewerNextPage),p._on("previouspage",webViewerPreviousPage),p._on("zoomin",webViewerZoomIn),p._on("zoomout",webViewerZoomOut),p._on("zoomreset",webViewerZoomReset),p._on("pagenumberchanged",webViewerPageNumberChanged),p._on("scalechanged",webViewerScaleChanged),p._on("rotatecw",webViewerRotateCw),p._on("rotateccw",webViewerRotateCcw),p._on("optionalcontentconfig",webViewerOptionalContentConfig),p._on("switchscrollmode",webViewerSwitchScrollMode),p._on("scrollmodechanged",webViewerScrollModeChanged),p._on("switchspreadmode",webViewerSwitchSpreadMode),p._on("spreadmodechanged",webViewerSpreadModeChanged),p._on("documentproperties",webViewerDocumentProperties),p._on("findfromurlhash",webViewerFindFromUrlHash),p._on("updatefindmatchescount",webViewerUpdateFindMatchesCount),p._on("updatefindcontrolstate",webViewerUpdateFindControlState),s.get("pdfBug")&&(F.reportPageStatsPDFBug=reportPageStatsPDFBug,p._on("pagerendered",F.reportPageStatsPDFBug),p._on("pagechanging",F.reportPageStatsPDFBug)),p._on("fileinputchange",webViewerFileInputChange),p._on("openfile",webViewerOpenFile)}bindWindowEvents(){const{eventBus:s,_boundEvents:p}=this;function F(U=null){U&&webViewerResolutionChange(U);const X=window.matchMedia(`(resolution: ${window.devicePixelRatio||1}dppx)`);X.addEventListener("change",F,{once:!0}),p.removeWindowResolutionChange||(p.removeWindowResolutionChange=function(){X.removeEventListener("change",F),p.removeWindowResolutionChange=null})}F(),p.windowResize=()=>{s.dispatch("resize",{source:window})},p.windowHashChange=()=>{s.dispatch("hashchange",{source:window,hash:document.location.hash.substring(1)})},p.windowBeforePrint=()=>{s.dispatch("beforeprint",{source:window})},p.windowAfterPrint=()=>{s.dispatch("afterprint",{source:window})},p.windowUpdateFromSandbox=U=>{s.dispatch("updatefromsandbox",{source:window,detail:U.detail})},window.addEventListener("visibilitychange",webViewerVisibilityChange),window.addEventListener("wheel",webViewerWheel,{passive:!1}),window.addEventListener("touchstart",webViewerTouchStart,{passive:!1}),window.addEventListener("touchmove",webViewerTouchMove,{passive:!1}),window.addEventListener("touchend",webViewerTouchEnd,{passive:!1}),window.addEventListener("click",webViewerClick),window.addEventListener("keydown",webViewerKeyDown),window.addEventListener("keyup",webViewerKeyUp),window.addEventListener("resize",p.windowResize),window.addEventListener("hashchange",p.windowHashChange),window.addEventListener("beforeprint",p.windowBeforePrint),window.addEventListener("afterprint",p.windowAfterPrint),window.addEventListener("updatefromsandbox",p.windowUpdateFromSandbox)}unbindEvents(){const{eventBus:s,_boundEvents:p}=this;s._off("resize",webViewerResize),s._off("hashchange",webViewerHashchange),s._off("beforeprint",p.beforePrint),s._off("afterprint",p.afterPrint),s._off("pagerender",webViewerPageRender),s._off("pagerendered",webViewerPageRendered),s._off("updateviewarea",webViewerUpdateViewarea),s._off("pagechanging",webViewerPageChanging),s._off("scalechanging",webViewerScaleChanging),s._off("rotationchanging",webViewerRotationChanging),s._off("sidebarviewchanged",webViewerSidebarViewChanged),s._off("pagemode",webViewerPageMode),s._off("namedaction",webViewerNamedAction),s._off("presentationmodechanged",webViewerPresentationModeChanged),s._off("presentationmode",webViewerPresentationMode),s._off("print",webViewerPrint),s._off("download",webViewerDownload),s._off("openinexternalapp",webViewerOpenInExternalApp),s._off("firstpage",webViewerFirstPage),s._off("lastpage",webViewerLastPage),s._off("nextpage",webViewerNextPage),s._off("previouspage",webViewerPreviousPage),s._off("zoomin",webViewerZoomIn),s._off("zoomout",webViewerZoomOut),s._off("zoomreset",webViewerZoomReset),s._off("pagenumberchanged",webViewerPageNumberChanged),s._off("scalechanged",webViewerScaleChanged),s._off("rotatecw",webViewerRotateCw),s._off("rotateccw",webViewerRotateCcw),s._off("optionalcontentconfig",webViewerOptionalContentConfig),s._off("switchscrollmode",webViewerSwitchScrollMode),s._off("scrollmodechanged",webViewerScrollModeChanged),s._off("switchspreadmode",webViewerSwitchSpreadMode),s._off("spreadmodechanged",webViewerSpreadModeChanged),s._off("documentproperties",webViewerDocumentProperties),s._off("findfromurlhash",webViewerFindFromUrlHash),s._off("updatefindmatchescount",webViewerUpdateFindMatchesCount),s._off("updatefindcontrolstate",webViewerUpdateFindControlState),p.reportPageStatsPDFBug&&(s._off("pagerendered",p.reportPageStatsPDFBug),s._off("pagechanging",p.reportPageStatsPDFBug),p.reportPageStatsPDFBug=null),s._off("fileinputchange",webViewerFileInputChange),s._off("openfile",webViewerOpenFile),p.beforePrint=null,p.afterPrint=null}unbindWindowEvents(){var p;const{_boundEvents:s}=this;window.removeEventListener("visibilitychange",webViewerVisibilityChange),window.removeEventListener("wheel",webViewerWheel,{passive:!1}),window.removeEventListener("touchstart",webViewerTouchStart,{passive:!1}),window.removeEventListener("touchmove",webViewerTouchMove,{passive:!1}),window.removeEventListener("touchend",webViewerTouchEnd,{passive:!1}),window.removeEventListener("click",webViewerClick),window.removeEventListener("keydown",webViewerKeyDown),window.removeEventListener("keyup",webViewerKeyUp),window.removeEventListener("resize",s.windowResize),window.removeEventListener("hashchange",s.windowHashChange),window.removeEventListener("beforeprint",s.windowBeforePrint),window.removeEventListener("afterprint",s.windowAfterPrint),window.removeEventListener("updatefromsandbox",s.windowUpdateFromSandbox),(p=s.removeWindowResolutionChange)==null||p.call(s),s.windowResize=null,s.windowHashChange=null,s.windowBeforePrint=null,s.windowAfterPrint=null,s.windowUpdateFromSandbox=null}_accumulateTicks(s,p){(this[p]>0&&s<0||this[p]<0&&s>0)&&(this[p]=0),this[p]+=s;const F=Math.trunc(this[p]);return this[p]-=F,F}_accumulateFactor(s,p,F){if(p===1)return 1;(this[F]>1&&p<1||this[F]<1&&p>1)&&(this[F]=1);const U=Math.floor(s*p*this[F]*100)/(100*s);return this[F]=p/U,U}_centerAtPos(s,p,F){const{pdfViewer:U}=this,X=U.currentScale/s-1;if(X!==0){const[Y,ee]=U.containerTopLeft;U.container.scrollLeft+=(p-ee)*X,U.container.scrollTop+=(F-Y)*X}}_unblockDocumentLoadEvent(){var s;(s=document.blockUnblockOnload)==null||s.call(document,!1),this._unblockDocumentLoadEvent=()=>{}}get scriptingReady(){return this.pdfScriptingManager.ready}}T.ViewerApplication=q},(oe,T)=>{Object.defineProperty(T,"__esModule",{value:!0}),T.compatibilityParams=T.OptionKind=T.AppOptions=void 0;const C=Object.create(null);T.compatibilityParams=C;{const w=navigator.userAgent||"",e=navigator.platform||"",r=navigator.maxTouchPoints||1,d=/Android/.test(w),m=/\b(iPad|iPhone|iPod)(?=;)/.test(w)||e==="MacIntel"&&r>1;(function(){(m||d)&&(C.maxCanvasPixels=5242880)})()}const a={VIEWER:2,API:4,WORKER:8,PREFERENCE:128};T.OptionKind=a;const l={annotationEditorMode:{value:0,kind:a.VIEWER+a.PREFERENCE},annotationMode:{value:2,kind:a.VIEWER+a.PREFERENCE},cursorToolOnLoad:{value:0,kind:a.VIEWER+a.PREFERENCE},defaultZoomDelay:{value:400,kind:a.VIEWER+a.PREFERENCE},defaultZoomValue:{value:"",kind:a.VIEWER+a.PREFERENCE},disableHistory:{value:!1,kind:a.VIEWER},disablePageLabels:{value:!1,kind:a.VIEWER+a.PREFERENCE},enablePermissions:{value:!1,kind:a.VIEWER+a.PREFERENCE},enablePrintAutoRotate:{value:!0,kind:a.VIEWER+a.PREFERENCE},enableScripting:{value:!0,kind:a.VIEWER+a.PREFERENCE},enableStampEditor:{value:!0,kind:a.VIEWER+a.PREFERENCE},externalLinkRel:{value:"noopener noreferrer nofollow",kind:a.VIEWER},externalLinkTarget:{value:0,kind:a.VIEWER+a.PREFERENCE},historyUpdateUrl:{value:!1,kind:a.VIEWER+a.PREFERENCE},ignoreDestinationZoom:{value:!1,kind:a.VIEWER+a.PREFERENCE},imageResourcesPath:{value:"./images/",kind:a.VIEWER},maxCanvasPixels:{value:16777216,kind:a.VIEWER},forcePageColors:{value:!1,kind:a.VIEWER+a.PREFERENCE},pageColorsBackground:{value:"Canvas",kind:a.VIEWER+a.PREFERENCE},pageColorsForeground:{value:"CanvasText",kind:a.VIEWER+a.PREFERENCE},pdfBugEnabled:{value:!1,kind:a.VIEWER+a.PREFERENCE},printResolution:{value:150,kind:a.VIEWER},sidebarViewOnLoad:{value:-1,kind:a.VIEWER+a.PREFERENCE},scrollModeOnLoad:{value:-1,kind:a.VIEWER+a.PREFERENCE},spreadModeOnLoad:{value:-1,kind:a.VIEWER+a.PREFERENCE},textLayerMode:{value:1,kind:a.VIEWER+a.PREFERENCE},viewerCssTheme:{value:0,kind:a.VIEWER+a.PREFERENCE},viewOnLoad:{value:0,kind:a.VIEWER+a.PREFERENCE},cMapPacked:{value:!0,kind:a.API},cMapUrl:{value:"../web/cmaps/",kind:a.API},disableAutoFetch:{value:!1,kind:a.API+a.PREFERENCE},disableFontFace:{value:!1,kind:a.API+a.PREFERENCE},disableRange:{value:!1,kind:a.API+a.PREFERENCE},disableStream:{value:!1,kind:a.API+a.PREFERENCE},docBaseUrl:{value:"",kind:a.API},enableXfa:{value:!0,kind:a.API+a.PREFERENCE},fontExtraProperties:{value:!1,kind:a.API},isEvalSupported:{value:!0,kind:a.API},isOffscreenCanvasSupported:{value:!0,kind:a.API},maxImageSize:{value:-1,kind:a.API},pdfBug:{value:!1,kind:a.API},standardFontDataUrl:{value:"../web/standard_fonts/",kind:a.API},verbosity:{value:1,kind:a.API},workerPort:{value:null,kind:a.WORKER},workerSrc:{value:"../build/pdf.worker.js",kind:a.WORKER}};l.defaultUrl={value:"compressed.tracemonkey-pldi-09.pdf",kind:a.VIEWER},l.disablePreferences={value:!1,kind:a.VIEWER},l.locale={value:navigator.language||"en-US",kind:a.VIEWER},l.sandboxBundleSrc={value:"../build/pdf.sandbox.js",kind:a.VIEWER};const L=Object.create(null);class S{constructor(){throw new Error("Cannot initialize AppOptions.")}static get(e){const r=L[e];if(r!==void 0)return r;const d=l[e];if(d!==void 0)return C[e]??d.value}static getAll(e=null){const r=Object.create(null);for(const d in l){const m=l[d];if(e){if(!(e&m.kind))continue;if(e===a.PREFERENCE){const f=m.value,b=typeof f;if(b==="boolean"||b==="string"||b==="number"&&Number.isInteger(f)){r[d]=f;continue}throw new Error(`Invalid type for preference: ${d}`)}}const v=L[d];r[d]=v!==void 0?v:C[d]??m.value}return r}static set(e,r){L[e]=r}static setAll(e){for(const r in e)L[r]=e[r]}static remove(e){delete L[e]}}T.AppOptions=S,S._hasUserOptions=function(){return Object.keys(L).length>0}},(oe,T)=>{var S;Object.defineProperty(T,"__esModule",{value:!0}),T.WaitOnType=T.EventBus=T.AutomationEventBus=void 0,T.waitOnEventOrTimeout=a;const C={EVENT:"event",TIMEOUT:"timeout"};T.WaitOnType=C;function a({target:w,name:e,delay:r=0}){return new Promise(function(d,m){if(typeof w!="object"||!(e&&typeof e=="string")||!(Number.isInteger(r)&&r>=0))throw new Error("waitOnEventOrTimeout - invalid parameters.");function v(n){w instanceof l?w._off(e,f):w.removeEventListener(e,f),i&&clearTimeout(i),d(n)}const f=v.bind(null,C.EVENT);w instanceof l?w._on(e,f):w.addEventListener(e,f);const b=v.bind(null,C.TIMEOUT),i=setTimeout(b,r)})}class l{constructor(){R(this,S,Object.create(null))}on(e,r,d=null){this._on(e,r,{external:!0,once:d==null?void 0:d.once})}off(e,r,d=null){this._off(e,r,{external:!0,once:d==null?void 0:d.once})}dispatch(e,r){const d=t(this,S)[e];if(!d||d.length===0)return;let m;for(const{listener:v,external:f,once:b}of d.slice(0)){if(b&&this._off(e,v),f){(m||(m=[])).push(v);continue}v(r)}if(m){for(const v of m)v(r);m=null}}_on(e,r,d=null){var v;((v=t(this,S))[e]||(v[e]=[])).push({listener:r,external:(d==null?void 0:d.external)===!0,once:(d==null?void 0:d.once)===!0})}_off(e,r,d=null){const m=t(this,S)[e];if(m){for(let v=0,f=m.length;v<f;v++)if(m[v].listener===r){m.splice(v,1);return}}}}S=new WeakMap,T.EventBus=l;class L extends l{dispatch(e,r){throw new Error("Not implemented: AutomationEventBus.dispatch")}}T.AutomationEventBus=L},(oe,T,C)=>{var r,d,yi,v,zn;Object.defineProperty(T,"__esModule",{value:!0}),T.SimpleLinkService=T.PDFLinkService=T.LinkTarget=void 0;var a=C(4);const l="noopener noreferrer nofollow",L={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4};T.LinkTarget=L;function S(i,{url:n,target:u,rel:c,enabled:o=!0}={}){if(!n||typeof n!="string")throw new Error('A valid "url" parameter must provided.');const h=(0,a.removeNullCharacters)(n);o?i.href=i.title=h:(i.href="",i.title=`Disabled: ${h}`,i.onclick=()=>!1);let g="";switch(u){case L.NONE:break;case L.SELF:g="_self";break;case L.BLANK:g="_blank";break;case L.PARENT:g="_parent";break;case L.TOP:g="_top";break}i.target=g,i.rel=typeof c=="string"?c:l}const b=class{constructor({eventBus:n,externalLinkTarget:u=null,externalLinkRel:c=null,ignoreDestinationZoom:o=!1}={}){R(this,d);R(this,r,new Map);this.eventBus=n,this.externalLinkTarget=u,this.externalLinkRel=c,this.externalLinkEnabled=!0,this._ignoreDestinationZoom=o,this.baseUrl=null,this.pdfDocument=null,this.pdfViewer=null,this.pdfHistory=null}setDocument(n,u=null){this.baseUrl=u,this.pdfDocument=n,t(this,r).clear()}setViewer(n){this.pdfViewer=n}setHistory(n){this.pdfHistory=n}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return this.pdfViewer.currentPageNumber}set page(n){this.pdfViewer.currentPageNumber=n}get rotation(){return this.pdfViewer.pagesRotation}set rotation(n){this.pdfViewer.pagesRotation=n}get isInPresentationMode(){return this.pdfViewer.isInPresentationMode}async goToDestination(n){if(!this.pdfDocument)return;let u,c;if(typeof n=="string"?(u=n,c=await this.pdfDocument.getDestination(n)):(u=null,c=await n),!Array.isArray(c)){console.error(`PDFLinkService.goToDestination: "${c}" is not a valid destination array, for dest="${n}".`);return}D(this,d,yi).call(this,n,u,c)}goToPage(n){if(!this.pdfDocument)return;const u=typeof n=="string"&&this.pdfViewer.pageLabelToPageNumber(n)||n|0;if(!(Number.isInteger(u)&&u>0&&u<=this.pagesCount)){console.error(`PDFLinkService.goToPage: "${n}" is not a valid page.`);return}this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.pushPage(u)),this.pdfViewer.scrollPageIntoView({pageNumber:u})}addLinkAttributes(n,u,c=!1){S(n,{url:u,target:c?L.BLANK:this.externalLinkTarget,rel:this.externalLinkRel,enabled:this.externalLinkEnabled})}getDestinationHash(n){if(typeof n=="string"){if(n.length>0)return this.getAnchorUrl("#"+escape(n))}else if(Array.isArray(n)){const u=JSON.stringify(n);if(u.length>0)return this.getAnchorUrl("#"+escape(u))}return this.getAnchorUrl("")}getAnchorUrl(n){return this.baseUrl?this.baseUrl+n:n}setHash(n){var o;if(!this.pdfDocument)return;let u,c;if(n.includes("=")){const h=(0,a.parseQueryString)(n);if(h.has("search")){const g=h.get("search").replaceAll('"',""),x=h.get("phrase")==="true";this.eventBus.dispatch("findfromurlhash",{source:this,query:x?g:g.match(/\S+/g)})}if(h.has("page")&&(u=h.get("page")|0||1),h.has("zoom")){const g=h.get("zoom").split(","),x=g[0],j=parseFloat(x);x.includes("Fit")?x==="Fit"||x==="FitB"?c=[null,{name:x}]:x==="FitH"||x==="FitBH"||x==="FitV"||x==="FitBV"?c=[null,{name:x},g.length>1?g[1]|0:null]:x==="FitR"?g.length!==5?console.error('PDFLinkService.setHash: Not enough parameters for "FitR".'):c=[null,{name:x},g[1]|0,g[2]|0,g[3]|0,g[4]|0]:console.error(`PDFLinkService.setHash: "${x}" is not a valid zoom value.`):c=[null,{name:"XYZ"},g.length>1?g[1]|0:null,g.length>2?g[2]|0:null,j?j/100:x]}c?this.pdfViewer.scrollPageIntoView({pageNumber:u||this.page,destArray:c,allowNegativeOffset:!0}):u&&(this.page=u),h.has("pagemode")&&this.eventBus.dispatch("pagemode",{source:this,mode:h.get("pagemode")}),h.has("nameddest")&&this.goToDestination(h.get("nameddest"))}else{c=unescape(n);try{c=JSON.parse(c),Array.isArray(c)||(c=c.toString())}catch{}if(typeof c=="string"||D(o=b,v,zn).call(o,c)){this.goToDestination(c);return}console.error(`PDFLinkService.setHash: "${unescape(n)}" is not a valid destination.`)}}executeNamedAction(n){var u,c;switch(n){case"GoBack":(u=this.pdfHistory)==null||u.back();break;case"GoForward":(c=this.pdfHistory)==null||c.forward();break;case"NextPage":this.pdfViewer.nextPage();break;case"PrevPage":this.pdfViewer.previousPage();break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1;break}this.eventBus.dispatch("namedaction",{source:this,action:n})}async executeSetOCGState(n){const u=this.pdfDocument,c=await this.pdfViewer.optionalContentConfigPromise;if(u!==this.pdfDocument)return;let o;for(const h of n.state){switch(h){case"ON":case"OFF":case"Toggle":o=h;continue}switch(o){case"ON":c.setVisibility(h,!0);break;case"OFF":c.setVisibility(h,!1);break;case"Toggle":const g=c.getGroup(h);g&&c.setVisibility(h,!g.visible);break}}this.pdfViewer.optionalContentConfigPromise=Promise.resolve(c)}cachePageRef(n,u){if(!u)return;const c=u.gen===0?`${u.num}R`:`${u.num}R${u.gen}`;t(this,r).set(c,n)}_cachedPageNumber(n){if(!n)return null;const u=n.gen===0?`${n.num}R`:`${n.num}R${n.gen}`;return t(this,r).get(u)||null}};let w=b;r=new WeakMap,d=new WeakSet,yi=function(n,u=null,c){const o=c[0];let h;if(typeof o=="object"&&o!==null){if(h=this._cachedPageNumber(o),!h){this.pdfDocument.getPageIndex(o).then(g=>{this.cachePageRef(g+1,o),D(this,d,yi).call(this,n,u,c)}).catch(()=>{console.error(`PDFLinkService.#goToDestinationHelper: "${o}" is not a valid page reference, for dest="${n}".`)});return}}else if(Number.isInteger(o))h=o+1;else{console.error(`PDFLinkService.#goToDestinationHelper: "${o}" is not a valid destination reference, for dest="${n}".`);return}if(!h||h<1||h>this.pagesCount){console.error(`PDFLinkService.#goToDestinationHelper: "${h}" is not a valid page number, for dest="${n}".`);return}this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.push({namedDest:u,explicitDest:c,pageNumber:h})),this.pdfViewer.scrollPageIntoView({pageNumber:h,destArray:c,ignoreDestinationZoom:this._ignoreDestinationZoom})},v=new WeakSet,zn=function(n){if(!Array.isArray(n))return!1;const u=n.length;if(u<2)return!1;const c=n[0];if(!(typeof c=="object"&&Number.isInteger(c.num)&&Number.isInteger(c.gen))&&!(Number.isInteger(c)&&c>=0))return!1;const o=n[1];if(!(typeof o=="object"&&typeof o.name=="string"))return!1;let h=!0;switch(o.name){case"XYZ":if(u!==5)return!1;break;case"Fit":case"FitB":return u===2;case"FitH":case"FitBH":case"FitV":case"FitBV":if(u!==3)return!1;break;case"FitR":if(u!==6)return!1;h=!1;break;default:return!1}for(let g=2;g<u;g++){const x=n[g];if(!(typeof x=="number"||h&&x===null))return!1}return!0},R(w,v),T.PDFLinkService=w;class e{constructor(){this.externalLinkEnabled=!0}get pagesCount(){return 0}get page(){return 0}set page(n){}get rotation(){return 0}set rotation(n){}get isInPresentationMode(){return!1}async goToDestination(n){}goToPage(n){}addLinkAttributes(n,u,c=!1){S(n,{url:u,enabled:this.externalLinkEnabled})}getDestinationHash(n){return"#"}getAnchorUrl(n){return"#"}setHash(n){}executeNamedAction(n){}executeSetOCGState(n){}cachePageRef(n,u){}}T.SimpleLinkService=e},(oe,T,C)=>{var L,jn;Object.defineProperty(T,"__esModule",{value:!0}),T.AnnotationEditorParams=void 0;var a=C(5);class l{constructor(e,r){R(this,L);this.eventBus=r,D(this,L,jn).call(this,e)}}L=new WeakSet,jn=function({editorFreeTextFontSize:e,editorFreeTextColor:r,editorInkColor:d,editorInkThickness:m,editorInkOpacity:v}){const f=(b,i)=>{this.eventBus.dispatch("switchannotationeditorparams",{source:this,type:a.AnnotationEditorParamsType[b],value:i})};e.addEventListener("input",function(){f("FREETEXT_SIZE",this.valueAsNumber)}),r.addEventListener("input",function(){f("FREETEXT_COLOR",this.value)}),d.addEventListener("input",function(){f("INK_COLOR",this.value)}),m.addEventListener("input",function(){f("INK_THICKNESS",this.valueAsNumber)}),v.addEventListener("input",function(){f("INK_OPACITY",this.valueAsNumber)}),this.eventBus._on("annotationeditorparamschanged",b=>{for(const[i,n]of b.details)switch(i){case a.AnnotationEditorParamsType.FREETEXT_SIZE:e.value=n;break;case a.AnnotationEditorParamsType.FREETEXT_COLOR:r.value=n;break;case a.AnnotationEditorParamsType.INK_COLOR:d.value=n;break;case a.AnnotationEditorParamsType.INK_THICKNESS:m.value=n;break;case a.AnnotationEditorParamsType.INK_OPACITY:v.value=n;break}})},T.AnnotationEditorParams=l},(oe,T)=>{var a,l;Object.defineProperty(T,"__esModule",{value:!0}),T.OverlayManager=void 0;class C{constructor(){R(this,a,new WeakMap);R(this,l,null)}get active(){return t(this,l)}async register(S,w=!1){if(typeof S!="object")throw new Error("Not enough parameters.");if(t(this,a).has(S))throw new Error("The overlay is already registered.");t(this,a).set(S,{canForceClose:w}),S.addEventListener("cancel",e=>{ie(this,l,null)})}async open(S){if(t(this,a).has(S)){if(t(this,l)){if(t(this,l)===S)throw new Error("The overlay is already active.");if(t(this,a).get(S).canForceClose)await this.close();else throw new Error("Another overlay is currently active.")}}else throw new Error("The overlay does not exist.");ie(this,l,S),S.showModal()}async close(S=t(this,l)){if(t(this,a).has(S))if(t(this,l)){if(t(this,l)!==S)throw new Error("Another overlay is currently active.")}else throw new Error("The overlay is currently not active.");else throw new Error("The overlay does not exist.");S.close(),ie(this,l,null)}}a=new WeakMap,l=new WeakMap,T.OverlayManager=C},(oe,T,C)=>{var L,S,w,e,Si,d,Wn,v,Ei;Object.defineProperty(T,"__esModule",{value:!0}),T.PasswordPrompt=void 0;var a=C(5);class l{constructor(i,n,u,c=!1){R(this,e);R(this,d);R(this,v);R(this,L,null);R(this,S,null);R(this,w,null);this.dialog=i.dialog,this.label=i.label,this.input=i.input,this.submitButton=i.submitButton,this.cancelButton=i.cancelButton,this.overlayManager=n,this.l10n=u,this._isViewerEmbedded=c,this.submitButton.addEventListener("click",D(this,e,Si).bind(this)),this.cancelButton.addEventListener("click",this.close.bind(this)),this.input.addEventListener("keydown",o=>{o.keyCode===13&&D(this,e,Si).call(this)}),this.overlayManager.register(this.dialog,!0),this.dialog.addEventListener("close",D(this,d,Wn).bind(this))}async open(){t(this,L)&&await t(this,L).promise,ie(this,L,new a.PromiseCapability);try{await this.overlayManager.open(this.dialog)}catch(n){throw t(this,L).resolve(),n}const i=t(this,w)===a.PasswordResponses.INCORRECT_PASSWORD;(!this._isViewerEmbedded||i)&&this.input.focus(),this.label.textContent=await this.l10n.get(`password_${i?"invalid":"label"}`)}async close(){this.overlayManager.active===this.dialog&&this.overlayManager.close(this.dialog)}async setUpdateCallback(i,n){t(this,L)&&await t(this,L).promise,ie(this,S,i),ie(this,w,n)}}L=new WeakMap,S=new WeakMap,w=new WeakMap,e=new WeakSet,Si=function(){const i=this.input.value;(i==null?void 0:i.length)>0&&D(this,v,Ei).call(this,i)},d=new WeakSet,Wn=function(){D(this,v,Ei).call(this,new Error("PasswordPrompt cancelled.")),t(this,L).resolve()},v=new WeakSet,Ei=function(i){t(this,S)&&(this.close(),this.input.value="",t(this,S).call(this,i),ie(this,S,null))},T.PasswordPrompt=l},(oe,T,C)=>{var w,Gn;Object.defineProperty(T,"__esModule",{value:!0}),T.PDFAttachmentViewer=void 0;var a=C(5),l=C(16),L=C(10);class S extends l.BaseTreeViewer{constructor(m){super(m);R(this,w);this.downloadManager=m.downloadManager,this.eventBus._on("fileattachmentannotation",D(this,w,Gn).bind(this))}reset(m=!1){super.reset(),this._attachments=null,m||(this._renderedCapability=new a.PromiseCapability),this._pendingDispatchEvent=!1}async _dispatchEvent(m){this._renderedCapability.resolve(),!(m===0&&!this._pendingDispatchEvent&&(this._pendingDispatchEvent=!0,await(0,L.waitOnEventOrTimeout)({target:this.eventBus,name:"annotationlayerrendered",delay:1e3}),!this._pendingDispatchEvent))&&(this._pendingDispatchEvent=!1,this.eventBus.dispatch("attachmentsloaded",{source:this,attachmentsCount:m}))}_bindLink(m,{content:v,filename:f}){m.onclick=()=>(this.downloadManager.openOrDownloadData(m,v,f),!1)}render({attachments:m,keepRenderedCapability:v=!1}){if(this._attachments&&this.reset(v),this._attachments=m||null,!m){this._dispatchEvent(0);return}const f=document.createDocumentFragment();let b=0;for(const i in m){const n=m[i],u=n.content,c=(0,a.getFilenameFromUrl)(n.filename,!0),o=document.createElement("div");o.className="treeItem";const h=document.createElement("a");this._bindLink(h,{content:u,filename:c}),h.textContent=this._normalizeTextContent(c),o.append(h),f.append(o),b++}this._finishRendering(f,b)}}w=new WeakSet,Gn=function({filename:m,content:v}){const f=this._renderedCapability.promise;f.then(()=>{if(f!==this._renderedCapability.promise)return;const b=this._attachments||Object.create(null);for(const i in b)if(m===i)return;b[m]={filename:m,content:v},this.render({attachments:b,keepRenderedCapability:!0})})},T.PDFAttachmentViewer=S},(oe,T,C)=>{Object.defineProperty(T,"__esModule",{value:!0}),T.BaseTreeViewer=void 0;var a=C(4);const l=-100,L="selected";class S{constructor(e){if(this.constructor===S)throw new Error("Cannot initialize BaseTreeViewer.");this.container=e.container,this.eventBus=e.eventBus,this.reset()}reset(){this._pdfDocument=null,this._lastToggleIsShow=!0,this._currentTreeItem=null,this.container.textContent="",this.container.classList.remove("treeWithDeepNesting")}_dispatchEvent(e){throw new Error("Not implemented: _dispatchEvent")}_bindLink(e,r){throw new Error("Not implemented: _bindLink")}_normalizeTextContent(e){return(0,a.removeNullCharacters)(e,!0)||"–"}_addToggleButton(e,r=!1){const d=document.createElement("div");d.className="treeItemToggler",r&&d.classList.add("treeItemsHidden"),d.onclick=m=>{if(m.stopPropagation(),d.classList.toggle("treeItemsHidden"),m.shiftKey){const v=!d.classList.contains("treeItemsHidden");this._toggleTreeItem(e,v)}},e.prepend(d)}_toggleTreeItem(e,r=!1){this._lastToggleIsShow=r;for(const d of e.querySelectorAll(".treeItemToggler"))d.classList.toggle("treeItemsHidden",!r)}_toggleAllTreeItems(){this._toggleTreeItem(this.container,!this._lastToggleIsShow)}_finishRendering(e,r,d=!1){d&&(this.container.classList.add("treeWithDeepNesting"),this._lastToggleIsShow=!e.querySelector(".treeItemsHidden")),this.container.append(e),this._dispatchEvent(r)}render(e){throw new Error("Not implemented: render")}_updateCurrentTreeItem(e=null){this._currentTreeItem&&(this._currentTreeItem.classList.remove(L),this._currentTreeItem=null),e&&(e.classList.add(L),this._currentTreeItem=e)}_scrollToCurrentTreeItem(e){if(!e)return;let r=e.parentNode;for(;r&&r!==this.container;){if(r.classList.contains("treeItem")){const d=r.firstElementChild;d==null||d.classList.remove("treeItemsHidden")}r=r.parentNode}this._updateCurrentTreeItem(e),this.container.scrollTo(e.offsetLeft,e.offsetTop+l)}}T.BaseTreeViewer=S},(oe,T,C)=>{var m,v,Ai,b,yt,n,Pi,c,$n,h,Ci,x,Xn;Object.defineProperty(T,"__esModule",{value:!0}),T.PDFDocumentProperties=void 0;var a=C(4),l=C(5);const L="-",S=["en-us","en-lr","my"],w={"8.5x11":"Letter","8.5x14":"Legal"},e={"297x420":"A3","210x297":"A4"};function r(V,E,O){const y=E?V.width:V.height,B=E?V.height:V.width;return O[`${y}x${B}`]}class d{constructor({dialog:E,fields:O,closeButton:y},B,$,I,ce){R(this,v);R(this,b);R(this,n);R(this,c);R(this,h);R(this,x);R(this,m,null);this.dialog=E,this.fields=O,this.overlayManager=B,this.l10n=I,this._fileNameLookup=ce,D(this,v,Ai).call(this),y.addEventListener("click",this.close.bind(this)),this.overlayManager.register(this.dialog),$._on("pagechanging",we=>{this._currentPageNumber=we.pageNumber}),$._on("rotationchanging",we=>{this._pagesRotation=we.pagesRotation}),this._isNonMetricLocale=!0,I.getLanguage().then(we=>{this._isNonMetricLocale=S.includes(we)})}async open(){await Promise.all([this.overlayManager.open(this.dialog),this._dataAvailableCapability.promise]);const E=this._currentPageNumber,O=this._pagesRotation;if(t(this,m)&&E===t(this,m)._currentPageNumber&&O===t(this,m)._pagesRotation){D(this,b,yt).call(this);return}const{info:y,contentLength:B}=await this.pdfDocument.getMetadata(),[$,I,ce,we,q,P]=await Promise.all([this._fileNameLookup(),D(this,n,Pi).call(this,B),D(this,h,Ci).call(this,y.CreationDate),D(this,h,Ci).call(this,y.ModDate),this.pdfDocument.getPage(E).then(F=>D(this,c,$n).call(this,(0,a.getPageSizeInches)(F),O)),D(this,x,Xn).call(this,y.IsLinearized)]);ie(this,m,Object.freeze({fileName:$,fileSize:I,title:y.Title,author:y.Author,subject:y.Subject,keywords:y.Keywords,creationDate:ce,modificationDate:we,creator:y.Creator,producer:y.Producer,version:y.PDFFormatVersion,pageCount:this.pdfDocument.numPages,pageSize:q,linearized:P,_currentPageNumber:E,_pagesRotation:O})),D(this,b,yt).call(this);const{length:s}=await this.pdfDocument.getDownloadInfo();if(B===s)return;const p=Object.assign(Object.create(null),t(this,m));p.fileSize=await D(this,n,Pi).call(this,s),ie(this,m,Object.freeze(p)),D(this,b,yt).call(this)}async close(){this.overlayManager.close(this.dialog)}setDocument(E){this.pdfDocument&&(D(this,v,Ai).call(this),D(this,b,yt).call(this,!0)),E&&(this.pdfDocument=E,this._dataAvailableCapability.resolve())}}m=new WeakMap,v=new WeakSet,Ai=function(){this.pdfDocument=null,ie(this,m,null),this._dataAvailableCapability=new l.PromiseCapability,this._currentPageNumber=1,this._pagesRotation=0},b=new WeakSet,yt=function(E=!1){if(E||!t(this,m)){for(const O in this.fields)this.fields[O].textContent=L;return}if(this.overlayManager.active===this.dialog)for(const O in this.fields){const y=t(this,m)[O];this.fields[O].textContent=y||y===0?y:L}},n=new WeakSet,Pi=async function(E=0){const O=E/1024,y=O/1024;if(O)return this.l10n.get(`document_properties_${y>=1?"mb":"kb"}`,{size_mb:y>=1&&(+y.toPrecision(3)).toLocaleString(),size_kb:y<1&&(+O.toPrecision(3)).toLocaleString(),size_b:E.toLocaleString()})},c=new WeakSet,$n=async function(E,O){if(!E)return;O%180!==0&&(E={width:E.height,height:E.width});const y=(0,a.isPortraitOrientation)(E);let B={width:Math.round(E.width*100)/100,height:Math.round(E.height*100)/100},$={width:Math.round(E.width*25.4*10)/10,height:Math.round(E.height*25.4*10)/10},I=r(B,y,w)||r($,y,e);if(!I&&!(Number.isInteger($.width)&&Number.isInteger($.height))){const p={width:E.width*25.4,height:E.height*25.4},F={width:Math.round($.width),height:Math.round($.height)};Math.abs(p.width-F.width)<.1&&Math.abs(p.height-F.height)<.1&&(I=r(F,y,e),I&&(B={width:Math.round(F.width/25.4*100)/100,height:Math.round(F.height/25.4*100)/100},$=F))}const[{width:ce,height:we},q,P,s]=await Promise.all([this._isNonMetricLocale?B:$,this.l10n.get(`document_properties_page_size_unit_${this._isNonMetricLocale?"inches":"millimeters"}`),I&&this.l10n.get(`document_properties_page_size_name_${I.toLowerCase()}`),this.l10n.get(`document_properties_page_size_orientation_${y?"portrait":"landscape"}`)]);return this.l10n.get(`document_properties_page_size_dimension_${P?"name_":""}string`,{width:ce.toLocaleString(),height:we.toLocaleString(),unit:q,name:P,orientation:s})},h=new WeakSet,Ci=async function(E){const O=l.PDFDateString.toDateObject(E);if(O)return this.l10n.get("document_properties_date_string",{date:O.toLocaleDateString(),time:O.toLocaleTimeString()})},x=new WeakSet,Xn=function(E){return this.l10n.get(`document_properties_linearized_${E?"yes":"no"}`)},T.PDFDocumentProperties=d},(oe,T,C)=>{var w,St;Object.defineProperty(T,"__esModule",{value:!0}),T.PDFFindBar=void 0;var a=C(19),l=C(4);const L=1e3;class S{constructor(d,m,v){R(this,w);this.opened=!1,this.bar=d.bar,this.toggleButton=d.toggleButton,this.findField=d.findField,this.highlightAll=d.highlightAllCheckbox,this.caseSensitive=d.caseSensitiveCheckbox,this.matchDiacritics=d.matchDiacriticsCheckbox,this.entireWord=d.entireWordCheckbox,this.findMsg=d.findMsg,this.findResultsCount=d.findResultsCount,this.findPreviousButton=d.findPreviousButton,this.findNextButton=d.findNextButton,this.eventBus=m,this.l10n=v,this.toggleButton.addEventListener("click",()=>{this.toggle()}),this.findField.addEventListener("input",()=>{this.dispatchEvent("")}),this.bar.addEventListener("keydown",f=>{switch(f.keyCode){case 13:f.target===this.findField&&this.dispatchEvent("again",f.shiftKey);break;case 27:this.close();break}}),this.findPreviousButton.addEventListener("click",()=>{this.dispatchEvent("again",!0)}),this.findNextButton.addEventListener("click",()=>{this.dispatchEvent("again",!1)}),this.highlightAll.addEventListener("click",()=>{this.dispatchEvent("highlightallchange")}),this.caseSensitive.addEventListener("click",()=>{this.dispatchEvent("casesensitivitychange")}),this.entireWord.addEventListener("click",()=>{this.dispatchEvent("entirewordchange")}),this.matchDiacritics.addEventListener("click",()=>{this.dispatchEvent("diacriticmatchingchange")}),this.eventBus._on("resize",D(this,w,St).bind(this))}reset(){this.updateUIState()}dispatchEvent(d,m=!1){this.eventBus.dispatch("find",{source:this,type:d,query:this.findField.value,caseSensitive:this.caseSensitive.checked,entireWord:this.entireWord.checked,highlightAll:this.highlightAll.checked,findPrevious:m,matchDiacritics:this.matchDiacritics.checked})}updateUIState(d,m,v){let f=Promise.resolve(""),b="";switch(d){case a.FindState.FOUND:break;case a.FindState.PENDING:b="pending";break;case a.FindState.NOT_FOUND:f=this.l10n.get("find_not_found"),b="notFound";break;case a.FindState.WRAPPED:f=this.l10n.get(`find_reached_${m?"top":"bottom"}`);break}this.findField.setAttribute("data-status",b),this.findField.setAttribute("aria-invalid",d===a.FindState.NOT_FOUND),f.then(i=>{this.findMsg.setAttribute("data-status",b),this.findMsg.textContent=i,D(this,w,St).call(this)}),this.updateResultsCount(v)}updateResultsCount({current:d=0,total:m=0}={}){const v=L;let f=Promise.resolve("");if(m>0)if(m>v){let b="find_match_count_limit";f=this.l10n.get(b,{limit:v})}else{let b="find_match_count";f=this.l10n.get(b,{current:d,total:m})}f.then(b=>{this.findResultsCount.textContent=b,D(this,w,St).call(this)})}open(){this.opened||(this.opened=!0,(0,l.toggleExpandedBtn)(this.toggleButton,!0,this.bar)),this.findField.select(),this.findField.focus(),D(this,w,St).call(this)}close(){this.opened&&(this.opened=!1,(0,l.toggleExpandedBtn)(this.toggleButton,!1,this.bar),this.eventBus.dispatch("findbarclose",{source:this}))}toggle(){this.opened?this.close():this.open()}}w=new WeakSet,St=function(){if(!this.opened)return;this.bar.classList.remove("wrapContainers");const d=this.bar.clientHeight,m=this.bar.firstElementChild.clientHeight;d>m&&this.bar.classList.add("wrapContainers")},T.PDFFindBar=S},(oe,T,C)=>{var O,y,B,$,qn,ce,Ti,q,Mi,s,Kn,F,Yn,X,Zn,ee,Li,pe,Qn,de,Jn,me,Bt,Ie,Et,Oe,ut,J,es,fe,xi,Me,Ri,Ue,Vt,Ge,ts,ze,ki,A,Ii,be,At;Object.defineProperty(T,"__esModule",{value:!0}),T.PDFFindController=T.FindState=void 0;var a=C(4),l=C(20),L=C(5);const S={FOUND:0,NOT_FOUND:1,WRAPPED:2,PENDING:3};T.FindState=S;const w=250,e=-50,r=-400,d={"‐":"-","‘":"'","’":"'","‚":"'","‛":"'","“":'"',"”":'"',"„":'"',"‟":'"',"¼":"1/4","½":"1/2","¾":"3/4"},m=new Set([12441,12442,2381,2509,2637,2765,2893,3021,3149,3277,3387,3388,3405,3530,3642,3770,3972,4153,4154,5908,5940,6098,6752,6980,7082,7083,7154,7155,11647,43014,43052,43204,43347,43456,43766,44013,3158,3953,3954,3962,3963,3964,3965,3968,3956]);let v;const f=/\p{M}+/gu,b=/([.*+?^${}()|[\]\\])|(\p{P})|(\s+)|(\p{M})|(\p{L})/gu,i=/([^\p{M}])\p{M}*$/u,n=/^\p{M}*([^\p{M}])/u,u=/[\uAC00-\uD7AF\uFA6C\uFACF-\uFAD1\uFAD5-\uFAD7]+/g,c=new Map,o="[\\u1100-\\u1112\\ud7a4-\\ud7af\\ud84a\\ud84c\\ud850\\ud854\\ud857\\ud85f]",h=new Map;let g=null,x=null;function j(he){const se=[];let ge;for(;(ge=u.exec(he))!==null;){let{index:Le}=ge;for(const Fe of ge[0]){let Re=c.get(Fe);Re||(Re=Fe.normalize("NFD").length,c.set(Fe,Re)),se.push([Re,Le++])}}let _;if(se.length===0&&g)_=g;else if(se.length>0&&x)_=x;else{const Le=Object.keys(d).join(""),Fe=(0,l.getNormalizeWithNFKC)(),He=`([${Le}])|([${Fe}])|((?:゙|゚)\\n)|(\\p{M}+(?:-\\n)?)|(\\S-\\n)|((?:\\p{Ideographic}|[぀-ヿ])\\n)|(\\n)`;se.length===0?_=g=new RegExp(He+"|(\\u0000)","gum"):_=x=new RegExp(He+`|(${o})`,"gum")}const K=[];for(;(ge=f.exec(he))!==null;)K.push([ge[0].length,ge.index]);let ue=he.normalize("NFD");const re=[[0,0]];let k=0,M=0,W=0,G=0,te=0,ve=!1;return ue=ue.replace(_,(Le,Fe,Re,ke,He,De,Be,je,Xe,qe)=>{var Ke,et,Ye;if(qe-=G,Fe){const Ze=d[Fe],Je=Ze.length;for(let Qe=1;Qe<Je;Qe++)re.push([qe-W+Qe,W-Qe]);return W-=Je-1,Ze}if(Re){let Ze=h.get(Re);Ze||(Ze=Re.normalize("NFKC"),h.set(Re,Ze));const Je=Ze.length;for(let Qe=1;Qe<Je;Qe++)re.push([qe-W+Qe,W-Qe]);return W-=Je-1,Ze}if(ke)return ve=!0,qe+te===((Ke=K[k])==null?void 0:Ke[1])?++k:(re.push([qe-1-W+1,W-1]),W-=1,G+=1),re.push([qe-W+1,W]),G+=1,te+=1,ke.charAt(0);if(He){const Ze=He.endsWith(`
`),Je=Ze?He.length-2:He.length;ve=!0;let Qe=Je;qe+te===((et=K[k])==null?void 0:et[1])&&(Qe-=K[k][0],++k);for(let tt=1;tt<=Qe;tt++)re.push([qe-1-W+tt,W-tt]);return W-=Qe,G+=Qe,Ze?(qe+=Je-1,re.push([qe-W+1,1+W]),W+=1,G+=1,te+=1,He.slice(0,Je)):He}if(De){const Ze=De.length-2;return re.push([qe-W+Ze,1+W]),W+=1,G+=1,te+=1,De.slice(0,-2)}if(Be){const Ze=Be.length-1;return re.push([qe-W+Ze,W]),G+=1,te+=1,Be.slice(0,-1)}if(je)return re.push([qe-W+1,W-1]),W-=1,G+=1,te+=1," ";if(qe+te===((Ye=se[M])==null?void 0:Ye[1])){const Ze=se[M][0]-1;++M;for(let Je=1;Je<=Ze;Je++)re.push([qe-(W-Je),W-Je]);W-=Ze,G+=Ze}return Xe}),re.push([ue.length,W]),[ue,re,ve]}function V(he,se,ge){if(!he)return[se,ge];const _=se,K=se+ge-1;let ue=(0,a.binarySearchFirstItem)(he,G=>G[0]>=_);he[ue][0]>_&&--ue;let re=(0,a.binarySearchFirstItem)(he,G=>G[0]>=K,ue);he[re][0]>K&&--re;const k=_+he[ue][1],W=K+he[re][1]+1-k;return[k,W]}class E{constructor({linkService:se,eventBus:ge,updateMatchesCountOnProgress:_=!0}){R(this,$);R(this,ce);R(this,q);R(this,s);R(this,F);R(this,X);R(this,ee);R(this,pe);R(this,de);R(this,me);R(this,Ie);R(this,Oe);R(this,J);R(this,fe);R(this,Me);R(this,Ue);R(this,Ge);R(this,ze);R(this,A);R(this,be);R(this,O,null);R(this,y,!0);R(this,B,0);this._linkService=se,this._eventBus=ge,ie(this,y,_),this.onIsPageVisible=null,D(this,ce,Ti).call(this),ge._on("find",D(this,$,qn).bind(this)),ge._on("findbarclose",D(this,Ge,ts).bind(this))}get highlightMatches(){return this._highlightMatches}get pageMatches(){return this._pageMatches}get pageMatchesLength(){return this._pageMatchesLength}get selected(){return this._selected}get state(){return t(this,O)}setDocument(se){this._pdfDocument&&D(this,ce,Ti).call(this),se&&(this._pdfDocument=se,this._firstPageCapability.resolve())}scrollMatchIntoView({element:se=null,selectedLeft:ge=0,pageIndex:_=-1,matchIndex:K=-1}){if(!this._scrollMatches||!se)return;if(K===-1||K!==this._selected.matchIdx)return;if(_===-1||_!==this._selected.pageIdx)return;this._scrollMatches=!1;const ue={top:e,left:ge+r};(0,a.scrollIntoView)(se,ue,!0)}}O=new WeakMap,y=new WeakMap,B=new WeakMap,$=new WeakSet,qn=function(se){if(!se)return;se.phraseSearch===!1&&(console.error("The `phraseSearch`-parameter was removed, please provide an Array of strings in the `query`-parameter instead."),typeof se.query=="string"&&(se.query=se.query.match(/\S+/g)));const ge=this._pdfDocument,{type:_}=se;(t(this,O)===null||D(this,s,Kn).call(this,se))&&(this._dirtyMatch=!0),ie(this,O,se),_!=="highlightallchange"&&D(this,be,At).call(this,S.PENDING),this._firstPageCapability.promise.then(()=>{if(!this._pdfDocument||ge&&this._pdfDocument!==ge)return;D(this,de,Jn).call(this);const K=!this._highlightMatches,ue=!!this._findTimeout;this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),_?this._dirtyMatch?D(this,Oe,ut).call(this):_==="again"?(D(this,Oe,ut).call(this),K&&t(this,O).highlightAll&&D(this,Ie,Et).call(this)):_==="highlightallchange"?(ue?D(this,Oe,ut).call(this):this._highlightMatches=!0,D(this,Ie,Et).call(this)):D(this,Oe,ut).call(this):this._findTimeout=setTimeout(()=>{D(this,Oe,ut).call(this),this._findTimeout=null},w)})},ce=new WeakSet,Ti=function(){this._highlightMatches=!1,this._scrollMatches=!1,this._pdfDocument=null,this._pageMatches=[],this._pageMatchesLength=[],ie(this,B,0),ie(this,O,null),this._selected={pageIdx:-1,matchIdx:-1},this._offset={pageIdx:null,matchIdx:null,wrapped:!1},this._extractTextPromises=[],this._pageContents=[],this._pageDiffs=[],this._hasDiacritics=[],this._matchesCountTotal=0,this._pagesToSearch=null,this._pendingFindMatches=new Set,this._resumePageIdx=null,this._dirtyMatch=!1,clearTimeout(this._findTimeout),this._findTimeout=null,this._firstPageCapability=new L.PromiseCapability},q=new WeakSet,Mi=function(){const{query:se}=t(this,O);return typeof se=="string"?(se!==this._rawQuery&&(this._rawQuery=se,[this._normalizedQuery]=j(se)),this._normalizedQuery):(se||[]).filter(ge=>!!ge).map(ge=>j(ge)[0])},s=new WeakSet,Kn=function(se){var re;const ge=se.query,_=t(this,O).query,K=typeof ge;if(K!==typeof _)return!0;if(K==="string"){if(ge!==_)return!0}else if(JSON.stringify(ge)!==JSON.stringify(_))return!0;switch(se.type){case"again":const k=this._selected.pageIdx+1,M=this._linkService;return k>=1&&k<=M.pagesCount&&k!==M.page&&!(((re=this.onIsPageVisible)==null?void 0:re.call(this,k))??!0);case"highlightallchange":return!1}return!0},F=new WeakSet,Yn=function(se,ge,_){let K=se.slice(0,ge).match(i);if(K){const ue=se.charCodeAt(ge),re=K[1].charCodeAt(0);if((0,l.getCharacterType)(ue)===(0,l.getCharacterType)(re))return!1}if(K=se.slice(ge+_).match(n),K){const ue=se.charCodeAt(ge+_-1),re=K[1].charCodeAt(0);if((0,l.getCharacterType)(ue)===(0,l.getCharacterType)(re))return!1}return!0},X=new WeakSet,Zn=function(se,ge,_,K){const ue=this._pageMatches[_]=[],re=this._pageMatchesLength[_]=[];if(!se)return;const k=this._pageDiffs[_];let M;for(;(M=se.exec(K))!==null;){if(ge&&!D(this,F,Yn).call(this,K,M.index,M[0].length))continue;const[W,G]=V(k,M.index,M[0].length);G&&(ue.push(W),re.push(G))}},ee=new WeakSet,Li=function(se,ge){const{matchDiacritics:_}=t(this,O);let K=!1;se=se.replaceAll(b,(re,k,M,W,G,te)=>k?`[ ]*\\${k}[ ]*`:M?`[ ]*${M}[ ]*`:W?"[ ]+":_?G||te:G?m.has(G.charCodeAt(0))?G:"":ge?(K=!0,`${te}\\p{M}*`):te);const ue="[ ]*";return se.endsWith(ue)&&(se=se.slice(0,se.length-ue.length)),_&&ge&&(v||(v=String.fromCharCode(...m)),K=!0,se=`${se}(?=[${v}]|[^\\p{M}]|$)`),[K,se]},pe=new WeakSet,Qn=function(se){let ge=t(this,q,Mi);if(ge.length===0)return;const{caseSensitive:_,entireWord:K}=t(this,O),ue=this._pageContents[se],re=this._hasDiacritics[se];let k=!1;typeof ge=="string"?[k,ge]=D(this,ee,Li).call(this,ge,re):ge=ge.sort().reverse().map(G=>{const[te,ve]=D(this,ee,Li).call(this,G,re);return k||(k=te),`(${ve})`}).join("|");const M=`g${k?"u":""}${_?"":"i"}`;ge=ge?new RegExp(ge,M):null,D(this,X,Zn).call(this,ge,K,se,ue),t(this,O).highlightAll&&D(this,me,Bt).call(this,se),this._resumePageIdx===se&&(this._resumePageIdx=null,D(this,fe,xi).call(this));const W=this._pageMatches[se].length;this._matchesCountTotal+=W,t(this,y)?W>0&&D(this,A,Ii).call(this):++it(this,B)._===this._linkService.pagesCount&&D(this,A,Ii).call(this)},de=new WeakSet,Jn=function(){if(this._extractTextPromises.length>0)return;let se=Promise.resolve();const ge={disableNormalization:!0};for(let _=0,K=this._linkService.pagesCount;_<K;_++){const ue=new L.PromiseCapability;this._extractTextPromises[_]=ue.promise,se=se.then(()=>this._pdfDocument.getPage(_+1).then(re=>re.getTextContent(ge)).then(re=>{const k=[];for(const M of re.items)k.push(M.str),M.hasEOL&&k.push(`
`);[this._pageContents[_],this._pageDiffs[_],this._hasDiacritics[_]]=j(k.join("")),ue.resolve()},re=>{console.error(`Unable to get text content for page ${_+1}`,re),this._pageContents[_]="",this._pageDiffs[_]=null,this._hasDiacritics[_]=!1,ue.resolve()}))}},me=new WeakSet,Bt=function(se){this._scrollMatches&&this._selected.pageIdx===se&&(this._linkService.page=se+1),this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:se})},Ie=new WeakSet,Et=function(){this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:-1})},Oe=new WeakSet,ut=function(){const se=t(this,O).findPrevious,ge=this._linkService.page-1,_=this._linkService.pagesCount;if(this._highlightMatches=!0,this._dirtyMatch){this._dirtyMatch=!1,this._selected.pageIdx=this._selected.matchIdx=-1,this._offset.pageIdx=ge,this._offset.matchIdx=null,this._offset.wrapped=!1,this._resumePageIdx=null,this._pageMatches.length=0,this._pageMatchesLength.length=0,ie(this,B,0),this._matchesCountTotal=0,D(this,Ie,Et).call(this);for(let re=0;re<_;re++)this._pendingFindMatches.has(re)||(this._pendingFindMatches.add(re),this._extractTextPromises[re].then(()=>{this._pendingFindMatches.delete(re),D(this,pe,Qn).call(this,re)}))}if(t(this,q,Mi).length===0){D(this,be,At).call(this,S.FOUND);return}if(this._resumePageIdx)return;const ue=this._offset;if(this._pagesToSearch=_,ue.matchIdx!==null){const re=this._pageMatches[ue.pageIdx].length;if(!se&&ue.matchIdx+1<re||se&&ue.matchIdx>0){ue.matchIdx=se?ue.matchIdx-1:ue.matchIdx+1,D(this,Ue,Vt).call(this,!0);return}D(this,Me,Ri).call(this,se)}D(this,fe,xi).call(this)},J=new WeakSet,es=function(se){const ge=this._offset,_=se.length,K=t(this,O).findPrevious;return _?(ge.matchIdx=K?_-1:0,D(this,Ue,Vt).call(this,!0),!0):(D(this,Me,Ri).call(this,K),ge.wrapped&&(ge.matchIdx=null,this._pagesToSearch<0)?(D(this,Ue,Vt).call(this,!1),!0):!1)},fe=new WeakSet,xi=function(){this._resumePageIdx!==null&&console.error("There can only be one pending page.");let se=null;do{const ge=this._offset.pageIdx;if(se=this._pageMatches[ge],!se){this._resumePageIdx=ge;break}}while(!D(this,J,es).call(this,se))},Me=new WeakSet,Ri=function(se){const ge=this._offset,_=this._linkService.pagesCount;ge.pageIdx=se?ge.pageIdx-1:ge.pageIdx+1,ge.matchIdx=null,this._pagesToSearch--,(ge.pageIdx>=_||ge.pageIdx<0)&&(ge.pageIdx=se?_-1:0,ge.wrapped=!0)},Ue=new WeakSet,Vt=function(se=!1){let ge=S.NOT_FOUND;const _=this._offset.wrapped;if(this._offset.wrapped=!1,se){const K=this._selected.pageIdx;this._selected.pageIdx=this._offset.pageIdx,this._selected.matchIdx=this._offset.matchIdx,ge=_?S.WRAPPED:S.FOUND,K!==-1&&K!==this._selected.pageIdx&&D(this,me,Bt).call(this,K)}D(this,be,At).call(this,ge,t(this,O).findPrevious),this._selected.pageIdx!==-1&&(this._scrollMatches=!0,D(this,me,Bt).call(this,this._selected.pageIdx))},Ge=new WeakSet,ts=function(se){const ge=this._pdfDocument;this._firstPageCapability.promise.then(()=>{!this._pdfDocument||ge&&this._pdfDocument!==ge||(this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),this._resumePageIdx&&(this._resumePageIdx=null,this._dirtyMatch=!0),D(this,be,At).call(this,S.FOUND),this._highlightMatches=!1,D(this,Ie,Et).call(this))})},ze=new WeakSet,ki=function(){var ue;const{pageIdx:se,matchIdx:ge}=this._selected;let _=0,K=this._matchesCountTotal;if(ge!==-1){for(let re=0;re<se;re++)_+=((ue=this._pageMatches[re])==null?void 0:ue.length)||0;_+=ge+1}return(_<1||_>K)&&(_=K=0),{current:_,total:K}},A=new WeakSet,Ii=function(){this._eventBus.dispatch("updatefindmatchescount",{source:this,matchesCount:D(this,ze,ki).call(this)})},be=new WeakSet,At=function(se,ge=!1){var _;!t(this,y)&&(t(this,B)!==this._linkService.pagesCount||se===S.PENDING)||this._eventBus.dispatch("updatefindcontrolstate",{source:this,state:se,previous:ge,matchesCount:D(this,ze,ki).call(this),rawQuery:((_=t(this,O))==null?void 0:_.query)??null})},T.PDFFindController=E},(oe,T)=>{Object.defineProperty(T,"__esModule",{value:!0}),T.CharacterType=void 0,T.getCharacterType=f,T.getNormalizeWithNFKC=i;const C={SPACE:0,ALPHA_LETTER:1,PUNCT:2,HAN_LETTER:3,KATAKANA_LETTER:4,HIRAGANA_LETTER:5,HALFWIDTH_KATAKANA_LETTER:6,THAI_LETTER:7};T.CharacterType=C;function a(n){return n<11904}function l(n){return(n&65408)===0}function L(n){return n>=97&&n<=122||n>=65&&n<=90}function S(n){return n>=48&&n<=57}function w(n){return n===32||n===9||n===13||n===10}function e(n){return n>=13312&&n<=40959||n>=63744&&n<=64255}function r(n){return n>=12448&&n<=12543}function d(n){return n>=12352&&n<=12447}function m(n){return n>=65376&&n<=65439}function v(n){return(n&65408)===3584}function f(n){return a(n)?l(n)?w(n)?C.SPACE:L(n)||S(n)||n===95?C.ALPHA_LETTER:C.PUNCT:v(n)?C.THAI_LETTER:n===160?C.SPACE:C.ALPHA_LETTER:e(n)?C.HAN_LETTER:r(n)?C.KATAKANA_LETTER:d(n)?C.HIRAGANA_LETTER:m(n)?C.HALFWIDTH_KATAKANA_LETTER:C.ALPHA_LETTER}let b;function i(){return b||(b=" ¨ª¯²-µ¸-º¼-¾Ĳ-ĳĿ-ŀŉſǄ-ǌǱ-ǳʰ-ʸ˘-˝ˠ-ˤʹͺ;΄-΅·ϐ-ϖϰ-ϲϴ-ϵϹևٵ-ٸक़-य़ড়-ঢ়য়ਲ਼ਸ਼ਖ਼-ਜ਼ਫ਼ଡ଼-ଢ଼ำຳໜ-ໝ༌གྷཌྷདྷབྷཛྷཀྵჼᴬ-ᴮᴰ-ᴺᴼ-ᵍᵏ-ᵪᵸᶛ-ᶿẚ-ẛάέήίόύώΆ᾽-῁ΈΉ῍-῏ΐΊ῝-῟ΰΎ῭-`ΌΏ´-῾ - ‑‗․-… ″-‴‶-‷‼‾⁇-⁉⁗ ⁰-ⁱ⁴-₎ₐ-ₜ₨℀-℃℅-ℇ℉-ℓℕ-№ℙ-ℝ℠-™ℤΩℨK-ℭℯ-ℱℳ-ℹ℻-⅀ⅅ-ⅉ⅐-ⅿ↉∬-∭∯-∰〈-〉①-⓪⨌⩴-⩶⫝̸ⱼ-ⱽⵯ⺟⻳⼀-⿕　〶〸-〺゛-゜ゟヿㄱ-ㆎ㆒-㆟㈀-㈞㈠-㉇㉐-㉾㊀-㏿ꚜ-ꚝꝰꟲ-ꟴꟸ-ꟹꭜ-ꭟꭩ豈-嗀塚晴凞-羽蘒諸逸-都飯-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-זּטּ-לּמּנּ-סּףּ-פּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-﷼︐-︙︰-﹄﹇-﹒﹔-﹦﹨-﹫ﹰ-ﹲﹴﹶ-ﻼ！-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ￠-￦"),b}},(oe,T,C)=>{Object.defineProperty(T,"__esModule",{value:!0}),T.PDFHistory=void 0,T.isDestArraysEqual=m,T.isDestHashesEqual=d;var a=C(4),l=C(10);const L=1e3,S=50,w=1e3;function e(){return document.location.hash}class r{constructor({linkService:f,eventBus:b}){this.linkService=f,this.eventBus=b,this._initialized=!1,this._fingerprint="",this.reset(),this._boundEvents=null,this.eventBus._on("pagesinit",()=>{this._isPagesLoaded=!1,this.eventBus._on("pagesloaded",i=>{this._isPagesLoaded=!!i.pagesCount},{once:!0})})}initialize({fingerprint:f,resetHistory:b=!1,updateUrl:i=!1}){if(!f||typeof f!="string"){console.error('PDFHistory.initialize: The "fingerprint" must be a non-empty string.');return}this._initialized&&this.reset();const n=this._fingerprint!==""&&this._fingerprint!==f;this._fingerprint=f,this._updateUrl=i===!0,this._initialized=!0,this._bindEvents();const u=window.history.state;if(this._popStateInProgress=!1,this._blockHashChange=0,this._currentHash=e(),this._numPositionUpdates=0,this._uid=this._maxUid=0,this._destination=null,this._position=null,!this._isValidState(u,!0)||b){const{hash:o,page:h,rotation:g}=this._parseCurrentHash(!0);if(!o||n||b){this._pushOrReplaceState(null,!0);return}this._pushOrReplaceState({hash:o,page:h,rotation:g},!0);return}const c=u.destination;this._updateInternalState(c,u.uid,!0),c.rotation!==void 0&&(this._initialRotation=c.rotation),c.dest?(this._initialBookmark=JSON.stringify(c.dest),this._destination.page=null):c.hash?this._initialBookmark=c.hash:c.page&&(this._initialBookmark=`page=${c.page}`)}reset(){this._initialized&&(this._pageHide(),this._initialized=!1,this._unbindEvents()),this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._initialBookmark=null,this._initialRotation=null}push({namedDest:f=null,explicitDest:b,pageNumber:i}){if(!this._initialized)return;if(f&&typeof f!="string"){console.error(`PDFHistory.push: "${f}" is not a valid namedDest parameter.`);return}else if(Array.isArray(b)){if(!this._isValidPage(i)&&(i!==null||this._destination)){console.error(`PDFHistory.push: "${i}" is not a valid pageNumber parameter.`);return}}else{console.error(`PDFHistory.push: "${b}" is not a valid explicitDest parameter.`);return}const n=f||JSON.stringify(b);if(!n)return;let u=!1;if(this._destination&&(d(this._destination.hash,n)||m(this._destination.dest,b))){if(this._destination.page)return;u=!0}this._popStateInProgress&&!u||(this._pushOrReplaceState({dest:b,hash:n,page:i,rotation:this.linkService.rotation},u),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1})))}pushPage(f){var b;if(this._initialized){if(!this._isValidPage(f)){console.error(`PDFHistory.pushPage: "${f}" is not a valid page number.`);return}((b=this._destination)==null?void 0:b.page)!==f&&(this._popStateInProgress||(this._pushOrReplaceState({dest:null,hash:`page=${f}`,page:f,rotation:this.linkService.rotation}),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1}))))}}pushCurrentPosition(){!this._initialized||this._popStateInProgress||this._tryPushCurrentPosition()}back(){if(!this._initialized||this._popStateInProgress)return;const f=window.history.state;this._isValidState(f)&&f.uid>0&&window.history.back()}forward(){if(!this._initialized||this._popStateInProgress)return;const f=window.history.state;this._isValidState(f)&&f.uid<this._maxUid&&window.history.forward()}get popStateInProgress(){return this._initialized&&(this._popStateInProgress||this._blockHashChange>0)}get initialBookmark(){return this._initialized?this._initialBookmark:null}get initialRotation(){return this._initialized?this._initialRotation:null}_pushOrReplaceState(f,b=!1){const i=b||!this._destination,n={fingerprint:this._fingerprint,uid:i?this._uid:this._uid+1,destination:f};this._updateInternalState(f,n.uid);let u;if(this._updateUrl&&(f!=null&&f.hash)){const c=document.location.href.split("#")[0];c.startsWith("file://")||(u=`${c}#${f.hash}`)}i?window.history.replaceState(n,"",u):window.history.pushState(n,"",u)}_tryPushCurrentPosition(f=!1){if(!this._position)return;let b=this._position;if(f&&(b=Object.assign(Object.create(null),this._position),b.temporary=!0),!this._destination){this._pushOrReplaceState(b);return}if(this._destination.temporary){this._pushOrReplaceState(b,!0);return}if(this._destination.hash===b.hash||!this._destination.page&&this._numPositionUpdates<=S)return;let i=!1;if(this._destination.page>=b.first&&this._destination.page<=b.page){if(this._destination.dest!==void 0||!this._destination.first)return;i=!0}this._pushOrReplaceState(b,i)}_isValidPage(f){return Number.isInteger(f)&&f>0&&f<=this.linkService.pagesCount}_isValidState(f,b=!1){if(!f)return!1;if(f.fingerprint!==this._fingerprint)if(b){if(typeof f.fingerprint!="string"||f.fingerprint.length!==this._fingerprint.length)return!1;const[i]=performance.getEntriesByType("navigation");if((i==null?void 0:i.type)!=="reload")return!1}else return!1;return!(!Number.isInteger(f.uid)||f.uid<0||f.destination===null||typeof f.destination!="object")}_updateInternalState(f,b,i=!1){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),i&&(f!=null&&f.temporary)&&delete f.temporary,this._destination=f,this._uid=b,this._maxUid=Math.max(this._maxUid,b),this._numPositionUpdates=0}_parseCurrentHash(f=!1){const b=unescape(e()).substring(1),i=(0,a.parseQueryString)(b),n=i.get("nameddest")||"";let u=i.get("page")|0;return(!this._isValidPage(u)||f&&n.length>0)&&(u=null),{hash:b,page:u,rotation:this.linkService.rotation}}_updateViewarea({location:f}){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._position={hash:f.pdfOpenParams.substring(1),page:this.linkService.page,first:f.pageNumber,rotation:f.rotation},!this._popStateInProgress&&(this._isPagesLoaded&&this._destination&&!this._destination.page&&this._numPositionUpdates++,this._updateViewareaTimeout=setTimeout(()=>{this._popStateInProgress||this._tryPushCurrentPosition(!0),this._updateViewareaTimeout=null},w))}_popState({state:f}){const b=e(),i=this._currentHash!==b;if(this._currentHash=b,!f){this._uid++;const{hash:u,page:c,rotation:o}=this._parseCurrentHash();this._pushOrReplaceState({hash:u,page:c,rotation:o},!0);return}if(!this._isValidState(f))return;this._popStateInProgress=!0,i&&(this._blockHashChange++,(0,l.waitOnEventOrTimeout)({target:window,name:"hashchange",delay:L}).then(()=>{this._blockHashChange--}));const n=f.destination;this._updateInternalState(n,f.uid,!0),(0,a.isValidRotation)(n.rotation)&&(this.linkService.rotation=n.rotation),n.dest?this.linkService.goToDestination(n.dest):n.hash?this.linkService.setHash(n.hash):n.page&&(this.linkService.page=n.page),Promise.resolve().then(()=>{this._popStateInProgress=!1})}_pageHide(){(!this._destination||this._destination.temporary)&&this._tryPushCurrentPosition()}_bindEvents(){this._boundEvents||(this._boundEvents={updateViewarea:this._updateViewarea.bind(this),popState:this._popState.bind(this),pageHide:this._pageHide.bind(this)},this.eventBus._on("updateviewarea",this._boundEvents.updateViewarea),window.addEventListener("popstate",this._boundEvents.popState),window.addEventListener("pagehide",this._boundEvents.pageHide))}_unbindEvents(){this._boundEvents&&(this.eventBus._off("updateviewarea",this._boundEvents.updateViewarea),window.removeEventListener("popstate",this._boundEvents.popState),window.removeEventListener("pagehide",this._boundEvents.pageHide),this._boundEvents=null)}}T.PDFHistory=r;function d(v,f){return typeof v!="string"||typeof f!="string"?!1:v===f||(0,a.parseQueryString)(v).get("nameddest")===f}function m(v,f){function b(i,n){if(typeof i!=typeof n||Array.isArray(i)||Array.isArray(n))return!1;if(i!==null&&typeof i=="object"&&n!==null){if(Object.keys(i).length!==Object.keys(n).length)return!1;for(const u in i)if(!b(i[u],n[u]))return!1;return!0}return i===n||Number.isNaN(i)&&Number.isNaN(n)}if(!(Array.isArray(v)&&Array.isArray(f))||v.length!==f.length)return!1;for(let i=0,n=v.length;i<n;i++)if(!b(v[i],f[i]))return!1;return!0}},(oe,T,C)=>{var L,Fi;Object.defineProperty(T,"__esModule",{value:!0}),T.PDFLayerViewer=void 0;var a=C(16);class l extends a.BaseTreeViewer{constructor(r){super(r);R(this,L);this.l10n=r.l10n,this.eventBus._on("optionalcontentconfigchanged",d=>{D(this,L,Fi).call(this,d.promise)}),this.eventBus._on("resetlayers",()=>{D(this,L,Fi).call(this)}),this.eventBus._on("togglelayerstree",this._toggleAllTreeItems.bind(this))}reset(){super.reset(),this._optionalContentConfig=null,this._optionalContentHash=null}_dispatchEvent(r){this.eventBus.dispatch("layersloaded",{source:this,layersCount:r})}_bindLink(r,{groupId:d,input:m}){const v=()=>{this._optionalContentConfig.setVisibility(d,m.checked),this._optionalContentHash=this._optionalContentConfig.getHash(),this.eventBus.dispatch("optionalcontentconfig",{source:this,promise:Promise.resolve(this._optionalContentConfig)})};r.onclick=f=>f.target===m?(v(),!0):f.target!==r?!0:(m.checked=!m.checked,v(),!1)}async _setNestedName(r,{name:d=null}){if(typeof d=="string"){r.textContent=this._normalizeTextContent(d);return}r.textContent=await this.l10n.get("additional_layers"),r.style.fontStyle="italic"}_addToggleButton(r,{name:d=null}){super._addToggleButton(r,d===null)}_toggleAllTreeItems(){this._optionalContentConfig&&super._toggleAllTreeItems()}render({optionalContentConfig:r,pdfDocument:d}){this._optionalContentConfig&&this.reset(),this._optionalContentConfig=r||null,this._pdfDocument=d||null;const m=r==null?void 0:r.getOrder();if(!m){this._dispatchEvent(0);return}this._optionalContentHash=r.getHash();const v=document.createDocumentFragment(),f=[{parent:v,groups:m}];let b=0,i=!1;for(;f.length>0;){const n=f.shift();for(const u of n.groups){const c=document.createElement("div");c.className="treeItem";const o=document.createElement("a");if(c.append(o),typeof u=="object"){i=!0,this._addToggleButton(c,u),this._setNestedName(o,u);const h=document.createElement("div");h.className="treeItems",c.append(h),f.push({parent:h,groups:u.order})}else{const h=r.getGroup(u),g=document.createElement("input");this._bindLink(o,{groupId:u,input:g}),g.type="checkbox",g.checked=h.visible;const x=document.createElement("label");x.textContent=this._normalizeTextContent(h.name),x.append(g),o.append(x),b++}n.parent.append(c)}}this._finishRendering(v,b,i)}}L=new WeakSet,Fi=async function(r=null){if(!this._optionalContentConfig)return;const d=this._pdfDocument,m=await(r||d.getOptionalContentConfig());if(d===this._pdfDocument){if(r){if(m.getHash()===this._optionalContentHash)return}else this.eventBus.dispatch("optionalcontentconfig",{source:this,promise:Promise.resolve(m)});this.render({optionalContentConfig:m,pdfDocument:this._pdfDocument})}},T.PDFLayerViewer=l},(oe,T,C)=>{Object.defineProperty(T,"__esModule",{value:!0}),T.PDFOutlineViewer=void 0;var a=C(16),l=C(5),L=C(4);class S extends a.BaseTreeViewer{constructor(e){super(e),this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.eventBus._on("toggleoutlinetree",this._toggleAllTreeItems.bind(this)),this.eventBus._on("currentoutlineitem",this._currentOutlineItem.bind(this)),this.eventBus._on("pagechanging",r=>{this._currentPageNumber=r.pageNumber}),this.eventBus._on("pagesloaded",r=>{this._isPagesLoaded=!!r.pagesCount,this._currentOutlineItemCapability&&!this._currentOutlineItemCapability.settled&&this._currentOutlineItemCapability.resolve(this._isPagesLoaded)}),this.eventBus._on("sidebarviewchanged",r=>{this._sidebarView=r.view})}reset(){super.reset(),this._outline=null,this._pageNumberToDestHashCapability=null,this._currentPageNumber=1,this._isPagesLoaded=null,this._currentOutlineItemCapability&&!this._currentOutlineItemCapability.settled&&this._currentOutlineItemCapability.resolve(!1),this._currentOutlineItemCapability=null}_dispatchEvent(e){var r;this._currentOutlineItemCapability=new l.PromiseCapability,e===0||(r=this._pdfDocument)!=null&&r.loadingParams.disableAutoFetch?this._currentOutlineItemCapability.resolve(!1):this._isPagesLoaded!==null&&this._currentOutlineItemCapability.resolve(this._isPagesLoaded),this.eventBus.dispatch("outlineloaded",{source:this,outlineCount:e,currentOutlineItemPromise:this._currentOutlineItemCapability.promise})}_bindLink(e,{url:r,newWindow:d,action:m,attachment:v,dest:f,setOCGState:b}){const{linkService:i}=this;if(r){i.addLinkAttributes(e,r,d);return}if(m){e.href=i.getAnchorUrl(""),e.onclick=()=>(i.executeNamedAction(m),!1);return}if(v){e.href=i.getAnchorUrl(""),e.onclick=()=>(this.downloadManager.openOrDownloadData(e,v.content,v.filename),!1);return}if(b){e.href=i.getAnchorUrl(""),e.onclick=()=>(i.executeSetOCGState(b),!1);return}e.href=i.getDestinationHash(f),e.onclick=n=>(this._updateCurrentTreeItem(n.target.parentNode),f&&i.goToDestination(f),!1)}_setStyles(e,{bold:r,italic:d}){r&&(e.style.fontWeight="bold"),d&&(e.style.fontStyle="italic")}_addToggleButton(e,{count:r,items:d}){let m=!1;if(r<0){let v=d.length;if(v>0){const f=[...d];for(;f.length>0;){const{count:b,items:i}=f.shift();b>0&&i.length>0&&(v+=i.length,f.push(...i))}}Math.abs(r)===v&&(m=!0)}super._addToggleButton(e,m)}_toggleAllTreeItems(){this._outline&&super._toggleAllTreeItems()}render({outline:e,pdfDocument:r}){if(this._outline&&this.reset(),this._outline=e||null,this._pdfDocument=r||null,!e){this._dispatchEvent(0);return}const d=document.createDocumentFragment(),m=[{parent:d,items:e}];let v=0,f=!1;for(;m.length>0;){const b=m.shift();for(const i of b.items){const n=document.createElement("div");n.className="treeItem";const u=document.createElement("a");if(this._bindLink(u,i),this._setStyles(u,i),u.textContent=this._normalizeTextContent(i.title),n.append(u),i.items.length>0){f=!0,this._addToggleButton(n,i);const c=document.createElement("div");c.className="treeItems",n.append(c),m.push({parent:c,items:i.items})}b.parent.append(n),v++}}this._finishRendering(d,v,f)}async _currentOutlineItem(){if(!this._isPagesLoaded)throw new Error("_currentOutlineItem: All pages have not been loaded.");if(!this._outline||!this._pdfDocument)return;const e=await this._getPageNumberToDestHash(this._pdfDocument);if(e&&(this._updateCurrentTreeItem(null),this._sidebarView===L.SidebarView.OUTLINE))for(let r=this._currentPageNumber;r>0;r--){const d=e.get(r);if(!d)continue;const m=this.container.querySelector(`a[href="${d}"]`);if(m){this._scrollToCurrentTreeItem(m.parentNode);break}}}async _getPageNumberToDestHash(e){if(this._pageNumberToDestHashCapability)return this._pageNumberToDestHashCapability.promise;this._pageNumberToDestHashCapability=new l.PromiseCapability;const r=new Map,d=new Map,m=[{nesting:0,items:this._outline}];for(;m.length>0;){const v=m.shift(),f=v.nesting;for(const{dest:b,items:i}of v.items){let n,u;if(typeof b=="string"){if(n=await e.getDestination(b),e!==this._pdfDocument)return null}else n=b;if(Array.isArray(n)){const[c]=n;if(typeof c=="object"&&c!==null){if(u=this.linkService._cachedPageNumber(c),!u)try{if(u=await e.getPageIndex(c)+1,e!==this._pdfDocument)return null;this.linkService.cachePageRef(u,c)}catch{}}else Number.isInteger(c)&&(u=c+1);if(Number.isInteger(u)&&(!r.has(u)||f>d.get(u))){const o=this.linkService.getDestinationHash(b);r.set(u,o),d.set(u,f)}}i.length>0&&m.push({nesting:f+1,items:i})}}return this._pageNumberToDestHashCapability.resolve(r.size>0?r:null),this._pageNumberToDestHashCapability.promise}}T.PDFOutlineViewer=S},(oe,T,C)=>{var f,b,i,is,u,Pt,o,ns,g,ss,j,as,E,rs,y,Oi,$,os,ce,Ct,q,ls,s,ds,F,cs,X,hs,ee,us,pe,Di;Object.defineProperty(T,"__esModule",{value:!0}),T.PDFPresentationMode=void 0;var a=C(4),l=C(5);const L=3e3,S="pdfPresentationMode",w="pdfPresentationModeControls",e=50,r=.1,d=50,m=Math.PI/6;class v{constructor({container:ye,pdfViewer:me,eventBus:Te}){R(this,i);R(this,u);R(this,o);R(this,g);R(this,j);R(this,E);R(this,y);R(this,$);R(this,ce);R(this,q);R(this,s);R(this,F);R(this,X);R(this,ee);R(this,pe);R(this,f,a.PresentationModeState.UNKNOWN);R(this,b,null);this.container=ye,this.pdfViewer=me,this.eventBus=Te,this.contextMenuOpen=!1,this.mouseScrollTimeStamp=0,this.mouseScrollDelta=0,this.touchSwipeState=null}async request(){const{container:ye,pdfViewer:me}=this;if(this.active||!me.pagesCount||!ye.requestFullscreen)return!1;D(this,ee,us).call(this),D(this,u,Pt).call(this,a.PresentationModeState.CHANGING);const Te=ye.requestFullscreen();ie(this,b,{pageNumber:me.currentPageNumber,scaleValue:me.currentScaleValue,scrollMode:me.scrollMode,spreadMode:null,annotationEditorMode:null}),me.spreadMode!==a.SpreadMode.NONE&&!(me.pageViewsReady&&me.hasEqualPageSizes)&&(console.warn("Ignoring Spread modes when entering PresentationMode, since the document may contain varying page sizes."),t(this,b).spreadMode=me.spreadMode),me.annotationEditorMode!==l.AnnotationEditorType.DISABLE&&(t(this,b).annotationEditorMode=me.annotationEditorMode);try{return await Te,me.focus(),!0}catch{D(this,pe,Di).call(this),D(this,u,Pt).call(this,a.PresentationModeState.NORMAL)}return!1}get active(){return t(this,f)===a.PresentationModeState.CHANGING||t(this,f)===a.PresentationModeState.FULLSCREEN}}f=new WeakMap,b=new WeakMap,i=new WeakSet,is=function(ye){if(!this.active)return;ye.preventDefault();const me=(0,a.normalizeWheelEventDelta)(ye),Te=Date.now(),Ie=this.mouseScrollTimeStamp;if(!(Te>Ie&&Te-Ie<e)&&((this.mouseScrollDelta>0&&me<0||this.mouseScrollDelta<0&&me>0)&&D(this,ce,Ct).call(this),this.mouseScrollDelta+=me,Math.abs(this.mouseScrollDelta)>=r)){const Se=this.mouseScrollDelta;D(this,ce,Ct).call(this),(Se>0?this.pdfViewer.previousPage():this.pdfViewer.nextPage())&&(this.mouseScrollTimeStamp=Te)}},u=new WeakSet,Pt=function(ye){ie(this,f,ye),this.eventBus.dispatch("presentationmodechanged",{source:this,state:ye})},o=new WeakSet,ns=function(){D(this,u,Pt).call(this,a.PresentationModeState.FULLSCREEN),this.container.classList.add(S),setTimeout(()=>{this.pdfViewer.scrollMode=a.ScrollMode.PAGE,t(this,b).spreadMode!==null&&(this.pdfViewer.spreadMode=a.SpreadMode.NONE),this.pdfViewer.currentPageNumber=t(this,b).pageNumber,this.pdfViewer.currentScaleValue="page-fit",t(this,b).annotationEditorMode!==null&&(this.pdfViewer.annotationEditorMode={mode:l.AnnotationEditorType.NONE})},0),D(this,s,ds).call(this),D(this,y,Oi).call(this),this.contextMenuOpen=!1,window.getSelection().removeAllRanges()},g=new WeakSet,ss=function(){const ye=this.pdfViewer.currentPageNumber;this.container.classList.remove(S),setTimeout(()=>{D(this,pe,Di).call(this),D(this,u,Pt).call(this,a.PresentationModeState.NORMAL),this.pdfViewer.scrollMode=t(this,b).scrollMode,t(this,b).spreadMode!==null&&(this.pdfViewer.spreadMode=t(this,b).spreadMode),this.pdfViewer.currentScaleValue=t(this,b).scaleValue,this.pdfViewer.currentPageNumber=ye,t(this,b).annotationEditorMode!==null&&(this.pdfViewer.annotationEditorMode={mode:t(this,b).annotationEditorMode}),ie(this,b,null)},0),D(this,F,cs).call(this),D(this,$,os).call(this),D(this,ce,Ct).call(this),this.contextMenuOpen=!1},j=new WeakSet,as=function(ye){var me;if(this.contextMenuOpen){this.contextMenuOpen=!1,ye.preventDefault();return}ye.button===0&&(ye.target.href&&((me=ye.target.parentNode)!=null&&me.hasAttribute("data-internal-link"))||(ye.preventDefault(),ye.shiftKey?this.pdfViewer.previousPage():this.pdfViewer.nextPage()))},E=new WeakSet,rs=function(){this.contextMenuOpen=!0},y=new WeakSet,Oi=function(){this.controlsTimeout?clearTimeout(this.controlsTimeout):this.container.classList.add(w),this.controlsTimeout=setTimeout(()=>{this.container.classList.remove(w),delete this.controlsTimeout},L)},$=new WeakSet,os=function(){this.controlsTimeout&&(clearTimeout(this.controlsTimeout),this.container.classList.remove(w),delete this.controlsTimeout)},ce=new WeakSet,Ct=function(){this.mouseScrollTimeStamp=0,this.mouseScrollDelta=0},q=new WeakSet,ls=function(ye){if(this.active){if(ye.touches.length>1){this.touchSwipeState=null;return}switch(ye.type){case"touchstart":this.touchSwipeState={startX:ye.touches[0].pageX,startY:ye.touches[0].pageY,endX:ye.touches[0].pageX,endY:ye.touches[0].pageY};break;case"touchmove":if(this.touchSwipeState===null)return;this.touchSwipeState.endX=ye.touches[0].pageX,this.touchSwipeState.endY=ye.touches[0].pageY,ye.preventDefault();break;case"touchend":if(this.touchSwipeState===null)return;let me=0;const Te=this.touchSwipeState.endX-this.touchSwipeState.startX,Ie=this.touchSwipeState.endY-this.touchSwipeState.startY,Se=Math.abs(Math.atan2(Ie,Te));Math.abs(Te)>d&&(Se<=m||Se>=Math.PI-m)?me=Te:Math.abs(Ie)>d&&Math.abs(Se-Math.PI/2)<=m&&(me=Ie),me>0?this.pdfViewer.previousPage():me<0&&this.pdfViewer.nextPage();break}}},s=new WeakSet,ds=function(){this.showControlsBind=D(this,y,Oi).bind(this),this.mouseDownBind=D(this,j,as).bind(this),this.mouseWheelBind=D(this,i,is).bind(this),this.resetMouseScrollStateBind=D(this,ce,Ct).bind(this),this.contextMenuBind=D(this,E,rs).bind(this),this.touchSwipeBind=D(this,q,ls).bind(this),window.addEventListener("mousemove",this.showControlsBind),window.addEventListener("mousedown",this.mouseDownBind),window.addEventListener("wheel",this.mouseWheelBind,{passive:!1}),window.addEventListener("keydown",this.resetMouseScrollStateBind),window.addEventListener("contextmenu",this.contextMenuBind),window.addEventListener("touchstart",this.touchSwipeBind),window.addEventListener("touchmove",this.touchSwipeBind),window.addEventListener("touchend",this.touchSwipeBind)},F=new WeakSet,cs=function(){window.removeEventListener("mousemove",this.showControlsBind),window.removeEventListener("mousedown",this.mouseDownBind),window.removeEventListener("wheel",this.mouseWheelBind,{passive:!1}),window.removeEventListener("keydown",this.resetMouseScrollStateBind),window.removeEventListener("contextmenu",this.contextMenuBind),window.removeEventListener("touchstart",this.touchSwipeBind),window.removeEventListener("touchmove",this.touchSwipeBind),window.removeEventListener("touchend",this.touchSwipeBind),delete this.showControlsBind,delete this.mouseDownBind,delete this.mouseWheelBind,delete this.resetMouseScrollStateBind,delete this.contextMenuBind,delete this.touchSwipeBind},X=new WeakSet,hs=function(){document.fullscreenElement?D(this,o,ns).call(this):D(this,g,ss).call(this)},ee=new WeakSet,us=function(){this.fullscreenChangeBind=D(this,X,hs).bind(this),window.addEventListener("fullscreenchange",this.fullscreenChangeBind)},pe=new WeakSet,Di=function(){window.removeEventListener("fullscreenchange",this.fullscreenChangeBind),delete this.fullscreenChangeBind},T.PDFPresentationMode=v},(oe,T,C)=>{Object.defineProperty(T,"__esModule",{value:!0}),T.PDFRenderingQueue=void 0;var a=C(5),l=C(4);const L=3e4;class S{constructor(){this.pdfViewer=null,this.pdfThumbnailViewer=null,this.onIdle=null,this.highestPriorityPage=null,this.idleTimeout=null,this.printing=!1,this.isThumbnailViewEnabled=!1,Object.defineProperty(this,"hasViewer",{value:()=>!!this.pdfViewer})}setViewer(e){this.pdfViewer=e}setThumbnailViewer(e){this.pdfThumbnailViewer=e}isHighestPriority(e){return this.highestPriorityPage===e.renderingId}renderHighestPriority(e){var r;this.idleTimeout&&(clearTimeout(this.idleTimeout),this.idleTimeout=null),!this.pdfViewer.forceRendering(e)&&(this.isThumbnailViewEnabled&&((r=this.pdfThumbnailViewer)!=null&&r.forceRendering())||this.printing||this.onIdle&&(this.idleTimeout=setTimeout(this.onIdle.bind(this),L)))}getHighestPriority(e,r,d,m=!1){const v=e.views,f=v.length;if(f===0)return null;for(let c=0;c<f;c++){const o=v[c].view;if(!this.isViewFinished(o))return o}const b=e.first.id,i=e.last.id;if(i-b+1>f){const c=e.ids;for(let o=1,h=i-b;o<h;o++){const g=d?b+o:i-o;if(c.has(g))continue;const x=r[g-1];if(!this.isViewFinished(x))return x}}let n=d?i:b-2,u=r[n];return u&&!this.isViewFinished(u)||m&&(n+=d?1:-1,u=r[n],u&&!this.isViewFinished(u))?u:null}isViewFinished(e){return e.renderingState===l.RenderingStates.FINISHED}renderView(e){switch(e.renderingState){case l.RenderingStates.FINISHED:return!1;case l.RenderingStates.PAUSED:this.highestPriorityPage=e.renderingId,e.resume();break;case l.RenderingStates.RUNNING:this.highestPriorityPage=e.renderingId;break;case l.RenderingStates.INITIAL:this.highestPriorityPage=e.renderingId,e.draw().finally(()=>{this.renderHighestPriority()}).catch(r=>{r instanceof a.RenderingCancelledException||console.error(`renderView: "${r}"`)});break}return!0}}T.PDFRenderingQueue=S},(oe,T,C)=>{var S,w,e,r,d,m,v,f,b,i,n,fs,c,Ut,h,Ni,x,ps,V,Tt;Object.defineProperty(T,"__esModule",{value:!0}),T.PDFScriptingManager=void 0;var a=C(4),l=C(5);class L{constructor({eventBus:y,sandboxBundleSrc:B=null,externalServices:$=null,docProperties:I=null}){R(this,n);R(this,c);R(this,h);R(this,x);R(this,V);R(this,S,null);R(this,w,null);R(this,e,null);R(this,r,null);R(this,d,null);R(this,m,null);R(this,v,null);R(this,f,!1);R(this,b,null);R(this,i,null);ie(this,r,y),ie(this,b,B),ie(this,d,$),ie(this,e,I)}setViewer(y){ie(this,v,y)}async setDocument(y){var ce;if(t(this,m)&&await D(this,V,Tt).call(this),ie(this,m,y),!y)return;const[B,$,I]=await Promise.all([y.getFieldObjects(),y.getCalculationOrderIds(),y.getJSActions()]);if(!B&&!I){await D(this,V,Tt).call(this);return}if(y===t(this,m)){try{ie(this,i,D(this,x,ps).call(this))}catch(we){console.error(`setDocument: "${we.message}".`),await D(this,V,Tt).call(this);return}this._internalEvents.set("updatefromsandbox",we=>{(we==null?void 0:we.source)===window&&D(this,n,fs).call(this,we.detail)}),this._internalEvents.set("dispatcheventinsandbox",we=>{var q;(q=t(this,i))==null||q.dispatchEventInSandbox(we.detail)}),this._internalEvents.set("pagechanging",({pageNumber:we,previous:q})=>{we!==q&&(D(this,h,Ni).call(this,q),D(this,c,Ut).call(this,we))}),this._internalEvents.set("pagerendered",({pageNumber:we})=>{this._pageOpenPending.has(we)&&we===t(this,v).currentPageNumber&&D(this,c,Ut).call(this,we)}),this._internalEvents.set("pagesdestroy",async()=>{var we,q;await D(this,h,Ni).call(this,t(this,v).currentPageNumber),await((we=t(this,i))==null?void 0:we.dispatchEventInSandbox({id:"doc",name:"WillClose"})),(q=t(this,S))==null||q.resolve()});for(const[we,q]of this._internalEvents)t(this,r)._on(we,q);try{const we=await t(this,e).call(this,y);if(y!==t(this,m))return;await t(this,i).createSandbox({objects:B,calculationOrder:$,appInfo:{platform:navigator.platform,language:navigator.language},docInfo:{...we,actions:I}}),t(this,r).dispatch("sandboxcreated",{source:this})}catch(we){console.error(`setDocument: "${we.message}".`),await D(this,V,Tt).call(this);return}await((ce=t(this,i))==null?void 0:ce.dispatchEventInSandbox({id:"doc",name:"Open"})),await D(this,c,Ut).call(this,t(this,v).currentPageNumber,!0),Promise.resolve().then(()=>{y===t(this,m)&&ie(this,f,!0)})}}async dispatchWillSave(){var y;return(y=t(this,i))==null?void 0:y.dispatchEventInSandbox({id:"doc",name:"WillSave"})}async dispatchDidSave(){var y;return(y=t(this,i))==null?void 0:y.dispatchEventInSandbox({id:"doc",name:"DidSave"})}async dispatchWillPrint(){var y;return(y=t(this,i))==null?void 0:y.dispatchEventInSandbox({id:"doc",name:"WillPrint"})}async dispatchDidPrint(){var y;return(y=t(this,i))==null?void 0:y.dispatchEventInSandbox({id:"doc",name:"DidPrint"})}get destroyPromise(){var y;return((y=t(this,w))==null?void 0:y.promise)||null}get ready(){return t(this,f)}get _internalEvents(){return(0,l.shadow)(this,"_internalEvents",new Map)}get _pageOpenPending(){return(0,l.shadow)(this,"_pageOpenPending",new Set)}get _visitedPages(){return(0,l.shadow)(this,"_visitedPages",new Map)}}S=new WeakMap,w=new WeakMap,e=new WeakMap,r=new WeakMap,d=new WeakMap,m=new WeakMap,v=new WeakMap,f=new WeakMap,b=new WeakMap,i=new WeakMap,n=new WeakSet,fs=async function(y){var s;const B=t(this,v),$=B.isInPresentationMode||B.isChangingPresentationMode,{id:I,siblings:ce,command:we,value:q}=y;if(!I){switch(we){case"clear":console.clear();break;case"error":console.error(q);break;case"layout":if(!$){const p=(0,a.apiPageLayoutToViewerModes)(q);B.spreadMode=p.spreadMode}break;case"page-num":B.currentPageNumber=q+1;break;case"print":await B.pagesPromise,t(this,r).dispatch("print",{source:this});break;case"println":console.log(q);break;case"zoom":$||(B.currentScaleValue=q);break;case"SaveAs":t(this,r).dispatch("download",{source:this});break;case"FirstPage":B.currentPageNumber=1;break;case"LastPage":B.currentPageNumber=B.pagesCount;break;case"NextPage":B.nextPage();break;case"PrevPage":B.previousPage();break;case"ZoomViewIn":$||B.increaseScale();break;case"ZoomViewOut":$||B.decreaseScale();break}return}if($&&y.focus)return;delete y.id,delete y.siblings;const P=ce?[I,...ce]:[I];for(const p of P){const F=document.querySelector(`[data-element-id="${p}"]`);F?F.dispatchEvent(new CustomEvent("updatefromsandbox",{detail:y})):(s=t(this,m))==null||s.annotationStorage.setValue(p,y)}},c=new WeakSet,Ut=async function(y,B=!1){const $=t(this,m),I=this._visitedPages;if(B&&ie(this,S,new l.PromiseCapability),!t(this,S))return;const ce=t(this,v).getPageView(y-1);if((ce==null?void 0:ce.renderingState)!==a.RenderingStates.FINISHED){this._pageOpenPending.add(y);return}this._pageOpenPending.delete(y);const we=(async()=>{var P,s;const q=await(I.has(y)?null:(P=ce.pdfPage)==null?void 0:P.getJSActions());$===t(this,m)&&await((s=t(this,i))==null?void 0:s.dispatchEventInSandbox({id:"page",name:"PageOpen",pageNumber:y,actions:q}))})();I.set(y,we)},h=new WeakSet,Ni=async function(y){var ce;const B=t(this,m),$=this._visitedPages;if(!t(this,S)||this._pageOpenPending.has(y))return;const I=$.get(y);I&&($.set(y,null),await I,B===t(this,m)&&await((ce=t(this,i))==null?void 0:ce.dispatchEventInSandbox({id:"page",name:"PageClose",pageNumber:y})))},x=new WeakSet,ps=function(){if(ie(this,w,new l.PromiseCapability),t(this,i))throw new Error("#initScripting: Scripting already exists.");return t(this,d).createScripting({sandboxBundleSrc:t(this,b)})},V=new WeakSet,Tt=async function(){var y,B;if(!t(this,i)){ie(this,m,null),(y=t(this,w))==null||y.resolve();return}t(this,S)&&(await Promise.race([t(this,S).promise,new Promise($=>{setTimeout($,1e3)})]).catch(()=>{}),ie(this,S,null)),ie(this,m,null);try{await t(this,i).destroySandbox()}catch{}for(const[$,I]of this._internalEvents)t(this,r)._off($,I);this._internalEvents.clear(),this._pageOpenPending.clear(),this._visitedPages.clear(),ie(this,i,null),ie(this,f,!1),(B=t(this,w))==null||B.resolve()},T.PDFScriptingManager=L},(oe,T,C)=>{var r,d,m,v,f,b,ft,n,gs,c,Bi,h,ms,x,Ht,V,bs,O,_s;Object.defineProperty(T,"__esModule",{value:!0}),T.PDFSidebar=void 0;var a=C(4);const l="--sidebar-width",L=200,S="sidebarResizing",w="pdfSidebarNotification";class e{constructor({elements:$,eventBus:I,l10n:ce}){R(this,b);R(this,n);R(this,c);R(this,h);R(this,x);R(this,V);R(this,O);R(this,r,!1);R(this,d,D(this,V,bs).bind(this));R(this,m,D(this,O,_s).bind(this));R(this,v,null);R(this,f,null);this.isOpen=!1,this.active=a.SidebarView.THUMBS,this.isInitialViewSet=!1,this.isInitialEventDispatched=!1,this.onToggled=null,this.onUpdateThumbnails=null,this.outerContainer=$.outerContainer,this.sidebarContainer=$.sidebarContainer,this.toggleButton=$.toggleButton,this.resizer=$.resizer,this.thumbnailButton=$.thumbnailButton,this.outlineButton=$.outlineButton,this.attachmentsButton=$.attachmentsButton,this.layersButton=$.layersButton,this.thumbnailView=$.thumbnailView,this.outlineView=$.outlineView,this.attachmentsView=$.attachmentsView,this.layersView=$.layersView,this._outlineOptionsContainer=$.outlineOptionsContainer,this._currentOutlineItemButton=$.currentOutlineItemButton,this.eventBus=I,this.l10n=ce,ce.getDirection().then(we=>{ie(this,r,we==="rtl")}),D(this,h,ms).call(this)}reset(){this.isInitialViewSet=!1,this.isInitialEventDispatched=!1,D(this,c,Bi).call(this,!0),this.switchView(a.SidebarView.THUMBS),this.outlineButton.disabled=!1,this.attachmentsButton.disabled=!1,this.layersButton.disabled=!1,this._currentOutlineItemButton.disabled=!0}get visibleView(){return this.isOpen?this.active:a.SidebarView.NONE}setInitialView($=a.SidebarView.NONE){if(!this.isInitialViewSet){if(this.isInitialViewSet=!0,$===a.SidebarView.NONE||$===a.SidebarView.UNKNOWN){D(this,b,ft).call(this);return}this.switchView($,!0),this.isInitialEventDispatched||D(this,b,ft).call(this)}}switchView($,I=!1){const ce=$!==this.active;let we=!1;switch($){case a.SidebarView.NONE:this.isOpen&&this.close();return;case a.SidebarView.THUMBS:this.isOpen&&ce&&(we=!0);break;case a.SidebarView.OUTLINE:if(this.outlineButton.disabled)return;break;case a.SidebarView.ATTACHMENTS:if(this.attachmentsButton.disabled)return;break;case a.SidebarView.LAYERS:if(this.layersButton.disabled)return;break;default:console.error(`PDFSidebar.switchView: "${$}" is not a valid view.`);return}if(this.active=$,(0,a.toggleCheckedBtn)(this.thumbnailButton,$===a.SidebarView.THUMBS,this.thumbnailView),(0,a.toggleCheckedBtn)(this.outlineButton,$===a.SidebarView.OUTLINE,this.outlineView),(0,a.toggleCheckedBtn)(this.attachmentsButton,$===a.SidebarView.ATTACHMENTS,this.attachmentsView),(0,a.toggleCheckedBtn)(this.layersButton,$===a.SidebarView.LAYERS,this.layersView),this._outlineOptionsContainer.classList.toggle("hidden",$!==a.SidebarView.OUTLINE),I&&!this.isOpen){this.open();return}we&&(this.onUpdateThumbnails(),this.onToggled()),ce&&D(this,b,ft).call(this)}open(){this.isOpen||(this.isOpen=!0,(0,a.toggleExpandedBtn)(this.toggleButton,!0),this.outerContainer.classList.add("sidebarMoving","sidebarOpen"),this.active===a.SidebarView.THUMBS&&this.onUpdateThumbnails(),this.onToggled(),D(this,b,ft).call(this),D(this,c,Bi).call(this))}close(){this.isOpen&&(this.isOpen=!1,(0,a.toggleExpandedBtn)(this.toggleButton,!1),this.outerContainer.classList.add("sidebarMoving"),this.outerContainer.classList.remove("sidebarOpen"),this.onToggled(),D(this,b,ft).call(this))}toggle(){this.isOpen?this.close():this.open()}get outerContainerWidth(){return t(this,v)||ie(this,v,this.outerContainer.clientWidth)}}r=new WeakMap,d=new WeakMap,m=new WeakMap,v=new WeakMap,f=new WeakMap,b=new WeakSet,ft=function(){this.isInitialViewSet&&(this.isInitialEventDispatched||(this.isInitialEventDispatched=!0)),this.eventBus.dispatch("sidebarviewchanged",{source:this,view:this.visibleView})},n=new WeakSet,gs=function(){this.toggleButton.setAttribute("data-l10n-id","toggle_sidebar_notification2"),this.l10n.translate(this.toggleButton),this.isOpen||this.toggleButton.classList.add(w)},c=new WeakSet,Bi=function($=!1){(this.isOpen||$)&&this.toggleButton.classList.remove(w),$&&(this.toggleButton.setAttribute("data-l10n-id","toggle_sidebar"),this.l10n.translate(this.toggleButton))},h=new WeakSet,ms=function(){this.sidebarContainer.addEventListener("transitionend",I=>{I.target===this.sidebarContainer&&this.outerContainer.classList.remove("sidebarMoving")}),this.toggleButton.addEventListener("click",()=>{this.toggle()}),this.thumbnailButton.addEventListener("click",()=>{this.switchView(a.SidebarView.THUMBS)}),this.outlineButton.addEventListener("click",()=>{this.switchView(a.SidebarView.OUTLINE)}),this.outlineButton.addEventListener("dblclick",()=>{this.eventBus.dispatch("toggleoutlinetree",{source:this})}),this.attachmentsButton.addEventListener("click",()=>{this.switchView(a.SidebarView.ATTACHMENTS)}),this.layersButton.addEventListener("click",()=>{this.switchView(a.SidebarView.LAYERS)}),this.layersButton.addEventListener("dblclick",()=>{this.eventBus.dispatch("resetlayers",{source:this})}),this._currentOutlineItemButton.addEventListener("click",()=>{this.eventBus.dispatch("currentoutlineitem",{source:this})});const $=(I,ce,we)=>{ce.disabled=!I,I?D(this,n,gs).call(this):this.active===we&&this.switchView(a.SidebarView.THUMBS)};this.eventBus._on("outlineloaded",I=>{$(I.outlineCount,this.outlineButton,a.SidebarView.OUTLINE),I.currentOutlineItemPromise.then(ce=>{this.isInitialViewSet&&(this._currentOutlineItemButton.disabled=!ce)})}),this.eventBus._on("attachmentsloaded",I=>{$(I.attachmentsCount,this.attachmentsButton,a.SidebarView.ATTACHMENTS)}),this.eventBus._on("layersloaded",I=>{$(I.layersCount,this.layersButton,a.SidebarView.LAYERS)}),this.eventBus._on("presentationmodechanged",I=>{I.state===a.PresentationModeState.NORMAL&&this.visibleView===a.SidebarView.THUMBS&&this.onUpdateThumbnails()}),this.resizer.addEventListener("mousedown",I=>{I.button===0&&(this.outerContainer.classList.add(S),window.addEventListener("mousemove",t(this,d)),window.addEventListener("mouseup",t(this,m)))}),this.eventBus._on("resize",I=>{if(I.source!==window||(ie(this,v,null),!t(this,f)))return;if(!this.isOpen){D(this,x,Ht).call(this,t(this,f));return}this.outerContainer.classList.add(S);const ce=D(this,x,Ht).call(this,t(this,f));Promise.resolve().then(()=>{this.outerContainer.classList.remove(S),ce&&this.eventBus.dispatch("resize",{source:this})})})},x=new WeakSet,Ht=function($=0){const I=Math.floor(this.outerContainerWidth/2);return $>I&&($=I),$<L&&($=L),$===t(this,f)?!1:(ie(this,f,$),a.docStyle.setProperty(l,`${$}px`),!0)},V=new WeakSet,bs=function($){let I=$.clientX;t(this,r)&&(I=this.outerContainerWidth-I),D(this,x,Ht).call(this,I)},O=new WeakSet,_s=function($){this.outerContainer.classList.remove(S),this.eventBus.dispatch("resize",{source:this}),window.removeEventListener("mousemove",t(this,d)),window.removeEventListener("mouseup",t(this,m))},T.PDFSidebar=e},(oe,T,C)=>{var e,vs,d,ws;Object.defineProperty(T,"__esModule",{value:!0}),T.PDFThumbnailViewer=void 0;var a=C(4),l=C(29);const L=-19,S="selected";class w{constructor({container:f,eventBus:b,linkService:i,renderingQueue:n,l10n:u,pageColors:c}){R(this,e);R(this,d);this.container=f,this.eventBus=b,this.linkService=i,this.renderingQueue=n,this.l10n=u,this.pageColors=c||null,this.scroll=(0,a.watchScroll)(this.container,this._scrollUpdated.bind(this)),this._resetView()}_scrollUpdated(){this.renderingQueue.renderHighestPriority()}getThumbnail(f){return this._thumbnails[f]}_getVisibleThumbs(){return(0,a.getVisibleElements)({scrollEl:this.container,views:this._thumbnails})}scrollThumbnailIntoView(f){if(!this.pdfDocument)return;const b=this._thumbnails[f-1];if(!b){console.error('scrollThumbnailIntoView: Invalid "pageNumber" parameter.');return}f!==this._currentPageNumber&&(this._thumbnails[this._currentPageNumber-1].div.classList.remove(S),b.div.classList.add(S));const{first:i,last:n,views:u}=this._getVisibleThumbs();if(u.length>0){let c=!1;if(f<=i.id||f>=n.id)c=!0;else for(const{id:o,percent:h}of u)if(o===f){c=h<100;break}c&&(0,a.scrollIntoView)(b.div,{top:L})}this._currentPageNumber=f}get pagesRotation(){return this._pagesRotation}set pagesRotation(f){if(!(0,a.isValidRotation)(f))throw new Error("Invalid thumbnails rotation angle.");if(!this.pdfDocument||this._pagesRotation===f)return;this._pagesRotation=f;const b={rotation:f};for(const i of this._thumbnails)i.update(b)}cleanup(){for(const f of this._thumbnails)f.renderingState!==a.RenderingStates.FINISHED&&f.reset();l.TempImageFactory.destroyCanvas()}_resetView(){this._thumbnails=[],this._currentPageNumber=1,this._pageLabels=null,this._pagesRotation=0,this.container.textContent=""}setDocument(f){if(this.pdfDocument&&(this._cancelRendering(),this._resetView()),this.pdfDocument=f,!f)return;const b=f.getPage(1),i=f.getOptionalContentConfig();b.then(n=>{var h;const u=f.numPages,c=n.getViewport({scale:1});for(let g=1;g<=u;++g){const x=new l.PDFThumbnailView({container:this.container,eventBus:this.eventBus,id:g,defaultViewport:c.clone(),optionalContentConfigPromise:i,linkService:this.linkService,renderingQueue:this.renderingQueue,l10n:this.l10n,pageColors:this.pageColors});this._thumbnails.push(x)}(h=this._thumbnails[0])==null||h.setPdfPage(n),this._thumbnails[this._currentPageNumber-1].div.classList.add(S)}).catch(n=>{console.error("Unable to initialize thumbnail viewer",n)})}_cancelRendering(){for(const f of this._thumbnails)f.cancelRendering()}setPageLabels(f){var b;if(this.pdfDocument){f?Array.isArray(f)&&this.pdfDocument.numPages===f.length?this._pageLabels=f:(this._pageLabels=null,console.error("PDFThumbnailViewer_setPageLabels: Invalid page labels.")):this._pageLabels=null;for(let i=0,n=this._thumbnails.length;i<n;i++)this._thumbnails[i].setPageLabel(((b=this._pageLabels)==null?void 0:b[i])??null)}}forceRendering(){const f=this._getVisibleThumbs(),b=D(this,d,ws).call(this,f),i=this.renderingQueue.getHighestPriority(f,this._thumbnails,b);return i?(D(this,e,vs).call(this,i).then(()=>{this.renderingQueue.renderView(i)}),!0):!1}}e=new WeakSet,vs=async function(f){if(f.pdfPage)return f.pdfPage;try{const b=await this.pdfDocument.getPage(f.id);return f.pdfPage||f.setPdfPage(b),b}catch(b){return console.error("Unable to get page for thumb view",b),null}},d=new WeakSet,ws=function(f){var b,i;return((b=f.first)==null?void 0:b.id)===1?!0:((i=f.last)==null?void 0:i.id)===this._thumbnails.length?!1:this.scroll.down},T.PDFThumbnailViewer=w},(oe,T,C)=>{var d,m,Vi,f,Ui;Object.defineProperty(T,"__esModule",{value:!0}),T.TempImageFactory=T.PDFThumbnailView=void 0;var a=C(4),l=C(5);const L=2,S=3,w=98;class e{static getCanvas(n,u){const c=t(this,d)||ie(this,d,document.createElement("canvas"));c.width=n,c.height=u;const o=c.getContext("2d",{alpha:!1});return o.save(),o.fillStyle="rgb(255, 255, 255)",o.fillRect(0,0,n,u),o.restore(),[c,c.getContext("2d")]}static destroyCanvas(){const n=t(this,d);n&&(n.width=0,n.height=0),ie(this,d,null)}}d=new WeakMap,R(e,d,null),T.TempImageFactory=e;class r{constructor({container:n,eventBus:u,id:c,defaultViewport:o,optionalContentConfigPromise:h,linkService:g,renderingQueue:x,l10n:j,pageColors:V}){R(this,m);R(this,f);this.id=c,this.renderingId="thumbnail"+c,this.pageLabel=null,this.pdfPage=null,this.rotation=0,this.viewport=o,this.pdfPageRotate=o.rotation,this._optionalContentConfigPromise=h||null,this.pageColors=V||null,this.eventBus=u,this.linkService=g,this.renderingQueue=x,this.renderTask=null,this.renderingState=a.RenderingStates.INITIAL,this.resume=null,this.l10n=j;const E=document.createElement("a");E.href=g.getAnchorUrl("#page="+c),this._thumbPageTitle.then(B=>{E.title=B}),E.onclick=function(){return g.goToPage(c),!1},this.anchor=E;const O=document.createElement("div");O.className="thumbnail",O.setAttribute("data-page-number",this.id),this.div=O,D(this,m,Vi).call(this);const y=document.createElement("div");y.className="thumbnailImage",this._placeholderImg=y,O.append(y),E.append(O),n.append(E)}setPdfPage(n){this.pdfPage=n,this.pdfPageRotate=n.rotate;const u=(this.rotation+this.pdfPageRotate)%360;this.viewport=n.getViewport({scale:1,rotation:u}),this.reset()}reset(){var n;this.cancelRendering(),this.renderingState=a.RenderingStates.INITIAL,this.div.removeAttribute("data-loaded"),(n=this.image)==null||n.replaceWith(this._placeholderImg),D(this,m,Vi).call(this),this.image&&(this.image.removeAttribute("src"),delete this.image)}update({rotation:n=null}){typeof n=="number"&&(this.rotation=n);const u=(this.rotation+this.pdfPageRotate)%360;this.viewport=this.viewport.clone({scale:1,rotation:u}),this.reset()}cancelRendering(){this.renderTask&&(this.renderTask.cancel(),this.renderTask=null),this.resume=null}_getPageDrawContext(n=1){const u=document.createElement("canvas"),c=u.getContext("2d",{alpha:!1}),o=new a.OutputScale;u.width=n*this.canvasWidth*o.sx|0,u.height=n*this.canvasHeight*o.sy|0;const h=o.scaled?[o.sx,0,0,o.sy,0,0]:null;return{ctx:c,canvas:u,transform:h}}_convertCanvasToImage(n){if(this.renderingState!==a.RenderingStates.FINISHED)throw new Error("_convertCanvasToImage: Rendering has not finished.");const u=this._reduceImage(n),c=document.createElement("img");c.className="thumbnailImage",this._thumbPageCanvas.then(o=>{c.setAttribute("aria-label",o)}),c.src=u.toDataURL(),this.image=c,this.div.setAttribute("data-loaded",!0),this._placeholderImg.replaceWith(c),u.width=0,u.height=0}async draw(){if(this.renderingState!==a.RenderingStates.INITIAL){console.error("Must be in new state before drawing");return}const{pdfPage:n}=this;if(!n)throw this.renderingState=a.RenderingStates.FINISHED,new Error("pdfPage is not loaded");this.renderingState=a.RenderingStates.RUNNING;const{ctx:u,canvas:c,transform:o}=this._getPageDrawContext(L),h=this.viewport.clone({scale:L*this.scale}),g=E=>{if(!this.renderingQueue.isHighestPriority(this)){this.renderingState=a.RenderingStates.PAUSED,this.resume=()=>{this.renderingState=a.RenderingStates.RUNNING,E()};return}E()},x={canvasContext:u,transform:o,viewport:h,optionalContentConfigPromise:this._optionalContentConfigPromise,pageColors:this.pageColors},j=this.renderTask=n.render(x);j.onContinue=g;const V=j.promise.then(()=>D(this,f,Ui).call(this,j,c),E=>D(this,f,Ui).call(this,j,c,E));return V.finally(()=>{c.width=0,c.height=0,this.eventBus.dispatch("thumbnailrendered",{source:this,pageNumber:this.id,pdfPage:this.pdfPage})}),V}setImage(n){if(this.renderingState!==a.RenderingStates.INITIAL)return;const{thumbnailCanvas:u,pdfPage:c,scale:o}=n;u&&(this.pdfPage||this.setPdfPage(c),!(o<this.scale)&&(this.renderingState=a.RenderingStates.FINISHED,this._convertCanvasToImage(u)))}_reduceImage(n){const{ctx:u,canvas:c}=this._getPageDrawContext();if(n.width<=2*c.width)return u.drawImage(n,0,0,n.width,n.height,0,0,c.width,c.height),c;let o=c.width<<S,h=c.height<<S;const[g,x]=e.getCanvas(o,h);for(;o>n.width||h>n.height;)o>>=1,h>>=1;for(x.drawImage(n,0,0,n.width,n.height,0,0,o,h);o>2*c.width;)x.drawImage(g,0,0,o,h,0,0,o>>1,h>>1),o>>=1,h>>=1;return u.drawImage(g,0,0,o,h,0,0,c.width,c.height),c}get _thumbPageTitle(){return this.l10n.get("thumb_page_title",{page:this.pageLabel??this.id})}get _thumbPageCanvas(){return this.l10n.get("thumb_page_canvas",{page:this.pageLabel??this.id})}setPageLabel(n){this.pageLabel=typeof n=="string"?n:null,this._thumbPageTitle.then(u=>{this.anchor.title=u}),this.renderingState===a.RenderingStates.FINISHED&&this._thumbPageCanvas.then(u=>{var c;(c=this.image)==null||c.setAttribute("aria-label",u)})}}m=new WeakSet,Vi=function(){const{width:n,height:u}=this.viewport,c=n/u;this.canvasWidth=w,this.canvasHeight=this.canvasWidth/c|0,this.scale=this.canvasWidth/n;const{style:o}=this.div;o.setProperty("--thumbnail-width",`${this.canvasWidth}px`),o.setProperty("--thumbnail-height",`${this.canvasHeight}px`)},f=new WeakSet,Ui=async function(n,u,c=null){if(n===this.renderTask&&(this.renderTask=null),!(c instanceof l.RenderingCancelledException)&&(this.renderingState=a.RenderingStates.FINISHED,this._convertCanvasToImage(u),c))throw c},T.PDFThumbnailView=r},(oe,T,C)=>{var b,i,n,Hi,c,o,h,g,x,j,V,E,O,y,B,$,I,ce,we,q,P,ys,p,Ss,U,Es,Y,As,_e,Mt,ne,zt,ye,Ps,Te,zi,Se,Cs,ae,at,le,ji,Ce,Ts,Ne,Ms,Ve,Wi,We,Ls;Object.defineProperty(T,"__esModule",{value:!0}),T.PagesCountLimit=T.PDFViewer=T.PDFPageViewBuffer=void 0;var a=C(5),l=C(4),L=C(31),S=C(32),w=C(25),e=C(11);const r=10,d={FORCE_SCROLL_MODE_PAGE:15e3,FORCE_LAZY_PAGE_INIT:7500,PAUSE_EAGER_PAGE_INIT:250};T.PagesCountLimit=d;function m(Pe){return Object.values(a.AnnotationEditorType).includes(Pe)&&Pe!==a.AnnotationEditorType.DISABLE}class v{constructor(A){R(this,n);R(this,b,new Set);R(this,i,0);ie(this,i,A)}push(A){const H=t(this,b);H.has(A)&&H.delete(A),H.add(A),H.size>t(this,i)&&D(this,n,Hi).call(this)}resize(A,H=null){ie(this,i,A);const be=t(this,b);if(H){const Q=be.size;let he=1;for(const se of be)if(H.has(se.id)&&(be.delete(se),be.add(se)),++he>Q)break}for(;be.size>t(this,i);)D(this,n,Hi).call(this)}has(A){return t(this,b).has(A)}[Symbol.iterator](){return t(this,b).keys()}}b=new WeakMap,i=new WeakMap,n=new WeakSet,Hi=function(){const A=t(this,b).keys().next().value;A==null||A.destroy(),t(this,b).delete(A)},T.PDFPageViewBuffer=v;class f{constructor(A){R(this,P);R(this,p);R(this,U);R(this,Y);R(this,_e);R(this,ne);R(this,ye);R(this,Te);R(this,Se);R(this,ae);R(this,le);R(this,Ce);R(this,Ne);R(this,Ve);R(this,We);R(this,c,null);R(this,o,a.AnnotationEditorType.NONE);R(this,h,null);R(this,g,a.AnnotationMode.ENABLE_FORMS);R(this,x,null);R(this,j,null);R(this,V,!1);R(this,E,!1);R(this,O,null);R(this,y,!1);R(this,B,0);R(this,$,new ResizeObserver(D(this,We,Ls).bind(this)));R(this,I,null);R(this,ce,null);R(this,we,null);R(this,q,l.TextLayerMode.ENABLE);var be,Q;const H="3.10.0";if(a.version!==H)throw new Error(`The API version "${a.version}" does not match the Viewer version "${H}".`);if(this.container=A.container,this.viewer=A.viewer||A.container.firstElementChild,((be=this.container)==null?void 0:be.tagName)!=="DIV"||((Q=this.viewer)==null?void 0:Q.tagName)!=="DIV")throw new Error("Invalid `container` and/or `viewer` option.");if(this.container.offsetParent&&getComputedStyle(this.container).position!=="absolute")throw new Error("The `container` must be absolutely positioned.");t(this,$).observe(this.container),this.eventBus=A.eventBus,this.linkService=A.linkService||new e.SimpleLinkService,this.downloadManager=A.downloadManager||null,this.findController=A.findController||null,this.findController&&(this.findController.onIsPageVisible=he=>this._getVisiblePages().ids.has(he)),this._scriptingManager=A.scriptingManager||null,ie(this,q,A.textLayerMode??l.TextLayerMode.ENABLE),ie(this,g,A.annotationMode??a.AnnotationMode.ENABLE_FORMS),ie(this,o,A.annotationEditorMode??a.AnnotationEditorType.NONE),this.imageResourcesPath=A.imageResourcesPath||"",this.enablePrintAutoRotate=A.enablePrintAutoRotate||!1,this.removePageBorders=A.removePageBorders||!1,A.useOnlyCssZoom&&(console.error("useOnlyCssZoom was removed, please use `maxCanvasPixels = 0` instead."),A.maxCanvasPixels=0),this.isOffscreenCanvasSupported=A.isOffscreenCanvasSupported??!0,this.maxCanvasPixels=A.maxCanvasPixels,this.l10n=A.l10n||L.NullL10n,ie(this,V,A.enablePermissions||!1),this.pageColors=A.pageColors||null,this.defaultRenderingQueue=!A.renderingQueue,this.defaultRenderingQueue?(this.renderingQueue=new w.PDFRenderingQueue,this.renderingQueue.setViewer(this)):this.renderingQueue=A.renderingQueue,this.scroll=(0,l.watchScroll)(this.container,this._scrollUpdate.bind(this)),this.presentationModeState=l.PresentationModeState.UNKNOWN,this._onBeforeDraw=this._onAfterDraw=null,this._resetView(),this.removePageBorders&&this.viewer.classList.add("removePageBorders"),D(this,Ve,Wi).call(this),this.eventBus._on("thumbnailrendered",({pageNumber:he,pdfPage:se})=>{const ge=this._pages[he-1];t(this,c).has(ge)||se==null||se.cleanup()})}get pagesCount(){return this._pages.length}getPageView(A){return this._pages[A]}getCachedPageViews(){return new Set(t(this,c))}get pageViewsReady(){return this._pagesCapability.settled&&this._pages.every(A=>A==null?void 0:A.pdfPage)}get renderForms(){return t(this,g)===a.AnnotationMode.ENABLE_FORMS}get enableScripting(){return!!this._scriptingManager}get currentPageNumber(){return this._currentPageNumber}set currentPageNumber(A){if(!Number.isInteger(A))throw new Error("Invalid page number.");this.pdfDocument&&(this._setCurrentPageNumber(A,!0)||console.error(`currentPageNumber: "${A}" is not a valid page.`))}_setCurrentPageNumber(A,H=!1){var Q;if(this._currentPageNumber===A)return H&&D(this,le,ji).call(this),!0;if(!(0<A&&A<=this.pagesCount))return!1;const be=this._currentPageNumber;return this._currentPageNumber=A,this.eventBus.dispatch("pagechanging",{source:this,pageNumber:A,pageLabel:((Q=this._pageLabels)==null?void 0:Q[A-1])??null,previous:be}),H&&D(this,le,ji).call(this),!0}get currentPageLabel(){var A;return((A=this._pageLabels)==null?void 0:A[this._currentPageNumber-1])??null}set currentPageLabel(A){if(!this.pdfDocument)return;let H=A|0;if(this._pageLabels){const be=this._pageLabels.indexOf(A);be>=0&&(H=be+1)}this._setCurrentPageNumber(H,!0)||console.error(`currentPageLabel: "${A}" is not a valid page.`)}get currentScale(){return this._currentScale!==l.UNKNOWN_SCALE?this._currentScale:l.DEFAULT_SCALE}set currentScale(A){if(isNaN(A))throw new Error("Invalid numeric scale.");this.pdfDocument&&D(this,ae,at).call(this,A,{noScroll:!1})}get currentScaleValue(){return this._currentScaleValue}set currentScaleValue(A){this.pdfDocument&&D(this,ae,at).call(this,A,{noScroll:!1})}get pagesRotation(){return this._pagesRotation}set pagesRotation(A){if(!(0,l.isValidRotation)(A))throw new Error("Invalid pages rotation angle.");if(!this.pdfDocument||(A%=360,A<0&&(A+=360),this._pagesRotation===A))return;this._pagesRotation=A;const H=this._currentPageNumber;this.refresh(!0,{rotation:A}),this._currentScaleValue&&D(this,ae,at).call(this,this._currentScaleValue,{noScroll:!0}),this.eventBus.dispatch("rotationchanging",{source:this,pagesRotation:A,pageNumber:H}),this.defaultRenderingQueue&&this.update()}get firstPagePromise(){return this.pdfDocument?this._firstPageCapability.promise:null}get onePageRendered(){return this.pdfDocument?this._onePageRenderedCapability.promise:null}get pagesPromise(){return this.pdfDocument?this._pagesCapability.promise:null}async getAllText(){const A=[],H=[];for(let be=1,Q=this.pdfDocument.numPages;be<=Q;++be){if(t(this,y))return null;H.length=0;const he=await this.pdfDocument.getPage(be),{items:se}=await he.getTextContent();for(const ge of se)ge.str&&H.push(ge.str),ge.hasEOL&&H.push(`
`);A.push((0,l.removeNullCharacters)(H.join("")))}return A.join(`
`)}setDocument(A){var se,ge;if(this.pdfDocument&&(this.eventBus.dispatch("pagesdestroy",{source:this}),this._cancelRendering(),this._resetView(),(se=this.findController)==null||se.setDocument(null),(ge=this._scriptingManager)==null||ge.setDocument(null),t(this,h)&&(t(this,h).destroy(),ie(this,h,null))),this.pdfDocument=A,!A)return;const H=A.numPages,be=A.getPage(1),Q=A.getOptionalContentConfig(),he=t(this,V)?A.getPermissions():Promise.resolve();if(H>d.FORCE_SCROLL_MODE_PAGE){console.warn("Forcing PAGE-scrolling for performance reasons, given the length of the document.");const _=this._scrollMode=l.ScrollMode.PAGE;this.eventBus.dispatch("scrollmodechanged",{source:this,mode:_})}this._pagesCapability.promise.then(()=>{this.eventBus.dispatch("pagesloaded",{source:this,pagesCount:H})},()=>{}),this._onBeforeDraw=_=>{const K=this._pages[_.pageNumber-1];K&&t(this,c).push(K)},this.eventBus._on("pagerender",this._onBeforeDraw),this._onAfterDraw=_=>{_.cssTransform||this._onePageRenderedCapability.settled||(this._onePageRenderedCapability.resolve({timestamp:_.timestamp}),this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null,t(this,ce)&&(document.removeEventListener("visibilitychange",t(this,ce)),ie(this,ce,null)))},this.eventBus._on("pagerendered",this._onAfterDraw),Promise.all([be,he]).then(([_,K])=>{var Le,Fe;if(A!==this.pdfDocument)return;this._firstPageCapability.resolve(_),this._optionalContentConfigPromise=Q;const{annotationEditorMode:ue,annotationMode:re,textLayerMode:k}=D(this,p,Ss).call(this,K);if(k!==l.TextLayerMode.DISABLE){const Re=ie(this,O,document.createElement("div"));Re.id="hiddenCopyElement",this.viewer.before(Re)}if(ue!==a.AnnotationEditorType.DISABLE){const Re=ue;A.isPureXfa?console.warn("Warning: XFA-editing is not implemented."):m(Re)?(ie(this,h,new a.AnnotationEditorUIManager(this.container,this.eventBus,A,this.pageColors)),Re!==a.AnnotationEditorType.NONE&&t(this,h).updateMode(Re)):console.error(`Invalid AnnotationEditor mode: ${Re}`)}const M=D(this,P,ys).bind(this),W=this._scrollMode===l.ScrollMode.PAGE?null:this.viewer,G=this.currentScale,te=_.getViewport({scale:G*a.PixelsPerInch.PDF_TO_CSS_UNITS});this.viewer.style.setProperty("--scale-factor",te.scale),(((Le=this.pageColors)==null?void 0:Le.foreground)==="CanvasText"||((Fe=this.pageColors)==null?void 0:Fe.background)==="Canvas")&&this.viewer.style.setProperty("--hcm-highligh-filter",A.filterFactory.addHighlightHCMFilter("CanvasText","Canvas","HighlightText","Highlight"));for(let Re=1;Re<=H;++Re){const ke=new S.PDFPageView({container:W,eventBus:this.eventBus,id:Re,scale:G,defaultViewport:te.clone(),optionalContentConfigPromise:Q,renderingQueue:this.renderingQueue,textLayerMode:k,annotationMode:re,imageResourcesPath:this.imageResourcesPath,isOffscreenCanvasSupported:this.isOffscreenCanvasSupported,maxCanvasPixels:this.maxCanvasPixels,pageColors:this.pageColors,l10n:this.l10n,layerProperties:M});this._pages.push(ke)}const ve=this._pages[0];ve&&(ve.setPdfPage(_),this.linkService.cachePageRef(1,_.ref)),this._scrollMode===l.ScrollMode.PAGE?D(this,_e,Mt).call(this):this._spreadMode!==l.SpreadMode.NONE&&this._updateSpreadMode(),D(this,U,Es).call(this).then(async()=>{var ke,He;if((ke=this.findController)==null||ke.setDocument(A),(He=this._scriptingManager)==null||He.setDocument(A),t(this,O)&&(ie(this,j,D(this,Y,As).bind(this,k)),document.addEventListener("copy",t(this,j))),t(this,h)&&this.eventBus.dispatch("annotationeditormodechanged",{source:this,mode:t(this,o)}),A.loadingParams.disableAutoFetch||H>d.FORCE_LAZY_PAGE_INIT){this._pagesCapability.resolve();return}let Re=H-1;if(Re<=0){this._pagesCapability.resolve();return}for(let De=2;De<=H;++De){const Be=A.getPage(De).then(je=>{const Xe=this._pages[De-1];Xe.pdfPage||Xe.setPdfPage(je),this.linkService.cachePageRef(De,je.ref),--Re===0&&this._pagesCapability.resolve()},je=>{console.error(`Unable to get page ${De} to initialize viewer`,je),--Re===0&&this._pagesCapability.resolve()});De%d.PAUSE_EAGER_PAGE_INIT===0&&await Be}}),this.eventBus.dispatch("pagesinit",{source:this}),A.getMetadata().then(({info:Re})=>{A===this.pdfDocument&&Re.Language&&(this.viewer.lang=Re.Language)}),this.defaultRenderingQueue&&this.update()}).catch(_=>{console.error("Unable to initialize viewer",_),this._pagesCapability.reject(_)})}setPageLabels(A){var H;if(this.pdfDocument){A?Array.isArray(A)&&this.pdfDocument.numPages===A.length?this._pageLabels=A:(this._pageLabels=null,console.error("setPageLabels: Invalid page labels.")):this._pageLabels=null;for(let be=0,Q=this._pages.length;be<Q;be++)this._pages[be].setPageLabel(((H=this._pageLabels)==null?void 0:H[be])??null)}}_resetView(){this._pages=[],this._currentPageNumber=1,this._currentScale=l.UNKNOWN_SCALE,this._currentScaleValue=null,this._pageLabels=null,ie(this,c,new v(r)),this._location=null,this._pagesRotation=0,this._optionalContentConfigPromise=null,this._firstPageCapability=new a.PromiseCapability,this._onePageRenderedCapability=new a.PromiseCapability,this._pagesCapability=new a.PromiseCapability,this._scrollMode=l.ScrollMode.VERTICAL,this._previousScrollMode=l.ScrollMode.UNKNOWN,this._spreadMode=l.SpreadMode.NONE,ie(this,I,{previousPageNumber:1,scrollDown:!0,pages:[]}),this._onBeforeDraw&&(this.eventBus._off("pagerender",this._onBeforeDraw),this._onBeforeDraw=null),this._onAfterDraw&&(this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null),t(this,ce)&&(document.removeEventListener("visibilitychange",t(this,ce)),ie(this,ce,null)),this.viewer.textContent="",this._updateScrollMode(),this.viewer.removeAttribute("lang"),t(this,O)&&(document.removeEventListener("copy",t(this,j)),ie(this,j,null),t(this,O).remove(),ie(this,O,null))}_scrollUpdate(){this.pagesCount!==0&&this.update()}pageLabelToPageNumber(A){if(!this._pageLabels)return null;const H=this._pageLabels.indexOf(A);return H<0?null:H+1}scrollPageIntoView({pageNumber:A,destArray:H=null,allowNegativeOffset:be=!1,ignoreDestinationZoom:Q=!1}){if(!this.pdfDocument)return;const he=Number.isInteger(A)&&this._pages[A-1];if(!he){console.error(`scrollPageIntoView: "${A}" is not a valid pageNumber parameter.`);return}if(this.isInPresentationMode||!H){this._setCurrentPageNumber(A,!0);return}let se=0,ge=0,_=0,K=0,ue,re;const k=he.rotation%180!==0,M=(k?he.height:he.width)/he.scale/a.PixelsPerInch.PDF_TO_CSS_UNITS,W=(k?he.width:he.height)/he.scale/a.PixelsPerInch.PDF_TO_CSS_UNITS;let G=0;switch(H[1].name){case"XYZ":se=H[2],ge=H[3],G=H[4],se=se!==null?se:0,ge=ge!==null?ge:W;break;case"Fit":case"FitB":G="page-fit";break;case"FitH":case"FitBH":ge=H[2],G="page-width",ge===null&&this._location?(se=this._location.left,ge=this._location.top):(typeof ge!="number"||ge<0)&&(ge=W);break;case"FitV":case"FitBV":se=H[2],_=M,K=W,G="page-height";break;case"FitR":se=H[2],ge=H[3],_=H[4]-se,K=H[5]-ge;let Fe=l.SCROLLBAR_PADDING,Re=l.VERTICAL_PADDING;this.removePageBorders&&(Fe=Re=0),ue=(this.container.clientWidth-Fe)/_/a.PixelsPerInch.PDF_TO_CSS_UNITS,re=(this.container.clientHeight-Re)/K/a.PixelsPerInch.PDF_TO_CSS_UNITS,G=Math.min(Math.abs(ue),Math.abs(re));break;default:console.error(`scrollPageIntoView: "${H[1].name}" is not a valid destination type.`);return}if(Q||(G&&G!==this._currentScale?this.currentScaleValue=G:this._currentScale===l.UNKNOWN_SCALE&&(this.currentScaleValue=l.DEFAULT_SCALE_VALUE)),G==="page-fit"&&!H[4]){D(this,ne,zt).call(this,he);return}const te=[he.viewport.convertToViewportPoint(se,ge),he.viewport.convertToViewportPoint(se+_,ge+K)];let ve=Math.min(te[0][0],te[1][0]),Le=Math.min(te[0][1],te[1][1]);be||(ve=Math.max(ve,0),Le=Math.max(Le,0)),D(this,ne,zt).call(this,he,{left:ve,top:Le})}_updateLocation(A){const H=this._currentScale,be=this._currentScaleValue,Q=parseFloat(be)===H?Math.round(H*1e4)/100:be,he=A.id,se=this._pages[he-1],ge=this.container,_=se.getPagePoint(ge.scrollLeft-A.x,ge.scrollTop-A.y),K=Math.round(_[0]),ue=Math.round(_[1]);let re=`#page=${he}`;this.isInPresentationMode||(re+=`&zoom=${Q},${K},${ue}`),this._location={pageNumber:he,scale:Q,top:ue,left:K,rotation:this._pagesRotation,pdfOpenParams:re}}update(){const A=this._getVisiblePages(),H=A.views,be=H.length;if(be===0)return;const Q=Math.max(r,2*be+1);t(this,c).resize(Q,A.ids),this.renderingQueue.renderHighestPriority(A);const he=this._spreadMode===l.SpreadMode.NONE&&(this._scrollMode===l.ScrollMode.PAGE||this._scrollMode===l.ScrollMode.VERTICAL),se=this._currentPageNumber;let ge=!1;for(const _ of H){if(_.percent<100)break;if(_.id===se&&he){ge=!0;break}}this._setCurrentPageNumber(ge?se:H[0].id),this._updateLocation(A.first),this.eventBus.dispatch("updateviewarea",{source:this,location:this._location})}containsElement(A){return this.container.contains(A)}focus(){this.container.focus()}get _isContainerRtl(){return getComputedStyle(this.container).direction==="rtl"}get isInPresentationMode(){return this.presentationModeState===l.PresentationModeState.FULLSCREEN}get isChangingPresentationMode(){return this.presentationModeState===l.PresentationModeState.CHANGING}get isHorizontalScrollbarEnabled(){return this.isInPresentationMode?!1:this.container.scrollWidth>this.container.clientWidth}get isVerticalScrollbarEnabled(){return this.isInPresentationMode?!1:this.container.scrollHeight>this.container.clientHeight}_getVisiblePages(){const A=this._scrollMode===l.ScrollMode.PAGE?t(this,I).pages:this._pages,H=this._scrollMode===l.ScrollMode.HORIZONTAL,be=H&&this._isContainerRtl;return(0,l.getVisibleElements)({scrollEl:this.container,views:A,sortByVisibility:!0,horizontal:H,rtl:be})}cleanup(){for(const A of this._pages)A.renderingState!==l.RenderingStates.FINISHED&&A.reset()}_cancelRendering(){for(const A of this._pages)A.cancelRendering()}forceRendering(A){const H=A||this._getVisiblePages(),be=D(this,Ne,Ms).call(this,H),Q=this._spreadMode!==l.SpreadMode.NONE&&this._scrollMode!==l.ScrollMode.HORIZONTAL,he=this.renderingQueue.getHighestPriority(H,this._pages,be,Q);return he?(D(this,Ce,Ts).call(this,he).then(()=>{this.renderingQueue.renderView(he)}),!0):!1}get hasEqualPageSizes(){const A=this._pages[0];for(let H=1,be=this._pages.length;H<be;++H){const Q=this._pages[H];if(Q.width!==A.width||Q.height!==A.height)return!1}return!0}getPagesOverview(){let A;return this._pages.map(H=>{const be=H.pdfPage.getViewport({scale:1}),Q=(0,l.isPortraitOrientation)(be);if(A===void 0)A=Q;else if(this.enablePrintAutoRotate&&Q!==A)return{width:be.height,height:be.width,rotation:(be.rotation-90)%360};return{width:be.width,height:be.height,rotation:be.rotation}})}get optionalContentConfigPromise(){return this.pdfDocument?this._optionalContentConfigPromise?this._optionalContentConfigPromise:(console.error("optionalContentConfigPromise: Not initialized yet."),this.pdfDocument.getOptionalContentConfig()):Promise.resolve(null)}set optionalContentConfigPromise(A){if(!(A instanceof Promise))throw new Error(`Invalid optionalContentConfigPromise: ${A}`);this.pdfDocument&&this._optionalContentConfigPromise&&(this._optionalContentConfigPromise=A,this.refresh(!1,{optionalContentConfigPromise:A}),this.eventBus.dispatch("optionalcontentconfigchanged",{source:this,promise:A}))}get scrollMode(){return this._scrollMode}set scrollMode(A){if(this._scrollMode!==A){if(!(0,l.isValidScrollMode)(A))throw new Error(`Invalid scroll mode: ${A}`);this.pagesCount>d.FORCE_SCROLL_MODE_PAGE||(this._previousScrollMode=this._scrollMode,this._scrollMode=A,this.eventBus.dispatch("scrollmodechanged",{source:this,mode:A}),this._updateScrollMode(this._currentPageNumber))}}_updateScrollMode(A=null){const H=this._scrollMode,be=this.viewer;be.classList.toggle("scrollHorizontal",H===l.ScrollMode.HORIZONTAL),be.classList.toggle("scrollWrapped",H===l.ScrollMode.WRAPPED),!(!this.pdfDocument||!A)&&(H===l.ScrollMode.PAGE?D(this,_e,Mt).call(this):this._previousScrollMode===l.ScrollMode.PAGE&&this._updateSpreadMode(),this._currentScaleValue&&isNaN(this._currentScaleValue)&&D(this,ae,at).call(this,this._currentScaleValue,{noScroll:!0}),this._setCurrentPageNumber(A,!0),this.update())}get spreadMode(){return this._spreadMode}set spreadMode(A){if(this._spreadMode!==A){if(!(0,l.isValidSpreadMode)(A))throw new Error(`Invalid spread mode: ${A}`);this._spreadMode=A,this.eventBus.dispatch("spreadmodechanged",{source:this,mode:A}),this._updateSpreadMode(this._currentPageNumber)}}_updateSpreadMode(A=null){if(!this.pdfDocument)return;const H=this.viewer,be=this._pages;if(this._scrollMode===l.ScrollMode.PAGE)D(this,_e,Mt).call(this);else if(H.textContent="",this._spreadMode===l.SpreadMode.NONE)for(const Q of this._pages)H.append(Q.div);else{const Q=this._spreadMode-1;let he=null;for(let se=0,ge=be.length;se<ge;++se)he===null?(he=document.createElement("div"),he.className="spread",H.append(he)):se%2===Q&&(he=he.cloneNode(!1),H.append(he)),he.append(be[se].div)}A&&(this._currentScaleValue&&isNaN(this._currentScaleValue)&&D(this,ae,at).call(this,this._currentScaleValue,{noScroll:!0}),this._setCurrentPageNumber(A,!0),this.update())}_getPageAdvance(A,H=!1){switch(this._scrollMode){case l.ScrollMode.WRAPPED:{const{views:be}=this._getVisiblePages(),Q=new Map;for(const{id:he,y:se,percent:ge,widthPercent:_}of be){if(ge===0||_<100)continue;let K=Q.get(se);K||Q.set(se,K||(K=[])),K.push(he)}for(const he of Q.values()){const se=he.indexOf(A);if(se===-1)continue;const ge=he.length;if(ge===1)break;if(H)for(let _=se-1,K=0;_>=K;_--){const ue=he[_],re=he[_+1]-1;if(ue<re)return A-re}else for(let _=se+1,K=ge;_<K;_++){const ue=he[_],re=he[_-1]+1;if(ue>re)return re-A}if(H){const _=he[0];if(_<A)return A-_+1}else{const _=he[ge-1];if(_>A)return _-A+1}break}break}case l.ScrollMode.HORIZONTAL:break;case l.ScrollMode.PAGE:case l.ScrollMode.VERTICAL:{if(this._spreadMode===l.SpreadMode.NONE)break;const be=this._spreadMode-1;if(H&&A%2!==be)break;if(!H&&A%2===be)break;const{views:Q}=this._getVisiblePages(),he=H?A-1:A+1;for(const{id:se,percent:ge,widthPercent:_}of Q)if(se===he){if(ge>0&&_===100)return 2;break}break}}return 1}nextPage(){const A=this._currentPageNumber,H=this.pagesCount;if(A>=H)return!1;const be=this._getPageAdvance(A,!1)||1;return this.currentPageNumber=Math.min(A+be,H),!0}previousPage(){const A=this._currentPageNumber;if(A<=1)return!1;const H=this._getPageAdvance(A,!0)||1;return this.currentPageNumber=Math.max(A-H,1),!0}increaseScale({drawingDelay:A,scaleFactor:H,steps:be}={}){if(!this.pdfDocument)return;let Q=this._currentScale;if(H>1)Q=Math.round(Q*H*100)/100;else{be??(be=1);do Q=Math.ceil((Q*l.DEFAULT_SCALE_DELTA).toFixed(2)*10)/10;while(--be>0&&Q<l.MAX_SCALE)}D(this,ae,at).call(this,Math.min(l.MAX_SCALE,Q),{noScroll:!1,drawingDelay:A})}decreaseScale({drawingDelay:A,scaleFactor:H,steps:be}={}){if(!this.pdfDocument)return;let Q=this._currentScale;if(H>0&&H<1)Q=Math.round(Q*H*100)/100;else{be??(be=1);do Q=Math.floor((Q/l.DEFAULT_SCALE_DELTA).toFixed(2)*10)/10;while(--be>0&&Q>l.MIN_SCALE)}D(this,ae,at).call(this,Math.max(l.MIN_SCALE,Q),{noScroll:!1,drawingDelay:A})}get containerTopLeft(){return t(this,x)||ie(this,x,[this.container.offsetTop,this.container.offsetLeft])}get annotationEditorMode(){return t(this,h)?t(this,o):a.AnnotationEditorType.DISABLE}set annotationEditorMode({mode:A,editId:H=null}){if(!t(this,h))throw new Error("The AnnotationEditor is not enabled.");if(t(this,o)!==A){if(!m(A))throw new Error(`Invalid AnnotationEditor mode: ${A}`);this.pdfDocument&&(ie(this,o,A),this.eventBus.dispatch("annotationeditormodechanged",{source:this,mode:A}),t(this,h).updateMode(A,H))}}set annotationEditorParams({type:A,value:H}){if(!t(this,h))throw new Error("The AnnotationEditor is not enabled.");t(this,h).updateParams(A,H)}refresh(A=!1,H=Object.create(null)){if(this.pdfDocument){for(const be of this._pages)be.update(H);t(this,we)!==null&&(clearTimeout(t(this,we)),ie(this,we,null)),A||this.update()}}}c=new WeakMap,o=new WeakMap,h=new WeakMap,g=new WeakMap,x=new WeakMap,j=new WeakMap,V=new WeakMap,E=new WeakMap,O=new WeakMap,y=new WeakMap,B=new WeakMap,$=new WeakMap,I=new WeakMap,ce=new WeakMap,we=new WeakMap,q=new WeakMap,P=new WeakSet,ys=function(){const A=this;return{get annotationEditorUIManager(){return t(A,h)},get annotationStorage(){var H;return(H=A.pdfDocument)==null?void 0:H.annotationStorage},get downloadManager(){return A.downloadManager},get enableScripting(){return!!A._scriptingManager},get fieldObjectsPromise(){var H;return(H=A.pdfDocument)==null?void 0:H.getFieldObjects()},get findController(){return A.findController},get hasJSActionsPromise(){var H;return(H=A.pdfDocument)==null?void 0:H.hasJSActions()},get linkService(){return A.linkService}}},p=new WeakSet,Ss=function(A){const H={annotationEditorMode:t(this,o),annotationMode:t(this,g),textLayerMode:t(this,q)};return A&&(!A.includes(a.PermissionFlag.COPY)&&t(this,q)===l.TextLayerMode.ENABLE&&(H.textLayerMode=l.TextLayerMode.ENABLE_PERMISSIONS),A.includes(a.PermissionFlag.MODIFY_CONTENTS)||(H.annotationEditorMode=a.AnnotationEditorType.DISABLE),!A.includes(a.PermissionFlag.MODIFY_ANNOTATIONS)&&!A.includes(a.PermissionFlag.FILL_INTERACTIVE_FORMS)&&t(this,g)===a.AnnotationMode.ENABLE_FORMS&&(H.annotationMode=a.AnnotationMode.ENABLE)),H},U=new WeakSet,Es=function(){if(document.visibilityState==="hidden"||!this.container.offsetParent||this._getVisiblePages().views.length===0)return Promise.resolve();const A=new Promise(H=>{ie(this,ce,()=>{document.visibilityState==="hidden"&&(H(),document.removeEventListener("visibilitychange",t(this,ce)),ie(this,ce,null))}),document.addEventListener("visibilitychange",t(this,ce))});return Promise.race([this._onePageRenderedCapability.promise,A])},Y=new WeakSet,As=function(A,H){const be=document.getSelection(),{focusNode:Q,anchorNode:he}=be;if(he&&Q&&be.containsNode(t(this,O))){if(t(this,E)||A===l.TextLayerMode.ENABLE_PERMISSIONS){H.preventDefault(),H.stopPropagation();return}ie(this,E,!0);const se=this.container.style.cursor;this.container.style.cursor="wait";const ge=_=>ie(this,y,_.key==="Escape");window.addEventListener("keydown",ge),this.getAllText().then(async _=>{_!==null&&await navigator.clipboard.writeText(_)}).catch(_=>{console.warn(`Something goes wrong when extracting the text: ${_.message}`)}).finally(()=>{ie(this,E,!1),ie(this,y,!1),window.removeEventListener("keydown",ge),this.container.style.cursor=se}),H.preventDefault(),H.stopPropagation()}},_e=new WeakSet,Mt=function(){if(this._scrollMode!==l.ScrollMode.PAGE)throw new Error("#ensurePageViewVisible: Invalid scrollMode value.");const A=this._currentPageNumber,H=t(this,I),be=this.viewer;if(be.textContent="",H.pages.length=0,this._spreadMode===l.SpreadMode.NONE&&!this.isInPresentationMode){const Q=this._pages[A-1];be.append(Q.div),H.pages.push(Q)}else{const Q=new Set,he=this._spreadMode-1;he===-1?Q.add(A-1):A%2!==he?(Q.add(A-1),Q.add(A)):(Q.add(A-2),Q.add(A-1));const se=document.createElement("div");if(se.className="spread",this.isInPresentationMode){const ge=document.createElement("div");ge.className="dummyPage",se.append(ge)}for(const ge of Q){const _=this._pages[ge];_&&(se.append(_.div),H.pages.push(_))}be.append(se)}H.scrollDown=A>=H.previousPageNumber,H.previousPageNumber=A},ne=new WeakSet,zt=function(A,H=null){const{div:be,id:Q}=A;if(this._currentPageNumber!==Q&&this._setCurrentPageNumber(Q),this._scrollMode===l.ScrollMode.PAGE&&(D(this,_e,Mt).call(this),this.update()),!H&&!this.isInPresentationMode){const he=be.offsetLeft+be.clientLeft,se=he+be.clientWidth,{scrollLeft:ge,clientWidth:_}=this.container;(this._scrollMode===l.ScrollMode.HORIZONTAL||he<ge||se>ge+_)&&(H={left:0,top:0})}(0,l.scrollIntoView)(be,H),!this._currentScaleValue&&this._location&&(this._location=null)},ye=new WeakSet,Ps=function(A){return A===this._currentScale||Math.abs(A-this._currentScale)<1e-15},Te=new WeakSet,zi=function(A,H,{noScroll:be=!1,preset:Q=!1,drawingDelay:he=-1}){if(this._currentScaleValue=H.toString(),D(this,ye,Ps).call(this,A)){Q&&this.eventBus.dispatch("scalechanging",{source:this,scale:A,presetValue:H});return}this.viewer.style.setProperty("--scale-factor",A*a.PixelsPerInch.PDF_TO_CSS_UNITS);const se=he>=0&&he<1e3;if(this.refresh(!0,{scale:A,drawingDelay:se?he:-1}),se&&ie(this,we,setTimeout(()=>{ie(this,we,null),this.refresh()},he)),this._currentScale=A,!be){let ge=this._currentPageNumber,_;this._location&&!(this.isInPresentationMode||this.isChangingPresentationMode)&&(ge=this._location.pageNumber,_=[null,{name:"XYZ"},this._location.left,this._location.top,null]),this.scrollPageIntoView({pageNumber:ge,destArray:_,allowNegativeOffset:!0})}this.eventBus.dispatch("scalechanging",{source:this,scale:A,presetValue:Q?H:void 0}),this.defaultRenderingQueue&&this.update()},Se=new WeakSet,Cs=function(){return this._spreadMode!==l.SpreadMode.NONE&&this._scrollMode!==l.ScrollMode.HORIZONTAL?2:1},ae=new WeakSet,at=function(A,H){let be=parseFloat(A);if(be>0)H.preset=!1,D(this,Te,zi).call(this,be,A,H);else{const Q=this._pages[this._currentPageNumber-1];if(!Q)return;let he=l.SCROLLBAR_PADDING,se=l.VERTICAL_PADDING;this.isInPresentationMode?(he=se=4,this._spreadMode!==l.SpreadMode.NONE&&(he*=2)):this.removePageBorders?he=se=0:this._scrollMode===l.ScrollMode.HORIZONTAL&&([he,se]=[se,he]);const ge=(this.container.clientWidth-he)/Q.width*Q.scale/t(this,Se,Cs),_=(this.container.clientHeight-se)/Q.height*Q.scale;switch(A){case"page-actual":be=1;break;case"page-width":be=ge;break;case"page-height":be=_;break;case"page-fit":be=Math.min(ge,_);break;case"auto":const K=(0,l.isPortraitOrientation)(Q)?ge:Math.min(_,ge);be=Math.min(l.MAX_AUTO_SCALE,K);break;default:console.error(`#setScale: "${A}" is an unknown zoom value.`);return}H.preset=!0,D(this,Te,zi).call(this,be,A,H)}},le=new WeakSet,ji=function(){const A=this._pages[this._currentPageNumber-1];this.isInPresentationMode&&D(this,ae,at).call(this,this._currentScaleValue,{noScroll:!0}),D(this,ne,zt).call(this,A)},Ce=new WeakSet,Ts=async function(A){var H,be;if(A.pdfPage)return A.pdfPage;try{const Q=await this.pdfDocument.getPage(A.id);return A.pdfPage||A.setPdfPage(Q),(be=(H=this.linkService)._cachedPageNumber)!=null&&be.call(H,Q.ref)||this.linkService.cachePageRef(A.id,Q.ref),Q}catch(Q){return console.error("Unable to get page for page view",Q),null}},Ne=new WeakSet,Ms=function(A){var H,be;if(((H=A.first)==null?void 0:H.id)===1)return!0;if(((be=A.last)==null?void 0:be.id)===this.pagesCount)return!1;switch(this._scrollMode){case l.ScrollMode.PAGE:return t(this,I).scrollDown;case l.ScrollMode.HORIZONTAL:return this.scroll.right}return this.scroll.down},Ve=new WeakSet,Wi=function(A=this.container.clientHeight){A!==t(this,B)&&(ie(this,B,A),l.docStyle.setProperty("--viewer-container-height",`${A}px`))},We=new WeakSet,Ls=function(A){for(const H of A)if(H.target===this.container){D(this,Ve,Wi).call(this,Math.floor(H.borderBoxSize[0].blockSize)),ie(this,x,null);break}},T.PDFViewer=f},(oe,T)=>{Object.defineProperty(T,"__esModule",{value:!0}),T.NullL10n=void 0,T.getL10nFallback=a;const C={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} × {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} × {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing…",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image"};C.print_progress_percent="{{progress}}%";function a(S,w){switch(S){case"find_match_count":S=`find_match_count[${w.total===1?"one":"other"}]`;break;case"find_match_count_limit":S=`find_match_count_limit[${w.limit===1?"one":"other"}]`;break}return C[S]||""}function l(S,w){return w?S.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(e,r)=>r in w?w[r]:"{{"+r+"}}"):S}const L={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(S,w=null,e=a(S,w)){return l(e,w)},async translate(S){}};T.NullL10n=L},(oe,T,C)=>{var u,c,o,h,g,x,j,V,E,O,y,jt,$,Gi,ce,$i,q,Xi,s,qi,F,xs,X,Rs,ee,Ki;Object.defineProperty(T,"__esModule",{value:!0}),T.PDFPageView=void 0;var a=C(5),l=C(4),L=C(33),S=C(34),w=C(9),e=C(31);C(11);var r=C(35),d=C(36),m=C(37),v=C(38),f=C(39);const b=w.compatibilityParams.maxCanvasPixels||16777216,i=()=>null;class n{constructor(ne){R(this,y);R(this,$);R(this,ce);R(this,q);R(this,s);R(this,F);R(this,X);R(this,ee);R(this,u,a.AnnotationMode.ENABLE_FORMS);R(this,c,!1);R(this,o,null);R(this,h,null);R(this,g,null);R(this,x,null);R(this,j,l.RenderingStates.INITIAL);R(this,V,l.TextLayerMode.ENABLE);R(this,E,{directDrawing:!0,initialOptionalContent:!0,regularAnnotations:!0});R(this,O,new WeakMap);var Te;const de=ne.container,ye=ne.defaultViewport;this.id=ne.id,this.renderingId="page"+this.id,ie(this,o,ne.layerProperties||i),this.pdfPage=null,this.pageLabel=null,this.rotation=0,this.scale=ne.scale||l.DEFAULT_SCALE,this.viewport=ye,this.pdfPageRotate=ye.rotation,this._optionalContentConfigPromise=ne.optionalContentConfigPromise||null,ie(this,V,ne.textLayerMode??l.TextLayerMode.ENABLE),ie(this,u,ne.annotationMode??a.AnnotationMode.ENABLE_FORMS),this.imageResourcesPath=ne.imageResourcesPath||"",this.isOffscreenCanvasSupported=ne.isOffscreenCanvasSupported??!0,this.maxCanvasPixels=ne.maxCanvasPixels??b,this.pageColors=ne.pageColors||null,this.eventBus=ne.eventBus,this.renderingQueue=ne.renderingQueue,this.l10n=ne.l10n||e.NullL10n,this.renderTask=null,this.resume=null,this._isStandalone=!((Te=this.renderingQueue)!=null&&Te.hasViewer()),this._container=de,ne.useOnlyCssZoom&&(console.error("useOnlyCssZoom was removed, please use `maxCanvasPixels = 0` instead."),this.maxCanvasPixels=0),this._annotationCanvasMap=null,this.annotationLayer=null,this.annotationEditorLayer=null,this.textLayer=null,this.zoomLayer=null,this.xfaLayer=null,this.structTreeLayer=null;const me=document.createElement("div");if(me.className="page",me.setAttribute("data-page-number",this.id),me.setAttribute("role","region"),this.l10n.get("page_landmark",{page:this.id}).then(Ie=>{me.setAttribute("aria-label",Ie)}),this.div=me,D(this,y,jt).call(this),de==null||de.append(me),this._isStandalone){de==null||de.style.setProperty("--scale-factor",this.scale*a.PixelsPerInch.PDF_TO_CSS_UNITS);const{optionalContentConfigPromise:Ie}=ne;Ie&&Ie.then(Se=>{Ie===this._optionalContentConfigPromise&&(t(this,E).initialOptionalContent=Se.hasInitialVisibility)})}}get renderingState(){return t(this,j)}set renderingState(ne){if(ne!==t(this,j))switch(ie(this,j,ne),t(this,h)&&(clearTimeout(t(this,h)),ie(this,h,null)),ne){case l.RenderingStates.PAUSED:this.div.classList.remove("loading");break;case l.RenderingStates.RUNNING:this.div.classList.add("loadingIcon"),ie(this,h,setTimeout(()=>{this.div.classList.add("loading"),ie(this,h,null)},0));break;case l.RenderingStates.INITIAL:case l.RenderingStates.FINISHED:this.div.classList.remove("loadingIcon","loading");break}}setPdfPage(ne){var ye,me,Te;this._isStandalone&&(((ye=this.pageColors)==null?void 0:ye.foreground)==="CanvasText"||((me=this.pageColors)==null?void 0:me.background)==="Canvas")&&((Te=this._container)==null||Te.style.setProperty("--hcm-highligh-filter",ne.filterFactory.addHighlightHCMFilter("CanvasText","Canvas","HighlightText","Highlight"))),this.pdfPage=ne,this.pdfPageRotate=ne.rotate;const de=(this.rotation+this.pdfPageRotate)%360;this.viewport=ne.getViewport({scale:this.scale*a.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:de}),D(this,y,jt).call(this),this.reset()}destroy(){var ne;this.reset(),(ne=this.pdfPage)==null||ne.cleanup()}get _textHighlighter(){return(0,a.shadow)(this,"_textHighlighter",new m.TextHighlighter({pageIndex:this.id-1,eventBus:this.eventBus,findController:t(this,o).call(this).findController}))}_resetZoomLayer(ne=!1){if(!this.zoomLayer)return;const de=this.zoomLayer.firstChild;t(this,O).delete(de),de.width=0,de.height=0,ne&&this.zoomLayer.remove(),this.zoomLayer=null}reset({keepZoomLayer:ne=!1,keepAnnotationLayer:de=!1,keepAnnotationEditorLayer:ye=!1,keepXfaLayer:me=!1,keepTextLayer:Te=!1}={}){var Ce,Me,Ne,Ue,Ve;this.cancelRendering({keepAnnotationLayer:de,keepAnnotationEditorLayer:ye,keepXfaLayer:me,keepTextLayer:Te}),this.renderingState=l.RenderingStates.INITIAL;const Ie=this.div,Se=Ie.childNodes,Oe=ne&&this.zoomLayer||null,ae=de&&((Ce=this.annotationLayer)==null?void 0:Ce.div)||null,J=ye&&((Me=this.annotationEditorLayer)==null?void 0:Me.div)||null,le=me&&((Ne=this.xfaLayer)==null?void 0:Ne.div)||null,fe=Te&&((Ue=this.textLayer)==null?void 0:Ue.div)||null;for(let Ge=Se.length-1;Ge>=0;Ge--){const We=Se[Ge];switch(We){case Oe:case ae:case J:case le:case fe:continue}We.remove()}Ie.removeAttribute("data-loaded"),ae&&this.annotationLayer.hide(),J&&this.annotationEditorLayer.hide(),le&&this.xfaLayer.hide(),fe&&this.textLayer.hide(),(Ve=this.structTreeLayer)==null||Ve.hide(),Oe||(this.canvas&&(t(this,O).delete(this.canvas),this.canvas.width=0,this.canvas.height=0,delete this.canvas),this._resetZoomLayer())}update({scale:ne=0,rotation:de=null,optionalContentConfigPromise:ye=null,drawingDelay:me=-1}){var Ie;this.scale=ne||this.scale,typeof de=="number"&&(this.rotation=de),ye instanceof Promise&&(this._optionalContentConfigPromise=ye,ye.then(Se=>{ye===this._optionalContentConfigPromise&&(t(this,E).initialOptionalContent=Se.hasInitialVisibility)})),t(this,E).directDrawing=!0;const Te=(this.rotation+this.pdfPageRotate)%360;if(this.viewport=this.viewport.clone({scale:this.scale*a.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:Te}),D(this,y,jt).call(this),this._isStandalone&&((Ie=this._container)==null||Ie.style.setProperty("--scale-factor",this.viewport.scale)),this.canvas){let Se=!1;if(t(this,c)){if(this.maxCanvasPixels===0)Se=!0;else if(this.maxCanvasPixels>0){const{width:ae,height:J}=this.viewport,{sx:le,sy:fe}=this.outputScale;Se=(Math.floor(ae)*le|0)*(Math.floor(J)*fe|0)>this.maxCanvasPixels}}const Oe=!Se&&me>=0&&me<1e3;if(Oe||Se){if(Oe&&this.renderingState!==l.RenderingStates.FINISHED&&(this.cancelRendering({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0,cancelExtraDelay:me}),this.renderingState=l.RenderingStates.FINISHED,t(this,E).directDrawing=!1),this.cssTransform({target:this.canvas,redrawAnnotationLayer:!0,redrawAnnotationEditorLayer:!0,redrawXfaLayer:!0,redrawTextLayer:!Oe,hideTextLayer:Oe}),Oe)return;this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:t(this,x)});return}!this.zoomLayer&&!this.canvas.hidden&&(this.zoomLayer=this.canvas.parentNode,this.zoomLayer.style.position="absolute")}this.zoomLayer&&this.cssTransform({target:this.zoomLayer.firstChild}),this.reset({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0})}cancelRendering({keepAnnotationLayer:ne=!1,keepAnnotationEditorLayer:de=!1,keepXfaLayer:ye=!1,keepTextLayer:me=!1,cancelExtraDelay:Te=0}={}){var Ie;this.renderTask&&(this.renderTask.cancel(Te),this.renderTask=null),this.resume=null,this.textLayer&&(!me||!this.textLayer.div)&&(this.textLayer.cancel(),this.textLayer=null),this.structTreeLayer&&!this.textLayer&&(this.structTreeLayer=null),this.annotationLayer&&(!ne||!this.annotationLayer.div)&&(this.annotationLayer.cancel(),this.annotationLayer=null,this._annotationCanvasMap=null),this.annotationEditorLayer&&(!de||!this.annotationEditorLayer.div)&&(this.annotationEditorLayer.cancel(),this.annotationEditorLayer=null),this.xfaLayer&&(!ye||!this.xfaLayer.div)&&(this.xfaLayer.cancel(),this.xfaLayer=null,(Ie=this._textHighlighter)==null||Ie.disable())}cssTransform({target:ne,redrawAnnotationLayer:de=!1,redrawAnnotationEditorLayer:ye=!1,redrawXfaLayer:me=!1,redrawTextLayer:Te=!1,hideTextLayer:Ie=!1}){var Oe;if(!ne.hasAttribute("zooming")){ne.setAttribute("zooming",!0);const{style:ae}=ne;ae.width=ae.height=""}const Se=t(this,O).get(ne);if(this.viewport!==Se){const ae=this.viewport.rotation-Se.rotation,J=Math.abs(ae);let le=1,fe=1;if(J===90||J===270){const{width:Ce,height:Me}=this.viewport;le=Me/Ce,fe=Ce/Me}ne.style.transform=`rotate(${ae}deg) scale(${le}, ${fe})`}de&&this.annotationLayer&&D(this,$,Gi).call(this),ye&&this.annotationEditorLayer&&D(this,ce,$i).call(this),me&&this.xfaLayer&&D(this,q,Xi).call(this),this.textLayer&&(Ie?(this.textLayer.hide(),(Oe=this.structTreeLayer)==null||Oe.hide()):Te&&D(this,s,qi).call(this))}get width(){return this.viewport.width}get height(){return this.viewport.height}getPagePoint(ne,de){return this.viewport.convertToPdfPoint(ne,de)}async draw(){this.renderingState!==l.RenderingStates.INITIAL&&(console.error("Must be in new state before drawing"),this.reset());const{div:ne,l10n:de,pageColors:ye,pdfPage:me,viewport:Te}=this;if(!me)throw this.renderingState=l.RenderingStates.FINISHED,new Error("pdfPage is not loaded");this.renderingState=l.RenderingStates.RUNNING;const Ie=document.createElement("div");if(Ie.classList.add("canvasWrapper"),ne.append(Ie),!this.textLayer&&t(this,V)!==l.TextLayerMode.DISABLE&&!me.isPureXfa&&(this._accessibilityManager||(this._accessibilityManager=new d.TextAccessibilityManager),this.textLayer=new v.TextLayerBuilder({highlighter:this._textHighlighter,accessibilityManager:this._accessibilityManager,isOffscreenCanvasSupported:this.isOffscreenCanvasSupported,enablePermissions:t(this,V)===l.TextLayerMode.ENABLE_PERMISSIONS}),ne.append(this.textLayer.div)),!this.annotationLayer&&t(this,u)!==a.AnnotationMode.DISABLE){const{annotationStorage:A,downloadManager:H,enableScripting:be,fieldObjectsPromise:Q,hasJSActionsPromise:he,linkService:se}=t(this,o).call(this);this._annotationCanvasMap||(this._annotationCanvasMap=new Map),this.annotationLayer=new S.AnnotationLayerBuilder({pageDiv:ne,pdfPage:me,annotationStorage:A,imageResourcesPath:this.imageResourcesPath,renderForms:t(this,u)===a.AnnotationMode.ENABLE_FORMS,linkService:se,downloadManager:H,l10n:de,enableScripting:be,hasJSActionsPromise:he,fieldObjectsPromise:Q,annotationCanvasMap:this._annotationCanvasMap,accessibilityManager:this._accessibilityManager})}const Se=A=>{if(fe==null||fe(!1),this.renderingQueue&&!this.renderingQueue.isHighestPriority(this)){this.renderingState=l.RenderingStates.PAUSED,this.resume=()=>{this.renderingState=l.RenderingStates.RUNNING,A()};return}A()},{width:Oe,height:ae}=Te,J=document.createElement("canvas");J.setAttribute("role","presentation"),J.hidden=!0;const le=!!(ye!=null&&ye.background&&(ye!=null&&ye.foreground));let fe=A=>{(!le||A)&&(J.hidden=!1,fe=null)};Ie.append(J),this.canvas=J;const Ce=J.getContext("2d",{alpha:!1}),Me=this.outputScale=new l.OutputScale;if(this.maxCanvasPixels===0){const A=1/this.scale;Me.sx*=A,Me.sy*=A,ie(this,c,!0)}else if(this.maxCanvasPixels>0){const A=Oe*ae,H=Math.sqrt(this.maxCanvasPixels/A);Me.sx>H||Me.sy>H?(Me.sx=H,Me.sy=H,ie(this,c,!0)):ie(this,c,!1)}const Ne=(0,l.approximateFraction)(Me.sx),Ue=(0,l.approximateFraction)(Me.sy);J.width=(0,l.roundToDivide)(Oe*Me.sx,Ne[0]),J.height=(0,l.roundToDivide)(ae*Me.sy,Ue[0]);const{style:Ve}=J;Ve.width=(0,l.roundToDivide)(Oe,Ne[1])+"px",Ve.height=(0,l.roundToDivide)(ae,Ue[1])+"px",t(this,O).set(J,Te);const Ge=Me.scaled?[Me.sx,0,0,Me.sy,0,0]:null,We={canvasContext:Ce,transform:Ge,viewport:Te,annotationMode:t(this,u),optionalContentConfigPromise:this._optionalContentConfigPromise,annotationCanvasMap:this._annotationCanvasMap,pageColors:ye},ze=this.renderTask=this.pdfPage.render(We);ze.onContinue=Se;const Pe=ze.promise.then(async()=>{var A;if(fe==null||fe(!0),await D(this,ee,Ki).call(this,ze),D(this,s,qi).call(this),this.annotationLayer&&await D(this,$,Gi).call(this),!this.annotationEditorLayer){const{annotationEditorUIManager:H}=t(this,o).call(this);if(!H)return;this.annotationEditorLayer=new L.AnnotationEditorLayerBuilder({uiManager:H,pageDiv:ne,pdfPage:me,l10n:de,accessibilityManager:this._accessibilityManager,annotationLayer:(A=this.annotationLayer)==null?void 0:A.annotationLayer})}D(this,ce,$i).call(this)},A=>(A instanceof a.RenderingCancelledException||fe==null||fe(!0),D(this,ee,Ki).call(this,ze,A)));if(me.isPureXfa){if(this.xfaLayer)this.xfaLayer.div&&ne.append(this.xfaLayer.div);else{const{annotationStorage:A,linkService:H}=t(this,o).call(this);this.xfaLayer=new f.XfaLayerBuilder({pageDiv:ne,pdfPage:me,annotationStorage:A,linkService:H})}D(this,q,Xi).call(this)}return ne.setAttribute("data-loaded",!0),this.eventBus.dispatch("pagerender",{source:this,pageNumber:this.id}),Pe}setPageLabel(ne){this.pageLabel=typeof ne=="string"?ne:null,this.pageLabel!==null?this.div.setAttribute("data-page-label",this.pageLabel):this.div.removeAttribute("data-page-label")}get thumbnailCanvas(){const{directDrawing:ne,initialOptionalContent:de,regularAnnotations:ye}=t(this,E);return ne&&de&&ye?this.canvas:null}}u=new WeakMap,c=new WeakMap,o=new WeakMap,h=new WeakMap,g=new WeakMap,x=new WeakMap,j=new WeakMap,V=new WeakMap,E=new WeakMap,O=new WeakMap,y=new WeakSet,jt=function(){const{viewport:ne}=this;if(this.pdfPage){if(t(this,g)===ne.rotation)return;ie(this,g,ne.rotation)}(0,a.setLayerDimensions)(this.div,ne,!0,!1)},$=new WeakSet,Gi=async function(){let ne=null;try{await this.annotationLayer.render(this.viewport,"display")}catch(de){console.error(`#renderAnnotationLayer: "${de}".`),ne=de}finally{this.eventBus.dispatch("annotationlayerrendered",{source:this,pageNumber:this.id,error:ne})}},ce=new WeakSet,$i=async function(){let ne=null;try{await this.annotationEditorLayer.render(this.viewport,"display")}catch(de){console.error(`#renderAnnotationEditorLayer: "${de}".`),ne=de}finally{this.eventBus.dispatch("annotationeditorlayerrendered",{source:this,pageNumber:this.id,error:ne})}},q=new WeakSet,Xi=async function(){let ne=null;try{const de=await this.xfaLayer.render(this.viewport,"display");de!=null&&de.textDivs&&this._textHighlighter&&D(this,X,Rs).call(this,de.textDivs)}catch(de){console.error(`#renderXfaLayer: "${de}".`),ne=de}finally{this.eventBus.dispatch("xfalayerrendered",{source:this,pageNumber:this.id,error:ne})}},s=new WeakSet,qi=async function(){const{pdfPage:ne,textLayer:de,viewport:ye}=this;if(!de)return;let me=null;try{if(!de.renderingDone){const Te=ne.streamTextContent({includeMarkedContent:!0,disableNormalization:!0});de.setTextContentSource(Te)}await de.render(ye)}catch(Te){if(Te instanceof a.AbortException)return;console.error(`#renderTextLayer: "${Te}".`),me=Te}this.eventBus.dispatch("textlayerrendered",{source:this,pageNumber:this.id,numTextDivs:de.numTextDivs,error:me}),D(this,F,xs).call(this)},F=new WeakSet,xs=async function(){var ye,me,Te;if(!this.textLayer)return;this.structTreeLayer||(this.structTreeLayer=new r.StructTreeLayerBuilder);const ne=await(this.structTreeLayer.renderingDone?null:this.pdfPage.getStructTree()),de=(ye=this.structTreeLayer)==null?void 0:ye.render(ne);de&&((me=this.canvas)==null||me.append(de)),(Te=this.structTreeLayer)==null||Te.show()},X=new WeakSet,Rs=async function(ne){const de=await this.pdfPage.getTextContent(),ye=[];for(const me of de.items)ye.push(me.str);this._textHighlighter.setTextMapping(ne,ye),this._textHighlighter.enable()},ee=new WeakSet,Ki=async function(ne,de=null){if(ne===this.renderTask&&(this.renderTask=null),de instanceof a.RenderingCancelledException){ie(this,x,null);return}if(ie(this,x,de),this.renderingState=l.RenderingStates.FINISHED,this._resetZoomLayer(!0),t(this,E).regularAnnotations=!ne.separateAnnots,this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!1,timestamp:performance.now(),error:t(this,x)}),de)throw de},T.PDFPageView=n},(oe,T,C)=>{var S,w;Object.defineProperty(T,"__esModule",{value:!0}),T.AnnotationEditorLayerBuilder=void 0;var a=C(5),l=C(31);class L{constructor(r){R(this,S,null);R(this,w,void 0);this.pageDiv=r.pageDiv,this.pdfPage=r.pdfPage,this.accessibilityManager=r.accessibilityManager,this.l10n=r.l10n||l.NullL10n,this.annotationEditorLayer=null,this.div=null,this._cancelled=!1,ie(this,w,r.uiManager),ie(this,S,r.annotationLayer||null)}async render(r,d="display"){if(d!=="display"||this._cancelled)return;const m=r.clone({dontFlip:!0});if(this.div){this.annotationEditorLayer.update({viewport:m}),this.show();return}const v=this.div=document.createElement("div");v.className="annotationEditorLayer",v.tabIndex=0,v.hidden=!0,this.pageDiv.append(v),this.annotationEditorLayer=new a.AnnotationEditorLayer({uiManager:t(this,w),div:v,accessibilityManager:this.accessibilityManager,pageIndex:this.pdfPage.pageNumber-1,l10n:this.l10n,viewport:m,annotationLayer:t(this,S)});const f={viewport:m,div:v,annotations:null,intent:d};this.annotationEditorLayer.render(f),this.show()}cancel(){this._cancelled=!0,this.div&&(this.pageDiv=null,this.annotationEditorLayer.destroy(),this.div.remove())}hide(){this.div&&(this.div.hidden=!0)}show(){!this.div||this.annotationEditorLayer.isEmpty||(this.div.hidden=!1)}}S=new WeakMap,w=new WeakMap,T.AnnotationEditorLayerBuilder=L},(oe,T,C)=>{var w,e,Yi;Object.defineProperty(T,"__esModule",{value:!0}),T.AnnotationLayerBuilder=void 0;var a=C(5),l=C(31),L=C(4);class S{constructor({pageDiv:m,pdfPage:v,linkService:f,downloadManager:b,annotationStorage:i=null,imageResourcesPath:n="",renderForms:u=!0,l10n:c=l.NullL10n,enableScripting:o=!1,hasJSActionsPromise:h=null,fieldObjectsPromise:g=null,annotationCanvasMap:x=null,accessibilityManager:j=null}){R(this,e);R(this,w,null);this.pageDiv=m,this.pdfPage=v,this.linkService=f,this.downloadManager=b,this.imageResourcesPath=n,this.renderForms=u,this.l10n=c,this.annotationStorage=i,this.enableScripting=o,this._hasJSActionsPromise=h||Promise.resolve(!1),this._fieldObjectsPromise=g||Promise.resolve(null),this._annotationCanvasMap=x,this._accessibilityManager=j,this.annotationLayer=null,this.div=null,this._cancelled=!1,this._eventBus=f.eventBus}async render(m,v="display"){var u;if(this.div){if(this._cancelled||!this.annotationLayer)return;this.annotationLayer.update({viewport:m.clone({dontFlip:!0})});return}const[f,b,i]=await Promise.all([this.pdfPage.getAnnotations({intent:v}),this._hasJSActionsPromise,this._fieldObjectsPromise]);if(this._cancelled)return;const n=this.div=document.createElement("div");if(n.className="annotationLayer",this.pageDiv.append(n),f.length===0){this.hide();return}this.annotationLayer=new a.AnnotationLayer({div:n,accessibilityManager:this._accessibilityManager,annotationCanvasMap:this._annotationCanvasMap,l10n:this.l10n,page:this.pdfPage,viewport:m.clone({dontFlip:!0})}),await this.annotationLayer.render({annotations:f,imageResourcesPath:this.imageResourcesPath,renderForms:this.renderForms,linkService:this.linkService,downloadManager:this.downloadManager,annotationStorage:this.annotationStorage,enableScripting:this.enableScripting,hasJSActions:b,fieldObjects:i}),this.linkService.isInPresentationMode&&D(this,e,Yi).call(this,L.PresentationModeState.FULLSCREEN),t(this,w)||(ie(this,w,c=>{D(this,e,Yi).call(this,c.state)}),(u=this._eventBus)==null||u._on("presentationmodechanged",t(this,w)))}cancel(){var m;this._cancelled=!0,t(this,w)&&((m=this._eventBus)==null||m._off("presentationmodechanged",t(this,w)),ie(this,w,null))}hide(){this.div&&(this.div.hidden=!0)}}w=new WeakMap,e=new WeakSet,Yi=function(m){if(!this.div)return;let v=!1;switch(m){case L.PresentationModeState.FULLSCREEN:v=!0;break;case L.PresentationModeState.NORMAL:break;default:return}for(const f of this.div.childNodes)f.hasAttribute("data-internal-link")||(f.inert=v)},T.AnnotationLayerBuilder=S},(oe,T)=>{var L,S,Zi,e,Qi;Object.defineProperty(T,"__esModule",{value:!0}),T.StructTreeLayerBuilder=void 0;const C={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},a=/^H(\d+)$/;class l{constructor(){R(this,S);R(this,e);R(this,L,void 0)}get renderingDone(){return t(this,L)!==void 0}render(m){if(t(this,L)!==void 0)return t(this,L);const v=D(this,e,Qi).call(this,m);return v==null||v.classList.add("structTree"),ie(this,L,v)}hide(){t(this,L)&&!t(this,L).hidden&&(t(this,L).hidden=!0)}show(){var m;(m=t(this,L))!=null&&m.hidden&&(t(this,L).hidden=!1)}}L=new WeakMap,S=new WeakSet,Zi=function(m,v){m.alt!==void 0&&v.setAttribute("aria-label",m.alt),m.id!==void 0&&v.setAttribute("aria-owns",m.id),m.lang!==void 0&&v.setAttribute("lang",m.lang)},e=new WeakSet,Qi=function(m){if(!m)return null;const v=document.createElement("span");if("role"in m){const{role:f}=m,b=f.match(a);b?(v.setAttribute("role","heading"),v.setAttribute("aria-level",b[1])):C[f]&&v.setAttribute("role",C[f])}if(D(this,S,Zi).call(this,m,v),m.children)if(m.children.length===1&&"id"in m.children[0])D(this,S,Zi).call(this,m.children[0],v);else for(const f of m.children)v.append(D(this,e,Qi).call(this,f));return v},T.StructTreeLayerBuilder=l},(oe,T,C)=>{var L,S,w,e,r,Wt,m,Ji;Object.defineProperty(T,"__esModule",{value:!0}),T.TextAccessibilityManager=void 0;var a=C(4);const f=class{constructor(){R(this,m);R(this,L,!1);R(this,S,null);R(this,w,new Map);R(this,e,new Map)}setTextMapping(i){ie(this,S,i)}enable(){if(t(this,L))throw new Error("TextAccessibilityManager is already enabled.");if(!t(this,S))throw new Error("Text divs and strings have not been set.");if(ie(this,L,!0),ie(this,S,t(this,S).slice()),t(this,S).sort(D(f,r,Wt)),t(this,w).size>0){const i=t(this,S);for(const[n,u]of t(this,w)){if(!document.getElementById(n)){t(this,w).delete(n);continue}D(this,m,Ji).call(this,n,i[u])}}for(const[i,n]of t(this,e))this.addPointerInTextLayer(i,n);t(this,e).clear()}disable(){t(this,L)&&(t(this,e).clear(),ie(this,S,null),ie(this,L,!1))}removePointerInTextLayer(i){if(!t(this,L)){t(this,e).delete(i);return}const n=t(this,S);if(!n||n.length===0)return;const{id:u}=i,c=t(this,w).get(u);if(c===void 0)return;const o=n[c];t(this,w).delete(u);let h=o.getAttribute("aria-owns");h!=null&&h.includes(u)&&(h=h.split(" ").filter(g=>g!==u).join(" "),h?o.setAttribute("aria-owns",h):(o.removeAttribute("aria-owns"),o.setAttribute("role","presentation")))}addPointerInTextLayer(i,n){const{id:u}=i;if(!u)return;if(!t(this,L)){t(this,e).set(i,n);return}n&&this.removePointerInTextLayer(i);const c=t(this,S);if(!c||c.length===0)return;const o=(0,a.binarySearchFirstItem)(c,g=>{var x;return D(x=f,r,Wt).call(x,i,g)<0}),h=Math.max(0,o-1);D(this,m,Ji).call(this,u,c[h]),t(this,w).set(u,h)}moveElementInDOM(i,n,u,c){if(this.addPointerInTextLayer(u,c),!i.hasChildNodes()){i.append(n);return}const o=Array.from(i.childNodes).filter(x=>x!==n);if(o.length===0)return;const h=u||n,g=(0,a.binarySearchFirstItem)(o,x=>{var j;return D(j=f,r,Wt).call(j,h,x)<0});g===0?o[0].before(n):o[g-1].after(n)}};let l=f;L=new WeakMap,S=new WeakMap,w=new WeakMap,e=new WeakMap,r=new WeakSet,Wt=function(i,n){const u=i.getBoundingClientRect(),c=n.getBoundingClientRect();if(u.width===0&&u.height===0)return 1;if(c.width===0&&c.height===0)return-1;const o=u.y,h=u.y+u.height,g=u.y+u.height/2,x=c.y,j=c.y+c.height,V=c.y+c.height/2;if(g<=x&&V>=h)return-1;if(V<=o&&g>=j)return 1;const E=u.x+u.width/2,O=c.x+c.width/2;return E-O},m=new WeakSet,Ji=function(i,n){const u=n.getAttribute("aria-owns");u!=null&&u.includes(i)||n.setAttribute("aria-owns",u?`${u} ${i}`:i),n.removeAttribute("role")},R(l,r),T.TextAccessibilityManager=l},(oe,T)=>{Object.defineProperty(T,"__esModule",{value:!0}),T.TextHighlighter=void 0;class C{constructor({findController:l,eventBus:L,pageIndex:S}){this.findController=l,this.matches=[],this.eventBus=L,this.pageIdx=S,this._onUpdateTextLayerMatches=null,this.textDivs=null,this.textContentItemsStr=null,this.enabled=!1}setTextMapping(l,L){this.textDivs=l,this.textContentItemsStr=L}enable(){if(!this.textDivs||!this.textContentItemsStr)throw new Error("Text divs and strings have not been set.");if(this.enabled)throw new Error("TextHighlighter is already enabled.");this.enabled=!0,this._onUpdateTextLayerMatches||(this._onUpdateTextLayerMatches=l=>{(l.pageIndex===this.pageIdx||l.pageIndex===-1)&&this._updateMatches()},this.eventBus._on("updatetextlayermatches",this._onUpdateTextLayerMatches)),this._updateMatches()}disable(){this.enabled&&(this.enabled=!1,this._onUpdateTextLayerMatches&&(this.eventBus._off("updatetextlayermatches",this._onUpdateTextLayerMatches),this._onUpdateTextLayerMatches=null),this._updateMatches(!0))}_convertMatches(l,L){if(!l)return[];const{textContentItemsStr:S}=this;let w=0,e=0;const r=S.length-1,d=[];for(let m=0,v=l.length;m<v;m++){let f=l[m];for(;w!==r&&f>=e+S[w].length;)e+=S[w].length,w++;w===S.length&&console.error("Could not find a matching mapping");const b={begin:{divIdx:w,offset:f-e}};for(f+=L[m];w!==r&&f>e+S[w].length;)e+=S[w].length,w++;b.end={divIdx:w,offset:f-e},d.push(b)}return d}_renderMatches(l){if(l.length===0)return;const{findController:L,pageIdx:S}=this,{textContentItemsStr:w,textDivs:e}=this,r=S===L.selected.pageIdx,d=L.selected.matchIdx,m=L.state.highlightAll;let v=null;const f={divIdx:-1,offset:void 0};function b(h,g){const x=h.divIdx;return e[x].textContent="",i(x,0,h.offset,g)}function i(h,g,x,j){let V=e[h];if(V.nodeType===Node.TEXT_NODE){const y=document.createElement("span");V.before(y),y.append(V),e[h]=y,V=y}const E=w[h].substring(g,x),O=document.createTextNode(E);if(j){const y=document.createElement("span");return y.className=`${j} appended`,y.append(O),V.append(y),j.includes("selected")?y.offsetLeft:0}return V.append(O),0}let n=d,u=n+1;if(m)n=0,u=l.length;else if(!r)return;let c=-1,o=-1;for(let h=n;h<u;h++){const g=l[h],x=g.begin;if(x.divIdx===c&&x.offset===o)continue;c=x.divIdx,o=x.offset;const j=g.end,V=r&&h===d,E=V?" selected":"";let O=0;if(!v||x.divIdx!==v.divIdx?(v!==null&&i(v.divIdx,v.offset,f.offset),b(x)):i(v.divIdx,v.offset,x.offset),x.divIdx===j.divIdx)O=i(x.divIdx,x.offset,j.offset,"highlight"+E);else{O=i(x.divIdx,x.offset,f.offset,"highlight begin"+E);for(let y=x.divIdx+1,B=j.divIdx;y<B;y++)e[y].className="highlight middle"+E;b(j,"highlight end"+E)}v=j,V&&L.scrollMatchIntoView({element:e[x.divIdx],selectedLeft:O,pageIndex:S,matchIndex:d})}v&&i(v.divIdx,v.offset,f.offset)}_updateMatches(l=!1){if(!this.enabled&&!l)return;const{findController:L,matches:S,pageIdx:w}=this,{textContentItemsStr:e,textDivs:r}=this;let d=-1;for(const f of S){const b=Math.max(d,f.begin.divIdx);for(let i=b,n=f.end.divIdx;i<=n;i++){const u=r[i];u.textContent=e[i],u.className=""}d=f.end.divIdx+1}if(!(L!=null&&L.highlightMatches)||l)return;const m=L.pageMatches[w]||null,v=L.pageMatchesLength[w]||null;this.matches=this._convertMatches(m,v),this._renderMatches(this.matches)}}T.TextHighlighter=C},(oe,T,C)=>{var S,w,e,r,d,ks,v,Is;Object.defineProperty(T,"__esModule",{value:!0}),T.TextLayerBuilder=void 0;var a=C(5),l=C(4);class L{constructor({highlighter:i=null,accessibilityManager:n=null,isOffscreenCanvasSupported:u=!0,enablePermissions:c=!1}){R(this,d);R(this,v);R(this,S,!1);R(this,w,0);R(this,e,0);R(this,r,null);this.textContentItemsStr=[],this.renderingDone=!1,this.textDivs=[],this.textDivProperties=new WeakMap,this.textLayerRenderTask=null,this.highlighter=i,this.accessibilityManager=n,this.isOffscreenCanvasSupported=u,ie(this,S,c===!0),this.div=document.createElement("div"),this.div.className="textLayer",this.hide()}get numTextDivs(){return this.textDivs.length}async render(i){var c,o,h;if(!t(this,r))throw new Error('No "textContentSource" parameter specified.');const n=i.scale*(globalThis.devicePixelRatio||1),{rotation:u}=i;if(this.renderingDone){const g=u!==t(this,w),x=n!==t(this,e);(g||x)&&(this.hide(),(0,a.updateTextLayer)({container:this.div,viewport:i,textDivs:this.textDivs,textDivProperties:this.textDivProperties,isOffscreenCanvasSupported:this.isOffscreenCanvasSupported,mustRescale:x,mustRotate:g}),ie(this,e,n),ie(this,w,u)),this.show();return}this.cancel(),(c=this.highlighter)==null||c.setTextMapping(this.textDivs,this.textContentItemsStr),(o=this.accessibilityManager)==null||o.setTextMapping(this.textDivs),this.textLayerRenderTask=(0,a.renderTextLayer)({textContentSource:t(this,r),container:this.div,viewport:i,textDivs:this.textDivs,textDivProperties:this.textDivProperties,textContentItemsStr:this.textContentItemsStr,isOffscreenCanvasSupported:this.isOffscreenCanvasSupported}),await this.textLayerRenderTask.promise,D(this,d,ks).call(this),ie(this,e,n),ie(this,w,u),this.show(),(h=this.accessibilityManager)==null||h.enable()}hide(){var i;this.div.hidden||((i=this.highlighter)==null||i.disable(),this.div.hidden=!0)}show(){var i;this.div.hidden&&this.renderingDone&&(this.div.hidden=!1,(i=this.highlighter)==null||i.enable())}cancel(){var i,n;this.textLayerRenderTask&&(this.textLayerRenderTask.cancel(),this.textLayerRenderTask=null),(i=this.highlighter)==null||i.disable(),(n=this.accessibilityManager)==null||n.disable(),this.textContentItemsStr.length=0,this.textDivs.length=0,this.textDivProperties=new WeakMap}setTextContentSource(i){this.cancel(),ie(this,r,i)}}S=new WeakMap,w=new WeakMap,e=new WeakMap,r=new WeakMap,d=new WeakSet,ks=function(){this.renderingDone=!0;const i=document.createElement("div");i.className="endOfContent",this.div.append(i),D(this,v,Is).call(this)},v=new WeakSet,Is=function(){const{div:i}=this;i.addEventListener("mousedown",n=>{const u=i.querySelector(".endOfContent");if(!u)return;let c=n.target!==i;if(c&&(c=getComputedStyle(u).getPropertyValue("-moz-user-select")!=="none"),c){const o=i.getBoundingClientRect(),h=Math.max(0,(n.pageY-o.top)/o.height);u.style.top=(h*100).toFixed(2)+"%"}u.classList.add("active")}),i.addEventListener("mouseup",()=>{const n=i.querySelector(".endOfContent");n&&(n.style.top="",n.classList.remove("active"))}),i.addEventListener("copy",n=>{if(!t(this,S)){const u=document.getSelection();n.clipboardData.setData("text/plain",(0,l.removeNullCharacters)((0,a.normalizeUnicode)(u.toString())))}n.preventDefault(),n.stopPropagation()})},T.TextLayerBuilder=L},(oe,T,C)=>{Object.defineProperty(T,"__esModule",{value:!0}),T.XfaLayerBuilder=void 0;var a=C(5);class l{constructor({pageDiv:S,pdfPage:w,annotationStorage:e=null,linkService:r,xfaHtml:d=null}){this.pageDiv=S,this.pdfPage=w,this.annotationStorage=e,this.linkService=r,this.xfaHtml=d,this.div=null,this._cancelled=!1}async render(S,w="display"){if(w==="print"){const d={viewport:S.clone({dontFlip:!0}),div:this.div,xfaHtml:this.xfaHtml,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:w},m=document.createElement("div");return this.pageDiv.append(m),d.div=m,a.XfaLayer.render(d)}const e=await this.pdfPage.getXfa();if(this._cancelled||!e)return{textDivs:[]};const r={viewport:S.clone({dontFlip:!0}),div:this.div,xfaHtml:e,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:w};return this.div?a.XfaLayer.update(r):(this.div=document.createElement("div"),this.pageDiv.append(this.div),r.div=this.div,a.XfaLayer.render(r))}cancel(){this._cancelled=!0}hide(){this.div&&(this.div.hidden=!0)}}T.XfaLayerBuilder=l},(oe,T,C)=>{var S,Gt,e,Fs,d,Os,v,Ds,b,Ns;Object.defineProperty(T,"__esModule",{value:!0}),T.SecondaryToolbar=void 0;var a=C(4),l=C(30);class L{constructor(u,c,o){R(this,S);R(this,e);R(this,d);R(this,v);R(this,b);this.toolbar=u.toolbar,this.toggleButton=u.toggleButton,this.buttons=[{element:u.presentationModeButton,eventName:"presentationmode",close:!0},{element:u.printButton,eventName:"print",close:!0},{element:u.downloadButton,eventName:"download",close:!0},{element:u.viewBookmarkButton,eventName:null,close:!0},{element:u.firstPageButton,eventName:"firstpage",close:!0},{element:u.lastPageButton,eventName:"lastpage",close:!0},{element:u.pageRotateCwButton,eventName:"rotatecw",close:!1},{element:u.pageRotateCcwButton,eventName:"rotateccw",close:!1},{element:u.cursorSelectToolButton,eventName:"switchcursortool",eventDetails:{tool:a.CursorTool.SELECT},close:!0},{element:u.cursorHandToolButton,eventName:"switchcursortool",eventDetails:{tool:a.CursorTool.HAND},close:!0},{element:u.scrollPageButton,eventName:"switchscrollmode",eventDetails:{mode:a.ScrollMode.PAGE},close:!0},{element:u.scrollVerticalButton,eventName:"switchscrollmode",eventDetails:{mode:a.ScrollMode.VERTICAL},close:!0},{element:u.scrollHorizontalButton,eventName:"switchscrollmode",eventDetails:{mode:a.ScrollMode.HORIZONTAL},close:!0},{element:u.scrollWrappedButton,eventName:"switchscrollmode",eventDetails:{mode:a.ScrollMode.WRAPPED},close:!0},{element:u.spreadNoneButton,eventName:"switchspreadmode",eventDetails:{mode:a.SpreadMode.NONE},close:!0},{element:u.spreadOddButton,eventName:"switchspreadmode",eventDetails:{mode:a.SpreadMode.ODD},close:!0},{element:u.spreadEvenButton,eventName:"switchspreadmode",eventDetails:{mode:a.SpreadMode.EVEN},close:!0},{element:u.documentPropertiesButton,eventName:"documentproperties",close:!0}],this.buttons.push({element:u.openFileButton,eventName:"openfile",close:!0}),this.items={firstPage:u.firstPageButton,lastPage:u.lastPageButton,pageRotateCw:u.pageRotateCwButton,pageRotateCcw:u.pageRotateCcwButton},this.eventBus=c,this.externalServices=o,this.opened=!1,D(this,e,Fs).call(this),D(this,d,Os).call(this,u),D(this,v,Ds).call(this,u),D(this,b,Ns).call(this,u),this.reset()}get isOpen(){return this.opened}setPageNumber(u){this.pageNumber=u,D(this,S,Gt).call(this)}setPagesCount(u){this.pagesCount=u,D(this,S,Gt).call(this)}reset(){this.pageNumber=0,this.pagesCount=0,D(this,S,Gt).call(this),this.eventBus.dispatch("secondarytoolbarreset",{source:this})}open(){this.opened||(this.opened=!0,(0,a.toggleExpandedBtn)(this.toggleButton,!0,this.toolbar))}close(){this.opened&&(this.opened=!1,(0,a.toggleExpandedBtn)(this.toggleButton,!1,this.toolbar))}toggle(){this.opened?this.close():this.open()}}S=new WeakSet,Gt=function(){this.items.firstPage.disabled=this.pageNumber<=1,this.items.lastPage.disabled=this.pageNumber>=this.pagesCount,this.items.pageRotateCw.disabled=this.pagesCount===0,this.items.pageRotateCcw.disabled=this.pagesCount===0},e=new WeakSet,Fs=function(){this.toggleButton.addEventListener("click",this.toggle.bind(this));for(const{element:u,eventName:c,close:o,eventDetails:h}of this.buttons)u.addEventListener("click",g=>{c!==null&&this.eventBus.dispatch(c,{source:this,...h}),o&&this.close(),this.externalServices.reportTelemetry({type:"buttons",data:{id:u.id}})})},d=new WeakSet,Os=function({cursorSelectToolButton:u,cursorHandToolButton:c}){this.eventBus._on("cursortoolchanged",({tool:o})=>{(0,a.toggleCheckedBtn)(u,o===a.CursorTool.SELECT),(0,a.toggleCheckedBtn)(c,o===a.CursorTool.HAND)})},v=new WeakSet,Ds=function({scrollPageButton:u,scrollVerticalButton:c,scrollHorizontalButton:o,scrollWrappedButton:h,spreadNoneButton:g,spreadOddButton:x,spreadEvenButton:j}){const V=({mode:E})=>{(0,a.toggleCheckedBtn)(u,E===a.ScrollMode.PAGE),(0,a.toggleCheckedBtn)(c,E===a.ScrollMode.VERTICAL),(0,a.toggleCheckedBtn)(o,E===a.ScrollMode.HORIZONTAL),(0,a.toggleCheckedBtn)(h,E===a.ScrollMode.WRAPPED);const O=this.pagesCount>l.PagesCountLimit.FORCE_SCROLL_MODE_PAGE;u.disabled=O,c.disabled=O,o.disabled=O,h.disabled=O;const y=E===a.ScrollMode.HORIZONTAL;g.disabled=y,x.disabled=y,j.disabled=y};this.eventBus._on("scrollmodechanged",V),this.eventBus._on("secondarytoolbarreset",E=>{E.source===this&&V({mode:a.ScrollMode.VERTICAL})})},b=new WeakSet,Ns=function({spreadNoneButton:u,spreadOddButton:c,spreadEvenButton:o}){const h=({mode:g})=>{(0,a.toggleCheckedBtn)(u,g===a.SpreadMode.NONE),(0,a.toggleCheckedBtn)(c,g===a.SpreadMode.ODD),(0,a.toggleCheckedBtn)(o,g===a.SpreadMode.EVEN)};this.eventBus._on("spreadmodechanged",h),this.eventBus._on("secondarytoolbarreset",g=>{g.source===this&&h({mode:a.SpreadMode.NONE})})},T.SecondaryToolbar=L},(oe,T,C)=>{var w,e,Bs,d,Vs,v,pt,b,Us;Object.defineProperty(T,"__esModule",{value:!0}),T.Toolbar=void 0;var a=C(4),l=C(5);const L="visiblePageIsLoading";class S{constructor(u,c,o){R(this,e);R(this,d);R(this,v);R(this,b);R(this,w,!1);this.toolbar=u.container,this.eventBus=c,this.l10n=o,this.buttons=[{element:u.previous,eventName:"previouspage"},{element:u.next,eventName:"nextpage"},{element:u.zoomIn,eventName:"zoomin"},{element:u.zoomOut,eventName:"zoomout"},{element:u.print,eventName:"print"},{element:u.download,eventName:"download"},{element:u.editorFreeTextButton,eventName:"switchannotationeditormode",eventDetails:{get mode(){const{classList:h}=u.editorFreeTextButton;return h.contains("toggled")?l.AnnotationEditorType.NONE:l.AnnotationEditorType.FREETEXT}}},{element:u.editorInkButton,eventName:"switchannotationeditormode",eventDetails:{get mode(){const{classList:h}=u.editorInkButton;return h.contains("toggled")?l.AnnotationEditorType.NONE:l.AnnotationEditorType.INK}}},{element:u.editorStampButton,eventName:"switchannotationeditormode",eventDetails:{get mode(){const{classList:h}=u.editorStampButton;return h.contains("toggled")?l.AnnotationEditorType.NONE:l.AnnotationEditorType.STAMP}}}],this.buttons.push({element:u.openFile,eventName:"openfile"}),this.items={numPages:u.numPages,pageNumber:u.pageNumber,scaleSelect:u.scaleSelect,customScaleOption:u.customScaleOption,previous:u.previous,next:u.next,zoomIn:u.zoomIn,zoomOut:u.zoomOut},D(this,e,Bs).call(this,u),this.reset()}setPageNumber(u,c){this.pageNumber=u,this.pageLabel=c,D(this,v,pt).call(this,!1)}setPagesCount(u,c){this.pagesCount=u,this.hasPageLabels=c,D(this,v,pt).call(this,!0)}setPageScale(u,c){this.pageScaleValue=(u||c).toString(),this.pageScale=c,D(this,v,pt).call(this,!1)}reset(){this.pageNumber=0,this.pageLabel=null,this.hasPageLabels=!1,this.pagesCount=0,this.pageScaleValue=a.DEFAULT_SCALE_VALUE,this.pageScale=a.DEFAULT_SCALE,D(this,v,pt).call(this,!0),this.updateLoadingIndicatorState(),this.eventBus.dispatch("toolbarreset",{source:this})}updateLoadingIndicatorState(u=!1){const{pageNumber:c}=this.items;c.classList.toggle(L,u)}}w=new WeakMap,e=new WeakSet,Bs=function(u){const{pageNumber:c,scaleSelect:o}=this.items,h=this;for(const{element:g,eventName:x,eventDetails:j}of this.buttons)g.addEventListener("click",V=>{x!==null&&this.eventBus.dispatch(x,{source:this,...j})});c.addEventListener("click",function(){this.select()}),c.addEventListener("change",function(){h.eventBus.dispatch("pagenumberchanged",{source:h,value:this.value})}),o.addEventListener("change",function(){this.value!=="custom"&&h.eventBus.dispatch("scalechanged",{source:h,value:this.value})}),o.addEventListener("click",function(g){const x=g.target;this.value===h.pageScaleValue&&x.tagName.toUpperCase()==="OPTION"&&this.blur()}),o.oncontextmenu=a.noContextMenuHandler,this.eventBus._on("localized",()=>{ie(this,w,!0),D(this,b,Us).call(this),D(this,v,pt).call(this,!0)}),D(this,d,Vs).call(this,u)},d=new WeakSet,Vs=function({editorFreeTextButton:u,editorFreeTextParamsToolbar:c,editorInkButton:o,editorInkParamsToolbar:h,editorStampButton:g}){const x=({mode:j})=>{(0,a.toggleCheckedBtn)(u,j===l.AnnotationEditorType.FREETEXT,c),(0,a.toggleCheckedBtn)(o,j===l.AnnotationEditorType.INK,h),(0,a.toggleCheckedBtn)(g,j===l.AnnotationEditorType.STAMP);const V=j===l.AnnotationEditorType.DISABLE;u.disabled=V,o.disabled=V,g.disabled=V};this.eventBus._on("annotationeditormodechanged",x),this.eventBus._on("toolbarreset",j=>{j.source===this&&x({mode:l.AnnotationEditorType.DISABLE})})},v=new WeakSet,pt=function(u=!1){if(!t(this,w))return;const{pageNumber:c,pagesCount:o,pageScaleValue:h,pageScale:g,items:x}=this;u&&(this.hasPageLabels?x.pageNumber.type="text":(x.pageNumber.type="number",this.l10n.get("of_pages",{pagesCount:o}).then(j=>{x.numPages.textContent=j})),x.pageNumber.max=o),this.hasPageLabels?(x.pageNumber.value=this.pageLabel,this.l10n.get("page_of_pages",{pageNumber:c,pagesCount:o}).then(j=>{x.numPages.textContent=j})):x.pageNumber.value=c,x.previous.disabled=c<=1,x.next.disabled=c>=o,x.zoomOut.disabled=g<=a.MIN_SCALE,x.zoomIn.disabled=g>=a.MAX_SCALE,this.l10n.get("page_scale_percent",{scale:Math.round(g*1e4)/100}).then(j=>{let V=!1;for(const E of x.scaleSelect.options){if(E.value!==h){E.selected=!1;continue}E.selected=!0,V=!0}V||(x.customScaleOption.textContent=j,x.customScaleOption.selected=!0)})},b=new WeakSet,Us=async function(){const{items:u,l10n:c}=this,o=Promise.all([c.get("page_scale_auto"),c.get("page_scale_actual"),c.get("page_scale_fit"),c.get("page_scale_width")]);await a.animationStarted;const h=getComputedStyle(u.scaleSelect),g=parseFloat(h.getPropertyValue("--scale-select-width")),x=document.createElement("canvas"),j=x.getContext("2d",{alpha:!1});j.font=`${h.fontSize} ${h.fontFamily}`;let V=0;for(const E of await o){const{width:O}=j.measureText(E);O>V&&(V=O)}V+=.3*g,V>g&&u.scaleSelect.parentNode.style.setProperty("--scale-select-width",`${V}px`),x.width=0,x.height=0},T.Toolbar=S},(oe,T)=>{Object.defineProperty(T,"__esModule",{value:!0}),T.ViewHistory=void 0;const C=20;class a{constructor(L,S=C){this.fingerprint=L,this.cacheSize=S,this._initializedPromise=this._readFromStorage().then(w=>{const e=JSON.parse(w||"{}");let r=-1;if(!Array.isArray(e.files))e.files=[];else{for(;e.files.length>=this.cacheSize;)e.files.shift();for(let d=0,m=e.files.length;d<m;d++)if(e.files[d].fingerprint===this.fingerprint){r=d;break}}r===-1&&(r=e.files.push({fingerprint:this.fingerprint})-1),this.file=e.files[r],this.database=e})}async _writeToStorage(){const L=JSON.stringify(this.database);localStorage.setItem("pdfjs.history",L)}async _readFromStorage(){return localStorage.getItem("pdfjs.history")}async set(L,S){return await this._initializedPromise,this.file[L]=S,this._writeToStorage()}async setMultiple(L){await this._initializedPromise;for(const S in L)this.file[S]=L[S];return this._writeToStorage()}async get(L,S){await this._initializedPromise;const w=this.file[L];return w!==void 0?w:S}async getMultiple(L){await this._initializedPromise;const S=Object.create(null);for(const w in L){const e=this.file[w];S[w]=e!==void 0?e:L[w]}return S}}T.ViewHistory=a},(oe,T,C)=>{Object.defineProperty(T,"__esModule",{value:!0}),T.DefaultExternalServices=void 0;var a=C(5);class l{constructor(){throw new Error("Cannot initialize DefaultExternalServices.")}static updateFindControlState(S){}static updateFindMatchesCount(S){}static initPassiveLoading(S){}static reportTelemetry(S){}static createDownloadManager(){throw new Error("Not implemented: createDownloadManager")}static createPreferences(){throw new Error("Not implemented: createPreferences")}static createL10n(S){throw new Error("Not implemented: createL10n")}static createScripting(S){throw new Error("Not implemented: createScripting")}static get supportsPinchToZoom(){return(0,a.shadow)(this,"supportsPinchToZoom",!0)}static get supportsIntegratedFind(){return(0,a.shadow)(this,"supportsIntegratedFind",!1)}static get supportsDocumentFonts(){return(0,a.shadow)(this,"supportsDocumentFonts",!0)}static get supportedMouseWheelZoomModifierKeys(){return(0,a.shadow)(this,"supportedMouseWheelZoomModifierKeys",{ctrlKey:!0,metaKey:!0})}static get isInAutomation(){return(0,a.shadow)(this,"isInAutomation",!1)}static updateEditorStates(S){throw new Error("Not implemented: updateEditorStates")}static get canvasMaxAreaInBytes(){return(0,a.shadow)(this,"canvasMaxAreaInBytes",-1)}static getNimbusExperimentData(){return(0,a.shadow)(this,"getNimbusExperimentData",Promise.resolve(null))}}T.DefaultExternalServices=l},(oe,T,C)=>{Object.defineProperty(T,"__esModule",{value:!0}),T.bindPrintServiceFactory=T.bindExternalService=void 0;let a;T.bindPrintServiceFactory=a;let l;T.bindExternalService=l,T.bindExternalService=l=C(45).bindExternalService,T.bindPrintServiceFactory=a=C(51).bindPrintServiceFactory,document.blockUnblockOnload&&document.blockUnblockOnload(!0)},(oe,T,C)=>{Object.defineProperty(T,"__esModule",{value:!0}),T.bindExternalService=d;var a=C(43),l=C(46),L=C(47),S=C(48),w=C(50);class e extends l.BasePreferences{async _writeToStorage(v){localStorage.setItem("pdfjs.preferences",JSON.stringify(v))}async _readFromStorage(v){return JSON.parse(localStorage.getItem("pdfjs.preferences"))}}class r extends a.DefaultExternalServices{static createDownloadManager(){return new L.DownloadManager}static createPreferences(){return new e}static createL10n({locale:v="en-US"}){return new S.GenericL10n(v)}static createScripting({sandboxBundleSrc:v}){return new w.GenericScripting(v)}}function d(m){m.externalServices=r}},(oe,T,C)=>{var l,L,S;Object.defineProperty(T,"__esModule",{value:!0}),T.BasePreferences=void 0,C(9);const w=class{constructor(){R(this,l,Object.freeze({annotationEditorMode:0,annotationMode:2,cursorToolOnLoad:0,defaultZoomDelay:400,defaultZoomValue:"",disablePageLabels:!1,enablePermissions:!1,enablePrintAutoRotate:!0,enableScripting:!0,enableStampEditor:!0,externalLinkTarget:0,historyUpdateUrl:!1,ignoreDestinationZoom:!1,forcePageColors:!1,pageColorsBackground:"Canvas",pageColorsForeground:"CanvasText",pdfBugEnabled:!1,sidebarViewOnLoad:-1,scrollModeOnLoad:-1,spreadModeOnLoad:-1,textLayerMode:1,viewerCssTheme:0,viewOnLoad:0,disableAutoFetch:!1,disableFontFace:!1,disableRange:!1,disableStream:!1,enableXfa:!0}));R(this,L,Object.create(null));R(this,S,null);if(this.constructor===w)throw new Error("Cannot initialize BasePreferences.");ie(this,S,this._readFromStorage(t(this,l)).then(r=>{for(const d in t(this,l)){const m=r==null?void 0:r[d];typeof m==typeof t(this,l)[d]&&(t(this,L)[d]=m)}}))}async _writeToStorage(r){throw new Error("Not implemented: _writeToStorage")}async _readFromStorage(r){throw new Error("Not implemented: _readFromStorage")}async reset(){await t(this,S);const r=t(this,L);return ie(this,L,Object.create(null)),this._writeToStorage(t(this,l)).catch(d=>{throw ie(this,L,r),d})}async set(r,d){await t(this,S);const m=t(this,l)[r],v=t(this,L);if(m===void 0)throw new Error(`Set preference: "${r}" is undefined.`);if(d===void 0)throw new Error("Set preference: no value is specified.");const f=typeof d,b=typeof m;if(f!==b)if(f==="number"&&b==="string")d=d.toString();else throw new Error(`Set preference: "${d}" is a ${f}, expected a ${b}.`);else if(f==="number"&&!Number.isInteger(d))throw new Error(`Set preference: "${d}" must be an integer.`);return t(this,L)[r]=d,this._writeToStorage(t(this,L)).catch(i=>{throw ie(this,L,v),i})}async get(r){await t(this,S);const d=t(this,l)[r];if(d===void 0)throw new Error(`Get preference: "${r}" is undefined.`);return t(this,L)[r]??d}async getAll(){await t(this,S);const r=Object.create(null);for(const d in t(this,l))r[d]=t(this,L)[d]??t(this,l)[d];return r}};let a=w;l=new WeakMap,L=new WeakMap,S=new WeakMap,T.BasePreferences=a},(oe,T,C)=>{var S;Object.defineProperty(T,"__esModule",{value:!0}),T.DownloadManager=void 0;var a=C(5);function l(w,e){const r=document.createElement("a");if(!r.click)throw new Error('DownloadManager: "a.click()" is not supported.');r.href=w,r.target="_parent","download"in r&&(r.download=e),(document.body||document.documentElement).append(r),r.click(),r.remove()}class L{constructor(){R(this,S,new WeakMap)}downloadUrl(e,r,d){if(!(0,a.createValidAbsoluteUrl)(e,"http://example.com")){console.error(`downloadUrl - not a valid URL: ${e}`);return}l(e+"#pdfjs.action=download",r)}downloadData(e,r,d){const m=URL.createObjectURL(new Blob([e],{type:d}));l(m,r)}openOrDownloadData(e,r,d){const m=(0,a.isPdfFile)(d),v=m?"application/pdf":"";if(m){let f=t(this,S).get(e);f||(f=URL.createObjectURL(new Blob([r],{type:v})),t(this,S).set(e,f));let b;b="?file="+encodeURIComponent(f+"#"+d);try{return window.open(b),!0}catch(i){console.error(`openOrDownloadData: ${i}`),URL.revokeObjectURL(f),t(this,S).delete(e)}}return this.downloadData(r,d,v),!1}download(e,r,d,m){const v=URL.createObjectURL(e);l(v,d)}}S=new WeakMap,T.DownloadManager=L},(oe,T,C)=>{Object.defineProperty(T,"__esModule",{value:!0}),T.GenericL10n=void 0,C(49);var a=C(31);const l={en:"en-US",es:"es-ES",fy:"fy-NL",ga:"ga-IE",gu:"gu-IN",hi:"hi-IN",hy:"hy-AM",nb:"nb-NO",ne:"ne-NP",nn:"nn-NO",pa:"pa-IN",pt:"pt-PT",sv:"sv-SE",zh:"zh-CN"};function L(w){return l[w==null?void 0:w.toLowerCase()]||w}class S{constructor(e){const{webL10n:r}=document;this._lang=e,this._ready=new Promise((d,m)=>{r.setLanguage(L(e),()=>{d(r)})})}async getLanguage(){return(await this._ready).getLanguage()}async getDirection(){return(await this._ready).getDirection()}async get(e,r=null,d=(0,a.getL10nFallback)(e,r)){return(await this._ready).get(e,r,d)}async translate(e){return(await this._ready).translate(e)}}T.GenericL10n=S},()=>{document.webL10n=function(oe,T){var C={},a="",l="textContent",L="",S={},w="loading",e=!0;function r(){return T.querySelectorAll('link[type="application/l10n"]')}function d(){var V=T.querySelector('script[type="application/l10n"]');return V?JSON.parse(V.innerHTML):null}function m(V){return V?V.querySelectorAll("*[data-l10n-id]"):[]}function v(V){if(!V)return{};var E=V.getAttribute("data-l10n-id"),O=V.getAttribute("data-l10n-args"),y={};if(O)try{y=JSON.parse(O)}catch{console.warn("could not parse arguments for #"+E)}return{id:E,args:y}}function f(V,E,O){E=E||function($){},O=O||function(){};var y=new XMLHttpRequest;y.open("GET",V,e),y.overrideMimeType&&y.overrideMimeType("text/plain; charset=utf-8"),y.onreadystatechange=function(){y.readyState==4&&(y.status==200||y.status===0?E(y.responseText):O())},y.onerror=O,y.ontimeout=O;try{y.send(null)}catch{O()}}function b(V,E,O,y){var B=V.replace(/[^\/]*$/,"")||"./";function $(ce){return ce.lastIndexOf("\\")<0?ce:ce.replace(/\\\\/g,"\\").replace(/\\n/g,`
`).replace(/\\r/g,"\r").replace(/\\t/g,"	").replace(/\\b/g,"\b").replace(/\\f/g,"\f").replace(/\\{/g,"{").replace(/\\}/g,"}").replace(/\\"/g,'"').replace(/\\'/g,"'")}function I(ce,we){var q={},P=/^\s*|\s*$/,s=/^\s*#|^\s*$/,p=/^\s*\[(.*)\]\s*$/,F=/^\s*@import\s+url\((.*)\)\s*$/i,U=/^([^=\s]*)\s*=\s*(.+)$/;function X(ee,_e,pe){var ne=ee.replace(P,"").split(/[\r\n]+/),de="*",ye=E.split("-",1)[0],me=!1,Te="";function Ie(){for(;;){if(!ne.length){pe();return}var Se=ne.shift();if(!s.test(Se)){if(_e){if(Te=p.exec(Se),Te){de=Te[1].toLowerCase(),me=de!=="*"&&de!==E&&de!==ye;continue}else if(me)continue;if(Te=F.exec(Se),Te){Y(B+Te[1],Ie);return}}var Oe=Se.match(U);Oe&&Oe.length==3&&(q[Oe[1]]=$(Oe[2]))}}}Ie()}function Y(ee,_e){f(ee,function(pe){X(pe,!1,_e)},function(){console.warn(ee+" not found."),_e()})}X(ce,!0,function(){we(q)})}f(V,function(ce){a+=ce,I(ce,function(we){for(var q in we){var P,s,p=q.lastIndexOf(".");p>0?(P=q.substring(0,p),s=q.substring(p+1)):(P=q,s=l),C[P]||(C[P]={}),C[P][s]=we[q]}O&&O()})},y)}function i(V,E){V&&(V=V.toLowerCase()),E=E||function(){},n(),L=V;var O=r(),y=O.length;if(y===0){var B=d();if(B&&B.locales&&B.default_locale){if(console.log("using the embedded JSON directory, early way out"),C=B.locales[V],!C){var $=B.default_locale.toLowerCase();for(var I in B.locales)if(I=I.toLowerCase(),I===V){C=B.locales[V];break}else I===$&&(C=B.locales[$])}E()}else console.log("no resource to load, early way out");w="complete";return}var ce=null,we=0;ce=function(){we++,we>=y&&(E(),w="complete")};function q(p){var F=p.href;this.load=function(U,X){b(F,U,X,function(){console.warn(F+" not found."),console.warn('"'+U+'" resource not found'),L="",X()})}}for(var P=0;P<y;P++){var s=new q(O[P]);s.load(V,ce)}}function n(){C={},a="",L=""}function u(V){var E={af:3,ak:4,am:4,ar:1,asa:3,az:0,be:11,bem:3,bez:3,bg:3,bh:4,bm:0,bn:3,bo:0,br:20,brx:3,bs:11,ca:3,cgg:3,chr:3,cs:12,cy:17,da:3,de:3,dv:3,dz:0,ee:3,el:3,en:3,eo:3,es:3,et:3,eu:3,fa:0,ff:5,fi:3,fil:4,fo:3,fr:5,fur:3,fy:3,ga:8,gd:24,gl:3,gsw:3,gu:3,guw:4,gv:23,ha:3,haw:3,he:2,hi:4,hr:11,hu:0,id:0,ig:0,ii:0,is:3,it:3,iu:7,ja:0,jmc:3,jv:0,ka:0,kab:5,kaj:3,kcg:3,kde:0,kea:0,kk:3,kl:3,km:0,kn:0,ko:0,ksb:3,ksh:21,ku:3,kw:7,lag:18,lb:3,lg:3,ln:4,lo:0,lt:10,lv:6,mas:3,mg:4,mk:16,ml:3,mn:3,mo:9,mr:3,ms:0,mt:15,my:0,nah:3,naq:7,nb:3,nd:3,ne:3,nl:3,nn:3,no:3,nr:3,nso:4,ny:3,nyn:3,om:3,or:3,pa:3,pap:3,pl:13,ps:3,pt:3,rm:3,ro:9,rof:3,ru:11,rwk:3,sah:0,saq:3,se:7,seh:3,ses:0,sg:0,sh:11,shi:19,sk:12,sl:14,sma:7,smi:7,smj:7,smn:7,sms:7,sn:3,so:3,sq:3,sr:11,ss:3,ssy:3,st:3,sv:3,sw:3,syr:3,ta:3,te:3,teo:3,th:0,ti:4,tig:3,tk:3,tl:4,tn:3,to:0,tr:0,ts:3,tzm:22,uk:11,ur:3,ve:3,vi:0,vun:3,wa:4,wae:3,wo:0,xh:3,xog:3,yo:0,zh:0,zu:3};function O(I,ce){return ce.indexOf(I)!==-1}function y(I,ce,we){return ce<=I&&I<=we}var B={0:function(I){return"other"},1:function(I){return y(I%100,3,10)?"few":I===0?"zero":y(I%100,11,99)?"many":I==2?"two":I==1?"one":"other"},2:function(I){return I!==0&&I%10===0?"many":I==2?"two":I==1?"one":"other"},3:function(I){return I==1?"one":"other"},4:function(I){return y(I,0,1)?"one":"other"},5:function(I){return y(I,0,2)&&I!=2?"one":"other"},6:function(I){return I===0?"zero":I%10==1&&I%100!=11?"one":"other"},7:function(I){return I==2?"two":I==1?"one":"other"},8:function(I){return y(I,3,6)?"few":y(I,7,10)?"many":I==2?"two":I==1?"one":"other"},9:function(I){return I===0||I!=1&&y(I%100,1,19)?"few":I==1?"one":"other"},10:function(I){return y(I%10,2,9)&&!y(I%100,11,19)?"few":I%10==1&&!y(I%100,11,19)?"one":"other"},11:function(I){return y(I%10,2,4)&&!y(I%100,12,14)?"few":I%10===0||y(I%10,5,9)||y(I%100,11,14)?"many":I%10==1&&I%100!=11?"one":"other"},12:function(I){return y(I,2,4)?"few":I==1?"one":"other"},13:function(I){return y(I%10,2,4)&&!y(I%100,12,14)?"few":I!=1&&y(I%10,0,1)||y(I%10,5,9)||y(I%100,12,14)?"many":I==1?"one":"other"},14:function(I){return y(I%100,3,4)?"few":I%100==2?"two":I%100==1?"one":"other"},15:function(I){return I===0||y(I%100,2,10)?"few":y(I%100,11,19)?"many":I==1?"one":"other"},16:function(I){return I%10==1&&I!=11?"one":"other"},17:function(I){return I==3?"few":I===0?"zero":I==6?"many":I==2?"two":I==1?"one":"other"},18:function(I){return I===0?"zero":y(I,0,2)&&I!==0&&I!=2?"one":"other"},19:function(I){return y(I,2,10)?"few":y(I,0,1)?"one":"other"},20:function(I){return(y(I%10,3,4)||I%10==9)&&!(y(I%100,10,19)||y(I%100,70,79)||y(I%100,90,99))?"few":I%1e6===0&&I!==0?"many":I%10==2&&!O(I%100,[12,72,92])?"two":I%10==1&&!O(I%100,[11,71,91])?"one":"other"},21:function(I){return I===0?"zero":I==1?"one":"other"},22:function(I){return y(I,0,1)||y(I,11,99)?"one":"other"},23:function(I){return y(I%10,1,2)||I%20===0?"one":"other"},24:function(I){return y(I,3,10)||y(I,13,19)?"few":O(I,[2,12])?"two":O(I,[1,11])?"one":"other"}},$=E[V.replace(/-.*$/,"")];return $ in B?B[$]:(console.warn("plural form unknown for ["+V+"]"),function(){return"other"})}S.plural=function(V,E,O,y){var B=parseFloat(E);if(isNaN(B)||y!=l)return V;S._pluralRules||(S._pluralRules=u(L));var $="["+S._pluralRules(B)+"]";return B===0&&O+"[zero]"in C?V=C[O+"[zero]"][y]:B==1&&O+"[one]"in C?V=C[O+"[one]"][y]:B==2&&O+"[two]"in C?V=C[O+"[two]"][y]:O+$ in C?V=C[O+$][y]:O+"[other]"in C&&(V=C[O+"[other]"][y]),V};function c(V,E,O){var y=C[V];if(!y){if(console.warn("#"+V+" is undefined."),!O)return null;y=O}var B={};for(var $ in y){var I=y[$];I=o(I,E,V,$),I=h(I,E,V),B[$]=I}return B}function o(V,E,O,y){var B=/\{\[\s*([a-zA-Z]+)\(([a-zA-Z]+)\)\s*\]\}/,$=B.exec(V);if(!$||!$.length)return V;var I=$[1],ce=$[2],we;if(E&&ce in E?we=E[ce]:ce in C&&(we=C[ce]),I in S){var q=S[I];V=q(V,we,O,y)}return V}function h(V,E,O){var y=/\{\{\s*(.+?)\s*\}\}/g;return V.replace(y,function(B,$){return E&&$ in E?E[$]:$ in C?C[$]:(console.log("argument {{"+$+"}} for #"+O+" is undefined."),B)})}function g(V){var E=v(V);if(E.id){var O=c(E.id,E.args);if(!O){console.warn("#"+E.id+" is undefined.");return}if(O[l]){if(x(V)===0)V[l]=O[l];else{for(var y=V.childNodes,B=!1,$=0,I=y.length;$<I;$++)y[$].nodeType===3&&/\S/.test(y[$].nodeValue)&&(B?y[$].nodeValue="":(y[$].nodeValue=O[l],B=!0));if(!B){var ce=T.createTextNode(O[l]);V.prepend(ce)}}delete O[l]}for(var we in O)V[we]=O[we]}}function x(V){if(V.children)return V.children.length;if(typeof V.childElementCount<"u")return V.childElementCount;for(var E=0,O=0;O<V.childNodes.length;O++)E+=V.nodeType===1?1:0;return E}function j(V){V=V||T.documentElement;for(var E=m(V),O=E.length,y=0;y<O;y++)g(E[y]);g(V)}return{get:function(V,E,O){var y=V.lastIndexOf("."),B=l;y>0&&(B=V.substring(y+1),V=V.substring(0,y));var $;O&&($={},$[B]=O);var I=c(V,E,$);return I&&B in I?I[B]:"{{"+V+"}}"},getData:function(){return C},getText:function(){return a},getLanguage:function(){return L},setLanguage:function(V,E){i(V,function(){E&&E()})},getDirection:function(){var V=["ar","he","fa","ps","ur"],E=L.split("-",1)[0];return V.indexOf(E)>=0?"rtl":"ltr"},translate:j,getReadyState:function(){return w},ready:function(V){if(V)w=="complete"||w=="interactive"?oe.setTimeout(function(){V()}):T.addEventListener&&T.addEventListener("localized",function E(){T.removeEventListener("localized",E),V()});else return}}}(window,document)},(oe,T,C)=>{Object.defineProperty(T,"__esModule",{value:!0}),T.GenericScripting=void 0,T.docProperties=l;var a=C(5);async function l(S){const w="",e=w.split("#")[0];let{info:r,metadata:d,contentDispositionFilename:m,contentLength:v}=await S.getMetadata();if(!v){const{length:f}=await S.getDownloadInfo();v=f}return{...r,baseURL:e,filesize:v,filename:m||(0,a.getPdfFilenameFromUrl)(w),metadata:d==null?void 0:d.getRaw(),authors:d==null?void 0:d.get("dc:creator"),numPages:S.numPages,URL:w}}class L{constructor(w){this._ready=(0,a.loadScript)(w,!0).then(()=>window.pdfjsSandbox.QuickJSSandbox())}async createSandbox(w){(await this._ready).create(w)}async dispatchEventInSandbox(w){const e=await this._ready;setTimeout(()=>e.dispatchEvent(w),0)}async destroySandbox(){(await this._ready).nukeSandbox()}}T.GenericScripting=L},(oe,T,C)=>{Object.defineProperty(T,"__esModule",{value:!0}),T.bindPrintServiceFactory=u;var a=C(5),l=C(52),L=C(1);let S=null,w=null,e=null;function r(c,o,h,g,x,j,V){const E=S.scratchCanvas,O=x/a.PixelsPerInch.PDF;E.width=Math.floor(g.width*O),E.height=Math.floor(g.height*O);const y=E.getContext("2d");return y.save(),y.fillStyle="rgb(255, 255, 255)",y.fillRect(0,0,E.width,E.height),y.restore(),Promise.all([o.getPage(h),V]).then(function([B,$]){const I={canvasContext:y,transform:[O,0,0,O,0,0],viewport:B.getViewport({scale:1,rotation:g.rotation}),intent:"print",annotationMode:a.AnnotationMode.ENABLE_STORAGE,optionalContentConfigPromise:j,printAnnotationStorage:$};return B.render(I).promise})}class d{constructor(o,h,g,x,j=null,V=null,E){this.pdfDocument=o,this.pagesOverview=h,this.printContainer=g,this._printResolution=x||150,this._optionalContentConfigPromise=j||o.getOptionalContentConfig(),this._printAnnotationStoragePromise=V||Promise.resolve(),this.l10n=E,this.currentPage=-1,this.scratchCanvas=document.createElement("canvas")}layout(){this.throwIfInactive();const o=document.querySelector("body");o.setAttribute("data-pdfjsprinting",!0);const{width:h,height:g}=this.pagesOverview[0];this.pagesOverview.every(j=>j.width===h&&j.height===g)||console.warn("Not all pages have the same size. The printed result may be incorrect!"),this.pageStyleSheet=document.createElement("style"),this.pageStyleSheet.textContent=`@page { size: ${h}pt ${g}pt;}`,o.append(this.pageStyleSheet)}destroy(){if(S!==this)return;this.printContainer.textContent="",document.querySelector("body").removeAttribute("data-pdfjsprinting"),this.pageStyleSheet&&(this.pageStyleSheet.remove(),this.pageStyleSheet=null),this.scratchCanvas.width=this.scratchCanvas.height=0,this.scratchCanvas=null,S=null,n().then(function(){e.active===w&&e.close(w)})}renderPages(){if(this.pdfDocument.isPureXfa)return(0,l.getXfaHtmlForPrinting)(this.printContainer,this.pdfDocument),Promise.resolve();const o=this.pagesOverview.length,h=(g,x)=>{if(this.throwIfInactive(),++this.currentPage>=o){b(o,o,this.l10n),g();return}const j=this.currentPage;b(j,o,this.l10n),r(this,this.pdfDocument,j+1,this.pagesOverview[j],this._printResolution,this._optionalContentConfigPromise,this._printAnnotationStoragePromise).then(this.useRenderedPage.bind(this)).then(function(){h(g,x)},x)};return new Promise(h)}useRenderedPage(){this.throwIfInactive();const o=document.createElement("img"),h=this.scratchCanvas;"toBlob"in h?h.toBlob(function(x){o.src=URL.createObjectURL(x)}):o.src=h.toDataURL();const g=document.createElement("div");return g.className="printedPage",g.append(o),this.printContainer.append(g),new Promise(function(x,j){o.onload=x,o.onerror=j})}performPrint(){return this.throwIfInactive(),new Promise(o=>{setTimeout(()=>{if(!this.active){o();return}m.call(window),setTimeout(o,20)},0)})}get active(){return this===S}throwIfInactive(){if(!this.active)throw new Error("This print request was cancelled or completed.")}}const m=window.print;window.print=function(){if(S){console.warn("Ignored window.print() because of a pending print job.");return}n().then(function(){S&&e.open(w)});try{v("beforeprint")}finally{if(!S){console.error("Expected print service to be initialized."),n().then(function(){e.active===w&&e.close(w)});return}const c=S;S.renderPages().then(function(){return c.performPrint()}).catch(function(){}).then(function(){c.active&&f()})}};function v(c){const o=new CustomEvent(c,{bubbles:!1,cancelable:!1,detail:"custom"});window.dispatchEvent(o)}function f(){S&&(S.destroy(),v("afterprint"))}function b(c,o,h){const g=(0,L.getActiveApp)();w||(w=g.appConfig.appContainer.querySelector(".printServiceDialog"));const x=Math.round(100*c/o),j=w.querySelector("progress"),V=w.querySelector(".relative-progress");j.value=x,h.get("print_progress_percent",{progress:x}).then(E=>{V.textContent=E})}if(window.addEventListener("keydown",function(c){c.keyCode===80&&(c.ctrlKey||c.metaKey)&&!c.altKey&&(!c.shiftKey||window.chrome||window.opera)&&(window.print(),c.preventDefault(),c.stopImmediatePropagation())},!0),"onbeforeprint"in window){const c=function(o){o.detail!=="custom"&&o.stopImmediatePropagation()};window.addEventListener("beforeprint",c),window.addEventListener("afterprint",c)}let i;function n(){if(!i){const c=(0,L.getActiveApp)();if(e=c.overlayManager,!e)throw new Error("The overlay manager has not yet been initialized.");w||(w=c.appConfig.appContainer.querySelector(".printServiceDialog")),i=e.register(w,!0),c.appConfig.appContainer.querySelector(".printCancel").onclick=f,w.addEventListener("close",f)}return i}function u(c){c.instance={supportsPrinting:!0,createPrintService(o,h,g,x,j,V,E){if(S)throw new Error("The print service is created and active.");return S=new d(o,h,g,x,j,V,E),S}}}},(oe,T,C)=>{Object.defineProperty(T,"__esModule",{value:!0}),T.getXfaHtmlForPrinting=S;var a=C(5),l=C(11),L=C(39);function S(w,e){const r=e.allXfaHtml,d=new l.SimpleLinkService,m=Math.round(a.PixelsPerInch.PDF_TO_CSS_UNITS*100)/100;for(const v of r.children){const f=document.createElement("div");f.className="xfaPrintedPage",w.append(f);const b=new L.XfaLayerBuilder({pageDiv:f,pdfPage:null,annotationStorage:e.annotationStorage,linkService:d,xfaHtml:v}),i=(0,a.getXfaPageViewport)(v,{scale:m});b.render(i,"print")}}},(oe,T)=>{Object.defineProperty(T,"__esModule",{value:!0}),T.injectLocaleResource=C;function C(a){const l="application/l10n";let L=document.querySelector(`link[type="${l}"]`);L&&L.getAttribute("href")===a||(L=document.createElement("link"),L.rel="resource",L.type=l,L.href=a,document.head.appendChild(L))}},(oe,T)=>{Object.defineProperty(T,"__esModule",{value:!0}),T.default=void 0;const C=`
<div data-dom-id="outerContainer" class="outerContainer">
  <div data-dom-id="sidebarContainer" class="sidebarContainer">
    <div data-dom-id="toolbarSidebar" class="toolbarSidebar">
      <div data-dom-id="toolbarSidebarLeft" class="toolbarSidebarLeft">
        <div
          role="radiogroup"
          data-dom-id="sidebarViewButtons"
          class="splitToolbarButton toggled sidebarViewButtons"
        >
          <button
            title="Show Thumbnails"
            tabindex="2"
            data-l10n-id="thumbs"
            role="radio"
            aria-checked="true"
            aria-controls="thumbnailView"
            data-dom-id="viewThumbnail"
            class="toolbarButton toggled viewThumbnail"
          >
            <span data-l10n-id="thumbs_label">Thumbnails</span></button
          ><button
            title="Show Document Outline (double-click to expand/collapse all items)"
            tabindex="3"
            data-l10n-id="document_outline"
            role="radio"
            aria-checked="false"
            aria-controls="outlineView"
            data-dom-id="viewOutline"
            class="toolbarButton viewOutline"
          >
            <span data-l10n-id="document_outline_label"
              >Document Outline</span
            ></button
          ><button
            title="Show Attachments"
            tabindex="4"
            data-l10n-id="attachments"
            role="radio"
            aria-checked="false"
            aria-controls="attachmentsView"
            data-dom-id="viewAttachments"
            class="toolbarButton viewAttachments"
          >
            <span data-l10n-id="attachments_label">Attachments</span></button
          ><button
            title="Show Layers (double-click to reset all layers to the default state)"
            tabindex="5"
            data-l10n-id="layers"
            role="radio"
            aria-checked="false"
            aria-controls="layersView"
            data-dom-id="viewLayers"
            class="toolbarButton viewLayers"
          >
            <span data-l10n-id="layers_label">Layers</span>
          </button>
        </div>
      </div>
      <div data-dom-id="toolbarSidebarRight" class="toolbarSidebarRight">
        <div
          data-dom-id="outlineOptionsContainer"
          class="hidden outlineOptionsContainer"
        >
          <div class="verticalToolbarSeparator"></div>
          <button
            disabled="disabled"
            title="Find Current Outline Item"
            tabindex="6"
            data-l10n-id="current_outline_item"
            data-dom-id="currentOutlineItem"
            class="toolbarButton currentOutlineItem"
          >
            <span data-l10n-id="current_outline_item_label"
              >Current Outline Item</span
            >
          </button>
        </div>
      </div>
    </div>
    <div data-dom-id="sidebarContent" class="sidebarContent">
      <div data-dom-id="thumbnailView" class="thumbnailView"></div>
      <div data-dom-id="outlineView" class="hidden outlineView"></div>
      <div data-dom-id="attachmentsView" class="hidden attachmentsView"></div>
      <div data-dom-id="layersView" class="hidden layersView"></div>
    </div>
    <div data-dom-id="sidebarResizer" class="sidebarResizer"></div>
  </div>
  <!-- sidebarContainer -->
  <div data-dom-id="mainContainer" class="mainContainer">
    <div class="findbar hidden doorHanger" data-dom-id="findbar">
      <div data-dom-id="findbarInputContainer" class="findbarInputContainer">
        <input
          title="Find"
          placeholder="Find in document…"
          tabindex="91"
          data-l10n-id="find_input"
          aria-invalid="false"
          data-dom-id="findInput"
          class="toolbarField findInput"
        />
        <div class="splitToolbarButton">
          <button
            title="Find the previous occurrence of the phrase"
            tabindex="92"
            data-l10n-id="find_previous"
            data-dom-id="findPrevious"
            class="toolbarButton findPrevious"
          >
            <span data-l10n-id="find_previous_label">Previous</span>
          </button>
          <div class="splitToolbarButtonSeparator"></div>
          <button
            title="Find the next occurrence of the phrase"
            tabindex="93"
            data-l10n-id="find_next"
            data-dom-id="findNext"
            class="toolbarButton findNext"
          >
            <span data-l10n-id="find_next_label">Next</span>
          </button>
        </div>
      </div>
      <div
        data-dom-id="findbarOptionsOneContainer"
        class="findbarOptionsOneContainer"
      >
        <label
          ><input
            type="checkbox"
            tabindex="94"
            data-dom-id="findHighlightAll"
            class="toolbarField findHighlightAll"
          /><span class="toolbarLabel" data-l10n-id="find_highlight"
            >Highlight All</span
          ></label
        ><!--Removed!--><label
          ><input
            type="checkbox"
            tabindex="95"
            data-dom-id="findMatchCase"
            class="toolbarField findMatchCase"
          /><span class="toolbarLabel" data-l10n-id="find_match_case_label"
            >Match Case</span
          ></label
        ><!--Removed!-->
      </div>
      <div
        data-dom-id="findbarOptionsTwoContainer"
        class="findbarOptionsTwoContainer"
      >
        <label
          ><input
            type="checkbox"
            tabindex="96"
            data-dom-id="findMatchDiacritics"
            class="toolbarField findMatchDiacritics"
          /><span
            class="toolbarLabel"
            data-l10n-id="find_match_diacritics_label"
            >Match Diacritics</span
          ></label
        ><!--Removed!--><label
          ><input
            type="checkbox"
            tabindex="97"
            data-dom-id="findEntireWord"
            class="toolbarField findEntireWord"
          /><span class="toolbarLabel" data-l10n-id="find_entire_word_label"
            >Whole Words</span
          ></label
        ><!--Removed!-->
      </div>
      <div
        aria-live="polite"
        data-dom-id="findbarMessageContainer"
        class="findbarMessageContainer"
      >
        <span
          data-dom-id="findResultsCount"
          class="toolbarLabel findResultsCount"
        ></span
        ><span data-dom-id="findMsg" class="toolbarLabel findMsg"></span>
      </div>
    </div>
    <!-- findbar -->
    <div
      data-dom-id="editorFreeTextParamsToolbar"
      class="editorParamsToolbar hidden doorHangerRight editorFreeTextParamsToolbar"
    >
      <div class="editorParamsToolbarContainer">
        <div class="editorParamsSetter">
          <!--Removed!--><label
            ><input
              type="color"
              tabindex="100"
              data-dom-id="editorFreeTextColor"
              class="editorParamsColor editorFreeTextColor"
            /><span class="toolbarLabel" data-l10n-id="editor_free_text_color"
              >Color</span
            ></label
          >
        </div>
        <div class="editorParamsSetter">
          <!--Removed!--><label
            ><input
              type="range"
              value="10"
              min="5"
              max="100"
              step="1"
              tabindex="101"
              data-dom-id="editorFreeTextFontSize"
              class="editorParamsSlider editorFreeTextFontSize"
            /><span class="toolbarLabel" data-l10n-id="editor_free_text_size"
              >Size</span
            ></label
          >
        </div>
      </div>
    </div>
    <div
      data-dom-id="editorInkParamsToolbar"
      class="editorParamsToolbar hidden doorHangerRight editorInkParamsToolbar"
    >
      <div class="editorParamsToolbarContainer">
        <div class="editorParamsSetter">
          <!--Removed!--><label
            ><input
              type="color"
              tabindex="102"
              data-dom-id="editorInkColor"
              class="editorParamsColor editorInkColor"
            /><span class="toolbarLabel" data-l10n-id="editor_ink_color"
              >Color</span
            ></label
          >
        </div>
        <div class="editorParamsSetter">
          <!--Removed!--><label
            ><input
              type="range"
              value="1"
              min="1"
              max="20"
              step="1"
              tabindex="103"
              data-dom-id="editorInkThickness"
              class="editorParamsSlider editorInkThickness"
            /><span class="toolbarLabel" data-l10n-id="editor_ink_thickness"
              >Thickness</span
            ></label
          >
        </div>
        <div class="editorParamsSetter">
          <!--Removed!--><label
            ><input
              type="range"
              value="100"
              min="1"
              max="100"
              step="1"
              tabindex="104"
              data-dom-id="editorInkOpacity"
              class="editorParamsSlider editorInkOpacity"
            /><span class="toolbarLabel" data-l10n-id="editor_ink_opacity"
              >Opacity</span
            ></label
          >
        </div>
      </div>
    </div>
    <div
      class="secondaryToolbar hidden doorHangerRight"
      data-dom-id="secondaryToolbar"
    >
      <div
        data-dom-id="secondaryToolbarButtonContainer"
        class="secondaryToolbarButtonContainer"
      >
        <!--#if GENERIC--><button
          title="Open File"
          tabindex="51"
          data-l10n-id="open_file"
          data-dom-id="secondaryOpenFile"
          class="secondaryToolbarButton visibleLargeView secondaryOpenFile"
        >
          <span data-l10n-id="open_file_label">Open</span></button
        ><!--#endif--><button
          title="Print"
          tabindex="52"
          data-l10n-id="print"
          data-dom-id="secondaryPrint"
          class="secondaryToolbarButton visibleMediumView secondaryPrint"
        >
          <span data-l10n-id="print_label">Print</span></button
        ><button
          title="Save"
          tabindex="53"
          data-l10n-id="save"
          data-dom-id="secondaryDownload"
          class="secondaryToolbarButton visibleMediumView secondaryDownload"
        >
          <span data-l10n-id="save_label">Save</span></button
        ><!--#if GENERIC-->
        <div class="horizontalToolbarSeparator visibleLargeView"></div>
        <!--#else--><!--        <div class="horizontalToolbarSeparator visibleMediumView"></div>--><!--#endif--><button
          title="Switch to Presentation Mode"
          tabindex="54"
          data-l10n-id="presentation_mode"
          data-dom-id="presentationMode"
          class="secondaryToolbarButton presentationMode"
        >
          <span data-l10n-id="presentation_mode_label"
            >Presentation Mode</span
          ></button
        ><a
          href="#"
          title="Current Page (View URL from Current Page)"
          tabindex="55"
          data-l10n-id="bookmark1"
          data-dom-id="viewBookmark"
          class="secondaryToolbarButton viewBookmark"
          ><span data-l10n-id="bookmark1_label">Current Page</span></a
        >
        <div
          data-dom-id="viewBookmarkSeparator"
          class="horizontalToolbarSeparator viewBookmarkSeparator"
        ></div>
        <button
          title="Go to First Page"
          tabindex="56"
          data-l10n-id="first_page"
          data-dom-id="firstPage"
          class="secondaryToolbarButton firstPage"
        >
          <span data-l10n-id="first_page_label">Go to First Page</span></button
        ><button
          title="Go to Last Page"
          tabindex="57"
          data-l10n-id="last_page"
          data-dom-id="lastPage"
          class="secondaryToolbarButton lastPage"
        >
          <span data-l10n-id="last_page_label">Go to Last Page</span>
        </button>
        <div class="horizontalToolbarSeparator"></div>
        <button
          title="Rotate Clockwise"
          tabindex="58"
          data-l10n-id="page_rotate_cw"
          data-dom-id="pageRotateCw"
          class="secondaryToolbarButton pageRotateCw"
        >
          <span data-l10n-id="page_rotate_cw_label"
            >Rotate Clockwise</span
          ></button
        ><button
          title="Rotate Counterclockwise"
          tabindex="59"
          data-l10n-id="page_rotate_ccw"
          data-dom-id="pageRotateCcw"
          class="secondaryToolbarButton pageRotateCcw"
        >
          <span data-l10n-id="page_rotate_ccw_label"
            >Rotate Counterclockwise</span
          >
        </button>
        <div class="horizontalToolbarSeparator"></div>
        <div
          role="radiogroup"
          data-dom-id="cursorToolButtons"
          class="cursorToolButtons"
        >
          <button
            title="Enable Text Selection Tool"
            tabindex="60"
            data-l10n-id="cursor_text_select_tool"
            role="radio"
            aria-checked="true"
            data-dom-id="cursorSelectTool"
            class="secondaryToolbarButton toggled cursorSelectTool"
          >
            <span data-l10n-id="cursor_text_select_tool_label"
              >Text Selection Tool</span
            ></button
          ><button
            title="Enable Hand Tool"
            tabindex="61"
            data-l10n-id="cursor_hand_tool"
            role="radio"
            aria-checked="false"
            data-dom-id="cursorHandTool"
            class="secondaryToolbarButton cursorHandTool"
          >
            <span data-l10n-id="cursor_hand_tool_label">Hand Tool</span>
          </button>
        </div>
        <div class="horizontalToolbarSeparator"></div>
        <div
          role="radiogroup"
          data-dom-id="scrollModeButtons"
          class="scrollModeButtons"
        >
          <button
            title="Use Page Scrolling"
            tabindex="62"
            data-l10n-id="scroll_page"
            role="radio"
            aria-checked="false"
            data-dom-id="scrollPage"
            class="secondaryToolbarButton scrollPage"
          >
            <span data-l10n-id="scroll_page_label">Page Scrolling</span></button
          ><button
            title="Use Vertical Scrolling"
            tabindex="63"
            data-l10n-id="scroll_vertical"
            role="radio"
            aria-checked="true"
            data-dom-id="scrollVertical"
            class="secondaryToolbarButton toggled scrollVertical"
          >
            <span data-l10n-id="scroll_vertical_label"
              >Vertical Scrolling</span
            ></button
          ><button
            title="Use Horizontal Scrolling"
            tabindex="64"
            data-l10n-id="scroll_horizontal"
            role="radio"
            aria-checked="false"
            data-dom-id="scrollHorizontal"
            class="secondaryToolbarButton scrollHorizontal"
          >
            <span data-l10n-id="scroll_horizontal_label"
              >Horizontal Scrolling</span
            ></button
          ><button
            title="Use Wrapped Scrolling"
            tabindex="65"
            data-l10n-id="scroll_wrapped"
            role="radio"
            aria-checked="false"
            data-dom-id="scrollWrapped"
            class="secondaryToolbarButton scrollWrapped"
          >
            <span data-l10n-id="scroll_wrapped_label">Wrapped Scrolling</span>
          </button>
        </div>
        <div class="horizontalToolbarSeparator"></div>
        <div
          role="radiogroup"
          data-dom-id="spreadModeButtons"
          class="spreadModeButtons"
        >
          <button
            title="Do not join page spreads"
            tabindex="66"
            data-l10n-id="spread_none"
            role="radio"
            aria-checked="true"
            data-dom-id="spreadNone"
            class="secondaryToolbarButton toggled spreadNone"
          >
            <span data-l10n-id="spread_none_label">No Spreads</span></button
          ><button
            title="Join page spreads starting with odd-numbered pages"
            tabindex="67"
            data-l10n-id="spread_odd"
            role="radio"
            aria-checked="false"
            data-dom-id="spreadOdd"
            class="secondaryToolbarButton spreadOdd"
          >
            <span data-l10n-id="spread_odd_label">Odd Spreads</span></button
          ><button
            title="Join page spreads starting with even-numbered pages"
            tabindex="68"
            data-l10n-id="spread_even"
            role="radio"
            aria-checked="false"
            data-dom-id="spreadEven"
            class="secondaryToolbarButton spreadEven"
          >
            <span data-l10n-id="spread_even_label">Even Spreads</span>
          </button>
        </div>
        <div class="horizontalToolbarSeparator"></div>
        <button
          title="Document Properties…"
          tabindex="69"
          data-l10n-id="document_properties"
          aria-controls="documentPropertiesDialog"
          data-dom-id="documentProperties"
          class="secondaryToolbarButton documentProperties"
        >
          <span data-l10n-id="document_properties_label"
            >Document Properties…</span
          >
        </button>
      </div>
    </div>
    <!-- secondaryToolbar -->
    <div class="toolbar">
      <div data-dom-id="toolbarContainer" class="toolbarContainer">
        <div data-dom-id="toolbarViewer" class="toolbarViewer">
          <div data-dom-id="toolbarViewerLeft" class="toolbarViewerLeft">
            <button
              title="Toggle Sidebar"
              tabindex="11"
              data-l10n-id="toggle_sidebar"
              aria-expanded="false"
              aria-controls="sidebarContainer"
              data-dom-id="sidebarToggle"
              class="toolbarButton sidebarToggle"
            >
              <span data-l10n-id="toggle_sidebar_label">Toggle Sidebar</span>
            </button>
            <div class="toolbarButtonSpacer"></div>
            <button
              title="Find in Document"
              tabindex="12"
              data-l10n-id="findbar"
              aria-expanded="false"
              aria-controls="findbar"
              data-dom-id="viewFind"
              class="toolbarButton viewFind"
            >
              <span data-l10n-id="findbar_label">Find</span>
            </button>
            <div class="splitToolbarButton hiddenSmallView">
              <button
                title="Previous Page"
                tabindex="13"
                data-l10n-id="previous"
                data-dom-id="previous"
                class="toolbarButton previous"
              >
                <span data-l10n-id="previous_label">Previous</span>
              </button>
              <div class="splitToolbarButtonSeparator"></div>
              <button
                title="Next Page"
                tabindex="14"
                data-l10n-id="next"
                data-dom-id="next"
                class="toolbarButton next"
              >
                <span data-l10n-id="next_label">Next</span>
              </button>
            </div>
            <input
              type="number"
              title="Page"
              value="1"
              min="1"
              tabindex="15"
              data-l10n-id="page"
              autocomplete="off"
              data-dom-id="pageNumber"
              class="toolbarField pageNumber"
            /><span data-dom-id="numPages" class="toolbarLabel numPages"></span>
          </div>
          <div data-dom-id="toolbarViewerRight" class="toolbarViewerRight">
            <!--#if GENERIC--><button
              title="Open File"
              tabindex="31"
              data-l10n-id="open_file"
              data-dom-id="openFile"
              class="toolbarButton hiddenLargeView openFile"
            >
              <span data-l10n-id="open_file_label">Open</span></button
            ><!--#endif--><button
              title="Print"
              tabindex="32"
              data-l10n-id="print"
              data-dom-id="print"
              class="toolbarButton hiddenMediumView print"
            >
              <span data-l10n-id="print_label">Print</span></button
            ><button
              title="Save"
              tabindex="33"
              data-l10n-id="save"
              data-dom-id="download"
              class="toolbarButton hiddenMediumView download"
            >
              <span data-l10n-id="save_label">Save</span>
            </button>
            <div class="verticalToolbarSeparator hiddenMediumView"></div>
            <div
              role="radiogroup"
              data-dom-id="editorModeButtons"
              class="splitToolbarButton toggled editorModeButtons"
            >
              <button
                disabled="disabled"
                title="Image"
                role="radio"
                aria-checked="false"
                tabindex="34"
                data-l10n-id="editor_stamp"
                data-dom-id="editorStamp"
                class="toolbarButton hidden editorStamp"
              >
                <span data-l10n-id="editor_stamp_label">Image</span></button
              ><button
                disabled="disabled"
                title="Text"
                role="radio"
                aria-checked="false"
                aria-controls="editorFreeTextParamsToolbar"
                tabindex="35"
                data-l10n-id="editor_free_text2"
                data-dom-id="editorFreeText"
                class="toolbarButton editorFreeText"
              >
                <span data-l10n-id="editor_free_text2_label">Text</span></button
              ><button
                disabled="disabled"
                title="Draw"
                role="radio"
                aria-checked="false"
                aria-controls="editorInkParamsToolbar"
                tabindex="36"
                data-l10n-id="editor_ink2"
                data-dom-id="editorInk"
                class="toolbarButton editorInk"
              >
                <span data-l10n-id="editor_ink2_label">Draw</span>
              </button>
            </div>
            <div
              data-dom-id="editorModeSeparator"
              class="verticalToolbarSeparator editorModeSeparator"
            ></div>
            <button
              title="Tools"
              tabindex="48"
              data-l10n-id="tools"
              aria-expanded="false"
              aria-controls="secondaryToolbar"
              data-dom-id="secondaryToolbarToggle"
              class="toolbarButton secondaryToolbarToggle"
            >
              <span data-l10n-id="tools_label">Tools</span>
            </button>
          </div>
          <div data-dom-id="toolbarViewerMiddle" class="toolbarViewerMiddle">
            <div class="splitToolbarButton">
              <button
                title="Zoom Out"
                tabindex="21"
                data-l10n-id="zoom_out"
                data-dom-id="zoomOut"
                class="toolbarButton zoomOut"
              >
                <span data-l10n-id="zoom_out_label">Zoom Out</span>
              </button>
              <div class="splitToolbarButtonSeparator"></div>
              <button
                title="Zoom In"
                tabindex="22"
                data-l10n-id="zoom_in"
                data-dom-id="zoomIn"
                class="toolbarButton zoomIn"
              >
                <span data-l10n-id="zoom_in_label">Zoom In</span>
              </button>
            </div>
            <span
              data-dom-id="scaleSelectContainer"
              class="dropdownToolbarButton scaleSelectContainer"
              ><select
                title="Zoom"
                tabindex="23"
                data-l10n-id="zoom"
                data-dom-id="scaleSelect"
                class="scaleSelect"
              >
                <option
                  id="pageAutoOption"
                  title=""
                  value="auto"
                  selected="selected"
                  data-l10n-id="page_scale_auto"
                >
                  Automatic Zoom
                </option>
                <option
                  id="pageActualOption"
                  title=""
                  value="page-actual"
                  data-l10n-id="page_scale_actual"
                >
                  Actual Size
                </option>
                <option
                  id="pageFitOption"
                  title=""
                  value="page-fit"
                  data-l10n-id="page_scale_fit"
                >
                  Page Fit
                </option>
                <option
                  id="pageWidthOption"
                  title=""
                  value="page-width"
                  data-l10n-id="page_scale_width"
                >
                  Page Width
                </option>
                <option
                  id="customScaleOption"
                  title=""
                  value="custom"
                  disabled="disabled"
                  hidden="true"
                ></option>
                <option
                  title=""
                  value="0.5"
                  data-l10n-id="page_scale_percent"
                  data-l10n-args='{ "scale": 50 }'
                >
                  50%
                </option>
                <option
                  title=""
                  value="0.75"
                  data-l10n-id="page_scale_percent"
                  data-l10n-args='{ "scale": 75 }'
                >
                  75%
                </option>
                <option
                  title=""
                  value="1"
                  data-l10n-id="page_scale_percent"
                  data-l10n-args='{ "scale": 100 }'
                >
                  100%
                </option>
                <option
                  title=""
                  value="1.25"
                  data-l10n-id="page_scale_percent"
                  data-l10n-args='{ "scale": 125 }'
                >
                  125%
                </option>
                <option
                  title=""
                  value="1.5"
                  data-l10n-id="page_scale_percent"
                  data-l10n-args='{ "scale": 150 }'
                >
                  150%
                </option>
                <option
                  title=""
                  value="2"
                  data-l10n-id="page_scale_percent"
                  data-l10n-args='{ "scale": 200 }'
                >
                  200%
                </option>
                <option
                  title=""
                  value="3"
                  data-l10n-id="page_scale_percent"
                  data-l10n-args='{ "scale": 300 }'
                >
                  300%
                </option>
                <option
                  title=""
                  value="4"
                  data-l10n-id="page_scale_percent"
                  data-l10n-args='{ "scale": 400 }'
                >
                  400%
                </option>
              </select></span
            >
          </div>
        </div>
        <div data-dom-id="loadingBar" class="loadingBar">
          <div class="progress"><div class="glimmer"></div></div>
        </div>
      </div>
    </div>
    <div tabindex="0" data-dom-id="viewerContainer" class="viewerContainer">
      <div data-dom-id="viewer" class="pdfViewer viewer"></div>
    </div>
  </div>
  <!-- mainContainer -->
  <div data-dom-id="dialogContainer" class="dialogContainer">
    <dialog data-dom-id="passwordDialog" class="passwordDialog">
      <div class="row"><!--Removed!--></div>
      <div class="row">
        <input
          type="password"
          data-dom-id="password"
          class="toolbarField password"
        />
      </div>
      <div class="buttonRow">
        <button
          data-dom-id="passwordCancel"
          class="dialogButton passwordCancel"
        >
          <span data-l10n-id="password_cancel">Cancel</span></button
        ><button
          data-dom-id="passwordSubmit"
          class="dialogButton passwordSubmit"
        >
          <span data-l10n-id="password_ok">OK</span>
        </button>
      </div>
    </dialog>
    <dialog
      data-dom-id="documentPropertiesDialog"
      class="documentPropertiesDialog"
    >
      <div class="row">
        <span
          data-l10n-id="document_properties_file_name"
          data-dom-id="fileNameLabel"
          class="fileNameLabel"
          >File name:</span
        >
        <p
          aria-labelledby="fileNameLabel"
          data-dom-id="fileNameField"
          class="fileNameField"
        >
          -
        </p>
      </div>
      <div class="row">
        <span
          data-l10n-id="document_properties_file_size"
          data-dom-id="fileSizeLabel"
          class="fileSizeLabel"
          >File size:</span
        >
        <p
          aria-labelledby="fileSizeLabel"
          data-dom-id="fileSizeField"
          class="fileSizeField"
        >
          -
        </p>
      </div>
      <div class="separator"></div>
      <div class="row">
        <span
          data-l10n-id="document_properties_title"
          data-dom-id="titleLabel"
          class="titleLabel"
          >Title:</span
        >
        <p
          aria-labelledby="titleLabel"
          data-dom-id="titleField"
          class="titleField"
        >
          -
        </p>
      </div>
      <div class="row">
        <span
          data-l10n-id="document_properties_author"
          data-dom-id="authorLabel"
          class="authorLabel"
          >Author:</span
        >
        <p
          aria-labelledby="authorLabel"
          data-dom-id="authorField"
          class="authorField"
        >
          -
        </p>
      </div>
      <div class="row">
        <span
          data-l10n-id="document_properties_subject"
          data-dom-id="subjectLabel"
          class="subjectLabel"
          >Subject:</span
        >
        <p
          aria-labelledby="subjectLabel"
          data-dom-id="subjectField"
          class="subjectField"
        >
          -
        </p>
      </div>
      <div class="row">
        <span
          data-l10n-id="document_properties_keywords"
          data-dom-id="keywordsLabel"
          class="keywordsLabel"
          >Keywords:</span
        >
        <p
          aria-labelledby="keywordsLabel"
          data-dom-id="keywordsField"
          class="keywordsField"
        >
          -
        </p>
      </div>
      <div class="row">
        <span
          data-l10n-id="document_properties_creation_date"
          data-dom-id="creationDateLabel"
          class="creationDateLabel"
          >Creation Date:</span
        >
        <p
          aria-labelledby="creationDateLabel"
          data-dom-id="creationDateField"
          class="creationDateField"
        >
          -
        </p>
      </div>
      <div class="row">
        <span
          data-l10n-id="document_properties_modification_date"
          data-dom-id="modificationDateLabel"
          class="modificationDateLabel"
          >Modification Date:</span
        >
        <p
          aria-labelledby="modificationDateLabel"
          data-dom-id="modificationDateField"
          class="modificationDateField"
        >
          -
        </p>
      </div>
      <div class="row">
        <span
          data-l10n-id="document_properties_creator"
          data-dom-id="creatorLabel"
          class="creatorLabel"
          >Creator:</span
        >
        <p
          aria-labelledby="creatorLabel"
          data-dom-id="creatorField"
          class="creatorField"
        >
          -
        </p>
      </div>
      <div class="separator"></div>
      <div class="row">
        <span
          data-l10n-id="document_properties_producer"
          data-dom-id="producerLabel"
          class="producerLabel"
          >PDF Producer:</span
        >
        <p
          aria-labelledby="producerLabel"
          data-dom-id="producerField"
          class="producerField"
        >
          -
        </p>
      </div>
      <div class="row">
        <span
          data-l10n-id="document_properties_version"
          data-dom-id="versionLabel"
          class="versionLabel"
          >PDF Version:</span
        >
        <p
          aria-labelledby="versionLabel"
          data-dom-id="versionField"
          class="versionField"
        >
          -
        </p>
      </div>
      <div class="row">
        <span
          data-l10n-id="document_properties_page_count"
          data-dom-id="pageCountLabel"
          class="pageCountLabel"
          >Page Count:</span
        >
        <p
          aria-labelledby="pageCountLabel"
          data-dom-id="pageCountField"
          class="pageCountField"
        >
          -
        </p>
      </div>
      <div class="row">
        <span
          data-l10n-id="document_properties_page_size"
          data-dom-id="pageSizeLabel"
          class="pageSizeLabel"
          >Page Size:</span
        >
        <p
          aria-labelledby="pageSizeLabel"
          data-dom-id="pageSizeField"
          class="pageSizeField"
        >
          -
        </p>
      </div>
      <div class="separator"></div>
      <div class="row">
        <span
          data-l10n-id="document_properties_linearized"
          data-dom-id="linearizedLabel"
          class="linearizedLabel"
          >Fast Web View:</span
        >
        <p
          aria-labelledby="linearizedLabel"
          data-dom-id="linearizedField"
          class="linearizedField"
        >
          -
        </p>
      </div>
      <div class="buttonRow">
        <button
          data-dom-id="documentPropertiesClose"
          class="dialogButton documentPropertiesClose"
        >
          <span data-l10n-id="document_properties_close">Close</span>
        </button>
      </div>
    </dialog>
    <!--#if !MOZCENTRAL-->
    <dialog
      style="min-width: 200px"
      data-dom-id="printServiceDialog"
      class="printServiceDialog"
    >
      <div class="row">
        <span data-l10n-id="print_progress_message"
          >Preparing document for printing…</span
        >
      </div>
      <div class="row">
        <progress value="0" max="100"></progress
        ><span
          data-l10n-id="print_progress_percent"
          data-l10n-args='{ "progress": 0 }'
          class="relative-progress"
          >0%</span
        >
      </div>
      <div class="buttonRow">
        <button data-dom-id="printCancel" class="dialogButton printCancel">
          <span data-l10n-id="print_progress_close">Cancel</span>
        </button>
      </div>
    </dialog>
    <!--#endif--><!--#if CHROME--><!--#include viewer-snippet-chrome-overlays.html--><!--#endif-->
  </div>
  <!-- dialogContainer -->
</div>
<!-- outerContainer -->
<div data-dom-id="printContainer" class="printContainer"></div>
<!--#if GENERIC--><input
  type="file"
  data-dom-id="fileInput"
  class="hidden fileInput"
/><!--#endif-->
`;let a;function l(){if(!a){const S=document.createElement("template");S.innerHTML=C,a=S.content}return document.importNode(a,!0)}var L=l;T.default=L}],N={};function Z(oe){var T=N[oe];if(T!==void 0)return T.exports;var C=N[oe]={exports:{}};return Ae[oe](C,C.exports,Z),C.exports}var Ee={};return(()=>{var C;var oe=Ee;Object.defineProperty(oe,"__esModule",{value:!0}),Object.defineProperty(oe,"createViewerApp",{enumerable:!0,get:function(){return T.createViewerApp}}),Object.defineProperty(oe,"getViewerConfiguration",{enumerable:!0,get:function(){return T.getViewerConfiguration}});var T=Z(1);(C=document.blockUnblockOnload)==null||C.call(document,!0)})(),Ee})())})(app);const viewer="",style="";let src="./document-viewer/web/compressed.tracemonkey-pldi-09.pdf";const appOptions={src,resourcePath:"document-viewer",disableCORSCheck:!0,disableAutoSetTitle:!0};appExports.createViewerApp({parent:document.getElementById("app1"),...appOptions});appExports.createViewerApp({parent:document.getElementById("app2"),...appOptions});
