var Ys=Object.defineProperty;var Zs=(Be,H,Te)=>H in Be?Ys(Be,H,{enumerable:!0,configurable:!0,writable:!0,value:Te}):Be[H]=Te;var Ge=(Be,H,Te)=>(Zs(Be,typeof H!="symbol"?H+"":H,Te),Te),Yt=(Be,H,Te)=>{if(!H.has(Be))throw TypeError("Cannot "+Te)};var e=(Be,H,Te)=>(Yt(Be,H,"read from private field"),Te?Te.call(Be):H.get(Be)),M=(Be,H,Te)=>{if(H.has(Be))throw TypeError("Cannot add the same private member more than once");H instanceof WeakSet?H.add(Be):H.set(Be,Te)},J=(Be,H,Te,N)=>(Yt(Be,H,"write to private field"),N?N.call(Be,Te):H.set(Be,Te),Te),rt=(Be,H,Te,N)=>({set _(Z){J(Be,H,Z,Te)},get _(){return e(Be,H,N)}}),O=(Be,H,Te)=>(Yt(Be,H,"access private method"),Te);(function(){const H=document.createElement("link").relList;if(H&&H.supports&&H.supports("modulepreload"))return;for(const Z of document.querySelectorAll('link[rel="modulepreload"]'))N(Z);new MutationObserver(Z=>{for(const Pe of Z)if(Pe.type==="childList")for(const ae of Pe.addedNodes)ae.tagName==="LINK"&&ae.rel==="modulepreload"&&N(ae)}).observe(document,{childList:!0,subtree:!0});function Te(Z){const Pe={};return Z.integrity&&(Pe.integrity=Z.integrity),Z.referrerPolicy&&(Pe.referrerPolicy=Z.referrerPolicy),Z.crossOrigin==="use-credentials"?Pe.credentials="include":Z.crossOrigin==="anonymous"?Pe.credentials="omit":Pe.credentials="same-origin",Pe}function N(Z){if(Z.ep)return;Z.ep=!0;const Pe=Te(Z);fetch(Z.href,Pe)}})();function getAugmentedNamespace(Be){if(Be.__esModule)return Be;var H=Be.default;if(typeof H=="function"){var Te=function N(){if(this instanceof N){var Z=[null];Z.push.apply(Z,arguments);var Pe=Function.bind.apply(H,Z);return new Pe}return H.apply(this,arguments)};Te.prototype=H.prototype}else Te={};return Object.defineProperty(Te,"__esModule",{value:!0}),Object.keys(Be).forEach(function(N){var Z=Object.getOwnPropertyDescriptor(Be,N);Object.defineProperty(Te,N,Z.get?Z:{enumerable:!0,get:function(){return Be[N]}})}),Te}var appExports={},app={get exports(){return appExports},set exports(Be){appExports=Be}};function commonjsRequire(Be){throw new Error('Could not dynamically require "'+Be+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdfExports={},pdf={get exports(){return pdfExports},set exports(Be){pdfExports=Be}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1),canvas=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),require$$1=getAugmentedNamespace(canvas);var hasRequiredPdf;function requirePdf(){return hasRequiredPdf||(hasRequiredPdf=1,function(module,exports){(function(H,Te){module.exports=H.pdfjsLib=Te()})(globalThis,()=>(()=>{var __webpack_modules__=[,(Be,H)=>{var We;Object.defineProperty(H,"__esModule",{value:!0}),H.VerbosityLevel=H.Util=H.UnknownErrorException=H.UnexpectedResponseException=H.TextRenderingMode=H.RenderingIntentFlag=H.PromiseCapability=H.PermissionFlag=H.PasswordResponses=H.PasswordException=H.PageActionEventType=H.OPS=H.MissingPDFException=H.MAX_IMAGE_SIZE_TO_CACHE=H.LINE_FACTOR=H.LINE_DESCENT_FACTOR=H.InvalidPDFException=H.ImageKind=H.IDENTITY_MATRIX=H.FormatError=H.FeatureTest=H.FONT_IDENTITY_MATRIX=H.DocumentActionEventType=H.CMapCompressionType=H.BaseException=H.BASELINE_FACTOR=H.AnnotationType=H.AnnotationReplyType=H.AnnotationMode=H.AnnotationFlag=H.AnnotationFieldFlag=H.AnnotationEditorType=H.AnnotationEditorPrefix=H.AnnotationEditorParamsType=H.AnnotationBorderStyleType=H.AnnotationActionEventType=H.AbortException=void 0,H.assert=F,H.bytesToString=te,H.createValidAbsoluteUrl=ie,H.getModificationDate=Re,H.getUuid=Xe,H.getVerbosityLevel=V,H.info=q,H.isArrayBuffer=ue,H.isArrayEqual=Ie,H.isNodeJS=void 0,H.normalizeUnicode=Ue,H.objectFromMap=ce,H.objectSize=ne,H.setVerbosityLevel=C,H.shadow=_e,H.string32=ge,H.stringToBytes=Se,H.stringToPDFString=oe,H.stringToUTF8String=Q,H.unreachable=E,H.utf8StringToString=le,H.warn=X;const Te=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");H.isNodeJS=Te;const N=[1,0,0,1,0,0];H.IDENTITY_MATRIX=N;const Z=[.001,0,0,.001,0,0];H.FONT_IDENTITY_MATRIX=Z;const Pe=1e7;H.MAX_IMAGE_SIZE_TO_CACHE=Pe;const ae=1.35;H.LINE_FACTOR=ae;const A=.35;H.LINE_DESCENT_FACTOR=A;const P=A/ae;H.BASELINE_FACTOR=P;const a={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};H.RenderingIntentFlag=a;const l={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};H.AnnotationMode=l;const T="pdfjs_internal_editor_";H.AnnotationEditorPrefix=T;const y={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};H.AnnotationEditorType=y;const S={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};H.AnnotationEditorParamsType=S;const t={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};H.PermissionFlag=t;const r={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};H.TextRenderingMode=r;const d={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};H.ImageKind=d;const p={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};H.AnnotationType=p;const b={GROUP:"Group",REPLY:"R"};H.AnnotationReplyType=b;const f={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};H.AnnotationFlag=f;const m={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};H.AnnotationFieldFlag=m;const i={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};H.AnnotationBorderStyleType=i;const s={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};H.AnnotationActionEventType=s;const h={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};H.DocumentActionEventType=h;const c={O:"PageOpen",C:"PageClose"};H.PageActionEventType=c;const o={ERRORS:0,WARNINGS:1,INFOS:5};H.VerbosityLevel=o;const v={NONE:0,BINARY:1};H.CMapCompressionType=v;const w={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};H.OPS=w;const B={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};H.PasswordResponses=B;let K=o.WARNINGS;function C(Le){Number.isInteger(Le)&&(K=Le)}function V(){return K}function q(Le){K>=o.INFOS&&console.log(`Info: ${Le}`)}function X(Le){K>=o.WARNINGS&&console.log(`Warning: ${Le}`)}function E(Le){throw new Error(Le)}function F(Le,_){Le||E(_)}function k(Le){switch(Le==null?void 0:Le.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function ie(Le,_=null,z=null){if(!Le)return null;try{if(z&&typeof Le=="string"){if(z.addDefaultProtocol&&Le.startsWith("www.")){const ee=Le.match(/\./g);(ee==null?void 0:ee.length)>=2&&(Le=`http://${Le}`)}if(z.tryConvertEncoding)try{Le=Q(Le)}catch{}}const fe=_?new URL(Le,_):new URL(Le);if(k(fe))return fe}catch{}return null}function _e(Le,_,z,fe=!1){return Object.defineProperty(Le,_,{value:z,enumerable:!fe,configurable:!0,writable:!1}),z}const R=function(){function _(z,fe){this.constructor===_&&E("Cannot initialize BaseException."),this.message=z,this.name=fe}return _.prototype=new Error,_.constructor=_,_}();H.BaseException=R;class g extends R{constructor(_,z){super(_,"PasswordException"),this.code=z}}H.PasswordException=g;class n extends R{constructor(_,z){super(_,"UnknownErrorException"),this.details=z}}H.UnknownErrorException=n;class u extends R{constructor(_){super(_,"InvalidPDFException")}}H.InvalidPDFException=u;class L extends R{constructor(_){super(_,"MissingPDFException")}}H.MissingPDFException=L;class I extends R{constructor(_,z){super(_,"UnexpectedResponseException"),this.status=z}}H.UnexpectedResponseException=I;class j extends R{constructor(_){super(_,"FormatError")}}H.FormatError=j;class Y extends R{constructor(_){super(_,"AbortException")}}H.AbortException=Y;function te(Le){(typeof Le!="object"||(Le==null?void 0:Le.length)===void 0)&&E("Invalid argument for bytesToString");const _=Le.length,z=8192;if(_<z)return String.fromCharCode.apply(null,Le);const fe=[];for(let ee=0;ee<_;ee+=z){const he=Math.min(ee+z,_),re=Le.subarray(ee,he);fe.push(String.fromCharCode.apply(null,re))}return fe.join("")}function Se(Le){typeof Le!="string"&&E("Invalid argument for stringToBytes");const _=Le.length,z=new Uint8Array(_);for(let fe=0;fe<_;++fe)z[fe]=Le.charCodeAt(fe)&255;return z}function ge(Le){return String.fromCharCode(Le>>24&255,Le>>16&255,Le>>8&255,Le&255)}function ne(Le){return Object.keys(Le).length}function ce(Le){const _=Object.create(null);for(const[z,fe]of Le)_[z]=fe;return _}function Ee(){const Le=new Uint8Array(4);return Le[0]=1,new Uint32Array(Le.buffer,0,1)[0]===1}function me(){try{return new Function(""),!0}catch{return!1}}class xe{static get isLittleEndian(){return _e(this,"isLittleEndian",Ee())}static get isEvalSupported(){return _e(this,"isEvalSupported",me())}static get isOffscreenCanvasSupported(){return _e(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?_e(this,"platform",{isWin:!1,isMac:!1}):_e(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){var _,z;return _e(this,"isCSSRoundSupported",(z=(_=globalThis.CSS)==null?void 0:_.supports)==null?void 0:z.call(_,"width: round(1.5px, 1px)"))}}H.FeatureTest=xe;const De=[...Array(256).keys()].map(Le=>Le.toString(16).padStart(2,"0"));class Ae{static makeHexColor(_,z,fe){return`#${De[_]}${De[z]}${De[fe]}`}static scaleMinMax(_,z){let fe;_[0]?(_[0]<0&&(fe=z[0],z[0]=z[1],z[1]=fe),z[0]*=_[0],z[1]*=_[0],_[3]<0&&(fe=z[2],z[2]=z[3],z[3]=fe),z[2]*=_[3],z[3]*=_[3]):(fe=z[0],z[0]=z[2],z[2]=fe,fe=z[1],z[1]=z[3],z[3]=fe,_[1]<0&&(fe=z[2],z[2]=z[3],z[3]=fe),z[2]*=_[1],z[3]*=_[1],_[2]<0&&(fe=z[0],z[0]=z[1],z[1]=fe),z[0]*=_[2],z[1]*=_[2]),z[0]+=_[4],z[1]+=_[4],z[2]+=_[5],z[3]+=_[5]}static transform(_,z){return[_[0]*z[0]+_[2]*z[1],_[1]*z[0]+_[3]*z[1],_[0]*z[2]+_[2]*z[3],_[1]*z[2]+_[3]*z[3],_[0]*z[4]+_[2]*z[5]+_[4],_[1]*z[4]+_[3]*z[5]+_[5]]}static applyTransform(_,z){const fe=_[0]*z[0]+_[1]*z[2]+z[4],ee=_[0]*z[1]+_[1]*z[3]+z[5];return[fe,ee]}static applyInverseTransform(_,z){const fe=z[0]*z[3]-z[1]*z[2],ee=(_[0]*z[3]-_[1]*z[2]+z[2]*z[5]-z[4]*z[3])/fe,he=(-_[0]*z[1]+_[1]*z[0]+z[4]*z[1]-z[5]*z[0])/fe;return[ee,he]}static getAxialAlignedBoundingBox(_,z){const fe=this.applyTransform(_,z),ee=this.applyTransform(_.slice(2,4),z),he=this.applyTransform([_[0],_[3]],z),re=this.applyTransform([_[2],_[1]],z);return[Math.min(fe[0],ee[0],he[0],re[0]),Math.min(fe[1],ee[1],he[1],re[1]),Math.max(fe[0],ee[0],he[0],re[0]),Math.max(fe[1],ee[1],he[1],re[1])]}static inverseTransform(_){const z=_[0]*_[3]-_[1]*_[2];return[_[3]/z,-_[1]/z,-_[2]/z,_[0]/z,(_[2]*_[5]-_[4]*_[3])/z,(_[4]*_[1]-_[5]*_[0])/z]}static singularValueDecompose2dScale(_){const z=[_[0],_[2],_[1],_[3]],fe=_[0]*z[0]+_[1]*z[2],ee=_[0]*z[1]+_[1]*z[3],he=_[2]*z[0]+_[3]*z[2],re=_[2]*z[1]+_[3]*z[3],ve=(fe+re)/2,U=Math.sqrt((fe+re)**2-4*(fe*re-he*ee))/2,pe=ve+U||1,Ce=ve-U||1;return[Math.sqrt(pe),Math.sqrt(Ce)]}static normalizeRect(_){const z=_.slice(0);return _[0]>_[2]&&(z[0]=_[2],z[2]=_[0]),_[1]>_[3]&&(z[1]=_[3],z[3]=_[1]),z}static intersect(_,z){const fe=Math.max(Math.min(_[0],_[2]),Math.min(z[0],z[2])),ee=Math.min(Math.max(_[0],_[2]),Math.max(z[0],z[2]));if(fe>ee)return null;const he=Math.max(Math.min(_[1],_[3]),Math.min(z[1],z[3])),re=Math.min(Math.max(_[1],_[3]),Math.max(z[1],z[3]));return he>re?null:[fe,he,ee,re]}static bezierBoundingBox(_,z,fe,ee,he,re,ve,U){const pe=[],Ce=[[],[]];let we,D,x,W,G,se,be,ke;for(let Fe=0;Fe<2;++Fe){if(Fe===0?(D=6*_-12*fe+6*he,we=-3*_+9*fe-9*he+3*ve,x=3*fe-3*_):(D=6*z-12*ee+6*re,we=-3*z+9*ee-9*re+3*U,x=3*ee-3*z),Math.abs(we)<1e-12){if(Math.abs(D)<1e-12)continue;W=-x/D,0<W&&W<1&&pe.push(W);continue}be=D*D-4*x*we,ke=Math.sqrt(be),!(be<0)&&(G=(-D+ke)/(2*we),0<G&&G<1&&pe.push(G),se=(-D-ke)/(2*we),0<se&&se<1&&pe.push(se))}let $=pe.length,de;const ye=$;for(;$--;)W=pe[$],de=1-W,Ce[0][$]=de*de*de*_+3*de*de*W*fe+3*de*W*W*he+W*W*W*ve,Ce[1][$]=de*de*de*z+3*de*de*W*ee+3*de*W*W*re+W*W*W*U;return Ce[0][ye]=_,Ce[1][ye]=z,Ce[0][ye+1]=ve,Ce[1][ye+1]=U,Ce[0].length=Ce[1].length=ye+2,[Math.min(...Ce[0]),Math.min(...Ce[1]),Math.max(...Ce[0]),Math.max(...Ce[1])]}}H.Util=Ae;const Ve=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function oe(Le){if(Le[0]>="ï"){let z;if(Le[0]==="þ"&&Le[1]==="ÿ"?z="utf-16be":Le[0]==="ÿ"&&Le[1]==="þ"?z="utf-16le":Le[0]==="ï"&&Le[1]==="»"&&Le[2]==="¿"&&(z="utf-8"),z)try{const fe=new TextDecoder(z,{fatal:!0}),ee=Se(Le);return fe.decode(ee)}catch(fe){X(`stringToPDFString: "${fe}".`)}}const _=[];for(let z=0,fe=Le.length;z<fe;z++){const ee=Ve[Le.charCodeAt(z)];_.push(ee?String.fromCharCode(ee):Le.charAt(z))}return _.join("")}function Q(Le){return decodeURIComponent(escape(Le))}function le(Le){return unescape(encodeURIComponent(Le))}function ue(Le){return typeof Le=="object"&&(Le==null?void 0:Le.byteLength)!==void 0}function Ie(Le,_){if(Le.length!==_.length)return!1;for(let z=0,fe=Le.length;z<fe;z++)if(Le[z]!==_[z])return!1;return!0}function Re(Le=new Date){return[Le.getUTCFullYear().toString(),(Le.getUTCMonth()+1).toString().padStart(2,"0"),Le.getUTCDate().toString().padStart(2,"0"),Le.getUTCHours().toString().padStart(2,"0"),Le.getUTCMinutes().toString().padStart(2,"0"),Le.getUTCSeconds().toString().padStart(2,"0")].join("")}class ze{constructor(){M(this,We,!1);this.promise=new Promise((_,z)=>{this.resolve=fe=>{J(this,We,!0),_(fe)},this.reject=fe=>{J(this,We,!0),z(fe)}})}get settled(){return e(this,We)}}We=new WeakMap,H.PromiseCapability=ze;let je=null,Ne=null;function Ue(Le){return je||(je=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Ne=new Map([["ﬅ","ſt"]])),Le.replaceAll(je,(_,z,fe)=>z?z.normalize("NFKC"):Ne.get(fe))}function Xe(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const Le=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(Le);else for(let _=0;_<32;_++)Le[_]=Math.floor(Math.random()*255);return te(Le)}},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var Be,Te,N,Z,ot,ae,xt,P,a,l,T,y,S,t,r,d,Rt,b,f,Zt,i,s;Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(c){if(typeof c=="string"||c instanceof URL?c={url:c}:(0,_util.isArrayBuffer)(c)&&(c={data:c}),typeof c!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!c.url&&!c.data&&!c.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const o=new PDFDocumentLoadingTask,{docId:v}=o,w=c.url?getUrlProp(c.url):null,B=c.data?getDataProp(c.data):null,K=c.httpHeaders||null,C=c.withCredentials===!0,V=c.password??null,q=c.range instanceof PDFDataRangeTransport?c.range:null,X=Number.isInteger(c.rangeChunkSize)&&c.rangeChunkSize>0?c.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let E=c.worker instanceof PDFWorker?c.worker:null;const F=c.verbosity,k=typeof c.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(c.docBaseUrl)?c.docBaseUrl:null,ie=typeof c.cMapUrl=="string"?c.cMapUrl:null,_e=c.cMapPacked!==!1,R=c.CMapReaderFactory||DefaultCMapReaderFactory,g=typeof c.standardFontDataUrl=="string"?c.standardFontDataUrl:null,n=c.StandardFontDataFactory||DefaultStandardFontDataFactory,u=c.stopAtErrors!==!0,L=Number.isInteger(c.maxImageSize)&&c.maxImageSize>-1?c.maxImageSize:-1,I=c.isEvalSupported!==!1,j=typeof c.isOffscreenCanvasSupported=="boolean"?c.isOffscreenCanvasSupported:!_util.isNodeJS,Y=Number.isInteger(c.canvasMaxAreaInBytes)?c.canvasMaxAreaInBytes:-1,te=typeof c.disableFontFace=="boolean"?c.disableFontFace:_util.isNodeJS,Se=c.fontExtraProperties===!0,ge=c.enableXfa===!0,ne=c.ownerDocument||globalThis.document,ce=c.disableRange===!0,Ee=c.disableStream===!0,me=c.disableAutoFetch===!0,xe=c.pdfBug===!0,De=q?q.length:c.length??NaN,Ae=typeof c.useSystemFonts=="boolean"?c.useSystemFonts:!_util.isNodeJS&&!te,Ve=typeof c.useWorkerFetch=="boolean"?c.useWorkerFetch:R===_display_utils.DOMCMapReaderFactory&&n===_display_utils.DOMStandardFontDataFactory&&ie&&g&&(0,_display_utils.isValidFetchUrl)(ie,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(g,document.baseURI),oe=c.canvasFactory||new DefaultCanvasFactory({ownerDocument:ne}),Q=c.filterFactory||new DefaultFilterFactory({docId:v,ownerDocument:ne}),le=null;(0,_util.setVerbosityLevel)(F);const ue={canvasFactory:oe,filterFactory:Q};if(Ve||(ue.cMapReaderFactory=new R({baseUrl:ie,isCompressed:_e}),ue.standardFontDataFactory=new n({baseUrl:g})),!E){const ze={verbosity:F,port:_worker_options.GlobalWorkerOptions.workerPort};E=ze.port?PDFWorker.fromPort(ze):new PDFWorker(ze),o._worker=E}const Ie={docId:v,apiVersion:"3.11.2",data:B,password:V,disableAutoFetch:me,rangeChunkSize:X,length:De,docBaseUrl:k,enableXfa:ge,evaluatorOptions:{maxImageSize:L,disableFontFace:te,ignoreErrors:u,isEvalSupported:I,isOffscreenCanvasSupported:j,canvasMaxAreaInBytes:Y,fontExtraProperties:Se,useSystemFonts:Ae,cMapUrl:Ve?ie:null,standardFontDataUrl:Ve?g:null}},Re={ignoreErrors:u,isEvalSupported:I,disableFontFace:te,fontExtraProperties:Se,enableXfa:ge,ownerDocument:ne,disableAutoFetch:me,pdfBug:xe,styleElement:le};return E.promise.then(function(){if(o.destroyed)throw new Error("Loading aborted");const ze=_fetchDocument(E,Ie),je=new Promise(function(Ne){let Ue;q?Ue=new _transport_stream.PDFDataTransportStream({length:De,initialData:q.initialData,progressiveDone:q.progressiveDone,contentDispositionFilename:q.contentDispositionFilename,disableRange:ce,disableStream:Ee},q):B||(Ue=(We=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(We):(0,_display_utils.isValidFetchUrl)(We.url)?new _displayFetch_stream.PDFFetchStream(We):new _displayNetwork.PDFNetworkStream(We))({url:w,length:De,httpHeaders:K,withCredentials:C,rangeChunkSize:X,disableRange:ce,disableStream:Ee})),Ne(Ue)});return Promise.all([ze,je]).then(function([Ne,Ue]){if(o.destroyed)throw new Error("Loading aborted");const Xe=new _message_handler.MessageHandler(v,Ne,E.port),We=new WorkerTransport(Xe,o,Ue,Re,ue);o._transport=We,Xe.send("Ready",null)})}).catch(o._capability.reject),o}async function _fetchDocument(c,o){if(c.destroyed)throw new Error("Worker was destroyed");const v=await c.messageHandler.sendWithPromise("GetDocRequest",o,o.data?[o.data.buffer]:null);if(c.destroyed)throw new Error("Worker was destroyed");return v}function getUrlProp(c){if(c instanceof URL)return c.href;try{return new URL(c,window.location).href}catch{if(_util.isNodeJS&&typeof c=="string")return c}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(c){if(_util.isNodeJS&&typeof Buffer<"u"&&c instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(c instanceof Uint8Array&&c.byteLength===c.buffer.byteLength)return c;if(typeof c=="string")return(0,_util.stringToBytes)(c);if(typeof c=="object"&&!isNaN(c==null?void 0:c.length)||(0,_util.isArrayBuffer)(c))return new Uint8Array(c);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const H=class{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${rt(H,Be)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var o,v,w;this.destroyed=!0;try{(o=this._worker)!=null&&o.port&&(this._worker._pendingDestroy=!0),await((v=this._transport)==null?void 0:v.destroy())}catch(B){throw(w=this._worker)!=null&&w.port&&delete this._worker._pendingDestroy,B}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};let PDFDocumentLoadingTask=H;Be=new WeakMap,M(PDFDocumentLoadingTask,Be,0),exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(o,v,w=!1,B=null){this.length=o,this.initialData=v,this.progressiveDone=w,this.contentDispositionFilename=B,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(o){this._rangeListeners.push(o)}addProgressListener(o){this._progressListeners.push(o)}addProgressiveReadListener(o){this._progressiveReadListeners.push(o)}addProgressiveDoneListener(o){this._progressiveDoneListeners.push(o)}onDataRange(o,v){for(const w of this._rangeListeners)w(o,v)}onDataProgress(o,v){this._readyCapability.promise.then(()=>{for(const w of this._progressListeners)w(o,v)})}onDataProgressiveRead(o){this._readyCapability.promise.then(()=>{for(const v of this._progressiveReadListeners)v(o)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const o of this._progressiveDoneListeners)o()})}transportReady(){this._readyCapability.resolve()}requestDataRange(o,v){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(o,v){this._pdfInfo=o,this._transport=v,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(w=>{if(!w)return w;const B=[];for(const K in w)B.push(...w[K]);return B}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(o){return this._transport.getPage(o)}getPageIndex(o){return this._transport.getPageIndex(o)}getDestinations(){return this._transport.getDestinations()}getDestination(o){return this._transport.getDestination(o)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(o=!1){return this._transport.startCleanup(o||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(o,v,w,B=!1){M(this,Z);M(this,ae);M(this,Te,null);M(this,N,!1);this._pageIndex=o,this._pageInfo=v,this._transport=w,this._stats=B?new _display_utils.StatTimer:null,this._pdfBug=B,this.commonObjs=w.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:o,rotation:v=this.rotate,offsetX:w=0,offsetY:B=0,dontFlip:K=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:o,rotation:v,offsetX:w,offsetY:B,dontFlip:K})}getAnnotations({intent:o="display"}={}){const v=this._transport.getRenderingIntent(o);return this._transport.getAnnotations(this._pageIndex,v.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var o;return((o=this._transport._htmlForXfa)==null?void 0:o.children[this._pageIndex])||null}render({canvasContext:o,viewport:v,intent:w="display",annotationMode:B=_util.AnnotationMode.ENABLE,transform:K=null,background:C=null,optionalContentConfigPromise:V=null,annotationCanvasMap:q=null,pageColors:X=null,printAnnotationStorage:E=null}){var n,u;(n=this._stats)==null||n.time("Overall");const F=this._transport.getRenderingIntent(w,B,E);J(this,N,!1),O(this,ae,xt).call(this),V||(V=this._transport.getOptionalContentConfig());let k=this._intentStates.get(F.cacheKey);k||(k=Object.create(null),this._intentStates.set(F.cacheKey,k)),k.streamReaderCancelTimeout&&(clearTimeout(k.streamReaderCancelTimeout),k.streamReaderCancelTimeout=null);const ie=!!(F.renderingIntent&_util.RenderingIntentFlag.PRINT);k.displayReadyCapability||(k.displayReadyCapability=new _util.PromiseCapability,k.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(u=this._stats)==null||u.time("Page Request"),this._pumpOperatorList(F));const _e=L=>{var I,j;k.renderTasks.delete(R),(this._maybeCleanupAfterRender||ie)&&J(this,N,!0),O(this,Z,ot).call(this,!ie),L?(R.capability.reject(L),this._abortOperatorList({intentState:k,reason:L instanceof Error?L:new Error(L)})):R.capability.resolve(),(I=this._stats)==null||I.timeEnd("Rendering"),(j=this._stats)==null||j.timeEnd("Overall")},R=new InternalRenderTask({callback:_e,params:{canvasContext:o,viewport:v,transform:K,background:C},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:q,operatorList:k.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!ie,pdfBug:this._pdfBug,pageColors:X});(k.renderTasks||(k.renderTasks=new Set)).add(R);const g=R.task;return Promise.all([k.displayReadyCapability.promise,V]).then(([L,I])=>{var j;if(this.destroyed){_e();return}(j=this._stats)==null||j.time("Rendering"),R.initializeGraphics({transparency:L,optionalContentConfig:I}),R.operatorListChanged()}).catch(_e),g}getOperatorList({intent:o="display",annotationMode:v=_util.AnnotationMode.ENABLE,printAnnotationStorage:w=null}={}){var q;function B(){C.operatorList.lastChunk&&(C.opListReadCapability.resolve(C.operatorList),C.renderTasks.delete(V))}const K=this._transport.getRenderingIntent(o,v,w,!0);let C=this._intentStates.get(K.cacheKey);C||(C=Object.create(null),this._intentStates.set(K.cacheKey,C));let V;return C.opListReadCapability||(V=Object.create(null),V.operatorListChanged=B,C.opListReadCapability=new _util.PromiseCapability,(C.renderTasks||(C.renderTasks=new Set)).add(V),C.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(q=this._stats)==null||q.time("Page Request"),this._pumpOperatorList(K)),C.opListReadCapability.promise}streamTextContent({includeMarkedContent:o=!1,disableNormalization:v=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:o===!0,disableNormalization:v===!0},{highWaterMark:100,size(B){return B.items.length}})}getTextContent(o={}){if(this._transport._htmlForXfa)return this.getXfa().then(w=>_xfa_text.XfaText.textContent(w));const v=this.streamTextContent(o);return new Promise(function(w,B){function K(){C.read().then(function({value:q,done:X}){if(X){w(V);return}Object.assign(V.styles,q.styles),V.items.push(...q.items),K()},B)}const C=v.getReader(),V={items:[],styles:Object.create(null)};K()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const o=[];for(const v of this._intentStates.values())if(this._abortOperatorList({intentState:v,reason:new Error("Page was destroyed."),force:!0}),!v.opListReadCapability)for(const w of v.renderTasks)o.push(w.completed),w.cancel();return this.objs.clear(),J(this,N,!1),O(this,ae,xt).call(this),Promise.all(o)}cleanup(o=!1){J(this,N,!0);const v=O(this,Z,ot).call(this,!1);return o&&v&&this._stats&&(this._stats=new _display_utils.StatTimer),v}_startRenderPage(o,v){var B,K;const w=this._intentStates.get(v);w&&((B=this._stats)==null||B.timeEnd("Page Request"),(K=w.displayReadyCapability)==null||K.resolve(o))}_renderPageChunk(o,v){for(let w=0,B=o.length;w<B;w++)v.operatorList.fnArray.push(o.fnArray[w]),v.operatorList.argsArray.push(o.argsArray[w]);v.operatorList.lastChunk=o.lastChunk,v.operatorList.separateAnnots=o.separateAnnots;for(const w of v.renderTasks)w.operatorListChanged();o.lastChunk&&O(this,Z,ot).call(this,!0)}_pumpOperatorList({renderingIntent:o,cacheKey:v,annotationStorageSerializable:w}){const{map:B,transfers:K}=w,V=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:o,cacheKey:v,annotationStorage:B},K).getReader(),q=this._intentStates.get(v);q.streamReader=V;const X=()=>{V.read().then(({value:E,done:F})=>{if(F){q.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(E,q),X())},E=>{if(q.streamReader=null,!this._transport.destroyed){if(q.operatorList){q.operatorList.lastChunk=!0;for(const F of q.renderTasks)F.operatorListChanged();O(this,Z,ot).call(this,!0)}if(q.displayReadyCapability)q.displayReadyCapability.reject(E);else if(q.opListReadCapability)q.opListReadCapability.reject(E);else throw E}})};X()}_abortOperatorList({intentState:o,reason:v,force:w=!1}){if(o.streamReader){if(o.streamReaderCancelTimeout&&(clearTimeout(o.streamReaderCancelTimeout),o.streamReaderCancelTimeout=null),!w){if(o.renderTasks.size>0)return;if(v instanceof _display_utils.RenderingCancelledException){let B=RENDERING_CANCELLED_TIMEOUT;v.extraDelay>0&&v.extraDelay<1e3&&(B+=v.extraDelay),o.streamReaderCancelTimeout=setTimeout(()=>{o.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:o,reason:v,force:!0})},B);return}}if(o.streamReader.cancel(new _util.AbortException(v.message)).catch(()=>{}),o.streamReader=null,!this._transport.destroyed){for(const[B,K]of this._intentStates)if(K===o){this._intentStates.delete(B);break}this.cleanup()}}}get stats(){return this._stats}}Te=new WeakMap,N=new WeakMap,Z=new WeakSet,ot=function(o=!1){if(O(this,ae,xt).call(this),!e(this,N)||this.destroyed)return!1;if(o)return J(this,Te,setTimeout(()=>{J(this,Te,null),O(this,Z,ot).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:v,operatorList:w}of this._intentStates.values())if(v.size>0||!w.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),J(this,N,!1),!0},ae=new WeakSet,xt=function(){e(this,Te)&&(clearTimeout(e(this,Te)),J(this,Te,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){M(this,P,new Set);M(this,a,Promise.resolve())}postMessage(o,v){const w={data:structuredClone(o,v?{transfer:v}:null)};e(this,a).then(()=>{for(const B of e(this,P))B.call(this,w)})}addEventListener(o,v){e(this,P).add(v)}removeEventListener(o,v){e(this,P).delete(v)}terminate(){e(this,P).clear()}}P=new WeakMap,a=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const c=(l=document==null?void 0:document.currentScript)==null?void 0:l.src;c&&(PDFWorkerUtil.fallbackWorkerSrc=c.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(c,o){let v;try{if(v=new URL(c),!v.origin||v.origin==="null")return!1}catch{return!1}const w=new URL(o,v);return v.origin===w.origin},PDFWorkerUtil.createCDNWrapper=function(c){const o=`importScripts("${c}");`;return URL.createObjectURL(new Blob([o]))}}const _PDFWorker=class{constructor({name:c=null,port:o=null,verbosity:v=(0,_util.getVerbosityLevel)()}={}){var w;if(this.name=c,this.destroyed=!1,this.verbosity=v,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,o){if((w=e(_PDFWorker,T))!=null&&w.has(o))throw new Error("Cannot use more than one PDFWorker per port.");(e(_PDFWorker,T)||J(_PDFWorker,T,new WeakMap)).set(o,this),this._initializeFromPort(o);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(c){this._port=c,this._messageHandler=new _message_handler.MessageHandler("main","worker",c),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:c}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,c)||(c=PDFWorkerUtil.createCDNWrapper(new URL(c,window.location).href));const o=new Worker(c),v=new _message_handler.MessageHandler("main","worker",o),w=()=>{o.removeEventListener("error",B),v.destroy(),o.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},B=()=>{this._webWorker||w()};o.addEventListener("error",B),v.on("test",C=>{if(o.removeEventListener("error",B),this.destroyed){w();return}C?(this._messageHandler=v,this._port=o,this._webWorker=o,this._readyCapability.resolve(),v.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),v.destroy(),o.terminate())}),v.on("ready",C=>{if(o.removeEventListener("error",B),this.destroyed){w();return}try{K()}catch{this._setupFakeWorker()}});const K=()=>{const C=new Uint8Array;v.send("test",C,[C.buffer])};K();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(c=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const o=new LoopbackPort;this._port=o;const v=`fake${PDFWorkerUtil.fakeWorkerId++}`,w=new _message_handler.MessageHandler(v+"_worker",v,o);c.setup(w,o);const B=new _message_handler.MessageHandler(v,v+"_worker",o);this._messageHandler=B,this._readyCapability.resolve(),B.send("configure",{verbosity:this.verbosity})}).catch(c=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${c.message}".`))})}destroy(){var c;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(c=e(_PDFWorker,T))==null||c.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(c){var v;if(!(c!=null&&c.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const o=(v=e(this,T))==null?void 0:v.get(c.port);if(o){if(o._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return o}return new _PDFWorker(c)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var c;try{return((c=globalThis.pdfjsWorker)==null?void 0:c.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};let PDFWorker=_PDFWorker;T=new WeakMap,M(PDFWorker,T,void 0),exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(o,v,w,B,K){M(this,d);M(this,y,new Map);M(this,S,new Map);M(this,t,new Map);M(this,r,null);this.messageHandler=o,this.loadingTask=v,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:B.ownerDocument,styleElement:B.styleElement}),this._params=B,this.canvasFactory=K.canvasFactory,this.filterFactory=K.filterFactory,this.cMapReaderFactory=K.cMapReaderFactory,this.standardFontDataFactory=K.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=w,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(o,v=_util.AnnotationMode.ENABLE,w=null,B=!1){let K=_util.RenderingIntentFlag.DISPLAY,C=_annotation_storage.SerializableEmpty;switch(o){case"any":K=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":K=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${o}`)}switch(v){case _util.AnnotationMode.DISABLE:K+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:K+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:K+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,C=(K&_util.RenderingIntentFlag.PRINT&&w instanceof _annotation_storage.PrintAnnotationStorage?w:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${v}`)}return B&&(K+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:K,cacheKey:`${K}_${C.hash}`,annotationStorageSerializable:C}}destroy(){var w;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,(w=e(this,r))==null||w.reject(new Error("Worker was destroyed during onPassword callback"));const o=[];for(const B of e(this,S).values())o.push(B._destroy());e(this,S).clear(),e(this,t).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const v=this.messageHandler.sendWithPromise("Terminate",null);return o.push(v),Promise.all(o).then(()=>{var B;this.commonObjs.clear(),this.fontLoader.clear(),e(this,y).clear(),this.filterFactory.destroy(),(B=this._networkStream)==null||B.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:o,loadingTask:v}=this;o.on("GetReader",(w,B)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=K=>{this._lastProgress={loaded:K.loaded,total:K.total}},B.onPull=()=>{this._fullReader.read().then(function({value:K,done:C}){if(C){B.close();return}(0,_util.assert)(K instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),B.enqueue(new Uint8Array(K),1,[K])}).catch(K=>{B.error(K)})},B.onCancel=K=>{this._fullReader.cancel(K),B.ready.catch(C=>{if(!this.destroyed)throw C})}}),o.on("ReaderHeadersReady",w=>{const B=new _util.PromiseCapability,K=this._fullReader;return K.headersReady.then(()=>{var C;(!K.isStreamingSupported||!K.isRangeSupported)&&(this._lastProgress&&((C=v.onProgress)==null||C.call(v,this._lastProgress)),K.onProgress=V=>{var q;(q=v.onProgress)==null||q.call(v,{loaded:V.loaded,total:V.total})}),B.resolve({isStreamingSupported:K.isStreamingSupported,isRangeSupported:K.isRangeSupported,contentLength:K.contentLength})},B.reject),B.promise}),o.on("GetRangeReader",(w,B)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const K=this._networkStream.getRangeReader(w.begin,w.end);if(!K){B.close();return}B.onPull=()=>{K.read().then(function({value:C,done:V}){if(V){B.close();return}(0,_util.assert)(C instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),B.enqueue(new Uint8Array(C),1,[C])}).catch(C=>{B.error(C)})},B.onCancel=C=>{K.cancel(C),B.ready.catch(V=>{if(!this.destroyed)throw V})}}),o.on("GetDoc",({pdfInfo:w})=>{this._numPages=w.numPages,this._htmlForXfa=w.htmlForXfa,delete w.htmlForXfa,v._capability.resolve(new PDFDocumentProxy(w,this))}),o.on("DocException",function(w){let B;switch(w.name){case"PasswordException":B=new _util.PasswordException(w.message,w.code);break;case"InvalidPDFException":B=new _util.InvalidPDFException(w.message);break;case"MissingPDFException":B=new _util.MissingPDFException(w.message);break;case"UnexpectedResponseException":B=new _util.UnexpectedResponseException(w.message,w.status);break;case"UnknownErrorException":B=new _util.UnknownErrorException(w.message,w.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}v._capability.reject(B)}),o.on("PasswordRequest",w=>{if(J(this,r,new _util.PromiseCapability),v.onPassword){const B=K=>{K instanceof Error?e(this,r).reject(K):e(this,r).resolve({password:K})};try{v.onPassword(B,w.code)}catch(K){e(this,r).reject(K)}}else e(this,r).reject(new _util.PasswordException(w.message,w.code));return e(this,r).promise}),o.on("DataLoaded",w=>{var B;(B=v.onProgress)==null||B.call(v,{loaded:w.length,total:w.length}),this.downloadInfoCapability.resolve(w)}),o.on("StartRenderPage",w=>{if(this.destroyed)return;e(this,S).get(w.pageIndex)._startRenderPage(w.transparency,w.cacheKey)}),o.on("commonobj",([w,B,K])=>{var C;if(!this.destroyed&&!this.commonObjs.has(w))switch(B){case"Font":const V=this._params;if("error"in K){const E=K.error;(0,_util.warn)(`Error during font loading: ${E}`),this.commonObjs.resolve(w,E);break}const q=V.pdfBug&&((C=globalThis.FontInspector)!=null&&C.enabled)?(E,F)=>globalThis.FontInspector.fontAdded(E,F):null,X=new _font_loader.FontFaceObject(K,{isEvalSupported:V.isEvalSupported,disableFontFace:V.disableFontFace,ignoreErrors:V.ignoreErrors,inspectFont:q});this.fontLoader.bind(X).catch(E=>o.sendWithPromise("FontFallback",{id:w})).finally(()=>{!V.fontExtraProperties&&X.data&&(X.data=null),this.commonObjs.resolve(w,X)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(w,K);break;default:throw new Error(`Got unknown common object type ${B}`)}}),o.on("obj",([w,B,K,C])=>{var q;if(this.destroyed)return;const V=e(this,S).get(B);if(!V.objs.has(w))switch(K){case"Image":if(V.objs.resolve(w,C),C){let X;if(C.bitmap){const{width:E,height:F}=C;X=E*F*4}else X=((q=C.data)==null?void 0:q.length)||0;X>_util.MAX_IMAGE_SIZE_TO_CACHE&&(V._maybeCleanupAfterRender=!0)}break;case"Pattern":V.objs.resolve(w,C);break;default:throw new Error(`Got unknown object type ${K}`)}}),o.on("DocProgress",w=>{var B;this.destroyed||(B=v.onProgress)==null||B.call(v,{loaded:w.loaded,total:w.total})}),o.on("FetchBuiltInCMap",w=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(w):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),o.on("FetchStandardFontData",w=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(w):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var w;this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:o,transfers:v}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:o,filename:((w=this._fullReader)==null?void 0:w.filename)??null},v).finally(()=>{this.annotationStorage.resetModified()})}getPage(o){if(!Number.isInteger(o)||o<=0||o>this._numPages)return Promise.reject(new Error("Invalid page request."));const v=o-1,w=e(this,t).get(v);if(w)return w;const B=this.messageHandler.sendWithPromise("GetPage",{pageIndex:v}).then(K=>{if(this.destroyed)throw new Error("Transport destroyed");const C=new PDFPageProxy(v,K,this,this._params.pdfBug);return e(this,S).set(v,C),C});return e(this,t).set(v,B),B}getPageIndex(o){return typeof o!="object"||o===null||!Number.isInteger(o.num)||o.num<0||!Number.isInteger(o.gen)||o.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:o.num,gen:o.gen})}getAnnotations(o,v){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:o,intent:v})}getFieldObjects(){return O(this,d,Rt).call(this,"GetFieldObjects")}hasJSActions(){return O(this,d,Rt).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(o){return typeof o!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:o})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return O(this,d,Rt).call(this,"GetDocJSActions")}getPageJSActions(o){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:o})}getStructTree(o){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:o})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(o=>new _optional_content_config.OptionalContentConfig(o))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const o="GetMetadata",v=e(this,y).get(o);if(v)return v;const w=this.messageHandler.sendWithPromise(o,null).then(B=>{var K,C;return{info:B[0],metadata:B[1]?new _metadata.Metadata(B[1]):null,contentDispositionFilename:((K=this._fullReader)==null?void 0:K.filename)??null,contentLength:((C=this._fullReader)==null?void 0:C.contentLength)??null}});return e(this,y).set(o,w),w}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(o=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const v of e(this,S).values())if(!v.cleanup())throw new Error(`startCleanup: Page ${v.pageNumber} is currently rendering.`);this.commonObjs.clear(),o||this.fontLoader.clear(),e(this,y).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:o,enableXfa:v}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:o,enableXfa:v})}}y=new WeakMap,S=new WeakMap,t=new WeakMap,r=new WeakMap,d=new WeakSet,Rt=function(o,v=null){const w=e(this,y).get(o);if(w)return w;const B=this.messageHandler.sendWithPromise(o,v);return e(this,y).set(o,B),B};class PDFObjects{constructor(){M(this,f);M(this,b,Object.create(null))}get(o,v=null){if(v){const B=O(this,f,Zt).call(this,o);return B.capability.promise.then(()=>v(B.data)),null}const w=e(this,b)[o];if(!(w!=null&&w.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${o}.`);return w.data}has(o){const v=e(this,b)[o];return(v==null?void 0:v.capability.settled)||!1}resolve(o,v=null){const w=O(this,f,Zt).call(this,o);w.data=v,w.capability.resolve()}clear(){var o;for(const v in e(this,b)){const{data:w}=e(this,b)[v];(o=w==null?void 0:w.bitmap)==null||o.close()}J(this,b,Object.create(null))}}b=new WeakMap,f=new WeakSet,Zt=function(o){var v;return(v=e(this,b))[o]||(v[o]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(o){M(this,i,null);J(this,i,o),this.onContinue=null}get promise(){return e(this,i).capability.promise}cancel(o=0){e(this,i).cancel(null,o)}get separateAnnots(){const{separateAnnots:o}=e(this,i).operatorList;if(!o)return!1;const{annotationCanvasMap:v}=e(this,i);return o.form||o.canvas&&(v==null?void 0:v.size)>0}}i=new WeakMap,exports.RenderTask=RenderTask;const h=class{constructor({callback:o,params:v,objs:w,commonObjs:B,annotationCanvasMap:K,operatorList:C,pageIndex:V,canvasFactory:q,filterFactory:X,useRequestAnimationFrame:E=!1,pdfBug:F=!1,pageColors:k=null}){this.callback=o,this.params=v,this.objs=w,this.commonObjs=B,this.annotationCanvasMap=K,this.operatorListIdx=null,this.operatorList=C,this._pageIndex=V,this.canvasFactory=q,this.filterFactory=X,this._pdfBug=F,this.pageColors=k,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=E===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=v.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:o=!1,optionalContentConfig:v}){var V,q;if(this.cancelled)return;if(this._canvas){if(e(h,s).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");e(h,s).add(this._canvas)}this._pdfBug&&((V=globalThis.StepperManager)!=null&&V.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:w,viewport:B,transform:K,background:C}=this.params;this.gfx=new _canvas.CanvasGraphics(w,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:v},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:K,viewport:B,transparency:o,background:C}),this.operatorListIdx=0,this.graphicsReady=!0,(q=this.graphicsReadyCallback)==null||q.call(this)}cancel(o=null,v=0){var w;this.running=!1,this.cancelled=!0,(w=this.gfx)==null||w.endDrawing(),this._canvas&&e(h,s).delete(this._canvas),this.callback(o||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,v))}operatorListChanged(){var o;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(o=this.stepper)==null||o.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(this.pageColors),this._canvas&&e(h,s).delete(this._canvas),this.callback())))}};let InternalRenderTask=h;s=new WeakMap,M(InternalRenderTask,s,new WeakSet);const version="3.11.2";exports.version=version;const build="92f7653cf";exports.build=build},(Be,H,Te)=>{var a,l,T,dn,S;Object.defineProperty(H,"__esModule",{value:!0}),H.SerializableEmpty=H.PrintAnnotationStorage=H.AnnotationStorage=void 0;var N=Te(1),Z=Te(4),Pe=Te(8);const ae=Object.freeze({map:null,hash:"",transfers:void 0});H.SerializableEmpty=ae;class A{constructor(){M(this,T);M(this,a,!1);M(this,l,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(r,d){const p=e(this,l).get(r);return p===void 0?d:Object.assign(d,p)}getRawValue(r){return e(this,l).get(r)}remove(r){if(e(this,l).delete(r),e(this,l).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const d of e(this,l).values())if(d instanceof Z.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(r,d){const p=e(this,l).get(r);let b=!1;if(p!==void 0)for(const[f,m]of Object.entries(d))p[f]!==m&&(b=!0,p[f]=m);else b=!0,e(this,l).set(r,d);b&&O(this,T,dn).call(this),d instanceof Z.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(d.constructor._type)}has(r){return e(this,l).has(r)}getAll(){return e(this,l).size>0?(0,N.objectFromMap)(e(this,l)):null}setAll(r){for(const[d,p]of Object.entries(r))this.setValue(d,p)}get size(){return e(this,l).size}resetModified(){e(this,a)&&(J(this,a,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new P(this)}get serializable(){if(e(this,l).size===0)return ae;const r=new Map,d=new Pe.MurmurHash3_64,p=[],b=Object.create(null);let f=!1;for(const[m,i]of e(this,l)){const s=i instanceof Z.AnnotationEditor?i.serialize(!1,b):i;s&&(r.set(m,s),d.update(`${m}:${JSON.stringify(s)}`),f||(f=!!s.bitmap))}if(f)for(const m of r.values())m.bitmap&&p.push(m.bitmap);return r.size>0?{map:r,hash:d.hexdigest(),transfers:p}:ae}}a=new WeakMap,l=new WeakMap,T=new WeakSet,dn=function(){e(this,a)||(J(this,a,!0),typeof this.onSetModified=="function"&&this.onSetModified())},H.AnnotationStorage=A;class P extends A{constructor(d){super();M(this,S,void 0);const{map:p,hash:b,transfers:f}=d.serializable,m=structuredClone(p,f?{transfer:f}:null);J(this,S,{map:m,hash:b,transfers:f})}get print(){(0,N.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return e(this,S)}}S=new WeakMap,H.PrintAnnotationStorage=P},(Be,H,Te)=>{var A,P,a,l,T,y,S,t,r,d,Qt,b,Jt,m,ei,s,cn,c,hn,v,un,B,fn,C,pn;Object.defineProperty(H,"__esModule",{value:!0}),H.AnnotationEditor=void 0;var N=Te(5),Z=Te(1);const q=class{constructor(E){M(this,d);M(this,m);M(this,c);M(this,v);M(this,B);M(this,C);M(this,A,!1);M(this,P,null);M(this,a,this.focusin.bind(this));M(this,l,this.focusout.bind(this));M(this,T,!1);M(this,y,!1);M(this,S,!1);Ge(this,"_initialOptions",Object.create(null));Ge(this,"_uiManager",null);Ge(this,"_focusEventsAllowed",!0);M(this,t,!1);M(this,r,q._zIndex++);this.constructor===q&&(0,Z.unreachable)("Cannot initialize AnnotationEditor."),this.parent=E.parent,this.id=E.id,this.width=this.height=null,this.pageIndex=E.parent.pageIndex,this.name=E.name,this.div=null,this._uiManager=E.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=E.isCentered;const{rotation:F,rawDims:{pageWidth:k,pageHeight:ie,pageX:_e,pageY:R}}=this.parent.viewport;this.rotation=F,this.pageRotation=(360+F-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[k,ie],this.pageTranslation=[_e,R];const[g,n]=this.parentDimensions;this.x=E.x/g,this.y=E.y/n,this.isAttachedToDOM=!1,this.deleted=!1}static get _defaultLineColor(){return(0,Z.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(E){const F=new ae({id:E.parent.getNextId(),parent:E.parent,uiManager:E._uiManager});F.annotationElementId=E.annotationElementId,F.deleted=!0,F._uiManager.addToAnnotationStorage(F)}static initialize(E){}static updateDefaultParams(E,F){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(E){return!1}static paste(E,F){(0,Z.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return e(this,t)}set _isDraggable(E){var F;J(this,t,E),(F=this.div)==null||F.classList.toggle("draggable",E)}center(){const[E,F]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*F/(E*2),this.y+=this.width*E/(F*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*F/(E*2),this.y-=this.width*E/(F*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(E){this._uiManager.addCommands(E)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=e(this,r)}setParent(E){E!==null&&(this.pageIndex=E.pageIndex,this.pageDimensions=E.pageDimensions),this.parent=E}focusin(E){this._focusEventsAllowed&&(e(this,T)?J(this,T,!1):this.parent.setSelected(this))}focusout(E){var k;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const F=E.relatedTarget;F!=null&&F.closest(`#${this.id}`)||(E.preventDefault(),(k=this.parent)!=null&&k.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(E,F,k,ie){const[_e,R]=this.parentDimensions;[k,ie]=this.screenToPageTranslation(k,ie),this.x=(E+k)/_e,this.y=(F+ie)/R,this.fixAndSetPosition()}translate(E,F){O(this,d,Qt).call(this,this.parentDimensions,E,F)}translateInPage(E,F){O(this,d,Qt).call(this,this.pageDimensions,E,F),this.moveInDOM(),this.div.scrollIntoView({block:"nearest"})}drag(E,F){const[k,ie]=this.parentDimensions;if(this.x+=E/k,this.y+=F/ie,this.x<0||this.x>1||this.y<0||this.y>1){const{x:_e,y:R}=this.div.getBoundingClientRect();this.parent.findNewParent(this,_e,R)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}this.div.style.left=`${(100*this.x).toFixed(2)}%`,this.div.style.top=`${(100*this.y).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(){const[E,F]=this.pageDimensions;let{x:k,y:ie,width:_e,height:R}=this;switch(_e*=E,R*=F,k*=E,ie*=F,this.rotation){case 0:k=Math.max(0,Math.min(E-_e,k)),ie=Math.max(0,Math.min(F-R,ie));break;case 90:k=Math.max(0,Math.min(E-R,k)),ie=Math.min(F,Math.max(_e,ie));break;case 180:k=Math.min(E,Math.max(_e,k)),ie=Math.min(F,Math.max(R,ie));break;case 270:k=Math.min(E,Math.max(R,k)),ie=Math.max(0,Math.min(F-_e,ie));break}this.x=k/E,this.y=ie/F,this.div.style.left=`${(100*this.x).toFixed(2)}%`,this.div.style.top=`${(100*this.y).toFixed(2)}%`}screenToPageTranslation(E,F){var k;return O(k=q,b,Jt).call(k,E,F,this.parentRotation)}pageTranslationToScreen(E,F){var k;return O(k=q,b,Jt).call(k,E,F,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:E,pageDimensions:[F,k]}=this,ie=F*E,_e=k*E;return Z.FeatureTest.isCSSRoundSupported?[Math.round(ie),Math.round(_e)]:[ie,_e]}setDims(E,F){const[k,ie]=this.parentDimensions;this.div.style.width=`${(100*E/k).toFixed(2)}%`,e(this,A)||(this.div.style.height=`${(100*F/ie).toFixed(2)}%`)}fixDims(){const{style:E}=this.div,{height:F,width:k}=E,ie=k.endsWith("%"),_e=!e(this,A)&&F.endsWith("%");if(ie&&_e)return;const[R,g]=this.parentDimensions;ie||(E.width=`${(100*parseFloat(k)/R).toFixed(2)}%`),!e(this,A)&&!_e&&(E.height=`${(100*parseFloat(F)/g).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",e(this,a)),this.div.addEventListener("focusout",e(this,l));const[E,F]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*F/E).toFixed(2)}%`,this.div.style.maxHeight=`${(100*E/F).toFixed(2)}%`);const[k,ie]=this.getInitialTranslation();return this.translate(k,ie),(0,N.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(E){const{isMac:F}=Z.FeatureTest.platform;if(E.button!==0||E.ctrlKey&&F){E.preventDefault();return}J(this,T,!0),O(this,C,pn).call(this,E)}moveInDOM(){this.parent.moveEditorInDOM(this)}_setParentAndPosition(E,F,k){E.changeParent(this),this.x=F,this.y=k,this.fixAndSetPosition(),this.moveInDOM()}getRect(E,F){const k=this.parentScale,[ie,_e]=this.pageDimensions,[R,g]=this.pageTranslation,n=E/k,u=F/k,L=this.x*ie,I=this.y*_e,j=this.width*ie,Y=this.height*_e;switch(this.rotation){case 0:return[L+n+R,_e-I-u-Y+g,L+n+j+R,_e-I-u+g];case 90:return[L+u+R,_e-I+n+g,L+u+Y+R,_e-I+n+j+g];case 180:return[L-n-j+R,_e-I+u+g,L-n+R,_e-I+u+Y+g];case 270:return[L-u-Y+R,_e-I-n-j+g,L-u+R,_e-I-n+g];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(E,F){const[k,ie,_e,R]=E,g=_e-k,n=R-ie;switch(this.rotation){case 0:return[k,F-R,g,n];case 90:return[k,F-ie,n,g];case 180:return[_e,F-ie,g,n];case 270:return[_e,F-R,n,g];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){J(this,S,!0)}disableEditMode(){J(this,S,!1)}isInEditMode(){return e(this,S)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var E,F;(E=this.div)==null||E.addEventListener("focusin",e(this,a)),(F=this.div)==null||F.addEventListener("focusout",e(this,l))}serialize(E=!1,F=null){(0,Z.unreachable)("An editor must be serializable")}static deserialize(E,F,k){const ie=new this.prototype.constructor({parent:F,id:F.getNextId(),uiManager:k});ie.rotation=E.rotation;const[_e,R]=ie.pageDimensions,[g,n,u,L]=ie.getRectInCurrentCoords(E.rect,R);return ie.x=g/_e,ie.y=n/R,ie.width=u/_e,ie.height=L/R,ie}remove(){this.div.removeEventListener("focusin",e(this,a)),this.div.removeEventListener("focusout",e(this,l)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this)}get isResizable(){return!1}makeResizable(){this.isResizable&&(O(this,c,hn).call(this),e(this,P).classList.remove("hidden"))}select(){var E;this.makeResizable(),(E=this.div)==null||E.classList.add("selectedEditor")}unselect(){var E,F,k;(E=e(this,P))==null||E.classList.add("hidden"),(F=this.div)==null||F.classList.remove("selectedEditor"),(k=this.div)!=null&&k.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(E,F){}disableEditing(){}enableEditing(){}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return e(this,y)}set isEditing(E){J(this,y,E),this.parent&&(E?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(E,F){J(this,A,!0);const k=E/F,{style:ie}=this.div;ie.aspectRatio=k,ie.height="auto"}static get MIN_SIZE(){return 16}};let Pe=q;A=new WeakMap,P=new WeakMap,a=new WeakMap,l=new WeakMap,T=new WeakMap,y=new WeakMap,S=new WeakMap,t=new WeakMap,r=new WeakMap,d=new WeakSet,Qt=function([E,F],k,ie){[k,ie]=this.screenToPageTranslation(k,ie),this.x+=k/E,this.y+=ie/F,this.fixAndSetPosition()},b=new WeakSet,Jt=function(E,F,k){switch(k){case 90:return[F,-E];case 180:return[-E,-F];case 270:return[-F,E];default:return[E,F]}},m=new WeakSet,ei=function(E){switch(E){case 90:{const[F,k]=this.pageDimensions;return[0,-F/k,k/F,0]}case 180:return[-1,0,0,-1];case 270:{const[F,k]=this.pageDimensions;return[0,F/k,-k/F,0]}default:return[1,0,0,1]}},s=new WeakSet,cn=function(E){E.preventDefault()},c=new WeakSet,hn=function(){if(e(this,P))return;J(this,P,document.createElement("div")),e(this,P).classList.add("resizers");const E=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||E.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const F of E){const k=document.createElement("div");e(this,P).append(k),k.classList.add("resizer",F),k.addEventListener("pointerdown",O(this,v,un).bind(this,F)),k.addEventListener("contextmenu",O(q,s,cn))}this.div.prepend(e(this,P))},v=new WeakSet,un=function(E,F){F.preventDefault();const{isMac:k}=Z.FeatureTest.platform;if(F.button!==0||F.ctrlKey&&k)return;const ie=O(this,B,fn).bind(this,E),_e=this._isDraggable;this._isDraggable=!1;const R={passive:!0,capture:!0};window.addEventListener("pointermove",ie,R);const g=this.x,n=this.y,u=this.width,L=this.height,I=this.parent.div.style.cursor,j=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(F.target).cursor;const Y=()=>{this._isDraggable=_e,window.removeEventListener("pointerup",Y),window.removeEventListener("blur",Y),window.removeEventListener("pointermove",ie,R),this.parent.div.style.cursor=I,this.div.style.cursor=j;const te=this.x,Se=this.y,ge=this.width,ne=this.height;te===g&&Se===n&&ge===u&&ne===L||this.addCommands({cmd:()=>{this.width=ge,this.height=ne,this.x=te,this.y=Se;const[ce,Ee]=this.parentDimensions;this.setDims(ce*ge,Ee*ne),this.fixAndSetPosition(),this.moveInDOM()},undo:()=>{this.width=u,this.height=L,this.x=g,this.y=n;const[ce,Ee]=this.parentDimensions;this.setDims(ce*u,Ee*L),this.fixAndSetPosition(),this.moveInDOM()},mustExec:!0})};window.addEventListener("pointerup",Y),window.addEventListener("blur",Y)},B=new WeakSet,fn=function(E,F){const[k,ie]=this.parentDimensions,_e=this.x,R=this.y,g=this.width,n=this.height,u=q.MIN_SIZE/k,L=q.MIN_SIZE/ie,I=Ne=>Math.round(Ne*1e4)/1e4,j=O(this,m,ei).call(this,this.rotation),Y=(Ne,Ue)=>[j[0]*Ne+j[2]*Ue,j[1]*Ne+j[3]*Ue],te=O(this,m,ei).call(this,360-this.rotation),Se=(Ne,Ue)=>[te[0]*Ne+te[2]*Ue,te[1]*Ne+te[3]*Ue];let ge,ne,ce=!1,Ee=!1;switch(E){case"topLeft":ce=!0,ge=(Ne,Ue)=>[0,0],ne=(Ne,Ue)=>[Ne,Ue];break;case"topMiddle":ge=(Ne,Ue)=>[Ne/2,0],ne=(Ne,Ue)=>[Ne/2,Ue];break;case"topRight":ce=!0,ge=(Ne,Ue)=>[Ne,0],ne=(Ne,Ue)=>[0,Ue];break;case"middleRight":Ee=!0,ge=(Ne,Ue)=>[Ne,Ue/2],ne=(Ne,Ue)=>[0,Ue/2];break;case"bottomRight":ce=!0,ge=(Ne,Ue)=>[Ne,Ue],ne=(Ne,Ue)=>[0,0];break;case"bottomMiddle":ge=(Ne,Ue)=>[Ne/2,Ue],ne=(Ne,Ue)=>[Ne/2,0];break;case"bottomLeft":ce=!0,ge=(Ne,Ue)=>[0,Ue],ne=(Ne,Ue)=>[Ne,0];break;case"middleLeft":Ee=!0,ge=(Ne,Ue)=>[0,Ue/2],ne=(Ne,Ue)=>[Ne,Ue/2];break}const me=ge(g,n),xe=ne(g,n);let De=Y(...xe);const Ae=I(_e+De[0]),Ve=I(R+De[1]);let oe=1,Q=1,[le,ue]=this.screenToPageTranslation(F.movementX,F.movementY);if([le,ue]=Se(le/k,ue/ie),ce){const Ne=Math.hypot(g,n);oe=Q=Math.max(Math.min(Math.hypot(xe[0]-me[0]-le,xe[1]-me[1]-ue)/Ne,1/g,1/n),u/g,L/n)}else Ee?oe=Math.max(u,Math.min(1,Math.abs(xe[0]-me[0]-le)))/g:Q=Math.max(L,Math.min(1,Math.abs(xe[1]-me[1]-ue)))/n;const Ie=I(g*oe),Re=I(n*Q);De=Y(...ne(Ie,Re));const ze=Ae-De[0],je=Ve-De[1];this.width=Ie,this.height=Re,this.x=ze,this.y=je,this.setDims(k*Ie,ie*Re),this.fixAndSetPosition()},C=new WeakSet,pn=function(E){if(!this._isDraggable)return;const F=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let k,ie;F&&(k={passive:!0,capture:!0},ie=R=>{const[g,n]=this.screenToPageTranslation(R.movementX,R.movementY);this._uiManager.dragSelectedEditors(g,n)},window.addEventListener("pointermove",ie,k));const _e=()=>{if(window.removeEventListener("pointerup",_e),window.removeEventListener("blur",_e),F&&window.removeEventListener("pointermove",ie,k),J(this,T,!1),!this._uiManager.endDragSession()){const{isMac:R}=Z.FeatureTest.platform;E.ctrlKey&&!R||E.shiftKey||E.metaKey&&R?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",_e),window.addEventListener("blur",_e)},M(Pe,b),M(Pe,s),Ge(Pe,"_colorManager",new N.ColorManager),Ge(Pe,"_zIndex",1),H.AnnotationEditor=Pe;class ae extends Pe{constructor(E){super(E),this.annotationElementId=E.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(Be,H,Te)=>{var S,t,r,d,p,ti,m,i,s,h,c,gn,w,B,K,C,V,q,X,E,F,k,ie,_e,R,g,n,u,L,I,j,Y,te,Se,ge,ne,ce,Ee,me,xe,De,Ae,Ve,oe,Q,le,ue,mn,Re,ii,je,bn,Ue,ni,We,_n,_,vn,fe,it,he,gt,ve,wn,pe,yn,we,si,x,mt,G,ai;Object.defineProperty(H,"__esModule",{value:!0}),H.KeyboardManager=H.CommandManager=H.ColorManager=H.AnnotationEditorUIManager=void 0,H.bindEvents=Pe,H.opacityToHex=ae;var N=Te(1),Z=Te(6);function Pe(ke,$,de){for(const ye of de)$.addEventListener(ye,ke[ye].bind(ke))}function ae(ke){return Math.round(Math.min(255,Math.max(1,255*ke))).toString(16).padStart(2,"0")}class A{constructor(){M(this,S,0)}getId(){return`${N.AnnotationEditorPrefix}${rt(this,S)._++}`}}S=new WeakMap;const f=class{constructor(){M(this,p);M(this,t,(0,N.getUuid)());M(this,r,0);M(this,d,null)}static get _isSVGFittingCanvas(){const $='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',ye=new OffscreenCanvas(1,3).getContext("2d"),Fe=new Image;Fe.src=$;const Me=Fe.decode().then(()=>(ye.drawImage(Fe,0,0,1,1,0,0,1,3),new Uint32Array(ye.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,N.shadow)(this,"_isSVGFittingCanvas",Me)}async getFromFile($){const{lastModified:de,name:ye,size:Fe,type:Me}=$;return O(this,p,ti).call(this,`${de}_${ye}_${Fe}_${Me}`,$)}async getFromUrl($){return O(this,p,ti).call(this,$,$)}async getFromId($){e(this,d)||J(this,d,new Map);const de=e(this,d).get($);return de?de.bitmap?(de.refCounter+=1,de):de.file?this.getFromFile(de.file):this.getFromUrl(de.url):null}getSvgUrl($){const de=e(this,d).get($);return de!=null&&de.isSvg?de.svgUrl:null}deleteId($){e(this,d)||J(this,d,new Map);const de=e(this,d).get($);de&&(de.refCounter-=1,de.refCounter===0&&(de.bitmap=null))}isValidId($){return $.startsWith(`image_${e(this,t)}_`)}};let P=f;t=new WeakMap,r=new WeakMap,d=new WeakMap,p=new WeakSet,ti=async function($,de){e(this,d)||J(this,d,new Map);let ye=e(this,d).get($);if(ye===null)return null;if(ye!=null&&ye.bitmap)return ye.refCounter+=1,ye;try{ye||(ye={bitmap:null,id:`image_${e(this,t)}_${rt(this,r)._++}`,refCounter:0,isSvg:!1});let Fe;if(typeof de=="string"){ye.url=de;const Me=await fetch(de);if(!Me.ok)throw new Error(Me.statusText);Fe=await Me.blob()}else Fe=ye.file=de;if(Fe.type==="image/svg+xml"){const Me=f._isSVGFittingCanvas,Oe=new FileReader,He=new Image,$e=new Promise((qe,Ke)=>{He.onload=()=>{ye.bitmap=He,ye.isSvg=!0,qe()},Oe.onload=async()=>{const Qe=ye.svgUrl=Oe.result;He.src=await Me?`${Qe}#svgView(preserveAspectRatio(none))`:Qe},He.onerror=Oe.onerror=Ke});Oe.readAsDataURL(Fe),await $e}else ye.bitmap=await createImageBitmap(Fe);ye.refCounter=1}catch(Fe){console.error(Fe),ye=null}return e(this,d).set($,ye),ye&&e(this,d).set(ye.id,ye),ye};class a{constructor($=128){M(this,m,[]);M(this,i,!1);M(this,s,void 0);M(this,h,-1);J(this,s,$)}add({cmd:$,undo:de,mustExec:ye,type:Fe=NaN,overwriteIfSameType:Me=!1,keepUndo:Oe=!1}){if(ye&&$(),e(this,i))return;const He={cmd:$,undo:de,type:Fe};if(e(this,h)===-1){e(this,m).length>0&&(e(this,m).length=0),J(this,h,0),e(this,m).push(He);return}if(Me&&e(this,m)[e(this,h)].type===Fe){Oe&&(He.undo=e(this,m)[e(this,h)].undo),e(this,m)[e(this,h)]=He;return}const $e=e(this,h)+1;$e===e(this,s)?e(this,m).splice(0,1):(J(this,h,$e),$e<e(this,m).length&&e(this,m).splice($e)),e(this,m).push(He)}undo(){e(this,h)!==-1&&(J(this,i,!0),e(this,m)[e(this,h)].undo(),J(this,i,!1),J(this,h,e(this,h)-1))}redo(){e(this,h)<e(this,m).length-1&&(J(this,h,e(this,h)+1),J(this,i,!0),e(this,m)[e(this,h)].cmd(),J(this,i,!1))}hasSomethingToUndo(){return e(this,h)!==-1}hasSomethingToRedo(){return e(this,h)<e(this,m).length-1}destroy(){J(this,m,null)}}m=new WeakMap,i=new WeakMap,s=new WeakMap,h=new WeakMap,H.CommandManager=a;class l{constructor($){M(this,c);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:de}=N.FeatureTest.platform;for(const[ye,Fe,Me={}]of $)for(const Oe of ye){const He=Oe.startsWith("mac+");de&&He?(this.callbacks.set(Oe.slice(4),{callback:Fe,options:Me}),this.allKeys.add(Oe.split("+").at(-1))):!de&&!He&&(this.callbacks.set(Oe,{callback:Fe,options:Me}),this.allKeys.add(Oe.split("+").at(-1)))}}exec($,de){if(!this.allKeys.has(de.key))return;const ye=this.callbacks.get(O(this,c,gn).call(this,de));if(!ye)return;const{callback:Fe,options:{bubbles:Me=!1,args:Oe=[],checker:He=null}}=ye;He&&!He($,de)||(Fe.bind($,...Oe)(),Me||(de.stopPropagation(),de.preventDefault()))}}c=new WeakSet,gn=function($){$.altKey&&this.buffer.push("alt"),$.ctrlKey&&this.buffer.push("ctrl"),$.metaKey&&this.buffer.push("meta"),$.shiftKey&&this.buffer.push("shift"),this.buffer.push($.key);const de=this.buffer.join("+");return this.buffer.length=0,de},H.KeyboardManager=l;const v=class{get _colors(){const $=new Map([["CanvasText",null],["Canvas",null]]);return(0,Z.getColorValues)($),(0,N.shadow)(this,"_colors",$)}convert($){const de=(0,Z.getRGB)($);if(!window.matchMedia("(forced-colors: active)").matches)return de;for(const[ye,Fe]of this._colors)if(Fe.every((Me,Oe)=>Me===de[Oe]))return v._colorsMapping.get(ye);return de}getHexCode($){const de=this._colors.get($);return de?N.Util.makeHexColor(...de):$}};let T=v;Ge(T,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]])),H.ColorManager=T;const be=class{constructor($,de,ye,Fe,Me){M(this,ue);M(this,Re);M(this,je);M(this,Ue);M(this,We);M(this,_);M(this,fe);M(this,he);M(this,ve);M(this,pe);M(this,we);M(this,x);M(this,G);M(this,w,null);M(this,B,new Map);M(this,K,new Map);M(this,C,null);M(this,V,new a);M(this,q,0);M(this,X,new Set);M(this,E,null);M(this,F,null);M(this,k,new Set);M(this,ie,null);M(this,_e,null);M(this,R,new A);M(this,g,!1);M(this,n,!1);M(this,u,null);M(this,L,N.AnnotationEditorType.NONE);M(this,I,new Set);M(this,j,null);M(this,Y,this.blur.bind(this));M(this,te,this.focus.bind(this));M(this,Se,this.copy.bind(this));M(this,ge,this.cut.bind(this));M(this,ne,this.paste.bind(this));M(this,ce,this.keydown.bind(this));M(this,Ee,this.onEditingAction.bind(this));M(this,me,this.onPageChanging.bind(this));M(this,xe,this.onScaleChanging.bind(this));M(this,De,this.onRotationChanging.bind(this));M(this,Ae,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});M(this,Ve,[0,0]);M(this,oe,null);M(this,Q,null);M(this,le,null);J(this,Q,$),J(this,le,de),J(this,ie,ye),e(this,ie)._on("editingaction",e(this,Ee)),e(this,ie)._on("pagechanging",e(this,me)),e(this,ie)._on("scalechanging",e(this,xe)),e(this,ie)._on("rotationchanging",e(this,De)),J(this,C,Fe.annotationStorage),J(this,_e,Fe.filterFactory),J(this,j,Me),this.viewParameters={realScale:Z.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}static get _keyboardManager(){const $=be.prototype,de=Me=>{const{activeElement:Oe}=document;return Oe&&e(Me,Q).contains(Oe)&&Me.hasSomethingToControl()},ye=this.TRANSLATE_SMALL,Fe=this.TRANSLATE_BIG;return(0,N.shadow)(this,"_keyboardManager",new l([[["ctrl+a","mac+meta+a"],$.selectAll],[["ctrl+z","mac+meta+z"],$.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],$.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],$.delete],[["Escape","mac+Escape"],$.unselectAll],[["ArrowLeft","mac+ArrowLeft"],$.translateSelectedEditors,{args:[-ye,0],checker:de}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],$.translateSelectedEditors,{args:[-Fe,0],checker:de}],[["ArrowRight","mac+ArrowRight"],$.translateSelectedEditors,{args:[ye,0],checker:de}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],$.translateSelectedEditors,{args:[Fe,0],checker:de}],[["ArrowUp","mac+ArrowUp"],$.translateSelectedEditors,{args:[0,-ye],checker:de}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],$.translateSelectedEditors,{args:[0,-Fe],checker:de}],[["ArrowDown","mac+ArrowDown"],$.translateSelectedEditors,{args:[0,ye],checker:de}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],$.translateSelectedEditors,{args:[0,Fe],checker:de}]]))}destroy(){O(this,Ue,ni).call(this),O(this,Re,ii).call(this),e(this,ie)._off("editingaction",e(this,Ee)),e(this,ie)._off("pagechanging",e(this,me)),e(this,ie)._off("scalechanging",e(this,xe)),e(this,ie)._off("rotationchanging",e(this,De));for(const $ of e(this,K).values())$.destroy();e(this,K).clear(),e(this,B).clear(),e(this,k).clear(),J(this,w,null),e(this,I).clear(),e(this,V).destroy()}get hcmFilter(){return(0,N.shadow)(this,"hcmFilter",e(this,j)?e(this,_e).addHCMFilter(e(this,j).foreground,e(this,j).background):"none")}onPageChanging({pageNumber:$}){J(this,q,$-1)}focusMainContainer(){e(this,Q).focus()}findParent($,de){for(const ye of e(this,K).values()){const{x:Fe,y:Me,width:Oe,height:He}=ye.div.getBoundingClientRect();if($>=Fe&&$<=Fe+Oe&&de>=Me&&de<=Me+He)return ye}return null}disableUserSelect($=!1){e(this,le).classList.toggle("noUserSelect",$)}addShouldRescale($){e(this,k).add($)}removeShouldRescale($){e(this,k).delete($)}onScaleChanging({scale:$}){this.commitOrRemove(),this.viewParameters.realScale=$*Z.PixelsPerInch.PDF_TO_CSS_UNITS;for(const de of e(this,k))de.onScaleChanging()}onRotationChanging({pagesRotation:$}){this.commitOrRemove(),this.viewParameters.rotation=$}addToAnnotationStorage($){!$.isEmpty()&&e(this,C)&&!e(this,C).has($.id)&&e(this,C).setValue($.id,$)}blur(){if(!this.hasSelection)return;const{activeElement:$}=document;for(const de of e(this,I))if(de.div.contains($)){J(this,u,[de,$]),de._focusEventsAllowed=!1;break}}focus(){if(!e(this,u))return;const[$,de]=e(this,u);J(this,u,null),de.addEventListener("focusin",()=>{$._focusEventsAllowed=!0},{once:!0}),de.focus()}copy($){var ye;if($.preventDefault(),(ye=e(this,w))==null||ye.commitOrRemove(),!this.hasSelection)return;const de=[];for(const Fe of e(this,I)){const Me=Fe.serialize(!0);Me&&de.push(Me)}de.length!==0&&$.clipboardData.setData("application/pdfjs",JSON.stringify(de))}cut($){this.copy($),this.delete()}paste($){$.preventDefault();const{clipboardData:de}=$;for(const Me of de.items)for(const Oe of e(this,F))if(Oe.isHandlingMimeForPasting(Me.type)){Oe.paste(Me,this.currentLayer);return}let ye=de.getData("application/pdfjs");if(!ye)return;try{ye=JSON.parse(ye)}catch(Me){(0,N.warn)(`paste: "${Me.message}".`);return}if(!Array.isArray(ye))return;this.unselectAll();const Fe=this.currentLayer;try{const Me=[];for(const $e of ye){const qe=Fe.deserialize($e);if(!qe)return;Me.push(qe)}const Oe=()=>{for(const $e of Me)O(this,we,si).call(this,$e);O(this,G,ai).call(this,Me)},He=()=>{for(const $e of Me)$e.remove()};this.addCommands({cmd:Oe,undo:He,mustExec:!0})}catch(Me){(0,N.warn)(`paste: "${Me.message}".`)}}keydown($){var de;(de=this.getActive())!=null&&de.shouldGetKeyboardEvents()||be._keyboardManager.exec(this,$)}onEditingAction($){["undo","redo","delete","selectAll"].includes($.name)&&this[$.name]()}setEditingState($){$?(O(this,ue,mn).call(this),O(this,je,bn).call(this),O(this,We,_n).call(this),O(this,fe,it).call(this,{isEditing:e(this,L)!==N.AnnotationEditorType.NONE,isEmpty:O(this,x,mt).call(this),hasSomethingToUndo:e(this,V).hasSomethingToUndo(),hasSomethingToRedo:e(this,V).hasSomethingToRedo(),hasSelectedEditor:!1})):(O(this,Re,ii).call(this),O(this,Ue,ni).call(this),O(this,_,vn).call(this),O(this,fe,it).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes($){if(!e(this,F)){J(this,F,$);for(const de of e(this,F))O(this,he,gt).call(this,de.defaultPropertiesToUpdate)}}getId(){return e(this,R).getId()}get currentLayer(){return e(this,K).get(e(this,q))}getLayer($){return e(this,K).get($)}get currentPageIndex(){return e(this,q)}addLayer($){e(this,K).set($.pageIndex,$),e(this,g)?$.enable():$.disable()}removeLayer($){e(this,K).delete($.pageIndex)}updateMode($,de=null){if(e(this,L)!==$){if(J(this,L,$),$===N.AnnotationEditorType.NONE){this.setEditingState(!1),O(this,pe,yn).call(this);return}this.setEditingState(!0),O(this,ve,wn).call(this),this.unselectAll();for(const ye of e(this,K).values())ye.updateMode($);if(de){for(const ye of e(this,B).values())if(ye.annotationElementId===de){this.setSelected(ye),ye.enterInEditMode();break}}}}updateToolbar($){$!==e(this,L)&&e(this,ie).dispatch("switchannotationeditormode",{source:this,mode:$})}updateParams($,de){if(e(this,F)){if($===N.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor($);return}for(const ye of e(this,I))ye.updateParams($,de);for(const ye of e(this,F))ye.updateDefaultParams($,de)}}enableWaiting($=!1){if(e(this,n)!==$){J(this,n,$);for(const de of e(this,K).values())$?de.disableClick():de.enableClick(),de.div.classList.toggle("waiting",$)}}getEditors($){const de=[];for(const ye of e(this,B).values())ye.pageIndex===$&&de.push(ye);return de}getEditor($){return e(this,B).get($)}addEditor($){e(this,B).set($.id,$)}removeEditor($){var de;e(this,B).delete($.id),this.unselect($),(!$.annotationElementId||!e(this,X).has($.annotationElementId))&&((de=e(this,C))==null||de.remove($.id))}addDeletedAnnotationElement($){e(this,X).add($.annotationElementId),$.deleted=!0}isDeletedAnnotationElement($){return e(this,X).has($)}removeDeletedAnnotationElement($){e(this,X).delete($.annotationElementId),$.deleted=!1}setActiveEditor($){e(this,w)!==$&&(J(this,w,$),$&&O(this,he,gt).call(this,$.propertiesToUpdate))}toggleSelected($){if(e(this,I).has($)){e(this,I).delete($),$.unselect(),O(this,fe,it).call(this,{hasSelectedEditor:this.hasSelection});return}e(this,I).add($),$.select(),O(this,he,gt).call(this,$.propertiesToUpdate),O(this,fe,it).call(this,{hasSelectedEditor:!0})}setSelected($){for(const de of e(this,I))de!==$&&de.unselect();e(this,I).clear(),e(this,I).add($),$.select(),O(this,he,gt).call(this,$.propertiesToUpdate),O(this,fe,it).call(this,{hasSelectedEditor:!0})}isSelected($){return e(this,I).has($)}unselect($){$.unselect(),e(this,I).delete($),O(this,fe,it).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return e(this,I).size!==0}undo(){e(this,V).undo(),O(this,fe,it).call(this,{hasSomethingToUndo:e(this,V).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:O(this,x,mt).call(this)})}redo(){e(this,V).redo(),O(this,fe,it).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:e(this,V).hasSomethingToRedo(),isEmpty:O(this,x,mt).call(this)})}addCommands($){e(this,V).add($),O(this,fe,it).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:O(this,x,mt).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const $=[...e(this,I)],de=()=>{for(const Fe of $)Fe.remove()},ye=()=>{for(const Fe of $)O(this,we,si).call(this,Fe)};this.addCommands({cmd:de,undo:ye,mustExec:!0})}commitOrRemove(){var $;($=e(this,w))==null||$.commitOrRemove()}hasSomethingToControl(){return e(this,w)||this.hasSelection}selectAll(){for(const $ of e(this,I))$.commit();O(this,G,ai).call(this,e(this,B).values())}unselectAll(){if(e(this,w)){e(this,w).commitOrRemove();return}if(this.hasSelection){for(const $ of e(this,I))$.unselect();e(this,I).clear(),O(this,fe,it).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors($,de,ye=!1){if(ye||this.commitOrRemove(),!this.hasSelection)return;e(this,Ve)[0]+=$,e(this,Ve)[1]+=de;const[Fe,Me]=e(this,Ve),Oe=[...e(this,I)],He=1e3;e(this,oe)&&clearTimeout(e(this,oe)),J(this,oe,setTimeout(()=>{J(this,oe,null),e(this,Ve)[0]=e(this,Ve)[1]=0,this.addCommands({cmd:()=>{for(const $e of Oe)e(this,B).has($e.id)&&$e.translateInPage(Fe,Me)},undo:()=>{for(const $e of Oe)e(this,B).has($e.id)&&$e.translateInPage(-Fe,-Me)},mustExec:!1})},He));for(const $e of Oe)$e.translateInPage($,de)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),J(this,E,new Map);for(const $ of e(this,I))e(this,E).set($,{savedX:$.x,savedY:$.y,savedPageIndex:$.parent.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!e(this,E))return!1;this.disableUserSelect(!1);const $=e(this,E);J(this,E,null);let de=!1;for(const[{x:Fe,y:Me,parent:Oe},He]of $)He.newX=Fe,He.newY=Me,He.newPageIndex=Oe.pageIndex,de||(de=Fe!==He.savedX||Me!==He.savedY||Oe.pageIndex!==He.savedPageIndex);if(!de)return!1;const ye=(Fe,Me,Oe,He)=>{if(e(this,B).has(Fe.id)){const $e=e(this,K).get(He);$e?Fe._setParentAndPosition($e,Me,Oe):(Fe.pageIndex=He,Fe.x=Me,Fe.y=Oe)}};return this.addCommands({cmd:()=>{for(const[Fe,{newX:Me,newY:Oe,newPageIndex:He}]of $)ye(Fe,Me,Oe,He)},undo:()=>{for(const[Fe,{savedX:Me,savedY:Oe,savedPageIndex:He}]of $)ye(Fe,Me,Oe,He)},mustExec:!0}),!0}dragSelectedEditors($,de){if(e(this,E))for(const ye of e(this,E).keys())ye.drag($,de)}rebuild($){if($.parent===null){const de=this.getLayer($.pageIndex);de?(de.changeParent($),de.addOrRebuild($)):(this.addEditor($),this.addToAnnotationStorage($),$.rebuild())}else $.parent.addOrRebuild($)}isActive($){return e(this,w)===$}getActive(){return e(this,w)}getMode(){return e(this,L)}get imageManager(){return(0,N.shadow)(this,"imageManager",new P)}};let y=be;w=new WeakMap,B=new WeakMap,K=new WeakMap,C=new WeakMap,V=new WeakMap,q=new WeakMap,X=new WeakMap,E=new WeakMap,F=new WeakMap,k=new WeakMap,ie=new WeakMap,_e=new WeakMap,R=new WeakMap,g=new WeakMap,n=new WeakMap,u=new WeakMap,L=new WeakMap,I=new WeakMap,j=new WeakMap,Y=new WeakMap,te=new WeakMap,Se=new WeakMap,ge=new WeakMap,ne=new WeakMap,ce=new WeakMap,Ee=new WeakMap,me=new WeakMap,xe=new WeakMap,De=new WeakMap,Ae=new WeakMap,Ve=new WeakMap,oe=new WeakMap,Q=new WeakMap,le=new WeakMap,ue=new WeakSet,mn=function(){window.addEventListener("focus",e(this,te)),window.addEventListener("blur",e(this,Y))},Re=new WeakSet,ii=function(){window.removeEventListener("focus",e(this,te)),window.removeEventListener("blur",e(this,Y))},je=new WeakSet,bn=function(){window.addEventListener("keydown",e(this,ce),{capture:!0})},Ue=new WeakSet,ni=function(){window.removeEventListener("keydown",e(this,ce),{capture:!0})},We=new WeakSet,_n=function(){document.addEventListener("copy",e(this,Se)),document.addEventListener("cut",e(this,ge)),document.addEventListener("paste",e(this,ne))},_=new WeakSet,vn=function(){document.removeEventListener("copy",e(this,Se)),document.removeEventListener("cut",e(this,ge)),document.removeEventListener("paste",e(this,ne))},fe=new WeakSet,it=function($){Object.entries($).some(([ye,Fe])=>e(this,Ae)[ye]!==Fe)&&e(this,ie).dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(e(this,Ae),$)})},he=new WeakSet,gt=function($){e(this,ie).dispatch("annotationeditorparamschanged",{source:this,details:$})},ve=new WeakSet,wn=function(){if(!e(this,g)){J(this,g,!0);for(const $ of e(this,K).values())$.enable()}},pe=new WeakSet,yn=function(){if(this.unselectAll(),e(this,g)){J(this,g,!1);for(const $ of e(this,K).values())$.disable()}},we=new WeakSet,si=function($){const de=e(this,K).get($.pageIndex);de?de.addOrRebuild($):this.addEditor($)},x=new WeakSet,mt=function(){if(e(this,B).size===0)return!0;if(e(this,B).size===1)for(const $ of e(this,B).values())return $.isEmpty();return!1},G=new WeakSet,ai=function($){e(this,I).clear();for(const de of $)de.isEmpty()||(e(this,I).add(de),de.select());O(this,fe,it).call(this,{hasSelectedEditor:!0})},Ge(y,"TRANSLATE_SMALL",1),Ge(y,"TRANSLATE_BIG",10),H.AnnotationEditorUIManager=y},(Be,H,Te)=>{var X,E,F,k,ie,_e,R,g,n,u,L,I,lt,Y,dt,Se,ri,ne,kt,Ee,It,xe,bt,Ae,_t;Object.defineProperty(H,"__esModule",{value:!0}),H.StatTimer=H.RenderingCancelledException=H.PixelsPerInch=H.PageViewport=H.PDFDateString=H.DOMStandardFontDataFactory=H.DOMSVGFactory=H.DOMFilterFactory=H.DOMCanvasFactory=H.DOMCMapReaderFactory=H.AnnotationPrefix=void 0,H.deprecated=h,H.getColorValues=B,H.getCurrentTransform=K,H.getCurrentTransformInverse=C,H.getFilenameFromUrl=b,H.getPdfFilenameFromUrl=f,H.getRGB=w,H.getXfaPageViewport=v,H.isDataScheme=d,H.isPdfFile=p,H.isValidFetchUrl=i,H.loadScript=s,H.setLayerDimensions=V;var N=Te(7),Z=Te(1);const Pe="http://www.w3.org/2000/svg",ae="pdfjs_internal_id_";H.AnnotationPrefix=ae;const q=class{};let A=q;Ge(A,"CSS",96),Ge(A,"PDF",72),Ge(A,"PDF_TO_CSS_UNITS",q.CSS/q.PDF),H.PixelsPerInch=A;class P extends N.BaseFilterFactory{constructor({docId:le,ownerDocument:ue=globalThis.document}={}){super();M(this,I);M(this,Y);M(this,Se);M(this,ne);M(this,Ee);M(this,xe);M(this,Ae);M(this,X,void 0);M(this,E,void 0);M(this,F,void 0);M(this,k,void 0);M(this,ie,void 0);M(this,_e,void 0);M(this,R,void 0);M(this,g,void 0);M(this,n,void 0);M(this,u,void 0);M(this,L,0);J(this,F,le),J(this,k,ue)}addFilter(le){if(!le)return"none";let ue=e(this,I,lt).get(le);if(ue)return ue;let Ie,Re,ze,je;if(le.length===1){const We=le[0],Le=new Array(256);for(let _=0;_<256;_++)Le[_]=We[_]/255;je=Ie=Re=ze=Le.join(",")}else{const[We,Le,_]=le,z=new Array(256),fe=new Array(256),ee=new Array(256);for(let he=0;he<256;he++)z[he]=We[he]/255,fe[he]=Le[he]/255,ee[he]=_[he]/255;Ie=z.join(","),Re=fe.join(","),ze=ee.join(","),je=`${Ie}${Re}${ze}`}if(ue=e(this,I,lt).get(je),ue)return e(this,I,lt).set(le,ue),ue;const Ne=`g_${e(this,F)}_transfer_map_${rt(this,L)._++}`,Ue=`url(#${Ne})`;e(this,I,lt).set(le,Ue),e(this,I,lt).set(je,Ue);const Xe=O(this,ne,kt).call(this,Ne);return O(this,xe,bt).call(this,Ie,Re,ze,Xe),Ue}addHCMFilter(le,ue){var Le;const Ie=`${le}-${ue}`;if(e(this,_e)===Ie)return e(this,R);if(J(this,_e,Ie),J(this,R,"none"),(Le=e(this,ie))==null||Le.remove(),!le||!ue)return e(this,R);const Re=O(this,Ae,_t).call(this,le);le=Z.Util.makeHexColor(...Re);const ze=O(this,Ae,_t).call(this,ue);if(ue=Z.Util.makeHexColor(...ze),e(this,Y,dt).style.color="",le==="#000000"&&ue==="#ffffff"||le===ue)return e(this,R);const je=new Array(256);for(let _=0;_<=255;_++){const z=_/255;je[_]=z<=.03928?z/12.92:((z+.055)/1.055)**2.4}const Ne=je.join(","),Ue=`g_${e(this,F)}_hcm_filter`,Xe=J(this,g,O(this,ne,kt).call(this,Ue));O(this,xe,bt).call(this,Ne,Ne,Ne,Xe),O(this,Se,ri).call(this,Xe);const We=(_,z)=>{const fe=Re[_]/255,ee=ze[_]/255,he=new Array(z+1);for(let re=0;re<=z;re++)he[re]=fe+re/z*(ee-fe);return he.join(",")};return O(this,xe,bt).call(this,We(0,5),We(1,5),We(2,5),Xe),J(this,R,`url(#${Ue})`),e(this,R)}addHighlightHCMFilter(le,ue,Ie,Re){var ee;const ze=`${le}-${ue}-${Ie}-${Re}`;if(e(this,n)===ze)return e(this,u);if(J(this,n,ze),J(this,u,"none"),(ee=e(this,g))==null||ee.remove(),!le||!ue)return e(this,u);const[je,Ne]=[le,ue].map(O(this,Ae,_t).bind(this));let Ue=Math.round(.2126*je[0]+.7152*je[1]+.0722*je[2]),Xe=Math.round(.2126*Ne[0]+.7152*Ne[1]+.0722*Ne[2]),[We,Le]=[Ie,Re].map(O(this,Ae,_t).bind(this));Xe<Ue&&([Ue,Xe,We,Le]=[Xe,Ue,Le,We]),e(this,Y,dt).style.color="";const _=(he,re,ve)=>{const U=new Array(256),pe=(Xe-Ue)/ve,Ce=he/255,we=(re-he)/(255*ve);let D=0;for(let x=0;x<=ve;x++){const W=Math.round(Ue+x*pe),G=Ce+x*we;for(let se=D;se<=W;se++)U[se]=G;D=W+1}for(let x=D;x<256;x++)U[x]=U[D-1];return U.join(",")},z=`g_${e(this,F)}_hcm_highlight_filter`,fe=J(this,g,O(this,ne,kt).call(this,z));return O(this,Se,ri).call(this,fe),O(this,xe,bt).call(this,_(We[0],Le[0],5),_(We[1],Le[1],5),_(We[2],Le[2],5),fe),J(this,u,`url(#${z})`),e(this,u)}destroy(le=!1){le&&(e(this,R)||e(this,u))||(e(this,E)&&(e(this,E).parentNode.parentNode.remove(),J(this,E,null)),e(this,X)&&(e(this,X).clear(),J(this,X,null)),J(this,L,0))}}X=new WeakMap,E=new WeakMap,F=new WeakMap,k=new WeakMap,ie=new WeakMap,_e=new WeakMap,R=new WeakMap,g=new WeakMap,n=new WeakMap,u=new WeakMap,L=new WeakMap,I=new WeakSet,lt=function(){return e(this,X)||J(this,X,new Map)},Y=new WeakSet,dt=function(){if(!e(this,E)){const le=e(this,k).createElement("div"),{style:ue}=le;ue.visibility="hidden",ue.contain="strict",ue.width=ue.height=0,ue.position="absolute",ue.top=ue.left=0,ue.zIndex=-1;const Ie=e(this,k).createElementNS(Pe,"svg");Ie.setAttribute("width",0),Ie.setAttribute("height",0),J(this,E,e(this,k).createElementNS(Pe,"defs")),le.append(Ie),Ie.append(e(this,E)),e(this,k).body.append(le)}return e(this,E)},Se=new WeakSet,ri=function(le){const ue=e(this,k).createElementNS(Pe,"feColorMatrix");ue.setAttribute("type","matrix"),ue.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),le.append(ue)},ne=new WeakSet,kt=function(le){const ue=e(this,k).createElementNS(Pe,"filter");return ue.setAttribute("color-interpolation-filters","sRGB"),ue.setAttribute("id",le),e(this,Y,dt).append(ue),ue},Ee=new WeakSet,It=function(le,ue,Ie){const Re=e(this,k).createElementNS(Pe,ue);Re.setAttribute("type","discrete"),Re.setAttribute("tableValues",Ie),le.append(Re)},xe=new WeakSet,bt=function(le,ue,Ie,Re){const ze=e(this,k).createElementNS(Pe,"feComponentTransfer");Re.append(ze),O(this,Ee,It).call(this,ze,"feFuncR",le),O(this,Ee,It).call(this,ze,"feFuncG",ue),O(this,Ee,It).call(this,ze,"feFuncB",Ie)},Ae=new WeakSet,_t=function(le){return e(this,Y,dt).style.color=le,w(getComputedStyle(e(this,Y,dt)).getPropertyValue("color"))},H.DOMFilterFactory=P;class a extends N.BaseCanvasFactory{constructor({ownerDocument:Q=globalThis.document}={}){super(),this._document=Q}_createCanvas(Q,le){const ue=this._document.createElement("canvas");return ue.width=Q,ue.height=le,ue}}H.DOMCanvasFactory=a;async function l(oe,Q=!1){if(i(oe,document.baseURI)){const le=await fetch(oe);if(!le.ok)throw new Error(le.statusText);return Q?new Uint8Array(await le.arrayBuffer()):(0,Z.stringToBytes)(await le.text())}return new Promise((le,ue)=>{const Ie=new XMLHttpRequest;Ie.open("GET",oe,!0),Q&&(Ie.responseType="arraybuffer"),Ie.onreadystatechange=()=>{if(Ie.readyState===XMLHttpRequest.DONE){if(Ie.status===200||Ie.status===0){let Re;if(Q&&Ie.response?Re=new Uint8Array(Ie.response):!Q&&Ie.responseText&&(Re=(0,Z.stringToBytes)(Ie.responseText)),Re){le(Re);return}}ue(new Error(Ie.statusText))}},Ie.send(null)})}class T extends N.BaseCMapReaderFactory{_fetchData(Q,le){return l(Q,this.isCompressed).then(ue=>({cMapData:ue,compressionType:le}))}}H.DOMCMapReaderFactory=T;class y extends N.BaseStandardFontDataFactory{_fetchData(Q){return l(Q,!0)}}H.DOMStandardFontDataFactory=y;class S extends N.BaseSVGFactory{_createSVG(Q){return document.createElementNS(Pe,Q)}}H.DOMSVGFactory=S;class t{constructor({viewBox:Q,scale:le,rotation:ue,offsetX:Ie=0,offsetY:Re=0,dontFlip:ze=!1}){this.viewBox=Q,this.scale=le,this.rotation=ue,this.offsetX=Ie,this.offsetY=Re;const je=(Q[2]+Q[0])/2,Ne=(Q[3]+Q[1])/2;let Ue,Xe,We,Le;switch(ue%=360,ue<0&&(ue+=360),ue){case 180:Ue=-1,Xe=0,We=0,Le=1;break;case 90:Ue=0,Xe=1,We=1,Le=0;break;case 270:Ue=0,Xe=-1,We=-1,Le=0;break;case 0:Ue=1,Xe=0,We=0,Le=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}ze&&(We=-We,Le=-Le);let _,z,fe,ee;Ue===0?(_=Math.abs(Ne-Q[1])*le+Ie,z=Math.abs(je-Q[0])*le+Re,fe=(Q[3]-Q[1])*le,ee=(Q[2]-Q[0])*le):(_=Math.abs(je-Q[0])*le+Ie,z=Math.abs(Ne-Q[1])*le+Re,fe=(Q[2]-Q[0])*le,ee=(Q[3]-Q[1])*le),this.transform=[Ue*le,Xe*le,We*le,Le*le,_-Ue*le*je-We*le*Ne,z-Xe*le*je-Le*le*Ne],this.width=fe,this.height=ee}get rawDims(){const{viewBox:Q}=this;return(0,Z.shadow)(this,"rawDims",{pageWidth:Q[2]-Q[0],pageHeight:Q[3]-Q[1],pageX:Q[0],pageY:Q[1]})}clone({scale:Q=this.scale,rotation:le=this.rotation,offsetX:ue=this.offsetX,offsetY:Ie=this.offsetY,dontFlip:Re=!1}={}){return new t({viewBox:this.viewBox.slice(),scale:Q,rotation:le,offsetX:ue,offsetY:Ie,dontFlip:Re})}convertToViewportPoint(Q,le){return Z.Util.applyTransform([Q,le],this.transform)}convertToViewportRectangle(Q){const le=Z.Util.applyTransform([Q[0],Q[1]],this.transform),ue=Z.Util.applyTransform([Q[2],Q[3]],this.transform);return[le[0],le[1],ue[0],ue[1]]}convertToPdfPoint(Q,le){return Z.Util.applyInverseTransform([Q,le],this.transform)}}H.PageViewport=t;class r extends Z.BaseException{constructor(Q,le=0){super(Q,"RenderingCancelledException"),this.extraDelay=le}}H.RenderingCancelledException=r;function d(oe){const Q=oe.length;let le=0;for(;le<Q&&oe[le].trim()==="";)le++;return oe.substring(le,le+5).toLowerCase()==="data:"}function p(oe){return typeof oe=="string"&&/\.pdf$/i.test(oe)}function b(oe,Q=!1){return Q||([oe]=oe.split(/[#?]/,1)),oe.substring(oe.lastIndexOf("/")+1)}function f(oe,Q="document.pdf"){if(typeof oe!="string")return Q;if(d(oe))return(0,Z.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),Q;const le=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,ue=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,Ie=le.exec(oe);let Re=ue.exec(Ie[1])||ue.exec(Ie[2])||ue.exec(Ie[3]);if(Re&&(Re=Re[0],Re.includes("%")))try{Re=ue.exec(decodeURIComponent(Re))[0]}catch{}return Re||Q}class m{constructor(){Ge(this,"started",Object.create(null));Ge(this,"times",[])}time(Q){Q in this.started&&(0,Z.warn)(`Timer is already running for ${Q}`),this.started[Q]=Date.now()}timeEnd(Q){Q in this.started||(0,Z.warn)(`Timer has not been started for ${Q}`),this.times.push({name:Q,start:this.started[Q],end:Date.now()}),delete this.started[Q]}toString(){const Q=[];let le=0;for(const{name:ue}of this.times)le=Math.max(ue.length,le);for(const{name:ue,start:Ie,end:Re}of this.times)Q.push(`${ue.padEnd(le)} ${Re-Ie}ms
`);return Q.join("")}}H.StatTimer=m;function i(oe,Q){try{const{protocol:le}=Q?new URL(oe,Q):new URL(oe);return le==="http:"||le==="https:"}catch{return!1}}function s(oe,Q=!1){return new Promise((le,ue)=>{const Ie=document.createElement("script");Ie.src=oe,Ie.onload=function(Re){Q&&Ie.remove(),le(Re)},Ie.onerror=function(){ue(new Error(`Cannot load script at: ${Ie.src}`))},(document.head||document.documentElement).append(Ie)})}function h(oe){console.log("Deprecated API usage: "+oe)}let c;class o{static toDateObject(Q){if(!Q||typeof Q!="string")return null;c||(c=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const le=c.exec(Q);if(!le)return null;const ue=parseInt(le[1],10);let Ie=parseInt(le[2],10);Ie=Ie>=1&&Ie<=12?Ie-1:0;let Re=parseInt(le[3],10);Re=Re>=1&&Re<=31?Re:1;let ze=parseInt(le[4],10);ze=ze>=0&&ze<=23?ze:0;let je=parseInt(le[5],10);je=je>=0&&je<=59?je:0;let Ne=parseInt(le[6],10);Ne=Ne>=0&&Ne<=59?Ne:0;const Ue=le[7]||"Z";let Xe=parseInt(le[8],10);Xe=Xe>=0&&Xe<=23?Xe:0;let We=parseInt(le[9],10)||0;return We=We>=0&&We<=59?We:0,Ue==="-"?(ze+=Xe,je+=We):Ue==="+"&&(ze-=Xe,je-=We),new Date(Date.UTC(ue,Ie,Re,ze,je,Ne))}}H.PDFDateString=o;function v(oe,{scale:Q=1,rotation:le=0}){const{width:ue,height:Ie}=oe.attributes.style,Re=[0,0,parseInt(ue),parseInt(Ie)];return new t({viewBox:Re,scale:Q,rotation:le})}function w(oe){if(oe.startsWith("#")){const Q=parseInt(oe.slice(1),16);return[(Q&16711680)>>16,(Q&65280)>>8,Q&255]}return oe.startsWith("rgb(")?oe.slice(4,-1).split(",").map(Q=>parseInt(Q)):oe.startsWith("rgba(")?oe.slice(5,-1).split(",").map(Q=>parseInt(Q)).slice(0,3):((0,Z.warn)(`Not a valid color format: "${oe}"`),[0,0,0])}function B(oe){const Q=document.createElement("span");Q.style.visibility="hidden",document.body.append(Q);for(const le of oe.keys()){Q.style.color=le;const ue=window.getComputedStyle(Q).color;oe.set(le,w(ue))}Q.remove()}function K(oe){const{a:Q,b:le,c:ue,d:Ie,e:Re,f:ze}=oe.getTransform();return[Q,le,ue,Ie,Re,ze]}function C(oe){const{a:Q,b:le,c:ue,d:Ie,e:Re,f:ze}=oe.getTransform().invertSelf();return[Q,le,ue,Ie,Re,ze]}function V(oe,Q,le=!1,ue=!0){if(Q instanceof t){const{pageWidth:Ie,pageHeight:Re}=Q.rawDims,{style:ze}=oe,je=Z.FeatureTest.isCSSRoundSupported,Ne=`var(--scale-factor) * ${Ie}px`,Ue=`var(--scale-factor) * ${Re}px`,Xe=je?`round(${Ne}, 1px)`:`calc(${Ne})`,We=je?`round(${Ue}, 1px)`:`calc(${Ue})`;!le||Q.rotation%180===0?(ze.width=Xe,ze.height=We):(ze.width=We,ze.height=Xe)}ue&&oe.setAttribute("data-main-rotation",Q.rotation)}},(Be,H,Te)=>{Object.defineProperty(H,"__esModule",{value:!0}),H.BaseStandardFontDataFactory=H.BaseSVGFactory=H.BaseFilterFactory=H.BaseCanvasFactory=H.BaseCMapReaderFactory=void 0;var N=Te(1);class Z{constructor(){this.constructor===Z&&(0,N.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(l){return"none"}addHCMFilter(l,T){return"none"}addHighlightHCMFilter(l,T,y,S){return"none"}destroy(l=!1){}}H.BaseFilterFactory=Z;class Pe{constructor(){this.constructor===Pe&&(0,N.unreachable)("Cannot initialize BaseCanvasFactory.")}create(l,T){if(l<=0||T<=0)throw new Error("Invalid canvas size");const y=this._createCanvas(l,T);return{canvas:y,context:y.getContext("2d")}}reset(l,T,y){if(!l.canvas)throw new Error("Canvas is not specified");if(T<=0||y<=0)throw new Error("Invalid canvas size");l.canvas.width=T,l.canvas.height=y}destroy(l){if(!l.canvas)throw new Error("Canvas is not specified");l.canvas.width=0,l.canvas.height=0,l.canvas=null,l.context=null}_createCanvas(l,T){(0,N.unreachable)("Abstract method `_createCanvas` called.")}}H.BaseCanvasFactory=Pe;class ae{constructor({baseUrl:l=null,isCompressed:T=!0}){this.constructor===ae&&(0,N.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=l,this.isCompressed=T}async fetch({name:l}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!l)throw new Error("CMap name must be specified.");const T=this.baseUrl+l+(this.isCompressed?".bcmap":""),y=this.isCompressed?N.CMapCompressionType.BINARY:N.CMapCompressionType.NONE;return this._fetchData(T,y).catch(S=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${T}`)})}_fetchData(l,T){(0,N.unreachable)("Abstract method `_fetchData` called.")}}H.BaseCMapReaderFactory=ae;class A{constructor({baseUrl:l=null}){this.constructor===A&&(0,N.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=l}async fetch({filename:l}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!l)throw new Error("Font filename must be specified.");const T=`${this.baseUrl}${l}`;return this._fetchData(T).catch(y=>{throw new Error(`Unable to load font data at: ${T}`)})}_fetchData(l){(0,N.unreachable)("Abstract method `_fetchData` called.")}}H.BaseStandardFontDataFactory=A;class P{constructor(){this.constructor===P&&(0,N.unreachable)("Cannot initialize BaseSVGFactory.")}create(l,T,y=!1){if(l<=0||T<=0)throw new Error("Invalid SVG dimensions");const S=this._createSVG("svg:svg");return S.setAttribute("version","1.1"),y||(S.setAttribute("width",`${l}px`),S.setAttribute("height",`${T}px`)),S.setAttribute("preserveAspectRatio","none"),S.setAttribute("viewBox",`0 0 ${l} ${T}`),S}createElement(l){if(typeof l!="string")throw new Error("Invalid SVG element type");return this._createSVG(l)}_createSVG(l){(0,N.unreachable)("Abstract method `_createSVG` called.")}}H.BaseSVGFactory=P},(Be,H,Te)=>{Object.defineProperty(H,"__esModule",{value:!0}),H.MurmurHash3_64=void 0;var N=Te(1);const Z=3285377520,Pe=4294901760,ae=65535;class A{constructor(a){this.h1=a?a&4294967295:Z,this.h2=a?a&4294967295:Z}update(a){let l,T;if(typeof a=="string"){l=new Uint8Array(a.length*2),T=0;for(let h=0,c=a.length;h<c;h++){const o=a.charCodeAt(h);o<=255?l[T++]=o:(l[T++]=o>>>8,l[T++]=o&255)}}else if((0,N.isArrayBuffer)(a))l=a.slice(),T=l.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const y=T>>2,S=T-y*4,t=new Uint32Array(l.buffer,0,y);let r=0,d=0,p=this.h1,b=this.h2;const f=3432918353,m=461845907,i=f&ae,s=m&ae;for(let h=0;h<y;h++)h&1?(r=t[h],r=r*f&Pe|r*i&ae,r=r<<15|r>>>17,r=r*m&Pe|r*s&ae,p^=r,p=p<<13|p>>>19,p=p*5+3864292196):(d=t[h],d=d*f&Pe|d*i&ae,d=d<<15|d>>>17,d=d*m&Pe|d*s&ae,b^=d,b=b<<13|b>>>19,b=b*5+3864292196);switch(r=0,S){case 3:r^=l[y*4+2]<<16;case 2:r^=l[y*4+1]<<8;case 1:r^=l[y*4],r=r*f&Pe|r*i&ae,r=r<<15|r>>>17,r=r*m&Pe|r*s&ae,y&1?p^=r:b^=r}this.h1=p,this.h2=b}hexdigest(){let a=this.h1,l=this.h2;return a^=l>>>1,a=a*3981806797&Pe|a*36045&ae,l=l*4283543511&Pe|((l<<16|a>>>16)*2950163797&Pe)>>>16,a^=l>>>1,a=a*444984403&Pe|a*60499&ae,l=l*3301882366&Pe|((l<<16|a>>>16)*3120437893&Pe)>>>16,a^=l>>>1,(a>>>0).toString(16).padStart(8,"0")+(l>>>0).toString(16).padStart(8,"0")}}H.MurmurHash3_64=A},(Be,H,Te)=>{var ae;Object.defineProperty(H,"__esModule",{value:!0}),H.FontLoader=H.FontFaceObject=void 0;var N=Te(1);class Z{constructor({ownerDocument:P=globalThis.document,styleElement:a=null}){M(this,ae,new Set);this._document=P,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(P){this.nativeFontFaces.add(P),this._document.fonts.add(P)}removeNativeFontFace(P){this.nativeFontFaces.delete(P),this._document.fonts.delete(P)}insertRule(P){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const a=this.styleElement.sheet;a.insertRule(P,a.cssRules.length)}clear(){for(const P of this.nativeFontFaces)this._document.fonts.delete(P);this.nativeFontFaces.clear(),e(this,ae).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(P){if(!(!P||e(this,ae).has(P.loadedName))){if((0,N.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:a,src:l,style:T}=P,y=new FontFace(a,l,T);this.addNativeFontFace(y);try{await y.load(),e(this,ae).add(a)}catch{(0,N.warn)(`Cannot load system font: ${P.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(y)}return}(0,N.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(P){if(P.attached||P.missingFile&&!P.systemFontInfo)return;if(P.attached=!0,P.systemFontInfo){await this.loadSystemFont(P.systemFontInfo);return}if(this.isFontLoadingAPISupported){const l=P.createNativeFontFace();if(l){this.addNativeFontFace(l);try{await l.loaded}catch(T){throw(0,N.warn)(`Failed to load font '${l.family}': '${T}'.`),P.disableFontFace=!0,T}}return}const a=P.createFontFaceRule();if(a){if(this.insertRule(a),this.isSyncFontLoadingSupported)return;await new Promise(l=>{const T=this._queueLoadingCallback(l);this._prepareFontLoadEvent(P,T)})}}get isFontLoadingAPISupported(){var a;const P=!!((a=this._document)!=null&&a.fonts);return(0,N.shadow)(this,"isFontLoadingAPISupported",P)}get isSyncFontLoadingSupported(){let P=!1;return(N.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(P=!0),(0,N.shadow)(this,"isSyncFontLoadingSupported",P)}_queueLoadingCallback(P){function a(){for((0,N.assert)(!T.done,"completeRequest() cannot be called twice."),T.done=!0;l.length>0&&l[0].done;){const y=l.shift();setTimeout(y.callback,0)}}const{loadingRequests:l}=this,T={done:!1,complete:a,callback:P};return l.push(T),T}get _loadTestFont(){const P=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,N.shadow)(this,"_loadTestFont",P)}_prepareFontLoadEvent(P,a){function l(w,B){return w.charCodeAt(B)<<24|w.charCodeAt(B+1)<<16|w.charCodeAt(B+2)<<8|w.charCodeAt(B+3)&255}function T(w,B,K,C){const V=w.substring(0,B),q=w.substring(B+K);return V+C+q}let y,S;const t=this._document.createElement("canvas");t.width=1,t.height=1;const r=t.getContext("2d");let d=0;function p(w,B){if(++d>30){(0,N.warn)("Load test font never loaded."),B();return}if(r.font="30px "+w,r.fillText(".",0,20),r.getImageData(0,0,1,1).data[3]>0){B();return}setTimeout(p.bind(null,w,B))}const b=`lt${Date.now()}${this.loadTestFontId++}`;let f=this._loadTestFont;f=T(f,976,b.length,b);const i=16,s=1482184792;let h=l(f,i);for(y=0,S=b.length-3;y<S;y+=4)h=h-s+l(b,y)|0;y<b.length&&(h=h-s+l(b+"XXX",y)|0),f=T(f,i,4,(0,N.string32)(h));const c=`url(data:font/opentype;base64,${btoa(f)});`,o=`@font-face {font-family:"${b}";src:${c}}`;this.insertRule(o);const v=this._document.createElement("div");v.style.visibility="hidden",v.style.width=v.style.height="10px",v.style.position="absolute",v.style.top=v.style.left="0px";for(const w of[P.loadedName,b]){const B=this._document.createElement("span");B.textContent="Hi",B.style.fontFamily=w,v.append(B)}this._document.body.append(v),p(b,()=>{v.remove(),a.complete()})}}ae=new WeakMap,H.FontLoader=Z;class Pe{constructor(P,{isEvalSupported:a=!0,disableFontFace:l=!1,ignoreErrors:T=!1,inspectFont:y=null}){this.compiledGlyphs=Object.create(null);for(const S in P)this[S]=P[S];this.isEvalSupported=a!==!1,this.disableFontFace=l===!0,this.ignoreErrors=T===!0,this._inspectFont=y}createNativeFontFace(){var a;if(!this.data||this.disableFontFace)return null;let P;if(!this.cssFontInfo)P=new FontFace(this.loadedName,this.data,{});else{const l={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(l.style=`oblique ${this.cssFontInfo.italicAngle}deg`),P=new FontFace(this.cssFontInfo.fontFamily,this.data,l)}return(a=this._inspectFont)==null||a.call(this,this),P}createFontFaceRule(){var T;if(!this.data||this.disableFontFace)return null;const P=(0,N.bytesToString)(this.data),a=`url(data:${this.mimetype};base64,${btoa(P)});`;let l;if(!this.cssFontInfo)l=`@font-face {font-family:"${this.loadedName}";src:${a}}`;else{let y=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(y+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),l=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${y}src:${a}}`}return(T=this._inspectFont)==null||T.call(this,this,a),l}getPathGenerator(P,a){if(this.compiledGlyphs[a]!==void 0)return this.compiledGlyphs[a];let l;try{l=P.get(this.loadedName+"_path_"+a)}catch(T){if(!this.ignoreErrors)throw T;return(0,N.warn)(`getPathGenerator - ignoring character: "${T}".`),this.compiledGlyphs[a]=function(y,S){}}if(this.isEvalSupported&&N.FeatureTest.isEvalSupported){const T=[];for(const y of l){const S=y.args!==void 0?y.args.join(","):"";T.push("c.",y.cmd,"(",S,`);
`)}return this.compiledGlyphs[a]=new Function("c","size",T.join(""))}return this.compiledGlyphs[a]=function(T,y){for(const S of l)S.cmd==="scale"&&(S.args=[y,-y]),T[S.cmd].apply(T,S.args)}}}H.FontFaceObject=Pe},(Be,H,Te)=>{Object.defineProperty(H,"__esModule",{value:!0}),H.NodeStandardFontDataFactory=H.NodeFilterFactory=H.NodeCanvasFactory=H.NodeCMapReaderFactory=void 0;var N=Te(7);Te(1);const Z=function(a){return new Promise((l,T)=>{require$$5.readFile(a,(S,t)=>{if(S||!t){T(new Error(S));return}l(new Uint8Array(t))})})};class Pe extends N.BaseFilterFactory{}H.NodeFilterFactory=Pe;class ae extends N.BaseCanvasFactory{_createCanvas(l,T){return require$$1.createCanvas(l,T)}}H.NodeCanvasFactory=ae;class A extends N.BaseCMapReaderFactory{_fetchData(l,T){return Z(l).then(y=>({cMapData:y,compressionType:T}))}}H.NodeCMapReaderFactory=A;class P extends N.BaseStandardFontDataFactory{_fetchData(l){return Z(l)}}H.NodeStandardFontDataFactory=P},(Be,H,Te)=>{var E,oi,k,li;Object.defineProperty(H,"__esModule",{value:!0}),H.CanvasGraphics=void 0;var N=Te(1),Z=Te(6),Pe=Te(12),ae=Te(13);const A=16,P=100,a=4096,l=15,T=10,y=1e3,S=16;function t(R,g){if(R._removeMirroring)throw new Error("Context is already forwarding operations.");R.__originalSave=R.save,R.__originalRestore=R.restore,R.__originalRotate=R.rotate,R.__originalScale=R.scale,R.__originalTranslate=R.translate,R.__originalTransform=R.transform,R.__originalSetTransform=R.setTransform,R.__originalResetTransform=R.resetTransform,R.__originalClip=R.clip,R.__originalMoveTo=R.moveTo,R.__originalLineTo=R.lineTo,R.__originalBezierCurveTo=R.bezierCurveTo,R.__originalRect=R.rect,R.__originalClosePath=R.closePath,R.__originalBeginPath=R.beginPath,R._removeMirroring=()=>{R.save=R.__originalSave,R.restore=R.__originalRestore,R.rotate=R.__originalRotate,R.scale=R.__originalScale,R.translate=R.__originalTranslate,R.transform=R.__originalTransform,R.setTransform=R.__originalSetTransform,R.resetTransform=R.__originalResetTransform,R.clip=R.__originalClip,R.moveTo=R.__originalMoveTo,R.lineTo=R.__originalLineTo,R.bezierCurveTo=R.__originalBezierCurveTo,R.rect=R.__originalRect,R.closePath=R.__originalClosePath,R.beginPath=R.__originalBeginPath,delete R._removeMirroring},R.save=function(){g.save(),this.__originalSave()},R.restore=function(){g.restore(),this.__originalRestore()},R.translate=function(u,L){g.translate(u,L),this.__originalTranslate(u,L)},R.scale=function(u,L){g.scale(u,L),this.__originalScale(u,L)},R.transform=function(u,L,I,j,Y,te){g.transform(u,L,I,j,Y,te),this.__originalTransform(u,L,I,j,Y,te)},R.setTransform=function(u,L,I,j,Y,te){g.setTransform(u,L,I,j,Y,te),this.__originalSetTransform(u,L,I,j,Y,te)},R.resetTransform=function(){g.resetTransform(),this.__originalResetTransform()},R.rotate=function(u){g.rotate(u),this.__originalRotate(u)},R.clip=function(u){g.clip(u),this.__originalClip(u)},R.moveTo=function(n,u){g.moveTo(n,u),this.__originalMoveTo(n,u)},R.lineTo=function(n,u){g.lineTo(n,u),this.__originalLineTo(n,u)},R.bezierCurveTo=function(n,u,L,I,j,Y){g.bezierCurveTo(n,u,L,I,j,Y),this.__originalBezierCurveTo(n,u,L,I,j,Y)},R.rect=function(n,u,L,I){g.rect(n,u,L,I),this.__originalRect(n,u,L,I)},R.closePath=function(){g.closePath(),this.__originalClosePath()},R.beginPath=function(){g.beginPath(),this.__originalBeginPath()}}class r{constructor(g){this.canvasFactory=g,this.cache=Object.create(null)}getCanvas(g,n,u){let L;return this.cache[g]!==void 0?(L=this.cache[g],this.canvasFactory.reset(L,n,u)):(L=this.canvasFactory.create(n,u),this.cache[g]=L),L}delete(g){delete this.cache[g]}clear(){for(const g in this.cache){const n=this.cache[g];this.canvasFactory.destroy(n),delete this.cache[g]}}}function d(R,g,n,u,L,I,j,Y,te,Se){const[ge,ne,ce,Ee,me,xe]=(0,Z.getCurrentTransform)(R);if(ne===0&&ce===0){const Ve=j*ge+me,oe=Math.round(Ve),Q=Y*Ee+xe,le=Math.round(Q),ue=(j+te)*ge+me,Ie=Math.abs(Math.round(ue)-oe)||1,Re=(Y+Se)*Ee+xe,ze=Math.abs(Math.round(Re)-le)||1;return R.setTransform(Math.sign(ge),0,0,Math.sign(Ee),oe,le),R.drawImage(g,n,u,L,I,0,0,Ie,ze),R.setTransform(ge,ne,ce,Ee,me,xe),[Ie,ze]}if(ge===0&&Ee===0){const Ve=Y*ce+me,oe=Math.round(Ve),Q=j*ne+xe,le=Math.round(Q),ue=(Y+Se)*ce+me,Ie=Math.abs(Math.round(ue)-oe)||1,Re=(j+te)*ne+xe,ze=Math.abs(Math.round(Re)-le)||1;return R.setTransform(0,Math.sign(ne),Math.sign(ce),0,oe,le),R.drawImage(g,n,u,L,I,0,0,ze,Ie),R.setTransform(ge,ne,ce,Ee,me,xe),[ze,Ie]}R.drawImage(g,n,u,L,I,j,Y,te,Se);const De=Math.hypot(ge,ne),Ae=Math.hypot(ce,Ee);return[De*te,Ae*Se]}function p(R){const{width:g,height:n}=R;if(g>y||n>y)return null;const u=1e3,L=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),I=g+1;let j=new Uint8Array(I*(n+1)),Y,te,Se;const ge=g+7&-8;let ne=new Uint8Array(ge*n),ce=0;for(const Ae of R.data){let Ve=128;for(;Ve>0;)ne[ce++]=Ae&Ve?0:255,Ve>>=1}let Ee=0;for(ce=0,ne[ce]!==0&&(j[0]=1,++Ee),te=1;te<g;te++)ne[ce]!==ne[ce+1]&&(j[te]=ne[ce]?2:1,++Ee),ce++;for(ne[ce]!==0&&(j[te]=2,++Ee),Y=1;Y<n;Y++){ce=Y*ge,Se=Y*I,ne[ce-ge]!==ne[ce]&&(j[Se]=ne[ce]?1:8,++Ee);let Ae=(ne[ce]?4:0)+(ne[ce-ge]?8:0);for(te=1;te<g;te++)Ae=(Ae>>2)+(ne[ce+1]?4:0)+(ne[ce-ge+1]?8:0),L[Ae]&&(j[Se+te]=L[Ae],++Ee),ce++;if(ne[ce-ge]!==ne[ce]&&(j[Se+te]=ne[ce]?2:4,++Ee),Ee>u)return null}for(ce=ge*(n-1),Se=Y*I,ne[ce]!==0&&(j[Se]=8,++Ee),te=1;te<g;te++)ne[ce]!==ne[ce+1]&&(j[Se+te]=ne[ce]?4:8,++Ee),ce++;if(ne[ce]!==0&&(j[Se+te]=4,++Ee),Ee>u)return null;const me=new Int32Array([0,I,-1,0,-I,0,0,0,1]),xe=new Path2D;for(Y=0;Ee&&Y<=n;Y++){let Ae=Y*I;const Ve=Ae+g;for(;Ae<Ve&&!j[Ae];)Ae++;if(Ae===Ve)continue;xe.moveTo(Ae%I,Y);const oe=Ae;let Q=j[Ae];do{const le=me[Q];do Ae+=le;while(!j[Ae]);const ue=j[Ae];ue!==5&&ue!==10?(Q=ue,j[Ae]=0):(Q=ue&51*Q>>4,j[Ae]&=Q>>2|Q<<2),xe.lineTo(Ae%I,Ae/I|0),j[Ae]||--Ee}while(oe!==Ae);--Y}return ne=null,j=null,function(Ae){Ae.save(),Ae.scale(1/g,-1/n),Ae.translate(0,-n),Ae.fill(xe),Ae.beginPath(),Ae.restore()}}class b{constructor(g,n){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=N.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=N.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=N.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,g,n])}clone(){const g=Object.create(this);return g.clipBox=this.clipBox.slice(),g}setCurrentPoint(g,n){this.x=g,this.y=n}updatePathMinMax(g,n,u){[n,u]=N.Util.applyTransform([n,u],g),this.minX=Math.min(this.minX,n),this.minY=Math.min(this.minY,u),this.maxX=Math.max(this.maxX,n),this.maxY=Math.max(this.maxY,u)}updateRectMinMax(g,n){const u=N.Util.applyTransform(n,g),L=N.Util.applyTransform(n.slice(2),g);this.minX=Math.min(this.minX,u[0],L[0]),this.minY=Math.min(this.minY,u[1],L[1]),this.maxX=Math.max(this.maxX,u[0],L[0]),this.maxY=Math.max(this.maxY,u[1],L[1])}updateScalingPathMinMax(g,n){N.Util.scaleMinMax(g,n),this.minX=Math.min(this.minX,n[0]),this.maxX=Math.max(this.maxX,n[1]),this.minY=Math.min(this.minY,n[2]),this.maxY=Math.max(this.maxY,n[3])}updateCurvePathMinMax(g,n,u,L,I,j,Y,te,Se,ge){const ne=N.Util.bezierBoundingBox(n,u,L,I,j,Y,te,Se);if(ge){ge[0]=Math.min(ge[0],ne[0],ne[2]),ge[1]=Math.max(ge[1],ne[0],ne[2]),ge[2]=Math.min(ge[2],ne[1],ne[3]),ge[3]=Math.max(ge[3],ne[1],ne[3]);return}this.updateRectMinMax(g,ne)}getPathBoundingBox(g=Pe.PathType.FILL,n=null){const u=[this.minX,this.minY,this.maxX,this.maxY];if(g===Pe.PathType.STROKE){n||(0,N.unreachable)("Stroke bounding box must include transform.");const L=N.Util.singularValueDecompose2dScale(n),I=L[0]*this.lineWidth/2,j=L[1]*this.lineWidth/2;u[0]-=I,u[1]-=j,u[2]+=I,u[3]+=j}return u}updateClipFromPath(){const g=N.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(g||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(g){this.clipBox=g,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(g=Pe.PathType.FILL,n=null){return N.Util.intersect(this.clipBox,this.getPathBoundingBox(g,n))}}function f(R,g){if(typeof ImageData<"u"&&g instanceof ImageData){R.putImageData(g,0,0);return}const n=g.height,u=g.width,L=n%S,I=(n-L)/S,j=L===0?I:I+1,Y=R.createImageData(u,S);let te=0,Se;const ge=g.data,ne=Y.data;let ce,Ee,me,xe;if(g.kind===N.ImageKind.GRAYSCALE_1BPP){const De=ge.byteLength,Ae=new Uint32Array(ne.buffer,0,ne.byteLength>>2),Ve=Ae.length,oe=u+7>>3,Q=4294967295,le=N.FeatureTest.isLittleEndian?4278190080:255;for(ce=0;ce<j;ce++){for(me=ce<I?S:L,Se=0,Ee=0;Ee<me;Ee++){const ue=De-te;let Ie=0;const Re=ue>oe?u:ue*8-7,ze=Re&-8;let je=0,Ne=0;for(;Ie<ze;Ie+=8)Ne=ge[te++],Ae[Se++]=Ne&128?Q:le,Ae[Se++]=Ne&64?Q:le,Ae[Se++]=Ne&32?Q:le,Ae[Se++]=Ne&16?Q:le,Ae[Se++]=Ne&8?Q:le,Ae[Se++]=Ne&4?Q:le,Ae[Se++]=Ne&2?Q:le,Ae[Se++]=Ne&1?Q:le;for(;Ie<Re;Ie++)je===0&&(Ne=ge[te++],je=128),Ae[Se++]=Ne&je?Q:le,je>>=1}for(;Se<Ve;)Ae[Se++]=0;R.putImageData(Y,0,ce*S)}}else if(g.kind===N.ImageKind.RGBA_32BPP){for(Ee=0,xe=u*S*4,ce=0;ce<I;ce++)ne.set(ge.subarray(te,te+xe)),te+=xe,R.putImageData(Y,0,Ee),Ee+=S;ce<j&&(xe=u*L*4,ne.set(ge.subarray(te,te+xe)),R.putImageData(Y,0,Ee))}else if(g.kind===N.ImageKind.RGB_24BPP)for(me=S,xe=u*me,ce=0;ce<j;ce++){for(ce>=I&&(me=L,xe=u*me),Se=0,Ee=xe;Ee--;)ne[Se++]=ge[te++],ne[Se++]=ge[te++],ne[Se++]=ge[te++],ne[Se++]=255;R.putImageData(Y,0,ce*S)}else throw new Error(`bad image kind: ${g.kind}`)}function m(R,g){if(g.bitmap){R.drawImage(g.bitmap,0,0);return}const n=g.height,u=g.width,L=n%S,I=(n-L)/S,j=L===0?I:I+1,Y=R.createImageData(u,S);let te=0;const Se=g.data,ge=Y.data;for(let ne=0;ne<j;ne++){const ce=ne<I?S:L;({srcPos:te}=(0,ae.convertBlackAndWhiteToRGBA)({src:Se,srcPos:te,dest:ge,width:u,height:ce,nonBlackColor:0})),R.putImageData(Y,0,ne*S)}}function i(R,g){const n=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const u of n)R[u]!==void 0&&(g[u]=R[u]);R.setLineDash!==void 0&&(g.setLineDash(R.getLineDash()),g.lineDashOffset=R.lineDashOffset)}function s(R){if(R.strokeStyle=R.fillStyle="#000000",R.fillRule="nonzero",R.globalAlpha=1,R.lineWidth=1,R.lineCap="butt",R.lineJoin="miter",R.miterLimit=10,R.globalCompositeOperation="source-over",R.font="10px sans-serif",R.setLineDash!==void 0&&(R.setLineDash([]),R.lineDashOffset=0),!N.isNodeJS){const{filter:g}=R;g!=="none"&&g!==""&&(R.filter="none")}}function h(R,g,n,u){const L=R.length;for(let I=3;I<L;I+=4){const j=R[I];if(j===0)R[I-3]=g,R[I-2]=n,R[I-1]=u;else if(j<255){const Y=255-j;R[I-3]=R[I-3]*j+g*Y>>8,R[I-2]=R[I-2]*j+n*Y>>8,R[I-1]=R[I-1]*j+u*Y>>8}}}function c(R,g,n){const u=R.length,L=1/255;for(let I=3;I<u;I+=4){const j=n?n[R[I]]:R[I];g[I]=g[I]*j*L|0}}function o(R,g,n){const u=R.length;for(let L=3;L<u;L+=4){const I=R[L-3]*77+R[L-2]*152+R[L-1]*28;g[L]=n?g[L]*n[I>>8]>>8:g[L]*I>>16}}function v(R,g,n,u,L,I,j,Y,te,Se,ge){const ne=!!I,ce=ne?I[0]:0,Ee=ne?I[1]:0,me=ne?I[2]:0,xe=L==="Luminosity"?o:c,Ae=Math.min(u,Math.ceil(1048576/n));for(let Ve=0;Ve<u;Ve+=Ae){const oe=Math.min(Ae,u-Ve),Q=R.getImageData(Y-Se,Ve+(te-ge),n,oe),le=g.getImageData(Y,Ve+te,n,oe);ne&&h(Q.data,ce,Ee,me),xe(Q.data,le.data,j),g.putImageData(le,Y,Ve+te)}}function w(R,g,n,u){const L=u[0],I=u[1],j=u[2]-L,Y=u[3]-I;j===0||Y===0||(v(g.context,n,j,Y,g.subtype,g.backdrop,g.transferMap,L,I,g.offsetX,g.offsetY),R.save(),R.globalAlpha=1,R.globalCompositeOperation="source-over",R.setTransform(1,0,0,1,0,0),R.drawImage(n.canvas,0,0),R.restore())}function B(R,g){const n=N.Util.singularValueDecompose2dScale(R);n[0]=Math.fround(n[0]),n[1]=Math.fround(n[1]);const u=Math.fround((globalThis.devicePixelRatio||1)*Z.PixelsPerInch.PDF_TO_CSS_UNITS);return g!==void 0?g:n[0]<=u||n[1]<=u}const K=["butt","round","square"],C=["miter","round","bevel"],V={},q={},_e=class{constructor(g,n,u,L,I,{optionalContentConfig:j,markedContentStack:Y=null},te,Se){M(this,E);M(this,k);this.ctx=g,this.current=new b(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=n,this.objs=u,this.canvasFactory=L,this.filterFactory=I,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=Y||[],this.optionalContentConfig=j,this.cachedCanvases=new r(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=te,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=Se,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(g,n=null){return typeof g=="string"?g.startsWith("g_")?this.commonObjs.get(g):this.objs.get(g):n}beginDrawing({transform:g,viewport:n,transparency:u=!1,background:L=null}){const I=this.ctx.canvas.width,j=this.ctx.canvas.height,Y=this.ctx.fillStyle;if(this.ctx.fillStyle=L||"#ffffff",this.ctx.fillRect(0,0,I,j),this.ctx.fillStyle=Y,u){const te=this.cachedCanvases.getCanvas("transparent",I,j);this.compositeCtx=this.ctx,this.transparentCanvas=te.canvas,this.ctx=te.context,this.ctx.save(),this.ctx.transform(...(0,Z.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),s(this.ctx),g&&(this.ctx.transform(...g),this.outputScaleX=g[0],this.outputScaleY=g[0]),this.ctx.transform(...n.transform),this.viewportScale=n.scale,this.baseTransform=(0,Z.getCurrentTransform)(this.ctx)}executeOperatorList(g,n,u,L){const I=g.argsArray,j=g.fnArray;let Y=n||0;const te=I.length;if(te===Y)return Y;const Se=te-Y>T&&typeof u=="function",ge=Se?Date.now()+l:0;let ne=0;const ce=this.commonObjs,Ee=this.objs;let me;for(;;){if(L!==void 0&&Y===L.nextBreakPoint)return L.breakIt(Y,u),Y;if(me=j[Y],me!==N.OPS.dependency)this[me].apply(this,I[Y]);else for(const xe of I[Y]){const De=xe.startsWith("g_")?ce:Ee;if(!De.has(xe))return De.get(xe,u),Y}if(Y++,Y===te)return Y;if(Se&&++ne>T){if(Date.now()>ge)return u(),Y;ne=0}}}endDrawing(){O(this,E,oi).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const g of this._cachedBitmapsMap.values()){for(const n of g.values())typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&(n.width=n.height=0);g.clear()}this._cachedBitmapsMap.clear(),O(this,k,li).call(this)}_scaleImage(g,n){const u=g.width,L=g.height;let I=Math.max(Math.hypot(n[0],n[1]),1),j=Math.max(Math.hypot(n[2],n[3]),1),Y=u,te=L,Se="prescale1",ge,ne;for(;I>2&&Y>1||j>2&&te>1;){let ce=Y,Ee=te;I>2&&Y>1&&(ce=Y>=16384?Math.floor(Y/2)-1||1:Math.ceil(Y/2),I/=Y/ce),j>2&&te>1&&(Ee=te>=16384?Math.floor(te/2)-1||1:Math.ceil(te)/2,j/=te/Ee),ge=this.cachedCanvases.getCanvas(Se,ce,Ee),ne=ge.context,ne.clearRect(0,0,ce,Ee),ne.drawImage(g,0,0,Y,te,0,0,ce,Ee),g=ge.canvas,Y=ce,te=Ee,Se=Se==="prescale1"?"prescale2":"prescale1"}return{img:g,paintWidth:Y,paintHeight:te}}_createMaskCanvas(g){const n=this.ctx,{width:u,height:L}=g,I=this.current.fillColor,j=this.current.patternFill,Y=(0,Z.getCurrentTransform)(n);let te,Se,ge,ne;if((g.bitmap||g.data)&&g.count>1){const Ie=g.bitmap||g.data.buffer;Se=JSON.stringify(j?Y:[Y.slice(0,4),I]),te=this._cachedBitmapsMap.get(Ie),te||(te=new Map,this._cachedBitmapsMap.set(Ie,te));const Re=te.get(Se);if(Re&&!j){const ze=Math.round(Math.min(Y[0],Y[2])+Y[4]),je=Math.round(Math.min(Y[1],Y[3])+Y[5]);return{canvas:Re,offsetX:ze,offsetY:je}}ge=Re}ge||(ne=this.cachedCanvases.getCanvas("maskCanvas",u,L),m(ne.context,g));let ce=N.Util.transform(Y,[1/u,0,0,-1/L,0,0]);ce=N.Util.transform(ce,[1,0,0,1,0,-L]);const Ee=N.Util.applyTransform([0,0],ce),me=N.Util.applyTransform([u,L],ce),xe=N.Util.normalizeRect([Ee[0],Ee[1],me[0],me[1]]),De=Math.round(xe[2]-xe[0])||1,Ae=Math.round(xe[3]-xe[1])||1,Ve=this.cachedCanvases.getCanvas("fillCanvas",De,Ae),oe=Ve.context,Q=Math.min(Ee[0],me[0]),le=Math.min(Ee[1],me[1]);oe.translate(-Q,-le),oe.transform(...ce),ge||(ge=this._scaleImage(ne.canvas,(0,Z.getCurrentTransformInverse)(oe)),ge=ge.img,te&&j&&te.set(Se,ge)),oe.imageSmoothingEnabled=B((0,Z.getCurrentTransform)(oe),g.interpolate),d(oe,ge,0,0,ge.width,ge.height,0,0,u,L),oe.globalCompositeOperation="source-in";const ue=N.Util.transform((0,Z.getCurrentTransformInverse)(oe),[1,0,0,1,-Q,-le]);return oe.fillStyle=j?I.getPattern(n,this,ue,Pe.PathType.FILL):I,oe.fillRect(0,0,u,L),te&&!j&&(this.cachedCanvases.delete("fillCanvas"),te.set(Se,Ve.canvas)),{canvas:Ve.canvas,offsetX:Math.round(Q),offsetY:Math.round(le)}}setLineWidth(g){g!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=g,this.ctx.lineWidth=g}setLineCap(g){this.ctx.lineCap=K[g]}setLineJoin(g){this.ctx.lineJoin=C[g]}setMiterLimit(g){this.ctx.miterLimit=g}setDash(g,n){const u=this.ctx;u.setLineDash!==void 0&&(u.setLineDash(g),u.lineDashOffset=n)}setRenderingIntent(g){}setFlatness(g){}setGState(g){for(const[n,u]of g)switch(n){case"LW":this.setLineWidth(u);break;case"LC":this.setLineCap(u);break;case"LJ":this.setLineJoin(u);break;case"ML":this.setMiterLimit(u);break;case"D":this.setDash(u[0],u[1]);break;case"RI":this.setRenderingIntent(u);break;case"FL":this.setFlatness(u);break;case"Font":this.setFont(u[0],u[1]);break;case"CA":this.current.strokeAlpha=u;break;case"ca":this.current.fillAlpha=u,this.ctx.globalAlpha=u;break;case"BM":this.ctx.globalCompositeOperation=u;break;case"SMask":this.current.activeSMask=u?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(u);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const g=this.inSMaskMode;this.current.activeSMask&&!g?this.beginSMaskMode():!this.current.activeSMask&&g&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const g=this.ctx.canvas.width,n=this.ctx.canvas.height,u="smaskGroupAt"+this.groupLevel,L=this.cachedCanvases.getCanvas(u,g,n);this.suspendedCtx=this.ctx,this.ctx=L.context;const I=this.ctx;I.setTransform(...(0,Z.getCurrentTransform)(this.suspendedCtx)),i(this.suspendedCtx,I),t(I,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),i(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(g){if(!this.current.activeSMask)return;g?(g[0]=Math.floor(g[0]),g[1]=Math.floor(g[1]),g[2]=Math.ceil(g[2]),g[3]=Math.ceil(g[3])):g=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const n=this.current.activeSMask,u=this.suspendedCtx;w(u,n,this.ctx,g),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(i(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const g=this.current;this.stateStack.push(g),this.current=g.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),i(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(g,n,u,L,I,j){this.ctx.transform(g,n,u,L,I,j),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(g,n,u){const L=this.ctx,I=this.current;let j=I.x,Y=I.y,te,Se;const ge=(0,Z.getCurrentTransform)(L),ne=ge[0]===0&&ge[3]===0||ge[1]===0&&ge[2]===0,ce=ne?u.slice(0):null;for(let Ee=0,me=0,xe=g.length;Ee<xe;Ee++)switch(g[Ee]|0){case N.OPS.rectangle:j=n[me++],Y=n[me++];const De=n[me++],Ae=n[me++],Ve=j+De,oe=Y+Ae;L.moveTo(j,Y),De===0||Ae===0?L.lineTo(Ve,oe):(L.lineTo(Ve,Y),L.lineTo(Ve,oe),L.lineTo(j,oe)),ne||I.updateRectMinMax(ge,[j,Y,Ve,oe]),L.closePath();break;case N.OPS.moveTo:j=n[me++],Y=n[me++],L.moveTo(j,Y),ne||I.updatePathMinMax(ge,j,Y);break;case N.OPS.lineTo:j=n[me++],Y=n[me++],L.lineTo(j,Y),ne||I.updatePathMinMax(ge,j,Y);break;case N.OPS.curveTo:te=j,Se=Y,j=n[me+4],Y=n[me+5],L.bezierCurveTo(n[me],n[me+1],n[me+2],n[me+3],j,Y),I.updateCurvePathMinMax(ge,te,Se,n[me],n[me+1],n[me+2],n[me+3],j,Y,ce),me+=6;break;case N.OPS.curveTo2:te=j,Se=Y,L.bezierCurveTo(j,Y,n[me],n[me+1],n[me+2],n[me+3]),I.updateCurvePathMinMax(ge,te,Se,j,Y,n[me],n[me+1],n[me+2],n[me+3],ce),j=n[me+2],Y=n[me+3],me+=4;break;case N.OPS.curveTo3:te=j,Se=Y,j=n[me+2],Y=n[me+3],L.bezierCurveTo(n[me],n[me+1],j,Y,j,Y),I.updateCurvePathMinMax(ge,te,Se,n[me],n[me+1],j,Y,j,Y,ce),me+=4;break;case N.OPS.closePath:L.closePath();break}ne&&I.updateScalingPathMinMax(ge,ce),I.setCurrentPoint(j,Y)}closePath(){this.ctx.closePath()}stroke(g=!0){const n=this.ctx,u=this.current.strokeColor;n.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof u=="object"&&(u!=null&&u.getPattern)?(n.save(),n.strokeStyle=u.getPattern(n,this,(0,Z.getCurrentTransformInverse)(n),Pe.PathType.STROKE),this.rescaleAndStroke(!1),n.restore()):this.rescaleAndStroke(!0)),g&&this.consumePath(this.current.getClippedPathBoundingBox()),n.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(g=!0){const n=this.ctx,u=this.current.fillColor,L=this.current.patternFill;let I=!1;L&&(n.save(),n.fillStyle=u.getPattern(n,this,(0,Z.getCurrentTransformInverse)(n),Pe.PathType.FILL),I=!0);const j=this.current.getClippedPathBoundingBox();this.contentVisible&&j!==null&&(this.pendingEOFill?(n.fill("evenodd"),this.pendingEOFill=!1):n.fill()),I&&n.restore(),g&&this.consumePath(j)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=V}eoClip(){this.pendingClip=q}beginText(){this.current.textMatrix=N.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const g=this.pendingTextPaths,n=this.ctx;if(g===void 0){n.beginPath();return}n.save(),n.beginPath();for(const u of g)n.setTransform(...u.transform),n.translate(u.x,u.y),u.addToPath(n,u.fontSize);n.restore(),n.clip(),n.beginPath(),delete this.pendingTextPaths}setCharSpacing(g){this.current.charSpacing=g}setWordSpacing(g){this.current.wordSpacing=g}setHScale(g){this.current.textHScale=g/100}setLeading(g){this.current.leading=-g}setFont(g,n){var ge;const u=this.commonObjs.get(g),L=this.current;if(!u)throw new Error(`Can't find font for ${g}`);if(L.fontMatrix=u.fontMatrix||N.FONT_IDENTITY_MATRIX,(L.fontMatrix[0]===0||L.fontMatrix[3]===0)&&(0,N.warn)("Invalid font matrix for font "+g),n<0?(n=-n,L.fontDirection=-1):L.fontDirection=1,this.current.font=u,this.current.fontSize=n,u.isType3Font)return;const I=u.loadedName||"sans-serif",j=((ge=u.systemFontInfo)==null?void 0:ge.css)||`"${I}", ${u.fallbackName}`;let Y="normal";u.black?Y="900":u.bold&&(Y="bold");const te=u.italic?"italic":"normal";let Se=n;n<A?Se=A:n>P&&(Se=P),this.current.fontSizeScale=n/Se,this.ctx.font=`${te} ${Y} ${Se}px ${j}`}setTextRenderingMode(g){this.current.textRenderingMode=g}setTextRise(g){this.current.textRise=g}moveText(g,n){this.current.x=this.current.lineX+=g,this.current.y=this.current.lineY+=n}setLeadingMoveText(g,n){this.setLeading(-n),this.moveText(g,n)}setTextMatrix(g,n,u,L,I,j){this.current.textMatrix=[g,n,u,L,I,j],this.current.textMatrixScale=Math.hypot(g,n),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(g,n,u,L){const I=this.ctx,j=this.current,Y=j.font,te=j.textRenderingMode,Se=j.fontSize/j.fontSizeScale,ge=te&N.TextRenderingMode.FILL_STROKE_MASK,ne=!!(te&N.TextRenderingMode.ADD_TO_PATH_FLAG),ce=j.patternFill&&!Y.missingFile;let Ee;(Y.disableFontFace||ne||ce)&&(Ee=Y.getPathGenerator(this.commonObjs,g)),Y.disableFontFace||ce?(I.save(),I.translate(n,u),I.beginPath(),Ee(I,Se),L&&I.setTransform(...L),(ge===N.TextRenderingMode.FILL||ge===N.TextRenderingMode.FILL_STROKE)&&I.fill(),(ge===N.TextRenderingMode.STROKE||ge===N.TextRenderingMode.FILL_STROKE)&&I.stroke(),I.restore()):((ge===N.TextRenderingMode.FILL||ge===N.TextRenderingMode.FILL_STROKE)&&I.fillText(g,n,u),(ge===N.TextRenderingMode.STROKE||ge===N.TextRenderingMode.FILL_STROKE)&&I.strokeText(g,n,u)),ne&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,Z.getCurrentTransform)(I),x:n,y:u,fontSize:Se,addToPath:Ee})}get isFontSubpixelAAEnabled(){const{context:g}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);g.scale(1.5,1),g.fillText("I",0,10);const n=g.getImageData(0,0,10,10).data;let u=!1;for(let L=3;L<n.length;L+=4)if(n[L]>0&&n[L]<255){u=!0;break}return(0,N.shadow)(this,"isFontSubpixelAAEnabled",u)}showText(g){const n=this.current,u=n.font;if(u.isType3Font)return this.showType3Text(g);const L=n.fontSize;if(L===0)return;const I=this.ctx,j=n.fontSizeScale,Y=n.charSpacing,te=n.wordSpacing,Se=n.fontDirection,ge=n.textHScale*Se,ne=g.length,ce=u.vertical,Ee=ce?1:-1,me=u.defaultVMetrics,xe=L*n.fontMatrix[0],De=n.textRenderingMode===N.TextRenderingMode.FILL&&!u.disableFontFace&&!n.patternFill;I.save(),I.transform(...n.textMatrix),I.translate(n.x,n.y+n.textRise),Se>0?I.scale(ge,-1):I.scale(ge,1);let Ae;if(n.patternFill){I.save();const ue=n.fillColor.getPattern(I,this,(0,Z.getCurrentTransformInverse)(I),Pe.PathType.FILL);Ae=(0,Z.getCurrentTransform)(I),I.restore(),I.fillStyle=ue}let Ve=n.lineWidth;const oe=n.textMatrixScale;if(oe===0||Ve===0){const ue=n.textRenderingMode&N.TextRenderingMode.FILL_STROKE_MASK;(ue===N.TextRenderingMode.STROKE||ue===N.TextRenderingMode.FILL_STROKE)&&(Ve=this.getSinglePixelWidth())}else Ve/=oe;if(j!==1&&(I.scale(j,j),Ve/=j),I.lineWidth=Ve,u.isInvalidPDFjsFont){const ue=[];let Ie=0;for(const Re of g)ue.push(Re.unicode),Ie+=Re.width;I.fillText(ue.join(""),0,0),n.x+=Ie*xe*ge,I.restore(),this.compose();return}let Q=0,le;for(le=0;le<ne;++le){const ue=g[le];if(typeof ue=="number"){Q+=Ee*ue*L/1e3;continue}let Ie=!1;const Re=(ue.isSpace?te:0)+Y,ze=ue.fontChar,je=ue.accent;let Ne,Ue,Xe=ue.width;if(ce){const Le=ue.vmetric||me,_=-(ue.vmetric?Le[1]:Xe*.5)*xe,z=Le[2]*xe;Xe=Le?-Le[0]:Xe,Ne=_/j,Ue=(Q+z)/j}else Ne=Q/j,Ue=0;if(u.remeasure&&Xe>0){const Le=I.measureText(ze).width*1e3/L*j;if(Xe<Le&&this.isFontSubpixelAAEnabled){const _=Xe/Le;Ie=!0,I.save(),I.scale(_,1),Ne/=_}else Xe!==Le&&(Ne+=(Xe-Le)/2e3*L/j)}if(this.contentVisible&&(ue.isInFont||u.missingFile)){if(De&&!je)I.fillText(ze,Ne,Ue);else if(this.paintChar(ze,Ne,Ue,Ae),je){const Le=Ne+L*je.offset.x/j,_=Ue-L*je.offset.y/j;this.paintChar(je.fontChar,Le,_,Ae)}}const We=ce?Xe*xe-Re*Se:Xe*xe+Re*Se;Q+=We,Ie&&I.restore()}ce?n.y-=Q:n.x+=Q*ge,I.restore(),this.compose()}showType3Text(g){const n=this.ctx,u=this.current,L=u.font,I=u.fontSize,j=u.fontDirection,Y=L.vertical?1:-1,te=u.charSpacing,Se=u.wordSpacing,ge=u.textHScale*j,ne=u.fontMatrix||N.FONT_IDENTITY_MATRIX,ce=g.length,Ee=u.textRenderingMode===N.TextRenderingMode.INVISIBLE;let me,xe,De,Ae;if(!(Ee||I===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,n.save(),n.transform(...u.textMatrix),n.translate(u.x,u.y),n.scale(ge,j),me=0;me<ce;++me){if(xe=g[me],typeof xe=="number"){Ae=Y*xe*I/1e3,this.ctx.translate(Ae,0),u.x+=Ae*ge;continue}const Ve=(xe.isSpace?Se:0)+te,oe=L.charProcOperatorList[xe.operatorListId];if(!oe){(0,N.warn)(`Type3 character "${xe.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=xe,this.save(),n.scale(I,I),n.transform(...ne),this.executeOperatorList(oe),this.restore()),De=N.Util.applyTransform([xe.width,0],ne)[0]*I+Ve,n.translate(De,0),u.x+=De*ge}n.restore(),this.processingType3=null}}setCharWidth(g,n){}setCharWidthAndBounds(g,n,u,L,I,j){this.ctx.rect(u,L,I-u,j-L),this.ctx.clip(),this.endPath()}getColorN_Pattern(g){let n;if(g[0]==="TilingPattern"){const u=g[1],L=this.baseTransform||(0,Z.getCurrentTransform)(this.ctx),I={createCanvasGraphics:j=>new _e(j,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};n=new Pe.TilingPattern(g,u,this.ctx,I,L)}else n=this._getPattern(g[1],g[2]);return n}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(g,n,u){const L=N.Util.makeHexColor(g,n,u);this.ctx.strokeStyle=L,this.current.strokeColor=L}setFillRGBColor(g,n,u){const L=N.Util.makeHexColor(g,n,u);this.ctx.fillStyle=L,this.current.fillColor=L,this.current.patternFill=!1}_getPattern(g,n=null){let u;return this.cachedPatterns.has(g)?u=this.cachedPatterns.get(g):(u=(0,Pe.getShadingPattern)(this.getObject(g)),this.cachedPatterns.set(g,u)),n&&(u.matrix=n),u}shadingFill(g){if(!this.contentVisible)return;const n=this.ctx;this.save();const u=this._getPattern(g);n.fillStyle=u.getPattern(n,this,(0,Z.getCurrentTransformInverse)(n),Pe.PathType.SHADING);const L=(0,Z.getCurrentTransformInverse)(n);if(L){const{width:I,height:j}=n.canvas,[Y,te,Se,ge]=N.Util.getAxialAlignedBoundingBox([0,0,I,j],L);this.ctx.fillRect(Y,te,Se-Y,ge-te)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,N.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,N.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(g,n){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(g)&&g.length===6&&this.transform(...g),this.baseTransform=(0,Z.getCurrentTransform)(this.ctx),n)){const u=n[2]-n[0],L=n[3]-n[1];this.ctx.rect(n[0],n[1],u,L),this.current.updateRectMinMax((0,Z.getCurrentTransform)(this.ctx),n),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(g){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const n=this.ctx;g.isolated||(0,N.info)("TODO: Support non-isolated groups."),g.knockout&&(0,N.warn)("Knockout groups not supported.");const u=(0,Z.getCurrentTransform)(n);if(g.matrix&&n.transform(...g.matrix),!g.bbox)throw new Error("Bounding box is required.");let L=N.Util.getAxialAlignedBoundingBox(g.bbox,(0,Z.getCurrentTransform)(n));const I=[0,0,n.canvas.width,n.canvas.height];L=N.Util.intersect(L,I)||[0,0,0,0];const j=Math.floor(L[0]),Y=Math.floor(L[1]);let te=Math.max(Math.ceil(L[2])-j,1),Se=Math.max(Math.ceil(L[3])-Y,1),ge=1,ne=1;te>a&&(ge=te/a,te=a),Se>a&&(ne=Se/a,Se=a),this.current.startNewPathAndClipBox([0,0,te,Se]);let ce="groupAt"+this.groupLevel;g.smask&&(ce+="_smask_"+this.smaskCounter++%2);const Ee=this.cachedCanvases.getCanvas(ce,te,Se),me=Ee.context;me.scale(1/ge,1/ne),me.translate(-j,-Y),me.transform(...u),g.smask?this.smaskStack.push({canvas:Ee.canvas,context:me,offsetX:j,offsetY:Y,scaleX:ge,scaleY:ne,subtype:g.smask.subtype,backdrop:g.smask.backdrop,transferMap:g.smask.transferMap||null,startTransformInverse:null}):(n.setTransform(1,0,0,1,0,0),n.translate(j,Y),n.scale(ge,ne),n.save()),i(n,me),this.ctx=me,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(n),this.groupLevel++}endGroup(g){if(!this.contentVisible)return;this.groupLevel--;const n=this.ctx,u=this.groupStack.pop();if(this.ctx=u,this.ctx.imageSmoothingEnabled=!1,g.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const L=(0,Z.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...L);const I=N.Util.getAxialAlignedBoundingBox([0,0,n.canvas.width,n.canvas.height],L);this.ctx.drawImage(n.canvas,0,0),this.ctx.restore(),this.compose(I)}}beginAnnotation(g,n,u,L,I){if(O(this,E,oi).call(this),s(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(n)&&n.length===4){const j=n[2]-n[0],Y=n[3]-n[1];if(I&&this.annotationCanvasMap){u=u.slice(),u[4]-=n[0],u[5]-=n[1],n=n.slice(),n[0]=n[1]=0,n[2]=j,n[3]=Y;const[te,Se]=N.Util.singularValueDecompose2dScale((0,Z.getCurrentTransform)(this.ctx)),{viewportScale:ge}=this,ne=Math.ceil(j*this.outputScaleX*ge),ce=Math.ceil(Y*this.outputScaleY*ge);this.annotationCanvas=this.canvasFactory.create(ne,ce);const{canvas:Ee,context:me}=this.annotationCanvas;this.annotationCanvasMap.set(g,Ee),this.annotationCanvas.savedCtx=this.ctx,this.ctx=me,this.ctx.save(),this.ctx.setTransform(te,0,0,-Se,0,Y*Se),s(this.ctx)}else s(this.ctx),this.ctx.rect(n[0],n[1],j,Y),this.ctx.clip(),this.endPath()}this.current=new b(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...u),this.transform(...L)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),O(this,k,li).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(g){if(!this.contentVisible)return;const n=g.count;g=this.getObject(g.data,g),g.count=n;const u=this.ctx,L=this.processingType3;if(L&&(L.compiled===void 0&&(L.compiled=p(g)),L.compiled)){L.compiled(u);return}const I=this._createMaskCanvas(g),j=I.canvas;u.save(),u.setTransform(1,0,0,1,0,0),u.drawImage(j,I.offsetX,I.offsetY),u.restore(),this.compose()}paintImageMaskXObjectRepeat(g,n,u=0,L=0,I,j){if(!this.contentVisible)return;g=this.getObject(g.data,g);const Y=this.ctx;Y.save();const te=(0,Z.getCurrentTransform)(Y);Y.transform(n,u,L,I,0,0);const Se=this._createMaskCanvas(g);Y.setTransform(1,0,0,1,Se.offsetX-te[4],Se.offsetY-te[5]);for(let ge=0,ne=j.length;ge<ne;ge+=2){const ce=N.Util.transform(te,[n,u,L,I,j[ge],j[ge+1]]),[Ee,me]=N.Util.applyTransform([0,0],ce);Y.drawImage(Se.canvas,Ee,me)}Y.restore(),this.compose()}paintImageMaskXObjectGroup(g){if(!this.contentVisible)return;const n=this.ctx,u=this.current.fillColor,L=this.current.patternFill;for(const I of g){const{data:j,width:Y,height:te,transform:Se}=I,ge=this.cachedCanvases.getCanvas("maskCanvas",Y,te),ne=ge.context;ne.save();const ce=this.getObject(j,I);m(ne,ce),ne.globalCompositeOperation="source-in",ne.fillStyle=L?u.getPattern(ne,this,(0,Z.getCurrentTransformInverse)(n),Pe.PathType.FILL):u,ne.fillRect(0,0,Y,te),ne.restore(),n.save(),n.transform(...Se),n.scale(1,-1),d(n,ge.canvas,0,0,Y,te,0,-1,1,1),n.restore()}this.compose()}paintImageXObject(g){if(!this.contentVisible)return;const n=this.getObject(g);if(!n){(0,N.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(n)}paintImageXObjectRepeat(g,n,u,L){if(!this.contentVisible)return;const I=this.getObject(g);if(!I){(0,N.warn)("Dependent image isn't ready yet");return}const j=I.width,Y=I.height,te=[];for(let Se=0,ge=L.length;Se<ge;Se+=2)te.push({transform:[n,0,0,u,L[Se],L[Se+1]],x:0,y:0,w:j,h:Y});this.paintInlineImageXObjectGroup(I,te)}applyTransferMapsToCanvas(g){return this.current.transferMaps!=="none"&&(g.filter=this.current.transferMaps,g.drawImage(g.canvas,0,0),g.filter="none"),g.canvas}applyTransferMapsToBitmap(g){if(this.current.transferMaps==="none")return g.bitmap;const{bitmap:n,width:u,height:L}=g,I=this.cachedCanvases.getCanvas("inlineImage",u,L),j=I.context;return j.filter=this.current.transferMaps,j.drawImage(n,0,0),j.filter="none",I.canvas}paintInlineImageXObject(g){if(!this.contentVisible)return;const n=g.width,u=g.height,L=this.ctx;if(this.save(),!N.isNodeJS){const{filter:Y}=L;Y!=="none"&&Y!==""&&(L.filter="none")}L.scale(1/n,-1/u);let I;if(g.bitmap)I=this.applyTransferMapsToBitmap(g);else if(typeof HTMLElement=="function"&&g instanceof HTMLElement||!g.data)I=g;else{const te=this.cachedCanvases.getCanvas("inlineImage",n,u).context;f(te,g),I=this.applyTransferMapsToCanvas(te)}const j=this._scaleImage(I,(0,Z.getCurrentTransformInverse)(L));L.imageSmoothingEnabled=B((0,Z.getCurrentTransform)(L),g.interpolate),d(L,j.img,0,0,j.paintWidth,j.paintHeight,0,-u,n,u),this.compose(),this.restore()}paintInlineImageXObjectGroup(g,n){if(!this.contentVisible)return;const u=this.ctx;let L;if(g.bitmap)L=g.bitmap;else{const I=g.width,j=g.height,te=this.cachedCanvases.getCanvas("inlineImage",I,j).context;f(te,g),L=this.applyTransferMapsToCanvas(te)}for(const I of n)u.save(),u.transform(...I.transform),u.scale(1,-1),d(u,L,I.x,I.y,I.w,I.h,0,-1,1,1),u.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(g){}markPointProps(g,n){}beginMarkedContent(g){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(g,n){g==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(n)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(g){const n=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(g);const u=this.ctx;this.pendingClip&&(n||(this.pendingClip===q?u.clip("evenodd"):u.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),u.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const g=(0,Z.getCurrentTransform)(this.ctx);if(g[1]===0&&g[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(g[0]),Math.abs(g[3]));else{const n=Math.abs(g[0]*g[3]-g[2]*g[1]),u=Math.hypot(g[0],g[2]),L=Math.hypot(g[1],g[3]);this._cachedGetSinglePixelWidth=Math.max(u,L)/n}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:g}=this.current,{a:n,b:u,c:L,d:I}=this.ctx.getTransform();let j,Y;if(u===0&&L===0){const te=Math.abs(n),Se=Math.abs(I);if(te===Se)if(g===0)j=Y=1/te;else{const ge=te*g;j=Y=ge<1?1/ge:1}else if(g===0)j=1/te,Y=1/Se;else{const ge=te*g,ne=Se*g;j=ge<1?1/ge:1,Y=ne<1?1/ne:1}}else{const te=Math.abs(n*I-u*L),Se=Math.hypot(n,u),ge=Math.hypot(L,I);if(g===0)j=ge/te,Y=Se/te;else{const ne=g*te;j=ge>ne?ge/ne:1,Y=Se>ne?Se/ne:1}}this._cachedScaleForStroking[0]=j,this._cachedScaleForStroking[1]=Y}return this._cachedScaleForStroking}rescaleAndStroke(g){const{ctx:n}=this,{lineWidth:u}=this.current,[L,I]=this.getScaleForStroking();if(n.lineWidth=u||1,L===1&&I===1){n.stroke();return}const j=n.getLineDash();if(g&&n.save(),n.scale(L,I),j.length>0){const Y=Math.max(L,I);n.setLineDash(j.map(te=>te/Y)),n.lineDashOffset/=Y}n.stroke(),g&&n.restore()}isContentVisible(){for(let g=this.markedContentStack.length-1;g>=0;g--)if(!this.markedContentStack[g].visible)return!1;return!0}};let X=_e;E=new WeakSet,oi=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},k=new WeakSet,li=function(){if(this.pageColors){const g=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(g!=="none"){const n=this.ctx.filter;this.ctx.filter=g,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=n}}},H.CanvasGraphics=X;for(const R in N.OPS)X.prototype[R]!==void 0&&(X.prototype[N.OPS[R]]=X.prototype[R])},(Be,H,Te)=>{Object.defineProperty(H,"__esModule",{value:!0}),H.TilingPattern=H.PathType=void 0,H.getShadingPattern=S;var N=Te(1),Z=Te(6);const Pe={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};H.PathType=Pe;function ae(p,b){if(!b)return;const f=b[2]-b[0],m=b[3]-b[1],i=new Path2D;i.rect(b[0],b[1],f,m),p.clip(i)}class A{constructor(){this.constructor===A&&(0,N.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,N.unreachable)("Abstract method `getPattern` called.")}}class P extends A{constructor(b){super(),this._type=b[1],this._bbox=b[2],this._colorStops=b[3],this._p0=b[4],this._p1=b[5],this._r0=b[6],this._r1=b[7],this.matrix=null}_createGradient(b){let f;this._type==="axial"?f=b.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(f=b.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const m of this._colorStops)f.addColorStop(m[0],m[1]);return f}getPattern(b,f,m,i){let s;if(i===Pe.STROKE||i===Pe.FILL){const h=f.current.getClippedPathBoundingBox(i,(0,Z.getCurrentTransform)(b))||[0,0,0,0],c=Math.ceil(h[2]-h[0])||1,o=Math.ceil(h[3]-h[1])||1,v=f.cachedCanvases.getCanvas("pattern",c,o,!0),w=v.context;w.clearRect(0,0,w.canvas.width,w.canvas.height),w.beginPath(),w.rect(0,0,w.canvas.width,w.canvas.height),w.translate(-h[0],-h[1]),m=N.Util.transform(m,[1,0,0,1,h[0],h[1]]),w.transform(...f.baseTransform),this.matrix&&w.transform(...this.matrix),ae(w,this._bbox),w.fillStyle=this._createGradient(w),w.fill(),s=b.createPattern(v.canvas,"no-repeat");const B=new DOMMatrix(m);s.setTransform(B)}else ae(b,this._bbox),s=this._createGradient(b);return s}}function a(p,b,f,m,i,s,h,c){const o=b.coords,v=b.colors,w=p.data,B=p.width*4;let K;o[f+1]>o[m+1]&&(K=f,f=m,m=K,K=s,s=h,h=K),o[m+1]>o[i+1]&&(K=m,m=i,i=K,K=h,h=c,c=K),o[f+1]>o[m+1]&&(K=f,f=m,m=K,K=s,s=h,h=K);const C=(o[f]+b.offsetX)*b.scaleX,V=(o[f+1]+b.offsetY)*b.scaleY,q=(o[m]+b.offsetX)*b.scaleX,X=(o[m+1]+b.offsetY)*b.scaleY,E=(o[i]+b.offsetX)*b.scaleX,F=(o[i+1]+b.offsetY)*b.scaleY;if(V>=F)return;const k=v[s],ie=v[s+1],_e=v[s+2],R=v[h],g=v[h+1],n=v[h+2],u=v[c],L=v[c+1],I=v[c+2],j=Math.round(V),Y=Math.round(F);let te,Se,ge,ne,ce,Ee,me,xe;for(let De=j;De<=Y;De++){if(De<X){const le=De<V?0:(V-De)/(V-X);te=C-(C-q)*le,Se=k-(k-R)*le,ge=ie-(ie-g)*le,ne=_e-(_e-n)*le}else{let le;De>F?le=1:X===F?le=0:le=(X-De)/(X-F),te=q-(q-E)*le,Se=R-(R-u)*le,ge=g-(g-L)*le,ne=n-(n-I)*le}let Ae;De<V?Ae=0:De>F?Ae=1:Ae=(V-De)/(V-F),ce=C-(C-E)*Ae,Ee=k-(k-u)*Ae,me=ie-(ie-L)*Ae,xe=_e-(_e-I)*Ae;const Ve=Math.round(Math.min(te,ce)),oe=Math.round(Math.max(te,ce));let Q=B*De+Ve*4;for(let le=Ve;le<=oe;le++)Ae=(te-le)/(te-ce),Ae<0?Ae=0:Ae>1&&(Ae=1),w[Q++]=Se-(Se-Ee)*Ae|0,w[Q++]=ge-(ge-me)*Ae|0,w[Q++]=ne-(ne-xe)*Ae|0,w[Q++]=255}}function l(p,b,f){const m=b.coords,i=b.colors;let s,h;switch(b.type){case"lattice":const c=b.verticesPerRow,o=Math.floor(m.length/c)-1,v=c-1;for(s=0;s<o;s++){let w=s*c;for(let B=0;B<v;B++,w++)a(p,f,m[w],m[w+1],m[w+c],i[w],i[w+1],i[w+c]),a(p,f,m[w+c+1],m[w+1],m[w+c],i[w+c+1],i[w+1],i[w+c])}break;case"triangles":for(s=0,h=m.length;s<h;s+=3)a(p,f,m[s],m[s+1],m[s+2],i[s],i[s+1],i[s+2]);break;default:throw new Error("illegal figure")}}class T extends A{constructor(b){super(),this._coords=b[2],this._colors=b[3],this._figures=b[4],this._bounds=b[5],this._bbox=b[7],this._background=b[8],this.matrix=null}_createMeshCanvas(b,f,m){const c=Math.floor(this._bounds[0]),o=Math.floor(this._bounds[1]),v=Math.ceil(this._bounds[2])-c,w=Math.ceil(this._bounds[3])-o,B=Math.min(Math.ceil(Math.abs(v*b[0]*1.1)),3e3),K=Math.min(Math.ceil(Math.abs(w*b[1]*1.1)),3e3),C=v/B,V=w/K,q={coords:this._coords,colors:this._colors,offsetX:-c,offsetY:-o,scaleX:1/C,scaleY:1/V},X=B+2*2,E=K+2*2,F=m.getCanvas("mesh",X,E,!1),k=F.context,ie=k.createImageData(B,K);if(f){const R=ie.data;for(let g=0,n=R.length;g<n;g+=4)R[g]=f[0],R[g+1]=f[1],R[g+2]=f[2],R[g+3]=255}for(const R of this._figures)l(ie,R,q);return k.putImageData(ie,2,2),{canvas:F.canvas,offsetX:c-2*C,offsetY:o-2*V,scaleX:C,scaleY:V}}getPattern(b,f,m,i){ae(b,this._bbox);let s;if(i===Pe.SHADING)s=N.Util.singularValueDecompose2dScale((0,Z.getCurrentTransform)(b));else if(s=N.Util.singularValueDecompose2dScale(f.baseTransform),this.matrix){const c=N.Util.singularValueDecompose2dScale(this.matrix);s=[s[0]*c[0],s[1]*c[1]]}const h=this._createMeshCanvas(s,i===Pe.SHADING?null:this._background,f.cachedCanvases);return i!==Pe.SHADING&&(b.setTransform(...f.baseTransform),this.matrix&&b.transform(...this.matrix)),b.translate(h.offsetX,h.offsetY),b.scale(h.scaleX,h.scaleY),b.createPattern(h.canvas,"no-repeat")}}class y extends A{getPattern(){return"hotpink"}}function S(p){switch(p[0]){case"RadialAxial":return new P(p);case"Mesh":return new T(p);case"Dummy":return new y}throw new Error(`Unknown IR type: ${p[0]}`)}const t={COLORED:1,UNCOLORED:2},d=class{constructor(b,f,m,i,s){this.operatorList=b[2],this.matrix=b[3]||[1,0,0,1,0,0],this.bbox=b[4],this.xstep=b[5],this.ystep=b[6],this.paintType=b[7],this.tilingType=b[8],this.color=f,this.ctx=m,this.canvasGraphicsFactory=i,this.baseTransform=s}createPatternCanvas(b){const f=this.operatorList,m=this.bbox,i=this.xstep,s=this.ystep,h=this.paintType,c=this.tilingType,o=this.color,v=this.canvasGraphicsFactory;(0,N.info)("TilingType: "+c);const w=m[0],B=m[1],K=m[2],C=m[3],V=N.Util.singularValueDecompose2dScale(this.matrix),q=N.Util.singularValueDecompose2dScale(this.baseTransform),X=[V[0]*q[0],V[1]*q[1]],E=this.getSizeAndScale(i,this.ctx.canvas.width,X[0]),F=this.getSizeAndScale(s,this.ctx.canvas.height,X[1]),k=b.cachedCanvases.getCanvas("pattern",E.size,F.size,!0),ie=k.context,_e=v.createCanvasGraphics(ie);_e.groupLevel=b.groupLevel,this.setFillAndStrokeStyleToContext(_e,h,o);let R=w,g=B,n=K,u=C;return w<0&&(R=0,n+=Math.abs(w)),B<0&&(g=0,u+=Math.abs(B)),ie.translate(-(E.scale*R),-(F.scale*g)),_e.transform(E.scale,0,0,F.scale,0,0),ie.save(),this.clipBbox(_e,R,g,n,u),_e.baseTransform=(0,Z.getCurrentTransform)(_e.ctx),_e.executeOperatorList(f),_e.endDrawing(),{canvas:k.canvas,scaleX:E.scale,scaleY:F.scale,offsetX:R,offsetY:g}}getSizeAndScale(b,f,m){b=Math.abs(b);const i=Math.max(d.MAX_PATTERN_SIZE,f);let s=Math.ceil(b*m);return s>=i?s=i:m=s/b,{scale:m,size:s}}clipBbox(b,f,m,i,s){const h=i-f,c=s-m;b.ctx.rect(f,m,h,c),b.current.updateRectMinMax((0,Z.getCurrentTransform)(b.ctx),[f,m,i,s]),b.clip(),b.endPath()}setFillAndStrokeStyleToContext(b,f,m){const i=b.ctx,s=b.current;switch(f){case t.COLORED:const h=this.ctx;i.fillStyle=h.fillStyle,i.strokeStyle=h.strokeStyle,s.fillColor=h.fillStyle,s.strokeColor=h.strokeStyle;break;case t.UNCOLORED:const c=N.Util.makeHexColor(m[0],m[1],m[2]);i.fillStyle=c,i.strokeStyle=c,s.fillColor=c,s.strokeColor=c;break;default:throw new N.FormatError(`Unsupported paint type: ${f}`)}}getPattern(b,f,m,i){let s=m;i!==Pe.SHADING&&(s=N.Util.transform(s,f.baseTransform),this.matrix&&(s=N.Util.transform(s,this.matrix)));const h=this.createPatternCanvas(f);let c=new DOMMatrix(s);c=c.translate(h.offsetX,h.offsetY),c=c.scale(1/h.scaleX,1/h.scaleY);const o=b.createPattern(h.canvas,"repeat");return o.setTransform(c),o}};let r=d;Ge(r,"MAX_PATTERN_SIZE",3e3),H.TilingPattern=r},(Be,H,Te)=>{Object.defineProperty(H,"__esModule",{value:!0}),H.convertBlackAndWhiteToRGBA=Pe,H.convertToRGBA=Z,H.grayToRGBA=A;var N=Te(1);function Z(P){switch(P.kind){case N.ImageKind.GRAYSCALE_1BPP:return Pe(P);case N.ImageKind.RGB_24BPP:return ae(P)}return null}function Pe({src:P,srcPos:a=0,dest:l,width:T,height:y,nonBlackColor:S=4294967295,inverseDecode:t=!1}){const r=N.FeatureTest.isLittleEndian?4278190080:255,[d,p]=t?[S,r]:[r,S],b=T>>3,f=T&7,m=P.length;l=new Uint32Array(l.buffer);let i=0;for(let s=0;s<y;s++){for(const c=a+b;a<c;a++){const o=a<m?P[a]:255;l[i++]=o&128?p:d,l[i++]=o&64?p:d,l[i++]=o&32?p:d,l[i++]=o&16?p:d,l[i++]=o&8?p:d,l[i++]=o&4?p:d,l[i++]=o&2?p:d,l[i++]=o&1?p:d}if(f===0)continue;const h=a<m?P[a++]:255;for(let c=0;c<f;c++)l[i++]=h&1<<7-c?p:d}return{srcPos:a,destPos:i}}function ae({src:P,srcPos:a=0,dest:l,destPos:T=0,width:y,height:S}){let t=0;const r=P.length>>2,d=new Uint32Array(P.buffer,a,r);if(N.FeatureTest.isLittleEndian){for(;t<r-2;t+=3,T+=4){const p=d[t],b=d[t+1],f=d[t+2];l[T]=p|4278190080,l[T+1]=p>>>24|b<<8|4278190080,l[T+2]=b>>>16|f<<16|4278190080,l[T+3]=f>>>8|4278190080}for(let p=t*4,b=P.length;p<b;p+=3)l[T++]=P[p]|P[p+1]<<8|P[p+2]<<16|4278190080}else{for(;t<r-2;t+=3,T+=4){const p=d[t],b=d[t+1],f=d[t+2];l[T]=p|255,l[T+1]=p<<24|b>>>8|255,l[T+2]=b<<16|f>>>16|255,l[T+3]=f<<8|255}for(let p=t*4,b=P.length;p<b;p+=3)l[T++]=P[p]<<24|P[p+1]<<16|P[p+2]<<8|255}return{srcPos:a,destPos:T}}function A(P,a){if(N.FeatureTest.isLittleEndian)for(let l=0,T=P.length;l<T;l++)a[l]=P[l]*65793|4278190080;else for(let l=0,T=P.length;l<T;l++)a[l]=P[l]*16843008|255}},(Be,H)=>{Object.defineProperty(H,"__esModule",{value:!0}),H.GlobalWorkerOptions=void 0;const Te=Object.create(null);H.GlobalWorkerOptions=Te,Te.workerPort=null,Te.workerSrc=""},(Be,H,Te)=>{var P,Sn,l,En,y,Ft;Object.defineProperty(H,"__esModule",{value:!0}),H.MessageHandler=void 0;var N=Te(1);const Z={UNKNOWN:0,DATA:1,ERROR:2},Pe={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function ae(t){switch(t instanceof Error||typeof t=="object"&&t!==null||(0,N.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),t.name){case"AbortException":return new N.AbortException(t.message);case"MissingPDFException":return new N.MissingPDFException(t.message);case"PasswordException":return new N.PasswordException(t.message,t.code);case"UnexpectedResponseException":return new N.UnexpectedResponseException(t.message,t.status);case"UnknownErrorException":return new N.UnknownErrorException(t.message,t.details);default:return new N.UnknownErrorException(t.message,t.toString())}}class A{constructor(r,d,p){M(this,P);M(this,l);M(this,y);this.sourceName=r,this.targetName=d,this.comObj=p,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=b=>{const f=b.data;if(f.targetName!==this.sourceName)return;if(f.stream){O(this,l,En).call(this,f);return}if(f.callback){const i=f.callbackId,s=this.callbackCapabilities[i];if(!s)throw new Error(`Cannot resolve callback ${i}`);if(delete this.callbackCapabilities[i],f.callback===Z.DATA)s.resolve(f.data);else if(f.callback===Z.ERROR)s.reject(ae(f.reason));else throw new Error("Unexpected callback case");return}const m=this.actionHandler[f.action];if(!m)throw new Error(`Unknown action from worker: ${f.action}`);if(f.callbackId){const i=this.sourceName,s=f.sourceName;new Promise(function(h){h(m(f.data))}).then(function(h){p.postMessage({sourceName:i,targetName:s,callback:Z.DATA,callbackId:f.callbackId,data:h})},function(h){p.postMessage({sourceName:i,targetName:s,callback:Z.ERROR,callbackId:f.callbackId,reason:ae(h)})});return}if(f.streamId){O(this,P,Sn).call(this,f);return}m(f.data)},p.addEventListener("message",this._onComObjOnMessage)}on(r,d){const p=this.actionHandler;if(p[r])throw new Error(`There is already an actionName called "${r}"`);p[r]=d}send(r,d,p){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:r,data:d},p)}sendWithPromise(r,d,p){const b=this.callbackId++,f=new N.PromiseCapability;this.callbackCapabilities[b]=f;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:r,callbackId:b,data:d},p)}catch(m){f.reject(m)}return f.promise}sendWithStream(r,d,p,b){const f=this.streamId++,m=this.sourceName,i=this.targetName,s=this.comObj;return new ReadableStream({start:h=>{const c=new N.PromiseCapability;return this.streamControllers[f]={controller:h,startCall:c,pullCall:null,cancelCall:null,isClosed:!1},s.postMessage({sourceName:m,targetName:i,action:r,streamId:f,data:d,desiredSize:h.desiredSize},b),c.promise},pull:h=>{const c=new N.PromiseCapability;return this.streamControllers[f].pullCall=c,s.postMessage({sourceName:m,targetName:i,stream:Pe.PULL,streamId:f,desiredSize:h.desiredSize}),c.promise},cancel:h=>{(0,N.assert)(h instanceof Error,"cancel must have a valid reason");const c=new N.PromiseCapability;return this.streamControllers[f].cancelCall=c,this.streamControllers[f].isClosed=!0,s.postMessage({sourceName:m,targetName:i,stream:Pe.CANCEL,streamId:f,reason:ae(h)}),c.promise}},p)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}P=new WeakSet,Sn=function(r){const d=r.streamId,p=this.sourceName,b=r.sourceName,f=this.comObj,m=this,i=this.actionHandler[r.action],s={enqueue(h,c=1,o){if(this.isCancelled)return;const v=this.desiredSize;this.desiredSize-=c,v>0&&this.desiredSize<=0&&(this.sinkCapability=new N.PromiseCapability,this.ready=this.sinkCapability.promise),f.postMessage({sourceName:p,targetName:b,stream:Pe.ENQUEUE,streamId:d,chunk:h},o)},close(){this.isCancelled||(this.isCancelled=!0,f.postMessage({sourceName:p,targetName:b,stream:Pe.CLOSE,streamId:d}),delete m.streamSinks[d])},error(h){(0,N.assert)(h instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,f.postMessage({sourceName:p,targetName:b,stream:Pe.ERROR,streamId:d,reason:ae(h)}))},sinkCapability:new N.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:r.desiredSize,ready:null};s.sinkCapability.resolve(),s.ready=s.sinkCapability.promise,this.streamSinks[d]=s,new Promise(function(h){h(i(r.data,s))}).then(function(){f.postMessage({sourceName:p,targetName:b,stream:Pe.START_COMPLETE,streamId:d,success:!0})},function(h){f.postMessage({sourceName:p,targetName:b,stream:Pe.START_COMPLETE,streamId:d,reason:ae(h)})})},l=new WeakSet,En=function(r){const d=r.streamId,p=this.sourceName,b=r.sourceName,f=this.comObj,m=this.streamControllers[d],i=this.streamSinks[d];switch(r.stream){case Pe.START_COMPLETE:r.success?m.startCall.resolve():m.startCall.reject(ae(r.reason));break;case Pe.PULL_COMPLETE:r.success?m.pullCall.resolve():m.pullCall.reject(ae(r.reason));break;case Pe.PULL:if(!i){f.postMessage({sourceName:p,targetName:b,stream:Pe.PULL_COMPLETE,streamId:d,success:!0});break}i.desiredSize<=0&&r.desiredSize>0&&i.sinkCapability.resolve(),i.desiredSize=r.desiredSize,new Promise(function(s){var h;s((h=i.onPull)==null?void 0:h.call(i))}).then(function(){f.postMessage({sourceName:p,targetName:b,stream:Pe.PULL_COMPLETE,streamId:d,success:!0})},function(s){f.postMessage({sourceName:p,targetName:b,stream:Pe.PULL_COMPLETE,streamId:d,reason:ae(s)})});break;case Pe.ENQUEUE:if((0,N.assert)(m,"enqueue should have stream controller"),m.isClosed)break;m.controller.enqueue(r.chunk);break;case Pe.CLOSE:if((0,N.assert)(m,"close should have stream controller"),m.isClosed)break;m.isClosed=!0,m.controller.close(),O(this,y,Ft).call(this,m,d);break;case Pe.ERROR:(0,N.assert)(m,"error should have stream controller"),m.controller.error(ae(r.reason)),O(this,y,Ft).call(this,m,d);break;case Pe.CANCEL_COMPLETE:r.success?m.cancelCall.resolve():m.cancelCall.reject(ae(r.reason)),O(this,y,Ft).call(this,m,d);break;case Pe.CANCEL:if(!i)break;new Promise(function(s){var h;s((h=i.onCancel)==null?void 0:h.call(i,ae(r.reason)))}).then(function(){f.postMessage({sourceName:p,targetName:b,stream:Pe.CANCEL_COMPLETE,streamId:d,success:!0})},function(s){f.postMessage({sourceName:p,targetName:b,stream:Pe.CANCEL_COMPLETE,streamId:d,reason:ae(s)})}),i.sinkCapability.reject(ae(r.reason)),i.isCancelled=!0,delete this.streamSinks[d];break;default:throw new Error("Unexpected stream case")}},y=new WeakSet,Ft=async function(r,d){var p,b,f;await Promise.allSettled([(p=r.startCall)==null?void 0:p.promise,(b=r.pullCall)==null?void 0:b.promise,(f=r.cancelCall)==null?void 0:f.promise]),delete this.streamControllers[d]},H.MessageHandler=A},(Be,H,Te)=>{var Pe,ae;Object.defineProperty(H,"__esModule",{value:!0}),H.Metadata=void 0;var N=Te(1);class Z{constructor({parsedData:P,rawData:a}){M(this,Pe,void 0);M(this,ae,void 0);J(this,Pe,P),J(this,ae,a)}getRaw(){return e(this,ae)}get(P){return e(this,Pe).get(P)??null}getAll(){return(0,N.objectFromMap)(e(this,Pe))}has(P){return e(this,Pe).has(P)}}Pe=new WeakMap,ae=new WeakMap,H.Metadata=Z},(Be,H,Te)=>{var P,a,l,T,y,S,di;Object.defineProperty(H,"__esModule",{value:!0}),H.OptionalContentConfig=void 0;var N=Te(1),Z=Te(8);const Pe=Symbol("INTERNAL");class ae{constructor(d,p){M(this,P,!0);this.name=d,this.intent=p}get visible(){return e(this,P)}_setVisible(d,p){d!==Pe&&(0,N.unreachable)("Internal method `_setVisible` called."),J(this,P,p)}}P=new WeakMap;class A{constructor(d){M(this,S);M(this,a,null);M(this,l,new Map);M(this,T,null);M(this,y,null);if(this.name=null,this.creator=null,d!==null){this.name=d.name,this.creator=d.creator,J(this,y,d.order);for(const p of d.groups)e(this,l).set(p.id,new ae(p.name,p.intent));if(d.baseState==="OFF")for(const p of e(this,l).values())p._setVisible(Pe,!1);for(const p of d.on)e(this,l).get(p)._setVisible(Pe,!0);for(const p of d.off)e(this,l).get(p)._setVisible(Pe,!1);J(this,T,this.getHash())}}isVisible(d){if(e(this,l).size===0)return!0;if(!d)return(0,N.warn)("Optional content group not defined."),!0;if(d.type==="OCG")return e(this,l).has(d.id)?e(this,l).get(d.id).visible:((0,N.warn)(`Optional content group not found: ${d.id}`),!0);if(d.type==="OCMD"){if(d.expression)return O(this,S,di).call(this,d.expression);if(!d.policy||d.policy==="AnyOn"){for(const p of d.ids){if(!e(this,l).has(p))return(0,N.warn)(`Optional content group not found: ${p}`),!0;if(e(this,l).get(p).visible)return!0}return!1}else if(d.policy==="AllOn"){for(const p of d.ids){if(!e(this,l).has(p))return(0,N.warn)(`Optional content group not found: ${p}`),!0;if(!e(this,l).get(p).visible)return!1}return!0}else if(d.policy==="AnyOff"){for(const p of d.ids){if(!e(this,l).has(p))return(0,N.warn)(`Optional content group not found: ${p}`),!0;if(!e(this,l).get(p).visible)return!0}return!1}else if(d.policy==="AllOff"){for(const p of d.ids){if(!e(this,l).has(p))return(0,N.warn)(`Optional content group not found: ${p}`),!0;if(e(this,l).get(p).visible)return!1}return!0}return(0,N.warn)(`Unknown optional content policy ${d.policy}.`),!0}return(0,N.warn)(`Unknown group type ${d.type}.`),!0}setVisibility(d,p=!0){if(!e(this,l).has(d)){(0,N.warn)(`Optional content group not found: ${d}`);return}e(this,l).get(d)._setVisible(Pe,!!p),J(this,a,null)}get hasInitialVisibility(){return e(this,T)===null||this.getHash()===e(this,T)}getOrder(){return e(this,l).size?e(this,y)?e(this,y).slice():[...e(this,l).keys()]:null}getGroups(){return e(this,l).size>0?(0,N.objectFromMap)(e(this,l)):null}getGroup(d){return e(this,l).get(d)||null}getHash(){if(e(this,a)!==null)return e(this,a);const d=new Z.MurmurHash3_64;for(const[p,b]of e(this,l))d.update(`${p}:${b.visible}`);return J(this,a,d.hexdigest())}}a=new WeakMap,l=new WeakMap,T=new WeakMap,y=new WeakMap,S=new WeakSet,di=function(d){const p=d.length;if(p<2)return!0;const b=d[0];for(let f=1;f<p;f++){const m=d[f];let i;if(Array.isArray(m))i=O(this,S,di).call(this,m);else if(e(this,l).has(m))i=e(this,l).get(m).visible;else return(0,N.warn)(`Optional content group not found: ${m}`),!0;switch(b){case"And":if(!i)return!1;break;case"Or":if(i)return!0;break;case"Not":return!i;default:return!0}}return b==="And"},H.OptionalContentConfig=A},(Be,H,Te)=>{Object.defineProperty(H,"__esModule",{value:!0}),H.PDFDataTransportStream=void 0;var N=Te(1),Z=Te(6);class Pe{constructor({length:a,initialData:l,progressiveDone:T=!1,contentDispositionFilename:y=null,disableRange:S=!1,disableStream:t=!1},r){if((0,N.assert)(r,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=T,this._contentDispositionFilename=y,(l==null?void 0:l.length)>0){const d=l instanceof Uint8Array&&l.byteLength===l.buffer.byteLength?l.buffer:new Uint8Array(l).buffer;this._queuedChunks.push(d)}this._pdfDataRangeTransport=r,this._isStreamingSupported=!t,this._isRangeSupported=!S,this._contentLength=a,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((d,p)=>{this._onReceiveData({begin:d,chunk:p})}),this._pdfDataRangeTransport.addProgressListener((d,p)=>{this._onProgress({loaded:d,total:p})}),this._pdfDataRangeTransport.addProgressiveReadListener(d=>{this._onReceiveData({chunk:d})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:a,chunk:l}){const T=l instanceof Uint8Array&&l.byteLength===l.buffer.byteLength?l.buffer:new Uint8Array(l).buffer;if(a===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(T):this._queuedChunks.push(T);else{const y=this._rangeReaders.some(function(S){return S._begin!==a?!1:(S._enqueue(T),!0)});(0,N.assert)(y,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var a;return((a=this._fullRequestReader)==null?void 0:a._loaded)??0}_onProgress(a){var l,T,y,S;a.total===void 0?(T=(l=this._rangeReaders[0])==null?void 0:l.onProgress)==null||T.call(l,{loaded:a.loaded}):(S=(y=this._fullRequestReader)==null?void 0:y.onProgress)==null||S.call(y,{loaded:a.loaded,total:a.total})}_onProgressiveDone(){var a;(a=this._fullRequestReader)==null||a.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(a){const l=this._rangeReaders.indexOf(a);l>=0&&this._rangeReaders.splice(l,1)}getFullReader(){(0,N.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const a=this._queuedChunks;return this._queuedChunks=null,new ae(this,a,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(a,l){if(l<=this._progressiveDataLength)return null;const T=new A(this,a,l);return this._pdfDataRangeTransport.requestDataRange(a,l),this._rangeReaders.push(T),T}cancelAllRequests(a){var l;(l=this._fullRequestReader)==null||l.cancel(a);for(const T of this._rangeReaders.slice(0))T.cancel(a);this._pdfDataRangeTransport.abort()}}H.PDFDataTransportStream=Pe;class ae{constructor(a,l,T=!1,y=null){this._stream=a,this._done=T||!1,this._filename=(0,Z.isPdfFile)(y)?y:null,this._queuedChunks=l||[],this._loaded=0;for(const S of this._queuedChunks)this._loaded+=S.byteLength;this._requests=[],this._headersReady=Promise.resolve(),a._fullRequestReader=this,this.onProgress=null}_enqueue(a){this._done||(this._requests.length>0?this._requests.shift().resolve({value:a,done:!1}):this._queuedChunks.push(a),this._loaded+=a.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const a=new N.PromiseCapability;return this._requests.push(a),a.promise}cancel(a){this._done=!0;for(const l of this._requests)l.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class A{constructor(a,l,T){this._stream=a,this._begin=l,this._end=T,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(a){if(!this._done){if(this._requests.length===0)this._queuedChunk=a;else{this._requests.shift().resolve({value:a,done:!1});for(const T of this._requests)T.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const l=this._queuedChunk;return this._queuedChunk=null,{value:l,done:!1}}if(this._done)return{value:void 0,done:!0};const a=new N.PromiseCapability;return this._requests.push(a),a.promise}cancel(a){this._done=!0;for(const l of this._requests)l.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(Be,H,Te)=>{Object.defineProperty(H,"__esModule",{value:!0}),H.PDFFetchStream=void 0;var N=Te(1),Z=Te(20);function Pe(T,y,S){return{method:"GET",headers:T,signal:S.signal,mode:"cors",credentials:y?"include":"same-origin",redirect:"follow"}}function ae(T){const y=new Headers;for(const S in T){const t=T[S];t!==void 0&&y.append(S,t)}return y}function A(T){return T instanceof Uint8Array?T.buffer:T instanceof ArrayBuffer?T:((0,N.warn)(`getArrayBuffer - unexpected data format: ${T}`),new Uint8Array(T).buffer)}class P{constructor(y){this.source=y,this.isHttp=/^https?:/i.test(y.url),this.httpHeaders=this.isHttp&&y.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var y;return((y=this._fullRequestReader)==null?void 0:y._loaded)??0}getFullReader(){return(0,N.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new a(this),this._fullRequestReader}getRangeReader(y,S){if(S<=this._progressiveDataLength)return null;const t=new l(this,y,S);return this._rangeRequestReaders.push(t),t}cancelAllRequests(y){var S;(S=this._fullRequestReader)==null||S.cancel(y);for(const t of this._rangeRequestReaders.slice(0))t.cancel(y)}}H.PDFFetchStream=P;class a{constructor(y){this._stream=y,this._reader=null,this._loaded=0,this._filename=null;const S=y.source;this._withCredentials=S.withCredentials||!1,this._contentLength=S.length,this._headersCapability=new N.PromiseCapability,this._disableRange=S.disableRange||!1,this._rangeChunkSize=S.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!S.disableStream,this._isRangeSupported=!S.disableRange,this._headers=ae(this._stream.httpHeaders);const t=S.url;fetch(t,Pe(this._headers,this._withCredentials,this._abortController)).then(r=>{if(!(0,Z.validateResponseStatus)(r.status))throw(0,Z.createResponseStatusError)(r.status,t);this._reader=r.body.getReader(),this._headersCapability.resolve();const d=f=>r.headers.get(f),{allowRangeRequests:p,suggestedLength:b}=(0,Z.validateRangeRequestCapabilities)({getResponseHeader:d,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=p,this._contentLength=b||this._contentLength,this._filename=(0,Z.extractFilenameFromHeader)(d),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new N.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var t;await this._headersCapability.promise;const{value:y,done:S}=await this._reader.read();return S?{value:y,done:S}:(this._loaded+=y.byteLength,(t=this.onProgress)==null||t.call(this,{loaded:this._loaded,total:this._contentLength}),{value:A(y),done:!1})}cancel(y){var S;(S=this._reader)==null||S.cancel(y),this._abortController.abort()}}class l{constructor(y,S,t){this._stream=y,this._reader=null,this._loaded=0;const r=y.source;this._withCredentials=r.withCredentials||!1,this._readCapability=new N.PromiseCapability,this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController,this._headers=ae(this._stream.httpHeaders),this._headers.append("Range",`bytes=${S}-${t-1}`);const d=r.url;fetch(d,Pe(this._headers,this._withCredentials,this._abortController)).then(p=>{if(!(0,Z.validateResponseStatus)(p.status))throw(0,Z.createResponseStatusError)(p.status,d);this._readCapability.resolve(),this._reader=p.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var t;await this._readCapability.promise;const{value:y,done:S}=await this._reader.read();return S?{value:y,done:S}:(this._loaded+=y.byteLength,(t=this.onProgress)==null||t.call(this,{loaded:this._loaded}),{value:A(y),done:!1})}cancel(y){var S;(S=this._reader)==null||S.cancel(y),this._abortController.abort()}}},(Be,H,Te)=>{Object.defineProperty(H,"__esModule",{value:!0}),H.createResponseStatusError=P,H.extractFilenameFromHeader=A,H.validateRangeRequestCapabilities=ae,H.validateResponseStatus=a;var N=Te(1),Z=Te(21),Pe=Te(6);function ae({getResponseHeader:l,isHttp:T,rangeChunkSize:y,disableRange:S}){const t={allowRangeRequests:!1,suggestedLength:void 0},r=parseInt(l("Content-Length"),10);return!Number.isInteger(r)||(t.suggestedLength=r,r<=2*y)||S||!T||l("Accept-Ranges")!=="bytes"||(l("Content-Encoding")||"identity")!=="identity"||(t.allowRangeRequests=!0),t}function A(l){const T=l("Content-Disposition");if(T){let y=(0,Z.getFilenameFromContentDispositionHeader)(T);if(y.includes("%"))try{y=decodeURIComponent(y)}catch{}if((0,Pe.isPdfFile)(y))return y}return null}function P(l,T){return l===404||l===0&&T.startsWith("file:")?new N.MissingPDFException('Missing PDF "'+T+'".'):new N.UnexpectedResponseException(`Unexpected server response (${l}) while retrieving PDF "${T}".`,l)}function a(l){return l===200||l===206}},(Be,H,Te)=>{Object.defineProperty(H,"__esModule",{value:!0}),H.getFilenameFromContentDispositionHeader=Z;var N=Te(1);function Z(Pe){let ae=!0,A=P("filename\\*","i").exec(Pe);if(A){A=A[1];let r=y(A);return r=unescape(r),r=S(r),r=t(r),l(r)}if(A=T(Pe),A){const r=t(A);return l(r)}if(A=P("filename","i").exec(Pe),A){A=A[1];let r=y(A);return r=t(r),l(r)}function P(r,d){return new RegExp("(?:^|;)\\s*"+r+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',d)}function a(r,d){if(r){if(!/^[\x00-\xFF]+$/.test(d))return d;try{const p=new TextDecoder(r,{fatal:!0}),b=(0,N.stringToBytes)(d);d=p.decode(b),ae=!1}catch{}}return d}function l(r){return ae&&/[\x80-\xff]/.test(r)&&(r=a("utf-8",r),ae&&(r=a("iso-8859-1",r))),r}function T(r){const d=[];let p;const b=P("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(p=b.exec(r))!==null;){let[,m,i,s]=p;if(m=parseInt(m,10),m in d){if(m===0)break;continue}d[m]=[i,s]}const f=[];for(let m=0;m<d.length&&m in d;++m){let[i,s]=d[m];s=y(s),i&&(s=unescape(s),m===0&&(s=S(s))),f.push(s)}return f.join("")}function y(r){if(r.startsWith('"')){const d=r.slice(1).split('\\"');for(let p=0;p<d.length;++p){const b=d[p].indexOf('"');b!==-1&&(d[p]=d[p].slice(0,b),d.length=p+1),d[p]=d[p].replaceAll(/\\(.)/g,"$1")}r=d.join('"')}return r}function S(r){const d=r.indexOf("'");if(d===-1)return r;const p=r.slice(0,d),f=r.slice(d+1).replace(/^[^']*'/,"");return a(p,f)}function t(r){return!r.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(r)?r:r.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(d,p,b,f){if(b==="q"||b==="Q")return f=f.replaceAll("_"," "),f=f.replaceAll(/=([0-9a-fA-F]{2})/g,function(m,i){return String.fromCharCode(parseInt(i,16))}),a(p,f);try{f=atob(f)}catch{}return a(p,f)})}return""}},(Be,H,Te)=>{Object.defineProperty(H,"__esModule",{value:!0}),H.PDFNetworkStream=void 0;var N=Te(1),Z=Te(20);const Pe=200,ae=206;function A(y){const S=y.response;return typeof S!="string"?S:(0,N.stringToBytes)(S).buffer}class P{constructor(S,t={}){this.url=S,this.isHttp=/^https?:/i.test(S),this.httpHeaders=this.isHttp&&t.httpHeaders||Object.create(null),this.withCredentials=t.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(S,t,r){const d={begin:S,end:t};for(const p in r)d[p]=r[p];return this.request(d)}requestFull(S){return this.request(S)}request(S){const t=new XMLHttpRequest,r=this.currXhrId++,d=this.pendingRequests[r]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const p in this.httpHeaders){const b=this.httpHeaders[p];b!==void 0&&t.setRequestHeader(p,b)}return this.isHttp&&"begin"in S&&"end"in S?(t.setRequestHeader("Range",`bytes=${S.begin}-${S.end-1}`),d.expectedStatus=ae):d.expectedStatus=Pe,t.responseType="arraybuffer",S.onError&&(t.onerror=function(p){S.onError(t.status)}),t.onreadystatechange=this.onStateChange.bind(this,r),t.onprogress=this.onProgress.bind(this,r),d.onHeadersReceived=S.onHeadersReceived,d.onDone=S.onDone,d.onError=S.onError,d.onProgress=S.onProgress,t.send(null),r}onProgress(S,t){var d;const r=this.pendingRequests[S];r&&((d=r.onProgress)==null||d.call(r,t))}onStateChange(S,t){var m,i,s;const r=this.pendingRequests[S];if(!r)return;const d=r.xhr;if(d.readyState>=2&&r.onHeadersReceived&&(r.onHeadersReceived(),delete r.onHeadersReceived),d.readyState!==4||!(S in this.pendingRequests))return;if(delete this.pendingRequests[S],d.status===0&&this.isHttp){(m=r.onError)==null||m.call(r,d.status);return}const p=d.status||Pe;if(!(p===Pe&&r.expectedStatus===ae)&&p!==r.expectedStatus){(i=r.onError)==null||i.call(r,d.status);return}const f=A(d);if(p===ae){const h=d.getResponseHeader("Content-Range"),c=/bytes (\d+)-(\d+)\/(\d+)/.exec(h);r.onDone({begin:parseInt(c[1],10),chunk:f})}else f?r.onDone({begin:0,chunk:f}):(s=r.onError)==null||s.call(r,d.status)}getRequestXhr(S){return this.pendingRequests[S].xhr}isPendingRequest(S){return S in this.pendingRequests}abortRequest(S){const t=this.pendingRequests[S].xhr;delete this.pendingRequests[S],t.abort()}}class a{constructor(S){this._source=S,this._manager=new P(S.url,{httpHeaders:S.httpHeaders,withCredentials:S.withCredentials}),this._rangeChunkSize=S.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(S){const t=this._rangeRequestReaders.indexOf(S);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return(0,N.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new l(this._manager,this._source),this._fullRequestReader}getRangeReader(S,t){const r=new T(this._manager,S,t);return r.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(r),r}cancelAllRequests(S){var t;(t=this._fullRequestReader)==null||t.cancel(S);for(const r of this._rangeRequestReaders.slice(0))r.cancel(S)}}H.PDFNetworkStream=a;class l{constructor(S,t){this._manager=S;const r={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._fullRequestId=S.requestFull(r),this._headersReceivedCapability=new N.PromiseCapability,this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const S=this._fullRequestId,t=this._manager.getRequestXhr(S),r=b=>t.getResponseHeader(b),{allowRangeRequests:d,suggestedLength:p}=(0,Z.validateRangeRequestCapabilities)({getResponseHeader:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});d&&(this._isRangeSupported=!0),this._contentLength=p||this._contentLength,this._filename=(0,Z.extractFilenameFromHeader)(r),this._isRangeSupported&&this._manager.abortRequest(S),this._headersReceivedCapability.resolve()}_onDone(S){if(S&&(this._requests.length>0?this._requests.shift().resolve({value:S.chunk,done:!1}):this._cachedChunks.push(S.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(S){this._storedError=(0,Z.createResponseStatusError)(S,this._url),this._headersReceivedCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(S){var t;(t=this.onProgress)==null||t.call(this,{loaded:S.loaded,total:S.lengthComputable?S.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const S=new N.PromiseCapability;return this._requests.push(S),S.promise}cancel(S){this._done=!0,this._headersReceivedCapability.reject(S);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class T{constructor(S,t,r){this._manager=S;const d={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=S.url,this._requestId=S.requestRange(t,r,d),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var S;(S=this.onClosed)==null||S.call(this,this)}_onDone(S){const t=S.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(S){this._storedError=(0,Z.createResponseStatusError)(S,this._url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(S){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:S.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const S=new N.PromiseCapability;return this._requests.push(S),S.promise}cancel(S){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(Be,H,Te)=>{Object.defineProperty(H,"__esModule",{value:!0}),H.PDFNodeStream=void 0;var N=Te(1),Z=Te(20);const Pe=/^file:\/\/\/[a-zA-Z]:\//;function ae(r){const d=require$$5,p=d.parse(r);return p.protocol==="file:"||p.host?p:/^[a-z]:[/\\]/i.test(r)?d.parse(`file:///${r}`):(p.host||(p.protocol="file:"),p)}class A{constructor(d){this.source=d,this.url=ae(d.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&d.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var d;return((d=this._fullRequestReader)==null?void 0:d._loaded)??0}getFullReader(){return(0,N.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new S(this):new T(this),this._fullRequestReader}getRangeReader(d,p){if(p<=this._progressiveDataLength)return null;const b=this.isFsUrl?new t(this,d,p):new y(this,d,p);return this._rangeRequestReaders.push(b),b}cancelAllRequests(d){var p;(p=this._fullRequestReader)==null||p.cancel(d);for(const b of this._rangeRequestReaders.slice(0))b.cancel(d)}}H.PDFNodeStream=A;class P{constructor(d){this._url=d.url,this._done=!1,this._storedError=null,this.onProgress=null;const p=d.source;this._contentLength=p.length,this._loaded=0,this._filename=null,this._disableRange=p.disableRange||!1,this._rangeChunkSize=p.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!p.disableStream,this._isRangeSupported=!p.disableRange,this._readableStream=null,this._readCapability=new N.PromiseCapability,this._headersCapability=new N.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var b;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const d=this._readableStream.read();return d===null?(this._readCapability=new N.PromiseCapability,this.read()):(this._loaded+=d.length,(b=this.onProgress)==null||b.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(d).buffer,done:!1})}cancel(d){if(!this._readableStream){this._error(d);return}this._readableStream.destroy(d)}_error(d){this._storedError=d,this._readCapability.resolve()}_setReadableStream(d){this._readableStream=d,d.on("readable",()=>{this._readCapability.resolve()}),d.on("end",()=>{d.destroy(),this._done=!0,this._readCapability.resolve()}),d.on("error",p=>{this._error(p)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new N.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class a{constructor(d){this._url=d.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new N.PromiseCapability;const p=d.source;this._isStreamingSupported=!p.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var b;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const d=this._readableStream.read();return d===null?(this._readCapability=new N.PromiseCapability,this.read()):(this._loaded+=d.length,(b=this.onProgress)==null||b.call(this,{loaded:this._loaded}),{value:new Uint8Array(d).buffer,done:!1})}cancel(d){if(!this._readableStream){this._error(d);return}this._readableStream.destroy(d)}_error(d){this._storedError=d,this._readCapability.resolve()}_setReadableStream(d){this._readableStream=d,d.on("readable",()=>{this._readCapability.resolve()}),d.on("end",()=>{d.destroy(),this._done=!0,this._readCapability.resolve()}),d.on("error",p=>{this._error(p)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function l(r,d){return{protocol:r.protocol,auth:r.auth,host:r.hostname,port:r.port,path:r.path,method:"GET",headers:d}}class T extends P{constructor(d){super(d);const p=b=>{if(b.statusCode===404){const s=new N.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=s,this._headersCapability.reject(s);return}this._headersCapability.resolve(),this._setReadableStream(b);const f=s=>this._readableStream.headers[s.toLowerCase()],{allowRangeRequests:m,suggestedLength:i}=(0,Z.validateRangeRequestCapabilities)({getResponseHeader:f,isHttp:d.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=m,this._contentLength=i||this._contentLength,this._filename=(0,Z.extractFilenameFromHeader)(f)};if(this._request=null,this._url.protocol==="http:"){const b=require$$5;this._request=b.request(l(this._url,d.httpHeaders),p)}else{const b=require$$5;this._request=b.request(l(this._url,d.httpHeaders),p)}this._request.on("error",b=>{this._storedError=b,this._headersCapability.reject(b)}),this._request.end()}}class y extends a{constructor(d,p,b){super(d),this._httpHeaders={};for(const m in d.httpHeaders){const i=d.httpHeaders[m];i!==void 0&&(this._httpHeaders[m]=i)}this._httpHeaders.Range=`bytes=${p}-${b-1}`;const f=m=>{if(m.statusCode===404){const i=new N.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=i;return}this._setReadableStream(m)};if(this._request=null,this._url.protocol==="http:"){const m=require$$5;this._request=m.request(l(this._url,this._httpHeaders),f)}else{const m=require$$5;this._request=m.request(l(this._url,this._httpHeaders),f)}this._request.on("error",m=>{this._storedError=m}),this._request.end()}}class S extends P{constructor(d){super(d);let p=decodeURIComponent(this._url.path);Pe.test(this._url.href)&&(p=p.replace(/^\//,""));const b=require$$5;b.lstat(p,(f,m)=>{if(f){f.code==="ENOENT"&&(f=new N.MissingPDFException(`Missing PDF "${p}".`)),this._storedError=f,this._headersCapability.reject(f);return}this._contentLength=m.size,this._setReadableStream(b.createReadStream(p)),this._headersCapability.resolve()})}}class t extends a{constructor(d,p,b){super(d);let f=decodeURIComponent(this._url.path);Pe.test(this._url.href)&&(f=f.replace(/^\//,""));const m=require$$5;this._setReadableStream(m.createReadStream(f,{start:p,end:b-1}))}}},(Be,H,Te)=>{Object.defineProperty(H,"__esModule",{value:!0}),H.SVGGraphics=void 0;var N=Te(6),Z=Te(1);const Pe={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},ae="http://www.w3.org/XML/1998/namespace",A="http://www.w3.org/1999/xlink",P=["butt","round","square"],a=["miter","round","bevel"],l=function(m,i="",s=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!s)return URL.createObjectURL(new Blob([m],{type:i}));const h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let c=`data:${i};base64,`;for(let o=0,v=m.length;o<v;o+=3){const w=m[o]&255,B=m[o+1]&255,K=m[o+2]&255,C=w>>2,V=(w&3)<<4|B>>4,q=o+1<v?(B&15)<<2|K>>6:64,X=o+2<v?K&63:64;c+=h[C]+h[V]+h[q]+h[X]}return c},T=function(){const m=new Uint8Array([137,80,78,71,13,10,26,10]),i=12,s=new Int32Array(256);for(let K=0;K<256;K++){let C=K;for(let V=0;V<8;V++)C=C&1?3988292384^C>>1&2147483647:C>>1&2147483647;s[K]=C}function h(K,C,V){let q=-1;for(let X=C;X<V;X++){const E=(q^K[X])&255,F=s[E];q=q>>>8^F}return q^-1}function c(K,C,V,q){let X=q;const E=C.length;V[X]=E>>24&255,V[X+1]=E>>16&255,V[X+2]=E>>8&255,V[X+3]=E&255,X+=4,V[X]=K.charCodeAt(0)&255,V[X+1]=K.charCodeAt(1)&255,V[X+2]=K.charCodeAt(2)&255,V[X+3]=K.charCodeAt(3)&255,X+=4,V.set(C,X),X+=C.length;const F=h(V,q+4,X);V[X]=F>>24&255,V[X+1]=F>>16&255,V[X+2]=F>>8&255,V[X+3]=F&255}function o(K,C,V){let q=1,X=0;for(let E=C;E<V;++E)q=(q+(K[E]&255))%65521,X=(X+q)%65521;return X<<16|q}function v(K){if(!Z.isNodeJS)return w(K);try{const C=parseInt(process.versions.node)>=8?K:Buffer.from(K),V=require$$5.deflateSync(C,{level:9});return V instanceof Uint8Array?V:new Uint8Array(V)}catch(C){(0,Z.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+C)}return w(K)}function w(K){let C=K.length;const V=65535,q=Math.ceil(C/V),X=new Uint8Array(2+C+q*5+4);let E=0;X[E++]=120,X[E++]=156;let F=0;for(;C>V;)X[E++]=0,X[E++]=255,X[E++]=255,X[E++]=0,X[E++]=0,X.set(K.subarray(F,F+V),E),E+=V,F+=V,C-=V;X[E++]=1,X[E++]=C&255,X[E++]=C>>8&255,X[E++]=~C&65535&255,X[E++]=(~C&65535)>>8&255,X.set(K.subarray(F),E),E+=K.length-F;const k=o(K,0,K.length);return X[E++]=k>>24&255,X[E++]=k>>16&255,X[E++]=k>>8&255,X[E++]=k&255,X}function B(K,C,V,q){const X=K.width,E=K.height;let F,k,ie;const _e=K.data;switch(C){case Z.ImageKind.GRAYSCALE_1BPP:k=0,F=1,ie=X+7>>3;break;case Z.ImageKind.RGB_24BPP:k=2,F=8,ie=X*3;break;case Z.ImageKind.RGBA_32BPP:k=6,F=8,ie=X*4;break;default:throw new Error("invalid format")}const R=new Uint8Array((1+ie)*E);let g=0,n=0;for(let te=0;te<E;++te)R[g++]=0,R.set(_e.subarray(n,n+ie),g),n+=ie,g+=ie;if(C===Z.ImageKind.GRAYSCALE_1BPP&&q){g=0;for(let te=0;te<E;te++){g++;for(let Se=0;Se<ie;Se++)R[g++]^=255}}const u=new Uint8Array([X>>24&255,X>>16&255,X>>8&255,X&255,E>>24&255,E>>16&255,E>>8&255,E&255,F,k,0,0,0]),L=v(R),I=m.length+i*3+u.length+L.length,j=new Uint8Array(I);let Y=0;return j.set(m,Y),Y+=m.length,c("IHDR",u,j,Y),Y+=i+u.length,c("IDATA",L,j,Y),Y+=i+L.length,c("IEND",new Uint8Array(0),j,Y),l(j,"image/png",V)}return function(C,V,q){const X=C.kind===void 0?Z.ImageKind.GRAYSCALE_1BPP:C.kind;return B(C,X,V,q)}}();class y{constructor(){this.fontSizeScale=1,this.fontWeight=Pe.fontWeight,this.fontSize=0,this.textMatrix=Z.IDENTITY_MATRIX,this.fontMatrix=Z.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=Z.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=Pe.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(i,s){this.x=i,this.y=s}}function S(m){let i=[];const s=[];for(const h of m){if(h.fn==="save"){i.push({fnId:92,fn:"group",items:[]}),s.push(i),i=i.at(-1).items;continue}h.fn==="restore"?i=s.pop():i.push(h)}return i}function t(m){if(Number.isInteger(m))return m.toString();const i=m.toFixed(10);let s=i.length-1;if(i[s]!=="0")return i;do s--;while(i[s]==="0");return i.substring(0,i[s]==="."?s:s+1)}function r(m){if(m[4]===0&&m[5]===0){if(m[1]===0&&m[2]===0)return m[0]===1&&m[3]===1?"":`scale(${t(m[0])} ${t(m[3])})`;if(m[0]===m[3]&&m[1]===-m[2]){const i=Math.acos(m[0])*180/Math.PI;return`rotate(${t(i)})`}}else if(m[0]===1&&m[1]===0&&m[2]===0&&m[3]===1)return`translate(${t(m[4])} ${t(m[5])})`;return`matrix(${t(m[0])} ${t(m[1])} ${t(m[2])} ${t(m[3])} ${t(m[4])} ${t(m[5])})`}let d=0,p=0,b=0;class f{constructor(i,s,h=!1){(0,N.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new N.DOMSVGFactory,this.current=new y,this.transformMatrix=Z.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=i,this.objs=s,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!h,this._operatorIdMapping=[];for(const c in Z.OPS)this._operatorIdMapping[Z.OPS[c]]=c}getObject(i,s=null){return typeof i=="string"?i.startsWith("g_")?this.commonObjs.get(i):this.objs.get(i):s}save(){this.transformStack.push(this.transformMatrix);const i=this.current;this.extraStack.push(i),this.current=i.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(i){this.save(),this.executeOpTree(i),this.restore()}loadDependencies(i){const s=i.fnArray,h=i.argsArray;for(let c=0,o=s.length;c<o;c++)if(s[c]===Z.OPS.dependency)for(const v of h[c]){const w=v.startsWith("g_")?this.commonObjs:this.objs,B=new Promise(K=>{w.get(v,K)});this.current.dependencies.push(B)}return Promise.all(this.current.dependencies)}transform(i,s,h,c,o,v){const w=[i,s,h,c,o,v];this.transformMatrix=Z.Util.transform(this.transformMatrix,w),this.tgrp=null}getSVG(i,s){this.viewport=s;const h=this._initialize(s);return this.loadDependencies(i).then(()=>(this.transformMatrix=Z.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(i)),h))}convertOpList(i){const s=this._operatorIdMapping,h=i.argsArray,c=i.fnArray,o=[];for(let v=0,w=c.length;v<w;v++){const B=c[v];o.push({fnId:B,fn:s[B],args:h[v]})}return S(o)}executeOpTree(i){for(const s of i){const h=s.fn,c=s.fnId,o=s.args;switch(c|0){case Z.OPS.beginText:this.beginText();break;case Z.OPS.dependency:break;case Z.OPS.setLeading:this.setLeading(o);break;case Z.OPS.setLeadingMoveText:this.setLeadingMoveText(o[0],o[1]);break;case Z.OPS.setFont:this.setFont(o);break;case Z.OPS.showText:this.showText(o[0]);break;case Z.OPS.showSpacedText:this.showText(o[0]);break;case Z.OPS.endText:this.endText();break;case Z.OPS.moveText:this.moveText(o[0],o[1]);break;case Z.OPS.setCharSpacing:this.setCharSpacing(o[0]);break;case Z.OPS.setWordSpacing:this.setWordSpacing(o[0]);break;case Z.OPS.setHScale:this.setHScale(o[0]);break;case Z.OPS.setTextMatrix:this.setTextMatrix(o[0],o[1],o[2],o[3],o[4],o[5]);break;case Z.OPS.setTextRise:this.setTextRise(o[0]);break;case Z.OPS.setTextRenderingMode:this.setTextRenderingMode(o[0]);break;case Z.OPS.setLineWidth:this.setLineWidth(o[0]);break;case Z.OPS.setLineJoin:this.setLineJoin(o[0]);break;case Z.OPS.setLineCap:this.setLineCap(o[0]);break;case Z.OPS.setMiterLimit:this.setMiterLimit(o[0]);break;case Z.OPS.setFillRGBColor:this.setFillRGBColor(o[0],o[1],o[2]);break;case Z.OPS.setStrokeRGBColor:this.setStrokeRGBColor(o[0],o[1],o[2]);break;case Z.OPS.setStrokeColorN:this.setStrokeColorN(o);break;case Z.OPS.setFillColorN:this.setFillColorN(o);break;case Z.OPS.shadingFill:this.shadingFill(o[0]);break;case Z.OPS.setDash:this.setDash(o[0],o[1]);break;case Z.OPS.setRenderingIntent:this.setRenderingIntent(o[0]);break;case Z.OPS.setFlatness:this.setFlatness(o[0]);break;case Z.OPS.setGState:this.setGState(o[0]);break;case Z.OPS.fill:this.fill();break;case Z.OPS.eoFill:this.eoFill();break;case Z.OPS.stroke:this.stroke();break;case Z.OPS.fillStroke:this.fillStroke();break;case Z.OPS.eoFillStroke:this.eoFillStroke();break;case Z.OPS.clip:this.clip("nonzero");break;case Z.OPS.eoClip:this.clip("evenodd");break;case Z.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case Z.OPS.paintImageXObject:this.paintImageXObject(o[0]);break;case Z.OPS.paintInlineImageXObject:this.paintInlineImageXObject(o[0]);break;case Z.OPS.paintImageMaskXObject:this.paintImageMaskXObject(o[0]);break;case Z.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(o[0],o[1]);break;case Z.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case Z.OPS.closePath:this.closePath();break;case Z.OPS.closeStroke:this.closeStroke();break;case Z.OPS.closeFillStroke:this.closeFillStroke();break;case Z.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case Z.OPS.nextLine:this.nextLine();break;case Z.OPS.transform:this.transform(o[0],o[1],o[2],o[3],o[4],o[5]);break;case Z.OPS.constructPath:this.constructPath(o[0],o[1]);break;case Z.OPS.endPath:this.endPath();break;case 92:this.group(s.items);break;default:(0,Z.warn)(`Unimplemented operator ${h}`);break}}}setWordSpacing(i){this.current.wordSpacing=i}setCharSpacing(i){this.current.charSpacing=i}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(i,s,h,c,o,v){const w=this.current;w.textMatrix=w.lineMatrix=[i,s,h,c,o,v],w.textMatrixScale=Math.hypot(i,s),w.x=w.lineX=0,w.y=w.lineY=0,w.xcoords=[],w.ycoords=[],w.tspan=this.svgFactory.createElement("svg:tspan"),w.tspan.setAttributeNS(null,"font-family",w.fontFamily),w.tspan.setAttributeNS(null,"font-size",`${t(w.fontSize)}px`),w.tspan.setAttributeNS(null,"y",t(-w.y)),w.txtElement=this.svgFactory.createElement("svg:text"),w.txtElement.append(w.tspan)}beginText(){const i=this.current;i.x=i.lineX=0,i.y=i.lineY=0,i.textMatrix=Z.IDENTITY_MATRIX,i.lineMatrix=Z.IDENTITY_MATRIX,i.textMatrixScale=1,i.tspan=this.svgFactory.createElement("svg:tspan"),i.txtElement=this.svgFactory.createElement("svg:text"),i.txtgrp=this.svgFactory.createElement("svg:g"),i.xcoords=[],i.ycoords=[]}moveText(i,s){const h=this.current;h.x=h.lineX+=i,h.y=h.lineY+=s,h.xcoords=[],h.ycoords=[],h.tspan=this.svgFactory.createElement("svg:tspan"),h.tspan.setAttributeNS(null,"font-family",h.fontFamily),h.tspan.setAttributeNS(null,"font-size",`${t(h.fontSize)}px`),h.tspan.setAttributeNS(null,"y",t(-h.y))}showText(i){const s=this.current,h=s.font,c=s.fontSize;if(c===0)return;const o=s.fontSizeScale,v=s.charSpacing,w=s.wordSpacing,B=s.fontDirection,K=s.textHScale*B,C=h.vertical,V=C?1:-1,q=h.defaultVMetrics,X=c*s.fontMatrix[0];let E=0;for(const ie of i){if(ie===null){E+=B*w;continue}else if(typeof ie=="number"){E+=V*ie*c/1e3;continue}const _e=(ie.isSpace?w:0)+v,R=ie.fontChar;let g,n,u=ie.width;if(C){let I;const j=ie.vmetric||q;I=ie.vmetric?j[1]:u*.5,I=-I*X;const Y=j[2]*X;u=j?-j[0]:u,g=I/o,n=(E+Y)/o}else g=E/o,n=0;(ie.isInFont||h.missingFile)&&(s.xcoords.push(s.x+g),C&&s.ycoords.push(-s.y+n),s.tspan.textContent+=R);const L=C?u*X-_e*B:u*X+_e*B;E+=L}s.tspan.setAttributeNS(null,"x",s.xcoords.map(t).join(" ")),C?s.tspan.setAttributeNS(null,"y",s.ycoords.map(t).join(" ")):s.tspan.setAttributeNS(null,"y",t(-s.y)),C?s.y-=E:s.x+=E*K,s.tspan.setAttributeNS(null,"font-family",s.fontFamily),s.tspan.setAttributeNS(null,"font-size",`${t(s.fontSize)}px`),s.fontStyle!==Pe.fontStyle&&s.tspan.setAttributeNS(null,"font-style",s.fontStyle),s.fontWeight!==Pe.fontWeight&&s.tspan.setAttributeNS(null,"font-weight",s.fontWeight);const F=s.textRenderingMode&Z.TextRenderingMode.FILL_STROKE_MASK;if(F===Z.TextRenderingMode.FILL||F===Z.TextRenderingMode.FILL_STROKE?(s.fillColor!==Pe.fillColor&&s.tspan.setAttributeNS(null,"fill",s.fillColor),s.fillAlpha<1&&s.tspan.setAttributeNS(null,"fill-opacity",s.fillAlpha)):s.textRenderingMode===Z.TextRenderingMode.ADD_TO_PATH?s.tspan.setAttributeNS(null,"fill","transparent"):s.tspan.setAttributeNS(null,"fill","none"),F===Z.TextRenderingMode.STROKE||F===Z.TextRenderingMode.FILL_STROKE){const ie=1/(s.textMatrixScale||1);this._setStrokeAttributes(s.tspan,ie)}let k=s.textMatrix;s.textRise!==0&&(k=k.slice(),k[5]+=s.textRise),s.txtElement.setAttributeNS(null,"transform",`${r(k)} scale(${t(K)}, -1)`),s.txtElement.setAttributeNS(ae,"xml:space","preserve"),s.txtElement.append(s.tspan),s.txtgrp.append(s.txtElement),this._ensureTransformGroup().append(s.txtElement)}setLeadingMoveText(i,s){this.setLeading(-s),this.moveText(i,s)}addFontStyle(i){if(!i.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const s=l(i.data,i.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${i.loadedName}"; src: url(${s}); }
`}setFont(i){const s=this.current,h=this.commonObjs.get(i[0]);let c=i[1];s.font=h,this.embedFonts&&!h.missingFile&&!this.embeddedFonts[h.loadedName]&&(this.addFontStyle(h),this.embeddedFonts[h.loadedName]=h),s.fontMatrix=h.fontMatrix||Z.FONT_IDENTITY_MATRIX;let o="normal";h.black?o="900":h.bold&&(o="bold");const v=h.italic?"italic":"normal";c<0?(c=-c,s.fontDirection=-1):s.fontDirection=1,s.fontSize=c,s.fontFamily=h.loadedName,s.fontWeight=o,s.fontStyle=v,s.tspan=this.svgFactory.createElement("svg:tspan"),s.tspan.setAttributeNS(null,"y",t(-s.y)),s.xcoords=[],s.ycoords=[]}endText(){var s;const i=this.current;i.textRenderingMode&Z.TextRenderingMode.ADD_TO_PATH_FLAG&&((s=i.txtElement)!=null&&s.hasChildNodes())&&(i.element=i.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(i){i>0&&(this.current.lineWidth=i)}setLineCap(i){this.current.lineCap=P[i]}setLineJoin(i){this.current.lineJoin=a[i]}setMiterLimit(i){this.current.miterLimit=i}setStrokeAlpha(i){this.current.strokeAlpha=i}setStrokeRGBColor(i,s,h){this.current.strokeColor=Z.Util.makeHexColor(i,s,h)}setFillAlpha(i){this.current.fillAlpha=i}setFillRGBColor(i,s,h){this.current.fillColor=Z.Util.makeHexColor(i,s,h),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(i){this.current.strokeColor=this._makeColorN_Pattern(i)}setFillColorN(i){this.current.fillColor=this._makeColorN_Pattern(i)}shadingFill(i){const{width:s,height:h}=this.viewport,c=Z.Util.inverseTransform(this.transformMatrix),[o,v,w,B]=Z.Util.getAxialAlignedBoundingBox([0,0,s,h],c),K=this.svgFactory.createElement("svg:rect");K.setAttributeNS(null,"x",o),K.setAttributeNS(null,"y",v),K.setAttributeNS(null,"width",w-o),K.setAttributeNS(null,"height",B-v),K.setAttributeNS(null,"fill",this._makeShadingPattern(i)),this.current.fillAlpha<1&&K.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(K)}_makeColorN_Pattern(i){return i[0]==="TilingPattern"?this._makeTilingPattern(i):this._makeShadingPattern(i)}_makeTilingPattern(i){const s=i[1],h=i[2],c=i[3]||Z.IDENTITY_MATRIX,[o,v,w,B]=i[4],K=i[5],C=i[6],V=i[7],q=`shading${b++}`,[X,E,F,k]=Z.Util.normalizeRect([...Z.Util.applyTransform([o,v],c),...Z.Util.applyTransform([w,B],c)]),[ie,_e]=Z.Util.singularValueDecompose2dScale(c),R=K*ie,g=C*_e,n=this.svgFactory.createElement("svg:pattern");n.setAttributeNS(null,"id",q),n.setAttributeNS(null,"patternUnits","userSpaceOnUse"),n.setAttributeNS(null,"width",R),n.setAttributeNS(null,"height",g),n.setAttributeNS(null,"x",`${X}`),n.setAttributeNS(null,"y",`${E}`);const u=this.svg,L=this.transformMatrix,I=this.current.fillColor,j=this.current.strokeColor,Y=this.svgFactory.create(F-X,k-E);if(this.svg=Y,this.transformMatrix=c,V===2){const te=Z.Util.makeHexColor(...s);this.current.fillColor=te,this.current.strokeColor=te}return this.executeOpTree(this.convertOpList(h)),this.svg=u,this.transformMatrix=L,this.current.fillColor=I,this.current.strokeColor=j,n.append(Y.childNodes[0]),this.defs.append(n),`url(#${q})`}_makeShadingPattern(i){switch(typeof i=="string"&&(i=this.objs.get(i)),i[0]){case"RadialAxial":const s=`shading${b++}`,h=i[3];let c;switch(i[1]){case"axial":const o=i[4],v=i[5];c=this.svgFactory.createElement("svg:linearGradient"),c.setAttributeNS(null,"id",s),c.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),c.setAttributeNS(null,"x1",o[0]),c.setAttributeNS(null,"y1",o[1]),c.setAttributeNS(null,"x2",v[0]),c.setAttributeNS(null,"y2",v[1]);break;case"radial":const w=i[4],B=i[5],K=i[6],C=i[7];c=this.svgFactory.createElement("svg:radialGradient"),c.setAttributeNS(null,"id",s),c.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),c.setAttributeNS(null,"cx",B[0]),c.setAttributeNS(null,"cy",B[1]),c.setAttributeNS(null,"r",C),c.setAttributeNS(null,"fx",w[0]),c.setAttributeNS(null,"fy",w[1]),c.setAttributeNS(null,"fr",K);break;default:throw new Error(`Unknown RadialAxial type: ${i[1]}`)}for(const o of h){const v=this.svgFactory.createElement("svg:stop");v.setAttributeNS(null,"offset",o[0]),v.setAttributeNS(null,"stop-color",o[1]),c.append(v)}return this.defs.append(c),`url(#${s})`;case"Mesh":return(0,Z.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${i[0]}`)}}setDash(i,s){this.current.dashArray=i,this.current.dashPhase=s}constructPath(i,s){const h=this.current;let c=h.x,o=h.y,v=[],w=0;for(const B of i)switch(B|0){case Z.OPS.rectangle:c=s[w++],o=s[w++];const K=s[w++],C=s[w++],V=c+K,q=o+C;v.push("M",t(c),t(o),"L",t(V),t(o),"L",t(V),t(q),"L",t(c),t(q),"Z");break;case Z.OPS.moveTo:c=s[w++],o=s[w++],v.push("M",t(c),t(o));break;case Z.OPS.lineTo:c=s[w++],o=s[w++],v.push("L",t(c),t(o));break;case Z.OPS.curveTo:c=s[w+4],o=s[w+5],v.push("C",t(s[w]),t(s[w+1]),t(s[w+2]),t(s[w+3]),t(c),t(o)),w+=6;break;case Z.OPS.curveTo2:v.push("C",t(c),t(o),t(s[w]),t(s[w+1]),t(s[w+2]),t(s[w+3])),c=s[w+2],o=s[w+3],w+=4;break;case Z.OPS.curveTo3:c=s[w+2],o=s[w+3],v.push("C",t(s[w]),t(s[w+1]),t(c),t(o),t(c),t(o)),w+=4;break;case Z.OPS.closePath:v.push("Z");break}v=v.join(" "),h.path&&i.length>0&&i[0]!==Z.OPS.rectangle&&i[0]!==Z.OPS.moveTo?v=h.path.getAttributeNS(null,"d")+v:(h.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(h.path)),h.path.setAttributeNS(null,"d",v),h.path.setAttributeNS(null,"fill","none"),h.element=h.path,h.setCurrentPoint(c,o)}endPath(){const i=this.current;if(i.path=null,!this.pendingClip)return;if(!i.element){this.pendingClip=null;return}const s=`clippath${d++}`,h=this.svgFactory.createElement("svg:clipPath");h.setAttributeNS(null,"id",s),h.setAttributeNS(null,"transform",r(this.transformMatrix));const c=i.element.cloneNode(!0);if(this.pendingClip==="evenodd"?c.setAttributeNS(null,"clip-rule","evenodd"):c.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,h.append(c),this.defs.append(h),i.activeClipUrl){i.clipGroup=null;for(const o of this.extraStack)o.clipGroup=null;h.setAttributeNS(null,"clip-path",i.activeClipUrl)}i.activeClipUrl=`url(#${s})`,this.tgrp=null}clip(i){this.pendingClip=i}closePath(){const i=this.current;if(i.path){const s=`${i.path.getAttributeNS(null,"d")}Z`;i.path.setAttributeNS(null,"d",s)}}setLeading(i){this.current.leading=-i}setTextRise(i){this.current.textRise=i}setTextRenderingMode(i){this.current.textRenderingMode=i}setHScale(i){this.current.textHScale=i/100}setRenderingIntent(i){}setFlatness(i){}setGState(i){for(const[s,h]of i)switch(s){case"LW":this.setLineWidth(h);break;case"LC":this.setLineCap(h);break;case"LJ":this.setLineJoin(h);break;case"ML":this.setMiterLimit(h);break;case"D":this.setDash(h[0],h[1]);break;case"RI":this.setRenderingIntent(h);break;case"FL":this.setFlatness(h);break;case"Font":this.setFont(h);break;case"CA":this.setStrokeAlpha(h);break;case"ca":this.setFillAlpha(h);break;default:(0,Z.warn)(`Unimplemented graphic state operator ${s}`);break}}fill(){const i=this.current;i.element&&(i.element.setAttributeNS(null,"fill",i.fillColor),i.element.setAttributeNS(null,"fill-opacity",i.fillAlpha),this.endPath())}stroke(){const i=this.current;i.element&&(this._setStrokeAttributes(i.element),i.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(i,s=1){const h=this.current;let c=h.dashArray;s!==1&&c.length>0&&(c=c.map(function(o){return s*o})),i.setAttributeNS(null,"stroke",h.strokeColor),i.setAttributeNS(null,"stroke-opacity",h.strokeAlpha),i.setAttributeNS(null,"stroke-miterlimit",t(h.miterLimit)),i.setAttributeNS(null,"stroke-linecap",h.lineCap),i.setAttributeNS(null,"stroke-linejoin",h.lineJoin),i.setAttributeNS(null,"stroke-width",t(s*h.lineWidth)+"px"),i.setAttributeNS(null,"stroke-dasharray",c.map(t).join(" ")),i.setAttributeNS(null,"stroke-dashoffset",t(s*h.dashPhase)+"px")}eoFill(){var i;(i=this.current.element)==null||i.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var i;(i=this.current.element)==null||i.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const i=this.svgFactory.createElement("svg:rect");i.setAttributeNS(null,"x","0"),i.setAttributeNS(null,"y","0"),i.setAttributeNS(null,"width","1px"),i.setAttributeNS(null,"height","1px"),i.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(i)}paintImageXObject(i){const s=this.getObject(i);if(!s){(0,Z.warn)(`Dependent image with object ID ${i} is not ready yet`);return}this.paintInlineImageXObject(s)}paintInlineImageXObject(i,s){const h=i.width,c=i.height,o=T(i,this.forceDataSchema,!!s),v=this.svgFactory.createElement("svg:rect");v.setAttributeNS(null,"x","0"),v.setAttributeNS(null,"y","0"),v.setAttributeNS(null,"width",t(h)),v.setAttributeNS(null,"height",t(c)),this.current.element=v,this.clip("nonzero");const w=this.svgFactory.createElement("svg:image");w.setAttributeNS(A,"xlink:href",o),w.setAttributeNS(null,"x","0"),w.setAttributeNS(null,"y",t(-c)),w.setAttributeNS(null,"width",t(h)+"px"),w.setAttributeNS(null,"height",t(c)+"px"),w.setAttributeNS(null,"transform",`scale(${t(1/h)} ${t(-1/c)})`),s?s.append(w):this._ensureTransformGroup().append(w)}paintImageMaskXObject(i){const s=this.getObject(i.data,i);if(s.bitmap){(0,Z.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const h=this.current,c=s.width,o=s.height,v=h.fillColor;h.maskId=`mask${p++}`;const w=this.svgFactory.createElement("svg:mask");w.setAttributeNS(null,"id",h.maskId);const B=this.svgFactory.createElement("svg:rect");B.setAttributeNS(null,"x","0"),B.setAttributeNS(null,"y","0"),B.setAttributeNS(null,"width",t(c)),B.setAttributeNS(null,"height",t(o)),B.setAttributeNS(null,"fill",v),B.setAttributeNS(null,"mask",`url(#${h.maskId})`),this.defs.append(w),this._ensureTransformGroup().append(B),this.paintInlineImageXObject(s,w)}paintFormXObjectBegin(i,s){if(Array.isArray(i)&&i.length===6&&this.transform(i[0],i[1],i[2],i[3],i[4],i[5]),s){const h=s[2]-s[0],c=s[3]-s[1],o=this.svgFactory.createElement("svg:rect");o.setAttributeNS(null,"x",s[0]),o.setAttributeNS(null,"y",s[1]),o.setAttributeNS(null,"width",t(h)),o.setAttributeNS(null,"height",t(c)),this.current.element=o,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(i){const s=this.svgFactory.create(i.width,i.height),h=this.svgFactory.createElement("svg:defs");s.append(h),this.defs=h;const c=this.svgFactory.createElement("svg:g");return c.setAttributeNS(null,"transform",r(i.transform)),s.append(c),this.svg=c,s}_ensureClipGroup(){if(!this.current.clipGroup){const i=this.svgFactory.createElement("svg:g");i.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(i),this.current.clipGroup=i}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",r(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}H.SVGGraphics=f},(Be,H)=>{Object.defineProperty(H,"__esModule",{value:!0}),H.XfaText=void 0;class Te{static textContent(Z){const Pe=[],ae={items:Pe,styles:Object.create(null)};function A(P){var T;if(!P)return;let a=null;const l=P.name;if(l==="#text")a=P.value;else if(Te.shouldBuildText(l))(T=P==null?void 0:P.attributes)!=null&&T.textContent?a=P.attributes.textContent:P.value&&(a=P.value);else return;if(a!==null&&Pe.push({str:a}),!!P.children)for(const y of P.children)A(y)}return A(Z),ae}static shouldBuildText(Z){return!(Z==="textarea"||Z==="input"||Z==="option"||Z==="select")}}H.XfaText=Te},(Be,H,Te)=>{Object.defineProperty(H,"__esModule",{value:!0}),H.TextLayerRenderTask=void 0,H.renderTextLayer=r,H.updateTextLayer=d;var N=Te(1),Z=Te(6);const Pe=1e5,ae=30,A=.8,P=new Map;function a(p,b){let f;if(b&&N.FeatureTest.isOffscreenCanvasSupported)f=new OffscreenCanvas(p,p).getContext("2d",{alpha:!1});else{const m=document.createElement("canvas");m.width=m.height=p,f=m.getContext("2d",{alpha:!1})}return f}function l(p,b){const f=P.get(p);if(f)return f;const m=a(ae,b);m.font=`${ae}px ${p}`;const i=m.measureText("");let s=i.fontBoundingBoxAscent,h=Math.abs(i.fontBoundingBoxDescent);if(s){const o=s/(s+h);return P.set(p,o),m.canvas.width=m.canvas.height=0,o}m.strokeStyle="red",m.clearRect(0,0,ae,ae),m.strokeText("g",0,0);let c=m.getImageData(0,0,ae,ae).data;h=0;for(let o=c.length-1-3;o>=0;o-=4)if(c[o]>0){h=Math.ceil(o/4/ae);break}m.clearRect(0,0,ae,ae),m.strokeText("A",0,ae),c=m.getImageData(0,0,ae,ae).data,s=0;for(let o=0,v=c.length;o<v;o+=4)if(c[o]>0){s=ae-Math.floor(o/4/ae);break}if(m.canvas.width=m.canvas.height=0,s){const o=s/(s+h);return P.set(p,o),o}return P.set(p,A),A}function T(p,b,f){const m=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:b.str!=="",hasEOL:b.hasEOL,fontSize:0};p._textDivs.push(m);const s=N.Util.transform(p._transform,b.transform);let h=Math.atan2(s[1],s[0]);const c=f[b.fontName];c.vertical&&(h+=Math.PI/2);const o=Math.hypot(s[2],s[3]),v=o*l(c.fontFamily,p._isOffscreenCanvasSupported);let w,B;h===0?(w=s[4],B=s[5]-v):(w=s[4]+v*Math.sin(h),B=s[5]-v*Math.cos(h));const K="calc(var(--scale-factor)*",C=m.style;p._container===p._rootContainer?(C.left=`${(100*w/p._pageWidth).toFixed(2)}%`,C.top=`${(100*B/p._pageHeight).toFixed(2)}%`):(C.left=`${K}${w.toFixed(2)}px)`,C.top=`${K}${B.toFixed(2)}px)`),C.fontSize=`${K}${o.toFixed(2)}px)`,C.fontFamily=c.fontFamily,i.fontSize=o,m.setAttribute("role","presentation"),m.textContent=b.str,m.dir=b.dir,p._fontInspectorEnabled&&(m.dataset.fontName=b.fontName),h!==0&&(i.angle=h*(180/Math.PI));let V=!1;if(b.str.length>1)V=!0;else if(b.str!==" "&&b.transform[0]!==b.transform[3]){const q=Math.abs(b.transform[0]),X=Math.abs(b.transform[3]);q!==X&&Math.max(q,X)/Math.min(q,X)>1.5&&(V=!0)}V&&(i.canvasWidth=c.vertical?b.height:b.width),p._textDivProperties.set(m,i),p._isReadableStream&&p._layoutText(m)}function y(p){const{div:b,scale:f,properties:m,ctx:i,prevFontSize:s,prevFontFamily:h}=p,{style:c}=b;let o="";if(m.canvasWidth!==0&&m.hasText){const{fontFamily:v}=c,{canvasWidth:w,fontSize:B}=m;(s!==B||h!==v)&&(i.font=`${B*f}px ${v}`,p.prevFontSize=B,p.prevFontFamily=v);const{width:K}=i.measureText(b.textContent);K>0&&(o=`scaleX(${w*f/K})`)}m.angle!==0&&(o=`rotate(${m.angle}deg) ${o}`),o.length>0&&(c.transform=o)}function S(p){if(p._canceled)return;const b=p._textDivs,f=p._capability;if(b.length>Pe){f.resolve();return}if(!p._isReadableStream)for(const i of b)p._layoutText(i);f.resolve()}class t{constructor({textContentSource:b,container:f,viewport:m,textDivs:i,textDivProperties:s,textContentItemsStr:h,isOffscreenCanvasSupported:c}){var K;this._textContentSource=b,this._isReadableStream=b instanceof ReadableStream,this._container=this._rootContainer=f,this._textDivs=i||[],this._textContentItemsStr=h||[],this._isOffscreenCanvasSupported=c,this._fontInspectorEnabled=!!((K=globalThis.FontInspector)!=null&&K.enabled),this._reader=null,this._textDivProperties=s||new WeakMap,this._canceled=!1,this._capability=new N.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:m.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:a(0,c)};const{pageWidth:o,pageHeight:v,pageX:w,pageY:B}=m.rawDims;this._transform=[1,0,0,-1,-w,B+v],this._pageWidth=o,this._pageHeight=v,(0,Z.setLayerDimensions)(f,m),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new N.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new N.AbortException("TextLayer task cancelled."))}_processItems(b,f){for(const m of b){if(m.str===void 0){if(m.type==="beginMarkedContentProps"||m.type==="beginMarkedContent"){const i=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),m.id!==null&&this._container.setAttribute("id",`${m.id}`),i.append(this._container)}else m.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(m.str),T(this,m,f)}}_layoutText(b){const f=this._layoutTextParams.properties=this._textDivProperties.get(b);if(this._layoutTextParams.div=b,y(this._layoutTextParams),f.hasText&&this._container.append(b),f.hasEOL){const m=document.createElement("br");m.setAttribute("role","presentation"),this._container.append(m)}}_render(){const b=new N.PromiseCapability;let f=Object.create(null);if(this._isReadableStream){const m=()=>{this._reader.read().then(({value:i,done:s})=>{if(s){b.resolve();return}Object.assign(f,i.styles),this._processItems(i.items,f),m()},b.reject)};this._reader=this._textContentSource.getReader(),m()}else if(this._textContentSource){const{items:m,styles:i}=this._textContentSource;this._processItems(m,i),b.resolve()}else throw new Error('No "textContentSource" parameter specified.');b.promise.then(()=>{f=null,S(this)},this._capability.reject)}}H.TextLayerRenderTask=t;function r(p){!p.textContentSource&&(p.textContent||p.textContentStream)&&((0,Z.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),p.textContentSource=p.textContent||p.textContentStream);const{container:b,viewport:f}=p,m=getComputedStyle(b),i=m.getPropertyValue("visibility"),s=parseFloat(m.getPropertyValue("--scale-factor"));i==="visible"&&(!s||Math.abs(s-f.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const h=new t(p);return h._render(),h}function d({container:p,viewport:b,textDivs:f,textDivProperties:m,isOffscreenCanvasSupported:i,mustRotate:s=!0,mustRescale:h=!0}){if(s&&(0,Z.setLayerDimensions)(p,{rotation:b.rotation}),h){const c=a(0,i),v={prevFontSize:null,prevFontFamily:null,div:null,scale:b.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:c};for(const w of f)v.properties=m.get(w),v.div=w,y(v)}}},(Be,H,Te)=>{var l,T,y,S,t,r,d,p,b,f,m,ci,s,Ot,c,hi,v,ui;Object.defineProperty(H,"__esModule",{value:!0}),H.AnnotationEditorLayer=void 0;var N=Te(1),Z=Te(4),Pe=Te(28),ae=Te(33),A=Te(6),P=Te(34);const B=class{constructor({uiManager:C,pageIndex:V,div:q,accessibilityManager:X,annotationLayer:E,viewport:F,l10n:k}){M(this,m);M(this,s);M(this,c);M(this,v);M(this,l,void 0);M(this,T,!1);M(this,y,null);M(this,S,this.pointerup.bind(this));M(this,t,this.pointerdown.bind(this));M(this,r,new Map);M(this,d,!1);M(this,p,!1);M(this,b,!1);M(this,f,void 0);const ie=[Pe.FreeTextEditor,ae.InkEditor,P.StampEditor];if(!B._initialized){B._initialized=!0;for(const _e of ie)_e.initialize(k)}C.registerEditorTypes(ie),J(this,f,C),this.pageIndex=V,this.div=q,J(this,l,X),J(this,y,E),this.viewport=F,e(this,f).addLayer(this)}get isEmpty(){return e(this,r).size===0}updateToolbar(C){e(this,f).updateToolbar(C)}updateMode(C=e(this,f).getMode()){O(this,v,ui).call(this),C===N.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),C!==N.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",C===N.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",C===N.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",C===N.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(C){if(!C&&e(this,f).getMode()!==N.AnnotationEditorType.INK)return;if(!C){for(const q of e(this,r).values())if(q.isEmpty()){q.setInBackground();return}}O(this,s,Ot).call(this,{offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(C){e(this,f).setEditingState(C)}addCommands(C){e(this,f).addCommands(C)}enable(){this.div.style.pointerEvents="auto";const C=new Set;for(const q of e(this,r).values())q.enableEditing(),q.annotationElementId&&C.add(q.annotationElementId);if(!e(this,y))return;const V=e(this,y).getEditableAnnotations();for(const q of V){if(q.hide(),e(this,f).isDeletedAnnotationElement(q.data.id)||C.has(q.data.id))continue;const X=this.deserialize(q);X&&(this.addOrRebuild(X),X.enableEditing())}}disable(){var V;J(this,b,!0),this.div.style.pointerEvents="none";const C=new Set;for(const q of e(this,r).values()){if(q.disableEditing(),!q.annotationElementId||q.serialize()!==null){C.add(q.annotationElementId);continue}(V=this.getEditableAnnotation(q.annotationElementId))==null||V.show(),q.remove()}if(e(this,y)){const q=e(this,y).getEditableAnnotations();for(const X of q){const{id:E}=X.data;C.has(E)||e(this,f).isDeletedAnnotationElement(E)||X.show()}}O(this,v,ui).call(this),this.isEmpty&&(this.div.hidden=!0),J(this,b,!1)}getEditableAnnotation(C){var V;return((V=e(this,y))==null?void 0:V.getEditableAnnotation(C))||null}setActiveEditor(C){e(this,f).getActive()!==C&&e(this,f).setActiveEditor(C)}enableClick(){this.div.addEventListener("pointerdown",e(this,t)),this.div.addEventListener("pointerup",e(this,S))}disableClick(){this.div.removeEventListener("pointerdown",e(this,t)),this.div.removeEventListener("pointerup",e(this,S))}attach(C){e(this,r).set(C.id,C);const{annotationElementId:V}=C;V&&e(this,f).isDeletedAnnotationElement(V)&&e(this,f).removeDeletedAnnotationElement(C)}detach(C){var V;e(this,r).delete(C.id),(V=e(this,l))==null||V.removePointerInTextLayer(C.contentDiv),!e(this,b)&&C.annotationElementId&&e(this,f).addDeletedAnnotationElement(C)}remove(C){this.detach(C),e(this,f).removeEditor(C),C.div.contains(document.activeElement)&&setTimeout(()=>{e(this,f).focusMainContainer()},0),C.div.remove(),C.isAttachedToDOM=!1,e(this,p)||this.addInkEditorIfNeeded(!1)}changeParent(C){var V;C.parent!==this&&(C.annotationElementId&&(e(this,f).addDeletedAnnotationElement(C.annotationElementId),Z.AnnotationEditor.deleteAnnotationElement(C),C.annotationElementId=null),this.attach(C),(V=C.parent)==null||V.detach(C),C.setParent(this),C.div&&C.isAttachedToDOM&&(C.div.remove(),this.div.append(C.div)))}add(C){if(this.changeParent(C),e(this,f).addEditor(C),this.attach(C),!C.isAttachedToDOM){const V=C.render();this.div.append(V),C.isAttachedToDOM=!0}this.moveEditorInDOM(C),C.onceAdded(),e(this,f).addToAnnotationStorage(C)}moveEditorInDOM(C){var q;if(!C.isAttachedToDOM)return;const{activeElement:V}=document;C.div.contains(V)&&(C._focusEventsAllowed=!1,setTimeout(()=>{C.div.addEventListener("focusin",()=>{C._focusEventsAllowed=!0},{once:!0}),V.focus()},0)),(q=e(this,l))==null||q.moveElementInDOM(this.div,C.div,C.contentDiv,!0)}addOrRebuild(C){C.needsToBeRebuilt()?C.rebuild():this.add(C)}addUndoableEditor(C){const V=()=>C._uiManager.rebuild(C),q=()=>{C.remove()};this.addCommands({cmd:V,undo:q,mustExec:!1})}getNextId(){return e(this,f).getId()}pasteEditor(C,V){e(this,f).updateToolbar(C),e(this,f).updateMode(C);const{offsetX:q,offsetY:X}=O(this,c,hi).call(this),E=this.getNextId(),F=O(this,m,ci).call(this,{parent:this,id:E,x:q,y:X,uiManager:e(this,f),isCentered:!0,...V});F&&this.add(F)}deserialize(C){switch(C.annotationType??C.annotationEditorType){case N.AnnotationEditorType.FREETEXT:return Pe.FreeTextEditor.deserialize(C,this,e(this,f));case N.AnnotationEditorType.INK:return ae.InkEditor.deserialize(C,this,e(this,f));case N.AnnotationEditorType.STAMP:return P.StampEditor.deserialize(C,this,e(this,f))}return null}addNewEditor(){O(this,s,Ot).call(this,O(this,c,hi).call(this),!0)}setSelected(C){e(this,f).setSelected(C)}toggleSelected(C){e(this,f).toggleSelected(C)}isSelected(C){return e(this,f).isSelected(C)}unselect(C){e(this,f).unselect(C)}pointerup(C){const{isMac:V}=N.FeatureTest.platform;if(!(C.button!==0||C.ctrlKey&&V)&&C.target===this.div&&e(this,d)){if(J(this,d,!1),!e(this,T)){J(this,T,!0);return}if(e(this,f).getMode()===N.AnnotationEditorType.STAMP){e(this,f).unselectAll();return}O(this,s,Ot).call(this,C,!1)}}pointerdown(C){if(e(this,d)){J(this,d,!1);return}const{isMac:V}=N.FeatureTest.platform;if(C.button!==0||C.ctrlKey&&V||C.target!==this.div)return;J(this,d,!0);const q=e(this,f).getActive();J(this,T,!q||q.isEmpty())}findNewParent(C,V,q){const X=e(this,f).findParent(V,q);return X===null||X===this?!1:(X.changeParent(C),!0)}destroy(){var C,V;((C=e(this,f).getActive())==null?void 0:C.parent)===this&&e(this,f).setActiveEditor(null);for(const q of e(this,r).values())(V=e(this,l))==null||V.removePointerInTextLayer(q.contentDiv),q.setParent(null),q.isAttachedToDOM=!1,q.div.remove();this.div=null,e(this,r).clear(),e(this,f).removeLayer(this)}render({viewport:C}){this.viewport=C,(0,A.setLayerDimensions)(this.div,C);for(const V of e(this,f).getEditors(this.pageIndex))this.add(V);this.updateMode()}update({viewport:C}){e(this,f).commitOrRemove(),this.viewport=C,(0,A.setLayerDimensions)(this.div,{rotation:C.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:C,pageHeight:V}=this.viewport.rawDims;return[C,V]}};let a=B;l=new WeakMap,T=new WeakMap,y=new WeakMap,S=new WeakMap,t=new WeakMap,r=new WeakMap,d=new WeakMap,p=new WeakMap,b=new WeakMap,f=new WeakMap,m=new WeakSet,ci=function(C){switch(e(this,f).getMode()){case N.AnnotationEditorType.FREETEXT:return new Pe.FreeTextEditor(C);case N.AnnotationEditorType.INK:return new ae.InkEditor(C);case N.AnnotationEditorType.STAMP:return new P.StampEditor(C)}return null},s=new WeakSet,Ot=function(C,V){const q=this.getNextId(),X=O(this,m,ci).call(this,{parent:this,id:q,x:C.offsetX,y:C.offsetY,uiManager:e(this,f),isCentered:V});return X&&this.add(X),X},c=new WeakSet,hi=function(){const{x:C,y:V,width:q,height:X}=this.div.getBoundingClientRect(),E=Math.max(0,C),F=Math.max(0,V),k=Math.min(window.innerWidth,C+q),ie=Math.min(window.innerHeight,V+X),_e=(E+k)/2-C,R=(F+ie)/2-V,[g,n]=this.viewport.rotation%180===0?[_e,R]:[R,_e];return{offsetX:g,offsetY:n}},v=new WeakSet,ui=function(){J(this,p,!0);for(const C of e(this,r).values())C.isEmpty()&&C.remove();J(this,p,!1)},Ge(a,"_initialized",!1),H.AnnotationEditorLayer=a},(Be,H,Te)=>{var P,a,l,T,y,S,t,r,d,p,An,f,Pn,i,Cn,h,vt,o,fi,w,Tn,K,pi;Object.defineProperty(H,"__esModule",{value:!0}),H.FreeTextEditor=void 0;var N=Te(1),Z=Te(5),Pe=Te(4),ae=Te(29);const V=class extends Pe.AnnotationEditor{constructor(E){super({...E,name:"freeTextEditor"});M(this,p);M(this,f);M(this,i);M(this,h);M(this,o);M(this,w);M(this,K);M(this,P,this.editorDivBlur.bind(this));M(this,a,this.editorDivFocus.bind(this));M(this,l,this.editorDivInput.bind(this));M(this,T,this.editorDivKeydown.bind(this));M(this,y,void 0);M(this,S,"");M(this,t,`${this.id}-editor`);M(this,r,void 0);M(this,d,null);J(this,y,E.color||V._defaultColor||Pe.AnnotationEditor._defaultLineColor),J(this,r,E.fontSize||V._defaultFontSize)}static get _keyboardManager(){const E=V.prototype,F=_e=>_e.isEmpty(),k=Z.AnnotationEditorUIManager.TRANSLATE_SMALL,ie=Z.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,N.shadow)(this,"_keyboardManager",new Z.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],E.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],E.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],E._translateEmpty,{args:[-k,0],checker:F}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],E._translateEmpty,{args:[-ie,0],checker:F}],[["ArrowRight","mac+ArrowRight"],E._translateEmpty,{args:[k,0],checker:F}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],E._translateEmpty,{args:[ie,0],checker:F}],[["ArrowUp","mac+ArrowUp"],E._translateEmpty,{args:[0,-k],checker:F}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],E._translateEmpty,{args:[0,-ie],checker:F}],[["ArrowDown","mac+ArrowDown"],E._translateEmpty,{args:[0,k],checker:F}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],E._translateEmpty,{args:[0,ie],checker:F}]]))}static initialize(E){this._l10nPromise=new Map(["free_text2_default_content","editor_free_text2_aria_label"].map(k=>[k,E.get(k)]));const F=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(F.getPropertyValue("--freetext-padding"))}static updateDefaultParams(E,F){switch(E){case N.AnnotationEditorParamsType.FREETEXT_SIZE:V._defaultFontSize=F;break;case N.AnnotationEditorParamsType.FREETEXT_COLOR:V._defaultColor=F;break}}updateParams(E,F){switch(E){case N.AnnotationEditorParamsType.FREETEXT_SIZE:O(this,p,An).call(this,F);break;case N.AnnotationEditorParamsType.FREETEXT_COLOR:O(this,f,Pn).call(this,F);break}}static get defaultPropertiesToUpdate(){return[[N.AnnotationEditorParamsType.FREETEXT_SIZE,V._defaultFontSize],[N.AnnotationEditorParamsType.FREETEXT_COLOR,V._defaultColor||Pe.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[N.AnnotationEditorParamsType.FREETEXT_SIZE,e(this,r)],[N.AnnotationEditorParamsType.FREETEXT_COLOR,e(this,y)]]}_translateEmpty(E,F){this._uiManager.translateSelectedEditors(E,F,!0)}getInitialTranslation(){const E=this.parentScale;return[-V._internalPadding*E,-(V._internalPadding+e(this,r))*E]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(N.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",e(this,T)),this.editorDiv.addEventListener("focus",e(this,a)),this.editorDiv.addEventListener("blur",e(this,P)),this.editorDiv.addEventListener("input",e(this,l)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",e(this,t)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",e(this,T)),this.editorDiv.removeEventListener("focus",e(this,a)),this.editorDiv.removeEventListener("blur",e(this,P)),this.editorDiv.removeEventListener("input",e(this,l)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(E){this._focusEventsAllowed&&(super.focusin(E),E.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var E;if(this.width){O(this,K,pi).call(this);return}this.enableEditMode(),this.editorDiv.focus(),(E=this._initialOptions)!=null&&E.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const E=e(this,S),F=J(this,S,O(this,i,Cn).call(this).trimEnd());if(E===F)return;const k=ie=>{if(J(this,S,ie),!ie){this.remove();return}O(this,o,fi).call(this),this._uiManager.rebuild(this),O(this,h,vt).call(this)};this.addCommands({cmd:()=>{k(F)},undo:()=>{k(E)},mustExec:!1}),O(this,h,vt).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(E){this.enterInEditMode()}keydown(E){E.target===this.div&&E.key==="Enter"&&(this.enterInEditMode(),E.preventDefault())}editorDivKeydown(E){V._keyboardManager.exec(this,E)}editorDivFocus(E){this.isEditing=!0}editorDivBlur(E){this.isEditing=!1}editorDivInput(E){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let E,F;this.width&&(E=this.x,F=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",e(this,t)),this.enableEditing(),V._l10nPromise.get("editor_free_text2_aria_label").then(ie=>{var _e;return(_e=this.editorDiv)==null?void 0:_e.setAttribute("aria-label",ie)}),V._l10nPromise.get("free_text2_default_content").then(ie=>{var _e;return(_e=this.editorDiv)==null?void 0:_e.setAttribute("default-content",ie)}),this.editorDiv.contentEditable=!0;const{style:k}=this.editorDiv;if(k.fontSize=`calc(${e(this,r)}px * var(--scale-factor))`,k.color=e(this,y),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,Z.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[ie,_e]=this.parentDimensions;if(this.annotationElementId){const{position:R}=e(this,d);let[g,n]=this.getInitialTranslation();[g,n]=this.pageTranslationToScreen(g,n);const[u,L]=this.pageDimensions,[I,j]=this.pageTranslation;let Y,te;switch(this.rotation){case 0:Y=E+(R[0]-I)/u,te=F+this.height-(R[1]-j)/L;break;case 90:Y=E+(R[0]-I)/u,te=F-(R[1]-j)/L,[g,n]=[n,-g];break;case 180:Y=E-this.width+(R[0]-I)/u,te=F-(R[1]-j)/L,[g,n]=[-g,-n];break;case 270:Y=E+(R[0]-I-this.height*L)/u,te=F+(R[1]-j-this.width*u)/L,[g,n]=[-n,g];break}this.setAt(Y*ie,te*_e,g,n)}else this.setAt(E*ie,F*_e,this.width*ie,this.height*_e);O(this,o,fi).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(E,F,k){let ie=null;if(E instanceof ae.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:R,fontColor:g},rect:n,rotation:u,id:L},textContent:I,textPosition:j,parent:{page:{pageNumber:Y}}}=E;if(!I||I.length===0)return null;ie=E={annotationType:N.AnnotationEditorType.FREETEXT,color:Array.from(g),fontSize:R,value:I.join(`
`),position:j,pageIndex:Y-1,rect:n,rotation:u,id:L,deleted:!1}}const _e=super.deserialize(E,F,k);return J(_e,r,E.fontSize),J(_e,y,N.Util.makeHexColor(...E.color)),J(_e,S,E.value),_e.annotationElementId=E.id||null,J(_e,d,ie),_e}serialize(E=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const F=V._internalPadding*this.parentScale,k=this.getRect(F,F),ie=Pe.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:e(this,y)),_e={annotationType:N.AnnotationEditorType.FREETEXT,color:ie,fontSize:e(this,r),value:e(this,S),pageIndex:this.pageIndex,rect:k,rotation:this.rotation};return E?_e:this.annotationElementId&&!O(this,w,Tn).call(this,_e)?null:(_e.id=this.annotationElementId,_e)}};let A=V;P=new WeakMap,a=new WeakMap,l=new WeakMap,T=new WeakMap,y=new WeakMap,S=new WeakMap,t=new WeakMap,r=new WeakMap,d=new WeakMap,p=new WeakSet,An=function(E){const F=ie=>{this.editorDiv.style.fontSize=`calc(${ie}px * var(--scale-factor))`,this.translate(0,-(ie-e(this,r))*this.parentScale),J(this,r,ie),O(this,h,vt).call(this)},k=e(this,r);this.addCommands({cmd:()=>{F(E)},undo:()=>{F(k)},mustExec:!0,type:N.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},f=new WeakSet,Pn=function(E){const F=e(this,y);this.addCommands({cmd:()=>{J(this,y,this.editorDiv.style.color=E)},undo:()=>{J(this,y,this.editorDiv.style.color=F)},mustExec:!0,type:N.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},i=new WeakSet,Cn=function(){const E=this.editorDiv.getElementsByTagName("div");if(E.length===0)return this.editorDiv.innerText;const F=[];for(const k of E)F.push(k.innerText.replace(/\r\n?|\n/,""));return F.join(`
`)},h=new WeakSet,vt=function(){const[E,F]=this.parentDimensions;let k;if(this.isAttachedToDOM)k=this.div.getBoundingClientRect();else{const{currentLayer:ie,div:_e}=this,R=_e.style.display;_e.style.display="hidden",ie.div.append(this.div),k=_e.getBoundingClientRect(),_e.remove(),_e.style.display=R}this.rotation%180===this.parentRotation%180?(this.width=k.width/E,this.height=k.height/F):(this.width=k.height/E,this.height=k.width/F),this.fixAndSetPosition()},o=new WeakSet,fi=function(){if(this.editorDiv.replaceChildren(),!!e(this,S))for(const E of e(this,S).split(`
`)){const F=document.createElement("div");F.append(E?document.createTextNode(E):document.createElement("br")),this.editorDiv.append(F)}},w=new WeakSet,Tn=function(E){const{value:F,fontSize:k,color:ie,rect:_e,pageIndex:R}=e(this,d);return E.value!==F||E.fontSize!==k||E.rect.some((g,n)=>Math.abs(g-_e[n])>=1)||E.color.some((g,n)=>g!==ie[n])||E.pageIndex!==R},K=new WeakSet,pi=function(E=!1){if(!this.annotationElementId)return;if(O(this,h,vt).call(this),!E&&(this.width===0||this.height===0)){setTimeout(()=>O(this,K,pi).call(this,!0),0);return}const F=V._internalPadding*this.parentScale;e(this,d).rect=this.getRect(F,F)},Ge(A,"_freeTextDefaultContent",""),Ge(A,"_l10nPromise"),Ge(A,"_internalPadding",0),Ge(A,"_defaultColor",null),Ge(A,"_defaultFontSize",10),Ge(A,"_type","freetext"),H.FreeTextEditor=A},(Be,H,Te)=>{var n,u,at,I,Mn,Y,te,Se,ge,ne,ce,Ee,me,xe,De,Ae,Ve,oe,Q,le,ue,Ie,gi,ze,mi,Ne,bi,Xe,We,Le,_,z,fe,ee,he,re,ve,Ln,pe,_i;Object.defineProperty(H,"__esModule",{value:!0}),H.StampAnnotationElement=H.InkAnnotationElement=H.FreeTextAnnotationElement=H.AnnotationLayer=void 0;var N=Te(1),Z=Te(6),Pe=Te(3),ae=Te(30),A=Te(31),P=Te(32);const a=1e3,l=9,T=new WeakSet;function y(we){return{width:we[2]-we[0],height:we[3]-we[1]}}class S{static create(D){switch(D.data.annotationType){case N.AnnotationType.LINK:return new r(D);case N.AnnotationType.TEXT:return new d(D);case N.AnnotationType.WIDGET:switch(D.data.fieldType){case"Tx":return new b(D);case"Btn":return D.data.radioButton?new i(D):D.data.checkBox?new m(D):new s(D);case"Ch":return new h(D);case"Sig":return new f(D)}return new p(D);case N.AnnotationType.POPUP:return new c(D);case N.AnnotationType.FREETEXT:return new v(D);case N.AnnotationType.LINE:return new w(D);case N.AnnotationType.SQUARE:return new B(D);case N.AnnotationType.CIRCLE:return new K(D);case N.AnnotationType.POLYLINE:return new C(D);case N.AnnotationType.CARET:return new q(D);case N.AnnotationType.INK:return new X(D);case N.AnnotationType.POLYGON:return new V(D);case N.AnnotationType.HIGHLIGHT:return new E(D);case N.AnnotationType.UNDERLINE:return new F(D);case N.AnnotationType.SQUIGGLY:return new k(D);case N.AnnotationType.STRIKEOUT:return new ie(D);case N.AnnotationType.STAMP:return new _e(D);case N.AnnotationType.FILEATTACHMENT:return new R(D);default:return new t(D)}}}class t{constructor(D,{isRenderable:x=!1,ignoreBorder:W=!1,createQuadrilaterals:G=!1}={}){M(this,n,!1);this.isRenderable=x,this.data=D.data,this.layer=D.layer,this.linkService=D.linkService,this.downloadManager=D.downloadManager,this.imageResourcesPath=D.imageResourcesPath,this.renderForms=D.renderForms,this.svgFactory=D.svgFactory,this.annotationStorage=D.annotationStorage,this.enableScripting=D.enableScripting,this.hasJSActions=D.hasJSActions,this._fieldObjects=D.fieldObjects,this.parent=D.parent,x&&(this.container=this._createContainer(W)),G&&this._createQuadrilaterals()}_createContainer(D){const{data:x,parent:{page:W,viewport:G}}=this,se=document.createElement("section");se.setAttribute("data-annotation-id",x.id),se.style.zIndex=this.parent.zIndex++,this.data.popupRef&&se.setAttribute("aria-haspopup","dialog"),x.noRotate&&se.classList.add("norotate");const{pageWidth:be,pageHeight:ke,pageX:$,pageY:de}=G.rawDims;if(!x.rect||this instanceof c){const{rotation:He}=x;return!x.hasOwnCanvas&&He!==0&&this.setRotation(He,se),se}const{width:ye,height:Fe}=y(x.rect),Me=N.Util.normalizeRect([x.rect[0],W.view[3]-x.rect[1]+W.view[1],x.rect[2],W.view[3]-x.rect[3]+W.view[1]]);if(!D&&x.borderStyle.width>0){se.style.borderWidth=`${x.borderStyle.width}px`;const He=x.borderStyle.horizontalCornerRadius,$e=x.borderStyle.verticalCornerRadius;if(He>0||$e>0){const Ke=`calc(${He}px * var(--scale-factor)) / calc(${$e}px * var(--scale-factor))`;se.style.borderRadius=Ke}else if(this instanceof i){const Ke=`calc(${ye}px * var(--scale-factor)) / calc(${Fe}px * var(--scale-factor))`;se.style.borderRadius=Ke}switch(x.borderStyle.style){case N.AnnotationBorderStyleType.SOLID:se.style.borderStyle="solid";break;case N.AnnotationBorderStyleType.DASHED:se.style.borderStyle="dashed";break;case N.AnnotationBorderStyleType.BEVELED:(0,N.warn)("Unimplemented border style: beveled");break;case N.AnnotationBorderStyleType.INSET:(0,N.warn)("Unimplemented border style: inset");break;case N.AnnotationBorderStyleType.UNDERLINE:se.style.borderBottomStyle="solid";break}const qe=x.borderColor||null;qe?(J(this,n,!0),se.style.borderColor=N.Util.makeHexColor(qe[0]|0,qe[1]|0,qe[2]|0)):se.style.borderWidth=0}se.style.left=`${100*(Me[0]-$)/be}%`,se.style.top=`${100*(Me[1]-de)/ke}%`;const{rotation:Oe}=x;return x.hasOwnCanvas||Oe===0?(se.style.width=`${100*ye/be}%`,se.style.height=`${100*Fe/ke}%`):this.setRotation(Oe,se),se}setRotation(D,x=this.container){if(!this.data.rect)return;const{pageWidth:W,pageHeight:G}=this.parent.viewport.rawDims,{width:se,height:be}=y(this.data.rect);let ke,$;D%180===0?(ke=100*se/W,$=100*be/G):(ke=100*be/W,$=100*se/G),x.style.width=`${ke}%`,x.style.height=`${$}%`,x.setAttribute("data-main-rotation",(360-D)%360)}get _commonActions(){const D=(x,W,G)=>{const se=G.detail[x],be=se[0],ke=se.slice(1);G.target.style[W]=ae.ColorConverters[`${be}_HTML`](ke),this.annotationStorage.setValue(this.data.id,{[W]:ae.ColorConverters[`${be}_rgb`](ke)})};return(0,N.shadow)(this,"_commonActions",{display:x=>{const{display:W}=x.detail,G=W%2===1;this.container.style.visibility=G?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:G,noPrint:W===1||W===2})},print:x=>{this.annotationStorage.setValue(this.data.id,{noPrint:!x.detail.print})},hidden:x=>{const{hidden:W}=x.detail;this.container.style.visibility=W?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:W,noView:W})},focus:x=>{setTimeout(()=>x.target.focus({preventScroll:!1}),0)},userName:x=>{x.target.title=x.detail.userName},readonly:x=>{x.target.disabled=x.detail.readonly},required:x=>{this._setRequired(x.target,x.detail.required)},bgColor:x=>{D("bgColor","backgroundColor",x)},fillColor:x=>{D("fillColor","backgroundColor",x)},fgColor:x=>{D("fgColor","color",x)},textColor:x=>{D("textColor","color",x)},borderColor:x=>{D("borderColor","borderColor",x)},strokeColor:x=>{D("strokeColor","borderColor",x)},rotation:x=>{const W=x.detail.rotation;this.setRotation(W),this.annotationStorage.setValue(this.data.id,{rotation:W})}})}_dispatchEventFromSandbox(D,x){const W=this._commonActions;for(const G of Object.keys(x.detail)){const se=D[G]||W[G];se==null||se(x)}}_setDefaultPropertiesFromJS(D){if(!this.enableScripting)return;const x=this.annotationStorage.getRawValue(this.data.id);if(!x)return;const W=this._commonActions;for(const[G,se]of Object.entries(x)){const be=W[G];if(be){const ke={detail:{[G]:se},target:D};be(ke),delete x[G]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:D}=this.data;if(!D)return;const[x,W,G,se]=this.data.rect;if(D.length===1){const[,{x:$e,y:qe},{x:Ke,y:Qe}]=D[0];if(G===$e&&se===qe&&x===Ke&&W===Qe)return}const{style:be}=this.container;let ke;if(e(this,n)){const{borderColor:$e,borderWidth:qe}=be;be.borderWidth=0,ke=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${$e}" stroke-width="${qe}">`],this.container.classList.add("hasBorder")}const $=G-x,de=se-W,{svgFactory:ye}=this,Fe=ye.createElement("svg");Fe.classList.add("quadrilateralsContainer"),Fe.setAttribute("width",0),Fe.setAttribute("height",0);const Me=ye.createElement("defs");Fe.append(Me);const Oe=ye.createElement("clipPath"),He=`clippath_${this.data.id}`;Oe.setAttribute("id",He),Oe.setAttribute("clipPathUnits","objectBoundingBox"),Me.append(Oe);for(const[,{x:$e,y:qe},{x:Ke,y:Qe}]of D){const Ye=ye.createElement("rect"),Ze=(Ke-x)/$,et=(se-qe)/de,Je=($e-Ke)/$,tt=(qe-Qe)/de;Ye.setAttribute("x",Ze),Ye.setAttribute("y",et),Ye.setAttribute("width",Je),Ye.setAttribute("height",tt),Oe.append(Ye),ke==null||ke.push(`<rect vector-effect="non-scaling-stroke" x="${Ze}" y="${et}" width="${Je}" height="${tt}"/>`)}e(this,n)&&(ke.push("</g></svg>')"),be.backgroundImage=ke.join("")),this.container.append(Fe),this.container.style.clipPath=`url(#${He})`}_createPopup(){const{container:D,data:x}=this;D.setAttribute("aria-haspopup","dialog");const W=new c({data:{color:x.color,titleObj:x.titleObj,modificationDate:x.modificationDate,contentsObj:x.contentsObj,richText:x.richText,parentRect:x.rect,borderStyle:0,id:`popup_${x.id}`,rotation:x.rotation},parent:this.parent,elements:[this]});this.parent.div.append(W.render())}render(){(0,N.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(D,x=null){const W=[];if(this._fieldObjects){const G=this._fieldObjects[D];if(G)for(const{page:se,id:be,exportValues:ke}of G){if(se===-1||be===x)continue;const $=typeof ke=="string"?ke:null,de=document.querySelector(`[data-element-id="${be}"]`);if(de&&!T.has(de)){(0,N.warn)(`_getElementsByName - element not allowed: ${be}`);continue}W.push({id:be,exportValue:$,domElement:de})}return W}for(const G of document.getElementsByName(D)){const{exportValue:se}=G,be=G.getAttribute("data-element-id");be!==x&&T.has(G)&&W.push({id:be,exportValue:se,domElement:G})}return W}show(){var D;this.container&&(this.container.hidden=!1),(D=this.popup)==null||D.maybeShow()}hide(){var D;this.container&&(this.container.hidden=!0),(D=this.popup)==null||D.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const D=this.getElementsToTriggerPopup();if(Array.isArray(D))for(const x of D)x.classList.add("highlightArea");else D.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:D,data:{id:x}}=this;this.container.addEventListener("dblclick",()=>{var W;(W=this.linkService.eventBus)==null||W.dispatch("switchannotationeditormode",{source:this,mode:D,editId:x})})}}n=new WeakMap;class r extends t{constructor(x,W=null){super(x,{isRenderable:!0,ignoreBorder:!!(W!=null&&W.ignoreBorder),createQuadrilaterals:!0});M(this,u);M(this,I);this.isTooltipOnly=x.data.isTooltipOnly}render(){const{data:x,linkService:W}=this,G=document.createElement("a");G.setAttribute("data-element-id",x.id);let se=!1;return x.url?(W.addLinkAttributes(G,x.url,x.newWindow),se=!0):x.action?(this._bindNamedAction(G,x.action),se=!0):x.attachment?(this._bindAttachment(G,x.attachment),se=!0):x.setOCGState?(O(this,I,Mn).call(this,G,x.setOCGState),se=!0):x.dest?(this._bindLink(G,x.dest),se=!0):(x.actions&&(x.actions.Action||x.actions["Mouse Up"]||x.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(G,x),se=!0),x.resetForm?(this._bindResetFormAction(G,x.resetForm),se=!0):this.isTooltipOnly&&!se&&(this._bindLink(G,""),se=!0)),this.container.classList.add("linkAnnotation"),se&&this.container.append(G),this.container}_bindLink(x,W){x.href=this.linkService.getDestinationHash(W),x.onclick=()=>(W&&this.linkService.goToDestination(W),!1),(W||W==="")&&O(this,u,at).call(this)}_bindNamedAction(x,W){x.href=this.linkService.getAnchorUrl(""),x.onclick=()=>(this.linkService.executeNamedAction(W),!1),O(this,u,at).call(this)}_bindAttachment(x,W){x.href=this.linkService.getAnchorUrl(""),x.onclick=()=>{var G;return(G=this.downloadManager)==null||G.openOrDownloadData(this.container,W.content,W.filename),!1},O(this,u,at).call(this)}_bindJSAction(x,W){x.href=this.linkService.getAnchorUrl("");const G=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const se of Object.keys(W.actions)){const be=G.get(se);be&&(x[be]=()=>{var ke;return(ke=this.linkService.eventBus)==null||ke.dispatch("dispatcheventinsandbox",{source:this,detail:{id:W.id,name:se}}),!1})}x.onclick||(x.onclick=()=>!1),O(this,u,at).call(this)}_bindResetFormAction(x,W){const G=x.onclick;if(G||(x.href=this.linkService.getAnchorUrl("")),O(this,u,at).call(this),!this._fieldObjects){(0,N.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),G||(x.onclick=()=>!1);return}x.onclick=()=>{var Fe;G==null||G();const{fields:se,refs:be,include:ke}=W,$=[];if(se.length!==0||be.length!==0){const Me=new Set(be);for(const Oe of se){const He=this._fieldObjects[Oe]||[];for(const{id:$e}of He)Me.add($e)}for(const Oe of Object.values(this._fieldObjects))for(const He of Oe)Me.has(He.id)===ke&&$.push(He)}else for(const Me of Object.values(this._fieldObjects))$.push(...Me);const de=this.annotationStorage,ye=[];for(const Me of $){const{id:Oe}=Me;switch(ye.push(Oe),Me.type){case"text":{const $e=Me.defaultValue||"";de.setValue(Oe,{value:$e});break}case"checkbox":case"radiobutton":{const $e=Me.defaultValue===Me.exportValues;de.setValue(Oe,{value:$e});break}case"combobox":case"listbox":{const $e=Me.defaultValue||"";de.setValue(Oe,{value:$e});break}default:continue}const He=document.querySelector(`[data-element-id="${Oe}"]`);if(He){if(!T.has(He)){(0,N.warn)(`_bindResetFormAction - element not allowed: ${Oe}`);continue}}else continue;He.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((Fe=this.linkService.eventBus)==null||Fe.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:ye,name:"ResetForm"}})),!1}}}u=new WeakSet,at=function(){this.container.setAttribute("data-internal-link","")},I=new WeakSet,Mn=function(x,W){x.href=this.linkService.getAnchorUrl(""),x.onclick=()=>(this.linkService.executeSetOCGState(W),!1),O(this,u,at).call(this)};class d extends t{constructor(D){var W,G,se;const x=!!(D.data.popupRef||(W=D.data.titleObj)!=null&&W.str||(G=D.data.contentsObj)!=null&&G.str||(se=D.data.richText)!=null&&se.str);super(D,{isRenderable:x})}render(){this.container.classList.add("textAnnotation");const D=document.createElement("img");return D.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",D.alt="[{{type}} Annotation]",D.dataset.l10nId="text_annotation_type",D.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.popupRef||this._createPopup(),this.container.append(D),this.container}}class p extends t{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(D){var x;this.data.hasOwnCanvas&&(((x=D.previousSibling)==null?void 0:x.nodeName)==="CANVAS"&&(D.previousSibling.hidden=!0),D.hidden=!1)}_getKeyModifier(D){const{isWin:x,isMac:W}=N.FeatureTest.platform;return x&&D.ctrlKey||W&&D.metaKey}_setEventListener(D,x,W,G){x.includes("mouse")?D.addEventListener(x,se=>{var be;(be=this.linkService.eventBus)==null||be.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:W,value:G(se),shift:se.shiftKey,modifier:this._getKeyModifier(se)}})}):D.addEventListener(x,se=>{var be;(be=this.linkService.eventBus)==null||be.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:W,value:G(se)}})})}_setEventListeners(D,x,W){var G;for(const[se,be]of x)(be==="Action"||(G=this.data.actions)!=null&&G[be])&&this._setEventListener(D,se,be,W)}_setBackgroundColor(D){const x=this.data.backgroundColor||null;D.style.backgroundColor=x===null?"transparent":N.Util.makeHexColor(x[0],x[1],x[2])}_setTextStyle(D){const x=["left","center","right"],{fontColor:W}=this.data.defaultAppearanceData,G=this.data.defaultAppearanceData.fontSize||l,se=D.style;let be;const ke=2,$=de=>Math.round(10*de)/10;if(this.data.multiLine){const de=Math.abs(this.data.rect[3]-this.data.rect[1]-ke),ye=Math.round(de/(N.LINE_FACTOR*G))||1,Fe=de/ye;be=Math.min(G,$(Fe/N.LINE_FACTOR))}else{const de=Math.abs(this.data.rect[3]-this.data.rect[1]-ke);be=Math.min(G,$(de/N.LINE_FACTOR))}se.fontSize=`calc(${be}px * var(--scale-factor))`,se.color=N.Util.makeHexColor(W[0],W[1],W[2]),this.data.textAlignment!==null&&(se.textAlign=x[this.data.textAlignment])}_setRequired(D,x){x?D.setAttribute("required",!0):D.removeAttribute("required"),D.setAttribute("aria-required",x)}}class b extends p{constructor(D){const x=D.renderForms||!D.data.hasAppearance&&!!D.data.fieldValue;super(D,{isRenderable:x})}setPropertyOnSiblings(D,x,W,G){const se=this.annotationStorage;for(const be of this._getElementsByName(D.name,D.id))be.domElement&&(be.domElement[x]=W),se.setValue(be.id,{[G]:W})}render(){var G,se;const D=this.annotationStorage,x=this.data.id;this.container.classList.add("textWidgetAnnotation");let W=null;if(this.renderForms){const be=D.getValue(x,{value:this.data.fieldValue});let ke=be.value||"";const $=D.getValue(x,{charLimit:this.data.maxLen}).charLimit;$&&ke.length>$&&(ke=ke.slice(0,$));let de=be.formattedValue||((G=this.data.textContent)==null?void 0:G.join(`
`))||null;de&&this.data.comb&&(de=de.replaceAll(/\s+/g,""));const ye={userValue:ke,formattedValue:de,lastCommittedValue:null,commitKey:1};this.data.multiLine?(W=document.createElement("textarea"),W.textContent=de??ke,this.data.doNotScroll&&(W.style.overflowY="hidden")):(W=document.createElement("input"),W.type="text",W.setAttribute("value",de??ke),this.data.doNotScroll&&(W.style.overflowX="hidden")),this.data.hasOwnCanvas&&(W.hidden=!0),T.add(W),W.setAttribute("data-element-id",x),W.disabled=this.data.readOnly,W.name=this.data.fieldName,W.tabIndex=a,this._setRequired(W,this.data.required),$&&(W.maxLength=$),W.addEventListener("input",Me=>{D.setValue(x,{value:Me.target.value}),this.setPropertyOnSiblings(W,"value",Me.target.value,"value"),ye.formattedValue=null}),W.addEventListener("resetform",Me=>{const Oe=this.data.defaultFieldValue??"";W.value=ye.userValue=Oe,ye.formattedValue=null});let Fe=Me=>{const{formattedValue:Oe}=ye;Oe!=null&&(Me.target.value=Oe),Me.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){W.addEventListener("focus",Oe=>{const{target:He}=Oe;ye.userValue&&(He.value=ye.userValue),ye.lastCommittedValue=He.value,ye.commitKey=1}),W.addEventListener("updatefromsandbox",Oe=>{this.showElementAndHideCanvas(Oe.target);const He={value($e){ye.userValue=$e.detail.value??"",D.setValue(x,{value:ye.userValue.toString()}),$e.target.value=ye.userValue},formattedValue($e){const{formattedValue:qe}=$e.detail;ye.formattedValue=qe,qe!=null&&$e.target!==document.activeElement&&($e.target.value=qe),D.setValue(x,{formattedValue:qe})},selRange($e){$e.target.setSelectionRange(...$e.detail.selRange)},charLimit:$e=>{var Ye;const{charLimit:qe}=$e.detail,{target:Ke}=$e;if(qe===0){Ke.removeAttribute("maxLength");return}Ke.setAttribute("maxLength",qe);let Qe=ye.userValue;!Qe||Qe.length<=qe||(Qe=Qe.slice(0,qe),Ke.value=ye.userValue=Qe,D.setValue(x,{value:Qe}),(Ye=this.linkService.eventBus)==null||Ye.dispatch("dispatcheventinsandbox",{source:this,detail:{id:x,name:"Keystroke",value:Qe,willCommit:!0,commitKey:1,selStart:Ke.selectionStart,selEnd:Ke.selectionEnd}}))}};this._dispatchEventFromSandbox(He,Oe)}),W.addEventListener("keydown",Oe=>{var qe;ye.commitKey=1;let He=-1;if(Oe.key==="Escape"?He=0:Oe.key==="Enter"&&!this.data.multiLine?He=2:Oe.key==="Tab"&&(ye.commitKey=3),He===-1)return;const{value:$e}=Oe.target;ye.lastCommittedValue!==$e&&(ye.lastCommittedValue=$e,ye.userValue=$e,(qe=this.linkService.eventBus)==null||qe.dispatch("dispatcheventinsandbox",{source:this,detail:{id:x,name:"Keystroke",value:$e,willCommit:!0,commitKey:He,selStart:Oe.target.selectionStart,selEnd:Oe.target.selectionEnd}}))});const Me=Fe;Fe=null,W.addEventListener("blur",Oe=>{var $e;if(!Oe.relatedTarget)return;const{value:He}=Oe.target;ye.userValue=He,ye.lastCommittedValue!==He&&(($e=this.linkService.eventBus)==null||$e.dispatch("dispatcheventinsandbox",{source:this,detail:{id:x,name:"Keystroke",value:He,willCommit:!0,commitKey:ye.commitKey,selStart:Oe.target.selectionStart,selEnd:Oe.target.selectionEnd}})),Me(Oe)}),(se=this.data.actions)!=null&&se.Keystroke&&W.addEventListener("beforeinput",Oe=>{var et;ye.lastCommittedValue=null;const{data:He,target:$e}=Oe,{value:qe,selectionStart:Ke,selectionEnd:Qe}=$e;let Ye=Ke,Ze=Qe;switch(Oe.inputType){case"deleteWordBackward":{const Je=qe.substring(0,Ke).match(/\w*[^\w]*$/);Je&&(Ye-=Je[0].length);break}case"deleteWordForward":{const Je=qe.substring(Ke).match(/^[^\w]*\w*/);Je&&(Ze+=Je[0].length);break}case"deleteContentBackward":Ke===Qe&&(Ye-=1);break;case"deleteContentForward":Ke===Qe&&(Ze+=1);break}Oe.preventDefault(),(et=this.linkService.eventBus)==null||et.dispatch("dispatcheventinsandbox",{source:this,detail:{id:x,name:"Keystroke",value:qe,change:He||"",willCommit:!1,selStart:Ye,selEnd:Ze}})}),this._setEventListeners(W,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Oe=>Oe.target.value)}if(Fe&&W.addEventListener("blur",Fe),this.data.comb){const Oe=(this.data.rect[2]-this.data.rect[0])/$;W.classList.add("comb"),W.style.letterSpacing=`calc(${Oe}px * var(--scale-factor) - 1ch)`}}else W=document.createElement("div"),W.textContent=this.data.fieldValue,W.style.verticalAlign="middle",W.style.display="table-cell";return this._setTextStyle(W),this._setBackgroundColor(W),this._setDefaultPropertiesFromJS(W),this.container.append(W),this.container}}class f extends p{constructor(D){super(D,{isRenderable:!!D.data.hasOwnCanvas})}}class m extends p{constructor(D){super(D,{isRenderable:D.renderForms})}render(){const D=this.annotationStorage,x=this.data,W=x.id;let G=D.getValue(W,{value:x.exportValue===x.fieldValue}).value;typeof G=="string"&&(G=G!=="Off",D.setValue(W,{value:G})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const se=document.createElement("input");return T.add(se),se.setAttribute("data-element-id",W),se.disabled=x.readOnly,this._setRequired(se,this.data.required),se.type="checkbox",se.name=x.fieldName,G&&se.setAttribute("checked",!0),se.setAttribute("exportValue",x.exportValue),se.tabIndex=a,se.addEventListener("change",be=>{const{name:ke,checked:$}=be.target;for(const de of this._getElementsByName(ke,W)){const ye=$&&de.exportValue===x.exportValue;de.domElement&&(de.domElement.checked=ye),D.setValue(de.id,{value:ye})}D.setValue(W,{value:$})}),se.addEventListener("resetform",be=>{const ke=x.defaultFieldValue||"Off";be.target.checked=ke===x.exportValue}),this.enableScripting&&this.hasJSActions&&(se.addEventListener("updatefromsandbox",be=>{const ke={value($){$.target.checked=$.detail.value!=="Off",D.setValue(W,{value:$.target.checked})}};this._dispatchEventFromSandbox(ke,be)}),this._setEventListeners(se,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],be=>be.target.checked)),this._setBackgroundColor(se),this._setDefaultPropertiesFromJS(se),this.container.append(se),this.container}}class i extends p{constructor(D){super(D,{isRenderable:D.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const D=this.annotationStorage,x=this.data,W=x.id;let G=D.getValue(W,{value:x.fieldValue===x.buttonValue}).value;typeof G=="string"&&(G=G!==x.buttonValue,D.setValue(W,{value:G}));const se=document.createElement("input");if(T.add(se),se.setAttribute("data-element-id",W),se.disabled=x.readOnly,this._setRequired(se,this.data.required),se.type="radio",se.name=x.fieldName,G&&se.setAttribute("checked",!0),se.tabIndex=a,se.addEventListener("change",be=>{const{name:ke,checked:$}=be.target;for(const de of this._getElementsByName(ke,W))D.setValue(de.id,{value:!1});D.setValue(W,{value:$})}),se.addEventListener("resetform",be=>{const ke=x.defaultFieldValue;be.target.checked=ke!=null&&ke===x.buttonValue}),this.enableScripting&&this.hasJSActions){const be=x.buttonValue;se.addEventListener("updatefromsandbox",ke=>{const $={value:de=>{const ye=be===de.detail.value;for(const Fe of this._getElementsByName(de.target.name)){const Me=ye&&Fe.id===W;Fe.domElement&&(Fe.domElement.checked=Me),D.setValue(Fe.id,{value:Me})}}};this._dispatchEventFromSandbox($,ke)}),this._setEventListeners(se,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],ke=>ke.target.checked)}return this._setBackgroundColor(se),this._setDefaultPropertiesFromJS(se),this.container.append(se),this.container}}class s extends r{constructor(D){super(D,{ignoreBorder:D.data.hasAppearance})}render(){const D=super.render();D.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(D.title=this.data.alternativeText);const x=D.lastChild;return this.enableScripting&&this.hasJSActions&&x&&(this._setDefaultPropertiesFromJS(x),x.addEventListener("updatefromsandbox",W=>{this._dispatchEventFromSandbox({},W)})),D}}class h extends p{constructor(D){super(D,{isRenderable:D.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const D=this.annotationStorage,x=this.data.id,W=D.getValue(x,{value:this.data.fieldValue}),G=document.createElement("select");T.add(G),G.setAttribute("data-element-id",x),G.disabled=this.data.readOnly,this._setRequired(G,this.data.required),G.name=this.data.fieldName,G.tabIndex=a;let se=this.data.combo&&this.data.options.length>0;this.data.combo||(G.size=this.data.options.length,this.data.multiSelect&&(G.multiple=!0)),G.addEventListener("resetform",ye=>{const Fe=this.data.defaultFieldValue;for(const Me of G.options)Me.selected=Me.value===Fe});for(const ye of this.data.options){const Fe=document.createElement("option");Fe.textContent=ye.displayValue,Fe.value=ye.exportValue,W.value.includes(ye.exportValue)&&(Fe.setAttribute("selected",!0),se=!1),G.append(Fe)}let be=null;if(se){const ye=document.createElement("option");ye.value=" ",ye.setAttribute("hidden",!0),ye.setAttribute("selected",!0),G.prepend(ye),be=()=>{ye.remove(),G.removeEventListener("input",be),be=null},G.addEventListener("input",be)}const ke=ye=>{const Fe=ye?"value":"textContent",{options:Me,multiple:Oe}=G;return Oe?Array.prototype.filter.call(Me,He=>He.selected).map(He=>He[Fe]):Me.selectedIndex===-1?null:Me[Me.selectedIndex][Fe]};let $=ke(!1);const de=ye=>{const Fe=ye.target.options;return Array.prototype.map.call(Fe,Me=>({displayValue:Me.textContent,exportValue:Me.value}))};return this.enableScripting&&this.hasJSActions?(G.addEventListener("updatefromsandbox",ye=>{const Fe={value(Me){be==null||be();const Oe=Me.detail.value,He=new Set(Array.isArray(Oe)?Oe:[Oe]);for(const $e of G.options)$e.selected=He.has($e.value);D.setValue(x,{value:ke(!0)}),$=ke(!1)},multipleSelection(Me){G.multiple=!0},remove(Me){const Oe=G.options,He=Me.detail.remove;Oe[He].selected=!1,G.remove(He),Oe.length>0&&Array.prototype.findIndex.call(Oe,qe=>qe.selected)===-1&&(Oe[0].selected=!0),D.setValue(x,{value:ke(!0),items:de(Me)}),$=ke(!1)},clear(Me){for(;G.length!==0;)G.remove(0);D.setValue(x,{value:null,items:[]}),$=ke(!1)},insert(Me){const{index:Oe,displayValue:He,exportValue:$e}=Me.detail.insert,qe=G.children[Oe],Ke=document.createElement("option");Ke.textContent=He,Ke.value=$e,qe?qe.before(Ke):G.append(Ke),D.setValue(x,{value:ke(!0),items:de(Me)}),$=ke(!1)},items(Me){const{items:Oe}=Me.detail;for(;G.length!==0;)G.remove(0);for(const He of Oe){const{displayValue:$e,exportValue:qe}=He,Ke=document.createElement("option");Ke.textContent=$e,Ke.value=qe,G.append(Ke)}G.options.length>0&&(G.options[0].selected=!0),D.setValue(x,{value:ke(!0),items:de(Me)}),$=ke(!1)},indices(Me){const Oe=new Set(Me.detail.indices);for(const He of Me.target.options)He.selected=Oe.has(He.index);D.setValue(x,{value:ke(!0)}),$=ke(!1)},editable(Me){Me.target.disabled=!Me.detail.editable}};this._dispatchEventFromSandbox(Fe,ye)}),G.addEventListener("input",ye=>{var Me;const Fe=ke(!0);D.setValue(x,{value:Fe}),ye.preventDefault(),(Me=this.linkService.eventBus)==null||Me.dispatch("dispatcheventinsandbox",{source:this,detail:{id:x,name:"Keystroke",value:$,changeEx:Fe,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(G,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],ye=>ye.target.value)):G.addEventListener("input",function(ye){D.setValue(x,{value:ke(!0)})}),this.data.combo&&this._setTextStyle(G),this._setBackgroundColor(G),this._setDefaultPropertiesFromJS(G),this.container.append(G),this.container}}class c extends t{constructor(D){var se,be,ke;const{data:x,elements:W}=D,G=!!((se=x.titleObj)!=null&&se.str||(be=x.contentsObj)!=null&&be.str||(ke=x.richText)!=null&&ke.str);super(D,{isRenderable:G}),this.elements=W}render(){this.container.classList.add("popupAnnotation");const D=new o({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),x=[];for(const W of this.elements)W.popup=D,x.push(W.data.id),W.addHighlightArea();return this.container.setAttribute("aria-controls",x.join(",")),this.container}}class o{constructor({container:D,color:x,elements:W,titleObj:G,modificationDate:se,contentsObj:be,richText:ke,parent:$,rect:de,parentRect:ye,open:Fe}){M(this,Ie);M(this,ze);M(this,Ne);M(this,Y,null);M(this,te,O(this,Ne,bi).bind(this));M(this,Se,O(this,ze,mi).bind(this));M(this,ge,O(this,Ie,gi).bind(this));M(this,ne,null);M(this,ce,null);M(this,Ee,null);M(this,me,null);M(this,xe,null);M(this,De,null);M(this,Ae,!1);M(this,Ve,null);M(this,oe,null);M(this,Q,null);M(this,le,null);M(this,ue,!1);J(this,ce,D),J(this,le,G),J(this,Ee,be),J(this,Q,ke),J(this,xe,$),J(this,ne,x),J(this,oe,de),J(this,De,ye),J(this,me,W);const Me=Z.PDFDateString.toDateObject(se);Me&&J(this,Y,$.l10n.get("annotation_date_string",{date:Me.toLocaleDateString(),time:Me.toLocaleTimeString()})),this.trigger=W.flatMap(Oe=>Oe.getElementsToTriggerPopup());for(const Oe of this.trigger)Oe.addEventListener("click",e(this,ge)),Oe.addEventListener("mouseenter",e(this,Se)),Oe.addEventListener("mouseleave",e(this,te));e(this,ce).hidden=!0,Fe&&O(this,Ie,gi).call(this)}render(){if(e(this,Ve))return;const{page:{view:D},viewport:{rawDims:{pageWidth:x,pageHeight:W,pageX:G,pageY:se}}}=e(this,xe),be=J(this,Ve,document.createElement("div"));if(be.className="popup",e(this,ne)){const Ye=be.style.outlineColor=N.Util.makeHexColor(...e(this,ne));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?be.style.backgroundColor=`color-mix(in srgb, ${Ye} 30%, white)`:be.style.backgroundColor=N.Util.makeHexColor(...e(this,ne).map(et=>Math.floor(.7*(255-et)+et)))}const ke=document.createElement("span");ke.className="header";const $=document.createElement("h1");if(ke.append($),{dir:$.dir,str:$.textContent}=e(this,le),be.append(ke),e(this,Y)){const Ye=document.createElement("span");Ye.classList.add("popupDate"),e(this,Y).then(Ze=>{Ye.textContent=Ze}),ke.append(Ye)}const de=e(this,Ee),ye=e(this,Q);if(ye!=null&&ye.str&&(!(de!=null&&de.str)||de.str===ye.str))P.XfaLayer.render({xfaHtml:ye.html,intent:"richText",div:be}),be.lastChild.classList.add("richText","popupContent");else{const Ye=this._formatContents(de);be.append(Ye)}let Fe=!!e(this,De),Me=Fe?e(this,De):e(this,oe);for(const Ye of e(this,me))if(!Me||N.Util.intersect(Ye.data.rect,Me)!==null){Me=Ye.data.rect,Fe=!0;break}const Oe=N.Util.normalizeRect([Me[0],D[3]-Me[1]+D[1],Me[2],D[3]-Me[3]+D[1]]),He=5,$e=Fe?Me[2]-Me[0]+He:0,qe=Oe[0]+$e,Ke=Oe[1],{style:Qe}=e(this,ce);Qe.left=`${100*(qe-G)/x}%`,Qe.top=`${100*(Ke-se)/W}%`,e(this,ce).append(be)}_formatContents({str:D,dir:x}){const W=document.createElement("p");W.classList.add("popupContent"),W.dir=x;const G=D.split(/(?:\r\n?|\n)/);for(let se=0,be=G.length;se<be;++se){const ke=G[se];W.append(document.createTextNode(ke)),se<be-1&&W.append(document.createElement("br"))}return W}forceHide(){J(this,ue,this.isVisible),e(this,ue)&&(e(this,ce).hidden=!0)}maybeShow(){e(this,ue)&&(J(this,ue,!1),e(this,ce).hidden=!1)}get isVisible(){return e(this,ce).hidden===!1}}Y=new WeakMap,te=new WeakMap,Se=new WeakMap,ge=new WeakMap,ne=new WeakMap,ce=new WeakMap,Ee=new WeakMap,me=new WeakMap,xe=new WeakMap,De=new WeakMap,Ae=new WeakMap,Ve=new WeakMap,oe=new WeakMap,Q=new WeakMap,le=new WeakMap,ue=new WeakMap,Ie=new WeakSet,gi=function(){J(this,Ae,!e(this,Ae)),e(this,Ae)?(O(this,ze,mi).call(this),e(this,ce).addEventListener("click",e(this,ge))):(O(this,Ne,bi).call(this),e(this,ce).removeEventListener("click",e(this,ge)))},ze=new WeakSet,mi=function(){e(this,Ve)||this.render(),this.isVisible?e(this,Ae)&&e(this,ce).classList.add("focused"):(e(this,ce).hidden=!1,e(this,ce).style.zIndex=parseInt(e(this,ce).style.zIndex)+1e3)},Ne=new WeakSet,bi=function(){e(this,ce).classList.remove("focused"),!(e(this,Ae)||!this.isVisible)&&(e(this,ce).hidden=!0,e(this,ce).style.zIndex=parseInt(e(this,ce).style.zIndex)-1e3)};class v extends t{constructor(D){var W,G,se;const x=!!(D.data.popupRef||(W=D.data.titleObj)!=null&&W.str||(G=D.data.contentsObj)!=null&&G.str||(se=D.data.richText)!=null&&se.str);super(D,{isRenderable:x,ignoreBorder:!0}),this.textContent=D.data.textContent,this.textPosition=D.data.textPosition,this.annotationEditorType=N.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const D=document.createElement("div");D.classList.add("annotationTextContent"),D.setAttribute("role","comment");for(const x of this.textContent){const W=document.createElement("span");W.textContent=x,D.append(W)}this.container.append(D)}return this.data.popupRef||this._createPopup(),this._editOnDoubleClick(),this.container}}H.FreeTextAnnotationElement=v;class w extends t{constructor(x){var G,se,be;const W=!!(x.data.popupRef||(G=x.data.titleObj)!=null&&G.str||(se=x.data.contentsObj)!=null&&se.str||(be=x.data.richText)!=null&&be.str);super(x,{isRenderable:W,ignoreBorder:!0});M(this,Xe,null)}render(){this.container.classList.add("lineAnnotation");const x=this.data,{width:W,height:G}=y(x.rect),se=this.svgFactory.create(W,G,!0),be=J(this,Xe,this.svgFactory.createElement("svg:line"));return be.setAttribute("x1",x.rect[2]-x.lineCoordinates[0]),be.setAttribute("y1",x.rect[3]-x.lineCoordinates[1]),be.setAttribute("x2",x.rect[2]-x.lineCoordinates[2]),be.setAttribute("y2",x.rect[3]-x.lineCoordinates[3]),be.setAttribute("stroke-width",x.borderStyle.width||1),be.setAttribute("stroke","transparent"),be.setAttribute("fill","transparent"),se.append(be),this.container.append(se),x.popupRef||this._createPopup(),this.container}getElementsToTriggerPopup(){return e(this,Xe)}addHighlightArea(){this.container.classList.add("highlightArea")}}Xe=new WeakMap;class B extends t{constructor(x){var G,se,be;const W=!!(x.data.popupRef||(G=x.data.titleObj)!=null&&G.str||(se=x.data.contentsObj)!=null&&se.str||(be=x.data.richText)!=null&&be.str);super(x,{isRenderable:W,ignoreBorder:!0});M(this,We,null)}render(){this.container.classList.add("squareAnnotation");const x=this.data,{width:W,height:G}=y(x.rect),se=this.svgFactory.create(W,G,!0),be=x.borderStyle.width,ke=J(this,We,this.svgFactory.createElement("svg:rect"));return ke.setAttribute("x",be/2),ke.setAttribute("y",be/2),ke.setAttribute("width",W-be),ke.setAttribute("height",G-be),ke.setAttribute("stroke-width",be||1),ke.setAttribute("stroke","transparent"),ke.setAttribute("fill","transparent"),se.append(ke),this.container.append(se),x.popupRef||this._createPopup(),this.container}getElementsToTriggerPopup(){return e(this,We)}addHighlightArea(){this.container.classList.add("highlightArea")}}We=new WeakMap;class K extends t{constructor(x){var G,se,be;const W=!!(x.data.popupRef||(G=x.data.titleObj)!=null&&G.str||(se=x.data.contentsObj)!=null&&se.str||(be=x.data.richText)!=null&&be.str);super(x,{isRenderable:W,ignoreBorder:!0});M(this,Le,null)}render(){this.container.classList.add("circleAnnotation");const x=this.data,{width:W,height:G}=y(x.rect),se=this.svgFactory.create(W,G,!0),be=x.borderStyle.width,ke=J(this,Le,this.svgFactory.createElement("svg:ellipse"));return ke.setAttribute("cx",W/2),ke.setAttribute("cy",G/2),ke.setAttribute("rx",W/2-be/2),ke.setAttribute("ry",G/2-be/2),ke.setAttribute("stroke-width",be||1),ke.setAttribute("stroke","transparent"),ke.setAttribute("fill","transparent"),se.append(ke),this.container.append(se),x.popupRef||this._createPopup(),this.container}getElementsToTriggerPopup(){return e(this,Le)}addHighlightArea(){this.container.classList.add("highlightArea")}}Le=new WeakMap;class C extends t{constructor(x){var G,se,be;const W=!!(x.data.popupRef||(G=x.data.titleObj)!=null&&G.str||(se=x.data.contentsObj)!=null&&se.str||(be=x.data.richText)!=null&&be.str);super(x,{isRenderable:W,ignoreBorder:!0});M(this,_,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const x=this.data,{width:W,height:G}=y(x.rect),se=this.svgFactory.create(W,G,!0);let be=[];for(const $ of x.vertices){const de=$.x-x.rect[0],ye=x.rect[3]-$.y;be.push(de+","+ye)}be=be.join(" ");const ke=J(this,_,this.svgFactory.createElement(this.svgElementName));return ke.setAttribute("points",be),ke.setAttribute("stroke-width",x.borderStyle.width||1),ke.setAttribute("stroke","transparent"),ke.setAttribute("fill","transparent"),se.append(ke),this.container.append(se),x.popupRef||this._createPopup(ke,x),this.container}getElementsToTriggerPopup(){return e(this,_)}addHighlightArea(){this.container.classList.add("highlightArea")}}_=new WeakMap;class V extends C{constructor(D){super(D),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class q extends t{constructor(D){var W,G,se;const x=!!(D.data.popupRef||(W=D.data.titleObj)!=null&&W.str||(G=D.data.contentsObj)!=null&&G.str||(se=D.data.richText)!=null&&se.str);super(D,{isRenderable:x,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),this.data.popupRef||this._createPopup(),this.container}}class X extends t{constructor(x){var G,se,be;const W=!!(x.data.popupRef||(G=x.data.titleObj)!=null&&G.str||(se=x.data.contentsObj)!=null&&se.str||(be=x.data.richText)!=null&&be.str);super(x,{isRenderable:W,ignoreBorder:!0});M(this,z,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=N.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const x=this.data,{width:W,height:G}=y(x.rect),se=this.svgFactory.create(W,G,!0);for(const be of x.inkLists){let ke=[];for(const de of be){const ye=de.x-x.rect[0],Fe=x.rect[3]-de.y;ke.push(`${ye},${Fe}`)}ke=ke.join(" ");const $=this.svgFactory.createElement(this.svgElementName);e(this,z).push($),$.setAttribute("points",ke),$.setAttribute("stroke-width",x.borderStyle.width||1),$.setAttribute("stroke","transparent"),$.setAttribute("fill","transparent"),x.popupRef||this._createPopup($,x),se.append($)}return this.container.append(se),this.container}getElementsToTriggerPopup(){return e(this,z)}addHighlightArea(){this.container.classList.add("highlightArea")}}z=new WeakMap,H.InkAnnotationElement=X;class E extends t{constructor(D){var W,G,se;const x=!!(D.data.popupRef||(W=D.data.titleObj)!=null&&W.str||(G=D.data.contentsObj)!=null&&G.str||(se=D.data.richText)!=null&&se.str);super(D,{isRenderable:x,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.popupRef||this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class F extends t{constructor(D){var W,G,se;const x=!!(D.data.popupRef||(W=D.data.titleObj)!=null&&W.str||(G=D.data.contentsObj)!=null&&G.str||(se=D.data.richText)!=null&&se.str);super(D,{isRenderable:x,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.popupRef||this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class k extends t{constructor(D){var W,G,se;const x=!!(D.data.popupRef||(W=D.data.titleObj)!=null&&W.str||(G=D.data.contentsObj)!=null&&G.str||(se=D.data.richText)!=null&&se.str);super(D,{isRenderable:x,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.popupRef||this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class ie extends t{constructor(D){var W,G,se;const x=!!(D.data.popupRef||(W=D.data.titleObj)!=null&&W.str||(G=D.data.contentsObj)!=null&&G.str||(se=D.data.richText)!=null&&se.str);super(D,{isRenderable:x,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.popupRef||this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class _e extends t{constructor(D){var W,G,se;const x=!!(D.data.popupRef||(W=D.data.titleObj)!=null&&W.str||(G=D.data.contentsObj)!=null&&G.str||(se=D.data.richText)!=null&&se.str);super(D,{isRenderable:x,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),this.data.popupRef||this._createPopup(),this.container}}H.StampAnnotationElement=_e;class R extends t{constructor(x){var se;super(x,{isRenderable:!0});M(this,fe,null);const{filename:W,content:G}=this.data.file;this.filename=(0,Z.getFilenameFromUrl)(W,!0),this.content=G,(se=this.linkService.eventBus)==null||se.dispatch("fileattachmentannotation",{source:this,filename:W,content:G})}render(){var G,se;this.container.classList.add("fileAttachmentAnnotation");const{data:x}=this;let W;return x.hasAppearance||x.fillAlpha===0?W=document.createElement("div"):(W=document.createElement("img"),W.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(x.name)?"paperclip":"pushpin"}.svg`,x.fillAlpha&&x.fillAlpha<1&&(W.style=`filter: opacity(${Math.round(x.fillAlpha*100)}%);`)),W.classList.add("popupTriggerArea"),W.addEventListener("dblclick",this._download.bind(this)),J(this,fe,W),!x.popupRef&&((G=x.titleObj)!=null&&G.str||(se=x.contentsObj)!=null&&se.str||x.richText)&&this._createPopup(),this.container.append(W),this.container}getElementsToTriggerPopup(){return e(this,fe)}addHighlightArea(){this.container.classList.add("highlightArea")}_download(){var x;(x=this.downloadManager)==null||x.openOrDownloadData(this.container,this.content,this.filename)}}fe=new WeakMap;class g{constructor({div:D,accessibilityManager:x,annotationCanvasMap:W,l10n:G,page:se,viewport:be}){M(this,ve);M(this,pe);M(this,ee,null);M(this,he,null);M(this,re,new Map);this.div=D,J(this,ee,x),J(this,he,W),this.l10n=G,this.page=se,this.viewport=be,this.zIndex=0,this.l10n||(this.l10n=A.NullL10n)}async render(D){const{annotations:x}=D,W=this.div;(0,Z.setLayerDimensions)(W,this.viewport);const G=new Map,se={data:null,layer:W,linkService:D.linkService,downloadManager:D.downloadManager,imageResourcesPath:D.imageResourcesPath||"",renderForms:D.renderForms!==!1,svgFactory:new Z.DOMSVGFactory,annotationStorage:D.annotationStorage||new Pe.AnnotationStorage,enableScripting:D.enableScripting===!0,hasJSActions:D.hasJSActions,fieldObjects:D.fieldObjects,parent:this,elements:null};for(const be of x){if(be.noHTML)continue;const ke=be.annotationType===N.AnnotationType.POPUP;if(ke){const ye=G.get(be.id);if(!ye)continue;se.elements=ye}else{const{width:ye,height:Fe}=y(be.rect);if(ye<=0||Fe<=0)continue}se.data=be;const $=S.create(se);if(!$.isRenderable)continue;if(!ke&&be.popupRef){const ye=G.get(be.popupRef);ye?ye.push($):G.set(be.popupRef,[$])}$.annotationEditorType>0&&e(this,re).set($.data.id,$);const de=$.render();be.hidden&&(de.style.visibility="hidden"),O(this,ve,Ln).call(this,de,be.id)}O(this,pe,_i).call(this),await this.l10n.translate(W)}update({viewport:D}){const x=this.div;this.viewport=D,(0,Z.setLayerDimensions)(x,{rotation:D.rotation}),O(this,pe,_i).call(this),x.hidden=!1}getEditableAnnotations(){return Array.from(e(this,re).values())}getEditableAnnotation(D){return e(this,re).get(D)}}ee=new WeakMap,he=new WeakMap,re=new WeakMap,ve=new WeakSet,Ln=function(D,x){var G;const W=D.firstChild||D;W.id=`${Z.AnnotationPrefix}${x}`,this.div.append(D),(G=e(this,ee))==null||G.moveElementInDOM(this.div,D,W,!1)},pe=new WeakSet,_i=function(){if(!e(this,he))return;const D=this.div;for(const[x,W]of e(this,he)){const G=D.querySelector(`[data-annotation-id="${x}"]`);if(!G)continue;const{firstChild:se}=G;se?se.nodeName==="CANVAS"?se.replaceWith(W):se.before(W):G.append(W)}e(this,he).clear()},H.AnnotationLayer=g},(Be,H)=>{Object.defineProperty(H,"__esModule",{value:!0}),H.ColorConverters=void 0;function Te(Pe){return Math.floor(Math.max(0,Math.min(1,Pe))*255).toString(16).padStart(2,"0")}function N(Pe){return Math.max(0,Math.min(255,255*Pe))}class Z{static CMYK_G([ae,A,P,a]){return["G",1-Math.min(1,.3*ae+.59*P+.11*A+a)]}static G_CMYK([ae]){return["CMYK",0,0,0,1-ae]}static G_RGB([ae]){return["RGB",ae,ae,ae]}static G_rgb([ae]){return ae=N(ae),[ae,ae,ae]}static G_HTML([ae]){const A=Te(ae);return`#${A}${A}${A}`}static RGB_G([ae,A,P]){return["G",.3*ae+.59*A+.11*P]}static RGB_rgb(ae){return ae.map(N)}static RGB_HTML(ae){return`#${ae.map(Te).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([ae,A,P,a]){return["RGB",1-Math.min(1,ae+a),1-Math.min(1,P+a),1-Math.min(1,A+a)]}static CMYK_rgb([ae,A,P,a]){return[N(1-Math.min(1,ae+a)),N(1-Math.min(1,P+a)),N(1-Math.min(1,A+a))]}static CMYK_HTML(ae){const A=this.CMYK_RGB(ae).slice(1);return this.RGB_HTML(A)}static RGB_CMYK([ae,A,P]){const a=1-ae,l=1-A,T=1-P,y=Math.min(a,l,T);return["CMYK",a,l,T,y]}}H.ColorConverters=Z},(Be,H)=>{Object.defineProperty(H,"__esModule",{value:!0}),H.NullL10n=void 0,H.getL10nFallback=N;const Te={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} × {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} × {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing…",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image"};Te.print_progress_percent="{{progress}}%";function N(ae,A){switch(ae){case"find_match_count":ae=`find_match_count[${A.total===1?"one":"other"}]`;break;case"find_match_count_limit":ae=`find_match_count_limit[${A.limit===1?"one":"other"}]`;break}return Te[ae]||""}function Z(ae,A){return A?ae.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(P,a)=>a in A?A[a]:"{{"+a+"}}"):ae}const Pe={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(ae,A=null,P=N(ae,A)){return Z(P,A)},async translate(ae){}};H.NullL10n=Pe},(Be,H,Te)=>{Object.defineProperty(H,"__esModule",{value:!0}),H.XfaLayer=void 0;var N=Te(25);class Z{static setupStorage(ae,A,P,a,l){const T=a.getValue(A,{value:null});switch(P.name){case"textarea":if(T.value!==null&&(ae.textContent=T.value),l==="print")break;ae.addEventListener("input",y=>{a.setValue(A,{value:y.target.value})});break;case"input":if(P.attributes.type==="radio"||P.attributes.type==="checkbox"){if(T.value===P.attributes.xfaOn?ae.setAttribute("checked",!0):T.value===P.attributes.xfaOff&&ae.removeAttribute("checked"),l==="print")break;ae.addEventListener("change",y=>{a.setValue(A,{value:y.target.checked?y.target.getAttribute("xfaOn"):y.target.getAttribute("xfaOff")})})}else{if(T.value!==null&&ae.setAttribute("value",T.value),l==="print")break;ae.addEventListener("input",y=>{a.setValue(A,{value:y.target.value})})}break;case"select":if(T.value!==null){ae.setAttribute("value",T.value);for(const y of P.children)y.attributes.value===T.value?y.attributes.selected=!0:y.attributes.hasOwnProperty("selected")&&delete y.attributes.selected}ae.addEventListener("input",y=>{const S=y.target.options,t=S.selectedIndex===-1?"":S[S.selectedIndex].value;a.setValue(A,{value:t})});break}}static setAttributes({html:ae,element:A,storage:P=null,intent:a,linkService:l}){const{attributes:T}=A,y=ae instanceof HTMLAnchorElement;T.type==="radio"&&(T.name=`${T.name}-${a}`);for(const[S,t]of Object.entries(T))if(t!=null)switch(S){case"class":t.length&&ae.setAttribute(S,t.join(" "));break;case"dataId":break;case"id":ae.setAttribute("data-element-id",t);break;case"style":Object.assign(ae.style,t);break;case"textContent":ae.textContent=t;break;default:(!y||S!=="href"&&S!=="newWindow")&&ae.setAttribute(S,t)}y&&l.addLinkAttributes(ae,T.href,T.newWindow),P&&T.dataId&&this.setupStorage(ae,T.dataId,A,P)}static render(ae){var r;const A=ae.annotationStorage,P=ae.linkService,a=ae.xfaHtml,l=ae.intent||"display",T=document.createElement(a.name);a.attributes&&this.setAttributes({html:T,element:a,intent:l,linkService:P});const y=[[a,-1,T]],S=ae.div;if(S.append(T),ae.viewport){const d=`matrix(${ae.viewport.transform.join(",")})`;S.style.transform=d}l!=="richText"&&S.setAttribute("class","xfaLayer xfaFont");const t=[];for(;y.length>0;){const[d,p,b]=y.at(-1);if(p+1===d.children.length){y.pop();continue}const f=d.children[++y.at(-1)[1]];if(f===null)continue;const{name:m}=f;if(m==="#text"){const s=document.createTextNode(f.value);t.push(s),b.append(s);continue}const i=(r=f==null?void 0:f.attributes)!=null&&r.xmlns?document.createElementNS(f.attributes.xmlns,m):document.createElement(m);if(b.append(i),f.attributes&&this.setAttributes({html:i,element:f,storage:A,intent:l,linkService:P}),f.children&&f.children.length>0)y.push([f,-1,i]);else if(f.value){const s=document.createTextNode(f.value);N.XfaText.shouldBuildText(m)&&t.push(s),i.append(s)}}for(const d of S.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))d.setAttribute("readOnly",!0);return{textDivs:t}}static update(ae){const A=`matrix(${ae.viewport.transform.join(",")})`;ae.div.style.transform=A,ae.div.hidden=!1}}H.XfaLayer=Z},(Be,H,Te)=>{var P,a,l,T,y,S,t,r,d,p,b,f,m,i,s,h,xn,o,Rn,w,kn,K,In,V,vi,X,Fn,F,wi,ie,On,R,Dn,n,Nn,L,Bn,j,Vn,te,nt,ge,yi,ce,Dt,me,Nt,De,ct,Ve,Si,Q,Bt,ue,Un,Re,Ei,je,Hn,Ue,zn,We,Ai,_,Vt,fe,ht;Object.defineProperty(H,"__esModule",{value:!0}),H.InkEditor=void 0;var N=Te(1),Z=Te(4),Pe=Te(29),ae=Te(5);const he=class extends Z.AnnotationEditor{constructor(U){super({...U,name:"inkEditor"});M(this,h);M(this,o);M(this,w);M(this,K);M(this,V);M(this,X);M(this,F);M(this,ie);M(this,R);M(this,n);M(this,L);M(this,j);M(this,te);M(this,ge);M(this,ce);M(this,me);M(this,De);M(this,Ve);M(this,Q);M(this,Ue);M(this,We);M(this,_);M(this,fe);M(this,P,0);M(this,a,0);M(this,l,this.canvasContextMenu.bind(this));M(this,T,this.canvasPointermove.bind(this));M(this,y,this.canvasPointerleave.bind(this));M(this,S,this.canvasPointerup.bind(this));M(this,t,this.canvasPointerdown.bind(this));M(this,r,new Path2D);M(this,d,!1);M(this,p,!1);M(this,b,!1);M(this,f,null);M(this,m,0);M(this,i,0);M(this,s,null);this.color=U.color||null,this.thickness=U.thickness||null,this.opacity=U.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(U){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink2_aria_label"].map(pe=>[pe,U.get(pe)]))}static updateDefaultParams(U,pe){switch(U){case N.AnnotationEditorParamsType.INK_THICKNESS:he._defaultThickness=pe;break;case N.AnnotationEditorParamsType.INK_COLOR:he._defaultColor=pe;break;case N.AnnotationEditorParamsType.INK_OPACITY:he._defaultOpacity=pe/100;break}}updateParams(U,pe){switch(U){case N.AnnotationEditorParamsType.INK_THICKNESS:O(this,h,xn).call(this,pe);break;case N.AnnotationEditorParamsType.INK_COLOR:O(this,o,Rn).call(this,pe);break;case N.AnnotationEditorParamsType.INK_OPACITY:O(this,w,kn).call(this,pe);break}}static get defaultPropertiesToUpdate(){return[[N.AnnotationEditorParamsType.INK_THICKNESS,he._defaultThickness],[N.AnnotationEditorParamsType.INK_COLOR,he._defaultColor||Z.AnnotationEditor._defaultLineColor],[N.AnnotationEditorParamsType.INK_OPACITY,Math.round(he._defaultOpacity*100)]]}get propertiesToUpdate(){return[[N.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||he._defaultThickness],[N.AnnotationEditorParamsType.INK_COLOR,this.color||he._defaultColor||Z.AnnotationEditor._defaultLineColor],[N.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??he._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(O(this,ce,Dt).call(this),O(this,me,Nt).call(this)),this.isAttachedToDOM||(this.parent.add(this),O(this,De,ct).call(this)),O(this,fe,ht).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,e(this,f).disconnect(),J(this,f,null),super.remove())}setParent(U){!this.parent&&U?this._uiManager.removeShouldRescale(this):this.parent&&U===null&&this._uiManager.addShouldRescale(this),super.setParent(U)}onScaleChanging(){const[U,pe]=this.parentDimensions,Ce=this.width*U,we=this.height*pe;this.setDimensions(Ce,we)}enableEditMode(){e(this,d)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",e(this,t)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",e(this,t)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){e(this,d)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),J(this,d,!0),this.div.classList.add("disabled"),O(this,fe,ht).call(this,!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(U){this._focusEventsAllowed&&(super.focusin(U),this.enableEditMode())}canvasPointerdown(U){U.button!==0||!this.isInEditMode()||e(this,d)||(this.setInForeground(),U.preventDefault(),U.type!=="mouse"&&this.div.focus(),O(this,X,Fn).call(this,U.offsetX,U.offsetY))}canvasContextMenu(U){U.preventDefault()}canvasPointermove(U){U.preventDefault(),O(this,F,wi).call(this,U.offsetX,U.offsetY)}canvasPointerup(U){U.preventDefault(),O(this,ge,yi).call(this,U)}canvasPointerleave(U){O(this,ge,yi).call(this,U)}get isResizable(){return!this.isEmpty()&&e(this,d)}render(){if(this.div)return this.div;let U,pe;this.width&&(U=this.x,pe=this.y),super.render(),he._l10nPromise.get("editor_ink2_aria_label").then(W=>{var G;return(G=this.div)==null?void 0:G.setAttribute("aria-label",W)});const[Ce,we,D,x]=O(this,K,In).call(this);if(this.setAt(Ce,we,0,0),this.setDims(D,x),O(this,ce,Dt).call(this),this.width){const[W,G]=this.parentDimensions;this.setAspectRatio(this.width*W,this.height*G),this.setAt(U*W,pe*G,this.width*W,this.height*G),J(this,b,!0),O(this,De,ct).call(this),this.setDims(this.width*W,this.height*G),O(this,te,nt).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return O(this,me,Nt).call(this),this.div}setDimensions(U,pe){const Ce=Math.round(U),we=Math.round(pe);if(e(this,m)===Ce&&e(this,i)===we)return;J(this,m,Ce),J(this,i,we),this.canvas.style.visibility="hidden";const[D,x]=this.parentDimensions;this.width=U/D,this.height=pe/x,this.fixAndSetPosition(),e(this,d)&&O(this,Ve,Si).call(this,U,pe),O(this,De,ct).call(this),O(this,te,nt).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(U,pe,Ce){var Fe,Me,Oe;if(U instanceof Pe.InkAnnotationElement)return null;const we=super.deserialize(U,pe,Ce);we.thickness=U.thickness,we.color=N.Util.makeHexColor(...U.color),we.opacity=U.opacity;const[D,x]=we.pageDimensions,W=we.width*D,G=we.height*x,se=we.parentScale,be=U.thickness/2;J(we,d,!0),J(we,m,Math.round(W)),J(we,i,Math.round(G));const{paths:ke,rect:$,rotation:de}=U;for(let{bezier:He}of ke){He=O(Fe=he,je,Hn).call(Fe,He,$,de);const $e=[];we.paths.push($e);let qe=se*(He[0]-be),Ke=se*(He[1]-be);for(let Ye=2,Ze=He.length;Ye<Ze;Ye+=6){const et=se*(He[Ye]-be),Je=se*(He[Ye+1]-be),tt=se*(He[Ye+2]-be),Ks=se*(He[Ye+3]-be),on=se*(He[Ye+4]-be),ln=se*(He[Ye+5]-be);$e.push([[qe,Ke],[et,Je],[tt,Ks],[on,ln]]),qe=on,Ke=ln}const Qe=O(this,ue,Un).call(this,$e);we.bezierPath2D.push(Qe)}const ye=O(Me=we,We,Ai).call(Me);return J(we,a,Math.max(Z.AnnotationEditor.MIN_SIZE,ye[2]-ye[0])),J(we,P,Math.max(Z.AnnotationEditor.MIN_SIZE,ye[3]-ye[1])),O(Oe=we,Ve,Si).call(Oe,W,G),we}serialize(){if(this.isEmpty())return null;const U=this.getRect(0,0),pe=Z.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:N.AnnotationEditorType.INK,color:pe,thickness:this.thickness,opacity:this.opacity,paths:O(this,Ue,zn).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,U),pageIndex:this.pageIndex,rect:U,rotation:this.rotation}}};let A=he;P=new WeakMap,a=new WeakMap,l=new WeakMap,T=new WeakMap,y=new WeakMap,S=new WeakMap,t=new WeakMap,r=new WeakMap,d=new WeakMap,p=new WeakMap,b=new WeakMap,f=new WeakMap,m=new WeakMap,i=new WeakMap,s=new WeakMap,h=new WeakSet,xn=function(U){const pe=this.thickness;this.addCommands({cmd:()=>{this.thickness=U,O(this,fe,ht).call(this)},undo:()=>{this.thickness=pe,O(this,fe,ht).call(this)},mustExec:!0,type:N.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},o=new WeakSet,Rn=function(U){const pe=this.color;this.addCommands({cmd:()=>{this.color=U,O(this,te,nt).call(this)},undo:()=>{this.color=pe,O(this,te,nt).call(this)},mustExec:!0,type:N.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},w=new WeakSet,kn=function(U){U/=100;const pe=this.opacity;this.addCommands({cmd:()=>{this.opacity=U,O(this,te,nt).call(this)},undo:()=>{this.opacity=pe,O(this,te,nt).call(this)},mustExec:!0,type:N.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},K=new WeakSet,In=function(){const{parentRotation:U,parentDimensions:[pe,Ce]}=this;switch(U){case 90:return[0,Ce,Ce,pe];case 180:return[pe,Ce,pe,Ce];case 270:return[pe,0,Ce,pe];default:return[0,0,pe,Ce]}},V=new WeakSet,vi=function(){const{ctx:U,color:pe,opacity:Ce,thickness:we,parentScale:D,scaleFactor:x}=this;U.lineWidth=we*D/x,U.lineCap="round",U.lineJoin="round",U.miterLimit=10,U.strokeStyle=`${pe}${(0,ae.opacityToHex)(Ce)}`},X=new WeakSet,Fn=function(U,pe){this.canvas.addEventListener("contextmenu",e(this,l)),this.canvas.addEventListener("pointerleave",e(this,y)),this.canvas.addEventListener("pointermove",e(this,T)),this.canvas.addEventListener("pointerup",e(this,S)),this.canvas.removeEventListener("pointerdown",e(this,t)),this.isEditing=!0,e(this,b)||(J(this,b,!0),O(this,De,ct).call(this),this.thickness||(this.thickness=he._defaultThickness),this.color||(this.color=he._defaultColor||Z.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=he._defaultOpacity)),this.currentPath.push([U,pe]),J(this,p,!1),O(this,V,vi).call(this),J(this,s,()=>{O(this,n,Nn).call(this),e(this,s)&&window.requestAnimationFrame(e(this,s))}),window.requestAnimationFrame(e(this,s))},F=new WeakSet,wi=function(U,pe){const[Ce,we]=this.currentPath.at(-1);if(this.currentPath.length>1&&U===Ce&&pe===we)return;const D=this.currentPath;let x=e(this,r);if(D.push([U,pe]),J(this,p,!0),D.length<=2){x.moveTo(...D[0]),x.lineTo(U,pe);return}D.length===3&&(J(this,r,x=new Path2D),x.moveTo(...D[0])),O(this,L,Bn).call(this,x,...D.at(-3),...D.at(-2),U,pe)},ie=new WeakSet,On=function(){if(this.currentPath.length===0)return;const U=this.currentPath.at(-1);e(this,r).lineTo(...U)},R=new WeakSet,Dn=function(U,pe){J(this,s,null),U=Math.min(Math.max(U,0),this.canvas.width),pe=Math.min(Math.max(pe,0),this.canvas.height),O(this,F,wi).call(this,U,pe),O(this,ie,On).call(this);let Ce;if(this.currentPath.length!==1)Ce=O(this,j,Vn).call(this);else{const G=[U,pe];Ce=[[G,G.slice(),G.slice(),G]]}const we=e(this,r),D=this.currentPath;this.currentPath=[],J(this,r,new Path2D);const x=()=>{this.allRawPaths.push(D),this.paths.push(Ce),this.bezierPath2D.push(we),this.rebuild()},W=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(O(this,ce,Dt).call(this),O(this,me,Nt).call(this)),O(this,fe,ht).call(this))};this.addCommands({cmd:x,undo:W,mustExec:!0})},n=new WeakSet,Nn=function(){if(!e(this,p))return;J(this,p,!1);const U=Math.ceil(this.thickness*this.parentScale),pe=this.currentPath.slice(-3),Ce=pe.map(x=>x[0]),we=pe.map(x=>x[1]);Math.min(...Ce)-U,Math.max(...Ce)+U,Math.min(...we)-U,Math.max(...we)+U;const{ctx:D}=this;D.save(),D.clearRect(0,0,this.canvas.width,this.canvas.height);for(const x of this.bezierPath2D)D.stroke(x);D.stroke(e(this,r)),D.restore()},L=new WeakSet,Bn=function(U,pe,Ce,we,D,x,W){const G=(pe+we)/2,se=(Ce+D)/2,be=(we+x)/2,ke=(D+W)/2;U.bezierCurveTo(G+2*(we-G)/3,se+2*(D-se)/3,be+2*(we-be)/3,ke+2*(D-ke)/3,be,ke)},j=new WeakSet,Vn=function(){const U=this.currentPath;if(U.length<=2)return[[U[0],U[0],U.at(-1),U.at(-1)]];const pe=[];let Ce,[we,D]=U[0];for(Ce=1;Ce<U.length-2;Ce++){const[$,de]=U[Ce],[ye,Fe]=U[Ce+1],Me=($+ye)/2,Oe=(de+Fe)/2,He=[we+2*($-we)/3,D+2*(de-D)/3],$e=[Me+2*($-Me)/3,Oe+2*(de-Oe)/3];pe.push([[we,D],He,$e,[Me,Oe]]),[we,D]=[Me,Oe]}const[x,W]=U[Ce],[G,se]=U[Ce+1],be=[we+2*(x-we)/3,D+2*(W-D)/3],ke=[G+2*(x-G)/3,se+2*(W-se)/3];return pe.push([[we,D],be,ke,[G,se]]),pe},te=new WeakSet,nt=function(){if(this.isEmpty()){O(this,Q,Bt).call(this);return}O(this,V,vi).call(this);const{canvas:U,ctx:pe}=this;pe.setTransform(1,0,0,1,0,0),pe.clearRect(0,0,U.width,U.height),O(this,Q,Bt).call(this);for(const Ce of this.bezierPath2D)pe.stroke(Ce)},ge=new WeakSet,yi=function(U){this.canvas.removeEventListener("pointerleave",e(this,y)),this.canvas.removeEventListener("pointermove",e(this,T)),this.canvas.removeEventListener("pointerup",e(this,S)),this.canvas.addEventListener("pointerdown",e(this,t)),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",e(this,l))},10),O(this,R,Dn).call(this,U.offsetX,U.offsetY),this.addToAnnotationStorage(),this.setInBackground()},ce=new WeakSet,Dt=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",he._l10nPromise.get("editor_ink_canvas_aria_label").then(U=>{var pe;return(pe=this.canvas)==null?void 0:pe.setAttribute("aria-label",U)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},me=new WeakSet,Nt=function(){J(this,f,new ResizeObserver(U=>{const pe=U[0].contentRect;pe.width&&pe.height&&this.setDimensions(pe.width,pe.height)})),e(this,f).observe(this.div)},De=new WeakSet,ct=function(){if(!e(this,b))return;const[U,pe]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*U),this.canvas.height=Math.ceil(this.height*pe),O(this,Q,Bt).call(this)},Ve=new WeakSet,Si=function(U,pe){const Ce=O(this,_,Vt).call(this),we=(U-Ce)/e(this,a),D=(pe-Ce)/e(this,P);this.scaleFactor=Math.min(we,D)},Q=new WeakSet,Bt=function(){const U=O(this,_,Vt).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+U,this.translationY*this.scaleFactor+U)},ue=new WeakSet,Un=function(U){const pe=new Path2D;for(let Ce=0,we=U.length;Ce<we;Ce++){const[D,x,W,G]=U[Ce];Ce===0&&pe.moveTo(...D),pe.bezierCurveTo(x[0],x[1],W[0],W[1],G[0],G[1])}return pe},Re=new WeakSet,Ei=function(U,pe,Ce){const[we,D,x,W]=pe;switch(Ce){case 0:for(let G=0,se=U.length;G<se;G+=2)U[G]+=we,U[G+1]=W-U[G+1];break;case 90:for(let G=0,se=U.length;G<se;G+=2){const be=U[G];U[G]=U[G+1]+we,U[G+1]=be+D}break;case 180:for(let G=0,se=U.length;G<se;G+=2)U[G]=x-U[G],U[G+1]+=D;break;case 270:for(let G=0,se=U.length;G<se;G+=2){const be=U[G];U[G]=x-U[G+1],U[G+1]=W-be}break;default:throw new Error("Invalid rotation")}return U},je=new WeakSet,Hn=function(U,pe,Ce){const[we,D,x,W]=pe;switch(Ce){case 0:for(let G=0,se=U.length;G<se;G+=2)U[G]-=we,U[G+1]=W-U[G+1];break;case 90:for(let G=0,se=U.length;G<se;G+=2){const be=U[G];U[G]=U[G+1]-D,U[G+1]=be-we}break;case 180:for(let G=0,se=U.length;G<se;G+=2)U[G]=x-U[G],U[G+1]-=D;break;case 270:for(let G=0,se=U.length;G<se;G+=2){const be=U[G];U[G]=W-U[G+1],U[G+1]=x-be}break;default:throw new Error("Invalid rotation")}return U},Ue=new WeakSet,zn=function(U,pe,Ce,we){var se,be;const D=[],x=this.thickness/2,W=U*pe+x,G=U*Ce+x;for(const ke of this.paths){const $=[],de=[];for(let ye=0,Fe=ke.length;ye<Fe;ye++){const[Me,Oe,He,$e]=ke[ye],qe=U*Me[0]+W,Ke=U*Me[1]+G,Qe=U*Oe[0]+W,Ye=U*Oe[1]+G,Ze=U*He[0]+W,et=U*He[1]+G,Je=U*$e[0]+W,tt=U*$e[1]+G;ye===0&&($.push(qe,Ke),de.push(qe,Ke)),$.push(Qe,Ye,Ze,et,Je,tt),de.push(Qe,Ye),ye===Fe-1&&de.push(Je,tt)}D.push({bezier:O(se=he,Re,Ei).call(se,$,we,this.rotation),points:O(be=he,Re,Ei).call(be,de,we,this.rotation)})}return D},We=new WeakSet,Ai=function(){let U=1/0,pe=-1/0,Ce=1/0,we=-1/0;for(const D of this.paths)for(const[x,W,G,se]of D){const be=N.Util.bezierBoundingBox(...x,...W,...G,...se);U=Math.min(U,be[0]),Ce=Math.min(Ce,be[1]),pe=Math.max(pe,be[2]),we=Math.max(we,be[3])}return[U,Ce,pe,we]},_=new WeakSet,Vt=function(){return e(this,d)?Math.ceil(this.thickness*this.parentScale):0},fe=new WeakSet,ht=function(U=!1){if(this.isEmpty())return;if(!e(this,d)){O(this,te,nt).call(this);return}const pe=O(this,We,Ai).call(this),Ce=O(this,_,Vt).call(this);J(this,a,Math.max(Z.AnnotationEditor.MIN_SIZE,pe[2]-pe[0])),J(this,P,Math.max(Z.AnnotationEditor.MIN_SIZE,pe[3]-pe[1]));const we=Math.ceil(Ce+e(this,a)*this.scaleFactor),D=Math.ceil(Ce+e(this,P)*this.scaleFactor),[x,W]=this.parentDimensions;this.width=we/x,this.height=D/W,this.setAspectRatio(we,D);const G=this.translationX,se=this.translationY;this.translationX=-pe[0],this.translationY=-pe[1],O(this,De,ct).call(this),O(this,te,nt).call(this),J(this,m,we),J(this,i,D),this.setDims(we,D);const be=U?Ce/this.scaleFactor/2:0;this.translate(G-this.translationX-be,se-this.translationY-be)},M(A,ue),M(A,Re),M(A,je),Ge(A,"_defaultColor",null),Ge(A,"_defaultOpacity",1),Ge(A,"_defaultThickness",1),Ge(A,"_l10nPromise"),Ge(A,"_type","ink"),H.InkEditor=A},(Be,H,Te)=>{var P,a,l,T,y,S,t,r,d,p,b,wt,m,yt,s,Ut,c,Pi,v,jn,B,Wn,C,Ci,q,Ht,E,$n;Object.defineProperty(H,"__esModule",{value:!0}),H.StampEditor=void 0;var N=Te(1),Z=Te(4),Pe=Te(6),ae=Te(29);const k=class extends Z.AnnotationEditor{constructor(R){super({...R,name:"stampEditor"});M(this,b);M(this,m);M(this,s);M(this,c);M(this,v);M(this,B);M(this,C);M(this,q);M(this,E);M(this,P,null);M(this,a,null);M(this,l,null);M(this,T,null);M(this,y,null);M(this,S,null);M(this,t,null);M(this,r,null);M(this,d,!1);M(this,p,!1);J(this,T,R.bitmapUrl),J(this,y,R.bitmapFile)}static get supportedTypes(){const R=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,N.shadow)(this,"supportedTypes",R.map(g=>`image/${g}`))}static get supportedTypesStr(){return(0,N.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(R){return this.supportedTypes.includes(R)}static paste(R,g){g.pasteEditor(N.AnnotationEditorType.STAMP,{bitmapFile:R.getAsFile()})}remove(){var R,g;e(this,a)&&(J(this,P,null),this._uiManager.imageManager.deleteId(e(this,a)),(R=e(this,S))==null||R.remove(),J(this,S,null),(g=e(this,t))==null||g.disconnect(),J(this,t,null)),super.remove()}rebuild(){if(!this.parent){e(this,a)&&O(this,s,Ut).call(this);return}super.rebuild(),this.div!==null&&(e(this,a)&&O(this,s,Ut).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(e(this,l)||e(this,P)||e(this,T)||e(this,y))}get isResizable(){return!0}render(){if(this.div)return this.div;let R,g;if(this.width&&(R=this.x,g=this.y),super.render(),this.div.hidden=!0,e(this,P)?O(this,c,Pi).call(this):O(this,s,Ut).call(this),this.width){const[n,u]=this.parentDimensions;this.setAt(R*n,g*u,this.width*n,this.height*u)}return this.div}static deserialize(R,g,n){if(R instanceof ae.StampAnnotationElement)return null;const u=super.deserialize(R,g,n),{rect:L,bitmapUrl:I,bitmapId:j,isSvg:Y}=R;j&&n.imageManager.isValidId(j)?J(u,a,j):J(u,T,I),J(u,d,Y);const[te,Se]=u.pageDimensions;return u.width=(L[2]-L[0])/te,u.height=(L[3]-L[1])/Se,u}serialize(R=!1,g=null){if(this.isEmpty())return null;const n={annotationType:N.AnnotationEditorType.STAMP,bitmapId:e(this,a),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:e(this,d)};if(R)return n.bitmapUrl=O(this,q,Ht).call(this,!0),n;if(g===null)return n;g.stamps||(g.stamps=new Map);const u=e(this,d)?(n.rect[2]-n.rect[0])*(n.rect[3]-n.rect[1]):null;if(!g.stamps.has(e(this,a)))g.stamps.set(e(this,a),{area:u,serialized:n}),n.bitmap=O(this,q,Ht).call(this,!1);else if(e(this,d)){const L=g.stamps.get(e(this,a));u>L.area&&(L.area=u,L.serialized.bitmap.close(),L.serialized.bitmap=O(this,q,Ht).call(this,!1))}return n}};let A=k;P=new WeakMap,a=new WeakMap,l=new WeakMap,T=new WeakMap,y=new WeakMap,S=new WeakMap,t=new WeakMap,r=new WeakMap,d=new WeakMap,p=new WeakMap,b=new WeakSet,wt=function(R,g=!1){if(!R){this.remove();return}J(this,P,R.bitmap),g||(J(this,a,R.id),J(this,d,R.isSvg)),O(this,c,Pi).call(this)},m=new WeakSet,yt=function(){J(this,l,null),this._uiManager.enableWaiting(!1),e(this,S)&&this.div.focus()},s=new WeakSet,Ut=function(){if(e(this,a)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(e(this,a)).then(g=>O(this,b,wt).call(this,g,!0)).finally(()=>O(this,m,yt).call(this));return}if(e(this,T)){const g=e(this,T);J(this,T,null),this._uiManager.enableWaiting(!0),J(this,l,this._uiManager.imageManager.getFromUrl(g).then(n=>O(this,b,wt).call(this,n)).finally(()=>O(this,m,yt).call(this)));return}if(e(this,y)){const g=e(this,y);J(this,y,null),this._uiManager.enableWaiting(!0),J(this,l,this._uiManager.imageManager.getFromFile(g).then(n=>O(this,b,wt).call(this,n)).finally(()=>O(this,m,yt).call(this)));return}const R=document.createElement("input");R.type="file",R.accept=k.supportedTypesStr,J(this,l,new Promise(g=>{R.addEventListener("change",async()=>{if(!R.files||R.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const n=await this._uiManager.imageManager.getFromFile(R.files[0]);O(this,b,wt).call(this,n)}g()}),R.addEventListener("cancel",()=>{this.remove(),g()})}).finally(()=>O(this,m,yt).call(this))),R.click()},c=new WeakSet,Pi=function(){const{div:R}=this;let{width:g,height:n}=e(this,P);const[u,L]=this.pageDimensions,I=.75;if(this.width)g=this.width*u,n=this.height*L;else if(g>I*u||n>I*L){const Se=Math.min(I*u/g,I*L/n);g*=Se,n*=Se}const[j,Y]=this.parentDimensions;this.setDims(g*j/u,n*Y/L),this._uiManager.enableWaiting(!1);const te=J(this,S,document.createElement("canvas"));R.append(te),R.hidden=!1,O(this,C,Ci).call(this,g,n),O(this,E,$n).call(this),e(this,p)||(this.parent.addUndoableEditor(this),J(this,p,!0))},v=new WeakSet,jn=function(R,g){var I;const[n,u]=this.parentDimensions;this.width=R/n,this.height=g/u,this.setDims(R,g),(I=this._initialOptions)!=null&&I.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,e(this,r)!==null&&clearTimeout(e(this,r)),J(this,r,setTimeout(()=>{J(this,r,null),O(this,C,Ci).call(this,R,g)},200))},B=new WeakSet,Wn=function(R,g){const{width:n,height:u}=e(this,P);let L=n,I=u,j=e(this,P);for(;L>2*R||I>2*g;){const Y=L,te=I;L>2*R&&(L=L>=16384?Math.floor(L/2)-1:Math.ceil(L/2)),I>2*g&&(I=I>=16384?Math.floor(I/2)-1:Math.ceil(I/2));const Se=new OffscreenCanvas(L,I);Se.getContext("2d").drawImage(j,0,0,Y,te,0,0,L,I),j=Se.transferToImageBitmap()}return j},C=new WeakSet,Ci=function(R,g){R=Math.ceil(R),g=Math.ceil(g);const n=e(this,S);if(!n||n.width===R&&n.height===g)return;n.width=R,n.height=g;const u=e(this,d)?e(this,P):O(this,B,Wn).call(this,R,g),L=n.getContext("2d");L.filter=this._uiManager.hcmFilter,L.drawImage(u,0,0,u.width,u.height,0,0,R,g)},q=new WeakSet,Ht=function(R){if(R){if(e(this,d)){const u=this._uiManager.imageManager.getSvgUrl(e(this,a));if(u)return u}const g=document.createElement("canvas");return{width:g.width,height:g.height}=e(this,P),g.getContext("2d").drawImage(e(this,P),0,0),g.toDataURL()}if(e(this,d)){const[g,n]=this.pageDimensions,u=Math.round(this.width*g*Pe.PixelsPerInch.PDF_TO_CSS_UNITS),L=Math.round(this.height*n*Pe.PixelsPerInch.PDF_TO_CSS_UNITS),I=new OffscreenCanvas(u,L);return I.getContext("2d").drawImage(e(this,P),0,0,e(this,P).width,e(this,P).height,0,0,u,L),I.transferToImageBitmap()}return structuredClone(e(this,P))},E=new WeakSet,$n=function(){J(this,t,new ResizeObserver(R=>{const g=R[0].contentRect;g.width&&g.height&&O(this,v,jn).call(this,g.width,g.height)})),e(this,t).observe(this.div)},Ge(A,"_type","stamp"),H.StampEditor=A}],__webpack_module_cache__={};function __w_pdfjs_require__(Be){var H=__webpack_module_cache__[Be];if(H!==void 0)return H.exports;var Te=__webpack_module_cache__[Be]={exports:{}};return __webpack_modules__[Be](Te,Te.exports,__w_pdfjs_require__),Te.exports}var __webpack_exports__={};return(()=>{var Be=__webpack_exports__;Object.defineProperty(Be,"__esModule",{value:!0}),Object.defineProperty(Be,"AbortException",{enumerable:!0,get:function(){return H.AbortException}}),Object.defineProperty(Be,"AnnotationEditorLayer",{enumerable:!0,get:function(){return Pe.AnnotationEditorLayer}}),Object.defineProperty(Be,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return H.AnnotationEditorParamsType}}),Object.defineProperty(Be,"AnnotationEditorType",{enumerable:!0,get:function(){return H.AnnotationEditorType}}),Object.defineProperty(Be,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return ae.AnnotationEditorUIManager}}),Object.defineProperty(Be,"AnnotationLayer",{enumerable:!0,get:function(){return A.AnnotationLayer}}),Object.defineProperty(Be,"AnnotationMode",{enumerable:!0,get:function(){return H.AnnotationMode}}),Object.defineProperty(Be,"CMapCompressionType",{enumerable:!0,get:function(){return H.CMapCompressionType}}),Object.defineProperty(Be,"FeatureTest",{enumerable:!0,get:function(){return H.FeatureTest}}),Object.defineProperty(Be,"GlobalWorkerOptions",{enumerable:!0,get:function(){return P.GlobalWorkerOptions}}),Object.defineProperty(Be,"ImageKind",{enumerable:!0,get:function(){return H.ImageKind}}),Object.defineProperty(Be,"InvalidPDFException",{enumerable:!0,get:function(){return H.InvalidPDFException}}),Object.defineProperty(Be,"MissingPDFException",{enumerable:!0,get:function(){return H.MissingPDFException}}),Object.defineProperty(Be,"OPS",{enumerable:!0,get:function(){return H.OPS}}),Object.defineProperty(Be,"PDFDataRangeTransport",{enumerable:!0,get:function(){return Te.PDFDataRangeTransport}}),Object.defineProperty(Be,"PDFDateString",{enumerable:!0,get:function(){return N.PDFDateString}}),Object.defineProperty(Be,"PDFWorker",{enumerable:!0,get:function(){return Te.PDFWorker}}),Object.defineProperty(Be,"PasswordResponses",{enumerable:!0,get:function(){return H.PasswordResponses}}),Object.defineProperty(Be,"PermissionFlag",{enumerable:!0,get:function(){return H.PermissionFlag}}),Object.defineProperty(Be,"PixelsPerInch",{enumerable:!0,get:function(){return N.PixelsPerInch}}),Object.defineProperty(Be,"PromiseCapability",{enumerable:!0,get:function(){return H.PromiseCapability}}),Object.defineProperty(Be,"RenderingCancelledException",{enumerable:!0,get:function(){return N.RenderingCancelledException}}),Object.defineProperty(Be,"SVGGraphics",{enumerable:!0,get:function(){return Te.SVGGraphics}}),Object.defineProperty(Be,"UnexpectedResponseException",{enumerable:!0,get:function(){return H.UnexpectedResponseException}}),Object.defineProperty(Be,"Util",{enumerable:!0,get:function(){return H.Util}}),Object.defineProperty(Be,"VerbosityLevel",{enumerable:!0,get:function(){return H.VerbosityLevel}}),Object.defineProperty(Be,"XfaLayer",{enumerable:!0,get:function(){return a.XfaLayer}}),Object.defineProperty(Be,"build",{enumerable:!0,get:function(){return Te.build}}),Object.defineProperty(Be,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return H.createValidAbsoluteUrl}}),Object.defineProperty(Be,"getDocument",{enumerable:!0,get:function(){return Te.getDocument}}),Object.defineProperty(Be,"getFilenameFromUrl",{enumerable:!0,get:function(){return N.getFilenameFromUrl}}),Object.defineProperty(Be,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return N.getPdfFilenameFromUrl}}),Object.defineProperty(Be,"getXfaPageViewport",{enumerable:!0,get:function(){return N.getXfaPageViewport}}),Object.defineProperty(Be,"isDataScheme",{enumerable:!0,get:function(){return N.isDataScheme}}),Object.defineProperty(Be,"isPdfFile",{enumerable:!0,get:function(){return N.isPdfFile}}),Object.defineProperty(Be,"loadScript",{enumerable:!0,get:function(){return N.loadScript}}),Object.defineProperty(Be,"normalizeUnicode",{enumerable:!0,get:function(){return H.normalizeUnicode}}),Object.defineProperty(Be,"renderTextLayer",{enumerable:!0,get:function(){return Z.renderTextLayer}}),Object.defineProperty(Be,"setLayerDimensions",{enumerable:!0,get:function(){return N.setLayerDimensions}}),Object.defineProperty(Be,"shadow",{enumerable:!0,get:function(){return H.shadow}}),Object.defineProperty(Be,"updateTextLayer",{enumerable:!0,get:function(){return Z.updateTextLayer}}),Object.defineProperty(Be,"version",{enumerable:!0,get:function(){return Te.version}});var H=__w_pdfjs_require__(1),Te=__w_pdfjs_require__(2),N=__w_pdfjs_require__(6),Z=__w_pdfjs_require__(26),Pe=__w_pdfjs_require__(27),ae=__w_pdfjs_require__(5),A=__w_pdfjs_require__(29),P=__w_pdfjs_require__(14),a=__w_pdfjs_require__(32)})(),__webpack_exports__})())}(pdf)),pdfExports}(function(Be,H){(function(N,Z){Be.exports=Z()})(globalThis,()=>(()=>{var Te=[,(ae,A,P)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.createViewerApp=m,A.getActiveApp=f,A.getViewerConfiguration=d,A.initManager=b;var a=P(2),l=P(9),T=P(53),y=S(P(54));function S(i){return i&&i.__esModule?i:{default:i}}let t,r=null;function d(i){return{appContainer:i,mainContainer:i.querySelector("[data-dom-id='viewerContainer']"),viewerContainer:i.querySelector("[data-dom-id='viewer']"),toolbar:{container:i.querySelector("[data-dom-id='toolbarViewer']"),numPages:i.querySelector("[data-dom-id='numPages']"),pageNumber:i.querySelector("[data-dom-id='pageNumber']"),scaleSelect:i.querySelector("[data-dom-id='scaleSelect']"),customScaleOption:i.querySelector("[data-dom-id='customScaleOption']"),previous:i.querySelector("[data-dom-id='previous']"),next:i.querySelector("[data-dom-id='next']"),zoomIn:i.querySelector("[data-dom-id='zoomIn']"),zoomOut:i.querySelector("[data-dom-id='zoomOut']"),viewFind:i.querySelector("[data-dom-id='viewFind']"),openFile:i.querySelector("[data-dom-id='openFile']"),print:i.querySelector("[data-dom-id='print']"),editorFreeTextButton:i.querySelector("[data-dom-id='editorFreeText']"),editorFreeTextParamsToolbar:i.querySelector("[data-dom-id='editorFreeTextParamsToolbar']"),editorInkButton:i.querySelector("[data-dom-id='editorInk']"),editorInkParamsToolbar:i.querySelector("[data-dom-id='editorInkParamsToolbar']"),editorStampButton:i.querySelector("[data-dom-id='editorStamp']"),download:i.querySelector("[data-dom-id='download']")},secondaryToolbar:{toolbar:i.querySelector("[data-dom-id='secondaryToolbar']"),toggleButton:i.querySelector("[data-dom-id='secondaryToolbarToggle']"),presentationModeButton:i.querySelector("[data-dom-id='presentationMode']"),openFileButton:i.querySelector("[data-dom-id='secondaryOpenFile']"),printButton:i.querySelector("[data-dom-id='secondaryPrint']"),downloadButton:i.querySelector("[data-dom-id='secondaryDownload']"),viewBookmarkButton:i.querySelector("[data-dom-id='viewBookmark']"),firstPageButton:i.querySelector("[data-dom-id='firstPage']"),lastPageButton:i.querySelector("[data-dom-id='lastPage']"),pageRotateCwButton:i.querySelector("[data-dom-id='pageRotateCw']"),pageRotateCcwButton:i.querySelector("[data-dom-id='pageRotateCcw']"),cursorSelectToolButton:i.querySelector("[data-dom-id='cursorSelectTool']"),cursorHandToolButton:i.querySelector("[data-dom-id='cursorHandTool']"),scrollPageButton:i.querySelector("[data-dom-id='scrollPage']"),scrollVerticalButton:i.querySelector("[data-dom-id='scrollVertical']"),scrollHorizontalButton:i.querySelector("[data-dom-id='scrollHorizontal']"),scrollWrappedButton:i.querySelector("[data-dom-id='scrollWrapped']"),spreadNoneButton:i.querySelector("[data-dom-id='spreadNone']"),spreadOddButton:i.querySelector("[data-dom-id='spreadOdd']"),spreadEvenButton:i.querySelector("[data-dom-id='spreadEven']"),documentPropertiesButton:i.querySelector("[data-dom-id='documentProperties']")},sidebar:{outerContainer:i.querySelector("[data-dom-id='outerContainer']"),sidebarContainer:i.querySelector("[data-dom-id='sidebarContainer']"),toggleButton:i.querySelector("[data-dom-id='sidebarToggle']"),resizer:i.querySelector("[data-dom-id='sidebarResizer']"),thumbnailButton:i.querySelector("[data-dom-id='viewThumbnail']"),outlineButton:i.querySelector("[data-dom-id='viewOutline']"),attachmentsButton:i.querySelector("[data-dom-id='viewAttachments']"),layersButton:i.querySelector("[data-dom-id='viewLayers']"),thumbnailView:i.querySelector("[data-dom-id='thumbnailView']"),outlineView:i.querySelector("[data-dom-id='outlineView']"),attachmentsView:i.querySelector("[data-dom-id='attachmentsView']"),layersView:i.querySelector("[data-dom-id='layersView']"),outlineOptionsContainer:i.querySelector("[data-dom-id='outlineOptionsContainer']"),currentOutlineItemButton:i.querySelector("[data-dom-id='currentOutlineItem']")},findBar:{bar:i.querySelector("[data-dom-id='findbar']"),toggleButton:i.querySelector("[data-dom-id='viewFind']"),findField:i.querySelector("[data-dom-id='findInput']"),highlightAllCheckbox:i.querySelector("[data-dom-id='findHighlightAll']"),caseSensitiveCheckbox:i.querySelector("[data-dom-id='findMatchCase']"),matchDiacriticsCheckbox:i.querySelector("[data-dom-id='findMatchDiacritics']"),entireWordCheckbox:i.querySelector("[data-dom-id='findEntireWord']"),findMsg:i.querySelector("[data-dom-id='findMsg']"),findResultsCount:i.querySelector("[data-dom-id='findResultsCount']"),findPreviousButton:i.querySelector("[data-dom-id='findPrevious']"),findNextButton:i.querySelector("[data-dom-id='findNext']")},passwordOverlay:{dialog:i.querySelector("[data-dom-id='passwordDialog']"),label:i.querySelector("[data-dom-id='passwordText']"),input:i.querySelector("[data-dom-id='password']"),submitButton:i.querySelector("[data-dom-id='passwordSubmit']"),cancelButton:i.querySelector("[data-dom-id='passwordCancel']")},documentProperties:{dialog:i.querySelector("[data-dom-id='documentPropertiesDialog']"),closeButton:i.querySelector("[data-dom-id='documentPropertiesClose']"),fields:{fileName:i.querySelector("[data-dom-id='fileNameField']"),fileSize:i.querySelector("[data-dom-id='fileSizeField']"),title:i.querySelector("[data-dom-id='titleField']"),author:i.querySelector("[data-dom-id='authorField']"),subject:i.querySelector("[data-dom-id='subjectField']"),keywords:i.querySelector("[data-dom-id='keywordsField']"),creationDate:i.querySelector("[data-dom-id='creationDateField']"),modificationDate:i.querySelector("[data-dom-id='modificationDateField']"),creator:i.querySelector("[data-dom-id='creatorField']"),producer:i.querySelector("[data-dom-id='producerField']"),version:i.querySelector("[data-dom-id='versionField']"),pageCount:i.querySelector("[data-dom-id='pageCountField']"),pageSize:i.querySelector("[data-dom-id='pageSizeField']"),linearized:i.querySelector("[data-dom-id='linearizedField']")}},annotationEditorParams:{editorFreeTextFontSize:i.querySelector("[data-dom-id='editorFreeTextFontSize']"),editorFreeTextColor:i.querySelector("[data-dom-id='editorFreeTextColor']"),editorInkColor:i.querySelector("[data-dom-id='editorInkColor']"),editorInkThickness:i.querySelector("[data-dom-id='editorInkThickness']"),editorInkOpacity:i.querySelector("[data-dom-id='editorInkOpacity']"),editorStampAddImage:i.querySelector("[data-dom-id='editorStampAddImage']")},printContainer:i.querySelector("[data-dom-id='printContainer']"),openFileInput:i.querySelector("[data-dom-id='fileInput']"),debuggerScriptPath:"../pdf.js/web/debugger.js"}}function p(i){const{parent:s=null,resourcePath:h,src:c,disableCORSCheck:o=!1,disableAutoSetTitle:v=!1,appOptions:w={}}=i,B=`${h}/build/pdf.worker.js`,K=l.AppOptions;Object.keys(w).forEach(function(q){K.set(q,w[q])}),K.set("workerSrc",B),K.set("sandboxBundleSrc",`${h}/build/pdf.sandbox.js`),K.set("defaultUrl",c),K.set("disableCORSCheck",o),K.set("disableAutoSetTitle",v),K.set("disablePreferences",!0);const C=`${h}/web/locale/locale.properties`;(0,T.injectLocaleResource)(C);const V=new a.PDFViewerApplication(K);if(t=V,s){const q=(0,y.default)();s.appendChild(q);const X=d(s);V.run(X)}return V}function b(i){return r||(r={createApp(s){const h=p(s);return this._register(h),h},_register(s){let h=null;const c=function(o){h||(h=window.requestAnimationFrame(()=>{h=null,r.activateApp(o)}))};s.initializedPromise.then(()=>{i.forEach(o=>{s.appConfig.sidebar.outerContainer.addEventListener(o,()=>{c(s)})})})},activateApp(s){t!==s&&(t&&window.removeEventListener("keydown",t.helper.webViewerKeyDown),t=s,window.addEventListener("keydown",t.helper.webViewerKeyDown))}},r)}function f(){return t}function m(i){return b(["mousemove","click","mousedown","touchstart"]).createApp(i)}},(ae,A,P)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.PDFViewerApplication=void 0;var a=P(3),l=P(8),T=P(44);class y extends l.ViewerApplication{constructor(t){super(),this.appOptions=t,this.helper=(0,a.createHelper)(this),this.bindServices()}bindServices(){(0,T.bindExternalService)(this),(0,T.bindPrintServiceFactory)(l.PDFPrintServiceFactory)}run(t){const{validateFileURL:r}=this.helper;return super.run(t,r)}bindEvents(){const t=this.appOptions,{eventBus:r,_boundEvents:d}=this;d.beforePrint=this.beforePrint.bind(this),d.afterPrint=this.afterPrint.bind(this);const{webViewerResize:p,webViewerHashchange:b,webViewerPageRendered:f,webViewerUpdateViewarea:m,webViewerPageChanging:i,webViewerScaleChanging:s,webViewerRotationChanging:h,webViewerSidebarViewChanged:c,webViewerPageMode:o,webViewerNamedAction:v,webViewerPresentationModeChanged:w,webViewerPresentationMode:B,webViewerPrint:K,webViewerDownload:C,webViewerSave:V,webViewerFirstPage:q,webViewerLastPage:X,webViewerNextPage:E,webViewerPreviousPage:F,webViewerZoomIn:k,webViewerZoomOut:ie,webViewerZoomReset:_e,webViewerPageNumberChanged:R,webViewerScaleChanged:g,webViewerRotateCw:n,webViewerRotateCcw:u,webViewerOptionalContentConfig:L,webViewerSwitchScrollMode:I,webViewerScrollModeChanged:j,webViewerSwitchSpreadMode:Y,webViewerSpreadModeChanged:te,webViewerDocumentProperties:Se,webViewerFindFromUrlHash:ge,webViewerUpdateFindMatchesCount:ne,webViewerUpdateFindControlState:ce,reportPageStatsPDFBug:Ee,webViewerFileInputChange:me,webViewerOpenFile:xe,webViewerSwitchAnnotationEditorMode:De,webViewerSwitchAnnotationEditorParams:Ae,webViewerAnnotationEditorStatesChanged:Ve,webViewerPageRender:oe,webViewerOpenInExternalApp:Q}=this.helper;r._on("resize",p),r._on("hashchange",b),r._on("beforeprint",d.beforePrint),r._on("afterprint",d.afterPrint),r._on("pagerender",oe),r._on("pagerendered",f),r._on("updateviewarea",m),r._on("pagechanging",i),r._on("scalechanging",s),r._on("rotationchanging",h),r._on("sidebarviewchanged",c),r._on("pagemode",o),r._on("namedaction",v),r._on("presentationmodechanged",w),r._on("presentationmode",B),r._on("switchannotationeditormode",De),r._on("switchannotationeditorparams",Ae),r._on("print",K),r._on("download",C),r._on("openinexternalapp",Q),r._on("firstpage",q),r._on("lastpage",X),r._on("nextpage",E),r._on("previouspage",F),r._on("zoomin",k),r._on("zoomout",ie),r._on("zoomreset",_e),r._on("pagenumberchanged",R),r._on("scalechanged",g),r._on("rotatecw",n),r._on("rotateccw",u),r._on("optionalcontentconfig",L),r._on("switchscrollmode",I),r._on("scrollmodechanged",j),r._on("switchspreadmode",Y),r._on("spreadmodechanged",te),r._on("documentproperties",Se),r._on("findfromurlhash",ge),r._on("updatefindmatchescount",ne),r._on("updatefindcontrolstate",ce),t.get("pdfBug")&&(d.reportPageStatsPDFBug=Ee,r._on("pagerendered",d.reportPageStatsPDFBug),r._on("pagechanging",d.reportPageStatsPDFBug)),r._on("fileinputchange",me),r._on("openfile",xe)}setTitle(t=this._title){if(this._title=t,this.isViewerEmbedded||this.appOptions.get("disableAutoSetTitle"))return;const r=this._hasAnnotationEditors&&!this.pdfRenderingQueue.printing;document.title=`${r?"* ":""}${t}`}bindWindowEvents(){const{eventBus:t,_boundEvents:r}=this,{webViewerVisibilityChange:d,webViewerWheel:p,webViewerTouchStart:b,webViewerTouchMove:f,webViewerTouchEnd:m,webViewerClick:i,webViewerKeyDown:s,webViewerKeyUp:h,webViewerResolutionChange:c}=this.helper;function o(v=null){v&&c(v);const w=window.matchMedia(`(resolution: ${window.devicePixelRatio||1}dppx)`);w.addEventListener("change",o,{once:!0}),r.removeWindowResolutionChange||(r.removeWindowResolutionChange=function(){w.removeEventListener("change",o),r.removeWindowResolutionChange=null})}o(),r.windowResize=()=>{t.dispatch("resize",{source:window})},r.windowHashChange=()=>{t.dispatch("hashchange",{source:window,hash:document.location.hash.substring(1)})},r.windowBeforePrint=()=>{t.dispatch("beforeprint",{source:window})},r.windowAfterPrint=()=>{t.dispatch("afterprint",{source:window})},r.windowUpdateFromSandbox=v=>{t.dispatch("updatefromsandbox",{source:window,detail:v.detail})},window.addEventListener("visibilitychange",d),window.addEventListener("wheel",p,{passive:!1}),window.addEventListener("touchstart",b,{passive:!1}),window.addEventListener("touchmove",f,{passive:!1}),window.addEventListener("touchend",m,{passive:!1}),window.addEventListener("click",i),window.addEventListener("keydown",s),window.addEventListener("keyup",h),window.addEventListener("resize",r.windowResize),window.addEventListener("hashchange",r.windowHashChange),window.addEventListener("beforeprint",r.windowBeforePrint),window.addEventListener("afterprint",r.windowAfterPrint),window.addEventListener("updatefromsandbox",r.windowUpdateFromSandbox)}unbindEvents(){const{eventBus:t,_boundEvents:r}=this,{webViewerResize:d,webViewerHashchange:p,webViewerPageRendered:b,webViewerUpdateViewarea:f,webViewerPageChanging:m,webViewerScaleChanging:i,webViewerRotationChanging:s,webViewerSidebarViewChanged:h,webViewerPageMode:c,webViewerNamedAction:o,webViewerPresentationModeChanged:v,webViewerPresentationMode:w,webViewerPrint:B,webViewerDownload:K,webViewerSave:C,webViewerFirstPage:V,webViewerLastPage:q,webViewerNextPage:X,webViewerPreviousPage:E,webViewerZoomIn:F,webViewerZoomOut:k,webViewerZoomReset:ie,webViewerPageNumberChanged:_e,webViewerScaleChanged:R,webViewerRotateCw:g,webViewerRotateCcw:n,webViewerOptionalContentConfig:u,webViewerSwitchScrollMode:L,webViewerScrollModeChanged:I,webViewerSwitchSpreadMode:j,webViewerSpreadModeChanged:Y,webViewerDocumentProperties:te,webViewerFindFromUrlHash:Se,webViewerUpdateFindMatchesCount:ge,webViewerUpdateFindControlState:ne,reportPageStatsPDFBug:ce,webViewerFileInputChange:Ee,webViewerOpenFile:me,webViewerPageRender:xe,webViewerOpenInExternalApp:De}=this.helper;t._off("resize",d),t._off("hashchange",p),t._off("beforeprint",r.beforePrint),t._off("afterprint",r.afterPrint),t._on("pagerender",xe),t._off("pagerendered",b),t._off("updateviewarea",f),t._off("pagechanging",m),t._off("scalechanging",i),t._off("rotationchanging",s),t._off("sidebarviewchanged",h),t._off("pagemode",c),t._off("namedaction",o),t._off("presentationmodechanged",v),t._off("presentationmode",w),t._off("print",B),t._off("download",K),t._off("openinexternalapp",De),t._off("firstpage",V),t._off("lastpage",q),t._off("nextpage",X),t._off("previouspage",E),t._off("zoomin",F),t._off("zoomout",k),t._off("zoomreset",ie),t._off("pagenumberchanged",_e),t._off("scalechanged",R),t._off("rotatecw",g),t._off("rotateccw",n),t._off("optionalcontentconfig",u),t._off("switchscrollmode",L),t._off("scrollmodechanged",I),t._off("switchspreadmode",j),t._off("spreadmodechanged",Y),t._off("documentproperties",te),t._off("findfromurlhash",Se),t._off("updatefindmatchescount",ge),t._off("updatefindcontrolstate",ne),r.reportPageStatsPDFBug&&(t._off("pagerendered",r.reportPageStatsPDFBug),t._off("pagechanging",r.reportPageStatsPDFBug),r.reportPageStatsPDFBug=null),t._off("fileinputchange",Ee),t._off("openfile",me),r.beforePrint=null,r.afterPrint=null}unbindWindowEvents(){var h;const{_boundEvents:t}=this,{webViewerVisibilityChange:r,webViewerWheel:d,webViewerTouchStart:p,webViewerTouchMove:b,webViewerTouchEnd:f,webViewerClick:m,webViewerKeyDown:i,webViewerKeyUp:s}=this.helper;window.removeEventListener("visibilitychange",r),window.removeEventListener("wheel",d,{passive:!1}),window.removeEventListener("touchstart",p,{passive:!1}),window.removeEventListener("touchmove",b,{passive:!1}),window.removeEventListener("touchend",f,{passive:!1}),window.removeEventListener("click",m),window.removeEventListener("keydown",i),window.removeEventListener("keyup",s),window.removeEventListener("resize",t.windowResize),window.removeEventListener("hashchange",t.windowHashChange),window.removeEventListener("beforeprint",t.windowBeforePrint),window.removeEventListener("afterprint",t.windowAfterPrint),window.removeEventListener("updatefromsandbox",t.windowUpdateFromSandbox),(h=t.removeWindowResolutionChange)==null||h.call(t),t.windowResize=null,t.windowHashChange=null,t.windowBeforePrint=null,t.windowAfterPrint=null,t.windowUpdateFromSandbox=null}_initializeAnnotationStorageCallbacks(t){if(t!==this.pdfDocument)return;const{annotationStorage:r}=t;r.onSetModified=()=>{window.addEventListener("beforeunload",this.helper.beforeUnload),this._annotationStorageModified=!0},r.onResetModified=()=>{window.removeEventListener("beforeunload",this.helper.beforeUnload),delete this._annotationStorageModified},r.onAnnotationEditor=d=>{this._hasAnnotationEditors=!!d,this.setTitle(),d&&this.externalServices.reportTelemetry({type:"editing",data:{type:d}})}}}A.PDFViewerApplication=y},(ae,A,P)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.createHelper=S;var a=P(4),l=P(5),T=P(6);const y=1e3;function S(t){const r=t.appOptions,d=["null","http://mozilla.github.io","https://mozilla.github.io"];var p=function(ee){if(ee)try{const he=new URL(window.location.href).origin||"null";if(d.includes(he)||r.get("disableCORSCheck"))return;if(new URL(ee,window.location.href).origin!==he)throw new Error("file origin does not match viewer's")}catch(he){throw t.l10n.get("loading_error").then(re=>{t._documentError(re,{message:he==null?void 0:he.message})}),he}};async function b(){var ee;(ee=l.GlobalWorkerOptions).workerSrc||(ee.workerSrc=r.get("workerSrc")),await(0,l.loadScript)(l.PDFWorker.workerSrc)}async function f(ee){const{debuggerScriptPath:he}=ee.appConfig,{PDFBug:re}=await __non_webpack_import__(he);ee._PDFBug=re}function m({pageNumber:ee}){var re,ve;if(!((re=globalThis.Stats)!=null&&re.enabled))return;const he=t.pdfViewer.getPageView(ee-1);globalThis.Stats.add(ee,(ve=he==null?void 0:he.pdfPage)==null?void 0:ve.stats)}function i({pageNumber:ee}){var he;ee===t.page&&((he=t.toolbar)==null||he.updateLoadingIndicatorState(!0))}function s({pageNumber:ee,error:he}){var re,ve,U;if(ee===t.page&&((re=t.toolbar)==null||re.updateLoadingIndicatorState(!1)),((ve=t.pdfSidebar)==null?void 0:ve.visibleView)===a.SidebarView.THUMBS){const pe=t.pdfViewer.getPageView(ee-1),Ce=(U=t.pdfThumbnailViewer)==null?void 0:U.getThumbnail(ee-1);pe&&(Ce==null||Ce.setImage(pe))}he&&t.l10n.get("rendering_error").then(pe=>{t._otherError(pe,he)})}function h({mode:ee}){var re;let he;switch(ee){case"thumbs":he=a.SidebarView.THUMBS;break;case"bookmarks":case"outline":he=a.SidebarView.OUTLINE;break;case"attachments":he=a.SidebarView.ATTACHMENTS;break;case"layers":he=a.SidebarView.LAYERS;break;case"none":he=a.SidebarView.NONE;break;default:console.error('Invalid "pagemode" hash parameter: '+ee);return}(re=t.pdfSidebar)==null||re.switchView(he,!0)}function c(ee){var he;switch(ee.action){case"GoToPage":(he=t.appConfig.toolbar)==null||he.pageNumber.select();break;case"Find":t.supportsIntegratedFind||t==null||t.findBar.toggle();break;case"Print":t.triggerPrinting();break;case"SaveAs":t.downloadOrSave();break}}function o(ee){t.pdfViewer.presentationModeState=ee.state}function v({view:ee}){var he;t.pdfRenderingQueue.isThumbnailViewEnabled=ee===a.SidebarView.THUMBS,t.isInitialViewSet&&((he=t.store)==null||he.set("sidebarView",ee).catch(()=>{}))}function w({location:ee}){var he;if(t.isInitialViewSet&&((he=t.store)==null||he.setMultiple({page:ee.pageNumber,zoom:ee.scale,scrollLeft:ee.left,scrollTop:ee.top,rotation:ee.rotation}).catch(()=>{})),t.appConfig.secondaryToolbar){const re=t.pdfLinkService.getAnchorUrl(ee.pdfOpenParams);t.appConfig.secondaryToolbar.viewBookmarkButton.href=re}}function B(ee){var he;t.isInitialViewSet&&!t.pdfViewer.isInPresentationMode&&((he=t.store)==null||he.set("scrollMode",ee.mode).catch(()=>{}))}function K(ee){var he;t.isInitialViewSet&&!t.pdfViewer.isInPresentationMode&&((he=t.store)==null||he.set("spreadMode",ee.mode).catch(()=>{}))}function C(){const{pdfDocument:ee,pdfViewer:he,pdfRenderingQueue:re}=t;if(re.printing&&window.matchMedia("print").matches||!ee)return;const ve=he.currentScaleValue;(ve==="auto"||ve==="page-fit"||ve==="page-width")&&(he.currentScaleValue=ve),he.update()}function V(ee){var re;const he=ee.hash;he&&(t.isInitialViewSet?(re=t.pdfHistory)!=null&&re.popStateInProgress||t.pdfLinkService.setHash(he):t.initialBookmark=he)}var q=function(ee){var re;if((re=t.pdfViewer)!=null&&re.isInPresentationMode)return;const he=ee.fileInput.files[0];t.open({url:URL.createObjectURL(he),originalUrl:he.name})},X=function(ee){t.appConfig.openFileInput.click()};function E(){t.requestPresentationMode()}function F(ee){t.pdfViewer.annotationEditorMode=ee}function k(ee){t.pdfViewer.annotationEditorParams=ee}function ie(){t.triggerPrinting()}function _e(){t.downloadOrSave()}function R(){t.openInExternalApp()}function g(){t.page=1}function n(){t.page=t.pagesCount}function u(){t.pdfViewer.nextPage()}function L(){t.pdfViewer.previousPage()}function I(){t.zoomIn()}function j(){t.zoomOut()}function Y(){t.zoomReset()}function te(ee){var re;const he=t.pdfViewer;ee.value!==""&&t.pdfLinkService.goToPage(ee.value),ee.value!==he.currentPageNumber.toString()&&ee.value!==he.currentPageLabel&&((re=t.toolbar)==null||re.setPageNumber(he.currentPageNumber,he.currentPageLabel))}function Se(ee){t.pdfViewer.currentScaleValue=ee.value}function ge(){t.rotatePages(90)}function ne(){t.rotatePages(-90)}function ce(ee){t.pdfViewer.optionalContentConfigPromise=ee.promise}function Ee(ee){t.pdfViewer.scrollMode=ee.mode}function me(ee){t.pdfViewer.spreadMode=ee.mode}function xe(){var ee;(ee=t.pdfDocumentProperties)==null||ee.open()}function De(ee){t.eventBus.dispatch("find",{source:ee.source,type:"",query:ee.query,caseSensitive:!1,entireWord:!1,highlightAll:!0,findPrevious:!1,matchDiacritics:!0})}function Ae({matchesCount:ee}){t.supportsIntegratedFind?t.externalServices.updateFindMatchesCount(ee):t.findBar.updateResultsCount(ee)}function Ve({state:ee,previous:he,matchesCount:re,rawQuery:ve}){var U;t.supportsIntegratedFind?t.externalServices.updateFindControlState({result:ee,findPrevious:he,matchesCount:re,rawQuery:ve}):(U=t.findBar)==null||U.updateUIState(ee,he,re)}function oe(ee){var he;(he=t.toolbar)==null||he.setPageScale(ee.presetValue,ee.scale),t.pdfViewer.update()}function Q(ee){t.pdfThumbnailViewer&&(t.pdfThumbnailViewer.pagesRotation=ee.pagesRotation),t.forceRendering(),t.pdfViewer.currentPageNumber=ee.pageNumber}function le({pageNumber:ee,pageLabel:he}){var ve,U,pe,Ce,we;(ve=t.toolbar)==null||ve.setPageNumber(ee,he),(U=t.secondaryToolbar)==null||U.setPageNumber(ee),((pe=t.pdfSidebar)==null?void 0:pe.visibleView)===a.SidebarView.THUMBS&&((Ce=t.pdfThumbnailViewer)==null||Ce.scrollThumbnailIntoView(ee));const re=t.pdfViewer.getPageView(ee-1);(we=t.toolbar)==null||we.updateLoadingIndicatorState((re==null?void 0:re.renderingState)===a.RenderingStates.RUNNING)}function ue(ee){t.pdfViewer.refresh()}function Ie(ee){document.visibilityState==="visible"&&ze()}let Re=null;function ze(){Re&&clearTimeout(Re),Re=setTimeout(function(){Re=null},y)}function je(ee){const{pdfViewer:he,supportedMouseWheelZoomModifierKeys:re,supportsPinchToZoom:ve}=t;if(he.isInPresentationMode)return;const U=ee.deltaMode;let pe=Math.exp(-ee.deltaY/100);const Ce=!1,we=ee.ctrlKey&&!t._isCtrlKeyDown&&U===WheelEvent.DOM_DELTA_PIXEL&&ee.deltaX===0&&(Math.abs(pe-1)<.05||Ce)&&ee.deltaZ===0;if(we||ee.ctrlKey&&re.ctrlKey||ee.metaKey&&re.metaKey){if(ee.preventDefault(),Re||document.visibilityState==="hidden")return;const D=he.currentScale;if(we&&ve)if(pe=t._accumulateFactor(D,pe,"_wheelUnusedFactor"),pe<1)t.zoomOut(null,pe);else if(pe>1)t.zoomIn(null,pe);else return;else{const x=(0,a.normalizeWheelEventDirection)(ee);let W=0;if(U===WheelEvent.DOM_DELTA_LINE||U===WheelEvent.DOM_DELTA_PAGE?Math.abs(x)>=1?W=Math.sign(x):W=t._accumulateTicks(x,"_wheelUnusedTicks"):W=t._accumulateTicks(x/30,"_wheelUnusedTicks"),W<0)t.zoomOut(-W);else if(W>0)t.zoomIn(W);else return}t._centerAtPos(D,ee.clientX,ee.clientY)}else ze()}function Ne(ee){if(t.pdfViewer.isInPresentationMode||ee.touches.length<2)return;if(ee.preventDefault(),ee.touches.length!==2){t._touchInfo=null;return}let[he,re]=ee.touches;he.identifier>re.identifier&&([he,re]=[re,he]),t._touchInfo={touch0X:he.pageX,touch0Y:he.pageY,touch1X:re.pageX,touch1Y:re.pageY}}function Ue(ee){if(!t._touchInfo||ee.touches.length!==2)return;const{pdfViewer:he,_touchInfo:re,supportsPinchToZoom:ve}=t;let[U,pe]=ee.touches;U.identifier>pe.identifier&&([U,pe]=[pe,U]);const{pageX:Ce,pageY:we}=U,{pageX:D,pageY:x}=pe,{touch0X:W,touch0Y:G,touch1X:se,touch1Y:be}=re;if(Math.abs(W-Ce)<=1&&Math.abs(G-we)<=1&&Math.abs(se-D)<=1&&Math.abs(be-x)<=1)return;if(re.touch0X=Ce,re.touch0Y=we,re.touch1X=D,re.touch1Y=x,W===Ce&&G===we){const ye=se-Ce,Fe=be-we,Me=D-Ce,Oe=x-we,He=ye*Oe-Fe*Me;if(Math.abs(He)>.02*Math.hypot(ye,Fe)*Math.hypot(Me,Oe))return}else if(se===D&&be===x){const ye=W-D,Fe=G-x,Me=Ce-D,Oe=we-x,He=ye*Oe-Fe*Me;if(Math.abs(He)>.02*Math.hypot(ye,Fe)*Math.hypot(Me,Oe))return}else{const ye=Ce-W,Fe=D-se,Me=we-G,Oe=x-be;if(ye*Fe+Me*Oe>=0)return}ee.preventDefault();const ke=Math.hypot(Ce-D,we-x)||1,$=Math.hypot(W-se,G-be)||1,de=he.currentScale;if(ve){const ye=t._accumulateFactor(de,ke/$,"_touchUnusedFactor");if(ye<1)t.zoomOut(null,ye);else if(ye>1)t.zoomIn(null,ye);else return}else{const Fe=t._accumulateTicks((ke-$)/30,"_touchUnusedTicks");if(Fe<0)t.zoomOut(-Fe);else if(Fe>0)t.zoomIn(Fe);else return}t._centerAtPos(de,(Ce+D)/2,(we+x)/2)}function Xe(ee){t._touchInfo&&(ee.preventDefault(),t._touchInfo=null,t._touchUnusedTicks=0,t._touchUnusedFactor=1)}function We(ee){var re,ve,U;if(!((re=t.secondaryToolbar)!=null&&re.isOpen))return;const he=t.appConfig;(t.pdfViewer.containsElement(ee.target)||(ve=he.toolbar)!=null&&ve.container.contains(ee.target)&&ee.target!==((U=he.secondaryToolbar)==null?void 0:U.toggleButton))&&t.secondaryToolbar.close()}function Le(ee){ee.key==="Control"&&(t._isCtrlKeyDown=!1)}function _(ee){var x,W,G,se,be,ke;if(t._isCtrlKeyDown=ee.key==="Control",t.overlayManager.active)return;const{eventBus:he,pdfViewer:re}=t,ve=re.isInPresentationMode;let U=!1,pe=!1;const Ce=(ee.ctrlKey?1:0)|(ee.altKey?2:0)|(ee.shiftKey?4:0)|(ee.metaKey?8:0);if(Ce===1||Ce===8||Ce===5||Ce===12)switch(ee.keyCode){case 70:!t.supportsIntegratedFind&&!ee.shiftKey&&((x=t.findBar)==null||x.open(),U=!0);break;case 71:if(!t.supportsIntegratedFind){const{state:$}=t.findController;if($){const de={source:window,type:"again",findPrevious:Ce===5||Ce===12};he.dispatch("find",{...$,...de})}U=!0}break;case 61:case 107:case 187:case 171:t.zoomIn(),U=!0;break;case 173:case 109:case 189:t.zoomOut(),U=!0;break;case 48:case 96:ve||(setTimeout(function(){t.zoomReset()}),U=!1);break;case 38:(ve||t.page>1)&&(t.page=1,U=!0,pe=!0);break;case 40:(ve||t.page<t.pagesCount)&&(t.page=t.pagesCount,U=!0,pe=!0);break}if(Ce===1||Ce===8)switch(ee.keyCode){case 83:he.dispatch("download",{source:window}),U=!0;break;case 79:he.dispatch("openfile",{source:window}),U=!0;break}if(Ce===3||Ce===10)switch(ee.keyCode){case 80:t.requestPresentationMode(),U=!0,t.externalServices.reportTelemetry({type:"buttons",data:{id:"presentationModeKeyboard"}});break;case 71:t.appConfig.toolbar&&(t.appConfig.toolbar.pageNumber.select(),U=!0);break}if(U){pe&&!ve&&re.focus(),ee.preventDefault();return}const we=(0,a.getActiveOrFocusedElement)(),D=we==null?void 0:we.tagName.toUpperCase();if(!((D==="INPUT"||D==="TEXTAREA"||D==="SELECT"||we!=null&&we.isContentEditable)&&ee.keyCode!==27)){if(Ce===0){let $=0,de=!1;switch(ee.keyCode){case 38:case 33:re.isVerticalScrollbarEnabled&&(de=!0),$=-1;break;case 8:ve||(de=!0),$=-1;break;case 37:re.isHorizontalScrollbarEnabled&&(de=!0);case 75:case 80:$=-1;break;case 27:(W=t.secondaryToolbar)!=null&&W.isOpen&&(t.secondaryToolbar.close(),U=!0),!t.supportsIntegratedFind&&((G=t.findBar)!=null&&G.opened)&&(t.findBar.close(),U=!0);break;case 40:case 34:re.isVerticalScrollbarEnabled&&(de=!0),$=1;break;case 13:case 32:ve||(de=!0),$=1;break;case 39:re.isHorizontalScrollbarEnabled&&(de=!0);case 74:case 78:$=1;break;case 36:(ve||t.page>1)&&(t.page=1,U=!0,pe=!0);break;case 35:(ve||t.page<t.pagesCount)&&(t.page=t.pagesCount,U=!0,pe=!0);break;case 83:(se=t.pdfCursorTools)==null||se.switchTool(T.CursorTool.SELECT);break;case 72:(be=t.pdfCursorTools)==null||be.switchTool(T.CursorTool.HAND);break;case 82:t.rotatePages(90);break;case 115:(ke=t.pdfSidebar)==null||ke.toggle();break}$!==0&&(!de||re.currentScaleValue==="page-fit")&&($>0?re.nextPage():re.previousPage(),U=!0)}if(Ce===4)switch(ee.keyCode){case 13:case 32:if(!ve&&re.currentScaleValue!=="page-fit")break;re.previousPage(),U=!0;break;case 82:t.rotatePages(-90);break}!U&&!ve&&(ee.keyCode>=33&&ee.keyCode<=40||ee.keyCode===32&&D!=="BUTTON")&&(pe=!0),pe&&!re.containsElement(we)&&re.focus(),U&&ee.preventDefault()}}function z(ee){return ee.preventDefault(),ee.returnValue="",!1}function fe(ee){t.externalServices.updateEditorStates(ee)}return{validateFileURL:p,loadFakeWorker:b,loadPDFBug:f,reportPageStatsPDFBug:m,webViewerPageRender:i,webViewerPageRendered:s,webViewerPageMode:h,webViewerNamedAction:c,webViewerPresentationModeChanged:o,webViewerSidebarViewChanged:v,webViewerUpdateViewarea:w,webViewerScrollModeChanged:B,webViewerSpreadModeChanged:K,webViewerResize:C,webViewerHashchange:V,webViewerFileInputChange:q,webViewerOpenFile:X,webViewerPresentationMode:E,webViewerSwitchAnnotationEditorMode:F,webViewerSwitchAnnotationEditorParams:k,webViewerPrint:ie,webViewerDownload:_e,webViewerOpenInExternalApp:R,webViewerFirstPage:g,webViewerLastPage:n,webViewerNextPage:u,webViewerPreviousPage:L,webViewerZoomIn:I,webViewerZoomOut:j,webViewerZoomReset:Y,webViewerPageNumberChanged:te,webViewerScaleChanged:Se,webViewerRotateCw:ge,webViewerRotateCcw:ne,webViewerOptionalContentConfig:ce,webViewerSwitchScrollMode:Ee,webViewerSwitchSpreadMode:me,webViewerDocumentProperties:xe,webViewerFindFromUrlHash:De,webViewerUpdateFindMatchesCount:Ae,webViewerUpdateFindControlState:Ve,webViewerScaleChanging:oe,webViewerRotationChanging:Q,webViewerPageChanging:le,webViewerResolutionChange:ue,webViewerVisibilityChange:Ie,setZoomDisabledTimeout:ze,webViewerWheel:je,webViewerTouchStart:Ne,webViewerTouchMove:Ue,webViewerTouchEnd:Xe,webViewerClick:We,webViewerKeyUp:Le,webViewerKeyDown:_,beforeUnload:z,webViewerAnnotationEditorStatesChanged:fe}}},(ae,A)=>{var me,xe,De,Ae,Ve;Object.defineProperty(A,"__esModule",{value:!0}),A.animationStarted=A.VERTICAL_PADDING=A.UNKNOWN_SCALE=A.TextLayerMode=A.SpreadMode=A.SidebarView=A.ScrollMode=A.SCROLLBAR_PADDING=A.RenderingStates=A.ProgressBar=A.PresentationModeState=A.OutputScale=A.MIN_SCALE=A.MAX_SCALE=A.MAX_AUTO_SCALE=A.DEFAULT_SCALE_VALUE=A.DEFAULT_SCALE_DELTA=A.DEFAULT_SCALE=A.CursorTool=A.AutoPrintRegExp=void 0,A.apiPageLayoutToViewerModes=ge,A.apiPageModeToSidebarView=ne,A.approximateFraction=q,A.backtrackBeforeAllVisibleElements=F,A.binarySearchFirstItem=V,A.docStyle=void 0,A.getActiveOrFocusedElement=Se,A.getPageSizeInches=E,A.getVisibleElements=k,A.isPortraitOrientation=L,A.isValidRotation=g,A.isValidScrollMode=n,A.isValidSpreadMode=u,A.noContextMenuHandler=ie,A.normalizeWheelEventDelta=R,A.normalizeWheelEventDirection=_e,A.parseQueryString=B,A.removeNullCharacters=C,A.roundToDivide=X,A.scrollIntoView=v,A.toggleCheckedBtn=ce,A.toggleExpandedBtn=Ee,A.watchScroll=w;const P="auto";A.DEFAULT_SCALE_VALUE=P;const a=1;A.DEFAULT_SCALE=a;const l=1.1;A.DEFAULT_SCALE_DELTA=l;const T=.1;A.MIN_SCALE=T;const y=10;A.MAX_SCALE=y;const S=0;A.UNKNOWN_SCALE=S;const t=1.25;A.MAX_AUTO_SCALE=t;const r=40;A.SCROLLBAR_PADDING=r;const d=5;A.VERTICAL_PADDING=d;const p={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3};A.RenderingStates=p;const b={UNKNOWN:0,NORMAL:1,CHANGING:2,FULLSCREEN:3};A.PresentationModeState=b;const f={UNKNOWN:-1,NONE:0,THUMBS:1,OUTLINE:2,ATTACHMENTS:3,LAYERS:4};A.SidebarView=f;const m={DISABLE:0,ENABLE:1,ENABLE_PERMISSIONS:2};A.TextLayerMode=m;const i={UNKNOWN:-1,VERTICAL:0,HORIZONTAL:1,WRAPPED:2,PAGE:3};A.ScrollMode=i;const s={UNKNOWN:-1,NONE:0,ODD:1,EVEN:2};A.SpreadMode=s;const h={SELECT:0,HAND:1,ZOOM:2};A.CursorTool=h;const c=/\bprint\s*\(/;A.AutoPrintRegExp=c;class o{constructor(){const Q=window.devicePixelRatio||1;this.sx=Q,this.sy=Q}get scaled(){return this.sx!==1||this.sy!==1}}A.OutputScale=o;function v(oe,Q,le=!1){let ue=oe.offsetParent;if(!ue){console.error("offsetParent is not set -- cannot scroll");return}let Ie=oe.offsetTop+oe.clientTop,Re=oe.offsetLeft+oe.clientLeft;for(;ue.clientHeight===ue.scrollHeight&&ue.clientWidth===ue.scrollWidth||le&&(ue.classList.contains("markedContent")||getComputedStyle(ue).overflow==="hidden");)if(Ie+=ue.offsetTop,Re+=ue.offsetLeft,ue=ue.offsetParent,!ue)return;Q&&(Q.top!==void 0&&(Ie+=Q.top),Q.left!==void 0&&(Re+=Q.left,ue.scrollLeft=Re)),ue.scrollTop=Ie}function w(oe,Q){const le=function(Re){Ie||(Ie=window.requestAnimationFrame(function(){Ie=null;const je=oe.scrollLeft,Ne=ue.lastX;je!==Ne&&(ue.right=je>Ne),ue.lastX=je;const Ue=oe.scrollTop,Xe=ue.lastY;Ue!==Xe&&(ue.down=Ue>Xe),ue.lastY=Ue,Q(ue)}))},ue={right:!0,down:!0,lastX:oe.scrollLeft,lastY:oe.scrollTop,_eventHandler:le};let Ie=null;return oe.addEventListener("scroll",le,!0),ue}function B(oe){const Q=new Map;for(const[le,ue]of new URLSearchParams(oe))Q.set(le.toLowerCase(),ue);return Q}const K=/[\x01-\x1F]/g;function C(oe,Q=!1){return typeof oe!="string"?(console.error("The argument must be a string."),oe):(Q&&(oe=oe.replaceAll(K," ")),oe.replaceAll("\0",""))}function V(oe,Q,le=0){let ue=le,Ie=oe.length-1;if(Ie<0||!Q(oe[Ie]))return oe.length;if(Q(oe[ue]))return ue;for(;ue<Ie;){const Re=ue+Ie>>1,ze=oe[Re];Q(ze)?Ie=Re:ue=Re+1}return ue}function q(oe){if(Math.floor(oe)===oe)return[oe,1];const Q=1/oe,le=8;if(Q>le)return[1,le];if(Math.floor(Q)===Q)return[1,Q];const ue=oe>1?Q:oe;let Ie=0,Re=1,ze=1,je=1;for(;;){const Ue=Ie+ze,Xe=Re+je;if(Xe>le)break;ue<=Ue/Xe?(ze=Ue,je=Xe):(Ie=Ue,Re=Xe)}let Ne;return ue-Ie/Re<ze/je-ue?Ne=ue===oe?[Ie,Re]:[Re,Ie]:Ne=ue===oe?[ze,je]:[je,ze],Ne}function X(oe,Q){const le=oe%Q;return le===0?oe:Math.round(oe-le+Q)}function E({view:oe,userUnit:Q,rotate:le}){const[ue,Ie,Re,ze]=oe,je=le%180!==0,Ne=(Re-ue)/72*Q,Ue=(ze-Ie)/72*Q;return{width:je?Ue:Ne,height:je?Ne:Ue}}function F(oe,Q,le){if(oe<2)return oe;let ue=Q[oe].div,Ie=ue.offsetTop+ue.clientTop;Ie>=le&&(ue=Q[oe-1].div,Ie=ue.offsetTop+ue.clientTop);for(let Re=oe-2;Re>=0&&(ue=Q[Re].div,!(ue.offsetTop+ue.clientTop+ue.clientHeight<=Ie));--Re)oe=Re;return oe}function k({scrollEl:oe,views:Q,sortByVisibility:le=!1,horizontal:ue=!1,rtl:Ie=!1}){const Re=oe.scrollTop,ze=Re+oe.clientHeight,je=oe.scrollLeft,Ne=je+oe.clientWidth;function Ue(re){const ve=re.div;return ve.offsetTop+ve.clientTop+ve.clientHeight>Re}function Xe(re){const ve=re.div,U=ve.offsetLeft+ve.clientLeft,pe=U+ve.clientWidth;return Ie?U<Ne:pe>je}const We=[],Le=new Set,_=Q.length;let z=V(Q,ue?Xe:Ue);z>0&&z<_&&!ue&&(z=F(z,Q,Re));let fe=ue?Ne:-1;for(let re=z;re<_;re++){const ve=Q[re],U=ve.div,pe=U.offsetLeft+U.clientLeft,Ce=U.offsetTop+U.clientTop,we=U.clientWidth,D=U.clientHeight,x=pe+we,W=Ce+D;if(fe===-1)W>=ze&&(fe=W);else if((ue?pe:Ce)>fe)break;if(W<=Re||Ce>=ze||x<=je||pe>=Ne)continue;const G=Math.max(0,Re-Ce)+Math.max(0,W-ze),se=Math.max(0,je-pe)+Math.max(0,x-Ne),be=(D-G)/D,ke=(we-se)/we,$=be*ke*100|0;We.push({id:ve.id,x:pe,y:Ce,view:ve,percent:$,widthPercent:ke*100|0}),Le.add(ve.id)}const ee=We[0],he=We.at(-1);return le&&We.sort(function(re,ve){const U=re.percent-ve.percent;return Math.abs(U)>.001?-U:re.id-ve.id}),{first:ee,last:he,views:We,ids:Le}}function ie(oe){oe.preventDefault()}function _e(oe){let Q=Math.hypot(oe.deltaX,oe.deltaY);const le=Math.atan2(oe.deltaY,oe.deltaX);return-.25*Math.PI<le&&le<.75*Math.PI&&(Q=-Q),Q}function R(oe){const Q=oe.deltaMode;let le=_e(oe);const ue=30,Ie=30;return Q===WheelEvent.DOM_DELTA_PIXEL?le/=ue*Ie:Q===WheelEvent.DOM_DELTA_LINE&&(le/=Ie),le}function g(oe){return Number.isInteger(oe)&&oe%90===0}function n(oe){return Number.isInteger(oe)&&Object.values(i).includes(oe)&&oe!==i.UNKNOWN}function u(oe){return Number.isInteger(oe)&&Object.values(s).includes(oe)&&oe!==s.UNKNOWN}function L(oe){return oe.width<=oe.height}const I=new Promise(function(oe){window.requestAnimationFrame(oe)});A.animationStarted=I;const j=document.documentElement.style;A.docStyle=j;function Y(oe,Q,le){return Math.min(Math.max(oe,Q),le)}class te{constructor(Q){M(this,me,null);M(this,xe,null);M(this,De,0);M(this,Ae,null);M(this,Ve,!0);J(this,me,Q.classList),J(this,Ae,Q.style)}get percent(){return e(this,De)}set percent(Q){if(J(this,De,Y(Q,0,100)),isNaN(Q)){e(this,me).add("indeterminate");return}e(this,me).remove("indeterminate"),e(this,Ae).setProperty("--progressBar-percent",`${e(this,De)}%`)}setWidth(Q){if(!Q)return;const ue=Q.parentNode.offsetWidth-Q.offsetWidth;ue>0&&e(this,Ae).setProperty("--progressBar-end-offset",`${ue}px`)}setDisableAutoFetch(Q=5e3){isNaN(e(this,De))||(e(this,xe)&&clearTimeout(e(this,xe)),this.show(),J(this,xe,setTimeout(()=>{J(this,xe,null),this.hide()},Q)))}hide(){e(this,Ve)&&(J(this,Ve,!1),e(this,me).add("hidden"))}show(){e(this,Ve)||(J(this,Ve,!0),e(this,me).remove("hidden"))}}me=new WeakMap,xe=new WeakMap,De=new WeakMap,Ae=new WeakMap,Ve=new WeakMap,A.ProgressBar=te;function Se(){let oe=document,Q=oe.activeElement||oe.querySelector(":focus");for(;Q!=null&&Q.shadowRoot;)oe=Q.shadowRoot,Q=oe.activeElement||oe.querySelector(":focus");return Q}function ge(oe){let Q=i.VERTICAL,le=s.NONE;switch(oe){case"SinglePage":Q=i.PAGE;break;case"OneColumn":break;case"TwoPageLeft":Q=i.PAGE;case"TwoColumnLeft":le=s.ODD;break;case"TwoPageRight":Q=i.PAGE;case"TwoColumnRight":le=s.EVEN;break}return{scrollMode:Q,spreadMode:le}}function ne(oe){switch(oe){case"UseNone":return f.NONE;case"UseThumbs":return f.THUMBS;case"UseOutlines":return f.OUTLINE;case"UseAttachments":return f.ATTACHMENTS;case"UseOC":return f.LAYERS}return f.NONE}function ce(oe,Q,le=null){oe.classList.toggle("toggled",Q),oe.setAttribute("aria-checked",Q),le==null||le.classList.toggle("hidden",!Q)}function Ee(oe,Q,le=null){oe.classList.toggle("toggled",Q),oe.setAttribute("aria-expanded",Q),le==null||le.classList.toggle("hidden",!Q)}},ae=>{let A;typeof window<"u"&&window["pdfjs-dist/build/pdf"]?A=window["pdfjs-dist/build/pdf"]:A=requirePdf(),ae.exports=A},(ae,A,P)=>{var S,t,r,Gn;Object.defineProperty(A,"__esModule",{value:!0}),A.PDFCursorTools=void 0;var a=P(5),l=P(4),T=P(7);class y{constructor({container:b,eventBus:f,cursorToolOnLoad:m=l.CursorTool.SELECT}){M(this,r);M(this,S,l.CursorTool.SELECT);M(this,t,null);this.container=b,this.eventBus=f,O(this,r,Gn).call(this),Promise.resolve().then(()=>{this.switchTool(m)})}get activeTool(){return e(this,S)}switchTool(b){if(e(this,t)!==null||b===e(this,S))return;const f=()=>{switch(e(this,S)){case l.CursorTool.SELECT:break;case l.CursorTool.HAND:this._handTool.deactivate();break;case l.CursorTool.ZOOM:}};switch(b){case l.CursorTool.SELECT:f();break;case l.CursorTool.HAND:f(),this._handTool.activate();break;case l.CursorTool.ZOOM:default:console.error(`switchTool: "${b}" is an unsupported value.`);return}J(this,S,b),this.eventBus.dispatch("cursortoolchanged",{source:this,tool:b})}get _handTool(){return(0,a.shadow)(this,"_handTool",new T.GrabToPan({element:this.container}))}}S=new WeakMap,t=new WeakMap,r=new WeakSet,Gn=function(){this.eventBus._on("switchcursortool",s=>{this.switchTool(s.tool)});let b=a.AnnotationEditorType.NONE,f=l.PresentationModeState.NORMAL;const m=()=>{const s=e(this,S);this.switchTool(l.CursorTool.SELECT),e(this,t)??J(this,t,s)},i=()=>{const s=e(this,t);s!==null&&b===a.AnnotationEditorType.NONE&&f===l.PresentationModeState.NORMAL&&(J(this,t,null),this.switchTool(s))};this.eventBus._on("secondarytoolbarreset",s=>{e(this,t)!==null&&(b=a.AnnotationEditorType.NONE,f=l.PresentationModeState.NORMAL,i())}),this.eventBus._on("annotationeditormodechanged",({mode:s})=>{b=s,s===a.AnnotationEditorType.NONE?i():m()}),this.eventBus._on("presentationmodechanged",({state:s})=>{f=s,s===l.PresentationModeState.NORMAL?i():s===l.PresentationModeState.FULLSCREEN&&m()})},A.PDFCursorTools=y},(ae,A)=>{var l,Xn,y,qn,t,Kn;Object.defineProperty(A,"__esModule",{value:!0}),A.GrabToPan=void 0;const P="grab-to-pan-grab";class a{constructor({element:p}){M(this,l);M(this,y);M(this,t);this.element=p,this.document=p.ownerDocument,this.activate=this.activate.bind(this),this.deactivate=this.deactivate.bind(this),this.toggle=this.toggle.bind(this),this._onMouseDown=O(this,l,Xn).bind(this),this._onMouseMove=O(this,y,qn).bind(this),this._endPan=O(this,t,Kn).bind(this);const b=this.overlay=document.createElement("div");b.className="grab-to-pan-grabbing"}activate(){this.active||(this.active=!0,this.element.addEventListener("mousedown",this._onMouseDown,!0),this.element.classList.add(P))}deactivate(){this.active&&(this.active=!1,this.element.removeEventListener("mousedown",this._onMouseDown,!0),this._endPan(),this.element.classList.remove(P))}toggle(){this.active?this.deactivate():this.activate()}ignoreTarget(p){return p.matches("a[href], a[href] *, input, textarea, button, button *, select, option")}}l=new WeakSet,Xn=function(p){if(p.button!==0||this.ignoreTarget(p.target))return;if(p.originalTarget)try{p.originalTarget.tagName}catch{return}this.scrollLeftStart=this.element.scrollLeft,this.scrollTopStart=this.element.scrollTop,this.clientXStart=p.clientX,this.clientYStart=p.clientY,this.document.addEventListener("mousemove",this._onMouseMove,!0),this.document.addEventListener("mouseup",this._endPan,!0),this.element.addEventListener("scroll",this._endPan,!0),p.preventDefault(),p.stopPropagation();const b=document.activeElement;b&&!b.contains(p.target)&&b.blur()},y=new WeakSet,qn=function(p){if(this.element.removeEventListener("scroll",this._endPan,!0),!(p.buttons&1)){this._endPan();return}const b=p.clientX-this.clientXStart,f=p.clientY-this.clientYStart;this.element.scrollTo({top:this.scrollTopStart-f,left:this.scrollLeftStart-b,behavior:"instant"}),this.overlay.parentNode||document.body.append(this.overlay)},t=new WeakSet,Kn=function(){this.element.removeEventListener("scroll",this._endPan,!0),this.document.removeEventListener("mousemove",this._onMouseMove,!0),this.document.removeEventListener("mouseup",this._endPan,!0),this.overlay.remove()},A.GrabToPan=a},(ae,A,P)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.ViewerApplication=A.PDFPrintServiceFactory=void 0;var a=P(4),l=P(5),T=P(9),y=P(10),S=P(11),t=P(12),r=P(13),d=P(14),p=P(15),b=P(6),f=P(17),m=P(18),i=P(19),s=P(21),h=P(22),c=P(23),o=P(24),v=P(25),w=P(26),B=P(27),K=P(28),C=P(30),V=P(40),q=P(41),X=P(42),E=P(43);const F=1e4,k={UNKNOWN:-1,PREVIOUS:0,INITIAL:1},ie={AUTOMATIC:0,LIGHT:1,DARK:2},_e={instance:{supportsPrinting:!1,createPrintService(){throw new Error("Not implemented: createPrintService")}}};A.PDFPrintServiceFactory=_e;class R{constructor(){Ge(this,"initialBookmark",document.location.hash.substring(1));Ge(this,"_initializedCapability",new l.PromiseCapability);Ge(this,"appConfig",null);Ge(this,"pdfDocument",null);Ge(this,"pdfLoadingTask",null);Ge(this,"printService",null);Ge(this,"pdfViewer",null);Ge(this,"pdfThumbnailViewer",null);Ge(this,"pdfRenderingQueue",null);Ge(this,"pdfPresentationMode",null);Ge(this,"pdfDocumentProperties",null);Ge(this,"pdfLinkService",null);Ge(this,"pdfHistory",null);Ge(this,"pdfSidebar",null);Ge(this,"pdfOutlineViewer",null);Ge(this,"pdfAttachmentViewer",null);Ge(this,"pdfLayerViewer",null);Ge(this,"pdfCursorTools",null);Ge(this,"pdfScriptingManager",null);Ge(this,"store",null);Ge(this,"downloadManager",null);Ge(this,"overlayManager",null);Ge(this,"preferences",null);Ge(this,"toolbar",null);Ge(this,"secondaryToolbar",null);Ge(this,"eventBus",null);Ge(this,"l10n",null);Ge(this,"annotationEditorParams",null);Ge(this,"isInitialViewSet",!1);Ge(this,"downloadComplete",!1);Ge(this,"isViewerEmbedded",window.parent!==window);Ge(this,"url","");Ge(this,"baseUrl","");Ge(this,"_downloadUrl","");Ge(this,"externalServices",E.DefaultExternalServices);Ge(this,"_boundEvents",Object.create(null));Ge(this,"documentInfo",null);Ge(this,"metadata",null);Ge(this,"_contentDispositionFilename",null);Ge(this,"_contentLength",null);Ge(this,"_saveInProgress",!1);Ge(this,"_wheelUnusedTicks",0);Ge(this,"_wheelUnusedFactor",1);Ge(this,"_touchUnusedTicks",0);Ge(this,"_touchUnusedFactor",1);Ge(this,"_PDFBug",null);Ge(this,"_hasAnnotationEditors",!1);Ge(this,"_title",document.title);Ge(this,"_printAnnotationStoragePromise",null);Ge(this,"_touchInfo",null);Ge(this,"_isCtrlKeyDown",!1);Ge(this,"_nimbusDataPromise",null)}async initialize(n){const{appOptions:u}=this;this.preferences=this.externalServices.createPreferences(),this.appConfig=n,await this._initializeOptions(),this._forceCssTheme(),await this._initializeL10n(),this.isViewerEmbedded&&u.get("externalLinkTarget")===S.LinkTarget.NONE&&u.set("externalLinkTarget",S.LinkTarget.TOP),await this._initializeViewerComponents(),this.bindEvents(),this.bindWindowEvents();const L=n.appContainer||document.documentElement;this.l10n.translate(L).then(()=>{this.eventBus.dispatch("localized",{source:this})}),this._initializedCapability.resolve()}async _initializeOptions(){const{appOptions:n}=this;if(n.get("disablePreferences")){n.get("pdfBugEnabled")&&await this._parseHashParams();return}n._hasUserOptions()&&console.warn('_initializeOptions: The Preferences may override manually set AppOptions; please use the "disablePreferences"-option in order to prevent that.');try{n.setAll(await this.preferences.getAll())}catch(u){console.error(`_initializeOptions: "${u.message}".`)}n.get("pdfBugEnabled")&&await this._parseHashParams()}async _parseHashParams(){const{appOptions:n}=this,u=document.location.hash.substring(1);if(!u)return;const{mainContainer:L,viewerContainer:I}=this.appConfig,j=(0,a.parseQueryString)(u);if(j.get("disableworker")==="true")try{await loadFakeWorker()}catch(Y){console.error(`_parseHashParams: "${Y.message}".`)}if(j.has("disablerange")&&n.set("disableRange",j.get("disablerange")==="true"),j.has("disablestream")&&n.set("disableStream",j.get("disablestream")==="true"),j.has("disableautofetch")&&n.set("disableAutoFetch",j.get("disableautofetch")==="true"),j.has("disablefontface")&&n.set("disableFontFace",j.get("disablefontface")==="true"),j.has("disablehistory")&&n.set("disableHistory",j.get("disablehistory")==="true"),j.has("verbosity")&&n.set("verbosity",j.get("verbosity")|0),j.has("textlayer"))switch(j.get("textlayer")){case"off":n.set("textLayerMode",a.TextLayerMode.DISABLE);break;case"visible":case"shadow":case"hover":I.classList.add(`textLayer-${j.get("textlayer")}`);try{await loadPDFBug(this),this._PDFBug.loadCSS()}catch(Y){console.error(`_parseHashParams: "${Y.message}".`)}break}if(j.has("pdfbug")){n.set("pdfBug",!0),n.set("fontExtraProperties",!0);const Y=j.get("pdfbug").split(",");try{await loadPDFBug(this),this._PDFBug.init(L,Y)}catch(te){console.error(`_parseHashParams: "${te.message}".`)}}j.has("locale")&&n.set("locale",j.get("locale"))}async _initializeL10n(){const{appOptions:n}=this;this.l10n=this.externalServices.createL10n({locale:n.get("locale")});const u=await this.l10n.getDirection();document.getElementsByTagName("html")[0].dir=u}_forceCssTheme(){var L;const{appOptions:n}=this,u=n.get("viewerCssTheme");if(!(u===ie.AUTOMATIC||!Object.values(ie).includes(u)))try{const I=document.styleSheets[0],j=(I==null?void 0:I.cssRules)||[];for(let Y=0,te=j.length;Y<te;Y++){const Se=j[Y];if(Se instanceof CSSMediaRule&&((L=Se.media)==null?void 0:L[0])==="(prefers-color-scheme: dark)"){if(u===ie.LIGHT){I.deleteRule(Y);return}const ge=/^@media \(prefers-color-scheme: dark\) {\n\s*([\w\s-.,:;/\\{}()]+)\n}$/.exec(Se.cssText);ge!=null&&ge[1]&&(I.deleteRule(Y),I.insertRule(ge[1],Y));return}}}catch(I){console.error(`_forceCssTheme: "${I==null?void 0:I.message}".`)}}async _initializeViewerComponents(){var Ve,oe,Q,le,ue,Ie,Re,ze,je;const{appOptions:n}=this,{appConfig:u,externalServices:L,l10n:I}=this,j=L.isInAutomation?new y.AutomationEventBus:new y.EventBus;this.eventBus=j,this.overlayManager=new r.OverlayManager;const Y=new v.PDFRenderingQueue;Y.onIdle=this._cleanup.bind(this),this.pdfRenderingQueue=Y;const te=new S.PDFLinkService({eventBus:j,externalLinkTarget:n.get("externalLinkTarget"),externalLinkRel:n.get("externalLinkRel"),ignoreDestinationZoom:n.get("ignoreDestinationZoom")});this.pdfLinkService=te;const Se=L.createDownloadManager();this.downloadManager=Se;const ge=new i.PDFFindController({linkService:te,eventBus:j,updateMatchesCountOnProgress:!0});this.findController=ge;const ne=new w.PDFScriptingManager({eventBus:j,sandboxBundleSrc:n.get("sandboxBundleSrc"),externalServices:L,docProperties:this._scriptingDocProperties.bind(this)});this.pdfScriptingManager=ne;const ce=u.mainContainer,Ee=u.viewerContainer,me=n.get("annotationEditorMode"),xe=n.get("isOffscreenCanvasSupported")&&l.FeatureTest.isOffscreenCanvasSupported,De=n.get("forcePageColors")||window.matchMedia("(forced-colors: active)").matches?{background:n.get("pageColorsBackground"),foreground:n.get("pageColorsForeground")}:null,Ae=new C.PDFViewer({container:ce,viewer:Ee,eventBus:j,renderingQueue:Y,linkService:te,downloadManager:Se,findController:ge,scriptingManager:n.get("enableScripting")&&ne,l10n:I,textLayerMode:n.get("textLayerMode"),annotationMode:n.get("annotationMode"),annotationEditorMode:me,imageResourcesPath:n.get("imageResourcesPath"),enablePrintAutoRotate:n.get("enablePrintAutoRotate"),isOffscreenCanvasSupported:xe,maxCanvasPixels:n.get("maxCanvasPixels"),enablePermissions:n.get("enablePermissions"),pageColors:De});if(this.pdfViewer=Ae,Y.setViewer(Ae),te.setViewer(Ae),ne.setViewer(Ae),(Ve=u.sidebar)!=null&&Ve.thumbnailView&&(this.pdfThumbnailViewer=new K.PDFThumbnailViewer({container:u.sidebar.thumbnailView,eventBus:j,renderingQueue:Y,linkService:te,l10n:I,pageColors:De}),Y.setThumbnailViewer(this.pdfThumbnailViewer)),!this.isViewerEmbedded&&!n.get("disableHistory")&&(this.pdfHistory=new s.PDFHistory({linkService:te,eventBus:j}),te.setHistory(this.pdfHistory)),!this.supportsIntegratedFind&&u.findBar&&(this.findBar=new m.PDFFindBar(u.findBar,j,I)),u.annotationEditorParams)if(me!==l.AnnotationEditorType.DISABLE)n.get("enableStampEditor")&&xe&&((Q=(oe=u.toolbar)==null?void 0:oe.editorStampButton)==null||Q.classList.remove("hidden")),this.annotationEditorParams=new t.AnnotationEditorParams(u.annotationEditorParams,j);else for(const Ne of["editorModeButtons","editorModeSeparator"])(le=document.getElementById(Ne))==null||le.classList.add("hidden");u.documentProperties&&(this.pdfDocumentProperties=new f.PDFDocumentProperties(u.documentProperties,this.overlayManager,j,I,()=>this._docFilename)),(ue=u.secondaryToolbar)!=null&&ue.cursorHandToolButton&&(this.pdfCursorTools=new b.PDFCursorTools({container:ce,eventBus:j,cursorToolOnLoad:n.get("cursorToolOnLoad")})),u.toolbar&&(this.toolbar=new q.Toolbar(u.toolbar,j,I)),u.secondaryToolbar&&(this.secondaryToolbar=new V.SecondaryToolbar(u.secondaryToolbar,j,L)),this.supportsFullscreen&&((Ie=u.secondaryToolbar)!=null&&Ie.presentationModeButton)&&(this.pdfPresentationMode=new o.PDFPresentationMode({container:ce,pdfViewer:Ae,eventBus:j})),u.passwordOverlay&&(this.passwordPrompt=new d.PasswordPrompt(u.passwordOverlay,this.overlayManager,I,this.isViewerEmbedded)),(Re=u.sidebar)!=null&&Re.outlineView&&(this.pdfOutlineViewer=new c.PDFOutlineViewer({container:u.sidebar.outlineView,eventBus:j,linkService:te,downloadManager:Se})),(ze=u.sidebar)!=null&&ze.attachmentsView&&(this.pdfAttachmentViewer=new p.PDFAttachmentViewer({container:u.sidebar.attachmentsView,eventBus:j,downloadManager:Se})),(je=u.sidebar)!=null&&je.layersView&&(this.pdfLayerViewer=new h.PDFLayerViewer({container:u.sidebar.layersView,eventBus:j,l10n:I})),u.sidebar&&(this.pdfSidebar=new B.PDFSidebar({elements:u.sidebar,eventBus:j,l10n:I}),this.pdfSidebar.onToggled=this.forceRendering.bind(this),this.pdfSidebar.onUpdateThumbnails=()=>{var Ne;for(const Ue of Ae.getCachedPageViews())Ue.renderingState===a.RenderingStates.FINISHED&&((Ne=this.pdfThumbnailViewer.getThumbnail(Ue.id-1))==null||Ne.setImage(Ue));this.pdfThumbnailViewer.scrollThumbnailIntoView(Ae.currentPageNumber)})}async run(n,u){var ne,ce,Ee,me,xe,De;const{appOptions:L}=this;await this.initialize(n);const{appConfig:I,eventBus:j}=this;let Y;const te=document.location.search.substring(1);Y=(0,a.parseQueryString)(te).get("file")??L.get("defaultUrl"),u(Y);const ge=I.openFileInput;ge.value=null,ge.addEventListener("change",function(Ae){const{files:Ve}=Ae.target;!Ve||Ve.length===0||j.dispatch("fileinputchange",{source:this,fileInput:Ae.target})}),I.mainContainer.addEventListener("dragover",function(Ae){Ae.preventDefault(),Ae.dataTransfer.dropEffect=Ae.dataTransfer.effectAllowed==="copy"?"copy":"move"}),I.mainContainer.addEventListener("drop",function(Ae){Ae.preventDefault();const{files:Ve}=Ae.dataTransfer;!Ve||Ve.length===0||j.dispatch("fileinputchange",{source:this,fileInput:Ae.dataTransfer})}),this.supportsDocumentFonts||(L.set("disableFontFace",!0),this.l10n.get("web_fonts_disabled").then(Ae=>{console.warn(Ae)})),this.supportsPrinting||((ce=(ne=I.toolbar)==null?void 0:ne.print)==null||ce.classList.add("hidden"),(Ee=I.secondaryToolbar)==null||Ee.printButton.classList.add("hidden")),this.supportsFullscreen||(me=I.secondaryToolbar)==null||me.presentationModeButton.classList.add("hidden"),this.supportsIntegratedFind&&((De=(xe=I.toolbar)==null?void 0:xe.viewFind)==null||De.classList.add("hidden")),I.mainContainer.addEventListener("transitionend",function(Ae){Ae.target===this&&j.dispatch("resize",{source:this})},!0),Y?this.open({url:Y}):this._hideViewBookmark()}get initialized(){return this._initializedCapability.settled}get initializedPromise(){return this._initializedCapability.promise}zoomIn(n,u){const{appOptions:L}=this;this.pdfViewer.isInPresentationMode||this.pdfViewer.increaseScale({drawingDelay:L.get("defaultZoomDelay"),steps:n,scaleFactor:u})}zoomOut(n,u){const{appOptions:L}=this;this.pdfViewer.isInPresentationMode||this.pdfViewer.decreaseScale({drawingDelay:L.get("defaultZoomDelay"),steps:n,scaleFactor:u})}zoomReset(){this.pdfViewer.isInPresentationMode||(this.pdfViewer.currentScaleValue=a.DEFAULT_SCALE_VALUE)}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return this.pdfViewer.currentPageNumber}set page(n){this.pdfViewer.currentPageNumber=n}get supportsPrinting(){return _e.instance.supportsPrinting}get supportsFullscreen(){return(0,l.shadow)(this,"supportsFullscreen",document.fullscreenEnabled)}get supportsPinchToZoom(){return this.externalServices.supportsPinchToZoom}get supportsIntegratedFind(){return this.externalServices.supportsIntegratedFind}get supportsDocumentFonts(){return this.externalServices.supportsDocumentFonts}get loadingBar(){const n=document.getElementById("loadingBar"),u=n?new a.ProgressBar(n):null;return(0,l.shadow)(this,"loadingBar",u)}get supportedMouseWheelZoomModifierKeys(){return this.externalServices.supportedMouseWheelZoomModifierKeys}initPassiveLoading(n){throw new Error("Not implemented: initPassiveLoading")}setTitleUsingUrl(n="",u=null){this.url=n,this.baseUrl=n.split("#")[0],u&&(this._downloadUrl=u===n?this.baseUrl:u.split("#")[0]),(0,l.isDataScheme)(n)&&this._hideViewBookmark();let L=(0,l.getPdfFilenameFromUrl)(n,"");if(!L)try{L=decodeURIComponent((0,l.getFilenameFromUrl)(n))||n}catch{L=n}this.setTitle(L)}setTitle(n=this._title){if(this._title=n,this.isViewerEmbedded)return;const u=this._hasAnnotationEditors&&!this.pdfRenderingQueue.printing;document.title=`${u?"* ":""}${n}`}get _docFilename(){return this._contentDispositionFilename||(0,l.getPdfFilenameFromUrl)(this.url)}_hideViewBookmark(){var u;const{secondaryToolbar:n}=this.appConfig;n==null||n.viewBookmarkButton.classList.add("hidden"),n!=null&&n.presentationModeButton.classList.contains("hidden")&&((u=document.getElementById("viewBookmarkSeparator"))==null||u.classList.add("hidden"))}async close(){var u,L,I,j,Y,te,Se,ge,ne,ce,Ee,me;if(this._unblockDocumentLoadEvent(),this._hideViewBookmark(),!this.pdfLoadingTask)return;if(((u=this.pdfDocument)==null?void 0:u.annotationStorage.size)>0&&this._annotationStorageModified)try{await this.save()}catch{}const n=[];n.push(this.pdfLoadingTask.destroy()),this.pdfLoadingTask=null,this.pdfDocument&&(this.pdfDocument=null,(L=this.pdfThumbnailViewer)==null||L.setDocument(null),this.pdfViewer.setDocument(null),this.pdfLinkService.setDocument(null),(I=this.pdfDocumentProperties)==null||I.setDocument(null)),this.pdfLinkService.externalLinkEnabled=!0,this.store=null,this.isInitialViewSet=!1,this.downloadComplete=!1,this.url="",this.baseUrl="",this._downloadUrl="",this.documentInfo=null,this.metadata=null,this._contentDispositionFilename=null,this._contentLength=null,this._saveInProgress=!1,this._hasAnnotationEditors=!1,n.push(this.pdfScriptingManager.destroyPromise,this.passwordPrompt.close()),this.setTitle(),(j=this.pdfSidebar)==null||j.reset(),(Y=this.pdfOutlineViewer)==null||Y.reset(),(te=this.pdfAttachmentViewer)==null||te.reset(),(Se=this.pdfLayerViewer)==null||Se.reset(),(ge=this.pdfHistory)==null||ge.reset(),(ne=this.findBar)==null||ne.reset(),(ce=this.toolbar)==null||ce.reset(),(Ee=this.secondaryToolbar)==null||Ee.reset(),(me=this._PDFBug)==null||me.cleanup(),await Promise.all(n)}async open(n){const{appOptions:u}=this;let L=!1;typeof n=="string"?(n={url:n},L=!0):n!=null&&n.byteLength&&(n={data:n},L=!0),L&&console.error("The `PDFViewerApplication.open` signature was updated, please use an object instead."),this.pdfLoadingTask&&await this.close();const I=u.getAll(T.OptionKind.WORKER);Object.assign(l.GlobalWorkerOptions,I),n.url&&this.setTitleUsingUrl(n.originalUrl||n.url,n.url);const j=u.getAll(T.OptionKind.API),Y={canvasMaxAreaInBytes:this.externalServices.canvasMaxAreaInBytes,...j,...n},te=(0,l.getDocument)(Y);return this.pdfLoadingTask=te,te.onPassword=(Se,ge)=>{this.isViewerEmbedded&&this._unblockDocumentLoadEvent(),this.pdfLinkService.externalLinkEnabled=!1,this.passwordPrompt.setUpdateCallback(Se,ge),this.passwordPrompt.open()},te.onProgress=({loaded:Se,total:ge})=>{this.progress(Se/ge)},te.promise.then(Se=>{this.load(Se)},Se=>{if(te!==this.pdfLoadingTask)return;let ge="loading_error";return Se instanceof l.InvalidPDFException?ge="invalid_file_error":Se instanceof l.MissingPDFException?ge="missing_file_error":Se instanceof l.UnexpectedResponseException&&(ge="unexpected_response_error"),this.l10n.get(ge).then(ne=>{throw this._documentError(ne,{message:Se==null?void 0:Se.message}),Se})})}_ensureDownloadComplete(){if(!(this.pdfDocument&&this.downloadComplete))throw new Error("PDF document not downloaded.")}async download(n={}){const u=this._downloadUrl,L=this._docFilename;try{this._ensureDownloadComplete();const I=await this.pdfDocument.getData(),j=new Blob([I],{type:"application/pdf"});await this.downloadManager.download(j,u,L,n)}catch{await this.downloadManager.downloadUrl(u,L,n)}}async save(n={}){if(this._saveInProgress)return;this._saveInProgress=!0,await this.pdfScriptingManager.dispatchWillSave();const u=this._downloadUrl,L=this._docFilename;try{this._ensureDownloadComplete();const I=await this.pdfDocument.saveDocument(),j=new Blob([I],{type:"application/pdf"});await this.downloadManager.download(j,u,L,n)}catch(I){console.error(`Error when saving the document: ${I.message}`),await this.download(n)}finally{await this.pdfScriptingManager.dispatchDidSave(),this._saveInProgress=!1}this._hasAnnotationEditors&&this.externalServices.reportTelemetry({type:"editing",data:{type:"save"}})}downloadOrSave(n={}){var u;((u=this.pdfDocument)==null?void 0:u.annotationStorage.size)>0?this.save(n):this.download(n)}openInExternalApp(){this.downloadOrSave({openInExternalApp:!0})}_documentError(n,u=null){this._unblockDocumentLoadEvent(),this._otherError(n,u),this.eventBus.dispatch("documenterror",{source:this,message:n,reason:(u==null?void 0:u.message)??null})}_otherError(n,u=null){const L=[`PDF.js v${l.version||"?"} (build: ${l.build||"?"})`];u&&(L.push(`Message: ${u.message}`),u.stack?L.push(`Stack: ${u.stack}`):(u.filename&&L.push(`File: ${u.filename}`),u.lineNumber&&L.push(`Line: ${u.lineNumber}`))),console.error(`${n}

${L.join(`
`)}`)}progress(n){var I;const{appOptions:u}=this;if(!this.loadingBar||this.downloadComplete)return;const L=Math.round(n*100);L<=this.loadingBar.percent||(this.loadingBar.percent=L,(((I=this.pdfDocument)==null?void 0:I.loadingParams.disableAutoFetch)??u.get("disableAutoFetch"))&&this.loadingBar.setDisableAutoFetch())}load(n){var ce,Ee,me,xe;const{appOptions:u}=this;this.pdfDocument=n,n.getDownloadInfo().then(({length:De})=>{var Ae;this._contentLength=De,this.downloadComplete=!0,(Ae=this.loadingBar)==null||Ae.hide(),te.then(()=>{this.eventBus.dispatch("documentloaded",{source:this})})});const L=n.getPageLayout().catch(()=>{}),I=n.getPageMode().catch(()=>{}),j=n.getOpenAction().catch(()=>{});(ce=this.toolbar)==null||ce.setPagesCount(n.numPages,!1),(Ee=this.secondaryToolbar)==null||Ee.setPagesCount(n.numPages),this.pdfLinkService.setDocument(n),(me=this.pdfDocumentProperties)==null||me.setDocument(n);const Y=this.pdfViewer;Y.setDocument(n);const{firstPagePromise:te,onePageRendered:Se,pagesPromise:ge}=Y;(xe=this.pdfThumbnailViewer)==null||xe.setDocument(n);const ne=(this.store=new X.ViewHistory(n.fingerprints[0])).getMultiple({page:null,zoom:a.DEFAULT_SCALE_VALUE,scrollLeft:"0",scrollTop:"0",rotation:null,sidebarView:a.SidebarView.UNKNOWN,scrollMode:a.ScrollMode.UNKNOWN,spreadMode:a.SpreadMode.UNKNOWN}).catch(()=>{});te.then(De=>{var Ae;(Ae=this.loadingBar)==null||Ae.setWidth(this.appConfig.viewerContainer),this._initializeAnnotationStorageCallbacks(n),Promise.all([a.animationStarted,ne,L,I,j]).then(async([Ve,oe,Q,le,ue])=>{const Ie=u.get("viewOnLoad");this._initializePdfHistory({fingerprint:n.fingerprints[0],viewOnLoad:Ie,initialDest:ue==null?void 0:ue.dest});const Re=this.initialBookmark,ze=u.get("defaultZoomValue");let je=ze?`zoom=${ze}`:null,Ne=null,Ue=u.get("sidebarViewOnLoad"),Xe=u.get("scrollModeOnLoad"),We=u.get("spreadModeOnLoad");oe!=null&&oe.page&&Ie!==k.INITIAL&&(je=`page=${oe.page}&zoom=${ze||oe.zoom},${oe.scrollLeft},${oe.scrollTop}`,Ne=parseInt(oe.rotation,10),Ue===a.SidebarView.UNKNOWN&&(Ue=oe.sidebarView|0),Xe===a.ScrollMode.UNKNOWN&&(Xe=oe.scrollMode|0),We===a.SpreadMode.UNKNOWN&&(We=oe.spreadMode|0)),le&&Ue===a.SidebarView.UNKNOWN&&(Ue=(0,a.apiPageModeToSidebarView)(le)),Q&&Xe===a.ScrollMode.UNKNOWN&&We===a.SpreadMode.UNKNOWN&&(We=(0,a.apiPageLayoutToViewerModes)(Q).spreadMode),this.setInitialView(je,{rotation:Ne,sidebarView:Ue,scrollMode:Xe,spreadMode:We}),this.eventBus.dispatch("documentinit",{source:this}),this.isViewerEmbedded||Y.focus(),await Promise.race([ge,new Promise(Le=>{setTimeout(Le,F)})]),!(!Re&&!je)&&(Y.hasEqualPageSizes||(this.initialBookmark=Re,Y.currentScaleValue=Y.currentScaleValue,this.setInitialView(je)))}).catch(()=>{this.setInitialView()}).then(function(){Y.update()})}),ge.then(()=>{this._unblockDocumentLoadEvent(),this._initializeAutoPrint(n,j)},De=>{this.l10n.get("loading_error").then(Ae=>{this._documentError(Ae,{message:De==null?void 0:De.message})})}),Se.then(De=>{this.externalServices.reportTelemetry({type:"pageInfo",timestamp:De.timestamp}),this.pdfOutlineViewer&&n.getOutline().then(Ae=>{n===this.pdfDocument&&this.pdfOutlineViewer.render({outline:Ae,pdfDocument:n})}),this.pdfAttachmentViewer&&n.getAttachments().then(Ae=>{n===this.pdfDocument&&this.pdfAttachmentViewer.render({attachments:Ae})}),this.pdfLayerViewer&&Y.optionalContentConfigPromise.then(Ae=>{n===this.pdfDocument&&this.pdfLayerViewer.render({optionalContentConfig:Ae,pdfDocument:n})})}),this._initializePageLabels(n),this._initializeMetadata(n)}async _scriptingDocProperties(n){var u,L;return!this.documentInfo&&(await new Promise(I=>{this.eventBus._on("metadataloaded",I,{once:!0})}),n!==this.pdfDocument)||!this._contentLength&&(await new Promise(I=>{this.eventBus._on("documentloaded",I,{once:!0})}),n!==this.pdfDocument)?null:{...this.documentInfo,baseURL:this.baseUrl,filesize:this._contentLength,filename:this._docFilename,metadata:(u=this.metadata)==null?void 0:u.getRaw(),authors:(L=this.metadata)==null?void 0:L.get("dc:creator"),numPages:this.pagesCount,URL:this.url}}async _initializeAutoPrint(n,u){const[L,I]=await Promise.all([u,this.pdfViewer.enableScripting?null:n.getJSActions()]);if(n!==this.pdfDocument)return;let j=(L==null?void 0:L.action)==="Print";if(I){console.warn("Warning: JavaScript support is not enabled");for(const Y in I){if(j)break;switch(Y){case"WillClose":case"WillSave":case"DidSave":case"WillPrint":case"DidPrint":continue}j=I[Y].some(te=>a.AutoPrintRegExp.test(te))}}j&&this.triggerPrinting()}async _initializeMetadata(n){const{info:u,metadata:L,contentDispositionFilename:I,contentLength:j}=await n.getMetadata();if(n!==this.pdfDocument)return;this.documentInfo=u,this.metadata=L,this._contentDispositionFilename??(this._contentDispositionFilename=I),this._contentLength??(this._contentLength=j),console.log(`PDF ${n.fingerprints[0]} [${u.PDFFormatVersion} ${(u.Producer||"-").trim()} / ${(u.Creator||"-").trim()}] (PDF.js: ${l.version||"?"} [${l.build||"?"}])`);let Y=u.Title;const te=L==null?void 0:L.get("dc:title");te&&te!=="Untitled"&&!/[\uFFF0-\uFFFF]/g.test(te)&&(Y=te),Y?this.setTitle(`${Y} - ${this._contentDispositionFilename||this._title}`):this._contentDispositionFilename&&this.setTitle(this._contentDispositionFilename),u.IsXFAPresent&&!u.IsAcroFormPresent&&!n.isPureXfa?n.loadingParams.enableXfa?console.warn("Warning: XFA Foreground documents are not supported"):console.warn("Warning: XFA support is not enabled"):(u.IsAcroFormPresent||u.IsXFAPresent)&&!this.pdfViewer.renderForms&&console.warn("Warning: Interactive form support is not enabled"),u.IsSignaturesPresent&&console.warn("Warning: Digital signatures validation is not supported"),this.eventBus.dispatch("metadataloaded",{source:this})}async _initializePageLabels(n){const{appOptions:u}=this,L=await n.getPageLabels();if(n!==this.pdfDocument||!L||u.get("disablePageLabels"))return;const I=L.length;let j=0,Y=0;for(let ne=0;ne<I;ne++){const ce=L[ne];if(ce===(ne+1).toString())j++;else if(ce==="")Y++;else break}if(j>=I||Y>=I)return;const{pdfViewer:te,pdfThumbnailViewer:Se,toolbar:ge}=this;te.setPageLabels(L),Se==null||Se.setPageLabels(L),ge==null||ge.setPagesCount(I,!0),ge==null||ge.setPageNumber(te.currentPageNumber,te.currentPageLabel)}_initializePdfHistory({fingerprint:n,viewOnLoad:u,initialDest:L=null}){const{appOptions:I}=this;this.pdfHistory&&(this.pdfHistory.initialize({fingerprint:n,resetHistory:u===k.INITIAL,updateUrl:I.get("historyUpdateUrl")}),this.pdfHistory.initialBookmark&&(this.initialBookmark=this.pdfHistory.initialBookmark,this.initialRotation=this.pdfHistory.initialRotation),L&&!this.initialBookmark&&u===k.UNKNOWN&&(this.initialBookmark=JSON.stringify(L),this.pdfHistory.push({explicitDest:L,pageNumber:null})))}_initializeAnnotationStorageCallbacks(n){if(n!==this.pdfDocument)return;const{annotationStorage:u}=n;u.onSetModified=()=>{window.addEventListener("beforeunload",beforeUnload),this._annotationStorageModified=!0},u.onResetModified=()=>{window.removeEventListener("beforeunload",beforeUnload),delete this._annotationStorageModified},u.onAnnotationEditor=L=>{this._hasAnnotationEditors=!!L,this.setTitle(),L&&this.externalServices.reportTelemetry({type:"editing",data:{type:L}})}}setInitialView(n,{rotation:u,sidebarView:L,scrollMode:I,spreadMode:j}={}){var Se,ge,ne;const Y=ce=>{(0,a.isValidRotation)(ce)&&(this.pdfViewer.pagesRotation=ce)},te=(ce,Ee)=>{(0,a.isValidScrollMode)(ce)&&(this.pdfViewer.scrollMode=ce),(0,a.isValidSpreadMode)(Ee)&&(this.pdfViewer.spreadMode=Ee)};this.isInitialViewSet=!0,(Se=this.pdfSidebar)==null||Se.setInitialView(L),te(I,j),this.initialBookmark?(Y(this.initialRotation),delete this.initialRotation,this.pdfLinkService.setHash(this.initialBookmark),this.initialBookmark=null):n&&(Y(u),this.pdfLinkService.setHash(n)),(ge=this.toolbar)==null||ge.setPageNumber(this.pdfViewer.currentPageNumber,this.pdfViewer.currentPageLabel),(ne=this.secondaryToolbar)==null||ne.setPageNumber(this.pdfViewer.currentPageNumber),this.pdfViewer.currentScaleValue||(this.pdfViewer.currentScaleValue=a.DEFAULT_SCALE_VALUE)}_cleanup(){var n;this.pdfDocument&&(this.pdfViewer.cleanup(),(n=this.pdfThumbnailViewer)==null||n.cleanup(),this.pdfDocument.cleanup())}forceRendering(){var n;this.pdfRenderingQueue.printing=!!this.printService,this.pdfRenderingQueue.isThumbnailViewEnabled=((n=this.pdfSidebar)==null?void 0:n.visibleView)===a.SidebarView.THUMBS,this.pdfRenderingQueue.renderHighestPriority()}beforePrint(){const{appOptions:n}=this;if(this._printAnnotationStoragePromise=this.pdfScriptingManager.dispatchWillPrint().catch(()=>{}).then(()=>{var te;return(te=this.pdfDocument)==null?void 0:te.annotationStorage.print}),this.printService)return;if(!this.supportsPrinting){this.l10n.get("printing_not_supported").then(te=>{this._otherError(te)});return}if(!this.pdfViewer.pageViewsReady){this.l10n.get("printing_not_ready").then(te=>{window.alert(te)});return}const u=this.pdfViewer.getPagesOverview(),L=this.appConfig.printContainer,I=n.get("printResolution"),j=this.pdfViewer.optionalContentConfigPromise,Y=_e.instance.createPrintService(this.pdfDocument,u,L,I,j,this._printAnnotationStoragePromise,this.l10n);this.printService=Y,this.forceRendering(),this.setTitle(),Y.layout(),this._hasAnnotationEditors&&this.externalServices.reportTelemetry({type:"editing",data:{type:"print"}})}afterPrint(){var n;this._printAnnotationStoragePromise&&(this._printAnnotationStoragePromise.then(()=>{this.pdfScriptingManager.dispatchDidPrint()}),this._printAnnotationStoragePromise=null),this.printService&&(this.printService.destroy(),this.printService=null,(n=this.pdfDocument)==null||n.annotationStorage.resetModified()),this.forceRendering(),this.setTitle()}rotatePages(n){this.pdfViewer.pagesRotation+=n}requestPresentationMode(){var n;(n=this.pdfPresentationMode)==null||n.request()}triggerPrinting(){this.supportsPrinting&&window.print()}bindEvents(){const{appOptions:n}=this,{eventBus:u,_boundEvents:L}=this;L.beforePrint=this.beforePrint.bind(this),L.afterPrint=this.afterPrint.bind(this),u._on("resize",webViewerResize),u._on("hashchange",webViewerHashchange),u._on("beforeprint",L.beforePrint),u._on("afterprint",L.afterPrint),u._on("pagerender",webViewerPageRender),u._on("pagerendered",webViewerPageRendered),u._on("updateviewarea",webViewerUpdateViewarea),u._on("pagechanging",webViewerPageChanging),u._on("scalechanging",webViewerScaleChanging),u._on("rotationchanging",webViewerRotationChanging),u._on("sidebarviewchanged",webViewerSidebarViewChanged),u._on("pagemode",webViewerPageMode),u._on("namedaction",webViewerNamedAction),u._on("presentationmodechanged",webViewerPresentationModeChanged),u._on("presentationmode",webViewerPresentationMode),u._on("switchannotationeditormode",webViewerSwitchAnnotationEditorMode),u._on("switchannotationeditorparams",webViewerSwitchAnnotationEditorParams),u._on("print",webViewerPrint),u._on("download",webViewerDownload),u._on("openinexternalapp",webViewerOpenInExternalApp),u._on("firstpage",webViewerFirstPage),u._on("lastpage",webViewerLastPage),u._on("nextpage",webViewerNextPage),u._on("previouspage",webViewerPreviousPage),u._on("zoomin",webViewerZoomIn),u._on("zoomout",webViewerZoomOut),u._on("zoomreset",webViewerZoomReset),u._on("pagenumberchanged",webViewerPageNumberChanged),u._on("scalechanged",webViewerScaleChanged),u._on("rotatecw",webViewerRotateCw),u._on("rotateccw",webViewerRotateCcw),u._on("optionalcontentconfig",webViewerOptionalContentConfig),u._on("switchscrollmode",webViewerSwitchScrollMode),u._on("scrollmodechanged",webViewerScrollModeChanged),u._on("switchspreadmode",webViewerSwitchSpreadMode),u._on("spreadmodechanged",webViewerSpreadModeChanged),u._on("documentproperties",webViewerDocumentProperties),u._on("findfromurlhash",webViewerFindFromUrlHash),u._on("updatefindmatchescount",webViewerUpdateFindMatchesCount),u._on("updatefindcontrolstate",webViewerUpdateFindControlState),n.get("pdfBug")&&(L.reportPageStatsPDFBug=reportPageStatsPDFBug,u._on("pagerendered",L.reportPageStatsPDFBug),u._on("pagechanging",L.reportPageStatsPDFBug)),u._on("fileinputchange",webViewerFileInputChange),u._on("openfile",webViewerOpenFile)}bindWindowEvents(){const{eventBus:n,_boundEvents:u}=this;function L(I=null){I&&webViewerResolutionChange(I);const j=window.matchMedia(`(resolution: ${window.devicePixelRatio||1}dppx)`);j.addEventListener("change",L,{once:!0}),u.removeWindowResolutionChange||(u.removeWindowResolutionChange=function(){j.removeEventListener("change",L),u.removeWindowResolutionChange=null})}L(),u.windowResize=()=>{n.dispatch("resize",{source:window})},u.windowHashChange=()=>{n.dispatch("hashchange",{source:window,hash:document.location.hash.substring(1)})},u.windowBeforePrint=()=>{n.dispatch("beforeprint",{source:window})},u.windowAfterPrint=()=>{n.dispatch("afterprint",{source:window})},u.windowUpdateFromSandbox=I=>{n.dispatch("updatefromsandbox",{source:window,detail:I.detail})},window.addEventListener("visibilitychange",webViewerVisibilityChange),window.addEventListener("wheel",webViewerWheel,{passive:!1}),window.addEventListener("touchstart",webViewerTouchStart,{passive:!1}),window.addEventListener("touchmove",webViewerTouchMove,{passive:!1}),window.addEventListener("touchend",webViewerTouchEnd,{passive:!1}),window.addEventListener("click",webViewerClick),window.addEventListener("keydown",webViewerKeyDown),window.addEventListener("keyup",webViewerKeyUp),window.addEventListener("resize",u.windowResize),window.addEventListener("hashchange",u.windowHashChange),window.addEventListener("beforeprint",u.windowBeforePrint),window.addEventListener("afterprint",u.windowAfterPrint),window.addEventListener("updatefromsandbox",u.windowUpdateFromSandbox)}unbindEvents(){const{eventBus:n,_boundEvents:u}=this;n._off("resize",webViewerResize),n._off("hashchange",webViewerHashchange),n._off("beforeprint",u.beforePrint),n._off("afterprint",u.afterPrint),n._off("pagerender",webViewerPageRender),n._off("pagerendered",webViewerPageRendered),n._off("updateviewarea",webViewerUpdateViewarea),n._off("pagechanging",webViewerPageChanging),n._off("scalechanging",webViewerScaleChanging),n._off("rotationchanging",webViewerRotationChanging),n._off("sidebarviewchanged",webViewerSidebarViewChanged),n._off("pagemode",webViewerPageMode),n._off("namedaction",webViewerNamedAction),n._off("presentationmodechanged",webViewerPresentationModeChanged),n._off("presentationmode",webViewerPresentationMode),n._off("print",webViewerPrint),n._off("download",webViewerDownload),n._off("openinexternalapp",webViewerOpenInExternalApp),n._off("firstpage",webViewerFirstPage),n._off("lastpage",webViewerLastPage),n._off("nextpage",webViewerNextPage),n._off("previouspage",webViewerPreviousPage),n._off("zoomin",webViewerZoomIn),n._off("zoomout",webViewerZoomOut),n._off("zoomreset",webViewerZoomReset),n._off("pagenumberchanged",webViewerPageNumberChanged),n._off("scalechanged",webViewerScaleChanged),n._off("rotatecw",webViewerRotateCw),n._off("rotateccw",webViewerRotateCcw),n._off("optionalcontentconfig",webViewerOptionalContentConfig),n._off("switchscrollmode",webViewerSwitchScrollMode),n._off("scrollmodechanged",webViewerScrollModeChanged),n._off("switchspreadmode",webViewerSwitchSpreadMode),n._off("spreadmodechanged",webViewerSpreadModeChanged),n._off("documentproperties",webViewerDocumentProperties),n._off("findfromurlhash",webViewerFindFromUrlHash),n._off("updatefindmatchescount",webViewerUpdateFindMatchesCount),n._off("updatefindcontrolstate",webViewerUpdateFindControlState),u.reportPageStatsPDFBug&&(n._off("pagerendered",u.reportPageStatsPDFBug),n._off("pagechanging",u.reportPageStatsPDFBug),u.reportPageStatsPDFBug=null),n._off("fileinputchange",webViewerFileInputChange),n._off("openfile",webViewerOpenFile),u.beforePrint=null,u.afterPrint=null}unbindWindowEvents(){var u;const{_boundEvents:n}=this;window.removeEventListener("visibilitychange",webViewerVisibilityChange),window.removeEventListener("wheel",webViewerWheel,{passive:!1}),window.removeEventListener("touchstart",webViewerTouchStart,{passive:!1}),window.removeEventListener("touchmove",webViewerTouchMove,{passive:!1}),window.removeEventListener("touchend",webViewerTouchEnd,{passive:!1}),window.removeEventListener("click",webViewerClick),window.removeEventListener("keydown",webViewerKeyDown),window.removeEventListener("keyup",webViewerKeyUp),window.removeEventListener("resize",n.windowResize),window.removeEventListener("hashchange",n.windowHashChange),window.removeEventListener("beforeprint",n.windowBeforePrint),window.removeEventListener("afterprint",n.windowAfterPrint),window.removeEventListener("updatefromsandbox",n.windowUpdateFromSandbox),(u=n.removeWindowResolutionChange)==null||u.call(n),n.windowResize=null,n.windowHashChange=null,n.windowBeforePrint=null,n.windowAfterPrint=null,n.windowUpdateFromSandbox=null}_accumulateTicks(n,u){(this[u]>0&&n<0||this[u]<0&&n>0)&&(this[u]=0),this[u]+=n;const L=Math.trunc(this[u]);return this[u]-=L,L}_accumulateFactor(n,u,L){if(u===1)return 1;(this[L]>1&&u<1||this[L]<1&&u>1)&&(this[L]=1);const I=Math.floor(n*u*this[L]*100)/(100*n);return this[L]=u/I,I}_centerAtPos(n,u,L){const{pdfViewer:I}=this,j=I.currentScale/n-1;if(j!==0){const[Y,te]=I.containerTopLeft;I.container.scrollLeft+=(u-te)*j,I.container.scrollTop+=(L-Y)*j}}_unblockDocumentLoadEvent(){var n;(n=document.blockUnblockOnload)==null||n.call(document,!1),this._unblockDocumentLoadEvent=()=>{}}get scriptingReady(){return this.pdfScriptingManager.ready}}A.ViewerApplication=R},(ae,A)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.compatibilityParams=A.OptionKind=A.AppOptions=void 0;const P=Object.create(null);A.compatibilityParams=P;{const S=navigator.userAgent||"",t=navigator.platform||"",r=navigator.maxTouchPoints||1,d=/Android/.test(S),p=/\b(iPad|iPhone|iPod)(?=;)/.test(S)||t==="MacIntel"&&r>1;(function(){(p||d)&&(P.maxCanvasPixels=5242880)})()}const a={VIEWER:2,API:4,WORKER:8,PREFERENCE:128};A.OptionKind=a;const l={annotationEditorMode:{value:0,kind:a.VIEWER+a.PREFERENCE},annotationMode:{value:2,kind:a.VIEWER+a.PREFERENCE},cursorToolOnLoad:{value:0,kind:a.VIEWER+a.PREFERENCE},defaultZoomDelay:{value:400,kind:a.VIEWER+a.PREFERENCE},defaultZoomValue:{value:"",kind:a.VIEWER+a.PREFERENCE},disableHistory:{value:!1,kind:a.VIEWER},disablePageLabels:{value:!1,kind:a.VIEWER+a.PREFERENCE},enablePermissions:{value:!1,kind:a.VIEWER+a.PREFERENCE},enablePrintAutoRotate:{value:!0,kind:a.VIEWER+a.PREFERENCE},enableScripting:{value:!0,kind:a.VIEWER+a.PREFERENCE},enableStampEditor:{value:!0,kind:a.VIEWER+a.PREFERENCE},externalLinkRel:{value:"noopener noreferrer nofollow",kind:a.VIEWER},externalLinkTarget:{value:0,kind:a.VIEWER+a.PREFERENCE},historyUpdateUrl:{value:!1,kind:a.VIEWER+a.PREFERENCE},ignoreDestinationZoom:{value:!1,kind:a.VIEWER+a.PREFERENCE},imageResourcesPath:{value:"./images/",kind:a.VIEWER},maxCanvasPixels:{value:16777216,kind:a.VIEWER},forcePageColors:{value:!1,kind:a.VIEWER+a.PREFERENCE},pageColorsBackground:{value:"Canvas",kind:a.VIEWER+a.PREFERENCE},pageColorsForeground:{value:"CanvasText",kind:a.VIEWER+a.PREFERENCE},pdfBugEnabled:{value:!1,kind:a.VIEWER+a.PREFERENCE},printResolution:{value:150,kind:a.VIEWER},sidebarViewOnLoad:{value:-1,kind:a.VIEWER+a.PREFERENCE},scrollModeOnLoad:{value:-1,kind:a.VIEWER+a.PREFERENCE},spreadModeOnLoad:{value:-1,kind:a.VIEWER+a.PREFERENCE},textLayerMode:{value:1,kind:a.VIEWER+a.PREFERENCE},viewerCssTheme:{value:0,kind:a.VIEWER+a.PREFERENCE},viewOnLoad:{value:0,kind:a.VIEWER+a.PREFERENCE},cMapPacked:{value:!0,kind:a.API},cMapUrl:{value:"../web/cmaps/",kind:a.API},disableAutoFetch:{value:!1,kind:a.API+a.PREFERENCE},disableFontFace:{value:!1,kind:a.API+a.PREFERENCE},disableRange:{value:!1,kind:a.API+a.PREFERENCE},disableStream:{value:!1,kind:a.API+a.PREFERENCE},docBaseUrl:{value:"",kind:a.API},enableXfa:{value:!0,kind:a.API+a.PREFERENCE},fontExtraProperties:{value:!1,kind:a.API},isEvalSupported:{value:!0,kind:a.API},isOffscreenCanvasSupported:{value:!0,kind:a.API},maxImageSize:{value:-1,kind:a.API},pdfBug:{value:!1,kind:a.API},standardFontDataUrl:{value:"../web/standard_fonts/",kind:a.API},verbosity:{value:1,kind:a.API},workerPort:{value:null,kind:a.WORKER},workerSrc:{value:"../build/pdf.worker.js",kind:a.WORKER}};l.defaultUrl={value:"compressed.tracemonkey-pldi-09.pdf",kind:a.VIEWER},l.disablePreferences={value:!1,kind:a.VIEWER},l.locale={value:navigator.language||"en-US",kind:a.VIEWER},l.sandboxBundleSrc={value:"../build/pdf.sandbox.js",kind:a.VIEWER};const T=Object.create(null);class y{constructor(){throw new Error("Cannot initialize AppOptions.")}static get(t){const r=T[t];if(r!==void 0)return r;const d=l[t];if(d!==void 0)return P[t]??d.value}static getAll(t=null){const r=Object.create(null);for(const d in l){const p=l[d];if(t){if(!(t&p.kind))continue;if(t===a.PREFERENCE){const f=p.value,m=typeof f;if(m==="boolean"||m==="string"||m==="number"&&Number.isInteger(f)){r[d]=f;continue}throw new Error(`Invalid type for preference: ${d}`)}}const b=T[d];r[d]=b!==void 0?b:P[d]??p.value}return r}static set(t,r){T[t]=r}static setAll(t){for(const r in t)T[r]=t[r]}static remove(t){delete T[t]}}A.AppOptions=y,y._hasUserOptions=function(){return Object.keys(T).length>0}},(ae,A)=>{var y;Object.defineProperty(A,"__esModule",{value:!0}),A.WaitOnType=A.EventBus=A.AutomationEventBus=void 0,A.waitOnEventOrTimeout=a;const P={EVENT:"event",TIMEOUT:"timeout"};A.WaitOnType=P;function a({target:S,name:t,delay:r=0}){return new Promise(function(d,p){if(typeof S!="object"||!(t&&typeof t=="string")||!(Number.isInteger(r)&&r>=0))throw new Error("waitOnEventOrTimeout - invalid parameters.");function b(s){S instanceof l?S._off(t,f):S.removeEventListener(t,f),i&&clearTimeout(i),d(s)}const f=b.bind(null,P.EVENT);S instanceof l?S._on(t,f):S.addEventListener(t,f);const m=b.bind(null,P.TIMEOUT),i=setTimeout(m,r)})}class l{constructor(){M(this,y,Object.create(null))}on(t,r,d=null){this._on(t,r,{external:!0,once:d==null?void 0:d.once})}off(t,r,d=null){this._off(t,r,{external:!0,once:d==null?void 0:d.once})}dispatch(t,r){const d=e(this,y)[t];if(!d||d.length===0)return;let p;for(const{listener:b,external:f,once:m}of d.slice(0)){if(m&&this._off(t,b),f){(p||(p=[])).push(b);continue}b(r)}if(p){for(const b of p)b(r);p=null}}_on(t,r,d=null){var b;((b=e(this,y))[t]||(b[t]=[])).push({listener:r,external:(d==null?void 0:d.external)===!0,once:(d==null?void 0:d.once)===!0})}_off(t,r,d=null){const p=e(this,y)[t];if(p){for(let b=0,f=p.length;b<f;b++)if(p[b].listener===r){p.splice(b,1);return}}}}y=new WeakMap,A.EventBus=l;class T extends l{dispatch(t,r){throw new Error("Not implemented: AutomationEventBus.dispatch")}}A.AutomationEventBus=T},(ae,A,P)=>{var r,d,Ti,b,Yn;Object.defineProperty(A,"__esModule",{value:!0}),A.SimpleLinkService=A.PDFLinkService=A.LinkTarget=void 0;var a=P(4);const l="noopener noreferrer nofollow",T={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4};A.LinkTarget=T;function y(i,{url:s,target:h,rel:c,enabled:o=!0}={}){if(!s||typeof s!="string")throw new Error('A valid "url" parameter must provided.');const v=(0,a.removeNullCharacters)(s);o?i.href=i.title=v:(i.href="",i.title=`Disabled: ${v}`,i.onclick=()=>!1);let w="";switch(h){case T.NONE:break;case T.SELF:w="_self";break;case T.BLANK:w="_blank";break;case T.PARENT:w="_parent";break;case T.TOP:w="_top";break}i.target=w,i.rel=typeof c=="string"?c:l}const m=class{constructor({eventBus:s,externalLinkTarget:h=null,externalLinkRel:c=null,ignoreDestinationZoom:o=!1}={}){M(this,d);M(this,r,new Map);this.eventBus=s,this.externalLinkTarget=h,this.externalLinkRel=c,this.externalLinkEnabled=!0,this._ignoreDestinationZoom=o,this.baseUrl=null,this.pdfDocument=null,this.pdfViewer=null,this.pdfHistory=null}setDocument(s,h=null){this.baseUrl=h,this.pdfDocument=s,e(this,r).clear()}setViewer(s){this.pdfViewer=s}setHistory(s){this.pdfHistory=s}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return this.pdfViewer.currentPageNumber}set page(s){this.pdfViewer.currentPageNumber=s}get rotation(){return this.pdfViewer.pagesRotation}set rotation(s){this.pdfViewer.pagesRotation=s}get isInPresentationMode(){return this.pdfViewer.isInPresentationMode}async goToDestination(s){if(!this.pdfDocument)return;let h,c;if(typeof s=="string"?(h=s,c=await this.pdfDocument.getDestination(s)):(h=null,c=await s),!Array.isArray(c)){console.error(`PDFLinkService.goToDestination: "${c}" is not a valid destination array, for dest="${s}".`);return}O(this,d,Ti).call(this,s,h,c)}goToPage(s){if(!this.pdfDocument)return;const h=typeof s=="string"&&this.pdfViewer.pageLabelToPageNumber(s)||s|0;if(!(Number.isInteger(h)&&h>0&&h<=this.pagesCount)){console.error(`PDFLinkService.goToPage: "${s}" is not a valid page.`);return}this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.pushPage(h)),this.pdfViewer.scrollPageIntoView({pageNumber:h})}addLinkAttributes(s,h,c=!1){y(s,{url:h,target:c?T.BLANK:this.externalLinkTarget,rel:this.externalLinkRel,enabled:this.externalLinkEnabled})}getDestinationHash(s){if(typeof s=="string"){if(s.length>0)return this.getAnchorUrl("#"+escape(s))}else if(Array.isArray(s)){const h=JSON.stringify(s);if(h.length>0)return this.getAnchorUrl("#"+escape(h))}return this.getAnchorUrl("")}getAnchorUrl(s){return this.baseUrl?this.baseUrl+s:s}setHash(s){var o;if(!this.pdfDocument)return;let h,c;if(s.includes("=")){const v=(0,a.parseQueryString)(s);if(v.has("search")){const w=v.get("search").replaceAll('"',""),B=v.get("phrase")==="true";this.eventBus.dispatch("findfromurlhash",{source:this,query:B?w:w.match(/\S+/g)})}if(v.has("page")&&(h=v.get("page")|0||1),v.has("zoom")){const w=v.get("zoom").split(","),B=w[0],K=parseFloat(B);B.includes("Fit")?B==="Fit"||B==="FitB"?c=[null,{name:B}]:B==="FitH"||B==="FitBH"||B==="FitV"||B==="FitBV"?c=[null,{name:B},w.length>1?w[1]|0:null]:B==="FitR"?w.length!==5?console.error('PDFLinkService.setHash: Not enough parameters for "FitR".'):c=[null,{name:B},w[1]|0,w[2]|0,w[3]|0,w[4]|0]:console.error(`PDFLinkService.setHash: "${B}" is not a valid zoom value.`):c=[null,{name:"XYZ"},w.length>1?w[1]|0:null,w.length>2?w[2]|0:null,K?K/100:B]}c?this.pdfViewer.scrollPageIntoView({pageNumber:h||this.page,destArray:c,allowNegativeOffset:!0}):h&&(this.page=h),v.has("pagemode")&&this.eventBus.dispatch("pagemode",{source:this,mode:v.get("pagemode")}),v.has("nameddest")&&this.goToDestination(v.get("nameddest"))}else{c=unescape(s);try{c=JSON.parse(c),Array.isArray(c)||(c=c.toString())}catch{}if(typeof c=="string"||O(o=m,b,Yn).call(o,c)){this.goToDestination(c);return}console.error(`PDFLinkService.setHash: "${unescape(s)}" is not a valid destination.`)}}executeNamedAction(s){var h,c;switch(s){case"GoBack":(h=this.pdfHistory)==null||h.back();break;case"GoForward":(c=this.pdfHistory)==null||c.forward();break;case"NextPage":this.pdfViewer.nextPage();break;case"PrevPage":this.pdfViewer.previousPage();break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1;break}this.eventBus.dispatch("namedaction",{source:this,action:s})}async executeSetOCGState(s){const h=this.pdfDocument,c=await this.pdfViewer.optionalContentConfigPromise;if(h!==this.pdfDocument)return;let o;for(const v of s.state){switch(v){case"ON":case"OFF":case"Toggle":o=v;continue}switch(o){case"ON":c.setVisibility(v,!0);break;case"OFF":c.setVisibility(v,!1);break;case"Toggle":const w=c.getGroup(v);w&&c.setVisibility(v,!w.visible);break}}this.pdfViewer.optionalContentConfigPromise=Promise.resolve(c)}cachePageRef(s,h){if(!h)return;const c=h.gen===0?`${h.num}R`:`${h.num}R${h.gen}`;e(this,r).set(c,s)}_cachedPageNumber(s){if(!s)return null;const h=s.gen===0?`${s.num}R`:`${s.num}R${s.gen}`;return e(this,r).get(h)||null}};let S=m;r=new WeakMap,d=new WeakSet,Ti=function(s,h=null,c){const o=c[0];let v;if(typeof o=="object"&&o!==null){if(v=this._cachedPageNumber(o),!v){this.pdfDocument.getPageIndex(o).then(w=>{this.cachePageRef(w+1,o),O(this,d,Ti).call(this,s,h,c)}).catch(()=>{console.error(`PDFLinkService.#goToDestinationHelper: "${o}" is not a valid page reference, for dest="${s}".`)});return}}else if(Number.isInteger(o))v=o+1;else{console.error(`PDFLinkService.#goToDestinationHelper: "${o}" is not a valid destination reference, for dest="${s}".`);return}if(!v||v<1||v>this.pagesCount){console.error(`PDFLinkService.#goToDestinationHelper: "${v}" is not a valid page number, for dest="${s}".`);return}this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.push({namedDest:h,explicitDest:c,pageNumber:v})),this.pdfViewer.scrollPageIntoView({pageNumber:v,destArray:c,ignoreDestinationZoom:this._ignoreDestinationZoom})},b=new WeakSet,Yn=function(s){if(!Array.isArray(s))return!1;const h=s.length;if(h<2)return!1;const c=s[0];if(!(typeof c=="object"&&Number.isInteger(c.num)&&Number.isInteger(c.gen))&&!(Number.isInteger(c)&&c>=0))return!1;const o=s[1];if(!(typeof o=="object"&&typeof o.name=="string"))return!1;let v=!0;switch(o.name){case"XYZ":if(h!==5)return!1;break;case"Fit":case"FitB":return h===2;case"FitH":case"FitBH":case"FitV":case"FitBV":if(h!==3)return!1;break;case"FitR":if(h!==6)return!1;v=!1;break;default:return!1}for(let w=2;w<h;w++){const B=s[w];if(!(typeof B=="number"||v&&B===null))return!1}return!0},M(S,b),A.PDFLinkService=S;class t{constructor(){this.externalLinkEnabled=!0}get pagesCount(){return 0}get page(){return 0}set page(s){}get rotation(){return 0}set rotation(s){}get isInPresentationMode(){return!1}async goToDestination(s){}goToPage(s){}addLinkAttributes(s,h,c=!1){y(s,{url:h,enabled:this.externalLinkEnabled})}getDestinationHash(s){return"#"}getAnchorUrl(s){return"#"}setHash(s){}executeNamedAction(s){}executeSetOCGState(s){}cachePageRef(s,h){}}A.SimpleLinkService=t},(ae,A,P)=>{var T,Zn;Object.defineProperty(A,"__esModule",{value:!0}),A.AnnotationEditorParams=void 0;var a=P(5);class l{constructor(t,r){M(this,T);this.eventBus=r,O(this,T,Zn).call(this,t)}}T=new WeakSet,Zn=function({editorFreeTextFontSize:t,editorFreeTextColor:r,editorInkColor:d,editorInkThickness:p,editorInkOpacity:b,editorStampAddImage:f}){const m=(i,s)=>{this.eventBus.dispatch("switchannotationeditorparams",{source:this,type:a.AnnotationEditorParamsType[i],value:s})};t.addEventListener("input",function(){m("FREETEXT_SIZE",this.valueAsNumber)}),r.addEventListener("input",function(){m("FREETEXT_COLOR",this.value)}),d.addEventListener("input",function(){m("INK_COLOR",this.value)}),p.addEventListener("input",function(){m("INK_THICKNESS",this.valueAsNumber)}),b.addEventListener("input",function(){m("INK_OPACITY",this.valueAsNumber)}),f.addEventListener("click",()=>{m("CREATE")}),this.eventBus._on("annotationeditorparamschanged",i=>{for(const[s,h]of i.details)switch(s){case a.AnnotationEditorParamsType.FREETEXT_SIZE:t.value=h;break;case a.AnnotationEditorParamsType.FREETEXT_COLOR:r.value=h;break;case a.AnnotationEditorParamsType.INK_COLOR:d.value=h;break;case a.AnnotationEditorParamsType.INK_THICKNESS:p.value=h;break;case a.AnnotationEditorParamsType.INK_OPACITY:b.value=h;break}})},A.AnnotationEditorParams=l},(ae,A)=>{var a,l;Object.defineProperty(A,"__esModule",{value:!0}),A.OverlayManager=void 0;class P{constructor(){M(this,a,new WeakMap);M(this,l,null)}get active(){return e(this,l)}async register(y,S=!1){if(typeof y!="object")throw new Error("Not enough parameters.");if(e(this,a).has(y))throw new Error("The overlay is already registered.");e(this,a).set(y,{canForceClose:S}),y.addEventListener("cancel",t=>{J(this,l,null)})}async open(y){if(e(this,a).has(y)){if(e(this,l)){if(e(this,l)===y)throw new Error("The overlay is already active.");if(e(this,a).get(y).canForceClose)await this.close();else throw new Error("Another overlay is currently active.")}}else throw new Error("The overlay does not exist.");J(this,l,y),y.showModal()}async close(y=e(this,l)){if(e(this,a).has(y))if(e(this,l)){if(e(this,l)!==y)throw new Error("Another overlay is currently active.")}else throw new Error("The overlay is currently not active.");else throw new Error("The overlay does not exist.");y.close(),J(this,l,null)}}a=new WeakMap,l=new WeakMap,A.OverlayManager=P},(ae,A,P)=>{var T,y,S,t,Mi,d,Qn,b,Li;Object.defineProperty(A,"__esModule",{value:!0}),A.PasswordPrompt=void 0;var a=P(5);class l{constructor(i,s,h,c=!1){M(this,t);M(this,d);M(this,b);M(this,T,null);M(this,y,null);M(this,S,null);this.dialog=i.dialog,this.label=i.label,this.input=i.input,this.submitButton=i.submitButton,this.cancelButton=i.cancelButton,this.overlayManager=s,this.l10n=h,this._isViewerEmbedded=c,this.submitButton.addEventListener("click",O(this,t,Mi).bind(this)),this.cancelButton.addEventListener("click",this.close.bind(this)),this.input.addEventListener("keydown",o=>{o.keyCode===13&&O(this,t,Mi).call(this)}),this.overlayManager.register(this.dialog,!0),this.dialog.addEventListener("close",O(this,d,Qn).bind(this))}async open(){e(this,T)&&await e(this,T).promise,J(this,T,new a.PromiseCapability);try{await this.overlayManager.open(this.dialog)}catch(s){throw e(this,T).resolve(),s}const i=e(this,S)===a.PasswordResponses.INCORRECT_PASSWORD;(!this._isViewerEmbedded||i)&&this.input.focus(),this.label.textContent=await this.l10n.get(`password_${i?"invalid":"label"}`)}async close(){this.overlayManager.active===this.dialog&&this.overlayManager.close(this.dialog)}async setUpdateCallback(i,s){e(this,T)&&await e(this,T).promise,J(this,y,i),J(this,S,s)}}T=new WeakMap,y=new WeakMap,S=new WeakMap,t=new WeakSet,Mi=function(){const i=this.input.value;(i==null?void 0:i.length)>0&&O(this,b,Li).call(this,i)},d=new WeakSet,Qn=function(){O(this,b,Li).call(this,new Error("PasswordPrompt cancelled.")),e(this,T).resolve()},b=new WeakSet,Li=function(i){e(this,y)&&(this.close(),this.input.value="",e(this,y).call(this,i),J(this,y,null))},A.PasswordPrompt=l},(ae,A,P)=>{var S,Jn;Object.defineProperty(A,"__esModule",{value:!0}),A.PDFAttachmentViewer=void 0;var a=P(5),l=P(16),T=P(10);class y extends l.BaseTreeViewer{constructor(p){super(p);M(this,S);this.downloadManager=p.downloadManager,this.eventBus._on("fileattachmentannotation",O(this,S,Jn).bind(this))}reset(p=!1){super.reset(),this._attachments=null,p||(this._renderedCapability=new a.PromiseCapability),this._pendingDispatchEvent=!1}async _dispatchEvent(p){this._renderedCapability.resolve(),!(p===0&&!this._pendingDispatchEvent&&(this._pendingDispatchEvent=!0,await(0,T.waitOnEventOrTimeout)({target:this.eventBus,name:"annotationlayerrendered",delay:1e3}),!this._pendingDispatchEvent))&&(this._pendingDispatchEvent=!1,this.eventBus.dispatch("attachmentsloaded",{source:this,attachmentsCount:p}))}_bindLink(p,{content:b,filename:f}){p.onclick=()=>(this.downloadManager.openOrDownloadData(p,b,f),!1)}render({attachments:p,keepRenderedCapability:b=!1}){if(this._attachments&&this.reset(b),this._attachments=p||null,!p){this._dispatchEvent(0);return}const f=document.createDocumentFragment();let m=0;for(const i in p){const s=p[i],h=s.content,c=(0,a.getFilenameFromUrl)(s.filename,!0),o=document.createElement("div");o.className="treeItem";const v=document.createElement("a");this._bindLink(v,{content:h,filename:c}),v.textContent=this._normalizeTextContent(c),o.append(v),f.append(o),m++}this._finishRendering(f,m)}}S=new WeakSet,Jn=function({filename:p,content:b}){const f=this._renderedCapability.promise;f.then(()=>{if(f!==this._renderedCapability.promise)return;const m=this._attachments||Object.create(null);for(const i in m)if(p===i)return;m[p]={filename:p,content:b},this.render({attachments:m,keepRenderedCapability:!0})})},A.PDFAttachmentViewer=y},(ae,A,P)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.BaseTreeViewer=void 0;var a=P(4);const l=-100,T="selected";class y{constructor(t){if(this.constructor===y)throw new Error("Cannot initialize BaseTreeViewer.");this.container=t.container,this.eventBus=t.eventBus,this.reset()}reset(){this._pdfDocument=null,this._lastToggleIsShow=!0,this._currentTreeItem=null,this.container.textContent="",this.container.classList.remove("treeWithDeepNesting")}_dispatchEvent(t){throw new Error("Not implemented: _dispatchEvent")}_bindLink(t,r){throw new Error("Not implemented: _bindLink")}_normalizeTextContent(t){return(0,a.removeNullCharacters)(t,!0)||"–"}_addToggleButton(t,r=!1){const d=document.createElement("div");d.className="treeItemToggler",r&&d.classList.add("treeItemsHidden"),d.onclick=p=>{if(p.stopPropagation(),d.classList.toggle("treeItemsHidden"),p.shiftKey){const b=!d.classList.contains("treeItemsHidden");this._toggleTreeItem(t,b)}},t.prepend(d)}_toggleTreeItem(t,r=!1){this._lastToggleIsShow=r;for(const d of t.querySelectorAll(".treeItemToggler"))d.classList.toggle("treeItemsHidden",!r)}_toggleAllTreeItems(){this._toggleTreeItem(this.container,!this._lastToggleIsShow)}_finishRendering(t,r,d=!1){d&&(this.container.classList.add("treeWithDeepNesting"),this._lastToggleIsShow=!t.querySelector(".treeItemsHidden")),this.container.append(t),this._dispatchEvent(r)}render(t){throw new Error("Not implemented: render")}_updateCurrentTreeItem(t=null){this._currentTreeItem&&(this._currentTreeItem.classList.remove(T),this._currentTreeItem=null),t&&(t.classList.add(T),this._currentTreeItem=t)}_scrollToCurrentTreeItem(t){if(!t)return;let r=t.parentNode;for(;r&&r!==this.container;){if(r.classList.contains("treeItem")){const d=r.firstElementChild;d==null||d.classList.remove("treeItemsHidden")}r=r.parentNode}this._updateCurrentTreeItem(t),this.container.scrollTo(t.offsetLeft,t.offsetTop+l)}}A.BaseTreeViewer=y},(ae,A,P)=>{var p,b,xi,m,St,s,Ri,c,es,v,ki,B,ts;Object.defineProperty(A,"__esModule",{value:!0}),A.PDFDocumentProperties=void 0;var a=P(4),l=P(5);const T="-",y=["en-us","en-lr","my"],S={"8.5x11":"Letter","8.5x14":"Legal"},t={"297x420":"A3","210x297":"A4"};function r(C,V,q){const X=V?C.width:C.height,E=V?C.height:C.width;return q[`${X}x${E}`]}class d{constructor({dialog:V,fields:q,closeButton:X},E,F,k,ie){M(this,b);M(this,m);M(this,s);M(this,c);M(this,v);M(this,B);M(this,p,null);this.dialog=V,this.fields=q,this.overlayManager=E,this.l10n=k,this._fileNameLookup=ie,O(this,b,xi).call(this),X.addEventListener("click",this.close.bind(this)),this.overlayManager.register(this.dialog),F._on("pagechanging",_e=>{this._currentPageNumber=_e.pageNumber}),F._on("rotationchanging",_e=>{this._pagesRotation=_e.pagesRotation}),this._isNonMetricLocale=!0,k.getLanguage().then(_e=>{this._isNonMetricLocale=y.includes(_e)})}async open(){await Promise.all([this.overlayManager.open(this.dialog),this._dataAvailableCapability.promise]);const V=this._currentPageNumber,q=this._pagesRotation;if(e(this,p)&&V===e(this,p)._currentPageNumber&&q===e(this,p)._pagesRotation){O(this,m,St).call(this);return}const{info:X,contentLength:E}=await this.pdfDocument.getMetadata(),[F,k,ie,_e,R,g]=await Promise.all([this._fileNameLookup(),O(this,s,Ri).call(this,E),O(this,v,ki).call(this,X.CreationDate),O(this,v,ki).call(this,X.ModDate),this.pdfDocument.getPage(V).then(L=>O(this,c,es).call(this,(0,a.getPageSizeInches)(L),q)),O(this,B,ts).call(this,X.IsLinearized)]);J(this,p,Object.freeze({fileName:F,fileSize:k,title:X.Title,author:X.Author,subject:X.Subject,keywords:X.Keywords,creationDate:ie,modificationDate:_e,creator:X.Creator,producer:X.Producer,version:X.PDFFormatVersion,pageCount:this.pdfDocument.numPages,pageSize:R,linearized:g,_currentPageNumber:V,_pagesRotation:q})),O(this,m,St).call(this);const{length:n}=await this.pdfDocument.getDownloadInfo();if(E===n)return;const u=Object.assign(Object.create(null),e(this,p));u.fileSize=await O(this,s,Ri).call(this,n),J(this,p,Object.freeze(u)),O(this,m,St).call(this)}async close(){this.overlayManager.close(this.dialog)}setDocument(V){this.pdfDocument&&(O(this,b,xi).call(this),O(this,m,St).call(this,!0)),V&&(this.pdfDocument=V,this._dataAvailableCapability.resolve())}}p=new WeakMap,b=new WeakSet,xi=function(){this.pdfDocument=null,J(this,p,null),this._dataAvailableCapability=new l.PromiseCapability,this._currentPageNumber=1,this._pagesRotation=0},m=new WeakSet,St=function(V=!1){if(V||!e(this,p)){for(const q in this.fields)this.fields[q].textContent=T;return}if(this.overlayManager.active===this.dialog)for(const q in this.fields){const X=e(this,p)[q];this.fields[q].textContent=X||X===0?X:T}},s=new WeakSet,Ri=async function(V=0){const q=V/1024,X=q/1024;if(q)return this.l10n.get(`document_properties_${X>=1?"mb":"kb"}`,{size_mb:X>=1&&(+X.toPrecision(3)).toLocaleString(),size_kb:X<1&&(+q.toPrecision(3)).toLocaleString(),size_b:V.toLocaleString()})},c=new WeakSet,es=async function(V,q){if(!V)return;q%180!==0&&(V={width:V.height,height:V.width});const X=(0,a.isPortraitOrientation)(V);let E={width:Math.round(V.width*100)/100,height:Math.round(V.height*100)/100},F={width:Math.round(V.width*25.4*10)/10,height:Math.round(V.height*25.4*10)/10},k=r(E,X,S)||r(F,X,t);if(!k&&!(Number.isInteger(F.width)&&Number.isInteger(F.height))){const u={width:V.width*25.4,height:V.height*25.4},L={width:Math.round(F.width),height:Math.round(F.height)};Math.abs(u.width-L.width)<.1&&Math.abs(u.height-L.height)<.1&&(k=r(L,X,t),k&&(E={width:Math.round(L.width/25.4*100)/100,height:Math.round(L.height/25.4*100)/100},F=L))}const[{width:ie,height:_e},R,g,n]=await Promise.all([this._isNonMetricLocale?E:F,this.l10n.get(`document_properties_page_size_unit_${this._isNonMetricLocale?"inches":"millimeters"}`),k&&this.l10n.get(`document_properties_page_size_name_${k.toLowerCase()}`),this.l10n.get(`document_properties_page_size_orientation_${X?"portrait":"landscape"}`)]);return this.l10n.get(`document_properties_page_size_dimension_${g?"name_":""}string`,{width:ie.toLocaleString(),height:_e.toLocaleString(),unit:R,name:g,orientation:n})},v=new WeakSet,ki=async function(V){const q=l.PDFDateString.toDateObject(V);if(q)return this.l10n.get("document_properties_date_string",{date:q.toLocaleDateString(),time:q.toLocaleTimeString()})},B=new WeakSet,ts=function(V){return this.l10n.get(`document_properties_linearized_${V?"yes":"no"}`)},A.PDFDocumentProperties=d},(ae,A,P)=>{var S,Et;Object.defineProperty(A,"__esModule",{value:!0}),A.PDFFindBar=void 0;var a=P(19),l=P(4);const T=1e3;class y{constructor(d,p,b){M(this,S);this.opened=!1,this.bar=d.bar,this.toggleButton=d.toggleButton,this.findField=d.findField,this.highlightAll=d.highlightAllCheckbox,this.caseSensitive=d.caseSensitiveCheckbox,this.matchDiacritics=d.matchDiacriticsCheckbox,this.entireWord=d.entireWordCheckbox,this.findMsg=d.findMsg,this.findResultsCount=d.findResultsCount,this.findPreviousButton=d.findPreviousButton,this.findNextButton=d.findNextButton,this.eventBus=p,this.l10n=b,this.toggleButton.addEventListener("click",()=>{this.toggle()}),this.findField.addEventListener("input",()=>{this.dispatchEvent("")}),this.bar.addEventListener("keydown",f=>{switch(f.keyCode){case 13:f.target===this.findField&&this.dispatchEvent("again",f.shiftKey);break;case 27:this.close();break}}),this.findPreviousButton.addEventListener("click",()=>{this.dispatchEvent("again",!0)}),this.findNextButton.addEventListener("click",()=>{this.dispatchEvent("again",!1)}),this.highlightAll.addEventListener("click",()=>{this.dispatchEvent("highlightallchange")}),this.caseSensitive.addEventListener("click",()=>{this.dispatchEvent("casesensitivitychange")}),this.entireWord.addEventListener("click",()=>{this.dispatchEvent("entirewordchange")}),this.matchDiacritics.addEventListener("click",()=>{this.dispatchEvent("diacriticmatchingchange")}),this.eventBus._on("resize",O(this,S,Et).bind(this))}reset(){this.updateUIState()}dispatchEvent(d,p=!1){this.eventBus.dispatch("find",{source:this,type:d,query:this.findField.value,caseSensitive:this.caseSensitive.checked,entireWord:this.entireWord.checked,highlightAll:this.highlightAll.checked,findPrevious:p,matchDiacritics:this.matchDiacritics.checked})}updateUIState(d,p,b){let f=Promise.resolve(""),m="";switch(d){case a.FindState.FOUND:break;case a.FindState.PENDING:m="pending";break;case a.FindState.NOT_FOUND:f=this.l10n.get("find_not_found"),m="notFound";break;case a.FindState.WRAPPED:f=this.l10n.get(`find_reached_${p?"top":"bottom"}`);break}this.findField.setAttribute("data-status",m),this.findField.setAttribute("aria-invalid",d===a.FindState.NOT_FOUND),f.then(i=>{this.findMsg.setAttribute("data-status",m),this.findMsg.textContent=i,O(this,S,Et).call(this)}),this.updateResultsCount(b)}updateResultsCount({current:d=0,total:p=0}={}){const b=T;let f=Promise.resolve("");if(p>0)if(p>b){let m="find_match_count_limit";f=this.l10n.get(m,{limit:b})}else{let m="find_match_count";f=this.l10n.get(m,{current:d,total:p})}f.then(m=>{this.findResultsCount.textContent=m,O(this,S,Et).call(this)})}open(){this.opened||(this.opened=!0,(0,l.toggleExpandedBtn)(this.toggleButton,!0,this.bar)),this.findField.select(),this.findField.focus(),O(this,S,Et).call(this)}close(){this.opened&&(this.opened=!1,(0,l.toggleExpandedBtn)(this.toggleButton,!1,this.bar),this.eventBus.dispatch("findbarclose",{source:this}))}toggle(){this.opened?this.close():this.open()}}S=new WeakSet,Et=function(){if(!this.opened)return;this.bar.classList.remove("wrapContainers");const d=this.bar.clientHeight,p=this.bar.firstElementChild.clientHeight;d>p&&this.bar.classList.add("wrapContainers")},A.PDFFindBar=y},(ae,A,P)=>{var q,X,E,F,is,ie,Ii,R,Fi,n,ns,L,ss,j,as,te,Oi,ge,rs,ce,os,me,zt,De,At,Ve,ut,Q,ls,ue,Di,Re,Ni,je,jt,Ue,ds,We,Bi,_,Vi,fe,Pt;Object.defineProperty(A,"__esModule",{value:!0}),A.PDFFindController=A.FindState=void 0;var a=P(4),l=P(20),T=P(5);const y={FOUND:0,NOT_FOUND:1,WRAPPED:2,PENDING:3};A.FindState=y;const S=250,t=-50,r=-400,d={"‐":"-","‘":"'","’":"'","‚":"'","‛":"'","“":'"',"”":'"',"„":'"',"‟":'"',"¼":"1/4","½":"1/2","¾":"3/4"},p=new Set([12441,12442,2381,2509,2637,2765,2893,3021,3149,3277,3387,3388,3405,3530,3642,3770,3972,4153,4154,5908,5940,6098,6752,6980,7082,7083,7154,7155,11647,43014,43052,43204,43347,43456,43766,44013,3158,3953,3954,3962,3963,3964,3965,3968,3956]);let b;const f=/\p{M}+/gu,m=/([.*+?^${}()|[\]\\])|(\p{P})|(\s+)|(\p{M})|(\p{L})/gu,i=/([^\p{M}])\p{M}*$/u,s=/^\p{M}*([^\p{M}])/u,h=/[\uAC00-\uD7AF\uFA6C\uFACF-\uFAD1\uFAD5-\uFAD7]+/g,c=new Map,o="[\\u1100-\\u1112\\ud7a4-\\ud7af\\ud84a\\ud84c\\ud850\\ud854\\ud857\\ud85f]",v=new Map;let w=null,B=null;function K(he){const re=[];let ve;for(;(ve=h.exec(he))!==null;){let{index:ke}=ve;for(const $ of ve[0]){let de=c.get($);de||(de=$.normalize("NFD").length,c.set($,de)),re.push([de,ke++])}}let U;if(re.length===0&&w)U=w;else if(re.length>0&&B)U=B;else{const ke=Object.keys(d).join(""),$=(0,l.getNormalizeWithNFKC)(),Fe=`([${ke}])|([${$}])|((?:゙|゚)\\n)|(\\p{M}+(?:-\\n)?)|(\\S-\\n)|((?:\\p{Ideographic}|[぀-ヿ])\\n)|(\\n)`;re.length===0?U=w=new RegExp(Fe+"|(\\u0000)","gum"):U=B=new RegExp(Fe+`|(${o})`,"gum")}const pe=[];for(;(ve=f.exec(he))!==null;)pe.push([ve[0].length,ve.index]);let Ce=he.normalize("NFD");const we=[[0,0]];let D=0,x=0,W=0,G=0,se=0,be=!1;return Ce=Ce.replace(U,(ke,$,de,ye,Fe,Me,Oe,He,$e,qe)=>{var Ke,Qe,Ye;if(qe-=G,$){const Ze=d[$],et=Ze.length;for(let Je=1;Je<et;Je++)we.push([qe-W+Je,W-Je]);return W-=et-1,Ze}if(de){let Ze=v.get(de);Ze||(Ze=de.normalize("NFKC"),v.set(de,Ze));const et=Ze.length;for(let Je=1;Je<et;Je++)we.push([qe-W+Je,W-Je]);return W-=et-1,Ze}if(ye)return be=!0,qe+se===((Ke=pe[D])==null?void 0:Ke[1])?++D:(we.push([qe-1-W+1,W-1]),W-=1,G+=1),we.push([qe-W+1,W]),G+=1,se+=1,ye.charAt(0);if(Fe){const Ze=Fe.endsWith(`
`),et=Ze?Fe.length-2:Fe.length;be=!0;let Je=et;qe+se===((Qe=pe[D])==null?void 0:Qe[1])&&(Je-=pe[D][0],++D);for(let tt=1;tt<=Je;tt++)we.push([qe-1-W+tt,W-tt]);return W-=Je,G+=Je,Ze?(qe+=et-1,we.push([qe-W+1,1+W]),W+=1,G+=1,se+=1,Fe.slice(0,et)):Fe}if(Me){const Ze=Me.length-2;return we.push([qe-W+Ze,1+W]),W+=1,G+=1,se+=1,Me.slice(0,-2)}if(Oe){const Ze=Oe.length-1;return we.push([qe-W+Ze,W]),G+=1,se+=1,Oe.slice(0,-1)}if(He)return we.push([qe-W+1,W-1]),W-=1,G+=1,se+=1," ";if(qe+se===((Ye=re[x])==null?void 0:Ye[1])){const Ze=re[x][0]-1;++x;for(let et=1;et<=Ze;et++)we.push([qe-(W-et),W-et]);W-=Ze,G+=Ze}return $e}),we.push([Ce.length,W]),[Ce,we,be]}function C(he,re,ve){if(!he)return[re,ve];const U=re,pe=re+ve-1;let Ce=(0,a.binarySearchFirstItem)(he,G=>G[0]>=U);he[Ce][0]>U&&--Ce;let we=(0,a.binarySearchFirstItem)(he,G=>G[0]>=pe,Ce);he[we][0]>pe&&--we;const D=U+he[Ce][1],W=pe+he[we][1]+1-D;return[D,W]}class V{constructor({linkService:re,eventBus:ve,updateMatchesCountOnProgress:U=!0}){M(this,F);M(this,ie);M(this,R);M(this,n);M(this,L);M(this,j);M(this,te);M(this,ge);M(this,ce);M(this,me);M(this,De);M(this,Ve);M(this,Q);M(this,ue);M(this,Re);M(this,je);M(this,Ue);M(this,We);M(this,_);M(this,fe);M(this,q,null);M(this,X,!0);M(this,E,0);this._linkService=re,this._eventBus=ve,J(this,X,U),this.onIsPageVisible=null,O(this,ie,Ii).call(this),ve._on("find",O(this,F,is).bind(this)),ve._on("findbarclose",O(this,Ue,ds).bind(this))}get highlightMatches(){return this._highlightMatches}get pageMatches(){return this._pageMatches}get pageMatchesLength(){return this._pageMatchesLength}get selected(){return this._selected}get state(){return e(this,q)}setDocument(re){this._pdfDocument&&O(this,ie,Ii).call(this),re&&(this._pdfDocument=re,this._firstPageCapability.resolve())}scrollMatchIntoView({element:re=null,selectedLeft:ve=0,pageIndex:U=-1,matchIndex:pe=-1}){if(!this._scrollMatches||!re)return;if(pe===-1||pe!==this._selected.matchIdx)return;if(U===-1||U!==this._selected.pageIdx)return;this._scrollMatches=!1;const Ce={top:t,left:ve+r};(0,a.scrollIntoView)(re,Ce,!0)}}q=new WeakMap,X=new WeakMap,E=new WeakMap,F=new WeakSet,is=function(re){if(!re)return;re.phraseSearch===!1&&(console.error("The `phraseSearch`-parameter was removed, please provide an Array of strings in the `query`-parameter instead."),typeof re.query=="string"&&(re.query=re.query.match(/\S+/g)));const ve=this._pdfDocument,{type:U}=re;(e(this,q)===null||O(this,n,ns).call(this,re))&&(this._dirtyMatch=!0),J(this,q,re),U!=="highlightallchange"&&O(this,fe,Pt).call(this,y.PENDING),this._firstPageCapability.promise.then(()=>{if(!this._pdfDocument||ve&&this._pdfDocument!==ve)return;O(this,ce,os).call(this);const pe=!this._highlightMatches,Ce=!!this._findTimeout;this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),U?this._dirtyMatch?O(this,Ve,ut).call(this):U==="again"?(O(this,Ve,ut).call(this),pe&&e(this,q).highlightAll&&O(this,De,At).call(this)):U==="highlightallchange"?(Ce?O(this,Ve,ut).call(this):this._highlightMatches=!0,O(this,De,At).call(this)):O(this,Ve,ut).call(this):this._findTimeout=setTimeout(()=>{O(this,Ve,ut).call(this),this._findTimeout=null},S)})},ie=new WeakSet,Ii=function(){this._highlightMatches=!1,this._scrollMatches=!1,this._pdfDocument=null,this._pageMatches=[],this._pageMatchesLength=[],J(this,E,0),J(this,q,null),this._selected={pageIdx:-1,matchIdx:-1},this._offset={pageIdx:null,matchIdx:null,wrapped:!1},this._extractTextPromises=[],this._pageContents=[],this._pageDiffs=[],this._hasDiacritics=[],this._matchesCountTotal=0,this._pagesToSearch=null,this._pendingFindMatches=new Set,this._resumePageIdx=null,this._dirtyMatch=!1,clearTimeout(this._findTimeout),this._findTimeout=null,this._firstPageCapability=new T.PromiseCapability},R=new WeakSet,Fi=function(){const{query:re}=e(this,q);return typeof re=="string"?(re!==this._rawQuery&&(this._rawQuery=re,[this._normalizedQuery]=K(re)),this._normalizedQuery):(re||[]).filter(ve=>!!ve).map(ve=>K(ve)[0])},n=new WeakSet,ns=function(re){var we;const ve=re.query,U=e(this,q).query,pe=typeof ve;if(pe!==typeof U)return!0;if(pe==="string"){if(ve!==U)return!0}else if(JSON.stringify(ve)!==JSON.stringify(U))return!0;switch(re.type){case"again":const D=this._selected.pageIdx+1,x=this._linkService;return D>=1&&D<=x.pagesCount&&D!==x.page&&!(((we=this.onIsPageVisible)==null?void 0:we.call(this,D))??!0);case"highlightallchange":return!1}return!0},L=new WeakSet,ss=function(re,ve,U){let pe=re.slice(0,ve).match(i);if(pe){const Ce=re.charCodeAt(ve),we=pe[1].charCodeAt(0);if((0,l.getCharacterType)(Ce)===(0,l.getCharacterType)(we))return!1}if(pe=re.slice(ve+U).match(s),pe){const Ce=re.charCodeAt(ve+U-1),we=pe[1].charCodeAt(0);if((0,l.getCharacterType)(Ce)===(0,l.getCharacterType)(we))return!1}return!0},j=new WeakSet,as=function(re,ve,U,pe){const Ce=this._pageMatches[U]=[],we=this._pageMatchesLength[U]=[];if(!re)return;const D=this._pageDiffs[U];let x;for(;(x=re.exec(pe))!==null;){if(ve&&!O(this,L,ss).call(this,pe,x.index,x[0].length))continue;const[W,G]=C(D,x.index,x[0].length);G&&(Ce.push(W),we.push(G))}},te=new WeakSet,Oi=function(re,ve){const{matchDiacritics:U}=e(this,q);let pe=!1;re=re.replaceAll(m,(we,D,x,W,G,se)=>D?`[ ]*\\${D}[ ]*`:x?`[ ]*${x}[ ]*`:W?"[ ]+":U?G||se:G?p.has(G.charCodeAt(0))?G:"":ve?(pe=!0,`${se}\\p{M}*`):se);const Ce="[ ]*";return re.endsWith(Ce)&&(re=re.slice(0,re.length-Ce.length)),U&&ve&&(b||(b=String.fromCharCode(...p)),pe=!0,re=`${re}(?=[${b}]|[^\\p{M}]|$)`),[pe,re]},ge=new WeakSet,rs=function(re){let ve=e(this,R,Fi);if(ve.length===0)return;const{caseSensitive:U,entireWord:pe}=e(this,q),Ce=this._pageContents[re],we=this._hasDiacritics[re];let D=!1;typeof ve=="string"?[D,ve]=O(this,te,Oi).call(this,ve,we):ve=ve.sort().reverse().map(G=>{const[se,be]=O(this,te,Oi).call(this,G,we);return D||(D=se),`(${be})`}).join("|");const x=`g${D?"u":""}${U?"":"i"}`;ve=ve?new RegExp(ve,x):null,O(this,j,as).call(this,ve,pe,re,Ce),e(this,q).highlightAll&&O(this,me,zt).call(this,re),this._resumePageIdx===re&&(this._resumePageIdx=null,O(this,ue,Di).call(this));const W=this._pageMatches[re].length;this._matchesCountTotal+=W,e(this,X)?W>0&&O(this,_,Vi).call(this):++rt(this,E)._===this._linkService.pagesCount&&O(this,_,Vi).call(this)},ce=new WeakSet,os=function(){if(this._extractTextPromises.length>0)return;let re=Promise.resolve();const ve={disableNormalization:!0};for(let U=0,pe=this._linkService.pagesCount;U<pe;U++){const Ce=new T.PromiseCapability;this._extractTextPromises[U]=Ce.promise,re=re.then(()=>this._pdfDocument.getPage(U+1).then(we=>we.getTextContent(ve)).then(we=>{const D=[];for(const x of we.items)D.push(x.str),x.hasEOL&&D.push(`
`);[this._pageContents[U],this._pageDiffs[U],this._hasDiacritics[U]]=K(D.join("")),Ce.resolve()},we=>{console.error(`Unable to get text content for page ${U+1}`,we),this._pageContents[U]="",this._pageDiffs[U]=null,this._hasDiacritics[U]=!1,Ce.resolve()}))}},me=new WeakSet,zt=function(re){this._scrollMatches&&this._selected.pageIdx===re&&(this._linkService.page=re+1),this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:re})},De=new WeakSet,At=function(){this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:-1})},Ve=new WeakSet,ut=function(){const re=e(this,q).findPrevious,ve=this._linkService.page-1,U=this._linkService.pagesCount;if(this._highlightMatches=!0,this._dirtyMatch){this._dirtyMatch=!1,this._selected.pageIdx=this._selected.matchIdx=-1,this._offset.pageIdx=ve,this._offset.matchIdx=null,this._offset.wrapped=!1,this._resumePageIdx=null,this._pageMatches.length=0,this._pageMatchesLength.length=0,J(this,E,0),this._matchesCountTotal=0,O(this,De,At).call(this);for(let we=0;we<U;we++)this._pendingFindMatches.has(we)||(this._pendingFindMatches.add(we),this._extractTextPromises[we].then(()=>{this._pendingFindMatches.delete(we),O(this,ge,rs).call(this,we)}))}if(e(this,R,Fi).length===0){O(this,fe,Pt).call(this,y.FOUND);return}if(this._resumePageIdx)return;const Ce=this._offset;if(this._pagesToSearch=U,Ce.matchIdx!==null){const we=this._pageMatches[Ce.pageIdx].length;if(!re&&Ce.matchIdx+1<we||re&&Ce.matchIdx>0){Ce.matchIdx=re?Ce.matchIdx-1:Ce.matchIdx+1,O(this,je,jt).call(this,!0);return}O(this,Re,Ni).call(this,re)}O(this,ue,Di).call(this)},Q=new WeakSet,ls=function(re){const ve=this._offset,U=re.length,pe=e(this,q).findPrevious;return U?(ve.matchIdx=pe?U-1:0,O(this,je,jt).call(this,!0),!0):(O(this,Re,Ni).call(this,pe),ve.wrapped&&(ve.matchIdx=null,this._pagesToSearch<0)?(O(this,je,jt).call(this,!1),!0):!1)},ue=new WeakSet,Di=function(){this._resumePageIdx!==null&&console.error("There can only be one pending page.");let re=null;do{const ve=this._offset.pageIdx;if(re=this._pageMatches[ve],!re){this._resumePageIdx=ve;break}}while(!O(this,Q,ls).call(this,re))},Re=new WeakSet,Ni=function(re){const ve=this._offset,U=this._linkService.pagesCount;ve.pageIdx=re?ve.pageIdx-1:ve.pageIdx+1,ve.matchIdx=null,this._pagesToSearch--,(ve.pageIdx>=U||ve.pageIdx<0)&&(ve.pageIdx=re?U-1:0,ve.wrapped=!0)},je=new WeakSet,jt=function(re=!1){let ve=y.NOT_FOUND;const U=this._offset.wrapped;if(this._offset.wrapped=!1,re){const pe=this._selected.pageIdx;this._selected.pageIdx=this._offset.pageIdx,this._selected.matchIdx=this._offset.matchIdx,ve=U?y.WRAPPED:y.FOUND,pe!==-1&&pe!==this._selected.pageIdx&&O(this,me,zt).call(this,pe)}O(this,fe,Pt).call(this,ve,e(this,q).findPrevious),this._selected.pageIdx!==-1&&(this._scrollMatches=!0,O(this,me,zt).call(this,this._selected.pageIdx))},Ue=new WeakSet,ds=function(re){const ve=this._pdfDocument;this._firstPageCapability.promise.then(()=>{!this._pdfDocument||ve&&this._pdfDocument!==ve||(this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),this._resumePageIdx&&(this._resumePageIdx=null,this._dirtyMatch=!0),O(this,fe,Pt).call(this,y.FOUND),this._highlightMatches=!1,O(this,De,At).call(this))})},We=new WeakSet,Bi=function(){var Ce;const{pageIdx:re,matchIdx:ve}=this._selected;let U=0,pe=this._matchesCountTotal;if(ve!==-1){for(let we=0;we<re;we++)U+=((Ce=this._pageMatches[we])==null?void 0:Ce.length)||0;U+=ve+1}return(U<1||U>pe)&&(U=pe=0),{current:U,total:pe}},_=new WeakSet,Vi=function(){this._eventBus.dispatch("updatefindmatchescount",{source:this,matchesCount:O(this,We,Bi).call(this)})},fe=new WeakSet,Pt=function(re,ve=!1){var U;!e(this,X)&&(e(this,E)!==this._linkService.pagesCount||re===y.PENDING)||this._eventBus.dispatch("updatefindcontrolstate",{source:this,state:re,previous:ve,matchesCount:O(this,We,Bi).call(this),rawQuery:((U=e(this,q))==null?void 0:U.query)??null})},A.PDFFindController=V},(ae,A)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.CharacterType=void 0,A.getCharacterType=f,A.getNormalizeWithNFKC=i;const P={SPACE:0,ALPHA_LETTER:1,PUNCT:2,HAN_LETTER:3,KATAKANA_LETTER:4,HIRAGANA_LETTER:5,HALFWIDTH_KATAKANA_LETTER:6,THAI_LETTER:7};A.CharacterType=P;function a(s){return s<11904}function l(s){return(s&65408)===0}function T(s){return s>=97&&s<=122||s>=65&&s<=90}function y(s){return s>=48&&s<=57}function S(s){return s===32||s===9||s===13||s===10}function t(s){return s>=13312&&s<=40959||s>=63744&&s<=64255}function r(s){return s>=12448&&s<=12543}function d(s){return s>=12352&&s<=12447}function p(s){return s>=65376&&s<=65439}function b(s){return(s&65408)===3584}function f(s){return a(s)?l(s)?S(s)?P.SPACE:T(s)||y(s)||s===95?P.ALPHA_LETTER:P.PUNCT:b(s)?P.THAI_LETTER:s===160?P.SPACE:P.ALPHA_LETTER:t(s)?P.HAN_LETTER:r(s)?P.KATAKANA_LETTER:d(s)?P.HIRAGANA_LETTER:p(s)?P.HALFWIDTH_KATAKANA_LETTER:P.ALPHA_LETTER}let m;function i(){return m||(m=" ¨ª¯²-µ¸-º¼-¾Ĳ-ĳĿ-ŀŉſǄ-ǌǱ-ǳʰ-ʸ˘-˝ˠ-ˤʹͺ;΄-΅·ϐ-ϖϰ-ϲϴ-ϵϹևٵ-ٸक़-य़ড়-ঢ়য়ਲ਼ਸ਼ਖ਼-ਜ਼ਫ਼ଡ଼-ଢ଼ำຳໜ-ໝ༌གྷཌྷདྷབྷཛྷཀྵჼᴬ-ᴮᴰ-ᴺᴼ-ᵍᵏ-ᵪᵸᶛ-ᶿẚ-ẛάέήίόύώΆ᾽-῁ΈΉ῍-῏ΐΊ῝-῟ΰΎ῭-`ΌΏ´-῾ - ‑‗․-… ″-‴‶-‷‼‾⁇-⁉⁗ ⁰-ⁱ⁴-₎ₐ-ₜ₨℀-℃℅-ℇ℉-ℓℕ-№ℙ-ℝ℠-™ℤΩℨK-ℭℯ-ℱℳ-ℹ℻-⅀ⅅ-ⅉ⅐-ⅿ↉∬-∭∯-∰〈-〉①-⓪⨌⩴-⩶⫝̸ⱼ-ⱽⵯ⺟⻳⼀-⿕　〶〸-〺゛-゜ゟヿㄱ-ㆎ㆒-㆟㈀-㈞㈠-㉇㉐-㉾㊀-㏿ꚜ-ꚝꝰꟲ-ꟴꟸ-ꟹꭜ-ꭟꭩ豈-嗀塚晴凞-羽蘒諸逸-都飯-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-זּטּ-לּמּנּ-סּףּ-פּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-﷼︐-︙︰-﹄﹇-﹒﹔-﹦﹨-﹫ﹰ-ﹲﹴﹶ-ﻼ！-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ￠-￦"),m}},(ae,A,P)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.PDFHistory=void 0,A.isDestArraysEqual=p,A.isDestHashesEqual=d;var a=P(4),l=P(10);const T=1e3,y=50,S=1e3;function t(){return document.location.hash}class r{constructor({linkService:f,eventBus:m}){this.linkService=f,this.eventBus=m,this._initialized=!1,this._fingerprint="",this.reset(),this._boundEvents=null,this.eventBus._on("pagesinit",()=>{this._isPagesLoaded=!1,this.eventBus._on("pagesloaded",i=>{this._isPagesLoaded=!!i.pagesCount},{once:!0})})}initialize({fingerprint:f,resetHistory:m=!1,updateUrl:i=!1}){if(!f||typeof f!="string"){console.error('PDFHistory.initialize: The "fingerprint" must be a non-empty string.');return}this._initialized&&this.reset();const s=this._fingerprint!==""&&this._fingerprint!==f;this._fingerprint=f,this._updateUrl=i===!0,this._initialized=!0,this._bindEvents();const h=window.history.state;if(this._popStateInProgress=!1,this._blockHashChange=0,this._currentHash=t(),this._numPositionUpdates=0,this._uid=this._maxUid=0,this._destination=null,this._position=null,!this._isValidState(h,!0)||m){const{hash:o,page:v,rotation:w}=this._parseCurrentHash(!0);if(!o||s||m){this._pushOrReplaceState(null,!0);return}this._pushOrReplaceState({hash:o,page:v,rotation:w},!0);return}const c=h.destination;this._updateInternalState(c,h.uid,!0),c.rotation!==void 0&&(this._initialRotation=c.rotation),c.dest?(this._initialBookmark=JSON.stringify(c.dest),this._destination.page=null):c.hash?this._initialBookmark=c.hash:c.page&&(this._initialBookmark=`page=${c.page}`)}reset(){this._initialized&&(this._pageHide(),this._initialized=!1,this._unbindEvents()),this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._initialBookmark=null,this._initialRotation=null}push({namedDest:f=null,explicitDest:m,pageNumber:i}){if(!this._initialized)return;if(f&&typeof f!="string"){console.error(`PDFHistory.push: "${f}" is not a valid namedDest parameter.`);return}else if(Array.isArray(m)){if(!this._isValidPage(i)&&(i!==null||this._destination)){console.error(`PDFHistory.push: "${i}" is not a valid pageNumber parameter.`);return}}else{console.error(`PDFHistory.push: "${m}" is not a valid explicitDest parameter.`);return}const s=f||JSON.stringify(m);if(!s)return;let h=!1;if(this._destination&&(d(this._destination.hash,s)||p(this._destination.dest,m))){if(this._destination.page)return;h=!0}this._popStateInProgress&&!h||(this._pushOrReplaceState({dest:m,hash:s,page:i,rotation:this.linkService.rotation},h),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1})))}pushPage(f){var m;if(this._initialized){if(!this._isValidPage(f)){console.error(`PDFHistory.pushPage: "${f}" is not a valid page number.`);return}((m=this._destination)==null?void 0:m.page)!==f&&(this._popStateInProgress||(this._pushOrReplaceState({dest:null,hash:`page=${f}`,page:f,rotation:this.linkService.rotation}),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1}))))}}pushCurrentPosition(){!this._initialized||this._popStateInProgress||this._tryPushCurrentPosition()}back(){if(!this._initialized||this._popStateInProgress)return;const f=window.history.state;this._isValidState(f)&&f.uid>0&&window.history.back()}forward(){if(!this._initialized||this._popStateInProgress)return;const f=window.history.state;this._isValidState(f)&&f.uid<this._maxUid&&window.history.forward()}get popStateInProgress(){return this._initialized&&(this._popStateInProgress||this._blockHashChange>0)}get initialBookmark(){return this._initialized?this._initialBookmark:null}get initialRotation(){return this._initialized?this._initialRotation:null}_pushOrReplaceState(f,m=!1){const i=m||!this._destination,s={fingerprint:this._fingerprint,uid:i?this._uid:this._uid+1,destination:f};this._updateInternalState(f,s.uid);let h;if(this._updateUrl&&(f!=null&&f.hash)){const c=document.location.href.split("#")[0];c.startsWith("file://")||(h=`${c}#${f.hash}`)}i?window.history.replaceState(s,"",h):window.history.pushState(s,"",h)}_tryPushCurrentPosition(f=!1){if(!this._position)return;let m=this._position;if(f&&(m=Object.assign(Object.create(null),this._position),m.temporary=!0),!this._destination){this._pushOrReplaceState(m);return}if(this._destination.temporary){this._pushOrReplaceState(m,!0);return}if(this._destination.hash===m.hash||!this._destination.page&&this._numPositionUpdates<=y)return;let i=!1;if(this._destination.page>=m.first&&this._destination.page<=m.page){if(this._destination.dest!==void 0||!this._destination.first)return;i=!0}this._pushOrReplaceState(m,i)}_isValidPage(f){return Number.isInteger(f)&&f>0&&f<=this.linkService.pagesCount}_isValidState(f,m=!1){if(!f)return!1;if(f.fingerprint!==this._fingerprint)if(m){if(typeof f.fingerprint!="string"||f.fingerprint.length!==this._fingerprint.length)return!1;const[i]=performance.getEntriesByType("navigation");if((i==null?void 0:i.type)!=="reload")return!1}else return!1;return!(!Number.isInteger(f.uid)||f.uid<0||f.destination===null||typeof f.destination!="object")}_updateInternalState(f,m,i=!1){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),i&&(f!=null&&f.temporary)&&delete f.temporary,this._destination=f,this._uid=m,this._maxUid=Math.max(this._maxUid,m),this._numPositionUpdates=0}_parseCurrentHash(f=!1){const m=unescape(t()).substring(1),i=(0,a.parseQueryString)(m),s=i.get("nameddest")||"";let h=i.get("page")|0;return(!this._isValidPage(h)||f&&s.length>0)&&(h=null),{hash:m,page:h,rotation:this.linkService.rotation}}_updateViewarea({location:f}){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._position={hash:f.pdfOpenParams.substring(1),page:this.linkService.page,first:f.pageNumber,rotation:f.rotation},!this._popStateInProgress&&(this._isPagesLoaded&&this._destination&&!this._destination.page&&this._numPositionUpdates++,this._updateViewareaTimeout=setTimeout(()=>{this._popStateInProgress||this._tryPushCurrentPosition(!0),this._updateViewareaTimeout=null},S))}_popState({state:f}){const m=t(),i=this._currentHash!==m;if(this._currentHash=m,!f){this._uid++;const{hash:h,page:c,rotation:o}=this._parseCurrentHash();this._pushOrReplaceState({hash:h,page:c,rotation:o},!0);return}if(!this._isValidState(f))return;this._popStateInProgress=!0,i&&(this._blockHashChange++,(0,l.waitOnEventOrTimeout)({target:window,name:"hashchange",delay:T}).then(()=>{this._blockHashChange--}));const s=f.destination;this._updateInternalState(s,f.uid,!0),(0,a.isValidRotation)(s.rotation)&&(this.linkService.rotation=s.rotation),s.dest?this.linkService.goToDestination(s.dest):s.hash?this.linkService.setHash(s.hash):s.page&&(this.linkService.page=s.page),Promise.resolve().then(()=>{this._popStateInProgress=!1})}_pageHide(){(!this._destination||this._destination.temporary)&&this._tryPushCurrentPosition()}_bindEvents(){this._boundEvents||(this._boundEvents={updateViewarea:this._updateViewarea.bind(this),popState:this._popState.bind(this),pageHide:this._pageHide.bind(this)},this.eventBus._on("updateviewarea",this._boundEvents.updateViewarea),window.addEventListener("popstate",this._boundEvents.popState),window.addEventListener("pagehide",this._boundEvents.pageHide))}_unbindEvents(){this._boundEvents&&(this.eventBus._off("updateviewarea",this._boundEvents.updateViewarea),window.removeEventListener("popstate",this._boundEvents.popState),window.removeEventListener("pagehide",this._boundEvents.pageHide),this._boundEvents=null)}}A.PDFHistory=r;function d(b,f){return typeof b!="string"||typeof f!="string"?!1:b===f||(0,a.parseQueryString)(b).get("nameddest")===f}function p(b,f){function m(i,s){if(typeof i!=typeof s||Array.isArray(i)||Array.isArray(s))return!1;if(i!==null&&typeof i=="object"&&s!==null){if(Object.keys(i).length!==Object.keys(s).length)return!1;for(const h in i)if(!m(i[h],s[h]))return!1;return!0}return i===s||Number.isNaN(i)&&Number.isNaN(s)}if(!(Array.isArray(b)&&Array.isArray(f))||b.length!==f.length)return!1;for(let i=0,s=b.length;i<s;i++)if(!m(b[i],f[i]))return!1;return!0}},(ae,A,P)=>{var T,Ui;Object.defineProperty(A,"__esModule",{value:!0}),A.PDFLayerViewer=void 0;var a=P(16);class l extends a.BaseTreeViewer{constructor(r){super(r);M(this,T);this.l10n=r.l10n,this.eventBus._on("optionalcontentconfigchanged",d=>{O(this,T,Ui).call(this,d.promise)}),this.eventBus._on("resetlayers",()=>{O(this,T,Ui).call(this)}),this.eventBus._on("togglelayerstree",this._toggleAllTreeItems.bind(this))}reset(){super.reset(),this._optionalContentConfig=null,this._optionalContentHash=null}_dispatchEvent(r){this.eventBus.dispatch("layersloaded",{source:this,layersCount:r})}_bindLink(r,{groupId:d,input:p}){const b=()=>{this._optionalContentConfig.setVisibility(d,p.checked),this._optionalContentHash=this._optionalContentConfig.getHash(),this.eventBus.dispatch("optionalcontentconfig",{source:this,promise:Promise.resolve(this._optionalContentConfig)})};r.onclick=f=>f.target===p?(b(),!0):f.target!==r?!0:(p.checked=!p.checked,b(),!1)}async _setNestedName(r,{name:d=null}){if(typeof d=="string"){r.textContent=this._normalizeTextContent(d);return}r.textContent=await this.l10n.get("additional_layers"),r.style.fontStyle="italic"}_addToggleButton(r,{name:d=null}){super._addToggleButton(r,d===null)}_toggleAllTreeItems(){this._optionalContentConfig&&super._toggleAllTreeItems()}render({optionalContentConfig:r,pdfDocument:d}){this._optionalContentConfig&&this.reset(),this._optionalContentConfig=r||null,this._pdfDocument=d||null;const p=r==null?void 0:r.getOrder();if(!p){this._dispatchEvent(0);return}this._optionalContentHash=r.getHash();const b=document.createDocumentFragment(),f=[{parent:b,groups:p}];let m=0,i=!1;for(;f.length>0;){const s=f.shift();for(const h of s.groups){const c=document.createElement("div");c.className="treeItem";const o=document.createElement("a");if(c.append(o),typeof h=="object"){i=!0,this._addToggleButton(c,h),this._setNestedName(o,h);const v=document.createElement("div");v.className="treeItems",c.append(v),f.push({parent:v,groups:h.order})}else{const v=r.getGroup(h),w=document.createElement("input");this._bindLink(o,{groupId:h,input:w}),w.type="checkbox",w.checked=v.visible;const B=document.createElement("label");B.textContent=this._normalizeTextContent(v.name),B.append(w),o.append(B),m++}s.parent.append(c)}}this._finishRendering(b,m,i)}}T=new WeakSet,Ui=async function(r=null){if(!this._optionalContentConfig)return;const d=this._pdfDocument,p=await(r||d.getOptionalContentConfig());if(d===this._pdfDocument){if(r){if(p.getHash()===this._optionalContentHash)return}else this.eventBus.dispatch("optionalcontentconfig",{source:this,promise:Promise.resolve(p)});this.render({optionalContentConfig:p,pdfDocument:this._pdfDocument})}},A.PDFLayerViewer=l},(ae,A,P)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.PDFOutlineViewer=void 0;var a=P(16),l=P(5),T=P(4);class y extends a.BaseTreeViewer{constructor(t){super(t),this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.eventBus._on("toggleoutlinetree",this._toggleAllTreeItems.bind(this)),this.eventBus._on("currentoutlineitem",this._currentOutlineItem.bind(this)),this.eventBus._on("pagechanging",r=>{this._currentPageNumber=r.pageNumber}),this.eventBus._on("pagesloaded",r=>{this._isPagesLoaded=!!r.pagesCount,this._currentOutlineItemCapability&&!this._currentOutlineItemCapability.settled&&this._currentOutlineItemCapability.resolve(this._isPagesLoaded)}),this.eventBus._on("sidebarviewchanged",r=>{this._sidebarView=r.view})}reset(){super.reset(),this._outline=null,this._pageNumberToDestHashCapability=null,this._currentPageNumber=1,this._isPagesLoaded=null,this._currentOutlineItemCapability&&!this._currentOutlineItemCapability.settled&&this._currentOutlineItemCapability.resolve(!1),this._currentOutlineItemCapability=null}_dispatchEvent(t){var r;this._currentOutlineItemCapability=new l.PromiseCapability,t===0||(r=this._pdfDocument)!=null&&r.loadingParams.disableAutoFetch?this._currentOutlineItemCapability.resolve(!1):this._isPagesLoaded!==null&&this._currentOutlineItemCapability.resolve(this._isPagesLoaded),this.eventBus.dispatch("outlineloaded",{source:this,outlineCount:t,currentOutlineItemPromise:this._currentOutlineItemCapability.promise})}_bindLink(t,{url:r,newWindow:d,action:p,attachment:b,dest:f,setOCGState:m}){const{linkService:i}=this;if(r){i.addLinkAttributes(t,r,d);return}if(p){t.href=i.getAnchorUrl(""),t.onclick=()=>(i.executeNamedAction(p),!1);return}if(b){t.href=i.getAnchorUrl(""),t.onclick=()=>(this.downloadManager.openOrDownloadData(t,b.content,b.filename),!1);return}if(m){t.href=i.getAnchorUrl(""),t.onclick=()=>(i.executeSetOCGState(m),!1);return}t.href=i.getDestinationHash(f),t.onclick=s=>(this._updateCurrentTreeItem(s.target.parentNode),f&&i.goToDestination(f),!1)}_setStyles(t,{bold:r,italic:d}){r&&(t.style.fontWeight="bold"),d&&(t.style.fontStyle="italic")}_addToggleButton(t,{count:r,items:d}){let p=!1;if(r<0){let b=d.length;if(b>0){const f=[...d];for(;f.length>0;){const{count:m,items:i}=f.shift();m>0&&i.length>0&&(b+=i.length,f.push(...i))}}Math.abs(r)===b&&(p=!0)}super._addToggleButton(t,p)}_toggleAllTreeItems(){this._outline&&super._toggleAllTreeItems()}render({outline:t,pdfDocument:r}){if(this._outline&&this.reset(),this._outline=t||null,this._pdfDocument=r||null,!t){this._dispatchEvent(0);return}const d=document.createDocumentFragment(),p=[{parent:d,items:t}];let b=0,f=!1;for(;p.length>0;){const m=p.shift();for(const i of m.items){const s=document.createElement("div");s.className="treeItem";const h=document.createElement("a");if(this._bindLink(h,i),this._setStyles(h,i),h.textContent=this._normalizeTextContent(i.title),s.append(h),i.items.length>0){f=!0,this._addToggleButton(s,i);const c=document.createElement("div");c.className="treeItems",s.append(c),p.push({parent:c,items:i.items})}m.parent.append(s),b++}}this._finishRendering(d,b,f)}async _currentOutlineItem(){if(!this._isPagesLoaded)throw new Error("_currentOutlineItem: All pages have not been loaded.");if(!this._outline||!this._pdfDocument)return;const t=await this._getPageNumberToDestHash(this._pdfDocument);if(t&&(this._updateCurrentTreeItem(null),this._sidebarView===T.SidebarView.OUTLINE))for(let r=this._currentPageNumber;r>0;r--){const d=t.get(r);if(!d)continue;const p=this.container.querySelector(`a[href="${d}"]`);if(p){this._scrollToCurrentTreeItem(p.parentNode);break}}}async _getPageNumberToDestHash(t){if(this._pageNumberToDestHashCapability)return this._pageNumberToDestHashCapability.promise;this._pageNumberToDestHashCapability=new l.PromiseCapability;const r=new Map,d=new Map,p=[{nesting:0,items:this._outline}];for(;p.length>0;){const b=p.shift(),f=b.nesting;for(const{dest:m,items:i}of b.items){let s,h;if(typeof m=="string"){if(s=await t.getDestination(m),t!==this._pdfDocument)return null}else s=m;if(Array.isArray(s)){const[c]=s;if(typeof c=="object"&&c!==null){if(h=this.linkService._cachedPageNumber(c),!h)try{if(h=await t.getPageIndex(c)+1,t!==this._pdfDocument)return null;this.linkService.cachePageRef(h,c)}catch{}}else Number.isInteger(c)&&(h=c+1);if(Number.isInteger(h)&&(!r.has(h)||f>d.get(h))){const o=this.linkService.getDestinationHash(m);r.set(h,o),d.set(h,f)}}i.length>0&&p.push({nesting:f+1,items:i})}}return this._pageNumberToDestHashCapability.resolve(r.size>0?r:null),this._pageNumberToDestHashCapability.promise}}A.PDFOutlineViewer=y},(ae,A,P)=>{var f,m,i,cs,h,Ct,o,hs,w,us,K,fs,V,ps,X,Hi,F,gs,ie,Tt,R,ms,n,bs,L,_s,j,vs,te,ws,ge,zi;Object.defineProperty(A,"__esModule",{value:!0}),A.PDFPresentationMode=void 0;var a=P(4),l=P(5);const T=3e3,y="pdfPresentationMode",S="pdfPresentationModeControls",t=50,r=.1,d=50,p=Math.PI/6;class b{constructor({container:Ee,pdfViewer:me,eventBus:xe}){M(this,i);M(this,h);M(this,o);M(this,w);M(this,K);M(this,V);M(this,X);M(this,F);M(this,ie);M(this,R);M(this,n);M(this,L);M(this,j);M(this,te);M(this,ge);M(this,f,a.PresentationModeState.UNKNOWN);M(this,m,null);this.container=Ee,this.pdfViewer=me,this.eventBus=xe,this.contextMenuOpen=!1,this.mouseScrollTimeStamp=0,this.mouseScrollDelta=0,this.touchSwipeState=null}async request(){const{container:Ee,pdfViewer:me}=this;if(this.active||!me.pagesCount||!Ee.requestFullscreen)return!1;O(this,te,ws).call(this),O(this,h,Ct).call(this,a.PresentationModeState.CHANGING);const xe=Ee.requestFullscreen();J(this,m,{pageNumber:me.currentPageNumber,scaleValue:me.currentScaleValue,scrollMode:me.scrollMode,spreadMode:null,annotationEditorMode:null}),me.spreadMode!==a.SpreadMode.NONE&&!(me.pageViewsReady&&me.hasEqualPageSizes)&&(console.warn("Ignoring Spread modes when entering PresentationMode, since the document may contain varying page sizes."),e(this,m).spreadMode=me.spreadMode),me.annotationEditorMode!==l.AnnotationEditorType.DISABLE&&(e(this,m).annotationEditorMode=me.annotationEditorMode);try{return await xe,me.focus(),!0}catch{O(this,ge,zi).call(this),O(this,h,Ct).call(this,a.PresentationModeState.NORMAL)}return!1}get active(){return e(this,f)===a.PresentationModeState.CHANGING||e(this,f)===a.PresentationModeState.FULLSCREEN}}f=new WeakMap,m=new WeakMap,i=new WeakSet,cs=function(Ee){if(!this.active)return;Ee.preventDefault();const me=(0,a.normalizeWheelEventDelta)(Ee),xe=Date.now(),De=this.mouseScrollTimeStamp;if(!(xe>De&&xe-De<t)&&((this.mouseScrollDelta>0&&me<0||this.mouseScrollDelta<0&&me>0)&&O(this,ie,Tt).call(this),this.mouseScrollDelta+=me,Math.abs(this.mouseScrollDelta)>=r)){const Ae=this.mouseScrollDelta;O(this,ie,Tt).call(this),(Ae>0?this.pdfViewer.previousPage():this.pdfViewer.nextPage())&&(this.mouseScrollTimeStamp=xe)}},h=new WeakSet,Ct=function(Ee){J(this,f,Ee),this.eventBus.dispatch("presentationmodechanged",{source:this,state:Ee})},o=new WeakSet,hs=function(){O(this,h,Ct).call(this,a.PresentationModeState.FULLSCREEN),this.container.classList.add(y),setTimeout(()=>{this.pdfViewer.scrollMode=a.ScrollMode.PAGE,e(this,m).spreadMode!==null&&(this.pdfViewer.spreadMode=a.SpreadMode.NONE),this.pdfViewer.currentPageNumber=e(this,m).pageNumber,this.pdfViewer.currentScaleValue="page-fit",e(this,m).annotationEditorMode!==null&&(this.pdfViewer.annotationEditorMode={mode:l.AnnotationEditorType.NONE})},0),O(this,n,bs).call(this),O(this,X,Hi).call(this),this.contextMenuOpen=!1,window.getSelection().removeAllRanges()},w=new WeakSet,us=function(){const Ee=this.pdfViewer.currentPageNumber;this.container.classList.remove(y),setTimeout(()=>{O(this,ge,zi).call(this),O(this,h,Ct).call(this,a.PresentationModeState.NORMAL),this.pdfViewer.scrollMode=e(this,m).scrollMode,e(this,m).spreadMode!==null&&(this.pdfViewer.spreadMode=e(this,m).spreadMode),this.pdfViewer.currentScaleValue=e(this,m).scaleValue,this.pdfViewer.currentPageNumber=Ee,e(this,m).annotationEditorMode!==null&&(this.pdfViewer.annotationEditorMode={mode:e(this,m).annotationEditorMode}),J(this,m,null)},0),O(this,L,_s).call(this),O(this,F,gs).call(this),O(this,ie,Tt).call(this),this.contextMenuOpen=!1},K=new WeakSet,fs=function(Ee){var me;if(this.contextMenuOpen){this.contextMenuOpen=!1,Ee.preventDefault();return}Ee.button===0&&(Ee.target.href&&((me=Ee.target.parentNode)!=null&&me.hasAttribute("data-internal-link"))||(Ee.preventDefault(),Ee.shiftKey?this.pdfViewer.previousPage():this.pdfViewer.nextPage()))},V=new WeakSet,ps=function(){this.contextMenuOpen=!0},X=new WeakSet,Hi=function(){this.controlsTimeout?clearTimeout(this.controlsTimeout):this.container.classList.add(S),this.controlsTimeout=setTimeout(()=>{this.container.classList.remove(S),delete this.controlsTimeout},T)},F=new WeakSet,gs=function(){this.controlsTimeout&&(clearTimeout(this.controlsTimeout),this.container.classList.remove(S),delete this.controlsTimeout)},ie=new WeakSet,Tt=function(){this.mouseScrollTimeStamp=0,this.mouseScrollDelta=0},R=new WeakSet,ms=function(Ee){if(this.active){if(Ee.touches.length>1){this.touchSwipeState=null;return}switch(Ee.type){case"touchstart":this.touchSwipeState={startX:Ee.touches[0].pageX,startY:Ee.touches[0].pageY,endX:Ee.touches[0].pageX,endY:Ee.touches[0].pageY};break;case"touchmove":if(this.touchSwipeState===null)return;this.touchSwipeState.endX=Ee.touches[0].pageX,this.touchSwipeState.endY=Ee.touches[0].pageY,Ee.preventDefault();break;case"touchend":if(this.touchSwipeState===null)return;let me=0;const xe=this.touchSwipeState.endX-this.touchSwipeState.startX,De=this.touchSwipeState.endY-this.touchSwipeState.startY,Ae=Math.abs(Math.atan2(De,xe));Math.abs(xe)>d&&(Ae<=p||Ae>=Math.PI-p)?me=xe:Math.abs(De)>d&&Math.abs(Ae-Math.PI/2)<=p&&(me=De),me>0?this.pdfViewer.previousPage():me<0&&this.pdfViewer.nextPage();break}}},n=new WeakSet,bs=function(){this.showControlsBind=O(this,X,Hi).bind(this),this.mouseDownBind=O(this,K,fs).bind(this),this.mouseWheelBind=O(this,i,cs).bind(this),this.resetMouseScrollStateBind=O(this,ie,Tt).bind(this),this.contextMenuBind=O(this,V,ps).bind(this),this.touchSwipeBind=O(this,R,ms).bind(this),window.addEventListener("mousemove",this.showControlsBind),window.addEventListener("mousedown",this.mouseDownBind),window.addEventListener("wheel",this.mouseWheelBind,{passive:!1}),window.addEventListener("keydown",this.resetMouseScrollStateBind),window.addEventListener("contextmenu",this.contextMenuBind),window.addEventListener("touchstart",this.touchSwipeBind),window.addEventListener("touchmove",this.touchSwipeBind),window.addEventListener("touchend",this.touchSwipeBind)},L=new WeakSet,_s=function(){window.removeEventListener("mousemove",this.showControlsBind),window.removeEventListener("mousedown",this.mouseDownBind),window.removeEventListener("wheel",this.mouseWheelBind,{passive:!1}),window.removeEventListener("keydown",this.resetMouseScrollStateBind),window.removeEventListener("contextmenu",this.contextMenuBind),window.removeEventListener("touchstart",this.touchSwipeBind),window.removeEventListener("touchmove",this.touchSwipeBind),window.removeEventListener("touchend",this.touchSwipeBind),delete this.showControlsBind,delete this.mouseDownBind,delete this.mouseWheelBind,delete this.resetMouseScrollStateBind,delete this.contextMenuBind,delete this.touchSwipeBind},j=new WeakSet,vs=function(){document.fullscreenElement?O(this,o,hs).call(this):O(this,w,us).call(this)},te=new WeakSet,ws=function(){this.fullscreenChangeBind=O(this,j,vs).bind(this),window.addEventListener("fullscreenchange",this.fullscreenChangeBind)},ge=new WeakSet,zi=function(){window.removeEventListener("fullscreenchange",this.fullscreenChangeBind),delete this.fullscreenChangeBind},A.PDFPresentationMode=b},(ae,A,P)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.PDFRenderingQueue=void 0;var a=P(5),l=P(4);const T=3e4;class y{constructor(){this.pdfViewer=null,this.pdfThumbnailViewer=null,this.onIdle=null,this.highestPriorityPage=null,this.idleTimeout=null,this.printing=!1,this.isThumbnailViewEnabled=!1,Object.defineProperty(this,"hasViewer",{value:()=>!!this.pdfViewer})}setViewer(t){this.pdfViewer=t}setThumbnailViewer(t){this.pdfThumbnailViewer=t}isHighestPriority(t){return this.highestPriorityPage===t.renderingId}renderHighestPriority(t){var r;this.idleTimeout&&(clearTimeout(this.idleTimeout),this.idleTimeout=null),!this.pdfViewer.forceRendering(t)&&(this.isThumbnailViewEnabled&&((r=this.pdfThumbnailViewer)!=null&&r.forceRendering())||this.printing||this.onIdle&&(this.idleTimeout=setTimeout(this.onIdle.bind(this),T)))}getHighestPriority(t,r,d,p=!1){const b=t.views,f=b.length;if(f===0)return null;for(let c=0;c<f;c++){const o=b[c].view;if(!this.isViewFinished(o))return o}const m=t.first.id,i=t.last.id;if(i-m+1>f){const c=t.ids;for(let o=1,v=i-m;o<v;o++){const w=d?m+o:i-o;if(c.has(w))continue;const B=r[w-1];if(!this.isViewFinished(B))return B}}let s=d?i:m-2,h=r[s];return h&&!this.isViewFinished(h)||p&&(s+=d?1:-1,h=r[s],h&&!this.isViewFinished(h))?h:null}isViewFinished(t){return t.renderingState===l.RenderingStates.FINISHED}renderView(t){switch(t.renderingState){case l.RenderingStates.FINISHED:return!1;case l.RenderingStates.PAUSED:this.highestPriorityPage=t.renderingId,t.resume();break;case l.RenderingStates.RUNNING:this.highestPriorityPage=t.renderingId;break;case l.RenderingStates.INITIAL:this.highestPriorityPage=t.renderingId,t.draw().finally(()=>{this.renderHighestPriority()}).catch(r=>{r instanceof a.RenderingCancelledException||console.error(`renderView: "${r}"`)});break}return!0}}A.PDFRenderingQueue=y},(ae,A,P)=>{var y,S,t,r,d,p,b,f,m,i,s,h,ys,o,Wt,w,ji,K,Ss,V,Mt;Object.defineProperty(A,"__esModule",{value:!0}),A.PDFScriptingManager=void 0;var a=P(4),l=P(5);class T{constructor({eventBus:E,sandboxBundleSrc:F=null,externalServices:k=null,docProperties:ie=null}){M(this,h);M(this,o);M(this,w);M(this,K);M(this,V);M(this,y,null);M(this,S,null);M(this,t,null);M(this,r,null);M(this,d,null);M(this,p,null);M(this,b,null);M(this,f,!1);M(this,m,null);M(this,i,null);M(this,s,null);J(this,r,E),J(this,m,F),J(this,d,k),J(this,t,ie)}setViewer(E){J(this,b,E)}async setDocument(E){var _e;if(e(this,p)&&await O(this,V,Mt).call(this),J(this,p,E),!E)return;const[F,k,ie]=await Promise.all([E.getFieldObjects(),E.getCalculationOrderIds(),E.getJSActions()]);if(!F&&!ie){await O(this,V,Mt).call(this);return}if(E===e(this,p)){try{J(this,i,O(this,K,Ss).call(this))}catch(R){console.error(`setDocument: "${R.message}".`),await O(this,V,Mt).call(this);return}this._internalEvents.set("updatefromsandbox",R=>{(R==null?void 0:R.source)===window&&O(this,h,ys).call(this,R.detail)}),this._internalEvents.set("dispatcheventinsandbox",R=>{var g;(g=e(this,i))==null||g.dispatchEventInSandbox(R.detail)}),this._internalEvents.set("pagechanging",({pageNumber:R,previous:g})=>{R!==g&&(O(this,w,ji).call(this,g),O(this,o,Wt).call(this,R))}),this._internalEvents.set("pagerendered",({pageNumber:R})=>{this._pageOpenPending.has(R)&&R===e(this,b).currentPageNumber&&O(this,o,Wt).call(this,R)}),this._internalEvents.set("pagesdestroy",async()=>{var R,g;await O(this,w,ji).call(this,e(this,b).currentPageNumber),await((R=e(this,i))==null?void 0:R.dispatchEventInSandbox({id:"doc",name:"WillClose"})),(g=e(this,y))==null||g.resolve()});for(const[R,g]of this._internalEvents)e(this,r)._on(R,g);try{const R=await e(this,t).call(this,E);if(E!==e(this,p))return;await e(this,i).createSandbox({objects:F,calculationOrder:k,appInfo:{platform:navigator.platform,language:navigator.language},docInfo:{...R,actions:ie}}),e(this,r).dispatch("sandboxcreated",{source:this})}catch(R){console.error(`setDocument: "${R.message}".`),await O(this,V,Mt).call(this);return}await((_e=e(this,i))==null?void 0:_e.dispatchEventInSandbox({id:"doc",name:"Open"})),await O(this,o,Wt).call(this,e(this,b).currentPageNumber,!0),Promise.resolve().then(()=>{E===e(this,p)&&J(this,f,!0)})}}async dispatchWillSave(){var E;return(E=e(this,i))==null?void 0:E.dispatchEventInSandbox({id:"doc",name:"WillSave"})}async dispatchDidSave(){var E;return(E=e(this,i))==null?void 0:E.dispatchEventInSandbox({id:"doc",name:"DidSave"})}async dispatchWillPrint(){var E;if(e(this,i)){await((E=e(this,s))==null?void 0:E.promise),J(this,s,new l.PromiseCapability);try{await e(this,i).dispatchEventInSandbox({id:"doc",name:"WillPrint"})}catch(F){throw e(this,s).resolve(),J(this,s,null),F}await e(this,s).promise}}async dispatchDidPrint(){var E;return(E=e(this,i))==null?void 0:E.dispatchEventInSandbox({id:"doc",name:"DidPrint"})}get destroyPromise(){var E;return((E=e(this,S))==null?void 0:E.promise)||null}get ready(){return e(this,f)}get _internalEvents(){return(0,l.shadow)(this,"_internalEvents",new Map)}get _pageOpenPending(){return(0,l.shadow)(this,"_pageOpenPending",new Set)}get _visitedPages(){return(0,l.shadow)(this,"_visitedPages",new Map)}}y=new WeakMap,S=new WeakMap,t=new WeakMap,r=new WeakMap,d=new WeakMap,p=new WeakMap,b=new WeakMap,f=new WeakMap,m=new WeakMap,i=new WeakMap,s=new WeakMap,h=new WeakSet,ys=async function(E){var u,L;const F=e(this,b),k=F.isInPresentationMode||F.isChangingPresentationMode,{id:ie,siblings:_e,command:R,value:g}=E;if(!ie){switch(R){case"clear":console.clear();break;case"error":console.error(g);break;case"layout":if(!k){const I=(0,a.apiPageLayoutToViewerModes)(g);F.spreadMode=I.spreadMode}break;case"page-num":F.currentPageNumber=g+1;break;case"print":await F.pagesPromise,e(this,r).dispatch("print",{source:this});break;case"println":console.log(g);break;case"zoom":k||(F.currentScaleValue=g);break;case"SaveAs":e(this,r).dispatch("download",{source:this});break;case"FirstPage":F.currentPageNumber=1;break;case"LastPage":F.currentPageNumber=F.pagesCount;break;case"NextPage":F.nextPage();break;case"PrevPage":F.previousPage();break;case"ZoomViewIn":k||F.increaseScale();break;case"ZoomViewOut":k||F.decreaseScale();break;case"WillPrintFinished":(u=e(this,s))==null||u.resolve(),J(this,s,null);break}return}if(k&&E.focus)return;delete E.id,delete E.siblings;const n=_e?[ie,..._e]:[ie];for(const I of n){const j=document.querySelector(`[data-element-id="${I}"]`);j?j.dispatchEvent(new CustomEvent("updatefromsandbox",{detail:E})):(L=e(this,p))==null||L.annotationStorage.setValue(I,E)}},o=new WeakSet,Wt=async function(E,F=!1){const k=e(this,p),ie=this._visitedPages;if(F&&J(this,y,new l.PromiseCapability),!e(this,y))return;const _e=e(this,b).getPageView(E-1);if((_e==null?void 0:_e.renderingState)!==a.RenderingStates.FINISHED){this._pageOpenPending.add(E);return}this._pageOpenPending.delete(E);const R=(async()=>{var n,u;const g=await(ie.has(E)?null:(n=_e.pdfPage)==null?void 0:n.getJSActions());k===e(this,p)&&await((u=e(this,i))==null?void 0:u.dispatchEventInSandbox({id:"page",name:"PageOpen",pageNumber:E,actions:g}))})();ie.set(E,R)},w=new WeakSet,ji=async function(E){var _e;const F=e(this,p),k=this._visitedPages;if(!e(this,y)||this._pageOpenPending.has(E))return;const ie=k.get(E);ie&&(k.set(E,null),await ie,F===e(this,p)&&await((_e=e(this,i))==null?void 0:_e.dispatchEventInSandbox({id:"page",name:"PageClose",pageNumber:E})))},K=new WeakSet,Ss=function(){if(J(this,S,new l.PromiseCapability),e(this,i))throw new Error("#initScripting: Scripting already exists.");return e(this,d).createScripting({sandboxBundleSrc:e(this,m)})},V=new WeakSet,Mt=async function(){var E,F,k;if(!e(this,i)){J(this,p,null),(E=e(this,S))==null||E.resolve();return}e(this,y)&&(await Promise.race([e(this,y).promise,new Promise(ie=>{setTimeout(ie,1e3)})]).catch(()=>{}),J(this,y,null)),J(this,p,null);try{await e(this,i).destroySandbox()}catch{}(F=e(this,s))==null||F.reject(new Error("Scripting destroyed.")),J(this,s,null);for(const[ie,_e]of this._internalEvents)e(this,r)._off(ie,_e);this._internalEvents.clear(),this._pageOpenPending.clear(),this._visitedPages.clear(),J(this,i,null),J(this,f,!1),(k=e(this,S))==null||k.resolve()},A.PDFScriptingManager=T},(ae,A,P)=>{var r,d,p,b,f,m,ft,s,Es,c,Wi,v,As,B,$t,C,Ps,q,Cs;Object.defineProperty(A,"__esModule",{value:!0}),A.PDFSidebar=void 0;var a=P(4);const l="--sidebar-width",T=200,y="sidebarResizing",S="pdfSidebarNotification";class t{constructor({elements:F,eventBus:k,l10n:ie}){M(this,m);M(this,s);M(this,c);M(this,v);M(this,B);M(this,C);M(this,q);M(this,r,!1);M(this,d,O(this,C,Ps).bind(this));M(this,p,O(this,q,Cs).bind(this));M(this,b,null);M(this,f,null);this.isOpen=!1,this.active=a.SidebarView.THUMBS,this.isInitialViewSet=!1,this.isInitialEventDispatched=!1,this.onToggled=null,this.onUpdateThumbnails=null,this.outerContainer=F.outerContainer,this.sidebarContainer=F.sidebarContainer,this.toggleButton=F.toggleButton,this.resizer=F.resizer,this.thumbnailButton=F.thumbnailButton,this.outlineButton=F.outlineButton,this.attachmentsButton=F.attachmentsButton,this.layersButton=F.layersButton,this.thumbnailView=F.thumbnailView,this.outlineView=F.outlineView,this.attachmentsView=F.attachmentsView,this.layersView=F.layersView,this._outlineOptionsContainer=F.outlineOptionsContainer,this._currentOutlineItemButton=F.currentOutlineItemButton,this.eventBus=k,this.l10n=ie,ie.getDirection().then(_e=>{J(this,r,_e==="rtl")}),O(this,v,As).call(this)}reset(){this.isInitialViewSet=!1,this.isInitialEventDispatched=!1,O(this,c,Wi).call(this,!0),this.switchView(a.SidebarView.THUMBS),this.outlineButton.disabled=!1,this.attachmentsButton.disabled=!1,this.layersButton.disabled=!1,this._currentOutlineItemButton.disabled=!0}get visibleView(){return this.isOpen?this.active:a.SidebarView.NONE}setInitialView(F=a.SidebarView.NONE){if(!this.isInitialViewSet){if(this.isInitialViewSet=!0,F===a.SidebarView.NONE||F===a.SidebarView.UNKNOWN){O(this,m,ft).call(this);return}this.switchView(F,!0),this.isInitialEventDispatched||O(this,m,ft).call(this)}}switchView(F,k=!1){const ie=F!==this.active;let _e=!1;switch(F){case a.SidebarView.NONE:this.isOpen&&this.close();return;case a.SidebarView.THUMBS:this.isOpen&&ie&&(_e=!0);break;case a.SidebarView.OUTLINE:if(this.outlineButton.disabled)return;break;case a.SidebarView.ATTACHMENTS:if(this.attachmentsButton.disabled)return;break;case a.SidebarView.LAYERS:if(this.layersButton.disabled)return;break;default:console.error(`PDFSidebar.switchView: "${F}" is not a valid view.`);return}if(this.active=F,(0,a.toggleCheckedBtn)(this.thumbnailButton,F===a.SidebarView.THUMBS,this.thumbnailView),(0,a.toggleCheckedBtn)(this.outlineButton,F===a.SidebarView.OUTLINE,this.outlineView),(0,a.toggleCheckedBtn)(this.attachmentsButton,F===a.SidebarView.ATTACHMENTS,this.attachmentsView),(0,a.toggleCheckedBtn)(this.layersButton,F===a.SidebarView.LAYERS,this.layersView),this._outlineOptionsContainer.classList.toggle("hidden",F!==a.SidebarView.OUTLINE),k&&!this.isOpen){this.open();return}_e&&(this.onUpdateThumbnails(),this.onToggled()),ie&&O(this,m,ft).call(this)}open(){this.isOpen||(this.isOpen=!0,(0,a.toggleExpandedBtn)(this.toggleButton,!0),this.outerContainer.classList.add("sidebarMoving","sidebarOpen"),this.active===a.SidebarView.THUMBS&&this.onUpdateThumbnails(),this.onToggled(),O(this,m,ft).call(this),O(this,c,Wi).call(this))}close(){this.isOpen&&(this.isOpen=!1,(0,a.toggleExpandedBtn)(this.toggleButton,!1),this.outerContainer.classList.add("sidebarMoving"),this.outerContainer.classList.remove("sidebarOpen"),this.onToggled(),O(this,m,ft).call(this))}toggle(){this.isOpen?this.close():this.open()}get outerContainerWidth(){return e(this,b)||J(this,b,this.outerContainer.clientWidth)}}r=new WeakMap,d=new WeakMap,p=new WeakMap,b=new WeakMap,f=new WeakMap,m=new WeakSet,ft=function(){this.isInitialViewSet&&(this.isInitialEventDispatched||(this.isInitialEventDispatched=!0)),this.eventBus.dispatch("sidebarviewchanged",{source:this,view:this.visibleView})},s=new WeakSet,Es=function(){this.toggleButton.setAttribute("data-l10n-id","toggle_sidebar_notification2"),this.l10n.translate(this.toggleButton),this.isOpen||this.toggleButton.classList.add(S)},c=new WeakSet,Wi=function(F=!1){(this.isOpen||F)&&this.toggleButton.classList.remove(S),F&&(this.toggleButton.setAttribute("data-l10n-id","toggle_sidebar"),this.l10n.translate(this.toggleButton))},v=new WeakSet,As=function(){this.sidebarContainer.addEventListener("transitionend",k=>{k.target===this.sidebarContainer&&this.outerContainer.classList.remove("sidebarMoving")}),this.toggleButton.addEventListener("click",()=>{this.toggle()}),this.thumbnailButton.addEventListener("click",()=>{this.switchView(a.SidebarView.THUMBS)}),this.outlineButton.addEventListener("click",()=>{this.switchView(a.SidebarView.OUTLINE)}),this.outlineButton.addEventListener("dblclick",()=>{this.eventBus.dispatch("toggleoutlinetree",{source:this})}),this.attachmentsButton.addEventListener("click",()=>{this.switchView(a.SidebarView.ATTACHMENTS)}),this.layersButton.addEventListener("click",()=>{this.switchView(a.SidebarView.LAYERS)}),this.layersButton.addEventListener("dblclick",()=>{this.eventBus.dispatch("resetlayers",{source:this})}),this._currentOutlineItemButton.addEventListener("click",()=>{this.eventBus.dispatch("currentoutlineitem",{source:this})});const F=(k,ie,_e)=>{ie.disabled=!k,k?O(this,s,Es).call(this):this.active===_e&&this.switchView(a.SidebarView.THUMBS)};this.eventBus._on("outlineloaded",k=>{F(k.outlineCount,this.outlineButton,a.SidebarView.OUTLINE),k.currentOutlineItemPromise.then(ie=>{this.isInitialViewSet&&(this._currentOutlineItemButton.disabled=!ie)})}),this.eventBus._on("attachmentsloaded",k=>{F(k.attachmentsCount,this.attachmentsButton,a.SidebarView.ATTACHMENTS)}),this.eventBus._on("layersloaded",k=>{F(k.layersCount,this.layersButton,a.SidebarView.LAYERS)}),this.eventBus._on("presentationmodechanged",k=>{k.state===a.PresentationModeState.NORMAL&&this.visibleView===a.SidebarView.THUMBS&&this.onUpdateThumbnails()}),this.resizer.addEventListener("mousedown",k=>{k.button===0&&(this.outerContainer.classList.add(y),window.addEventListener("mousemove",e(this,d)),window.addEventListener("mouseup",e(this,p)))}),this.eventBus._on("resize",k=>{if(k.source!==window||(J(this,b,null),!e(this,f)))return;if(!this.isOpen){O(this,B,$t).call(this,e(this,f));return}this.outerContainer.classList.add(y);const ie=O(this,B,$t).call(this,e(this,f));Promise.resolve().then(()=>{this.outerContainer.classList.remove(y),ie&&this.eventBus.dispatch("resize",{source:this})})})},B=new WeakSet,$t=function(F=0){const k=Math.floor(this.outerContainerWidth/2);return F>k&&(F=k),F<T&&(F=T),F===e(this,f)?!1:(J(this,f,F),a.docStyle.setProperty(l,`${F}px`),!0)},C=new WeakSet,Ps=function(F){let k=F.clientX;e(this,r)&&(k=this.outerContainerWidth-k),O(this,B,$t).call(this,k)},q=new WeakSet,Cs=function(F){this.outerContainer.classList.remove(y),this.eventBus.dispatch("resize",{source:this}),window.removeEventListener("mousemove",e(this,d)),window.removeEventListener("mouseup",e(this,p))},A.PDFSidebar=t},(ae,A,P)=>{var t,Ts,d,Ms;Object.defineProperty(A,"__esModule",{value:!0}),A.PDFThumbnailViewer=void 0;var a=P(4),l=P(29);const T=-19,y="selected";class S{constructor({container:f,eventBus:m,linkService:i,renderingQueue:s,l10n:h,pageColors:c}){M(this,t);M(this,d);this.container=f,this.eventBus=m,this.linkService=i,this.renderingQueue=s,this.l10n=h,this.pageColors=c||null,this.scroll=(0,a.watchScroll)(this.container,this._scrollUpdated.bind(this)),this._resetView()}_scrollUpdated(){this.renderingQueue.renderHighestPriority()}getThumbnail(f){return this._thumbnails[f]}_getVisibleThumbs(){return(0,a.getVisibleElements)({scrollEl:this.container,views:this._thumbnails})}scrollThumbnailIntoView(f){if(!this.pdfDocument)return;const m=this._thumbnails[f-1];if(!m){console.error('scrollThumbnailIntoView: Invalid "pageNumber" parameter.');return}f!==this._currentPageNumber&&(this._thumbnails[this._currentPageNumber-1].div.classList.remove(y),m.div.classList.add(y));const{first:i,last:s,views:h}=this._getVisibleThumbs();if(h.length>0){let c=!1;if(f<=i.id||f>=s.id)c=!0;else for(const{id:o,percent:v}of h)if(o===f){c=v<100;break}c&&(0,a.scrollIntoView)(m.div,{top:T})}this._currentPageNumber=f}get pagesRotation(){return this._pagesRotation}set pagesRotation(f){if(!(0,a.isValidRotation)(f))throw new Error("Invalid thumbnails rotation angle.");if(!this.pdfDocument||this._pagesRotation===f)return;this._pagesRotation=f;const m={rotation:f};for(const i of this._thumbnails)i.update(m)}cleanup(){for(const f of this._thumbnails)f.renderingState!==a.RenderingStates.FINISHED&&f.reset();l.TempImageFactory.destroyCanvas()}_resetView(){this._thumbnails=[],this._currentPageNumber=1,this._pageLabels=null,this._pagesRotation=0,this.container.textContent=""}setDocument(f){if(this.pdfDocument&&(this._cancelRendering(),this._resetView()),this.pdfDocument=f,!f)return;const m=f.getPage(1),i=f.getOptionalContentConfig();m.then(s=>{var v;const h=f.numPages,c=s.getViewport({scale:1});for(let w=1;w<=h;++w){const B=new l.PDFThumbnailView({container:this.container,eventBus:this.eventBus,id:w,defaultViewport:c.clone(),optionalContentConfigPromise:i,linkService:this.linkService,renderingQueue:this.renderingQueue,l10n:this.l10n,pageColors:this.pageColors});this._thumbnails.push(B)}(v=this._thumbnails[0])==null||v.setPdfPage(s),this._thumbnails[this._currentPageNumber-1].div.classList.add(y)}).catch(s=>{console.error("Unable to initialize thumbnail viewer",s)})}_cancelRendering(){for(const f of this._thumbnails)f.cancelRendering()}setPageLabels(f){var m;if(this.pdfDocument){f?Array.isArray(f)&&this.pdfDocument.numPages===f.length?this._pageLabels=f:(this._pageLabels=null,console.error("PDFThumbnailViewer_setPageLabels: Invalid page labels.")):this._pageLabels=null;for(let i=0,s=this._thumbnails.length;i<s;i++)this._thumbnails[i].setPageLabel(((m=this._pageLabels)==null?void 0:m[i])??null)}}forceRendering(){const f=this._getVisibleThumbs(),m=O(this,d,Ms).call(this,f),i=this.renderingQueue.getHighestPriority(f,this._thumbnails,m);return i?(O(this,t,Ts).call(this,i).then(()=>{this.renderingQueue.renderView(i)}),!0):!1}}t=new WeakSet,Ts=async function(f){if(f.pdfPage)return f.pdfPage;try{const m=await this.pdfDocument.getPage(f.id);return f.pdfPage||f.setPdfPage(m),m}catch(m){return console.error("Unable to get page for thumb view",m),null}},d=new WeakSet,Ms=function(f){var m,i;return((m=f.first)==null?void 0:m.id)===1?!0:((i=f.last)==null?void 0:i.id)===this._thumbnails.length?!1:this.scroll.down},A.PDFThumbnailViewer=S},(ae,A,P)=>{var d,p,$i,f,Gi;Object.defineProperty(A,"__esModule",{value:!0}),A.TempImageFactory=A.PDFThumbnailView=void 0;var a=P(4),l=P(5);const T=2,y=3,S=98;class t{static getCanvas(s,h){const c=e(this,d)||J(this,d,document.createElement("canvas"));c.width=s,c.height=h;const o=c.getContext("2d",{alpha:!1});return o.save(),o.fillStyle="rgb(255, 255, 255)",o.fillRect(0,0,s,h),o.restore(),[c,c.getContext("2d")]}static destroyCanvas(){const s=e(this,d);s&&(s.width=0,s.height=0),J(this,d,null)}}d=new WeakMap,M(t,d,null),A.TempImageFactory=t;class r{constructor({container:s,eventBus:h,id:c,defaultViewport:o,optionalContentConfigPromise:v,linkService:w,renderingQueue:B,l10n:K,pageColors:C}){M(this,p);M(this,f);this.id=c,this.renderingId="thumbnail"+c,this.pageLabel=null,this.pdfPage=null,this.rotation=0,this.viewport=o,this.pdfPageRotate=o.rotation,this._optionalContentConfigPromise=v||null,this.pageColors=C||null,this.eventBus=h,this.linkService=w,this.renderingQueue=B,this.renderTask=null,this.renderingState=a.RenderingStates.INITIAL,this.resume=null,this.l10n=K;const V=document.createElement("a");V.href=w.getAnchorUrl("#page="+c),this._thumbPageTitle.then(E=>{V.title=E}),V.onclick=function(){return w.goToPage(c),!1},this.anchor=V;const q=document.createElement("div");q.className="thumbnail",q.setAttribute("data-page-number",this.id),this.div=q,O(this,p,$i).call(this);const X=document.createElement("div");X.className="thumbnailImage",this._placeholderImg=X,q.append(X),V.append(q),s.append(V)}setPdfPage(s){this.pdfPage=s,this.pdfPageRotate=s.rotate;const h=(this.rotation+this.pdfPageRotate)%360;this.viewport=s.getViewport({scale:1,rotation:h}),this.reset()}reset(){var s;this.cancelRendering(),this.renderingState=a.RenderingStates.INITIAL,this.div.removeAttribute("data-loaded"),(s=this.image)==null||s.replaceWith(this._placeholderImg),O(this,p,$i).call(this),this.image&&(this.image.removeAttribute("src"),delete this.image)}update({rotation:s=null}){typeof s=="number"&&(this.rotation=s);const h=(this.rotation+this.pdfPageRotate)%360;this.viewport=this.viewport.clone({scale:1,rotation:h}),this.reset()}cancelRendering(){this.renderTask&&(this.renderTask.cancel(),this.renderTask=null),this.resume=null}_getPageDrawContext(s=1){const h=document.createElement("canvas"),c=h.getContext("2d",{alpha:!1}),o=new a.OutputScale;h.width=s*this.canvasWidth*o.sx|0,h.height=s*this.canvasHeight*o.sy|0;const v=o.scaled?[o.sx,0,0,o.sy,0,0]:null;return{ctx:c,canvas:h,transform:v}}_convertCanvasToImage(s){if(this.renderingState!==a.RenderingStates.FINISHED)throw new Error("_convertCanvasToImage: Rendering has not finished.");const h=this._reduceImage(s),c=document.createElement("img");c.className="thumbnailImage",this._thumbPageCanvas.then(o=>{c.setAttribute("aria-label",o)}),c.src=h.toDataURL(),this.image=c,this.div.setAttribute("data-loaded",!0),this._placeholderImg.replaceWith(c),h.width=0,h.height=0}async draw(){if(this.renderingState!==a.RenderingStates.INITIAL){console.error("Must be in new state before drawing");return}const{pdfPage:s}=this;if(!s)throw this.renderingState=a.RenderingStates.FINISHED,new Error("pdfPage is not loaded");this.renderingState=a.RenderingStates.RUNNING;const{ctx:h,canvas:c,transform:o}=this._getPageDrawContext(T),v=this.viewport.clone({scale:T*this.scale}),w=V=>{if(!this.renderingQueue.isHighestPriority(this)){this.renderingState=a.RenderingStates.PAUSED,this.resume=()=>{this.renderingState=a.RenderingStates.RUNNING,V()};return}V()},B={canvasContext:h,transform:o,viewport:v,optionalContentConfigPromise:this._optionalContentConfigPromise,pageColors:this.pageColors},K=this.renderTask=s.render(B);K.onContinue=w;const C=K.promise.then(()=>O(this,f,Gi).call(this,K,c),V=>O(this,f,Gi).call(this,K,c,V));return C.finally(()=>{c.width=0,c.height=0,this.eventBus.dispatch("thumbnailrendered",{source:this,pageNumber:this.id,pdfPage:this.pdfPage})}),C}setImage(s){if(this.renderingState!==a.RenderingStates.INITIAL)return;const{thumbnailCanvas:h,pdfPage:c,scale:o}=s;h&&(this.pdfPage||this.setPdfPage(c),!(o<this.scale)&&(this.renderingState=a.RenderingStates.FINISHED,this._convertCanvasToImage(h)))}_reduceImage(s){const{ctx:h,canvas:c}=this._getPageDrawContext();if(s.width<=2*c.width)return h.drawImage(s,0,0,s.width,s.height,0,0,c.width,c.height),c;let o=c.width<<y,v=c.height<<y;const[w,B]=t.getCanvas(o,v);for(;o>s.width||v>s.height;)o>>=1,v>>=1;for(B.drawImage(s,0,0,s.width,s.height,0,0,o,v);o>2*c.width;)B.drawImage(w,0,0,o,v,0,0,o>>1,v>>1),o>>=1,v>>=1;return h.drawImage(w,0,0,o,v,0,0,c.width,c.height),c}get _thumbPageTitle(){return this.l10n.get("thumb_page_title",{page:this.pageLabel??this.id})}get _thumbPageCanvas(){return this.l10n.get("thumb_page_canvas",{page:this.pageLabel??this.id})}setPageLabel(s){this.pageLabel=typeof s=="string"?s:null,this._thumbPageTitle.then(h=>{this.anchor.title=h}),this.renderingState===a.RenderingStates.FINISHED&&this._thumbPageCanvas.then(h=>{var c;(c=this.image)==null||c.setAttribute("aria-label",h)})}}p=new WeakSet,$i=function(){const{width:s,height:h}=this.viewport,c=s/h;this.canvasWidth=S,this.canvasHeight=this.canvasWidth/c|0,this.scale=this.canvasWidth/s;const{style:o}=this.div;o.setProperty("--thumbnail-width",`${this.canvasWidth}px`),o.setProperty("--thumbnail-height",`${this.canvasHeight}px`)},f=new WeakSet,Gi=async function(s,h,c=null){if(s===this.renderTask&&(this.renderTask=null),!(c instanceof l.RenderingCancelledException)&&(this.renderingState=a.RenderingStates.FINISHED,this._convertCanvasToImage(h),c))throw c},A.PDFThumbnailView=r},(ae,A,P)=>{var m,i,s,Xi,c,o,v,w,B,K,C,V,q,X,E,F,k,ie,_e,R,g,Ls,u,xs,I,Rs,Y,ks,Se,Lt,ne,Gt,Ee,Is,xe,qi,Ae,Fs,oe,st,le,Ki,Ie,Os,ze,Ds,Ne,Yi,Xe,Ns;Object.defineProperty(A,"__esModule",{value:!0}),A.PagesCountLimit=A.PDFViewer=A.PDFPageViewBuffer=void 0;var a=P(5),l=P(4),T=P(31),y=P(32),S=P(25),t=P(11);const r=10,d={FORCE_SCROLL_MODE_PAGE:15e3,FORCE_LAZY_PAGE_INIT:7500,PAUSE_EAGER_PAGE_INIT:250};A.PagesCountLimit=d;function p(Le){return Object.values(a.AnnotationEditorType).includes(Le)&&Le!==a.AnnotationEditorType.DISABLE}class b{constructor(_){M(this,s);M(this,m,new Set);M(this,i,0);J(this,i,_)}push(_){const z=e(this,m);z.has(_)&&z.delete(_),z.add(_),z.size>e(this,i)&&O(this,s,Xi).call(this)}resize(_,z=null){J(this,i,_);const fe=e(this,m);if(z){const ee=fe.size;let he=1;for(const re of fe)if(z.has(re.id)&&(fe.delete(re),fe.add(re)),++he>ee)break}for(;fe.size>e(this,i);)O(this,s,Xi).call(this)}has(_){return e(this,m).has(_)}[Symbol.iterator](){return e(this,m).keys()}}m=new WeakMap,i=new WeakMap,s=new WeakSet,Xi=function(){const _=e(this,m).keys().next().value;_==null||_.destroy(),e(this,m).delete(_)},A.PDFPageViewBuffer=b;class f{constructor(_){M(this,g);M(this,u);M(this,I);M(this,Y);M(this,Se);M(this,ne);M(this,Ee);M(this,xe);M(this,Ae);M(this,oe);M(this,le);M(this,Ie);M(this,ze);M(this,Ne);M(this,Xe);M(this,c,null);M(this,o,a.AnnotationEditorType.NONE);M(this,v,null);M(this,w,a.AnnotationMode.ENABLE_FORMS);M(this,B,null);M(this,K,null);M(this,C,!1);M(this,V,!1);M(this,q,null);M(this,X,!1);M(this,E,0);M(this,F,new ResizeObserver(O(this,Xe,Ns).bind(this)));M(this,k,null);M(this,ie,null);M(this,_e,null);M(this,R,l.TextLayerMode.ENABLE);var fe,ee;const z="3.11.2";if(a.version!==z)throw new Error(`The API version "${a.version}" does not match the Viewer version "${z}".`);if(this.container=_.container,this.viewer=_.viewer||_.container.firstElementChild,((fe=this.container)==null?void 0:fe.tagName)!=="DIV"||((ee=this.viewer)==null?void 0:ee.tagName)!=="DIV")throw new Error("Invalid `container` and/or `viewer` option.");if(this.container.offsetParent&&getComputedStyle(this.container).position!=="absolute")throw new Error("The `container` must be absolutely positioned.");e(this,F).observe(this.container),this.eventBus=_.eventBus,this.linkService=_.linkService||new t.SimpleLinkService,this.downloadManager=_.downloadManager||null,this.findController=_.findController||null,this.findController&&(this.findController.onIsPageVisible=he=>this._getVisiblePages().ids.has(he)),this._scriptingManager=_.scriptingManager||null,J(this,R,_.textLayerMode??l.TextLayerMode.ENABLE),J(this,w,_.annotationMode??a.AnnotationMode.ENABLE_FORMS),J(this,o,_.annotationEditorMode??a.AnnotationEditorType.NONE),this.imageResourcesPath=_.imageResourcesPath||"",this.enablePrintAutoRotate=_.enablePrintAutoRotate||!1,this.removePageBorders=_.removePageBorders||!1,_.useOnlyCssZoom&&(console.error("useOnlyCssZoom was removed, please use `maxCanvasPixels = 0` instead."),_.maxCanvasPixels=0),this.isOffscreenCanvasSupported=_.isOffscreenCanvasSupported??!0,this.maxCanvasPixels=_.maxCanvasPixels,this.l10n=_.l10n||T.NullL10n,J(this,C,_.enablePermissions||!1),this.pageColors=_.pageColors||null,this.defaultRenderingQueue=!_.renderingQueue,this.defaultRenderingQueue?(this.renderingQueue=new S.PDFRenderingQueue,this.renderingQueue.setViewer(this)):this.renderingQueue=_.renderingQueue,this.scroll=(0,l.watchScroll)(this.container,this._scrollUpdate.bind(this)),this.presentationModeState=l.PresentationModeState.UNKNOWN,this._onBeforeDraw=this._onAfterDraw=null,this._resetView(),this.removePageBorders&&this.viewer.classList.add("removePageBorders"),O(this,Ne,Yi).call(this),this.eventBus._on("thumbnailrendered",({pageNumber:he,pdfPage:re})=>{const ve=this._pages[he-1];e(this,c).has(ve)||re==null||re.cleanup()})}get pagesCount(){return this._pages.length}getPageView(_){return this._pages[_]}getCachedPageViews(){return new Set(e(this,c))}get pageViewsReady(){return this._pagesCapability.settled&&this._pages.every(_=>_==null?void 0:_.pdfPage)}get renderForms(){return e(this,w)===a.AnnotationMode.ENABLE_FORMS}get enableScripting(){return!!this._scriptingManager}get currentPageNumber(){return this._currentPageNumber}set currentPageNumber(_){if(!Number.isInteger(_))throw new Error("Invalid page number.");this.pdfDocument&&(this._setCurrentPageNumber(_,!0)||console.error(`currentPageNumber: "${_}" is not a valid page.`))}_setCurrentPageNumber(_,z=!1){var ee;if(this._currentPageNumber===_)return z&&O(this,le,Ki).call(this),!0;if(!(0<_&&_<=this.pagesCount))return!1;const fe=this._currentPageNumber;return this._currentPageNumber=_,this.eventBus.dispatch("pagechanging",{source:this,pageNumber:_,pageLabel:((ee=this._pageLabels)==null?void 0:ee[_-1])??null,previous:fe}),z&&O(this,le,Ki).call(this),!0}get currentPageLabel(){var _;return((_=this._pageLabels)==null?void 0:_[this._currentPageNumber-1])??null}set currentPageLabel(_){if(!this.pdfDocument)return;let z=_|0;if(this._pageLabels){const fe=this._pageLabels.indexOf(_);fe>=0&&(z=fe+1)}this._setCurrentPageNumber(z,!0)||console.error(`currentPageLabel: "${_}" is not a valid page.`)}get currentScale(){return this._currentScale!==l.UNKNOWN_SCALE?this._currentScale:l.DEFAULT_SCALE}set currentScale(_){if(isNaN(_))throw new Error("Invalid numeric scale.");this.pdfDocument&&O(this,oe,st).call(this,_,{noScroll:!1})}get currentScaleValue(){return this._currentScaleValue}set currentScaleValue(_){this.pdfDocument&&O(this,oe,st).call(this,_,{noScroll:!1})}get pagesRotation(){return this._pagesRotation}set pagesRotation(_){if(!(0,l.isValidRotation)(_))throw new Error("Invalid pages rotation angle.");if(!this.pdfDocument||(_%=360,_<0&&(_+=360),this._pagesRotation===_))return;this._pagesRotation=_;const z=this._currentPageNumber;this.refresh(!0,{rotation:_}),this._currentScaleValue&&O(this,oe,st).call(this,this._currentScaleValue,{noScroll:!0}),this.eventBus.dispatch("rotationchanging",{source:this,pagesRotation:_,pageNumber:z}),this.defaultRenderingQueue&&this.update()}get firstPagePromise(){return this.pdfDocument?this._firstPageCapability.promise:null}get onePageRendered(){return this.pdfDocument?this._onePageRenderedCapability.promise:null}get pagesPromise(){return this.pdfDocument?this._pagesCapability.promise:null}async getAllText(){const _=[],z=[];for(let fe=1,ee=this.pdfDocument.numPages;fe<=ee;++fe){if(e(this,X))return null;z.length=0;const he=await this.pdfDocument.getPage(fe),{items:re}=await he.getTextContent();for(const ve of re)ve.str&&z.push(ve.str),ve.hasEOL&&z.push(`
`);_.push((0,l.removeNullCharacters)(z.join("")))}return _.join(`
`)}setDocument(_){var re,ve;if(this.pdfDocument&&(this.eventBus.dispatch("pagesdestroy",{source:this}),this._cancelRendering(),this._resetView(),(re=this.findController)==null||re.setDocument(null),(ve=this._scriptingManager)==null||ve.setDocument(null),e(this,v)&&(e(this,v).destroy(),J(this,v,null))),this.pdfDocument=_,!_)return;const z=_.numPages,fe=_.getPage(1),ee=_.getOptionalContentConfig(),he=e(this,C)?_.getPermissions():Promise.resolve();if(z>d.FORCE_SCROLL_MODE_PAGE){console.warn("Forcing PAGE-scrolling for performance reasons, given the length of the document.");const U=this._scrollMode=l.ScrollMode.PAGE;this.eventBus.dispatch("scrollmodechanged",{source:this,mode:U})}this._pagesCapability.promise.then(()=>{this.eventBus.dispatch("pagesloaded",{source:this,pagesCount:z})},()=>{}),this._onBeforeDraw=U=>{const pe=this._pages[U.pageNumber-1];pe&&e(this,c).push(pe)},this.eventBus._on("pagerender",this._onBeforeDraw),this._onAfterDraw=U=>{U.cssTransform||this._onePageRenderedCapability.settled||(this._onePageRenderedCapability.resolve({timestamp:U.timestamp}),this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null,e(this,ie)&&(document.removeEventListener("visibilitychange",e(this,ie)),J(this,ie,null)))},this.eventBus._on("pagerendered",this._onAfterDraw),Promise.all([fe,he]).then(([U,pe])=>{var ke,$;if(_!==this.pdfDocument)return;this._firstPageCapability.resolve(U),this._optionalContentConfigPromise=ee;const{annotationEditorMode:Ce,annotationMode:we,textLayerMode:D}=O(this,u,xs).call(this,pe);if(D!==l.TextLayerMode.DISABLE){const de=J(this,q,document.createElement("div"));de.id="hiddenCopyElement",this.viewer.before(de)}if(Ce!==a.AnnotationEditorType.DISABLE){const de=Ce;_.isPureXfa?console.warn("Warning: XFA-editing is not implemented."):p(de)?(J(this,v,new a.AnnotationEditorUIManager(this.container,this.viewer,this.eventBus,_,this.pageColors)),de!==a.AnnotationEditorType.NONE&&e(this,v).updateMode(de)):console.error(`Invalid AnnotationEditor mode: ${de}`)}const x=O(this,g,Ls).bind(this),W=this._scrollMode===l.ScrollMode.PAGE?null:this.viewer,G=this.currentScale,se=U.getViewport({scale:G*a.PixelsPerInch.PDF_TO_CSS_UNITS});this.viewer.style.setProperty("--scale-factor",se.scale),(((ke=this.pageColors)==null?void 0:ke.foreground)==="CanvasText"||(($=this.pageColors)==null?void 0:$.background)==="Canvas")&&this.viewer.style.setProperty("--hcm-highligh-filter",_.filterFactory.addHighlightHCMFilter("CanvasText","Canvas","HighlightText","Highlight"));for(let de=1;de<=z;++de){const ye=new y.PDFPageView({container:W,eventBus:this.eventBus,id:de,scale:G,defaultViewport:se.clone(),optionalContentConfigPromise:ee,renderingQueue:this.renderingQueue,textLayerMode:D,annotationMode:we,imageResourcesPath:this.imageResourcesPath,isOffscreenCanvasSupported:this.isOffscreenCanvasSupported,maxCanvasPixels:this.maxCanvasPixels,pageColors:this.pageColors,l10n:this.l10n,layerProperties:x});this._pages.push(ye)}const be=this._pages[0];be&&(be.setPdfPage(U),this.linkService.cachePageRef(1,U.ref)),this._scrollMode===l.ScrollMode.PAGE?O(this,Se,Lt).call(this):this._spreadMode!==l.SpreadMode.NONE&&this._updateSpreadMode(),O(this,I,Rs).call(this).then(async()=>{var ye,Fe;if((ye=this.findController)==null||ye.setDocument(_),(Fe=this._scriptingManager)==null||Fe.setDocument(_),e(this,q)&&(J(this,K,O(this,Y,ks).bind(this,D)),document.addEventListener("copy",e(this,K))),e(this,v)&&this.eventBus.dispatch("annotationeditormodechanged",{source:this,mode:e(this,o)}),_.loadingParams.disableAutoFetch||z>d.FORCE_LAZY_PAGE_INIT){this._pagesCapability.resolve();return}let de=z-1;if(de<=0){this._pagesCapability.resolve();return}for(let Me=2;Me<=z;++Me){const Oe=_.getPage(Me).then(He=>{const $e=this._pages[Me-1];$e.pdfPage||$e.setPdfPage(He),this.linkService.cachePageRef(Me,He.ref),--de===0&&this._pagesCapability.resolve()},He=>{console.error(`Unable to get page ${Me} to initialize viewer`,He),--de===0&&this._pagesCapability.resolve()});Me%d.PAUSE_EAGER_PAGE_INIT===0&&await Oe}}),this.eventBus.dispatch("pagesinit",{source:this}),_.getMetadata().then(({info:de})=>{_===this.pdfDocument&&de.Language&&(this.viewer.lang=de.Language)}),this.defaultRenderingQueue&&this.update()}).catch(U=>{console.error("Unable to initialize viewer",U),this._pagesCapability.reject(U)})}setPageLabels(_){var z;if(this.pdfDocument){_?Array.isArray(_)&&this.pdfDocument.numPages===_.length?this._pageLabels=_:(this._pageLabels=null,console.error("setPageLabels: Invalid page labels.")):this._pageLabels=null;for(let fe=0,ee=this._pages.length;fe<ee;fe++)this._pages[fe].setPageLabel(((z=this._pageLabels)==null?void 0:z[fe])??null)}}_resetView(){this._pages=[],this._currentPageNumber=1,this._currentScale=l.UNKNOWN_SCALE,this._currentScaleValue=null,this._pageLabels=null,J(this,c,new b(r)),this._location=null,this._pagesRotation=0,this._optionalContentConfigPromise=null,this._firstPageCapability=new a.PromiseCapability,this._onePageRenderedCapability=new a.PromiseCapability,this._pagesCapability=new a.PromiseCapability,this._scrollMode=l.ScrollMode.VERTICAL,this._previousScrollMode=l.ScrollMode.UNKNOWN,this._spreadMode=l.SpreadMode.NONE,J(this,k,{previousPageNumber:1,scrollDown:!0,pages:[]}),this._onBeforeDraw&&(this.eventBus._off("pagerender",this._onBeforeDraw),this._onBeforeDraw=null),this._onAfterDraw&&(this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null),e(this,ie)&&(document.removeEventListener("visibilitychange",e(this,ie)),J(this,ie,null)),this.viewer.textContent="",this._updateScrollMode(),this.viewer.removeAttribute("lang"),e(this,q)&&(document.removeEventListener("copy",e(this,K)),J(this,K,null),e(this,q).remove(),J(this,q,null))}_scrollUpdate(){this.pagesCount!==0&&this.update()}pageLabelToPageNumber(_){if(!this._pageLabels)return null;const z=this._pageLabels.indexOf(_);return z<0?null:z+1}scrollPageIntoView({pageNumber:_,destArray:z=null,allowNegativeOffset:fe=!1,ignoreDestinationZoom:ee=!1}){if(!this.pdfDocument)return;const he=Number.isInteger(_)&&this._pages[_-1];if(!he){console.error(`scrollPageIntoView: "${_}" is not a valid pageNumber parameter.`);return}if(this.isInPresentationMode||!z){this._setCurrentPageNumber(_,!0);return}let re=0,ve=0,U=0,pe=0,Ce,we;const D=he.rotation%180!==0,x=(D?he.height:he.width)/he.scale/a.PixelsPerInch.PDF_TO_CSS_UNITS,W=(D?he.width:he.height)/he.scale/a.PixelsPerInch.PDF_TO_CSS_UNITS;let G=0;switch(z[1].name){case"XYZ":re=z[2],ve=z[3],G=z[4],re=re!==null?re:0,ve=ve!==null?ve:W;break;case"Fit":case"FitB":G="page-fit";break;case"FitH":case"FitBH":ve=z[2],G="page-width",ve===null&&this._location?(re=this._location.left,ve=this._location.top):(typeof ve!="number"||ve<0)&&(ve=W);break;case"FitV":case"FitBV":re=z[2],U=x,pe=W,G="page-height";break;case"FitR":re=z[2],ve=z[3],U=z[4]-re,pe=z[5]-ve;let $=l.SCROLLBAR_PADDING,de=l.VERTICAL_PADDING;this.removePageBorders&&($=de=0),Ce=(this.container.clientWidth-$)/U/a.PixelsPerInch.PDF_TO_CSS_UNITS,we=(this.container.clientHeight-de)/pe/a.PixelsPerInch.PDF_TO_CSS_UNITS,G=Math.min(Math.abs(Ce),Math.abs(we));break;default:console.error(`scrollPageIntoView: "${z[1].name}" is not a valid destination type.`);return}if(ee||(G&&G!==this._currentScale?this.currentScaleValue=G:this._currentScale===l.UNKNOWN_SCALE&&(this.currentScaleValue=l.DEFAULT_SCALE_VALUE)),G==="page-fit"&&!z[4]){O(this,ne,Gt).call(this,he);return}const se=[he.viewport.convertToViewportPoint(re,ve),he.viewport.convertToViewportPoint(re+U,ve+pe)];let be=Math.min(se[0][0],se[1][0]),ke=Math.min(se[0][1],se[1][1]);fe||(be=Math.max(be,0),ke=Math.max(ke,0)),O(this,ne,Gt).call(this,he,{left:be,top:ke})}_updateLocation(_){const z=this._currentScale,fe=this._currentScaleValue,ee=parseFloat(fe)===z?Math.round(z*1e4)/100:fe,he=_.id,re=this._pages[he-1],ve=this.container,U=re.getPagePoint(ve.scrollLeft-_.x,ve.scrollTop-_.y),pe=Math.round(U[0]),Ce=Math.round(U[1]);let we=`#page=${he}`;this.isInPresentationMode||(we+=`&zoom=${ee},${pe},${Ce}`),this._location={pageNumber:he,scale:ee,top:Ce,left:pe,rotation:this._pagesRotation,pdfOpenParams:we}}update(){const _=this._getVisiblePages(),z=_.views,fe=z.length;if(fe===0)return;const ee=Math.max(r,2*fe+1);e(this,c).resize(ee,_.ids),this.renderingQueue.renderHighestPriority(_);const he=this._spreadMode===l.SpreadMode.NONE&&(this._scrollMode===l.ScrollMode.PAGE||this._scrollMode===l.ScrollMode.VERTICAL),re=this._currentPageNumber;let ve=!1;for(const U of z){if(U.percent<100)break;if(U.id===re&&he){ve=!0;break}}this._setCurrentPageNumber(ve?re:z[0].id),this._updateLocation(_.first),this.eventBus.dispatch("updateviewarea",{source:this,location:this._location})}containsElement(_){return this.container.contains(_)}focus(){this.container.focus()}get _isContainerRtl(){return getComputedStyle(this.container).direction==="rtl"}get isInPresentationMode(){return this.presentationModeState===l.PresentationModeState.FULLSCREEN}get isChangingPresentationMode(){return this.presentationModeState===l.PresentationModeState.CHANGING}get isHorizontalScrollbarEnabled(){return this.isInPresentationMode?!1:this.container.scrollWidth>this.container.clientWidth}get isVerticalScrollbarEnabled(){return this.isInPresentationMode?!1:this.container.scrollHeight>this.container.clientHeight}_getVisiblePages(){const _=this._scrollMode===l.ScrollMode.PAGE?e(this,k).pages:this._pages,z=this._scrollMode===l.ScrollMode.HORIZONTAL,fe=z&&this._isContainerRtl;return(0,l.getVisibleElements)({scrollEl:this.container,views:_,sortByVisibility:!0,horizontal:z,rtl:fe})}cleanup(){for(const _ of this._pages)_.renderingState!==l.RenderingStates.FINISHED&&_.reset()}_cancelRendering(){for(const _ of this._pages)_.cancelRendering()}forceRendering(_){const z=_||this._getVisiblePages(),fe=O(this,ze,Ds).call(this,z),ee=this._spreadMode!==l.SpreadMode.NONE&&this._scrollMode!==l.ScrollMode.HORIZONTAL,he=this.renderingQueue.getHighestPriority(z,this._pages,fe,ee);return he?(O(this,Ie,Os).call(this,he).then(()=>{this.renderingQueue.renderView(he)}),!0):!1}get hasEqualPageSizes(){const _=this._pages[0];for(let z=1,fe=this._pages.length;z<fe;++z){const ee=this._pages[z];if(ee.width!==_.width||ee.height!==_.height)return!1}return!0}getPagesOverview(){let _;return this._pages.map(z=>{const fe=z.pdfPage.getViewport({scale:1}),ee=(0,l.isPortraitOrientation)(fe);if(_===void 0)_=ee;else if(this.enablePrintAutoRotate&&ee!==_)return{width:fe.height,height:fe.width,rotation:(fe.rotation-90)%360};return{width:fe.width,height:fe.height,rotation:fe.rotation}})}get optionalContentConfigPromise(){return this.pdfDocument?this._optionalContentConfigPromise?this._optionalContentConfigPromise:(console.error("optionalContentConfigPromise: Not initialized yet."),this.pdfDocument.getOptionalContentConfig()):Promise.resolve(null)}set optionalContentConfigPromise(_){if(!(_ instanceof Promise))throw new Error(`Invalid optionalContentConfigPromise: ${_}`);this.pdfDocument&&this._optionalContentConfigPromise&&(this._optionalContentConfigPromise=_,this.refresh(!1,{optionalContentConfigPromise:_}),this.eventBus.dispatch("optionalcontentconfigchanged",{source:this,promise:_}))}get scrollMode(){return this._scrollMode}set scrollMode(_){if(this._scrollMode!==_){if(!(0,l.isValidScrollMode)(_))throw new Error(`Invalid scroll mode: ${_}`);this.pagesCount>d.FORCE_SCROLL_MODE_PAGE||(this._previousScrollMode=this._scrollMode,this._scrollMode=_,this.eventBus.dispatch("scrollmodechanged",{source:this,mode:_}),this._updateScrollMode(this._currentPageNumber))}}_updateScrollMode(_=null){const z=this._scrollMode,fe=this.viewer;fe.classList.toggle("scrollHorizontal",z===l.ScrollMode.HORIZONTAL),fe.classList.toggle("scrollWrapped",z===l.ScrollMode.WRAPPED),!(!this.pdfDocument||!_)&&(z===l.ScrollMode.PAGE?O(this,Se,Lt).call(this):this._previousScrollMode===l.ScrollMode.PAGE&&this._updateSpreadMode(),this._currentScaleValue&&isNaN(this._currentScaleValue)&&O(this,oe,st).call(this,this._currentScaleValue,{noScroll:!0}),this._setCurrentPageNumber(_,!0),this.update())}get spreadMode(){return this._spreadMode}set spreadMode(_){if(this._spreadMode!==_){if(!(0,l.isValidSpreadMode)(_))throw new Error(`Invalid spread mode: ${_}`);this._spreadMode=_,this.eventBus.dispatch("spreadmodechanged",{source:this,mode:_}),this._updateSpreadMode(this._currentPageNumber)}}_updateSpreadMode(_=null){if(!this.pdfDocument)return;const z=this.viewer,fe=this._pages;if(this._scrollMode===l.ScrollMode.PAGE)O(this,Se,Lt).call(this);else if(z.textContent="",this._spreadMode===l.SpreadMode.NONE)for(const ee of this._pages)z.append(ee.div);else{const ee=this._spreadMode-1;let he=null;for(let re=0,ve=fe.length;re<ve;++re)he===null?(he=document.createElement("div"),he.className="spread",z.append(he)):re%2===ee&&(he=he.cloneNode(!1),z.append(he)),he.append(fe[re].div)}_&&(this._currentScaleValue&&isNaN(this._currentScaleValue)&&O(this,oe,st).call(this,this._currentScaleValue,{noScroll:!0}),this._setCurrentPageNumber(_,!0),this.update())}_getPageAdvance(_,z=!1){switch(this._scrollMode){case l.ScrollMode.WRAPPED:{const{views:fe}=this._getVisiblePages(),ee=new Map;for(const{id:he,y:re,percent:ve,widthPercent:U}of fe){if(ve===0||U<100)continue;let pe=ee.get(re);pe||ee.set(re,pe||(pe=[])),pe.push(he)}for(const he of ee.values()){const re=he.indexOf(_);if(re===-1)continue;const ve=he.length;if(ve===1)break;if(z)for(let U=re-1,pe=0;U>=pe;U--){const Ce=he[U],we=he[U+1]-1;if(Ce<we)return _-we}else for(let U=re+1,pe=ve;U<pe;U++){const Ce=he[U],we=he[U-1]+1;if(Ce>we)return we-_}if(z){const U=he[0];if(U<_)return _-U+1}else{const U=he[ve-1];if(U>_)return U-_+1}break}break}case l.ScrollMode.HORIZONTAL:break;case l.ScrollMode.PAGE:case l.ScrollMode.VERTICAL:{if(this._spreadMode===l.SpreadMode.NONE)break;const fe=this._spreadMode-1;if(z&&_%2!==fe)break;if(!z&&_%2===fe)break;const{views:ee}=this._getVisiblePages(),he=z?_-1:_+1;for(const{id:re,percent:ve,widthPercent:U}of ee)if(re===he){if(ve>0&&U===100)return 2;break}break}}return 1}nextPage(){const _=this._currentPageNumber,z=this.pagesCount;if(_>=z)return!1;const fe=this._getPageAdvance(_,!1)||1;return this.currentPageNumber=Math.min(_+fe,z),!0}previousPage(){const _=this._currentPageNumber;if(_<=1)return!1;const z=this._getPageAdvance(_,!0)||1;return this.currentPageNumber=Math.max(_-z,1),!0}increaseScale({drawingDelay:_,scaleFactor:z,steps:fe}={}){if(!this.pdfDocument)return;let ee=this._currentScale;if(z>1)ee=Math.round(ee*z*100)/100;else{fe??(fe=1);do ee=Math.ceil((ee*l.DEFAULT_SCALE_DELTA).toFixed(2)*10)/10;while(--fe>0&&ee<l.MAX_SCALE)}O(this,oe,st).call(this,Math.min(l.MAX_SCALE,ee),{noScroll:!1,drawingDelay:_})}decreaseScale({drawingDelay:_,scaleFactor:z,steps:fe}={}){if(!this.pdfDocument)return;let ee=this._currentScale;if(z>0&&z<1)ee=Math.round(ee*z*100)/100;else{fe??(fe=1);do ee=Math.floor((ee/l.DEFAULT_SCALE_DELTA).toFixed(2)*10)/10;while(--fe>0&&ee>l.MIN_SCALE)}O(this,oe,st).call(this,Math.max(l.MIN_SCALE,ee),{noScroll:!1,drawingDelay:_})}get containerTopLeft(){return e(this,B)||J(this,B,[this.container.offsetTop,this.container.offsetLeft])}get annotationEditorMode(){return e(this,v)?e(this,o):a.AnnotationEditorType.DISABLE}set annotationEditorMode({mode:_,editId:z=null}){if(!e(this,v))throw new Error("The AnnotationEditor is not enabled.");if(e(this,o)!==_){if(!p(_))throw new Error(`Invalid AnnotationEditor mode: ${_}`);this.pdfDocument&&(J(this,o,_),this.eventBus.dispatch("annotationeditormodechanged",{source:this,mode:_}),e(this,v).updateMode(_,z))}}set annotationEditorParams({type:_,value:z}){if(!e(this,v))throw new Error("The AnnotationEditor is not enabled.");e(this,v).updateParams(_,z)}refresh(_=!1,z=Object.create(null)){if(this.pdfDocument){for(const fe of this._pages)fe.update(z);e(this,_e)!==null&&(clearTimeout(e(this,_e)),J(this,_e,null)),_||this.update()}}}c=new WeakMap,o=new WeakMap,v=new WeakMap,w=new WeakMap,B=new WeakMap,K=new WeakMap,C=new WeakMap,V=new WeakMap,q=new WeakMap,X=new WeakMap,E=new WeakMap,F=new WeakMap,k=new WeakMap,ie=new WeakMap,_e=new WeakMap,R=new WeakMap,g=new WeakSet,Ls=function(){const _=this;return{get annotationEditorUIManager(){return e(_,v)},get annotationStorage(){var z;return(z=_.pdfDocument)==null?void 0:z.annotationStorage},get downloadManager(){return _.downloadManager},get enableScripting(){return!!_._scriptingManager},get fieldObjectsPromise(){var z;return(z=_.pdfDocument)==null?void 0:z.getFieldObjects()},get findController(){return _.findController},get hasJSActionsPromise(){var z;return(z=_.pdfDocument)==null?void 0:z.hasJSActions()},get linkService(){return _.linkService}}},u=new WeakSet,xs=function(_){const z={annotationEditorMode:e(this,o),annotationMode:e(this,w),textLayerMode:e(this,R)};return _&&(!_.includes(a.PermissionFlag.COPY)&&e(this,R)===l.TextLayerMode.ENABLE&&(z.textLayerMode=l.TextLayerMode.ENABLE_PERMISSIONS),_.includes(a.PermissionFlag.MODIFY_CONTENTS)||(z.annotationEditorMode=a.AnnotationEditorType.DISABLE),!_.includes(a.PermissionFlag.MODIFY_ANNOTATIONS)&&!_.includes(a.PermissionFlag.FILL_INTERACTIVE_FORMS)&&e(this,w)===a.AnnotationMode.ENABLE_FORMS&&(z.annotationMode=a.AnnotationMode.ENABLE)),z},I=new WeakSet,Rs=function(){if(document.visibilityState==="hidden"||!this.container.offsetParent||this._getVisiblePages().views.length===0)return Promise.resolve();const _=new Promise(z=>{J(this,ie,()=>{document.visibilityState==="hidden"&&(z(),document.removeEventListener("visibilitychange",e(this,ie)),J(this,ie,null))}),document.addEventListener("visibilitychange",e(this,ie))});return Promise.race([this._onePageRenderedCapability.promise,_])},Y=new WeakSet,ks=function(_,z){const fe=document.getSelection(),{focusNode:ee,anchorNode:he}=fe;if(he&&ee&&fe.containsNode(e(this,q))){if(e(this,V)||_===l.TextLayerMode.ENABLE_PERMISSIONS){z.preventDefault(),z.stopPropagation();return}J(this,V,!0);const re=this.container.style.cursor;this.container.style.cursor="wait";const ve=U=>J(this,X,U.key==="Escape");window.addEventListener("keydown",ve),this.getAllText().then(async U=>{U!==null&&await navigator.clipboard.writeText(U)}).catch(U=>{console.warn(`Something goes wrong when extracting the text: ${U.message}`)}).finally(()=>{J(this,V,!1),J(this,X,!1),window.removeEventListener("keydown",ve),this.container.style.cursor=re}),z.preventDefault(),z.stopPropagation()}},Se=new WeakSet,Lt=function(){if(this._scrollMode!==l.ScrollMode.PAGE)throw new Error("#ensurePageViewVisible: Invalid scrollMode value.");const _=this._currentPageNumber,z=e(this,k),fe=this.viewer;if(fe.textContent="",z.pages.length=0,this._spreadMode===l.SpreadMode.NONE&&!this.isInPresentationMode){const ee=this._pages[_-1];fe.append(ee.div),z.pages.push(ee)}else{const ee=new Set,he=this._spreadMode-1;he===-1?ee.add(_-1):_%2!==he?(ee.add(_-1),ee.add(_)):(ee.add(_-2),ee.add(_-1));const re=document.createElement("div");if(re.className="spread",this.isInPresentationMode){const ve=document.createElement("div");ve.className="dummyPage",re.append(ve)}for(const ve of ee){const U=this._pages[ve];U&&(re.append(U.div),z.pages.push(U))}fe.append(re)}z.scrollDown=_>=z.previousPageNumber,z.previousPageNumber=_},ne=new WeakSet,Gt=function(_,z=null){const{div:fe,id:ee}=_;if(this._currentPageNumber!==ee&&this._setCurrentPageNumber(ee),this._scrollMode===l.ScrollMode.PAGE&&(O(this,Se,Lt).call(this),this.update()),!z&&!this.isInPresentationMode){const he=fe.offsetLeft+fe.clientLeft,re=he+fe.clientWidth,{scrollLeft:ve,clientWidth:U}=this.container;(this._scrollMode===l.ScrollMode.HORIZONTAL||he<ve||re>ve+U)&&(z={left:0,top:0})}(0,l.scrollIntoView)(fe,z),!this._currentScaleValue&&this._location&&(this._location=null)},Ee=new WeakSet,Is=function(_){return _===this._currentScale||Math.abs(_-this._currentScale)<1e-15},xe=new WeakSet,qi=function(_,z,{noScroll:fe=!1,preset:ee=!1,drawingDelay:he=-1}){if(this._currentScaleValue=z.toString(),O(this,Ee,Is).call(this,_)){ee&&this.eventBus.dispatch("scalechanging",{source:this,scale:_,presetValue:z});return}this.viewer.style.setProperty("--scale-factor",_*a.PixelsPerInch.PDF_TO_CSS_UNITS);const re=he>=0&&he<1e3;if(this.refresh(!0,{scale:_,drawingDelay:re?he:-1}),re&&J(this,_e,setTimeout(()=>{J(this,_e,null),this.refresh()},he)),this._currentScale=_,!fe){let ve=this._currentPageNumber,U;this._location&&!(this.isInPresentationMode||this.isChangingPresentationMode)&&(ve=this._location.pageNumber,U=[null,{name:"XYZ"},this._location.left,this._location.top,null]),this.scrollPageIntoView({pageNumber:ve,destArray:U,allowNegativeOffset:!0})}this.eventBus.dispatch("scalechanging",{source:this,scale:_,presetValue:ee?z:void 0}),this.defaultRenderingQueue&&this.update()},Ae=new WeakSet,Fs=function(){return this._spreadMode!==l.SpreadMode.NONE&&this._scrollMode!==l.ScrollMode.HORIZONTAL?2:1},oe=new WeakSet,st=function(_,z){let fe=parseFloat(_);if(fe>0)z.preset=!1,O(this,xe,qi).call(this,fe,_,z);else{const ee=this._pages[this._currentPageNumber-1];if(!ee)return;let he=l.SCROLLBAR_PADDING,re=l.VERTICAL_PADDING;this.isInPresentationMode?(he=re=4,this._spreadMode!==l.SpreadMode.NONE&&(he*=2)):this.removePageBorders?he=re=0:this._scrollMode===l.ScrollMode.HORIZONTAL&&([he,re]=[re,he]);const ve=(this.container.clientWidth-he)/ee.width*ee.scale/e(this,Ae,Fs),U=(this.container.clientHeight-re)/ee.height*ee.scale;switch(_){case"page-actual":fe=1;break;case"page-width":fe=ve;break;case"page-height":fe=U;break;case"page-fit":fe=Math.min(ve,U);break;case"auto":const pe=(0,l.isPortraitOrientation)(ee)?ve:Math.min(U,ve);fe=Math.min(l.MAX_AUTO_SCALE,pe);break;default:console.error(`#setScale: "${_}" is an unknown zoom value.`);return}z.preset=!0,O(this,xe,qi).call(this,fe,_,z)}},le=new WeakSet,Ki=function(){const _=this._pages[this._currentPageNumber-1];this.isInPresentationMode&&O(this,oe,st).call(this,this._currentScaleValue,{noScroll:!0}),O(this,ne,Gt).call(this,_)},Ie=new WeakSet,Os=async function(_){var z,fe;if(_.pdfPage)return _.pdfPage;try{const ee=await this.pdfDocument.getPage(_.id);return _.pdfPage||_.setPdfPage(ee),(fe=(z=this.linkService)._cachedPageNumber)!=null&&fe.call(z,ee.ref)||this.linkService.cachePageRef(_.id,ee.ref),ee}catch(ee){return console.error("Unable to get page for page view",ee),null}},ze=new WeakSet,Ds=function(_){var z,fe;if(((z=_.first)==null?void 0:z.id)===1)return!0;if(((fe=_.last)==null?void 0:fe.id)===this.pagesCount)return!1;switch(this._scrollMode){case l.ScrollMode.PAGE:return e(this,k).scrollDown;case l.ScrollMode.HORIZONTAL:return this.scroll.right}return this.scroll.down},Ne=new WeakSet,Yi=function(_=this.container.clientHeight){_!==e(this,E)&&(J(this,E,_),l.docStyle.setProperty("--viewer-container-height",`${_}px`))},Xe=new WeakSet,Ns=function(_){for(const z of _)if(z.target===this.container){O(this,Ne,Yi).call(this,Math.floor(z.borderBoxSize[0].blockSize)),J(this,B,null);break}},A.PDFViewer=f},(ae,A)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.NullL10n=void 0,A.getL10nFallback=a;const P={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} × {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} × {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing…",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image"};P.print_progress_percent="{{progress}}%";function a(y,S){switch(y){case"find_match_count":y=`find_match_count[${S.total===1?"one":"other"}]`;break;case"find_match_count_limit":y=`find_match_count_limit[${S.limit===1?"one":"other"}]`;break}return P[y]||""}function l(y,S){return S?y.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(t,r)=>r in S?S[r]:"{{"+r+"}}"):y}const T={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(y,S=null,t=a(y,S)){return l(t,S)},async translate(y){}};A.NullL10n=T},(ae,A,P)=>{var h,c,o,v,w,B,K,C,V,q,X,Xt,F,Zi,ie,Qi,R,Ji,n,en,L,Bs,j,Vs,te,tn;Object.defineProperty(A,"__esModule",{value:!0}),A.PDFPageView=void 0;var a=P(5),l=P(4),T=P(33),y=P(34),S=P(9),t=P(31);P(11);var r=P(35),d=P(36),p=P(37),b=P(38),f=P(39);const m=S.compatibilityParams.maxCanvasPixels||16777216,i=()=>null;class s{constructor(ne){M(this,X);M(this,F);M(this,ie);M(this,R);M(this,n);M(this,L);M(this,j);M(this,te);M(this,h,a.AnnotationMode.ENABLE_FORMS);M(this,c,!1);M(this,o,null);M(this,v,null);M(this,w,null);M(this,B,null);M(this,K,l.RenderingStates.INITIAL);M(this,C,l.TextLayerMode.ENABLE);M(this,V,{directDrawing:!0,initialOptionalContent:!0,regularAnnotations:!0});M(this,q,new WeakMap);var xe;const ce=ne.container,Ee=ne.defaultViewport;this.id=ne.id,this.renderingId="page"+this.id,J(this,o,ne.layerProperties||i),this.pdfPage=null,this.pageLabel=null,this.rotation=0,this.scale=ne.scale||l.DEFAULT_SCALE,this.viewport=Ee,this.pdfPageRotate=Ee.rotation,this._optionalContentConfigPromise=ne.optionalContentConfigPromise||null,J(this,C,ne.textLayerMode??l.TextLayerMode.ENABLE),J(this,h,ne.annotationMode??a.AnnotationMode.ENABLE_FORMS),this.imageResourcesPath=ne.imageResourcesPath||"",this.isOffscreenCanvasSupported=ne.isOffscreenCanvasSupported??!0,this.maxCanvasPixels=ne.maxCanvasPixels??m,this.pageColors=ne.pageColors||null,this.eventBus=ne.eventBus,this.renderingQueue=ne.renderingQueue,this.l10n=ne.l10n||t.NullL10n,this.renderTask=null,this.resume=null,this._isStandalone=!((xe=this.renderingQueue)!=null&&xe.hasViewer()),this._container=ce,ne.useOnlyCssZoom&&(console.error("useOnlyCssZoom was removed, please use `maxCanvasPixels = 0` instead."),this.maxCanvasPixels=0),this._annotationCanvasMap=null,this.annotationLayer=null,this.annotationEditorLayer=null,this.textLayer=null,this.zoomLayer=null,this.xfaLayer=null,this.structTreeLayer=null;const me=document.createElement("div");if(me.className="page",me.setAttribute("data-page-number",this.id),me.setAttribute("role","region"),this.l10n.get("page_landmark",{page:this.id}).then(De=>{me.setAttribute("aria-label",De)}),this.div=me,O(this,X,Xt).call(this),ce==null||ce.append(me),this._isStandalone){ce==null||ce.style.setProperty("--scale-factor",this.scale*a.PixelsPerInch.PDF_TO_CSS_UNITS);const{optionalContentConfigPromise:De}=ne;De&&De.then(Ae=>{De===this._optionalContentConfigPromise&&(e(this,V).initialOptionalContent=Ae.hasInitialVisibility)})}}get renderingState(){return e(this,K)}set renderingState(ne){if(ne!==e(this,K))switch(J(this,K,ne),e(this,v)&&(clearTimeout(e(this,v)),J(this,v,null)),ne){case l.RenderingStates.PAUSED:this.div.classList.remove("loading");break;case l.RenderingStates.RUNNING:this.div.classList.add("loadingIcon"),J(this,v,setTimeout(()=>{this.div.classList.add("loading"),J(this,v,null)},0));break;case l.RenderingStates.INITIAL:case l.RenderingStates.FINISHED:this.div.classList.remove("loadingIcon","loading");break}}setPdfPage(ne){var Ee,me,xe;this._isStandalone&&(((Ee=this.pageColors)==null?void 0:Ee.foreground)==="CanvasText"||((me=this.pageColors)==null?void 0:me.background)==="Canvas")&&((xe=this._container)==null||xe.style.setProperty("--hcm-highligh-filter",ne.filterFactory.addHighlightHCMFilter("CanvasText","Canvas","HighlightText","Highlight"))),this.pdfPage=ne,this.pdfPageRotate=ne.rotate;const ce=(this.rotation+this.pdfPageRotate)%360;this.viewport=ne.getViewport({scale:this.scale*a.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:ce}),O(this,X,Xt).call(this),this.reset()}destroy(){var ne;this.reset(),(ne=this.pdfPage)==null||ne.cleanup()}get _textHighlighter(){return(0,a.shadow)(this,"_textHighlighter",new p.TextHighlighter({pageIndex:this.id-1,eventBus:this.eventBus,findController:e(this,o).call(this).findController}))}_resetZoomLayer(ne=!1){if(!this.zoomLayer)return;const ce=this.zoomLayer.firstChild;e(this,q).delete(ce),ce.width=0,ce.height=0,ne&&this.zoomLayer.remove(),this.zoomLayer=null}reset({keepZoomLayer:ne=!1,keepAnnotationLayer:ce=!1,keepAnnotationEditorLayer:Ee=!1,keepXfaLayer:me=!1,keepTextLayer:xe=!1}={}){var Ie,Re,ze,je,Ne;this.cancelRendering({keepAnnotationLayer:ce,keepAnnotationEditorLayer:Ee,keepXfaLayer:me,keepTextLayer:xe}),this.renderingState=l.RenderingStates.INITIAL;const De=this.div,Ae=De.childNodes,Ve=ne&&this.zoomLayer||null,oe=ce&&((Ie=this.annotationLayer)==null?void 0:Ie.div)||null,Q=Ee&&((Re=this.annotationEditorLayer)==null?void 0:Re.div)||null,le=me&&((ze=this.xfaLayer)==null?void 0:ze.div)||null,ue=xe&&((je=this.textLayer)==null?void 0:je.div)||null;for(let Ue=Ae.length-1;Ue>=0;Ue--){const Xe=Ae[Ue];switch(Xe){case Ve:case oe:case Q:case le:case ue:continue}Xe.remove()}De.removeAttribute("data-loaded"),oe&&this.annotationLayer.hide(),Q&&this.annotationEditorLayer.hide(),le&&this.xfaLayer.hide(),ue&&this.textLayer.hide(),(Ne=this.structTreeLayer)==null||Ne.hide(),Ve||(this.canvas&&(e(this,q).delete(this.canvas),this.canvas.width=0,this.canvas.height=0,delete this.canvas),this._resetZoomLayer())}update({scale:ne=0,rotation:ce=null,optionalContentConfigPromise:Ee=null,drawingDelay:me=-1}){var De;this.scale=ne||this.scale,typeof ce=="number"&&(this.rotation=ce),Ee instanceof Promise&&(this._optionalContentConfigPromise=Ee,Ee.then(Ae=>{Ee===this._optionalContentConfigPromise&&(e(this,V).initialOptionalContent=Ae.hasInitialVisibility)})),e(this,V).directDrawing=!0;const xe=(this.rotation+this.pdfPageRotate)%360;if(this.viewport=this.viewport.clone({scale:this.scale*a.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:xe}),O(this,X,Xt).call(this),this._isStandalone&&((De=this._container)==null||De.style.setProperty("--scale-factor",this.viewport.scale)),this.canvas){let Ae=!1;if(e(this,c)){if(this.maxCanvasPixels===0)Ae=!0;else if(this.maxCanvasPixels>0){const{width:oe,height:Q}=this.viewport,{sx:le,sy:ue}=this.outputScale;Ae=(Math.floor(oe)*le|0)*(Math.floor(Q)*ue|0)>this.maxCanvasPixels}}const Ve=!Ae&&me>=0&&me<1e3;if(Ve||Ae){if(Ve&&this.renderingState!==l.RenderingStates.FINISHED&&(this.cancelRendering({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0,cancelExtraDelay:me}),this.renderingState=l.RenderingStates.FINISHED,e(this,V).directDrawing=!1),this.cssTransform({target:this.canvas,redrawAnnotationLayer:!0,redrawAnnotationEditorLayer:!0,redrawXfaLayer:!0,redrawTextLayer:!Ve,hideTextLayer:Ve}),Ve)return;this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:e(this,B)});return}!this.zoomLayer&&!this.canvas.hidden&&(this.zoomLayer=this.canvas.parentNode,this.zoomLayer.style.position="absolute")}this.zoomLayer&&this.cssTransform({target:this.zoomLayer.firstChild}),this.reset({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0})}cancelRendering({keepAnnotationLayer:ne=!1,keepAnnotationEditorLayer:ce=!1,keepXfaLayer:Ee=!1,keepTextLayer:me=!1,cancelExtraDelay:xe=0}={}){var De;this.renderTask&&(this.renderTask.cancel(xe),this.renderTask=null),this.resume=null,this.textLayer&&(!me||!this.textLayer.div)&&(this.textLayer.cancel(),this.textLayer=null),this.structTreeLayer&&!this.textLayer&&(this.structTreeLayer=null),this.annotationLayer&&(!ne||!this.annotationLayer.div)&&(this.annotationLayer.cancel(),this.annotationLayer=null,this._annotationCanvasMap=null),this.annotationEditorLayer&&(!ce||!this.annotationEditorLayer.div)&&(this.annotationEditorLayer.cancel(),this.annotationEditorLayer=null),this.xfaLayer&&(!Ee||!this.xfaLayer.div)&&(this.xfaLayer.cancel(),this.xfaLayer=null,(De=this._textHighlighter)==null||De.disable())}cssTransform({target:ne,redrawAnnotationLayer:ce=!1,redrawAnnotationEditorLayer:Ee=!1,redrawXfaLayer:me=!1,redrawTextLayer:xe=!1,hideTextLayer:De=!1}){var Ve;if(!ne.hasAttribute("zooming")){ne.setAttribute("zooming",!0);const{style:oe}=ne;oe.width=oe.height=""}const Ae=e(this,q).get(ne);if(this.viewport!==Ae){const oe=this.viewport.rotation-Ae.rotation,Q=Math.abs(oe);let le=1,ue=1;if(Q===90||Q===270){const{width:Ie,height:Re}=this.viewport;le=Re/Ie,ue=Ie/Re}ne.style.transform=`rotate(${oe}deg) scale(${le}, ${ue})`}ce&&this.annotationLayer&&O(this,F,Zi).call(this),Ee&&this.annotationEditorLayer&&O(this,ie,Qi).call(this),me&&this.xfaLayer&&O(this,R,Ji).call(this),this.textLayer&&(De?(this.textLayer.hide(),(Ve=this.structTreeLayer)==null||Ve.hide()):xe&&O(this,n,en).call(this))}get width(){return this.viewport.width}get height(){return this.viewport.height}getPagePoint(ne,ce){return this.viewport.convertToPdfPoint(ne,ce)}async draw(){this.renderingState!==l.RenderingStates.INITIAL&&(console.error("Must be in new state before drawing"),this.reset());const{div:ne,l10n:ce,pageColors:Ee,pdfPage:me,viewport:xe}=this;if(!me)throw this.renderingState=l.RenderingStates.FINISHED,new Error("pdfPage is not loaded");this.renderingState=l.RenderingStates.RUNNING;const De=document.createElement("div");if(De.classList.add("canvasWrapper"),ne.append(De),!this.textLayer&&e(this,C)!==l.TextLayerMode.DISABLE&&!me.isPureXfa&&(this._accessibilityManager||(this._accessibilityManager=new d.TextAccessibilityManager),this.textLayer=new b.TextLayerBuilder({highlighter:this._textHighlighter,accessibilityManager:this._accessibilityManager,isOffscreenCanvasSupported:this.isOffscreenCanvasSupported,enablePermissions:e(this,C)===l.TextLayerMode.ENABLE_PERMISSIONS}),ne.append(this.textLayer.div)),!this.annotationLayer&&e(this,h)!==a.AnnotationMode.DISABLE){const{annotationStorage:_,downloadManager:z,enableScripting:fe,fieldObjectsPromise:ee,hasJSActionsPromise:he,linkService:re}=e(this,o).call(this);this._annotationCanvasMap||(this._annotationCanvasMap=new Map),this.annotationLayer=new y.AnnotationLayerBuilder({pageDiv:ne,pdfPage:me,annotationStorage:_,imageResourcesPath:this.imageResourcesPath,renderForms:e(this,h)===a.AnnotationMode.ENABLE_FORMS,linkService:re,downloadManager:z,l10n:ce,enableScripting:fe,hasJSActionsPromise:he,fieldObjectsPromise:ee,annotationCanvasMap:this._annotationCanvasMap,accessibilityManager:this._accessibilityManager})}const Ae=_=>{if(ue==null||ue(!1),this.renderingQueue&&!this.renderingQueue.isHighestPriority(this)){this.renderingState=l.RenderingStates.PAUSED,this.resume=()=>{this.renderingState=l.RenderingStates.RUNNING,_()};return}_()},{width:Ve,height:oe}=xe,Q=document.createElement("canvas");Q.setAttribute("role","presentation"),Q.hidden=!0;const le=!!(Ee!=null&&Ee.background&&(Ee!=null&&Ee.foreground));let ue=_=>{(!le||_)&&(Q.hidden=!1,ue=null)};De.append(Q),this.canvas=Q;const Ie=Q.getContext("2d",{alpha:!1}),Re=this.outputScale=new l.OutputScale;if(this.maxCanvasPixels===0){const _=1/this.scale;Re.sx*=_,Re.sy*=_,J(this,c,!0)}else if(this.maxCanvasPixels>0){const _=Ve*oe,z=Math.sqrt(this.maxCanvasPixels/_);Re.sx>z||Re.sy>z?(Re.sx=z,Re.sy=z,J(this,c,!0)):J(this,c,!1)}const ze=(0,l.approximateFraction)(Re.sx),je=(0,l.approximateFraction)(Re.sy);Q.width=(0,l.roundToDivide)(Ve*Re.sx,ze[0]),Q.height=(0,l.roundToDivide)(oe*Re.sy,je[0]);const{style:Ne}=Q;Ne.width=(0,l.roundToDivide)(Ve,ze[1])+"px",Ne.height=(0,l.roundToDivide)(oe,je[1])+"px",e(this,q).set(Q,xe);const Ue=Re.scaled?[Re.sx,0,0,Re.sy,0,0]:null,Xe={canvasContext:Ie,transform:Ue,viewport:xe,annotationMode:e(this,h),optionalContentConfigPromise:this._optionalContentConfigPromise,annotationCanvasMap:this._annotationCanvasMap,pageColors:Ee},We=this.renderTask=this.pdfPage.render(Xe);We.onContinue=Ae;const Le=We.promise.then(async()=>{var _;if(ue==null||ue(!0),await O(this,te,tn).call(this,We),O(this,n,en).call(this),this.annotationLayer&&await O(this,F,Zi).call(this),!this.annotationEditorLayer){const{annotationEditorUIManager:z}=e(this,o).call(this);if(!z)return;this.annotationEditorLayer=new T.AnnotationEditorLayerBuilder({uiManager:z,pageDiv:ne,pdfPage:me,l10n:ce,accessibilityManager:this._accessibilityManager,annotationLayer:(_=this.annotationLayer)==null?void 0:_.annotationLayer})}O(this,ie,Qi).call(this)},_=>(_ instanceof a.RenderingCancelledException||ue==null||ue(!0),O(this,te,tn).call(this,We,_)));if(me.isPureXfa){if(this.xfaLayer)this.xfaLayer.div&&ne.append(this.xfaLayer.div);else{const{annotationStorage:_,linkService:z}=e(this,o).call(this);this.xfaLayer=new f.XfaLayerBuilder({pageDiv:ne,pdfPage:me,annotationStorage:_,linkService:z})}O(this,R,Ji).call(this)}return ne.setAttribute("data-loaded",!0),this.eventBus.dispatch("pagerender",{source:this,pageNumber:this.id}),Le}setPageLabel(ne){this.pageLabel=typeof ne=="string"?ne:null,this.pageLabel!==null?this.div.setAttribute("data-page-label",this.pageLabel):this.div.removeAttribute("data-page-label")}get thumbnailCanvas(){const{directDrawing:ne,initialOptionalContent:ce,regularAnnotations:Ee}=e(this,V);return ne&&ce&&Ee?this.canvas:null}}h=new WeakMap,c=new WeakMap,o=new WeakMap,v=new WeakMap,w=new WeakMap,B=new WeakMap,K=new WeakMap,C=new WeakMap,V=new WeakMap,q=new WeakMap,X=new WeakSet,Xt=function(){const{viewport:ne}=this;if(this.pdfPage){if(e(this,w)===ne.rotation)return;J(this,w,ne.rotation)}(0,a.setLayerDimensions)(this.div,ne,!0,!1)},F=new WeakSet,Zi=async function(){let ne=null;try{await this.annotationLayer.render(this.viewport,"display")}catch(ce){console.error(`#renderAnnotationLayer: "${ce}".`),ne=ce}finally{this.eventBus.dispatch("annotationlayerrendered",{source:this,pageNumber:this.id,error:ne})}},ie=new WeakSet,Qi=async function(){let ne=null;try{await this.annotationEditorLayer.render(this.viewport,"display")}catch(ce){console.error(`#renderAnnotationEditorLayer: "${ce}".`),ne=ce}finally{this.eventBus.dispatch("annotationeditorlayerrendered",{source:this,pageNumber:this.id,error:ne})}},R=new WeakSet,Ji=async function(){let ne=null;try{const ce=await this.xfaLayer.render(this.viewport,"display");ce!=null&&ce.textDivs&&this._textHighlighter&&O(this,j,Vs).call(this,ce.textDivs)}catch(ce){console.error(`#renderXfaLayer: "${ce}".`),ne=ce}finally{this.eventBus.dispatch("xfalayerrendered",{source:this,pageNumber:this.id,error:ne})}},n=new WeakSet,en=async function(){const{pdfPage:ne,textLayer:ce,viewport:Ee}=this;if(!ce)return;let me=null;try{if(!ce.renderingDone){const xe=ne.streamTextContent({includeMarkedContent:!0,disableNormalization:!0});ce.setTextContentSource(xe)}await ce.render(Ee)}catch(xe){if(xe instanceof a.AbortException)return;console.error(`#renderTextLayer: "${xe}".`),me=xe}this.eventBus.dispatch("textlayerrendered",{source:this,pageNumber:this.id,numTextDivs:ce.numTextDivs,error:me}),O(this,L,Bs).call(this)},L=new WeakSet,Bs=async function(){var Ee,me,xe;if(!this.textLayer)return;this.structTreeLayer||(this.structTreeLayer=new r.StructTreeLayerBuilder);const ne=await(this.structTreeLayer.renderingDone?null:this.pdfPage.getStructTree()),ce=(Ee=this.structTreeLayer)==null?void 0:Ee.render(ne);ce&&((me=this.canvas)==null||me.append(ce)),(xe=this.structTreeLayer)==null||xe.show()},j=new WeakSet,Vs=async function(ne){const ce=await this.pdfPage.getTextContent(),Ee=[];for(const me of ce.items)Ee.push(me.str);this._textHighlighter.setTextMapping(ne,Ee),this._textHighlighter.enable()},te=new WeakSet,tn=async function(ne,ce=null){if(ne===this.renderTask&&(this.renderTask=null),ce instanceof a.RenderingCancelledException){J(this,B,null);return}if(J(this,B,ce),this.renderingState=l.RenderingStates.FINISHED,this._resetZoomLayer(!0),e(this,V).regularAnnotations=!ne.separateAnnots,this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!1,timestamp:performance.now(),error:e(this,B)}),ce)throw ce},A.PDFPageView=s},(ae,A,P)=>{var y,S;Object.defineProperty(A,"__esModule",{value:!0}),A.AnnotationEditorLayerBuilder=void 0;var a=P(5),l=P(31);class T{constructor(r){M(this,y,null);M(this,S,void 0);this.pageDiv=r.pageDiv,this.pdfPage=r.pdfPage,this.accessibilityManager=r.accessibilityManager,this.l10n=r.l10n||l.NullL10n,this.annotationEditorLayer=null,this.div=null,this._cancelled=!1,J(this,S,r.uiManager),J(this,y,r.annotationLayer||null)}async render(r,d="display"){if(d!=="display"||this._cancelled)return;const p=r.clone({dontFlip:!0});if(this.div){this.annotationEditorLayer.update({viewport:p}),this.show();return}const b=this.div=document.createElement("div");b.className="annotationEditorLayer",b.tabIndex=0,b.hidden=!0,this.pageDiv.append(b),this.annotationEditorLayer=new a.AnnotationEditorLayer({uiManager:e(this,S),div:b,accessibilityManager:this.accessibilityManager,pageIndex:this.pdfPage.pageNumber-1,l10n:this.l10n,viewport:p,annotationLayer:e(this,y)});const f={viewport:p,div:b,annotations:null,intent:d};this.annotationEditorLayer.render(f),this.show()}cancel(){this._cancelled=!0,this.div&&(this.pageDiv=null,this.annotationEditorLayer.destroy(),this.div.remove())}hide(){this.div&&(this.div.hidden=!0)}show(){!this.div||this.annotationEditorLayer.isEmpty||(this.div.hidden=!1)}}y=new WeakMap,S=new WeakMap,A.AnnotationEditorLayerBuilder=T},(ae,A,P)=>{var S,t,nn;Object.defineProperty(A,"__esModule",{value:!0}),A.AnnotationLayerBuilder=void 0;var a=P(5),l=P(31),T=P(4);class y{constructor({pageDiv:p,pdfPage:b,linkService:f,downloadManager:m,annotationStorage:i=null,imageResourcesPath:s="",renderForms:h=!0,l10n:c=l.NullL10n,enableScripting:o=!1,hasJSActionsPromise:v=null,fieldObjectsPromise:w=null,annotationCanvasMap:B=null,accessibilityManager:K=null}){M(this,t);M(this,S,null);this.pageDiv=p,this.pdfPage=b,this.linkService=f,this.downloadManager=m,this.imageResourcesPath=s,this.renderForms=h,this.l10n=c,this.annotationStorage=i,this.enableScripting=o,this._hasJSActionsPromise=v||Promise.resolve(!1),this._fieldObjectsPromise=w||Promise.resolve(null),this._annotationCanvasMap=B,this._accessibilityManager=K,this.annotationLayer=null,this.div=null,this._cancelled=!1,this._eventBus=f.eventBus}async render(p,b="display"){var h;if(this.div){if(this._cancelled||!this.annotationLayer)return;this.annotationLayer.update({viewport:p.clone({dontFlip:!0})});return}const[f,m,i]=await Promise.all([this.pdfPage.getAnnotations({intent:b}),this._hasJSActionsPromise,this._fieldObjectsPromise]);if(this._cancelled)return;const s=this.div=document.createElement("div");if(s.className="annotationLayer",this.pageDiv.append(s),f.length===0){this.hide();return}this.annotationLayer=new a.AnnotationLayer({div:s,accessibilityManager:this._accessibilityManager,annotationCanvasMap:this._annotationCanvasMap,l10n:this.l10n,page:this.pdfPage,viewport:p.clone({dontFlip:!0})}),await this.annotationLayer.render({annotations:f,imageResourcesPath:this.imageResourcesPath,renderForms:this.renderForms,linkService:this.linkService,downloadManager:this.downloadManager,annotationStorage:this.annotationStorage,enableScripting:this.enableScripting,hasJSActions:m,fieldObjects:i}),this.linkService.isInPresentationMode&&O(this,t,nn).call(this,T.PresentationModeState.FULLSCREEN),e(this,S)||(J(this,S,c=>{O(this,t,nn).call(this,c.state)}),(h=this._eventBus)==null||h._on("presentationmodechanged",e(this,S)))}cancel(){var p;this._cancelled=!0,e(this,S)&&((p=this._eventBus)==null||p._off("presentationmodechanged",e(this,S)),J(this,S,null))}hide(){this.div&&(this.div.hidden=!0)}}S=new WeakMap,t=new WeakSet,nn=function(p){if(!this.div)return;let b=!1;switch(p){case T.PresentationModeState.FULLSCREEN:b=!0;break;case T.PresentationModeState.NORMAL:break;default:return}for(const f of this.div.childNodes)f.hasAttribute("data-internal-link")||(f.inert=b)},A.AnnotationLayerBuilder=y},(ae,A)=>{var T,y,sn,t,an;Object.defineProperty(A,"__esModule",{value:!0}),A.StructTreeLayerBuilder=void 0;const P={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},a=/^H(\d+)$/;class l{constructor(){M(this,y);M(this,t);M(this,T,void 0)}get renderingDone(){return e(this,T)!==void 0}render(p){if(e(this,T)!==void 0)return e(this,T);const b=O(this,t,an).call(this,p);return b==null||b.classList.add("structTree"),J(this,T,b)}hide(){e(this,T)&&!e(this,T).hidden&&(e(this,T).hidden=!0)}show(){var p;(p=e(this,T))!=null&&p.hidden&&(e(this,T).hidden=!1)}}T=new WeakMap,y=new WeakSet,sn=function(p,b){p.alt!==void 0&&b.setAttribute("aria-label",p.alt),p.id!==void 0&&b.setAttribute("aria-owns",p.id),p.lang!==void 0&&b.setAttribute("lang",p.lang)},t=new WeakSet,an=function(p){if(!p)return null;const b=document.createElement("span");if("role"in p){const{role:f}=p,m=f.match(a);m?(b.setAttribute("role","heading"),b.setAttribute("aria-level",m[1])):P[f]&&b.setAttribute("role",P[f])}if(O(this,y,sn).call(this,p,b),p.children)if(p.children.length===1&&"id"in p.children[0])O(this,y,sn).call(this,p.children[0],b);else for(const f of p.children)b.append(O(this,t,an).call(this,f));return b},A.StructTreeLayerBuilder=l},(ae,A,P)=>{var T,y,S,t,r,qt,p,rn;Object.defineProperty(A,"__esModule",{value:!0}),A.TextAccessibilityManager=void 0;var a=P(4);const f=class{constructor(){M(this,p);M(this,T,!1);M(this,y,null);M(this,S,new Map);M(this,t,new Map)}setTextMapping(i){J(this,y,i)}enable(){if(e(this,T))throw new Error("TextAccessibilityManager is already enabled.");if(!e(this,y))throw new Error("Text divs and strings have not been set.");if(J(this,T,!0),J(this,y,e(this,y).slice()),e(this,y).sort(O(f,r,qt)),e(this,S).size>0){const i=e(this,y);for(const[s,h]of e(this,S)){if(!document.getElementById(s)){e(this,S).delete(s);continue}O(this,p,rn).call(this,s,i[h])}}for(const[i,s]of e(this,t))this.addPointerInTextLayer(i,s);e(this,t).clear()}disable(){e(this,T)&&(e(this,t).clear(),J(this,y,null),J(this,T,!1))}removePointerInTextLayer(i){if(!e(this,T)){e(this,t).delete(i);return}const s=e(this,y);if(!s||s.length===0)return;const{id:h}=i,c=e(this,S).get(h);if(c===void 0)return;const o=s[c];e(this,S).delete(h);let v=o.getAttribute("aria-owns");v!=null&&v.includes(h)&&(v=v.split(" ").filter(w=>w!==h).join(" "),v?o.setAttribute("aria-owns",v):(o.removeAttribute("aria-owns"),o.setAttribute("role","presentation")))}addPointerInTextLayer(i,s){const{id:h}=i;if(!h)return;if(!e(this,T)){e(this,t).set(i,s);return}s&&this.removePointerInTextLayer(i);const c=e(this,y);if(!c||c.length===0)return;const o=(0,a.binarySearchFirstItem)(c,w=>{var B;return O(B=f,r,qt).call(B,i,w)<0}),v=Math.max(0,o-1);O(this,p,rn).call(this,h,c[v]),e(this,S).set(h,v)}moveElementInDOM(i,s,h,c){if(this.addPointerInTextLayer(h,c),!i.hasChildNodes()){i.append(s);return}const o=Array.from(i.childNodes).filter(B=>B!==s);if(o.length===0)return;const v=h||s,w=(0,a.binarySearchFirstItem)(o,B=>{var K;return O(K=f,r,qt).call(K,v,B)<0});w===0?o[0].before(s):o[w-1].after(s)}};let l=f;T=new WeakMap,y=new WeakMap,S=new WeakMap,t=new WeakMap,r=new WeakSet,qt=function(i,s){const h=i.getBoundingClientRect(),c=s.getBoundingClientRect();if(h.width===0&&h.height===0)return 1;if(c.width===0&&c.height===0)return-1;const o=h.y,v=h.y+h.height,w=h.y+h.height/2,B=c.y,K=c.y+c.height,C=c.y+c.height/2;if(w<=B&&C>=v)return-1;if(C<=o&&w>=K)return 1;const V=h.x+h.width/2,q=c.x+c.width/2;return V-q},p=new WeakSet,rn=function(i,s){const h=s.getAttribute("aria-owns");h!=null&&h.includes(i)||s.setAttribute("aria-owns",h?`${h} ${i}`:i),s.removeAttribute("role")},M(l,r),A.TextAccessibilityManager=l},(ae,A)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.TextHighlighter=void 0;class P{constructor({findController:l,eventBus:T,pageIndex:y}){this.findController=l,this.matches=[],this.eventBus=T,this.pageIdx=y,this._onUpdateTextLayerMatches=null,this.textDivs=null,this.textContentItemsStr=null,this.enabled=!1}setTextMapping(l,T){this.textDivs=l,this.textContentItemsStr=T}enable(){if(!this.textDivs||!this.textContentItemsStr)throw new Error("Text divs and strings have not been set.");if(this.enabled)throw new Error("TextHighlighter is already enabled.");this.enabled=!0,this._onUpdateTextLayerMatches||(this._onUpdateTextLayerMatches=l=>{(l.pageIndex===this.pageIdx||l.pageIndex===-1)&&this._updateMatches()},this.eventBus._on("updatetextlayermatches",this._onUpdateTextLayerMatches)),this._updateMatches()}disable(){this.enabled&&(this.enabled=!1,this._onUpdateTextLayerMatches&&(this.eventBus._off("updatetextlayermatches",this._onUpdateTextLayerMatches),this._onUpdateTextLayerMatches=null),this._updateMatches(!0))}_convertMatches(l,T){if(!l)return[];const{textContentItemsStr:y}=this;let S=0,t=0;const r=y.length-1,d=[];for(let p=0,b=l.length;p<b;p++){let f=l[p];for(;S!==r&&f>=t+y[S].length;)t+=y[S].length,S++;S===y.length&&console.error("Could not find a matching mapping");const m={begin:{divIdx:S,offset:f-t}};for(f+=T[p];S!==r&&f>t+y[S].length;)t+=y[S].length,S++;m.end={divIdx:S,offset:f-t},d.push(m)}return d}_renderMatches(l){if(l.length===0)return;const{findController:T,pageIdx:y}=this,{textContentItemsStr:S,textDivs:t}=this,r=y===T.selected.pageIdx,d=T.selected.matchIdx,p=T.state.highlightAll;let b=null;const f={divIdx:-1,offset:void 0};function m(v,w){const B=v.divIdx;return t[B].textContent="",i(B,0,v.offset,w)}function i(v,w,B,K){let C=t[v];if(C.nodeType===Node.TEXT_NODE){const X=document.createElement("span");C.before(X),X.append(C),t[v]=X,C=X}const V=S[v].substring(w,B),q=document.createTextNode(V);if(K){const X=document.createElement("span");return X.className=`${K} appended`,X.append(q),C.append(X),K.includes("selected")?X.offsetLeft:0}return C.append(q),0}let s=d,h=s+1;if(p)s=0,h=l.length;else if(!r)return;let c=-1,o=-1;for(let v=s;v<h;v++){const w=l[v],B=w.begin;if(B.divIdx===c&&B.offset===o)continue;c=B.divIdx,o=B.offset;const K=w.end,C=r&&v===d,V=C?" selected":"";let q=0;if(!b||B.divIdx!==b.divIdx?(b!==null&&i(b.divIdx,b.offset,f.offset),m(B)):i(b.divIdx,b.offset,B.offset),B.divIdx===K.divIdx)q=i(B.divIdx,B.offset,K.offset,"highlight"+V);else{q=i(B.divIdx,B.offset,f.offset,"highlight begin"+V);for(let X=B.divIdx+1,E=K.divIdx;X<E;X++)t[X].className="highlight middle"+V;m(K,"highlight end"+V)}b=K,C&&T.scrollMatchIntoView({element:t[B.divIdx],selectedLeft:q,pageIndex:y,matchIndex:d})}b&&i(b.divIdx,b.offset,f.offset)}_updateMatches(l=!1){if(!this.enabled&&!l)return;const{findController:T,matches:y,pageIdx:S}=this,{textContentItemsStr:t,textDivs:r}=this;let d=-1;for(const f of y){const m=Math.max(d,f.begin.divIdx);for(let i=m,s=f.end.divIdx;i<=s;i++){const h=r[i];h.textContent=t[i],h.className=""}d=f.end.divIdx+1}if(!(T!=null&&T.highlightMatches)||l)return;const p=T.pageMatches[S]||null,b=T.pageMatchesLength[S]||null;this.matches=this._convertMatches(p,b),this._renderMatches(this.matches)}}A.TextHighlighter=P},(ae,A,P)=>{var y,S,t,r,d,Us,b,Hs;Object.defineProperty(A,"__esModule",{value:!0}),A.TextLayerBuilder=void 0;var a=P(5),l=P(4);class T{constructor({highlighter:i=null,accessibilityManager:s=null,isOffscreenCanvasSupported:h=!0,enablePermissions:c=!1}){M(this,d);M(this,b);M(this,y,!1);M(this,S,0);M(this,t,0);M(this,r,null);this.textContentItemsStr=[],this.renderingDone=!1,this.textDivs=[],this.textDivProperties=new WeakMap,this.textLayerRenderTask=null,this.highlighter=i,this.accessibilityManager=s,this.isOffscreenCanvasSupported=h,J(this,y,c===!0),this.div=document.createElement("div"),this.div.className="textLayer",this.hide()}get numTextDivs(){return this.textDivs.length}async render(i){var c,o,v;if(!e(this,r))throw new Error('No "textContentSource" parameter specified.');const s=i.scale*(globalThis.devicePixelRatio||1),{rotation:h}=i;if(this.renderingDone){const w=h!==e(this,S),B=s!==e(this,t);(w||B)&&(this.hide(),(0,a.updateTextLayer)({container:this.div,viewport:i,textDivs:this.textDivs,textDivProperties:this.textDivProperties,isOffscreenCanvasSupported:this.isOffscreenCanvasSupported,mustRescale:B,mustRotate:w}),J(this,t,s),J(this,S,h)),this.show();return}this.cancel(),(c=this.highlighter)==null||c.setTextMapping(this.textDivs,this.textContentItemsStr),(o=this.accessibilityManager)==null||o.setTextMapping(this.textDivs),this.textLayerRenderTask=(0,a.renderTextLayer)({textContentSource:e(this,r),container:this.div,viewport:i,textDivs:this.textDivs,textDivProperties:this.textDivProperties,textContentItemsStr:this.textContentItemsStr,isOffscreenCanvasSupported:this.isOffscreenCanvasSupported}),await this.textLayerRenderTask.promise,O(this,d,Us).call(this),J(this,t,s),J(this,S,h),this.show(),(v=this.accessibilityManager)==null||v.enable()}hide(){var i;this.div.hidden||((i=this.highlighter)==null||i.disable(),this.div.hidden=!0)}show(){var i;this.div.hidden&&this.renderingDone&&(this.div.hidden=!1,(i=this.highlighter)==null||i.enable())}cancel(){var i,s;this.textLayerRenderTask&&(this.textLayerRenderTask.cancel(),this.textLayerRenderTask=null),(i=this.highlighter)==null||i.disable(),(s=this.accessibilityManager)==null||s.disable(),this.textContentItemsStr.length=0,this.textDivs.length=0,this.textDivProperties=new WeakMap}setTextContentSource(i){this.cancel(),J(this,r,i)}}y=new WeakMap,S=new WeakMap,t=new WeakMap,r=new WeakMap,d=new WeakSet,Us=function(){this.renderingDone=!0;const i=document.createElement("div");i.className="endOfContent",this.div.append(i),O(this,b,Hs).call(this)},b=new WeakSet,Hs=function(){const{div:i}=this;i.addEventListener("mousedown",s=>{const h=i.querySelector(".endOfContent");if(!h)return;let c=s.target!==i;if(c&&(c=getComputedStyle(h).getPropertyValue("-moz-user-select")!=="none"),c){const o=i.getBoundingClientRect(),v=Math.max(0,(s.pageY-o.top)/o.height);h.style.top=(v*100).toFixed(2)+"%"}h.classList.add("active")}),i.addEventListener("mouseup",()=>{const s=i.querySelector(".endOfContent");s&&(s.style.top="",s.classList.remove("active"))}),i.addEventListener("copy",s=>{if(!e(this,y)){const h=document.getSelection();s.clipboardData.setData("text/plain",(0,l.removeNullCharacters)((0,a.normalizeUnicode)(h.toString())))}s.preventDefault(),s.stopPropagation()})},A.TextLayerBuilder=T},(ae,A,P)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.XfaLayerBuilder=void 0;var a=P(5);class l{constructor({pageDiv:y,pdfPage:S,annotationStorage:t=null,linkService:r,xfaHtml:d=null}){this.pageDiv=y,this.pdfPage=S,this.annotationStorage=t,this.linkService=r,this.xfaHtml=d,this.div=null,this._cancelled=!1}async render(y,S="display"){if(S==="print"){const d={viewport:y.clone({dontFlip:!0}),div:this.div,xfaHtml:this.xfaHtml,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:S},p=document.createElement("div");return this.pageDiv.append(p),d.div=p,a.XfaLayer.render(d)}const t=await this.pdfPage.getXfa();if(this._cancelled||!t)return{textDivs:[]};const r={viewport:y.clone({dontFlip:!0}),div:this.div,xfaHtml:t,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:S};return this.div?a.XfaLayer.update(r):(this.div=document.createElement("div"),this.pageDiv.append(this.div),r.div=this.div,a.XfaLayer.render(r))}cancel(){this._cancelled=!0}hide(){this.div&&(this.div.hidden=!0)}}A.XfaLayerBuilder=l},(ae,A,P)=>{var y,Kt,t,zs,d,js,b,Ws,m,$s;Object.defineProperty(A,"__esModule",{value:!0}),A.SecondaryToolbar=void 0;var a=P(4),l=P(30);class T{constructor(h,c,o){M(this,y);M(this,t);M(this,d);M(this,b);M(this,m);this.toolbar=h.toolbar,this.toggleButton=h.toggleButton,this.buttons=[{element:h.presentationModeButton,eventName:"presentationmode",close:!0},{element:h.printButton,eventName:"print",close:!0},{element:h.downloadButton,eventName:"download",close:!0},{element:h.viewBookmarkButton,eventName:null,close:!0},{element:h.firstPageButton,eventName:"firstpage",close:!0},{element:h.lastPageButton,eventName:"lastpage",close:!0},{element:h.pageRotateCwButton,eventName:"rotatecw",close:!1},{element:h.pageRotateCcwButton,eventName:"rotateccw",close:!1},{element:h.cursorSelectToolButton,eventName:"switchcursortool",eventDetails:{tool:a.CursorTool.SELECT},close:!0},{element:h.cursorHandToolButton,eventName:"switchcursortool",eventDetails:{tool:a.CursorTool.HAND},close:!0},{element:h.scrollPageButton,eventName:"switchscrollmode",eventDetails:{mode:a.ScrollMode.PAGE},close:!0},{element:h.scrollVerticalButton,eventName:"switchscrollmode",eventDetails:{mode:a.ScrollMode.VERTICAL},close:!0},{element:h.scrollHorizontalButton,eventName:"switchscrollmode",eventDetails:{mode:a.ScrollMode.HORIZONTAL},close:!0},{element:h.scrollWrappedButton,eventName:"switchscrollmode",eventDetails:{mode:a.ScrollMode.WRAPPED},close:!0},{element:h.spreadNoneButton,eventName:"switchspreadmode",eventDetails:{mode:a.SpreadMode.NONE},close:!0},{element:h.spreadOddButton,eventName:"switchspreadmode",eventDetails:{mode:a.SpreadMode.ODD},close:!0},{element:h.spreadEvenButton,eventName:"switchspreadmode",eventDetails:{mode:a.SpreadMode.EVEN},close:!0},{element:h.documentPropertiesButton,eventName:"documentproperties",close:!0}],this.buttons.push({element:h.openFileButton,eventName:"openfile",close:!0}),this.items={firstPage:h.firstPageButton,lastPage:h.lastPageButton,pageRotateCw:h.pageRotateCwButton,pageRotateCcw:h.pageRotateCcwButton},this.eventBus=c,this.externalServices=o,this.opened=!1,O(this,t,zs).call(this),O(this,d,js).call(this,h),O(this,b,Ws).call(this,h),O(this,m,$s).call(this,h),this.reset()}get isOpen(){return this.opened}setPageNumber(h){this.pageNumber=h,O(this,y,Kt).call(this)}setPagesCount(h){this.pagesCount=h,O(this,y,Kt).call(this)}reset(){this.pageNumber=0,this.pagesCount=0,O(this,y,Kt).call(this),this.eventBus.dispatch("secondarytoolbarreset",{source:this})}open(){this.opened||(this.opened=!0,(0,a.toggleExpandedBtn)(this.toggleButton,!0,this.toolbar))}close(){this.opened&&(this.opened=!1,(0,a.toggleExpandedBtn)(this.toggleButton,!1,this.toolbar))}toggle(){this.opened?this.close():this.open()}}y=new WeakSet,Kt=function(){this.items.firstPage.disabled=this.pageNumber<=1,this.items.lastPage.disabled=this.pageNumber>=this.pagesCount,this.items.pageRotateCw.disabled=this.pagesCount===0,this.items.pageRotateCcw.disabled=this.pagesCount===0},t=new WeakSet,zs=function(){this.toggleButton.addEventListener("click",this.toggle.bind(this));for(const{element:h,eventName:c,close:o,eventDetails:v}of this.buttons)h.addEventListener("click",w=>{c!==null&&this.eventBus.dispatch(c,{source:this,...v}),o&&this.close(),this.externalServices.reportTelemetry({type:"buttons",data:{id:h.id}})})},d=new WeakSet,js=function({cursorSelectToolButton:h,cursorHandToolButton:c}){this.eventBus._on("cursortoolchanged",({tool:o})=>{(0,a.toggleCheckedBtn)(h,o===a.CursorTool.SELECT),(0,a.toggleCheckedBtn)(c,o===a.CursorTool.HAND)})},b=new WeakSet,Ws=function({scrollPageButton:h,scrollVerticalButton:c,scrollHorizontalButton:o,scrollWrappedButton:v,spreadNoneButton:w,spreadOddButton:B,spreadEvenButton:K}){const C=({mode:V})=>{(0,a.toggleCheckedBtn)(h,V===a.ScrollMode.PAGE),(0,a.toggleCheckedBtn)(c,V===a.ScrollMode.VERTICAL),(0,a.toggleCheckedBtn)(o,V===a.ScrollMode.HORIZONTAL),(0,a.toggleCheckedBtn)(v,V===a.ScrollMode.WRAPPED);const q=this.pagesCount>l.PagesCountLimit.FORCE_SCROLL_MODE_PAGE;h.disabled=q,c.disabled=q,o.disabled=q,v.disabled=q;const X=V===a.ScrollMode.HORIZONTAL;w.disabled=X,B.disabled=X,K.disabled=X};this.eventBus._on("scrollmodechanged",C),this.eventBus._on("secondarytoolbarreset",V=>{V.source===this&&C({mode:a.ScrollMode.VERTICAL})})},m=new WeakSet,$s=function({spreadNoneButton:h,spreadOddButton:c,spreadEvenButton:o}){const v=({mode:w})=>{(0,a.toggleCheckedBtn)(h,w===a.SpreadMode.NONE),(0,a.toggleCheckedBtn)(c,w===a.SpreadMode.ODD),(0,a.toggleCheckedBtn)(o,w===a.SpreadMode.EVEN)};this.eventBus._on("spreadmodechanged",v),this.eventBus._on("secondarytoolbarreset",w=>{w.source===this&&v({mode:a.SpreadMode.NONE})})},A.SecondaryToolbar=T},(ae,A,P)=>{var S,t,Gs,d,Xs,b,pt,m,qs;Object.defineProperty(A,"__esModule",{value:!0}),A.Toolbar=void 0;var a=P(4),l=P(5);const T="visiblePageIsLoading";class y{constructor(h,c,o){M(this,t);M(this,d);M(this,b);M(this,m);M(this,S,!1);this.toolbar=h.container,this.eventBus=c,this.l10n=o,this.buttons=[{element:h.previous,eventName:"previouspage"},{element:h.next,eventName:"nextpage"},{element:h.zoomIn,eventName:"zoomin"},{element:h.zoomOut,eventName:"zoomout"},{element:h.print,eventName:"print"},{element:h.download,eventName:"download"},{element:h.editorFreeTextButton,eventName:"switchannotationeditormode",eventDetails:{get mode(){const{classList:v}=h.editorFreeTextButton;return v.contains("toggled")?l.AnnotationEditorType.NONE:l.AnnotationEditorType.FREETEXT}}},{element:h.editorInkButton,eventName:"switchannotationeditormode",eventDetails:{get mode(){const{classList:v}=h.editorInkButton;return v.contains("toggled")?l.AnnotationEditorType.NONE:l.AnnotationEditorType.INK}}},{element:h.editorStampButton,eventName:"switchannotationeditormode",eventDetails:{get mode(){const{classList:v}=h.editorStampButton;return v.contains("toggled")?l.AnnotationEditorType.NONE:l.AnnotationEditorType.STAMP}}}],this.buttons.push({element:h.openFile,eventName:"openfile"}),this.items={numPages:h.numPages,pageNumber:h.pageNumber,scaleSelect:h.scaleSelect,customScaleOption:h.customScaleOption,previous:h.previous,next:h.next,zoomIn:h.zoomIn,zoomOut:h.zoomOut},O(this,t,Gs).call(this,h),this.reset()}setPageNumber(h,c){this.pageNumber=h,this.pageLabel=c,O(this,b,pt).call(this,!1)}setPagesCount(h,c){this.pagesCount=h,this.hasPageLabels=c,O(this,b,pt).call(this,!0)}setPageScale(h,c){this.pageScaleValue=(h||c).toString(),this.pageScale=c,O(this,b,pt).call(this,!1)}reset(){this.pageNumber=0,this.pageLabel=null,this.hasPageLabels=!1,this.pagesCount=0,this.pageScaleValue=a.DEFAULT_SCALE_VALUE,this.pageScale=a.DEFAULT_SCALE,O(this,b,pt).call(this,!0),this.updateLoadingIndicatorState(),this.eventBus.dispatch("toolbarreset",{source:this})}updateLoadingIndicatorState(h=!1){const{pageNumber:c}=this.items;c.classList.toggle(T,h)}}S=new WeakMap,t=new WeakSet,Gs=function(h){const{pageNumber:c,scaleSelect:o}=this.items,v=this;for(const{element:w,eventName:B,eventDetails:K}of this.buttons)w.addEventListener("click",C=>{B!==null&&this.eventBus.dispatch(B,{source:this,...K})});c.addEventListener("click",function(){this.select()}),c.addEventListener("change",function(){v.eventBus.dispatch("pagenumberchanged",{source:v,value:this.value})}),o.addEventListener("change",function(){this.value!=="custom"&&v.eventBus.dispatch("scalechanged",{source:v,value:this.value})}),o.addEventListener("click",function(w){const B=w.target;this.value===v.pageScaleValue&&B.tagName.toUpperCase()==="OPTION"&&this.blur()}),o.oncontextmenu=a.noContextMenuHandler,this.eventBus._on("localized",()=>{J(this,S,!0),O(this,m,qs).call(this),O(this,b,pt).call(this,!0)}),O(this,d,Xs).call(this,h)},d=new WeakSet,Xs=function({editorFreeTextButton:h,editorFreeTextParamsToolbar:c,editorInkButton:o,editorInkParamsToolbar:v,editorStampButton:w,editorStampParamsToolbar:B}){const K=({mode:C})=>{(0,a.toggleCheckedBtn)(h,C===l.AnnotationEditorType.FREETEXT,c),(0,a.toggleCheckedBtn)(o,C===l.AnnotationEditorType.INK,v),(0,a.toggleCheckedBtn)(w,C===l.AnnotationEditorType.STAMP,B);const V=C===l.AnnotationEditorType.DISABLE;h.disabled=V,o.disabled=V,w.disabled=V};this.eventBus._on("annotationeditormodechanged",K),this.eventBus._on("toolbarreset",C=>{C.source===this&&K({mode:l.AnnotationEditorType.DISABLE})})},b=new WeakSet,pt=function(h=!1){if(!e(this,S))return;const{pageNumber:c,pagesCount:o,pageScaleValue:v,pageScale:w,items:B}=this;h&&(this.hasPageLabels?B.pageNumber.type="text":(B.pageNumber.type="number",this.l10n.get("of_pages",{pagesCount:o}).then(K=>{B.numPages.textContent=K})),B.pageNumber.max=o),this.hasPageLabels?(B.pageNumber.value=this.pageLabel,this.l10n.get("page_of_pages",{pageNumber:c,pagesCount:o}).then(K=>{B.numPages.textContent=K})):B.pageNumber.value=c,B.previous.disabled=c<=1,B.next.disabled=c>=o,B.zoomOut.disabled=w<=a.MIN_SCALE,B.zoomIn.disabled=w>=a.MAX_SCALE,this.l10n.get("page_scale_percent",{scale:Math.round(w*1e4)/100}).then(K=>{let C=!1;for(const V of B.scaleSelect.options){if(V.value!==v){V.selected=!1;continue}V.selected=!0,C=!0}C||(B.customScaleOption.textContent=K,B.customScaleOption.selected=!0)})},m=new WeakSet,qs=async function(){const{items:h,l10n:c}=this,o=Promise.all([c.get("page_scale_auto"),c.get("page_scale_actual"),c.get("page_scale_fit"),c.get("page_scale_width")]);await a.animationStarted;const v=getComputedStyle(h.scaleSelect),w=parseFloat(v.getPropertyValue("--scale-select-width")),B=document.createElement("canvas"),K=B.getContext("2d",{alpha:!1});K.font=`${v.fontSize} ${v.fontFamily}`;let C=0;for(const V of await o){const{width:q}=K.measureText(V);q>C&&(C=q)}C+=.3*w,C>w&&h.scaleSelect.parentNode.style.setProperty("--scale-select-width",`${C}px`),B.width=0,B.height=0},A.Toolbar=y},(ae,A)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.ViewHistory=void 0;const P=20;class a{constructor(T,y=P){this.fingerprint=T,this.cacheSize=y,this._initializedPromise=this._readFromStorage().then(S=>{const t=JSON.parse(S||"{}");let r=-1;if(!Array.isArray(t.files))t.files=[];else{for(;t.files.length>=this.cacheSize;)t.files.shift();for(let d=0,p=t.files.length;d<p;d++)if(t.files[d].fingerprint===this.fingerprint){r=d;break}}r===-1&&(r=t.files.push({fingerprint:this.fingerprint})-1),this.file=t.files[r],this.database=t})}async _writeToStorage(){const T=JSON.stringify(this.database);localStorage.setItem("pdfjs.history",T)}async _readFromStorage(){return localStorage.getItem("pdfjs.history")}async set(T,y){return await this._initializedPromise,this.file[T]=y,this._writeToStorage()}async setMultiple(T){await this._initializedPromise;for(const y in T)this.file[y]=T[y];return this._writeToStorage()}async get(T,y){await this._initializedPromise;const S=this.file[T];return S!==void 0?S:y}async getMultiple(T){await this._initializedPromise;const y=Object.create(null);for(const S in T){const t=this.file[S];y[S]=t!==void 0?t:T[S]}return y}}A.ViewHistory=a},(ae,A,P)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.DefaultExternalServices=void 0;var a=P(5);class l{constructor(){throw new Error("Cannot initialize DefaultExternalServices.")}static updateFindControlState(y){}static updateFindMatchesCount(y){}static initPassiveLoading(y){}static reportTelemetry(y){}static createDownloadManager(){throw new Error("Not implemented: createDownloadManager")}static createPreferences(){throw new Error("Not implemented: createPreferences")}static createL10n(y){throw new Error("Not implemented: createL10n")}static createScripting(y){throw new Error("Not implemented: createScripting")}static get supportsPinchToZoom(){return(0,a.shadow)(this,"supportsPinchToZoom",!0)}static get supportsIntegratedFind(){return(0,a.shadow)(this,"supportsIntegratedFind",!1)}static get supportsDocumentFonts(){return(0,a.shadow)(this,"supportsDocumentFonts",!0)}static get supportedMouseWheelZoomModifierKeys(){return(0,a.shadow)(this,"supportedMouseWheelZoomModifierKeys",{ctrlKey:!0,metaKey:!0})}static get isInAutomation(){return(0,a.shadow)(this,"isInAutomation",!1)}static updateEditorStates(y){throw new Error("Not implemented: updateEditorStates")}static get canvasMaxAreaInBytes(){return(0,a.shadow)(this,"canvasMaxAreaInBytes",-1)}static getNimbusExperimentData(){return(0,a.shadow)(this,"getNimbusExperimentData",Promise.resolve(null))}}A.DefaultExternalServices=l},(ae,A,P)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.bindPrintServiceFactory=A.bindExternalService=void 0;let a;A.bindPrintServiceFactory=a;let l;A.bindExternalService=l,A.bindExternalService=l=P(45).bindExternalService,A.bindPrintServiceFactory=a=P(51).bindPrintServiceFactory,document.blockUnblockOnload&&document.blockUnblockOnload(!0)},(ae,A,P)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.bindExternalService=d;var a=P(43),l=P(46),T=P(47),y=P(48),S=P(50);class t extends l.BasePreferences{async _writeToStorage(b){localStorage.setItem("pdfjs.preferences",JSON.stringify(b))}async _readFromStorage(b){return JSON.parse(localStorage.getItem("pdfjs.preferences"))}}class r extends a.DefaultExternalServices{static createDownloadManager(){return new T.DownloadManager}static createPreferences(){return new t}static createL10n({locale:b="en-US"}){return new y.GenericL10n(b)}static createScripting({sandboxBundleSrc:b}){return new S.GenericScripting(b)}}function d(p){p.externalServices=r}},(ae,A,P)=>{var l,T,y;Object.defineProperty(A,"__esModule",{value:!0}),A.BasePreferences=void 0,P(9);const S=class{constructor(){M(this,l,Object.freeze({annotationEditorMode:0,annotationMode:2,cursorToolOnLoad:0,defaultZoomDelay:400,defaultZoomValue:"",disablePageLabels:!1,enablePermissions:!1,enablePrintAutoRotate:!0,enableScripting:!0,enableStampEditor:!0,externalLinkTarget:0,historyUpdateUrl:!1,ignoreDestinationZoom:!1,forcePageColors:!1,pageColorsBackground:"Canvas",pageColorsForeground:"CanvasText",pdfBugEnabled:!1,sidebarViewOnLoad:-1,scrollModeOnLoad:-1,spreadModeOnLoad:-1,textLayerMode:1,viewerCssTheme:0,viewOnLoad:0,disableAutoFetch:!1,disableFontFace:!1,disableRange:!1,disableStream:!1,enableXfa:!0}));M(this,T,Object.create(null));M(this,y,null);if(this.constructor===S)throw new Error("Cannot initialize BasePreferences.");J(this,y,this._readFromStorage(e(this,l)).then(r=>{for(const d in e(this,l)){const p=r==null?void 0:r[d];typeof p==typeof e(this,l)[d]&&(e(this,T)[d]=p)}}))}async _writeToStorage(r){throw new Error("Not implemented: _writeToStorage")}async _readFromStorage(r){throw new Error("Not implemented: _readFromStorage")}async reset(){await e(this,y);const r=e(this,T);return J(this,T,Object.create(null)),this._writeToStorage(e(this,l)).catch(d=>{throw J(this,T,r),d})}async set(r,d){await e(this,y);const p=e(this,l)[r],b=e(this,T);if(p===void 0)throw new Error(`Set preference: "${r}" is undefined.`);if(d===void 0)throw new Error("Set preference: no value is specified.");const f=typeof d,m=typeof p;if(f!==m)if(f==="number"&&m==="string")d=d.toString();else throw new Error(`Set preference: "${d}" is a ${f}, expected a ${m}.`);else if(f==="number"&&!Number.isInteger(d))throw new Error(`Set preference: "${d}" must be an integer.`);return e(this,T)[r]=d,this._writeToStorage(e(this,T)).catch(i=>{throw J(this,T,b),i})}async get(r){await e(this,y);const d=e(this,l)[r];if(d===void 0)throw new Error(`Get preference: "${r}" is undefined.`);return e(this,T)[r]??d}async getAll(){await e(this,y);const r=Object.create(null);for(const d in e(this,l))r[d]=e(this,T)[d]??e(this,l)[d];return r}};let a=S;l=new WeakMap,T=new WeakMap,y=new WeakMap,A.BasePreferences=a},(ae,A,P)=>{var y;Object.defineProperty(A,"__esModule",{value:!0}),A.DownloadManager=void 0;var a=P(5);function l(S,t){const r=document.createElement("a");if(!r.click)throw new Error('DownloadManager: "a.click()" is not supported.');r.href=S,r.target="_parent","download"in r&&(r.download=t),(document.body||document.documentElement).append(r),r.click(),r.remove()}class T{constructor(){M(this,y,new WeakMap)}downloadUrl(t,r,d){if(!(0,a.createValidAbsoluteUrl)(t,"http://example.com")){console.error(`downloadUrl - not a valid URL: ${t}`);return}l(t+"#pdfjs.action=download",r)}downloadData(t,r,d){const p=URL.createObjectURL(new Blob([t],{type:d}));l(p,r)}openOrDownloadData(t,r,d){const p=(0,a.isPdfFile)(d),b=p?"application/pdf":"";if(p){let f=e(this,y).get(t);f||(f=URL.createObjectURL(new Blob([r],{type:b})),e(this,y).set(t,f));let m;m="?file="+encodeURIComponent(f+"#"+d);try{return window.open(m),!0}catch(i){console.error(`openOrDownloadData: ${i}`),URL.revokeObjectURL(f),e(this,y).delete(t)}}return this.downloadData(r,d,b),!1}download(t,r,d,p){const b=URL.createObjectURL(t);l(b,d)}}y=new WeakMap,A.DownloadManager=T},(ae,A,P)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.GenericL10n=void 0,P(49);var a=P(31);const l={en:"en-US",es:"es-ES",fy:"fy-NL",ga:"ga-IE",gu:"gu-IN",hi:"hi-IN",hy:"hy-AM",nb:"nb-NO",ne:"ne-NP",nn:"nn-NO",pa:"pa-IN",pt:"pt-PT",sv:"sv-SE",zh:"zh-CN"};function T(S){return l[S==null?void 0:S.toLowerCase()]||S}class y{constructor(t){const{webL10n:r}=document;this._lang=t,this._ready=new Promise((d,p)=>{r.setLanguage(T(t),()=>{d(r)})})}async getLanguage(){return(await this._ready).getLanguage()}async getDirection(){return(await this._ready).getDirection()}async get(t,r=null,d=(0,a.getL10nFallback)(t,r)){return(await this._ready).get(t,r,d)}async translate(t){return(await this._ready).translate(t)}}A.GenericL10n=y},()=>{document.webL10n=function(ae,A){var P={},a="",l="textContent",T="",y={},S="loading",t=!0;function r(){return A.querySelectorAll('link[type="application/l10n"]')}function d(){var C=A.querySelector('script[type="application/l10n"]');return C?JSON.parse(C.innerHTML):null}function p(C){return C?C.querySelectorAll("*[data-l10n-id]"):[]}function b(C){if(!C)return{};var V=C.getAttribute("data-l10n-id"),q=C.getAttribute("data-l10n-args"),X={};if(q)try{X=JSON.parse(q)}catch{console.warn("could not parse arguments for #"+V)}return{id:V,args:X}}function f(C,V,q){V=V||function(F){},q=q||function(){};var X=new XMLHttpRequest;X.open("GET",C,t),X.overrideMimeType&&X.overrideMimeType("text/plain; charset=utf-8"),X.onreadystatechange=function(){X.readyState==4&&(X.status==200||X.status===0?V(X.responseText):q())},X.onerror=q,X.ontimeout=q;try{X.send(null)}catch{q()}}function m(C,V,q,X){var E=C.replace(/[^\/]*$/,"")||"./";function F(ie){return ie.lastIndexOf("\\")<0?ie:ie.replace(/\\\\/g,"\\").replace(/\\n/g,`
`).replace(/\\r/g,"\r").replace(/\\t/g,"	").replace(/\\b/g,"\b").replace(/\\f/g,"\f").replace(/\\{/g,"{").replace(/\\}/g,"}").replace(/\\"/g,'"').replace(/\\'/g,"'")}function k(ie,_e){var R={},g=/^\s*|\s*$/,n=/^\s*#|^\s*$/,u=/^\s*\[(.*)\]\s*$/,L=/^\s*@import\s+url\((.*)\)\s*$/i,I=/^([^=\s]*)\s*=\s*(.+)$/;function j(te,Se,ge){var ne=te.replace(g,"").split(/[\r\n]+/),ce="*",Ee=V.split("-",1)[0],me=!1,xe="";function De(){for(;;){if(!ne.length){ge();return}var Ae=ne.shift();if(!n.test(Ae)){if(Se){if(xe=u.exec(Ae),xe){ce=xe[1].toLowerCase(),me=ce!=="*"&&ce!==V&&ce!==Ee;continue}else if(me)continue;if(xe=L.exec(Ae),xe){Y(E+xe[1],De);return}}var Ve=Ae.match(I);Ve&&Ve.length==3&&(R[Ve[1]]=F(Ve[2]))}}}De()}function Y(te,Se){f(te,function(ge){j(ge,!1,Se)},function(){console.warn(te+" not found."),Se()})}j(ie,!0,function(){_e(R)})}f(C,function(ie){a+=ie,k(ie,function(_e){for(var R in _e){var g,n,u=R.lastIndexOf(".");u>0?(g=R.substring(0,u),n=R.substring(u+1)):(g=R,n=l),P[g]||(P[g]={}),P[g][n]=_e[R]}q&&q()})},X)}function i(C,V){C&&(C=C.toLowerCase()),V=V||function(){},s(),T=C;var q=r(),X=q.length;if(X===0){var E=d();if(E&&E.locales&&E.default_locale){if(console.log("using the embedded JSON directory, early way out"),P=E.locales[C],!P){var F=E.default_locale.toLowerCase();for(var k in E.locales)if(k=k.toLowerCase(),k===C){P=E.locales[C];break}else k===F&&(P=E.locales[F])}V()}else console.log("no resource to load, early way out");S="complete";return}var ie=null,_e=0;ie=function(){_e++,_e>=X&&(V(),S="complete")};function R(u){var L=u.href;this.load=function(I,j){m(L,I,j,function(){console.warn(L+" not found."),console.warn('"'+I+'" resource not found'),T="",j()})}}for(var g=0;g<X;g++){var n=new R(q[g]);n.load(C,ie)}}function s(){P={},a="",T=""}function h(C){var V={af:3,ak:4,am:4,ar:1,asa:3,az:0,be:11,bem:3,bez:3,bg:3,bh:4,bm:0,bn:3,bo:0,br:20,brx:3,bs:11,ca:3,cgg:3,chr:3,cs:12,cy:17,da:3,de:3,dv:3,dz:0,ee:3,el:3,en:3,eo:3,es:3,et:3,eu:3,fa:0,ff:5,fi:3,fil:4,fo:3,fr:5,fur:3,fy:3,ga:8,gd:24,gl:3,gsw:3,gu:3,guw:4,gv:23,ha:3,haw:3,he:2,hi:4,hr:11,hu:0,id:0,ig:0,ii:0,is:3,it:3,iu:7,ja:0,jmc:3,jv:0,ka:0,kab:5,kaj:3,kcg:3,kde:0,kea:0,kk:3,kl:3,km:0,kn:0,ko:0,ksb:3,ksh:21,ku:3,kw:7,lag:18,lb:3,lg:3,ln:4,lo:0,lt:10,lv:6,mas:3,mg:4,mk:16,ml:3,mn:3,mo:9,mr:3,ms:0,mt:15,my:0,nah:3,naq:7,nb:3,nd:3,ne:3,nl:3,nn:3,no:3,nr:3,nso:4,ny:3,nyn:3,om:3,or:3,pa:3,pap:3,pl:13,ps:3,pt:3,rm:3,ro:9,rof:3,ru:11,rwk:3,sah:0,saq:3,se:7,seh:3,ses:0,sg:0,sh:11,shi:19,sk:12,sl:14,sma:7,smi:7,smj:7,smn:7,sms:7,sn:3,so:3,sq:3,sr:11,ss:3,ssy:3,st:3,sv:3,sw:3,syr:3,ta:3,te:3,teo:3,th:0,ti:4,tig:3,tk:3,tl:4,tn:3,to:0,tr:0,ts:3,tzm:22,uk:11,ur:3,ve:3,vi:0,vun:3,wa:4,wae:3,wo:0,xh:3,xog:3,yo:0,zh:0,zu:3};function q(k,ie){return ie.indexOf(k)!==-1}function X(k,ie,_e){return ie<=k&&k<=_e}var E={0:function(k){return"other"},1:function(k){return X(k%100,3,10)?"few":k===0?"zero":X(k%100,11,99)?"many":k==2?"two":k==1?"one":"other"},2:function(k){return k!==0&&k%10===0?"many":k==2?"two":k==1?"one":"other"},3:function(k){return k==1?"one":"other"},4:function(k){return X(k,0,1)?"one":"other"},5:function(k){return X(k,0,2)&&k!=2?"one":"other"},6:function(k){return k===0?"zero":k%10==1&&k%100!=11?"one":"other"},7:function(k){return k==2?"two":k==1?"one":"other"},8:function(k){return X(k,3,6)?"few":X(k,7,10)?"many":k==2?"two":k==1?"one":"other"},9:function(k){return k===0||k!=1&&X(k%100,1,19)?"few":k==1?"one":"other"},10:function(k){return X(k%10,2,9)&&!X(k%100,11,19)?"few":k%10==1&&!X(k%100,11,19)?"one":"other"},11:function(k){return X(k%10,2,4)&&!X(k%100,12,14)?"few":k%10===0||X(k%10,5,9)||X(k%100,11,14)?"many":k%10==1&&k%100!=11?"one":"other"},12:function(k){return X(k,2,4)?"few":k==1?"one":"other"},13:function(k){return X(k%10,2,4)&&!X(k%100,12,14)?"few":k!=1&&X(k%10,0,1)||X(k%10,5,9)||X(k%100,12,14)?"many":k==1?"one":"other"},14:function(k){return X(k%100,3,4)?"few":k%100==2?"two":k%100==1?"one":"other"},15:function(k){return k===0||X(k%100,2,10)?"few":X(k%100,11,19)?"many":k==1?"one":"other"},16:function(k){return k%10==1&&k!=11?"one":"other"},17:function(k){return k==3?"few":k===0?"zero":k==6?"many":k==2?"two":k==1?"one":"other"},18:function(k){return k===0?"zero":X(k,0,2)&&k!==0&&k!=2?"one":"other"},19:function(k){return X(k,2,10)?"few":X(k,0,1)?"one":"other"},20:function(k){return(X(k%10,3,4)||k%10==9)&&!(X(k%100,10,19)||X(k%100,70,79)||X(k%100,90,99))?"few":k%1e6===0&&k!==0?"many":k%10==2&&!q(k%100,[12,72,92])?"two":k%10==1&&!q(k%100,[11,71,91])?"one":"other"},21:function(k){return k===0?"zero":k==1?"one":"other"},22:function(k){return X(k,0,1)||X(k,11,99)?"one":"other"},23:function(k){return X(k%10,1,2)||k%20===0?"one":"other"},24:function(k){return X(k,3,10)||X(k,13,19)?"few":q(k,[2,12])?"two":q(k,[1,11])?"one":"other"}},F=V[C.replace(/-.*$/,"")];return F in E?E[F]:(console.warn("plural form unknown for ["+C+"]"),function(){return"other"})}y.plural=function(C,V,q,X){var E=parseFloat(V);if(isNaN(E)||X!=l)return C;y._pluralRules||(y._pluralRules=h(T));var F="["+y._pluralRules(E)+"]";return E===0&&q+"[zero]"in P?C=P[q+"[zero]"][X]:E==1&&q+"[one]"in P?C=P[q+"[one]"][X]:E==2&&q+"[two]"in P?C=P[q+"[two]"][X]:q+F in P?C=P[q+F][X]:q+"[other]"in P&&(C=P[q+"[other]"][X]),C};function c(C,V,q){var X=P[C];if(!X){if(console.warn("#"+C+" is undefined."),!q)return null;X=q}var E={};for(var F in X){var k=X[F];k=o(k,V,C,F),k=v(k,V,C),E[F]=k}return E}function o(C,V,q,X){var E=/\{\[\s*([a-zA-Z]+)\(([a-zA-Z]+)\)\s*\]\}/,F=E.exec(C);if(!F||!F.length)return C;var k=F[1],ie=F[2],_e;if(V&&ie in V?_e=V[ie]:ie in P&&(_e=P[ie]),k in y){var R=y[k];C=R(C,_e,q,X)}return C}function v(C,V,q){var X=/\{\{\s*(.+?)\s*\}\}/g;return C.replace(X,function(E,F){return V&&F in V?V[F]:F in P?P[F]:(console.log("argument {{"+F+"}} for #"+q+" is undefined."),E)})}function w(C){var V=b(C);if(V.id){var q=c(V.id,V.args);if(!q){console.warn("#"+V.id+" is undefined.");return}if(q[l]){if(B(C)===0)C[l]=q[l];else{for(var X=C.childNodes,E=!1,F=0,k=X.length;F<k;F++)X[F].nodeType===3&&/\S/.test(X[F].nodeValue)&&(E?X[F].nodeValue="":(X[F].nodeValue=q[l],E=!0));if(!E){var ie=A.createTextNode(q[l]);C.prepend(ie)}}delete q[l]}for(var _e in q)C[_e]=q[_e]}}function B(C){if(C.children)return C.children.length;if(typeof C.childElementCount<"u")return C.childElementCount;for(var V=0,q=0;q<C.childNodes.length;q++)V+=C.nodeType===1?1:0;return V}function K(C){C=C||A.documentElement;for(var V=p(C),q=V.length,X=0;X<q;X++)w(V[X]);w(C)}return{get:function(C,V,q){var X=C.lastIndexOf("."),E=l;X>0&&(E=C.substring(X+1),C=C.substring(0,X));var F;q&&(F={},F[E]=q);var k=c(C,V,F);return k&&E in k?k[E]:"{{"+C+"}}"},getData:function(){return P},getText:function(){return a},getLanguage:function(){return T},setLanguage:function(C,V){i(C,function(){V&&V()})},getDirection:function(){var C=["ar","he","fa","ps","ur"],V=T.split("-",1)[0];return C.indexOf(V)>=0?"rtl":"ltr"},translate:K,getReadyState:function(){return S},ready:function(C){if(C)S=="complete"||S=="interactive"?ae.setTimeout(function(){C()}):A.addEventListener&&A.addEventListener("localized",function V(){A.removeEventListener("localized",V),C()});else return}}}(window,document)},(ae,A,P)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.GenericScripting=void 0,A.docProperties=l;var a=P(5);async function l(y){const S="",t=S.split("#")[0];let{info:r,metadata:d,contentDispositionFilename:p,contentLength:b}=await y.getMetadata();if(!b){const{length:f}=await y.getDownloadInfo();b=f}return{...r,baseURL:t,filesize:b,filename:p||(0,a.getPdfFilenameFromUrl)(S),metadata:d==null?void 0:d.getRaw(),authors:d==null?void 0:d.get("dc:creator"),numPages:y.numPages,URL:S}}class T{constructor(S){this._ready=(0,a.loadScript)(S,!0).then(()=>window.pdfjsSandbox.QuickJSSandbox())}async createSandbox(S){(await this._ready).create(S)}async dispatchEventInSandbox(S){const t=await this._ready;setTimeout(()=>t.dispatchEvent(S),0)}async destroySandbox(){(await this._ready).nukeSandbox()}}A.GenericScripting=T},(ae,A,P)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.bindPrintServiceFactory=h;var a=P(5),l=P(52),T=P(1);let y=null,S=null,t=null;function r(c,o,v,w,B,K,C){const V=y.scratchCanvas,q=B/a.PixelsPerInch.PDF;V.width=Math.floor(w.width*q),V.height=Math.floor(w.height*q);const X=V.getContext("2d");return X.save(),X.fillStyle="rgb(255, 255, 255)",X.fillRect(0,0,V.width,V.height),X.restore(),Promise.all([o.getPage(v),C]).then(function([E,F]){const k={canvasContext:X,transform:[q,0,0,q,0,0],viewport:E.getViewport({scale:1,rotation:w.rotation}),intent:"print",annotationMode:a.AnnotationMode.ENABLE_STORAGE,optionalContentConfigPromise:K,printAnnotationStorage:F};return E.render(k).promise})}class d{constructor(o,v,w,B,K=null,C=null,V){this.pdfDocument=o,this.pagesOverview=v,this.printContainer=w,this._printResolution=B||150,this._optionalContentConfigPromise=K||o.getOptionalContentConfig(),this._printAnnotationStoragePromise=C||Promise.resolve(),this.l10n=V,this.currentPage=-1,this.scratchCanvas=document.createElement("canvas")}layout(){this.throwIfInactive();const o=document.querySelector("body");o.setAttribute("data-pdfjsprinting",!0);const{width:v,height:w}=this.pagesOverview[0];this.pagesOverview.every(K=>K.width===v&&K.height===w)||console.warn("Not all pages have the same size. The printed result may be incorrect!"),this.pageStyleSheet=document.createElement("style"),this.pageStyleSheet.textContent=`@page { size: ${v}pt ${w}pt;}`,o.append(this.pageStyleSheet)}destroy(){if(y!==this)return;this.printContainer.textContent="",document.querySelector("body").removeAttribute("data-pdfjsprinting"),this.pageStyleSheet&&(this.pageStyleSheet.remove(),this.pageStyleSheet=null),this.scratchCanvas.width=this.scratchCanvas.height=0,this.scratchCanvas=null,y=null,s().then(function(){t.active===S&&t.close(S)})}renderPages(){if(this.pdfDocument.isPureXfa)return(0,l.getXfaHtmlForPrinting)(this.printContainer,this.pdfDocument),Promise.resolve();const o=this.pagesOverview.length,v=(w,B)=>{if(this.throwIfInactive(),++this.currentPage>=o){m(o,o,this.l10n),w();return}const K=this.currentPage;m(K,o,this.l10n),r(this,this.pdfDocument,K+1,this.pagesOverview[K],this._printResolution,this._optionalContentConfigPromise,this._printAnnotationStoragePromise).then(this.useRenderedPage.bind(this)).then(function(){v(w,B)},B)};return new Promise(v)}useRenderedPage(){this.throwIfInactive();const o=document.createElement("img"),v=this.scratchCanvas;"toBlob"in v?v.toBlob(function(B){o.src=URL.createObjectURL(B)}):o.src=v.toDataURL();const w=document.createElement("div");return w.className="printedPage",w.append(o),this.printContainer.append(w),new Promise(function(B,K){o.onload=B,o.onerror=K})}performPrint(){return this.throwIfInactive(),new Promise(o=>{setTimeout(()=>{if(!this.active){o();return}p.call(window),setTimeout(o,20)},0)})}get active(){return this===y}throwIfInactive(){if(!this.active)throw new Error("This print request was cancelled or completed.")}}const p=window.print;window.print=function(){if(y){console.warn("Ignored window.print() because of a pending print job.");return}s().then(function(){y&&t.open(S)});try{b("beforeprint")}finally{if(!y){console.error("Expected print service to be initialized."),s().then(function(){t.active===S&&t.close(S)});return}const c=y;y.renderPages().then(function(){return c.performPrint()}).catch(function(){}).then(function(){c.active&&f()})}};function b(c){const o=new CustomEvent(c,{bubbles:!1,cancelable:!1,detail:"custom"});window.dispatchEvent(o)}function f(){y&&(y.destroy(),b("afterprint"))}function m(c,o,v){const w=(0,T.getActiveApp)();S||(S=w.appConfig.appContainer.querySelector(".printServiceDialog"));const B=Math.round(100*c/o),K=S.querySelector("progress"),C=S.querySelector(".relative-progress");K.value=B,v.get("print_progress_percent",{progress:B}).then(V=>{C.textContent=V})}if(window.addEventListener("keydown",function(c){c.keyCode===80&&(c.ctrlKey||c.metaKey)&&!c.altKey&&(!c.shiftKey||window.chrome||window.opera)&&(window.print(),c.preventDefault(),c.stopImmediatePropagation())},!0),"onbeforeprint"in window){const c=function(o){o.detail!=="custom"&&o.stopImmediatePropagation()};window.addEventListener("beforeprint",c),window.addEventListener("afterprint",c)}let i;function s(){if(!i){const c=(0,T.getActiveApp)();if(t=c.overlayManager,!t)throw new Error("The overlay manager has not yet been initialized.");S||(S=c.appConfig.appContainer.querySelector(".printServiceDialog")),i=t.register(S,!0),c.appConfig.appContainer.querySelector(".printCancel").onclick=f,S.addEventListener("close",f)}return i}function h(c){c.instance={supportsPrinting:!0,createPrintService(o,v,w,B,K,C,V){if(y)throw new Error("The print service is created and active.");return y=new d(o,v,w,B,K,C,V),y}}}},(ae,A,P)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.getXfaHtmlForPrinting=y;var a=P(5),l=P(11),T=P(39);function y(S,t){const r=t.allXfaHtml,d=new l.SimpleLinkService,p=Math.round(a.PixelsPerInch.PDF_TO_CSS_UNITS*100)/100;for(const b of r.children){const f=document.createElement("div");f.className="xfaPrintedPage",S.append(f);const m=new T.XfaLayerBuilder({pageDiv:f,pdfPage:null,annotationStorage:t.annotationStorage,linkService:d,xfaHtml:b}),i=(0,a.getXfaPageViewport)(b,{scale:p});m.render(i,"print")}}},(ae,A)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.injectLocaleResource=P;function P(a){const l="application/l10n";let T=document.querySelector(`link[type="${l}"]`);T&&T.getAttribute("href")===a||(T=document.createElement("link"),T.rel="resource",T.type=l,T.href=a,document.head.appendChild(T))}},(ae,A)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.default=void 0;const P=`
<div data-dom-id="outerContainer" class="outerContainer">
  <div data-dom-id="sidebarContainer" class="sidebarContainer">
    <div data-dom-id="toolbarSidebar" class="toolbarSidebar">
      <div data-dom-id="toolbarSidebarLeft" class="toolbarSidebarLeft">
        <div
          role="radiogroup"
          data-dom-id="sidebarViewButtons"
          class="splitToolbarButton toggled sidebarViewButtons"
        >
          <button
            title="Show Thumbnails"
            tabindex="2"
            data-l10n-id="thumbs"
            role="radio"
            aria-checked="true"
            aria-controls="thumbnailView"
            data-dom-id="viewThumbnail"
            class="toolbarButton toggled viewThumbnail"
          >
            <span data-l10n-id="thumbs_label">Thumbnails</span></button
          ><button
            title="Show Document Outline (double-click to expand/collapse all items)"
            tabindex="3"
            data-l10n-id="document_outline"
            role="radio"
            aria-checked="false"
            aria-controls="outlineView"
            data-dom-id="viewOutline"
            class="toolbarButton viewOutline"
          >
            <span data-l10n-id="document_outline_label"
              >Document Outline</span
            ></button
          ><button
            title="Show Attachments"
            tabindex="4"
            data-l10n-id="attachments"
            role="radio"
            aria-checked="false"
            aria-controls="attachmentsView"
            data-dom-id="viewAttachments"
            class="toolbarButton viewAttachments"
          >
            <span data-l10n-id="attachments_label">Attachments</span></button
          ><button
            title="Show Layers (double-click to reset all layers to the default state)"
            tabindex="5"
            data-l10n-id="layers"
            role="radio"
            aria-checked="false"
            aria-controls="layersView"
            data-dom-id="viewLayers"
            class="toolbarButton viewLayers"
          >
            <span data-l10n-id="layers_label">Layers</span>
          </button>
        </div>
      </div>
      <div data-dom-id="toolbarSidebarRight" class="toolbarSidebarRight">
        <div
          data-dom-id="outlineOptionsContainer"
          class="hidden outlineOptionsContainer"
        >
          <div class="verticalToolbarSeparator"></div>
          <button
            disabled="disabled"
            title="Find Current Outline Item"
            tabindex="6"
            data-l10n-id="current_outline_item"
            data-dom-id="currentOutlineItem"
            class="toolbarButton currentOutlineItem"
          >
            <span data-l10n-id="current_outline_item_label"
              >Current Outline Item</span
            >
          </button>
        </div>
      </div>
    </div>
    <div data-dom-id="sidebarContent" class="sidebarContent">
      <div data-dom-id="thumbnailView" class="thumbnailView"></div>
      <div data-dom-id="outlineView" class="hidden outlineView"></div>
      <div data-dom-id="attachmentsView" class="hidden attachmentsView"></div>
      <div data-dom-id="layersView" class="hidden layersView"></div>
    </div>
    <div data-dom-id="sidebarResizer" class="sidebarResizer"></div>
  </div>
  <!-- sidebarContainer -->
  <div data-dom-id="mainContainer" class="mainContainer">
    <div class="findbar hidden doorHanger" data-dom-id="findbar">
      <div data-dom-id="findbarInputContainer" class="findbarInputContainer">
        <input
          title="Find"
          placeholder="Find in document…"
          tabindex="91"
          data-l10n-id="find_input"
          aria-invalid="false"
          data-dom-id="findInput"
          class="toolbarField findInput"
        />
        <div class="splitToolbarButton">
          <button
            title="Find the previous occurrence of the phrase"
            tabindex="92"
            data-l10n-id="find_previous"
            data-dom-id="findPrevious"
            class="toolbarButton findPrevious"
          >
            <span data-l10n-id="find_previous_label">Previous</span>
          </button>
          <div class="splitToolbarButtonSeparator"></div>
          <button
            title="Find the next occurrence of the phrase"
            tabindex="93"
            data-l10n-id="find_next"
            data-dom-id="findNext"
            class="toolbarButton findNext"
          >
            <span data-l10n-id="find_next_label">Next</span>
          </button>
        </div>
      </div>
      <div
        data-dom-id="findbarOptionsOneContainer"
        class="findbarOptionsOneContainer"
      >
        <label
          ><input
            type="checkbox"
            tabindex="94"
            data-dom-id="findHighlightAll"
            class="toolbarField findHighlightAll"
          /><span class="toolbarLabel" data-l10n-id="find_highlight"
            >Highlight All</span
          ></label
        ><!--Removed!--><label
          ><input
            type="checkbox"
            tabindex="95"
            data-dom-id="findMatchCase"
            class="toolbarField findMatchCase"
          /><span class="toolbarLabel" data-l10n-id="find_match_case_label"
            >Match Case</span
          ></label
        ><!--Removed!-->
      </div>
      <div
        data-dom-id="findbarOptionsTwoContainer"
        class="findbarOptionsTwoContainer"
      >
        <label
          ><input
            type="checkbox"
            tabindex="96"
            data-dom-id="findMatchDiacritics"
            class="toolbarField findMatchDiacritics"
          /><span
            class="toolbarLabel"
            data-l10n-id="find_match_diacritics_label"
            >Match Diacritics</span
          ></label
        ><!--Removed!--><label
          ><input
            type="checkbox"
            tabindex="97"
            data-dom-id="findEntireWord"
            class="toolbarField findEntireWord"
          /><span class="toolbarLabel" data-l10n-id="find_entire_word_label"
            >Whole Words</span
          ></label
        ><!--Removed!-->
      </div>
      <div
        aria-live="polite"
        data-dom-id="findbarMessageContainer"
        class="findbarMessageContainer"
      >
        <span
          data-dom-id="findResultsCount"
          class="toolbarLabel findResultsCount"
        ></span
        ><span data-dom-id="findMsg" class="toolbarLabel findMsg"></span>
      </div>
    </div>
    <!-- findbar -->
    <div
      data-dom-id="editorFreeTextParamsToolbar"
      class="editorParamsToolbar hidden doorHangerRight editorFreeTextParamsToolbar"
    >
      <div class="editorParamsToolbarContainer">
        <div class="editorParamsSetter">
          <!--Removed!--><label
            ><input
              type="color"
              tabindex="100"
              data-dom-id="editorFreeTextColor"
              class="editorParamsColor editorFreeTextColor"
            /><span class="toolbarLabel" data-l10n-id="editor_free_text_color"
              >Color</span
            ></label
          >
        </div>
        <div class="editorParamsSetter">
          <!--Removed!--><label
            ><input
              type="range"
              value="10"
              min="5"
              max="100"
              step="1"
              tabindex="101"
              data-dom-id="editorFreeTextFontSize"
              class="editorParamsSlider editorFreeTextFontSize"
            /><span class="toolbarLabel" data-l10n-id="editor_free_text_size"
              >Size</span
            ></label
          >
        </div>
      </div>
    </div>
    <div
      data-dom-id="editorInkParamsToolbar"
      class="editorParamsToolbar hidden doorHangerRight editorInkParamsToolbar"
    >
      <div class="editorParamsToolbarContainer">
        <div class="editorParamsSetter">
          <!--Removed!--><label
            ><input
              type="color"
              tabindex="102"
              data-dom-id="editorInkColor"
              class="editorParamsColor editorInkColor"
            /><span class="toolbarLabel" data-l10n-id="editor_ink_color"
              >Color</span
            ></label
          >
        </div>
        <div class="editorParamsSetter">
          <!--Removed!--><label
            ><input
              type="range"
              value="1"
              min="1"
              max="20"
              step="1"
              tabindex="103"
              data-dom-id="editorInkThickness"
              class="editorParamsSlider editorInkThickness"
            /><span class="toolbarLabel" data-l10n-id="editor_ink_thickness"
              >Thickness</span
            ></label
          >
        </div>
        <div class="editorParamsSetter">
          <!--Removed!--><label
            ><input
              type="range"
              value="100"
              min="1"
              max="100"
              step="1"
              tabindex="104"
              data-dom-id="editorInkOpacity"
              class="editorParamsSlider editorInkOpacity"
            /><span class="toolbarLabel" data-l10n-id="editor_ink_opacity"
              >Opacity</span
            ></label
          >
        </div>
      </div>
    </div>
    <div
      data-dom-id="editorStampParamsToolbar"
      class="editorParamsToolbar hidden doorHangerRight editorStampParamsToolbar"
    >
      <div class="editorParamsToolbarContainer">
        <button
          title="Add image"
          tabindex="105"
          data-l10n-id="editor_stamp_add_image"
          data-dom-id="editorStampAddImage"
          class="secondaryToolbarButton editorStampAddImage"
        >
          <span data-l10n-id="editor_stamp_add_image_label">Add image</span>
        </button>
      </div>
    </div>
    <div
      class="secondaryToolbar hidden doorHangerRight"
      data-dom-id="secondaryToolbar"
    >
      <div
        data-dom-id="secondaryToolbarButtonContainer"
        class="secondaryToolbarButtonContainer"
      >
        <!--#if GENERIC--><button
          title="Open File"
          tabindex="51"
          data-l10n-id="open_file"
          data-dom-id="secondaryOpenFile"
          class="secondaryToolbarButton visibleLargeView secondaryOpenFile"
        >
          <span data-l10n-id="open_file_label">Open</span></button
        ><!--#endif--><button
          title="Print"
          tabindex="52"
          data-l10n-id="print"
          data-dom-id="secondaryPrint"
          class="secondaryToolbarButton visibleMediumView secondaryPrint"
        >
          <span data-l10n-id="print_label">Print</span></button
        ><button
          title="Save"
          tabindex="53"
          data-l10n-id="save"
          data-dom-id="secondaryDownload"
          class="secondaryToolbarButton visibleMediumView secondaryDownload"
        >
          <span data-l10n-id="save_label">Save</span></button
        ><!--#if GENERIC-->
        <div class="horizontalToolbarSeparator visibleLargeView"></div>
        <!--#else--><!--        <div class="horizontalToolbarSeparator visibleMediumView"></div>--><!--#endif--><button
          title="Switch to Presentation Mode"
          tabindex="54"
          data-l10n-id="presentation_mode"
          data-dom-id="presentationMode"
          class="secondaryToolbarButton presentationMode"
        >
          <span data-l10n-id="presentation_mode_label"
            >Presentation Mode</span
          ></button
        ><a
          href="#"
          title="Current Page (View URL from Current Page)"
          tabindex="55"
          data-l10n-id="bookmark1"
          data-dom-id="viewBookmark"
          class="secondaryToolbarButton viewBookmark"
          ><span data-l10n-id="bookmark1_label">Current Page</span></a
        >
        <div
          data-dom-id="viewBookmarkSeparator"
          class="horizontalToolbarSeparator viewBookmarkSeparator"
        ></div>
        <button
          title="Go to First Page"
          tabindex="56"
          data-l10n-id="first_page"
          data-dom-id="firstPage"
          class="secondaryToolbarButton firstPage"
        >
          <span data-l10n-id="first_page_label">Go to First Page</span></button
        ><button
          title="Go to Last Page"
          tabindex="57"
          data-l10n-id="last_page"
          data-dom-id="lastPage"
          class="secondaryToolbarButton lastPage"
        >
          <span data-l10n-id="last_page_label">Go to Last Page</span>
        </button>
        <div class="horizontalToolbarSeparator"></div>
        <button
          title="Rotate Clockwise"
          tabindex="58"
          data-l10n-id="page_rotate_cw"
          data-dom-id="pageRotateCw"
          class="secondaryToolbarButton pageRotateCw"
        >
          <span data-l10n-id="page_rotate_cw_label"
            >Rotate Clockwise</span
          ></button
        ><button
          title="Rotate Counterclockwise"
          tabindex="59"
          data-l10n-id="page_rotate_ccw"
          data-dom-id="pageRotateCcw"
          class="secondaryToolbarButton pageRotateCcw"
        >
          <span data-l10n-id="page_rotate_ccw_label"
            >Rotate Counterclockwise</span
          >
        </button>
        <div class="horizontalToolbarSeparator"></div>
        <div
          role="radiogroup"
          data-dom-id="cursorToolButtons"
          class="cursorToolButtons"
        >
          <button
            title="Enable Text Selection Tool"
            tabindex="60"
            data-l10n-id="cursor_text_select_tool"
            role="radio"
            aria-checked="true"
            data-dom-id="cursorSelectTool"
            class="secondaryToolbarButton toggled cursorSelectTool"
          >
            <span data-l10n-id="cursor_text_select_tool_label"
              >Text Selection Tool</span
            ></button
          ><button
            title="Enable Hand Tool"
            tabindex="61"
            data-l10n-id="cursor_hand_tool"
            role="radio"
            aria-checked="false"
            data-dom-id="cursorHandTool"
            class="secondaryToolbarButton cursorHandTool"
          >
            <span data-l10n-id="cursor_hand_tool_label">Hand Tool</span>
          </button>
        </div>
        <div class="horizontalToolbarSeparator"></div>
        <div
          role="radiogroup"
          data-dom-id="scrollModeButtons"
          class="scrollModeButtons"
        >
          <button
            title="Use Page Scrolling"
            tabindex="62"
            data-l10n-id="scroll_page"
            role="radio"
            aria-checked="false"
            data-dom-id="scrollPage"
            class="secondaryToolbarButton scrollPage"
          >
            <span data-l10n-id="scroll_page_label">Page Scrolling</span></button
          ><button
            title="Use Vertical Scrolling"
            tabindex="63"
            data-l10n-id="scroll_vertical"
            role="radio"
            aria-checked="true"
            data-dom-id="scrollVertical"
            class="secondaryToolbarButton toggled scrollVertical"
          >
            <span data-l10n-id="scroll_vertical_label"
              >Vertical Scrolling</span
            ></button
          ><button
            title="Use Horizontal Scrolling"
            tabindex="64"
            data-l10n-id="scroll_horizontal"
            role="radio"
            aria-checked="false"
            data-dom-id="scrollHorizontal"
            class="secondaryToolbarButton scrollHorizontal"
          >
            <span data-l10n-id="scroll_horizontal_label"
              >Horizontal Scrolling</span
            ></button
          ><button
            title="Use Wrapped Scrolling"
            tabindex="65"
            data-l10n-id="scroll_wrapped"
            role="radio"
            aria-checked="false"
            data-dom-id="scrollWrapped"
            class="secondaryToolbarButton scrollWrapped"
          >
            <span data-l10n-id="scroll_wrapped_label">Wrapped Scrolling</span>
          </button>
        </div>
        <div class="horizontalToolbarSeparator"></div>
        <div
          role="radiogroup"
          data-dom-id="spreadModeButtons"
          class="spreadModeButtons"
        >
          <button
            title="Do not join page spreads"
            tabindex="66"
            data-l10n-id="spread_none"
            role="radio"
            aria-checked="true"
            data-dom-id="spreadNone"
            class="secondaryToolbarButton toggled spreadNone"
          >
            <span data-l10n-id="spread_none_label">No Spreads</span></button
          ><button
            title="Join page spreads starting with odd-numbered pages"
            tabindex="67"
            data-l10n-id="spread_odd"
            role="radio"
            aria-checked="false"
            data-dom-id="spreadOdd"
            class="secondaryToolbarButton spreadOdd"
          >
            <span data-l10n-id="spread_odd_label">Odd Spreads</span></button
          ><button
            title="Join page spreads starting with even-numbered pages"
            tabindex="68"
            data-l10n-id="spread_even"
            role="radio"
            aria-checked="false"
            data-dom-id="spreadEven"
            class="secondaryToolbarButton spreadEven"
          >
            <span data-l10n-id="spread_even_label">Even Spreads</span>
          </button>
        </div>
        <div class="horizontalToolbarSeparator"></div>
        <button
          title="Document Properties…"
          tabindex="69"
          data-l10n-id="document_properties"
          aria-controls="documentPropertiesDialog"
          data-dom-id="documentProperties"
          class="secondaryToolbarButton documentProperties"
        >
          <span data-l10n-id="document_properties_label"
            >Document Properties…</span
          >
        </button>
      </div>
    </div>
    <!-- secondaryToolbar -->
    <div class="toolbar">
      <div data-dom-id="toolbarContainer" class="toolbarContainer">
        <div data-dom-id="toolbarViewer" class="toolbarViewer">
          <div data-dom-id="toolbarViewerLeft" class="toolbarViewerLeft">
            <button
              title="Toggle Sidebar"
              tabindex="11"
              data-l10n-id="toggle_sidebar"
              aria-expanded="false"
              aria-controls="sidebarContainer"
              data-dom-id="sidebarToggle"
              class="toolbarButton sidebarToggle"
            >
              <span data-l10n-id="toggle_sidebar_label">Toggle Sidebar</span>
            </button>
            <div class="toolbarButtonSpacer"></div>
            <button
              title="Find in Document"
              tabindex="12"
              data-l10n-id="findbar"
              aria-expanded="false"
              aria-controls="findbar"
              data-dom-id="viewFind"
              class="toolbarButton viewFind"
            >
              <span data-l10n-id="findbar_label">Find</span>
            </button>
            <div class="splitToolbarButton hiddenSmallView">
              <button
                title="Previous Page"
                tabindex="13"
                data-l10n-id="previous"
                data-dom-id="previous"
                class="toolbarButton previous"
              >
                <span data-l10n-id="previous_label">Previous</span>
              </button>
              <div class="splitToolbarButtonSeparator"></div>
              <button
                title="Next Page"
                tabindex="14"
                data-l10n-id="next"
                data-dom-id="next"
                class="toolbarButton next"
              >
                <span data-l10n-id="next_label">Next</span>
              </button>
            </div>
            <input
              type="number"
              title="Page"
              value="1"
              min="1"
              tabindex="15"
              data-l10n-id="page"
              autocomplete="off"
              data-dom-id="pageNumber"
              class="toolbarField pageNumber"
            /><span data-dom-id="numPages" class="toolbarLabel numPages"></span>
          </div>
          <div data-dom-id="toolbarViewerRight" class="toolbarViewerRight">
            <!--#if GENERIC--><button
              title="Open File"
              tabindex="31"
              data-l10n-id="open_file"
              data-dom-id="openFile"
              class="toolbarButton hiddenLargeView openFile"
            >
              <span data-l10n-id="open_file_label">Open</span></button
            ><!--#endif--><button
              title="Print"
              tabindex="32"
              data-l10n-id="print"
              data-dom-id="print"
              class="toolbarButton hiddenMediumView print"
            >
              <span data-l10n-id="print_label">Print</span></button
            ><button
              title="Save"
              tabindex="33"
              data-l10n-id="save"
              data-dom-id="download"
              class="toolbarButton hiddenMediumView download"
            >
              <span data-l10n-id="save_label">Save</span>
            </button>
            <div class="verticalToolbarSeparator hiddenMediumView"></div>
            <div
              role="radiogroup"
              data-dom-id="editorModeButtons"
              class="splitToolbarButton toggled editorModeButtons"
            >
              <button
                disabled="disabled"
                title="Text"
                role="radio"
                aria-checked="false"
                aria-controls="editorFreeTextParamsToolbar"
                tabindex="34"
                data-l10n-id="editor_free_text2"
                data-dom-id="editorFreeText"
                class="toolbarButton editorFreeText"
              >
                <span data-l10n-id="editor_free_text2_label">Text</span></button
              ><button
                disabled="disabled"
                title="Draw"
                role="radio"
                aria-checked="false"
                aria-controls="editorInkParamsToolbar"
                tabindex="35"
                data-l10n-id="editor_ink2"
                data-dom-id="editorInk"
                class="toolbarButton editorInk"
              >
                <span data-l10n-id="editor_ink2_label">Draw</span></button
              ><button
                disabled="disabled"
                title="Add or edit images"
                role="radio"
                aria-checked="false"
                aria-controls="editorStampParamsToolbar"
                tabindex="36"
                data-l10n-id="editor_stamp1"
                data-dom-id="editorStamp"
                class="toolbarButton hidden editorStamp"
              >
                <span data-l10n-id="editor_stamp1_label"
                  >Add or edit images</span
                >
              </button>
            </div>
            <div
              data-dom-id="editorModeSeparator"
              class="verticalToolbarSeparator editorModeSeparator"
            ></div>
            <button
              title="Tools"
              tabindex="48"
              data-l10n-id="tools"
              aria-expanded="false"
              aria-controls="secondaryToolbar"
              data-dom-id="secondaryToolbarToggle"
              class="toolbarButton secondaryToolbarToggle"
            >
              <span data-l10n-id="tools_label">Tools</span>
            </button>
          </div>
          <div data-dom-id="toolbarViewerMiddle" class="toolbarViewerMiddle">
            <div class="splitToolbarButton">
              <button
                title="Zoom Out"
                tabindex="21"
                data-l10n-id="zoom_out"
                data-dom-id="zoomOut"
                class="toolbarButton zoomOut"
              >
                <span data-l10n-id="zoom_out_label">Zoom Out</span>
              </button>
              <div class="splitToolbarButtonSeparator"></div>
              <button
                title="Zoom In"
                tabindex="22"
                data-l10n-id="zoom_in"
                data-dom-id="zoomIn"
                class="toolbarButton zoomIn"
              >
                <span data-l10n-id="zoom_in_label">Zoom In</span>
              </button>
            </div>
            <span
              data-dom-id="scaleSelectContainer"
              class="dropdownToolbarButton scaleSelectContainer"
              ><select
                title="Zoom"
                tabindex="23"
                data-l10n-id="zoom"
                data-dom-id="scaleSelect"
                class="scaleSelect"
              >
                <option
                  id="pageAutoOption"
                  title=""
                  value="auto"
                  selected="selected"
                  data-l10n-id="page_scale_auto"
                >
                  Automatic Zoom
                </option>
                <option
                  id="pageActualOption"
                  title=""
                  value="page-actual"
                  data-l10n-id="page_scale_actual"
                >
                  Actual Size
                </option>
                <option
                  id="pageFitOption"
                  title=""
                  value="page-fit"
                  data-l10n-id="page_scale_fit"
                >
                  Page Fit
                </option>
                <option
                  id="pageWidthOption"
                  title=""
                  value="page-width"
                  data-l10n-id="page_scale_width"
                >
                  Page Width
                </option>
                <option
                  id="customScaleOption"
                  title=""
                  value="custom"
                  disabled="disabled"
                  hidden="true"
                ></option>
                <option
                  title=""
                  value="0.5"
                  data-l10n-id="page_scale_percent"
                  data-l10n-args='{ "scale": 50 }'
                >
                  50%
                </option>
                <option
                  title=""
                  value="0.75"
                  data-l10n-id="page_scale_percent"
                  data-l10n-args='{ "scale": 75 }'
                >
                  75%
                </option>
                <option
                  title=""
                  value="1"
                  data-l10n-id="page_scale_percent"
                  data-l10n-args='{ "scale": 100 }'
                >
                  100%
                </option>
                <option
                  title=""
                  value="1.25"
                  data-l10n-id="page_scale_percent"
                  data-l10n-args='{ "scale": 125 }'
                >
                  125%
                </option>
                <option
                  title=""
                  value="1.5"
                  data-l10n-id="page_scale_percent"
                  data-l10n-args='{ "scale": 150 }'
                >
                  150%
                </option>
                <option
                  title=""
                  value="2"
                  data-l10n-id="page_scale_percent"
                  data-l10n-args='{ "scale": 200 }'
                >
                  200%
                </option>
                <option
                  title=""
                  value="3"
                  data-l10n-id="page_scale_percent"
                  data-l10n-args='{ "scale": 300 }'
                >
                  300%
                </option>
                <option
                  title=""
                  value="4"
                  data-l10n-id="page_scale_percent"
                  data-l10n-args='{ "scale": 400 }'
                >
                  400%
                </option>
              </select></span
            >
          </div>
        </div>
        <div data-dom-id="loadingBar" class="loadingBar">
          <div class="progress"><div class="glimmer"></div></div>
        </div>
      </div>
    </div>
    <div tabindex="0" data-dom-id="viewerContainer" class="viewerContainer">
      <div data-dom-id="viewer" class="pdfViewer viewer"></div>
    </div>
  </div>
  <!-- mainContainer -->
  <div data-dom-id="dialogContainer" class="dialogContainer">
    <dialog data-dom-id="passwordDialog" class="passwordDialog">
      <div class="row"><!--Removed!--></div>
      <div class="row">
        <input
          type="password"
          data-dom-id="password"
          class="toolbarField password"
        />
      </div>
      <div class="buttonRow">
        <button
          data-dom-id="passwordCancel"
          class="dialogButton passwordCancel"
        >
          <span data-l10n-id="password_cancel">Cancel</span></button
        ><button
          data-dom-id="passwordSubmit"
          class="dialogButton passwordSubmit"
        >
          <span data-l10n-id="password_ok">OK</span>
        </button>
      </div>
    </dialog>
    <dialog
      data-dom-id="documentPropertiesDialog"
      class="documentPropertiesDialog"
    >
      <div class="row">
        <span
          data-l10n-id="document_properties_file_name"
          data-dom-id="fileNameLabel"
          class="fileNameLabel"
          >File name:</span
        >
        <p
          aria-labelledby="fileNameLabel"
          data-dom-id="fileNameField"
          class="fileNameField"
        >
          -
        </p>
      </div>
      <div class="row">
        <span
          data-l10n-id="document_properties_file_size"
          data-dom-id="fileSizeLabel"
          class="fileSizeLabel"
          >File size:</span
        >
        <p
          aria-labelledby="fileSizeLabel"
          data-dom-id="fileSizeField"
          class="fileSizeField"
        >
          -
        </p>
      </div>
      <div class="separator"></div>
      <div class="row">
        <span
          data-l10n-id="document_properties_title"
          data-dom-id="titleLabel"
          class="titleLabel"
          >Title:</span
        >
        <p
          aria-labelledby="titleLabel"
          data-dom-id="titleField"
          class="titleField"
        >
          -
        </p>
      </div>
      <div class="row">
        <span
          data-l10n-id="document_properties_author"
          data-dom-id="authorLabel"
          class="authorLabel"
          >Author:</span
        >
        <p
          aria-labelledby="authorLabel"
          data-dom-id="authorField"
          class="authorField"
        >
          -
        </p>
      </div>
      <div class="row">
        <span
          data-l10n-id="document_properties_subject"
          data-dom-id="subjectLabel"
          class="subjectLabel"
          >Subject:</span
        >
        <p
          aria-labelledby="subjectLabel"
          data-dom-id="subjectField"
          class="subjectField"
        >
          -
        </p>
      </div>
      <div class="row">
        <span
          data-l10n-id="document_properties_keywords"
          data-dom-id="keywordsLabel"
          class="keywordsLabel"
          >Keywords:</span
        >
        <p
          aria-labelledby="keywordsLabel"
          data-dom-id="keywordsField"
          class="keywordsField"
        >
          -
        </p>
      </div>
      <div class="row">
        <span
          data-l10n-id="document_properties_creation_date"
          data-dom-id="creationDateLabel"
          class="creationDateLabel"
          >Creation Date:</span
        >
        <p
          aria-labelledby="creationDateLabel"
          data-dom-id="creationDateField"
          class="creationDateField"
        >
          -
        </p>
      </div>
      <div class="row">
        <span
          data-l10n-id="document_properties_modification_date"
          data-dom-id="modificationDateLabel"
          class="modificationDateLabel"
          >Modification Date:</span
        >
        <p
          aria-labelledby="modificationDateLabel"
          data-dom-id="modificationDateField"
          class="modificationDateField"
        >
          -
        </p>
      </div>
      <div class="row">
        <span
          data-l10n-id="document_properties_creator"
          data-dom-id="creatorLabel"
          class="creatorLabel"
          >Creator:</span
        >
        <p
          aria-labelledby="creatorLabel"
          data-dom-id="creatorField"
          class="creatorField"
        >
          -
        </p>
      </div>
      <div class="separator"></div>
      <div class="row">
        <span
          data-l10n-id="document_properties_producer"
          data-dom-id="producerLabel"
          class="producerLabel"
          >PDF Producer:</span
        >
        <p
          aria-labelledby="producerLabel"
          data-dom-id="producerField"
          class="producerField"
        >
          -
        </p>
      </div>
      <div class="row">
        <span
          data-l10n-id="document_properties_version"
          data-dom-id="versionLabel"
          class="versionLabel"
          >PDF Version:</span
        >
        <p
          aria-labelledby="versionLabel"
          data-dom-id="versionField"
          class="versionField"
        >
          -
        </p>
      </div>
      <div class="row">
        <span
          data-l10n-id="document_properties_page_count"
          data-dom-id="pageCountLabel"
          class="pageCountLabel"
          >Page Count:</span
        >
        <p
          aria-labelledby="pageCountLabel"
          data-dom-id="pageCountField"
          class="pageCountField"
        >
          -
        </p>
      </div>
      <div class="row">
        <span
          data-l10n-id="document_properties_page_size"
          data-dom-id="pageSizeLabel"
          class="pageSizeLabel"
          >Page Size:</span
        >
        <p
          aria-labelledby="pageSizeLabel"
          data-dom-id="pageSizeField"
          class="pageSizeField"
        >
          -
        </p>
      </div>
      <div class="separator"></div>
      <div class="row">
        <span
          data-l10n-id="document_properties_linearized"
          data-dom-id="linearizedLabel"
          class="linearizedLabel"
          >Fast Web View:</span
        >
        <p
          aria-labelledby="linearizedLabel"
          data-dom-id="linearizedField"
          class="linearizedField"
        >
          -
        </p>
      </div>
      <div class="buttonRow">
        <button
          data-dom-id="documentPropertiesClose"
          class="dialogButton documentPropertiesClose"
        >
          <span data-l10n-id="document_properties_close">Close</span>
        </button>
      </div>
    </dialog>
    <!--#if !MOZCENTRAL-->
    <dialog
      style="min-width: 200px"
      data-dom-id="printServiceDialog"
      class="printServiceDialog"
    >
      <div class="row">
        <span data-l10n-id="print_progress_message"
          >Preparing document for printing…</span
        >
      </div>
      <div class="row">
        <progress value="0" max="100"></progress
        ><span
          data-l10n-id="print_progress_percent"
          data-l10n-args='{ "progress": 0 }'
          class="relative-progress"
          >0%</span
        >
      </div>
      <div class="buttonRow">
        <button data-dom-id="printCancel" class="dialogButton printCancel">
          <span data-l10n-id="print_progress_close">Cancel</span>
        </button>
      </div>
    </dialog>
    <!--#endif--><!--#if CHROME--><!--#include viewer-snippet-chrome-overlays.html--><!--#endif-->
  </div>
  <!-- dialogContainer -->
</div>
<!-- outerContainer -->
<div data-dom-id="printContainer" class="printContainer"></div>
<!--#if GENERIC--><input
  type="file"
  data-dom-id="fileInput"
  class="hidden fileInput"
/><!--#endif-->
`;let a;function l(){if(!a){const y=document.createElement("template");y.innerHTML=P,a=y.content}return document.importNode(a,!0)}var T=l;A.default=T}],N={};function Z(ae){var A=N[ae];if(A!==void 0)return A.exports;var P=N[ae]={exports:{}};return Te[ae](P,P.exports,Z),P.exports}var Pe={};return(()=>{var P;var ae=Pe;Object.defineProperty(ae,"__esModule",{value:!0}),Object.defineProperty(ae,"createViewerApp",{enumerable:!0,get:function(){return A.createViewerApp}}),Object.defineProperty(ae,"getViewerConfiguration",{enumerable:!0,get:function(){return A.getViewerConfiguration}});var A=Z(1);(P=document.blockUnblockOnload)==null||P.call(document,!0)})(),Pe})())})(app);const viewer="",style="";let src="./document-viewer/web/compressed.tracemonkey-pldi-09.pdf";const appOptions={src,resourcePath:"document-viewer",disableCORSCheck:!0,disableAutoSetTitle:!0};appExports.createViewerApp({parent:document.getElementById("app1"),...appOptions});appExports.createViewerApp({parent:document.getElementById("app2"),...appOptions});
