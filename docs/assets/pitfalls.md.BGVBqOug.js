import{_ as e,c as t,o,a4 as r}from"./chunks/framework.C3uWxsa_.js";const f=JSON.parse('{"title":"Common Pitfalls of PDF.js","description":"","frontmatter":{"title":"Common Pitfalls of PDF.js","head":[["link",{"rel":"canonical","href":"https://priestch.github.io/document-viewer/docs/pitfalls.html"}]]},"headers":[],"relativePath":"pitfalls.md","filePath":"pitfalls.md","lastUpdated":1741269799000}'),a={name:"pitfalls.md"},i=r('<h1 id="common-pitfalls-when-integrate-pdf-js" tabindex="-1">Common Pitfalls When Integrate PDF.js <a class="header-anchor" href="#common-pitfalls-when-integrate-pdf-js" aria-label="Permalink to &quot;Common Pitfalls When Integrate PDF.js&quot;">​</a></h1><h3 id="api-version-mismatch-the-worker-version" tabindex="-1">API version mismatch the Worker version <a class="header-anchor" href="#api-version-mismatch-the-worker-version" aria-label="Permalink to &quot;API version mismatch the Worker version&quot;">​</a></h3><blockquote><p>The API version &quot;a.b.c&quot; does not match the Worker version &quot;x.y.z&quot;</p></blockquote><p><a href="https://github.com/mozilla/pdf.js/wiki/Frequently-Asked-Questions#reasons-for-the-error-the-api-version-abc-does-not-match-the-worker-version-xyz" target="_blank" rel="noreferrer">Reason for the Error</a></p><details><summary>Why such error?</summary><blockquote> PDF.js use a web worker architecture for better rendering performance. <p>A typical web application has only one bundle result, but PDF.js has two bundles, one for the viewer, one for the worker.</p><p>The versions of the two bundles must match to work properly. If the versions mismatch, it may work sometimes, but when it not, I think it&#39;s hard to figure such issues.</p><p>Although the explicit error may annoy developer at first, it does save your time from debugging such issues.</p></blockquote></details><h3 id="origin-not-match" tabindex="-1">Origin not match <a class="header-anchor" href="#origin-not-match" aria-label="Permalink to &quot;Origin not match&quot;">​</a></h3><blockquote><p>file origin does not match viewer&#39;s</p></blockquote><p><a href="https://github.com/mozilla/pdf.js/wiki/Frequently-Asked-Questions#can-i-load-a-pdf-from-another-server-cross-domain-request" target="_blank" rel="noreferrer">Reason for the Error</a></p><p>You can try to use the methods mentioned in the official FAQ to resolve the issue, or you can try the <a href="https://priestch.github.io/document-viewer" target="_blank" rel="noreferrer"><code>@document-kits/viewer</code></a>, it has a <code>disableCORSCheck</code> option to disable the CORS check for quick start. Be careful, you should not enable this option in production if you don&#39;t know what it means.</p><h3 id="top-level-await-is-not-available-in-the-configured-target-environment" tabindex="-1">Top-level await is not available in the configured target environment <a class="header-anchor" href="#top-level-await-is-not-available-in-the-configured-target-environment" aria-label="Permalink to &quot;Top-level await is not available in the configured target environment&quot;">​</a></h3><p>The reason for this error is that the source code of <code>pdf.js</code> contains <code>top-level await</code> statement, when used and bundled in a project, it may cause the error. As I commented in the issue <a href="https://github.com/mozilla/pdf.js/issues/17245#issuecomment-1918453195" target="_blank" rel="noreferrer">https://github.com/mozilla/pdf.js/issues/17245#issuecomment-1918453195</a>, it can be resolved add/modify related gulp task.</p><p>A good article about <code>top-level await</code> is <a href="https://github.com/orgs/web-infra-dev/discussions/9" target="_blank" rel="noreferrer">here</a>.</p>',12),s=[i];function n(l,h,c,d,m,u){return o(),t("div",null,s)}const b=e(a,[["render",n]]);export{f as __pageData,b as default};
