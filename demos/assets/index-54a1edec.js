var jE=Object.defineProperty;var HE=(n,c,f)=>c in n?jE(n,c,{enumerable:!0,configurable:!0,writable:!0,value:f}):n[c]=f;var ke=(n,c,f)=>(HE(n,typeof c!="symbol"?c+"":c,f),f),wg=(n,c,f)=>{if(!c.has(n))throw TypeError("Cannot "+f)};var a=(n,c,f)=>(wg(n,c,"read from private field"),f?f.call(n):c.get(n)),b=(n,c,f)=>{if(c.has(n))throw TypeError("Cannot add the same private member more than once");c instanceof WeakSet?c.add(n):c.set(n,f)},R=(n,c,f,p)=>(wg(n,c,"write to private field"),p?p.call(n,f):c.set(n,f),f);var wa=(n,c,f,p)=>({set _(E){R(n,c,E,f)},get _(){return a(n,c,p)}}),S=(n,c,f)=>(wg(n,c,"access private method"),f);(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const E of document.querySelectorAll('link[rel="modulepreload"]'))p(E);new MutationObserver(E=>{for(const P of E)if(P.type==="childList")for(const I of P.addedNodes)I.tagName==="LINK"&&I.rel==="modulepreload"&&p(I)}).observe(document,{childList:!0,subtree:!0});function f(E){const P={};return E.integrity&&(P.integrity=E.integrity),E.referrerPolicy&&(P.referrerPolicy=E.referrerPolicy),E.crossOrigin==="use-credentials"?P.credentials="include":E.crossOrigin==="anonymous"?P.credentials="omit":P.credentials="same-origin",P}function p(E){if(E.ep)return;E.ep=!0;const P=f(E);fetch(E.href,P)}})();/**
* @vue/shared v3.4.38
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Tb(n,c){const f=new Set(n.split(","));return c?p=>f.has(p.toLowerCase()):p=>f.has(p)}const hi={},pd=[],Cn=()=>{},UE=()=>!1,kp=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&(n.charCodeAt(2)>122||n.charCodeAt(2)<97),Lb=n=>n.startsWith("onUpdate:"),fs=Object.assign,Rb=(n,c)=>{const f=n.indexOf(c);f>-1&&n.splice(f,1)},zE=Object.prototype.hasOwnProperty,Bt=(n,c)=>zE.call(n,c),Et=Array.isArray,fu=n=>Op(n)==="[object Map]",WE=n=>Op(n)==="[object Set]",xt=n=>typeof n=="function",ts=n=>typeof n=="string",Ed=n=>typeof n=="symbol",xi=n=>n!==null&&typeof n=="object",Qv=n=>(xi(n)||xt(n))&&xt(n.then)&&xt(n.catch),$E=Object.prototype.toString,Op=n=>$E.call(n),qE=n=>Op(n).slice(8,-1),GE=n=>Op(n)==="[object Object]",Mb=n=>ts(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,pu=Tb(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Np=n=>{const c=Object.create(null);return f=>c[f]||(c[f]=n(f))},KE=/-(\w)/g,oc=Np(n=>n.replace(KE,(c,f)=>f?f.toUpperCase():"")),XE=/\B([A-Z])/g,cc=Np(n=>n.replace(XE,"-$1").toLowerCase()),Jv=Np(n=>n.charAt(0).toUpperCase()+n.slice(1)),_g=Np(n=>n?`on${Jv(n)}`:""),qo=(n,c)=>!Object.is(n,c),yg=(n,...c)=>{for(let f=0;f<n.length;f++)n[f](...c)},ew=(n,c,f,p=!1)=>{Object.defineProperty(n,c,{configurable:!0,enumerable:!1,writable:p,value:f})},YE=n=>{const c=parseFloat(n);return isNaN(c)?n:c};let rv;const tw=()=>rv||(rv=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Ib(n){if(Et(n)){const c={};for(let f=0;f<n.length;f++){const p=n[f],E=ts(p)?eS(p):Ib(p);if(E)for(const P in E)c[P]=E[P]}return c}else if(ts(n)||xi(n))return n}const ZE=/;(?![^(]*\))/g,QE=/:([^]+)/,JE=/\/\*[^]*?\*\//g;function eS(n){const c={};return n.replace(JE,"").split(ZE).forEach(f=>{if(f){const p=f.split(QE);p.length>1&&(c[p[0].trim()]=p[1].trim())}}),c}function gd(n){let c="";if(ts(n))c=n;else if(Et(n))for(let f=0;f<n.length;f++){const p=gd(n[f]);p&&(c+=p+" ")}else if(xi(n))for(const f in n)n[f]&&(c+=f+" ");return c.trim()}const tS="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",iS=Tb(tS);function iw(n){return!!n||n===""}/**
* @vue/reactivity v3.4.38
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ir;class sS{constructor(c=!1){this.detached=c,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Ir,!c&&Ir&&(this.index=(Ir.scopes||(Ir.scopes=[])).push(this)-1)}get active(){return this._active}run(c){if(this._active){const f=Ir;try{return Ir=this,c()}finally{Ir=f}}}on(){Ir=this}off(){Ir=this.parent}stop(c){if(this._active){let f,p;for(f=0,p=this.effects.length;f<p;f++)this.effects[f].stop();for(f=0,p=this.cleanups.length;f<p;f++)this.cleanups[f]();if(this.scopes)for(f=0,p=this.scopes.length;f<p;f++)this.scopes[f].stop(!0);if(!this.detached&&this.parent&&!c){const E=this.parent.scopes.pop();E&&E!==this&&(this.parent.scopes[this.index]=E,E.index=this.index)}this.parent=void 0,this._active=!1}}}function nS(n,c=Ir){c&&c.active&&c.effects.push(n)}function rS(){return Ir}let rc;class kb{constructor(c,f,p,E){this.fn=c,this.trigger=f,this.scheduler=p,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,nS(this,E)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,Go();for(let c=0;c<this._depsLength;c++){const f=this.deps[c];if(f.computed&&(aS(f.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),Ko()}return this._dirtyLevel>=4}set dirty(c){this._dirtyLevel=c?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let c=Wo,f=rc;try{return Wo=!0,rc=this,this._runnings++,av(this),this.fn()}finally{ov(this),this._runnings--,rc=f,Wo=c}}stop(){this.active&&(av(this),ov(this),this.onStop&&this.onStop(),this.active=!1)}}function aS(n){return n.value}function av(n){n._trackId++,n._depsLength=0}function ov(n){if(n.deps.length>n._depsLength){for(let c=n._depsLength;c<n.deps.length;c++)sw(n.deps[c],n);n.deps.length=n._depsLength}}function sw(n,c){const f=n.get(c);f!==void 0&&c._trackId!==f&&(n.delete(c),n.size===0&&n.cleanup())}let Wo=!0,Mg=0;const nw=[];function Go(){nw.push(Wo),Wo=!1}function Ko(){const n=nw.pop();Wo=n===void 0?!0:n}function Ob(){Mg++}function Nb(){for(Mg--;!Mg&&Ig.length;)Ig.shift()()}function rw(n,c,f){if(c.get(n)!==n._trackId){c.set(n,n._trackId);const p=n.deps[n._depsLength];p!==c?(p&&sw(p,n),n.deps[n._depsLength++]=c):n._depsLength++}}const Ig=[];function aw(n,c,f){Ob();for(const p of n.keys()){let E;p._dirtyLevel<c&&(E??(E=n.get(p)===p._trackId))&&(p._shouldSchedule||(p._shouldSchedule=p._dirtyLevel===0),p._dirtyLevel=c),p._shouldSchedule&&(E??(E=n.get(p)===p._trackId))&&(p.trigger(),(!p._runnings||p.allowRecurse)&&p._dirtyLevel!==2&&(p._shouldSchedule=!1,p.scheduler&&Ig.push(p.scheduler)))}Nb()}const ow=(n,c)=>{const f=new Map;return f.cleanup=n,f.computed=c,f},kg=new WeakMap,ac=Symbol(""),Og=Symbol("");function Zs(n,c,f){if(Wo&&rc){let p=kg.get(n);p||kg.set(n,p=new Map);let E=p.get(f);E||p.set(f,E=ow(()=>p.delete(f))),rw(rc,E)}}function ao(n,c,f,p,E,P){const I=kg.get(n);if(!I)return;let B=[];if(c==="clear")B=[...I.values()];else if(f==="length"&&Et(n)){const k=Number(p);I.forEach((y,C)=>{(C==="length"||!Ed(C)&&C>=k)&&B.push(y)})}else switch(f!==void 0&&B.push(I.get(f)),c){case"add":Et(n)?Mb(f)&&B.push(I.get("length")):(B.push(I.get(ac)),fu(n)&&B.push(I.get(Og)));break;case"delete":Et(n)||(B.push(I.get(ac)),fu(n)&&B.push(I.get(Og)));break;case"set":fu(n)&&B.push(I.get(ac));break}Ob();for(const k of B)k&&aw(k,4);Nb()}const oS=Tb("__proto__,__v_isRef,__isVue"),lw=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(Ed)),lv=lS();function lS(){const n={};return["includes","indexOf","lastIndexOf"].forEach(c=>{n[c]=function(...f){const p=Kt(this);for(let P=0,I=this.length;P<I;P++)Zs(p,"get",P+"");const E=p[c](...f);return E===-1||E===!1?p[c](...f.map(Kt)):E}}),["push","pop","shift","unshift","splice"].forEach(c=>{n[c]=function(...f){Go(),Ob();const p=Kt(this)[c].apply(this,f);return Nb(),Ko(),p}}),n}function cS(n){Ed(n)||(n=String(n));const c=Kt(this);return Zs(c,"has",n),c.hasOwnProperty(n)}class cw{constructor(c=!1,f=!1){this._isReadonly=c,this._isShallow=f}get(c,f,p){const E=this._isReadonly,P=this._isShallow;if(f==="__v_isReactive")return!E;if(f==="__v_isReadonly")return E;if(f==="__v_isShallow")return P;if(f==="__v_raw")return p===(E?P?ES:fw:P?uw:hw).get(c)||Object.getPrototypeOf(c)===Object.getPrototypeOf(p)?c:void 0;const I=Et(c);if(!E){if(I&&Bt(lv,f))return Reflect.get(lv,f,p);if(f==="hasOwnProperty")return cS}const B=Reflect.get(c,f,p);return(Ed(f)?lw.has(f):oS(f))||(E||Zs(c,"get",f),P)?B:Qs(B)?I&&Mb(f)?B:B.value:xi(B)?E?gw(B):Dp(B):B}}class dw extends cw{constructor(c=!1){super(!1,c)}set(c,f,p,E){let P=c[f];if(!this._isShallow){const k=lc(P);if(!vd(p)&&!lc(p)&&(P=Kt(P),p=Kt(p)),!Et(c)&&Qs(P)&&!Qs(p))return k?!1:(P.value=p,!0)}const I=Et(c)&&Mb(f)?Number(f)<c.length:Bt(c,f),B=Reflect.set(c,f,p,E);return c===Kt(E)&&(I?qo(p,P)&&ao(c,"set",f,p):ao(c,"add",f,p)),B}deleteProperty(c,f){const p=Bt(c,f);c[f];const E=Reflect.deleteProperty(c,f);return E&&p&&ao(c,"delete",f,void 0),E}has(c,f){const p=Reflect.has(c,f);return(!Ed(f)||!lw.has(f))&&Zs(c,"has",f),p}ownKeys(c){return Zs(c,"iterate",Et(c)?"length":ac),Reflect.ownKeys(c)}}class dS extends cw{constructor(c=!1){super(!0,c)}set(c,f){return!0}deleteProperty(c,f){return!0}}const hS=new dw,uS=new dS,fS=new dw(!0);const Fb=n=>n,Fp=n=>Reflect.getPrototypeOf(n);function Hf(n,c,f=!1,p=!1){n=n.__v_raw;const E=Kt(n),P=Kt(c);f||(qo(c,P)&&Zs(E,"get",c),Zs(E,"get",P));const{has:I}=Fp(E),B=p?Fb:f?Vb:_u;if(I.call(E,c))return B(n.get(c));if(I.call(E,P))return B(n.get(P));n!==E&&n.get(c)}function Uf(n,c=!1){const f=this.__v_raw,p=Kt(f),E=Kt(n);return c||(qo(n,E)&&Zs(p,"has",n),Zs(p,"has",E)),n===E?f.has(n):f.has(n)||f.has(E)}function zf(n,c=!1){return n=n.__v_raw,!c&&Zs(Kt(n),"iterate",ac),Reflect.get(n,"size",n)}function cv(n,c=!1){!c&&!vd(n)&&!lc(n)&&(n=Kt(n));const f=Kt(this);return Fp(f).has.call(f,n)||(f.add(n),ao(f,"add",n,n)),this}function dv(n,c,f=!1){!f&&!vd(c)&&!lc(c)&&(c=Kt(c));const p=Kt(this),{has:E,get:P}=Fp(p);let I=E.call(p,n);I||(n=Kt(n),I=E.call(p,n));const B=P.call(p,n);return p.set(n,c),I?qo(c,B)&&ao(p,"set",n,c):ao(p,"add",n,c),this}function hv(n){const c=Kt(this),{has:f,get:p}=Fp(c);let E=f.call(c,n);E||(n=Kt(n),E=f.call(c,n)),p&&p.call(c,n);const P=c.delete(n);return E&&ao(c,"delete",n,void 0),P}function uv(){const n=Kt(this),c=n.size!==0,f=n.clear();return c&&ao(n,"clear",void 0,void 0),f}function Wf(n,c){return function(p,E){const P=this,I=P.__v_raw,B=Kt(I),k=c?Fb:n?Vb:_u;return!n&&Zs(B,"iterate",ac),I.forEach((y,C)=>p.call(E,k(y),k(C),P))}}function $f(n,c,f){return function(...p){const E=this.__v_raw,P=Kt(E),I=fu(P),B=n==="entries"||n===Symbol.iterator&&I,k=n==="keys"&&I,y=E[n](...p),C=f?Fb:c?Vb:_u;return!c&&Zs(P,"iterate",k?Og:ac),{next(){const{value:U,done:X}=y.next();return X?{value:U,done:X}:{value:B?[C(U[0]),C(U[1])]:C(U),done:X}},[Symbol.iterator](){return this}}}}function Vo(n){return function(...c){return n==="delete"?!1:n==="clear"?void 0:this}}function pS(){const n={get(P){return Hf(this,P)},get size(){return zf(this)},has:Uf,add:cv,set:dv,delete:hv,clear:uv,forEach:Wf(!1,!1)},c={get(P){return Hf(this,P,!1,!0)},get size(){return zf(this)},has:Uf,add(P){return cv.call(this,P,!0)},set(P,I){return dv.call(this,P,I,!0)},delete:hv,clear:uv,forEach:Wf(!1,!0)},f={get(P){return Hf(this,P,!0)},get size(){return zf(this,!0)},has(P){return Uf.call(this,P,!0)},add:Vo("add"),set:Vo("set"),delete:Vo("delete"),clear:Vo("clear"),forEach:Wf(!0,!1)},p={get(P){return Hf(this,P,!0,!0)},get size(){return zf(this,!0)},has(P){return Uf.call(this,P,!0)},add:Vo("add"),set:Vo("set"),delete:Vo("delete"),clear:Vo("clear"),forEach:Wf(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(P=>{n[P]=$f(P,!1,!1),f[P]=$f(P,!0,!1),c[P]=$f(P,!1,!0),p[P]=$f(P,!0,!0)}),[n,f,c,p]}const[gS,mS,bS,vS]=pS();function Db(n,c){const f=c?n?vS:bS:n?mS:gS;return(p,E,P)=>E==="__v_isReactive"?!n:E==="__v_isReadonly"?n:E==="__v_raw"?p:Reflect.get(Bt(f,E)&&E in p?f:p,E,P)}const wS={get:Db(!1,!1)},_S={get:Db(!1,!0)},yS={get:Db(!0,!1)};const hw=new WeakMap,uw=new WeakMap,fw=new WeakMap,ES=new WeakMap;function SS(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function AS(n){return n.__v_skip||!Object.isExtensible(n)?0:SS(qE(n))}function Dp(n){return lc(n)?n:Bb(n,!1,hS,wS,hw)}function pw(n){return Bb(n,!1,fS,_S,uw)}function gw(n){return Bb(n,!0,uS,yS,fw)}function Bb(n,c,f,p,E){if(!xi(n)||n.__v_raw&&!(c&&n.__v_isReactive))return n;const P=E.get(n);if(P)return P;const I=AS(n);if(I===0)return n;const B=new Proxy(n,I===2?p:f);return E.set(n,B),B}function gu(n){return lc(n)?gu(n.__v_raw):!!(n&&n.__v_isReactive)}function lc(n){return!!(n&&n.__v_isReadonly)}function vd(n){return!!(n&&n.__v_isShallow)}function mw(n){return n?!!n.__v_raw:!1}function Kt(n){const c=n&&n.__v_raw;return c?Kt(c):n}function CS(n){return Object.isExtensible(n)&&ew(n,"__v_skip",!0),n}const _u=n=>xi(n)?Dp(n):n,Vb=n=>xi(n)?gw(n):n;class bw{constructor(c,f,p,E){this.getter=c,this._setter=f,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new kb(()=>c(this._value),()=>Kf(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!E,this.__v_isReadonly=p}get value(){const c=Kt(this);return(!c._cacheable||c.effect.dirty)&&qo(c._value,c._value=c.effect.run())&&Kf(c,4),vw(c),c.effect._dirtyLevel>=2&&Kf(c,2),c._value}set value(c){this._setter(c)}get _dirty(){return this.effect.dirty}set _dirty(c){this.effect.dirty=c}}function PS(n,c,f=!1){let p,E;const P=xt(n);return P?(p=n,E=Cn):(p=n.get,E=n.set),new bw(p,E,P||!E,f)}function vw(n){var c;Wo&&rc&&(n=Kt(n),rw(rc,(c=n.dep)!=null?c:n.dep=ow(()=>n.dep=void 0,n instanceof bw?n:void 0)))}function Kf(n,c=4,f,p){n=Kt(n);const E=n.dep;E&&aw(E,c)}function Qs(n){return!!(n&&n.__v_isRef===!0)}function yu(n){return ww(n,!1)}function jb(n){return ww(n,!0)}function ww(n,c){return Qs(n)?n:new xS(n,c)}class xS{constructor(c,f){this.__v_isShallow=f,this.dep=void 0,this.__v_isRef=!0,this._rawValue=f?c:Kt(c),this._value=f?c:_u(c)}get value(){return vw(this),this._value}set value(c){const f=this.__v_isShallow||vd(c)||lc(c);c=f?c:Kt(c),qo(c,this._rawValue)&&(this._rawValue,this._rawValue=c,this._value=f?c:_u(c),Kf(this,4))}}function An(n){return Qs(n)?n.value:n}const TS={get:(n,c,f)=>An(Reflect.get(n,c,f)),set:(n,c,f,p)=>{const E=n[c];return Qs(E)&&!Qs(f)?(E.value=f,!0):Reflect.set(n,c,f,p)}};function _w(n){return gu(n)?n:new Proxy(n,TS)}/**
* @vue/runtime-core v3.4.38
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function $o(n,c,f,p){try{return p?n(...p):n()}catch(E){Bp(E,c,f)}}function Or(n,c,f,p){if(xt(n)){const E=$o(n,c,f,p);return E&&Qv(E)&&E.catch(P=>{Bp(P,c,f)}),E}if(Et(n)){const E=[];for(let P=0;P<n.length;P++)E.push(Or(n[P],c,f,p));return E}}function Bp(n,c,f,p=!0){const E=c?c.vnode:null;if(c){let P=c.parent;const I=c.proxy,B=`https://vuejs.org/error-reference/#runtime-${f}`;for(;P;){const y=P.ec;if(y){for(let C=0;C<y.length;C++)if(y[C](n,I,B)===!1)return}P=P.parent}const k=c.appContext.config.errorHandler;if(k){Go(),$o(k,null,10,[n,I,B]),Ko();return}}LS(n,f,E,p)}function LS(n,c,f,p=!0){console.error(n)}let Eu=!1,Ng=!1;const us=[];let Sa=0;const md=[];let Ho=null,sc=0;const yw=Promise.resolve();let Hb=null;function Ew(n){const c=Hb||yw;return n?c.then(this?n.bind(this):n):c}function RS(n){let c=Sa+1,f=us.length;for(;c<f;){const p=c+f>>>1,E=us[p],P=Su(E);P<n||P===n&&E.pre?c=p+1:f=p}return c}function Ub(n){(!us.length||!us.includes(n,Eu&&n.allowRecurse?Sa+1:Sa))&&(n.id==null?us.push(n):us.splice(RS(n.id),0,n),Sw())}function Sw(){!Eu&&!Ng&&(Ng=!0,Hb=yw.then(Cw))}function MS(n){const c=us.indexOf(n);c>Sa&&us.splice(c,1)}function IS(n){Et(n)?md.push(...n):(!Ho||!Ho.includes(n,n.allowRecurse?sc+1:sc))&&md.push(n),Sw()}function fv(n,c,f=Eu?Sa+1:0){for(;f<us.length;f++){const p=us[f];if(p&&p.pre){if(n&&p.id!==n.uid)continue;us.splice(f,1),f--,p()}}}function Aw(n){if(md.length){const c=[...new Set(md)].sort((f,p)=>Su(f)-Su(p));if(md.length=0,Ho){Ho.push(...c);return}for(Ho=c,sc=0;sc<Ho.length;sc++){const f=Ho[sc];f.active!==!1&&f()}Ho=null,sc=0}}const Su=n=>n.id==null?1/0:n.id,kS=(n,c)=>{const f=Su(n)-Su(c);if(f===0){if(n.pre&&!c.pre)return-1;if(c.pre&&!n.pre)return 1}return f};function Cw(n){Ng=!1,Eu=!0,us.sort(kS);const c=Cn;try{for(Sa=0;Sa<us.length;Sa++){const f=us[Sa];f&&f.active!==!1&&$o(f,f.i,f.i?15:14)}}finally{Sa=0,us.length=0,Aw(),Eu=!1,Hb=null,(us.length||md.length)&&Cw()}}let Aa=null,Vp=null;function Lp(n){const c=Aa;return Aa=n,Vp=n&&n.type.__scopeId||null,c}function OS(n){Vp=n}function NS(){Vp=null}function Xf(n,c=Aa,f){if(!c||n._n)return n;const p=(...E)=>{p._d&&yv(-1);const P=Lp(c);let I;try{I=n(...E)}finally{Lp(P),p._d&&yv(1)}return I};return p._n=!0,p._c=!0,p._d=!0,p}function ec(n,c,f,p){const E=n.dirs,P=c&&c.dirs;for(let I=0;I<E.length;I++){const B=E[I];P&&(B.oldValue=P[I].value);let k=B.dir[p];k&&(Go(),Or(k,f,8,[n.el,B,n,c]),Ko())}}function Pw(n,c){n.shapeFlag&6&&n.component?Pw(n.component.subTree,c):n.shapeFlag&128?(n.ssContent.transition=c.clone(n.ssContent),n.ssFallback.transition=c.clone(n.ssFallback)):n.transition=c}/*! #__NO_SIDE_EFFECTS__ */function xw(n,c){return xt(n)?(()=>fs({name:n.name},c,{setup:n}))():n}const Yf=n=>!!n.type.__asyncLoader,Tw=n=>n.type.__isKeepAlive;function FS(n,c){Lw(n,"a",c)}function DS(n,c){Lw(n,"da",c)}function Lw(n,c,f=Ts){const p=n.__wdc||(n.__wdc=()=>{let E=f;for(;E;){if(E.isDeactivated)return;E=E.parent}return n()});if(jp(c,p,f),f){let E=f.parent;for(;E&&E.parent;)Tw(E.parent.vnode)&&BS(p,c,f,E),E=E.parent}}function BS(n,c,f,p){const E=jp(c,n,p,!0);Rw(()=>{Rb(p[c],E)},f)}function jp(n,c,f=Ts,p=!1){if(f){const E=f[n]||(f[n]=[]),P=c.__weh||(c.__weh=(...I)=>{Go();const B=Tu(f),k=Or(c,f,n,I);return B(),Ko(),k});return p?E.unshift(P):E.push(P),P}}const oo=n=>(c,f=Ts)=>{(!qp||n==="sp")&&jp(n,(...p)=>c(...p),f)},VS=oo("bm"),Hp=oo("m"),jS=oo("bu"),HS=oo("u"),US=oo("bum"),Rw=oo("um"),zS=oo("sp"),WS=oo("rtg"),$S=oo("rtc");function qS(n,c=Ts){jp("ec",n,c)}const GS=Symbol.for("v-ndc"),Fg=n=>n?Kw(n)?qb(n):Fg(n.parent):null,mu=fs(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>Fg(n.parent),$root:n=>Fg(n.root),$emit:n=>n.emit,$options:n=>zb(n),$forceUpdate:n=>n.f||(n.f=()=>{n.effect.dirty=!0,Ub(n.update)}),$nextTick:n=>n.n||(n.n=Ew.bind(n.proxy)),$watch:n=>m0.bind(n)}),Eg=(n,c)=>n!==hi&&!n.__isScriptSetup&&Bt(n,c),KS={get({_:n},c){if(c==="__v_skip")return!0;const{ctx:f,setupState:p,data:E,props:P,accessCache:I,type:B,appContext:k}=n;let y;if(c[0]!=="$"){const te=I[c];if(te!==void 0)switch(te){case 1:return p[c];case 2:return E[c];case 4:return f[c];case 3:return P[c]}else{if(Eg(p,c))return I[c]=1,p[c];if(E!==hi&&Bt(E,c))return I[c]=2,E[c];if((y=n.propsOptions[0])&&Bt(y,c))return I[c]=3,P[c];if(f!==hi&&Bt(f,c))return I[c]=4,f[c];Dg&&(I[c]=0)}}const C=mu[c];let U,X;if(C)return c==="$attrs"&&Zs(n.attrs,"get",""),C(n);if((U=B.__cssModules)&&(U=U[c]))return U;if(f!==hi&&Bt(f,c))return I[c]=4,f[c];if(X=k.config.globalProperties,Bt(X,c))return X[c]},set({_:n},c,f){const{data:p,setupState:E,ctx:P}=n;return Eg(E,c)?(E[c]=f,!0):p!==hi&&Bt(p,c)?(p[c]=f,!0):Bt(n.props,c)||c[0]==="$"&&c.slice(1)in n?!1:(P[c]=f,!0)},has({_:{data:n,setupState:c,accessCache:f,ctx:p,appContext:E,propsOptions:P}},I){let B;return!!f[I]||n!==hi&&Bt(n,I)||Eg(c,I)||(B=P[0])&&Bt(B,I)||Bt(p,I)||Bt(mu,I)||Bt(E.config.globalProperties,I)},defineProperty(n,c,f){return f.get!=null?n._.accessCache[c]=0:Bt(f,"value")&&this.set(n,c,f.value,null),Reflect.defineProperty(n,c,f)}};function pv(n){return Et(n)?n.reduce((c,f)=>(c[f]=null,c),{}):n}let Dg=!0;function XS(n){const c=zb(n),f=n.proxy,p=n.ctx;Dg=!1,c.beforeCreate&&gv(c.beforeCreate,n,"bc");const{data:E,computed:P,methods:I,watch:B,provide:k,inject:y,created:C,beforeMount:U,mounted:X,beforeUpdate:te,updated:Pe,activated:de,deactivated:Ve,beforeDestroy:Ae,beforeUnmount:ge,destroyed:xe,unmounted:ze,render:at,renderTracked:Z,renderTriggered:_e,errorCaptured:Le,serverPrefetch:tt,expose:Ce,inheritAttrs:De,components:Ge,directives:ct,filters:St}=c;if(y&&YS(y,p,null),I)for(const W in I){const ne=I[W];xt(ne)&&(p[W]=ne.bind(f))}if(E){const W=E.call(f,f);xi(W)&&(n.data=Dp(W))}if(Dg=!0,P)for(const W in P){const ne=P[W],Re=xt(ne)?ne.bind(f,f):xt(ne.get)?ne.get.bind(f,f):Cn,Ee=!xt(ne)&&xt(ne.set)?ne.set.bind(f):Cn,be=kr({get:Re,set:Ee});Object.defineProperty(p,W,{enumerable:!0,configurable:!0,get:()=>be.value,set:Je=>be.value=Je})}if(B)for(const W in B)Mw(B[W],p,f,W);if(k){const W=xt(k)?k.call(f):k;Reflect.ownKeys(W).forEach(ne=>{Zf(ne,W[ne])})}C&&gv(C,n,"c");function ce(W,ne){Et(ne)?ne.forEach(Re=>W(Re.bind(f))):ne&&W(ne.bind(f))}if(ce(VS,U),ce(Hp,X),ce(jS,te),ce(HS,Pe),ce(FS,de),ce(DS,Ve),ce(qS,Le),ce($S,Z),ce(WS,_e),ce(US,ge),ce(Rw,ze),ce(zS,tt),Et(Ce))if(Ce.length){const W=n.exposed||(n.exposed={});Ce.forEach(ne=>{Object.defineProperty(W,ne,{get:()=>f[ne],set:Re=>f[ne]=Re})})}else n.exposed||(n.exposed={});at&&n.render===Cn&&(n.render=at),De!=null&&(n.inheritAttrs=De),Ge&&(n.components=Ge),ct&&(n.directives=ct)}function YS(n,c,f=Cn){Et(n)&&(n=Bg(n));for(const p in n){const E=n[p];let P;xi(E)?"default"in E?P=Ca(E.from||p,E.default,!0):P=Ca(E.from||p):P=Ca(E),Qs(P)?Object.defineProperty(c,p,{enumerable:!0,configurable:!0,get:()=>P.value,set:I=>P.value=I}):c[p]=P}}function gv(n,c,f){Or(Et(n)?n.map(p=>p.bind(c.proxy)):n.bind(c.proxy),c,f)}function Mw(n,c,f,p){const E=p.includes(".")?$w(f,p):()=>f[p];if(ts(n)){const P=c[n];xt(P)&&Qf(E,P)}else if(xt(n))Qf(E,n.bind(f));else if(xi(n))if(Et(n))n.forEach(P=>Mw(P,c,f,p));else{const P=xt(n.handler)?n.handler.bind(f):c[n.handler];xt(P)&&Qf(E,P,n)}}function zb(n){const c=n.type,{mixins:f,extends:p}=c,{mixins:E,optionsCache:P,config:{optionMergeStrategies:I}}=n.appContext,B=P.get(c);let k;return B?k=B:!E.length&&!f&&!p?k=c:(k={},E.length&&E.forEach(y=>Rp(k,y,I,!0)),Rp(k,c,I)),xi(c)&&P.set(c,k),k}function Rp(n,c,f,p=!1){const{mixins:E,extends:P}=c;P&&Rp(n,P,f,!0),E&&E.forEach(I=>Rp(n,I,f,!0));for(const I in c)if(!(p&&I==="expose")){const B=ZS[I]||f&&f[I];n[I]=B?B(n[I],c[I]):c[I]}return n}const ZS={data:mv,props:bv,emits:bv,methods:Kh,computed:Kh,beforeCreate:xs,created:xs,beforeMount:xs,mounted:xs,beforeUpdate:xs,updated:xs,beforeDestroy:xs,beforeUnmount:xs,destroyed:xs,unmounted:xs,activated:xs,deactivated:xs,errorCaptured:xs,serverPrefetch:xs,components:Kh,directives:Kh,watch:JS,provide:mv,inject:QS};function mv(n,c){return c?n?function(){return fs(xt(n)?n.call(this,this):n,xt(c)?c.call(this,this):c)}:c:n}function QS(n,c){return Kh(Bg(n),Bg(c))}function Bg(n){if(Et(n)){const c={};for(let f=0;f<n.length;f++)c[n[f]]=n[f];return c}return n}function xs(n,c){return n?[...new Set([].concat(n,c))]:c}function Kh(n,c){return n?fs(Object.create(null),n,c):c}function bv(n,c){return n?Et(n)&&Et(c)?[...new Set([...n,...c])]:fs(Object.create(null),pv(n),pv(c??{})):c}function JS(n,c){if(!n)return c;if(!c)return n;const f=fs(Object.create(null),n);for(const p in c)f[p]=xs(n[p],c[p]);return f}function Iw(){return{app:null,config:{isNativeTag:UE,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let e0=0;function t0(n,c){return function(p,E=null){xt(p)||(p=fs({},p)),E!=null&&!xi(E)&&(E=null);const P=Iw(),I=new WeakSet;let B=!1;const k=P.app={_uid:e0++,_component:p,_props:E,_container:null,_context:P,_instance:null,version:B0,get config(){return P.config},set config(y){},use(y,...C){return I.has(y)||(y&&xt(y.install)?(I.add(y),y.install(k,...C)):xt(y)&&(I.add(y),y(k,...C))),k},mixin(y){return P.mixins.includes(y)||P.mixins.push(y),k},component(y,C){return C?(P.components[y]=C,k):P.components[y]},directive(y,C){return C?(P.directives[y]=C,k):P.directives[y]},mount(y,C,U){if(!B){const X=Ls(p,E);return X.appContext=P,U===!0?U="svg":U===!1&&(U=void 0),C&&c?c(X,y):n(X,y,U),B=!0,k._container=y,y.__vue_app__=k,qb(X.component)}},unmount(){B&&(n(null,k._container),delete k._container.__vue_app__)},provide(y,C){return P.provides[y]=C,k},runWithContext(y){const C=bd;bd=k;try{return y()}finally{bd=C}}};return k}}let bd=null;function Zf(n,c){if(Ts){let f=Ts.provides;const p=Ts.parent&&Ts.parent.provides;p===f&&(f=Ts.provides=Object.create(p)),f[n]=c}}function Ca(n,c,f=!1){const p=Ts||Aa;if(p||bd){const E=bd?bd._context.provides:p?p.parent==null?p.vnode.appContext&&p.vnode.appContext.provides:p.parent.provides:void 0;if(E&&n in E)return E[n];if(arguments.length>1)return f&&xt(c)?c.call(p&&p.proxy):c}}const kw={},Ow=()=>Object.create(kw),Nw=n=>Object.getPrototypeOf(n)===kw;function i0(n,c,f,p=!1){const E={},P=Ow();n.propsDefaults=Object.create(null),Fw(n,c,E,P);for(const I in n.propsOptions[0])I in E||(E[I]=void 0);f?n.props=p?E:pw(E):n.type.props?n.props=E:n.props=P,n.attrs=P}function s0(n,c,f,p){const{props:E,attrs:P,vnode:{patchFlag:I}}=n,B=Kt(E),[k]=n.propsOptions;let y=!1;if((p||I>0)&&!(I&16)){if(I&8){const C=n.vnode.dynamicProps;for(let U=0;U<C.length;U++){let X=C[U];if(Up(n.emitsOptions,X))continue;const te=c[X];if(k)if(Bt(P,X))te!==P[X]&&(P[X]=te,y=!0);else{const Pe=oc(X);E[Pe]=Vg(k,B,Pe,te,n,!1)}else te!==P[X]&&(P[X]=te,y=!0)}}}else{Fw(n,c,E,P)&&(y=!0);let C;for(const U in B)(!c||!Bt(c,U)&&((C=cc(U))===U||!Bt(c,C)))&&(k?f&&(f[U]!==void 0||f[C]!==void 0)&&(E[U]=Vg(k,B,U,void 0,n,!0)):delete E[U]);if(P!==B)for(const U in P)(!c||!Bt(c,U))&&(delete P[U],y=!0)}y&&ao(n.attrs,"set","")}function Fw(n,c,f,p){const[E,P]=n.propsOptions;let I=!1,B;if(c)for(let k in c){if(pu(k))continue;const y=c[k];let C;E&&Bt(E,C=oc(k))?!P||!P.includes(C)?f[C]=y:(B||(B={}))[C]=y:Up(n.emitsOptions,k)||(!(k in p)||y!==p[k])&&(p[k]=y,I=!0)}if(P){const k=Kt(f),y=B||hi;for(let C=0;C<P.length;C++){const U=P[C];f[U]=Vg(E,k,U,y[U],n,!Bt(y,U))}}return I}function Vg(n,c,f,p,E,P){const I=n[f];if(I!=null){const B=Bt(I,"default");if(B&&p===void 0){const k=I.default;if(I.type!==Function&&!I.skipFactory&&xt(k)){const{propsDefaults:y}=E;if(f in y)p=y[f];else{const C=Tu(E);p=y[f]=k.call(null,c),C()}}else p=k}I[0]&&(P&&!B?p=!1:I[1]&&(p===""||p===cc(f))&&(p=!0))}return p}const n0=new WeakMap;function Dw(n,c,f=!1){const p=f?n0:c.propsCache,E=p.get(n);if(E)return E;const P=n.props,I={},B=[];let k=!1;if(!xt(n)){const C=U=>{k=!0;const[X,te]=Dw(U,c,!0);fs(I,X),te&&B.push(...te)};!f&&c.mixins.length&&c.mixins.forEach(C),n.extends&&C(n.extends),n.mixins&&n.mixins.forEach(C)}if(!P&&!k)return xi(n)&&p.set(n,pd),pd;if(Et(P))for(let C=0;C<P.length;C++){const U=oc(P[C]);vv(U)&&(I[U]=hi)}else if(P)for(const C in P){const U=oc(C);if(vv(U)){const X=P[C],te=I[U]=Et(X)||xt(X)?{type:X}:fs({},X),Pe=te.type;let de=!1,Ve=!0;if(Et(Pe))for(let Ae=0;Ae<Pe.length;++Ae){const ge=Pe[Ae],xe=xt(ge)&&ge.name;if(xe==="Boolean"){de=!0;break}else xe==="String"&&(Ve=!1)}else de=xt(Pe)&&Pe.name==="Boolean";te[0]=de,te[1]=Ve,(de||Bt(te,"default"))&&B.push(U)}}const y=[I,B];return xi(n)&&p.set(n,y),y}function vv(n){return n[0]!=="$"&&!pu(n)}const Bw=n=>n[0]==="_"||n==="$stable",Wb=n=>Et(n)?n.map(Ea):[Ea(n)],r0=(n,c,f)=>{if(c._n)return c;const p=Xf((...E)=>Wb(c(...E)),f);return p._c=!1,p},Vw=(n,c,f)=>{const p=n._ctx;for(const E in n){if(Bw(E))continue;const P=n[E];if(xt(P))c[E]=r0(E,P,p);else if(P!=null){const I=Wb(P);c[E]=()=>I}}},jw=(n,c)=>{const f=Wb(c);n.slots.default=()=>f},Hw=(n,c,f)=>{for(const p in c)(f||p!=="_")&&(n[p]=c[p])},a0=(n,c,f)=>{const p=n.slots=Ow();if(n.vnode.shapeFlag&32){const E=c._;E?(Hw(p,c,f),f&&ew(p,"_",E,!0)):Vw(c,p)}else c&&jw(n,c)},o0=(n,c,f)=>{const{vnode:p,slots:E}=n;let P=!0,I=hi;if(p.shapeFlag&32){const B=c._;B?f&&B===1?P=!1:Hw(E,c,f):(P=!c.$stable,Vw(c,E)),I=c}else c&&(jw(n,c),I={default:1});if(P)for(const B in E)!Bw(B)&&I[B]==null&&delete E[B]};function jg(n,c,f,p,E=!1){if(Et(n)){n.forEach((X,te)=>jg(X,c&&(Et(c)?c[te]:c),f,p,E));return}if(Yf(p)&&!E)return;const P=p.shapeFlag&4?qb(p.component):p.el,I=E?null:P,{i:B,r:k}=n,y=c&&c.r,C=B.refs===hi?B.refs={}:B.refs,U=B.setupState;if(y!=null&&y!==k&&(ts(y)?(C[y]=null,Bt(U,y)&&(U[y]=null)):Qs(y)&&(y.value=null)),xt(k))$o(k,B,12,[I,C]);else{const X=ts(k),te=Qs(k);if(X||te){const Pe=()=>{if(n.f){const de=X?Bt(U,k)?U[k]:C[k]:k.value;E?Et(de)&&Rb(de,P):Et(de)?de.includes(P)||de.push(P):X?(C[k]=[P],Bt(U,k)&&(U[k]=C[k])):(k.value=[P],n.k&&(C[n.k]=k.value))}else X?(C[k]=I,Bt(U,k)&&(U[k]=I)):te&&(k.value=I,n.k&&(C[n.k]=I))};I?(Pe.id=-1,Ys(Pe,f)):Pe()}}}const l0=Symbol("_vte"),c0=n=>n.__isTeleport,Ys=A0;function d0(n){return h0(n)}function h0(n,c){const f=tw();f.__VUE__=!0;const{insert:p,remove:E,patchProp:P,createElement:I,createText:B,createComment:k,setText:y,setElementText:C,parentNode:U,nextSibling:X,setScopeId:te=Cn,insertStaticContent:Pe}=n,de=(V,j,se,fe=null,le=null,J=null,Oe=void 0,Me=null,me=!!j.dynamicChildren)=>{if(V===j)return;V&&!qh(V,j)&&(fe=oe(V),Je(V,le,J,!0),V=null),j.patchFlag===-2&&(me=!1,j.dynamicChildren=null);const{type:G,ref:ee,shapeFlag:Se}=j;switch(G){case zp:Ve(V,j,se,fe);break;case Au:Ae(V,j,se,fe);break;case Cg:V==null&&ge(j,se,fe,Oe);break;case ya:Ge(V,j,se,fe,le,J,Oe,Me,me);break;default:Se&1?at(V,j,se,fe,le,J,Oe,Me,me):Se&6?ct(V,j,se,fe,le,J,Oe,Me,me):(Se&64||Se&128)&&G.process(V,j,se,fe,le,J,Oe,Me,me,Ze)}ee!=null&&le&&jg(ee,V&&V.ref,J,j||V,!j)},Ve=(V,j,se,fe)=>{if(V==null)p(j.el=B(j.children),se,fe);else{const le=j.el=V.el;j.children!==V.children&&y(le,j.children)}},Ae=(V,j,se,fe)=>{V==null?p(j.el=k(j.children||""),se,fe):j.el=V.el},ge=(V,j,se,fe)=>{[V.el,V.anchor]=Pe(V.children,j,se,fe,V.el,V.anchor)},xe=({el:V,anchor:j},se,fe)=>{let le;for(;V&&V!==j;)le=X(V),p(V,se,fe),V=le;p(j,se,fe)},ze=({el:V,anchor:j})=>{let se;for(;V&&V!==j;)se=X(V),E(V),V=se;E(j)},at=(V,j,se,fe,le,J,Oe,Me,me)=>{j.type==="svg"?Oe="svg":j.type==="math"&&(Oe="mathml"),V==null?Z(j,se,fe,le,J,Oe,Me,me):tt(V,j,le,J,Oe,Me,me)},Z=(V,j,se,fe,le,J,Oe,Me)=>{let me,G;const{props:ee,shapeFlag:Se,transition:he,dirs:Y}=V;if(me=V.el=I(V.type,J,ee&&ee.is,ee),Se&8?C(me,V.children):Se&16&&Le(V.children,me,null,fe,le,Sg(V,J),Oe,Me),Y&&ec(V,null,fe,"created"),_e(me,V,V.scopeId,Oe,fe),ee){for(const Q in ee)Q!=="value"&&!pu(Q)&&P(me,Q,null,ee[Q],J,fe);"value"in ee&&P(me,"value",null,ee.value,J),(G=ee.onVnodeBeforeMount)&&_a(G,fe,V)}Y&&ec(V,null,fe,"beforeMount");const $=u0(le,he);$&&he.beforeEnter(me),p(me,j,se),((G=ee&&ee.onVnodeMounted)||$||Y)&&Ys(()=>{G&&_a(G,fe,V),$&&he.enter(me),Y&&ec(V,null,fe,"mounted")},le)},_e=(V,j,se,fe,le)=>{if(se&&te(V,se),fe)for(let J=0;J<fe.length;J++)te(V,fe[J]);if(le){let J=le.subTree;if(j===J){const Oe=le.vnode;_e(V,Oe,Oe.scopeId,Oe.slotScopeIds,le.parent)}}},Le=(V,j,se,fe,le,J,Oe,Me,me=0)=>{for(let G=me;G<V.length;G++){const ee=V[G]=Me?Uo(V[G]):Ea(V[G]);de(null,ee,j,se,fe,le,J,Oe,Me)}},tt=(V,j,se,fe,le,J,Oe)=>{const Me=j.el=V.el;let{patchFlag:me,dynamicChildren:G,dirs:ee}=j;me|=V.patchFlag&16;const Se=V.props||hi,he=j.props||hi;let Y;if(se&&tc(se,!1),(Y=he.onVnodeBeforeUpdate)&&_a(Y,se,j,V),ee&&ec(j,V,se,"beforeUpdate"),se&&tc(se,!0),(Se.innerHTML&&he.innerHTML==null||Se.textContent&&he.textContent==null)&&C(Me,""),G?Ce(V.dynamicChildren,G,Me,se,fe,Sg(j,le),J):Oe||ne(V,j,Me,null,se,fe,Sg(j,le),J,!1),me>0){if(me&16)De(Me,Se,he,se,le);else if(me&2&&Se.class!==he.class&&P(Me,"class",null,he.class,le),me&4&&P(Me,"style",Se.style,he.style,le),me&8){const $=j.dynamicProps;for(let Q=0;Q<$.length;Q++){const ye=$[Q],Ne=Se[ye],Qe=he[ye];(Qe!==Ne||ye==="value")&&P(Me,ye,Ne,Qe,le,se)}}me&1&&V.children!==j.children&&C(Me,j.children)}else!Oe&&G==null&&De(Me,Se,he,se,le);((Y=he.onVnodeUpdated)||ee)&&Ys(()=>{Y&&_a(Y,se,j,V),ee&&ec(j,V,se,"updated")},fe)},Ce=(V,j,se,fe,le,J,Oe)=>{for(let Me=0;Me<j.length;Me++){const me=V[Me],G=j[Me],ee=me.el&&(me.type===ya||!qh(me,G)||me.shapeFlag&70)?U(me.el):se;de(me,G,ee,null,fe,le,J,Oe,!0)}},De=(V,j,se,fe,le)=>{if(j!==se){if(j!==hi)for(const J in j)!pu(J)&&!(J in se)&&P(V,J,j[J],null,le,fe);for(const J in se){if(pu(J))continue;const Oe=se[J],Me=j[J];Oe!==Me&&J!=="value"&&P(V,J,Me,Oe,le,fe)}"value"in se&&P(V,"value",j.value,se.value,le)}},Ge=(V,j,se,fe,le,J,Oe,Me,me)=>{const G=j.el=V?V.el:B(""),ee=j.anchor=V?V.anchor:B("");let{patchFlag:Se,dynamicChildren:he,slotScopeIds:Y}=j;Y&&(Me=Me?Me.concat(Y):Y),V==null?(p(G,se,fe),p(ee,se,fe),Le(j.children||[],se,ee,le,J,Oe,Me,me)):Se>0&&Se&64&&he&&V.dynamicChildren?(Ce(V.dynamicChildren,he,se,le,J,Oe,Me),(j.key!=null||le&&j===le.subTree)&&Uw(V,j,!0)):ne(V,j,se,ee,le,J,Oe,Me,me)},ct=(V,j,se,fe,le,J,Oe,Me,me)=>{j.slotScopeIds=Me,V==null?j.shapeFlag&512?le.ctx.activate(j,se,fe,Oe,me):St(j,se,fe,le,J,Oe,me):Tt(V,j,me)},St=(V,j,se,fe,le,J,Oe)=>{const Me=V.component=I0(V,fe,le);if(Tw(V)&&(Me.ctx.renderer=Ze),k0(Me,!1,Oe),Me.asyncDep){if(le&&le.registerDep(Me,ce,Oe),!V.el){const me=Me.subTree=Ls(Au);Ae(null,me,j,se)}}else ce(Me,V,j,se,le,J,Oe)},Tt=(V,j,se)=>{const fe=j.component=V.component;if(y0(V,j,se))if(fe.asyncDep&&!fe.asyncResolved){W(fe,j,se);return}else fe.next=j,MS(fe.update),fe.effect.dirty=!0,fe.update();else j.el=V.el,fe.vnode=j},ce=(V,j,se,fe,le,J,Oe)=>{const Me=()=>{if(V.isMounted){let{next:ee,bu:Se,u:he,parent:Y,vnode:$}=V;{const Ot=zw(V);if(Ot){ee&&(ee.el=$.el,W(V,ee,Oe)),Ot.asyncDep.then(()=>{V.isUnmounted||Me()});return}}let Q=ee,ye;tc(V,!1),ee?(ee.el=$.el,W(V,ee,Oe)):ee=$,Se&&yg(Se),(ye=ee.props&&ee.props.onVnodeBeforeUpdate)&&_a(ye,Y,ee,$),tc(V,!0);const Ne=Ag(V),Qe=V.subTree;V.subTree=Ne,de(Qe,Ne,U(Qe.el),oe(Qe),V,le,J),ee.el=Ne.el,Q===null&&E0(V,Ne.el),he&&Ys(he,le),(ye=ee.props&&ee.props.onVnodeUpdated)&&Ys(()=>_a(ye,Y,ee,$),le)}else{let ee;const{el:Se,props:he}=j,{bm:Y,m:$,parent:Q}=V,ye=Yf(j);if(tc(V,!1),Y&&yg(Y),!ye&&(ee=he&&he.onVnodeBeforeMount)&&_a(ee,Q,j),tc(V,!0),Se&&Nt){const Ne=()=>{V.subTree=Ag(V),Nt(Se,V.subTree,V,le,null)};ye?j.type.__asyncLoader().then(()=>!V.isUnmounted&&Ne()):Ne()}else{const Ne=V.subTree=Ag(V);de(null,Ne,se,fe,V,le,J),j.el=Ne.el}if($&&Ys($,le),!ye&&(ee=he&&he.onVnodeMounted)){const Ne=j;Ys(()=>_a(ee,Q,Ne),le)}(j.shapeFlag&256||Q&&Yf(Q.vnode)&&Q.vnode.shapeFlag&256)&&V.a&&Ys(V.a,le),V.isMounted=!0,j=se=fe=null}},me=V.effect=new kb(Me,Cn,()=>Ub(G),V.scope),G=V.update=()=>{me.dirty&&me.run()};G.i=V,G.id=V.uid,tc(V,!0),G()},W=(V,j,se)=>{j.component=V;const fe=V.vnode.props;V.vnode=j,V.next=null,s0(V,j.props,fe,se),o0(V,j.children,se),Go(),fv(V),Ko()},ne=(V,j,se,fe,le,J,Oe,Me,me=!1)=>{const G=V&&V.children,ee=V?V.shapeFlag:0,Se=j.children,{patchFlag:he,shapeFlag:Y}=j;if(he>0){if(he&128){Ee(G,Se,se,fe,le,J,Oe,Me,me);return}else if(he&256){Re(G,Se,se,fe,le,J,Oe,Me,me);return}}Y&8?(ee&16&&_t(G,le,J),Se!==G&&C(se,Se)):ee&16?Y&16?Ee(G,Se,se,fe,le,J,Oe,Me,me):_t(G,le,J,!0):(ee&8&&C(se,""),Y&16&&Le(Se,se,fe,le,J,Oe,Me,me))},Re=(V,j,se,fe,le,J,Oe,Me,me)=>{V=V||pd,j=j||pd;const G=V.length,ee=j.length,Se=Math.min(G,ee);let he;for(he=0;he<Se;he++){const Y=j[he]=me?Uo(j[he]):Ea(j[he]);de(V[he],Y,se,null,le,J,Oe,Me,me)}G>ee?_t(V,le,J,!0,!1,Se):Le(j,se,fe,le,J,Oe,Me,me,Se)},Ee=(V,j,se,fe,le,J,Oe,Me,me)=>{let G=0;const ee=j.length;let Se=V.length-1,he=ee-1;for(;G<=Se&&G<=he;){const Y=V[G],$=j[G]=me?Uo(j[G]):Ea(j[G]);if(qh(Y,$))de(Y,$,se,null,le,J,Oe,Me,me);else break;G++}for(;G<=Se&&G<=he;){const Y=V[Se],$=j[he]=me?Uo(j[he]):Ea(j[he]);if(qh(Y,$))de(Y,$,se,null,le,J,Oe,Me,me);else break;Se--,he--}if(G>Se){if(G<=he){const Y=he+1,$=Y<ee?j[Y].el:fe;for(;G<=he;)de(null,j[G]=me?Uo(j[G]):Ea(j[G]),se,$,le,J,Oe,Me,me),G++}}else if(G>he)for(;G<=Se;)Je(V[G],le,J,!0),G++;else{const Y=G,$=G,Q=new Map;for(G=$;G<=he;G++){const zt=j[G]=me?Uo(j[G]):Ea(j[G]);zt.key!=null&&Q.set(zt.key,G)}let ye,Ne=0;const Qe=he-$+1;let Ot=!1,Xt=0;const is=new Array(Qe);for(G=0;G<Qe;G++)is[G]=0;for(G=Y;G<=Se;G++){const zt=V[G];if(Ne>=Qe){Je(zt,le,J,!0);continue}let oi;if(zt.key!=null)oi=Q.get(zt.key);else for(ye=$;ye<=he;ye++)if(is[ye-$]===0&&qh(zt,j[ye])){oi=ye;break}oi===void 0?Je(zt,le,J,!0):(is[oi-$]=G+1,oi>=Xt?Xt=oi:Ot=!0,de(zt,j[oi],se,null,le,J,Oe,Me,me),Ne++)}const Yn=Ot?f0(is):pd;for(ye=Yn.length-1,G=Qe-1;G>=0;G--){const zt=$+G,oi=j[zt],xn=zt+1<ee?j[zt+1].el:fe;is[G]===0?de(null,oi,se,xn,le,J,Oe,Me,me):Ot&&(ye<0||G!==Yn[ye]?be(oi,se,xn,2):ye--)}}},be=(V,j,se,fe,le=null)=>{const{el:J,type:Oe,transition:Me,children:me,shapeFlag:G}=V;if(G&6){be(V.component.subTree,j,se,fe);return}if(G&128){V.suspense.move(j,se,fe);return}if(G&64){Oe.move(V,j,se,Ze);return}if(Oe===ya){p(J,j,se);for(let Se=0;Se<me.length;Se++)be(me[Se],j,se,fe);p(V.anchor,j,se);return}if(Oe===Cg){xe(V,j,se);return}if(fe!==2&&G&1&&Me)if(fe===0)Me.beforeEnter(J),p(J,j,se),Ys(()=>Me.enter(J),le);else{const{leave:Se,delayLeave:he,afterLeave:Y}=Me,$=()=>p(J,j,se),Q=()=>{Se(J,()=>{$(),Y&&Y()})};he?he(J,$,Q):Q()}else p(J,j,se)},Je=(V,j,se,fe=!1,le=!1)=>{const{type:J,props:Oe,ref:Me,children:me,dynamicChildren:G,shapeFlag:ee,patchFlag:Se,dirs:he,cacheIndex:Y}=V;if(Se===-2&&(le=!1),Me!=null&&jg(Me,null,se,V,!0),Y!=null&&(j.renderCache[Y]=void 0),ee&256){j.ctx.deactivate(V);return}const $=ee&1&&he,Q=!Yf(V);let ye;if(Q&&(ye=Oe&&Oe.onVnodeBeforeUnmount)&&_a(ye,j,V),ee&6)Ct(V.component,se,fe);else{if(ee&128){V.suspense.unmount(se,fe);return}$&&ec(V,null,j,"beforeUnmount"),ee&64?V.type.remove(V,j,se,Ze,fe):G&&!G.hasOnce&&(J!==ya||Se>0&&Se&64)?_t(G,j,se,!1,!0):(J===ya&&Se&384||!le&&ee&16)&&_t(me,j,se),fe&&bt(V)}(Q&&(ye=Oe&&Oe.onVnodeUnmounted)||$)&&Ys(()=>{ye&&_a(ye,j,V),$&&ec(V,null,j,"unmounted")},se)},bt=V=>{const{type:j,el:se,anchor:fe,transition:le}=V;if(j===ya){dt(se,fe);return}if(j===Cg){ze(V);return}const J=()=>{E(se),le&&!le.persisted&&le.afterLeave&&le.afterLeave()};if(V.shapeFlag&1&&le&&!le.persisted){const{leave:Oe,delayLeave:Me}=le,me=()=>Oe(se,J);Me?Me(V.el,J,me):me()}else J()},dt=(V,j)=>{let se;for(;V!==j;)se=X(V),E(V),V=se;E(j)},Ct=(V,j,se)=>{const{bum:fe,scope:le,update:J,subTree:Oe,um:Me,m:me,a:G}=V;wv(me),wv(G),fe&&yg(fe),le.stop(),J&&(J.active=!1,Je(Oe,V,j,se)),Me&&Ys(Me,j),Ys(()=>{V.isUnmounted=!0},j),j&&j.pendingBranch&&!j.isUnmounted&&V.asyncDep&&!V.asyncResolved&&V.suspenseId===j.pendingId&&(j.deps--,j.deps===0&&j.resolve())},_t=(V,j,se,fe=!1,le=!1,J=0)=>{for(let Oe=J;Oe<V.length;Oe++)Je(V[Oe],j,se,fe,le)},oe=V=>{if(V.shapeFlag&6)return oe(V.component.subTree);if(V.shapeFlag&128)return V.suspense.next();const j=X(V.anchor||V.el),se=j&&j[l0];return se?X(se):j};let We=!1;const Fe=(V,j,se)=>{V==null?j._vnode&&Je(j._vnode,null,null,!0):de(j._vnode||null,V,j,null,null,null,se),j._vnode=V,We||(We=!0,fv(),Aw(),We=!1)},Ze={p:de,um:Je,m:be,r:bt,mt:St,mc:Le,pc:ne,pbc:Ce,n:oe,o:n};let gt,Nt;return c&&([gt,Nt]=c(Ze)),{render:Fe,hydrate:gt,createApp:t0(Fe,gt)}}function Sg({type:n,props:c},f){return f==="svg"&&n==="foreignObject"||f==="mathml"&&n==="annotation-xml"&&c&&c.encoding&&c.encoding.includes("html")?void 0:f}function tc({effect:n,update:c},f){n.allowRecurse=c.allowRecurse=f}function u0(n,c){return(!n||n&&!n.pendingBranch)&&c&&!c.persisted}function Uw(n,c,f=!1){const p=n.children,E=c.children;if(Et(p)&&Et(E))for(let P=0;P<p.length;P++){const I=p[P];let B=E[P];B.shapeFlag&1&&!B.dynamicChildren&&((B.patchFlag<=0||B.patchFlag===32)&&(B=E[P]=Uo(E[P]),B.el=I.el),!f&&B.patchFlag!==-2&&Uw(I,B)),B.type===zp&&(B.el=I.el)}}function f0(n){const c=n.slice(),f=[0];let p,E,P,I,B;const k=n.length;for(p=0;p<k;p++){const y=n[p];if(y!==0){if(E=f[f.length-1],n[E]<y){c[p]=E,f.push(p);continue}for(P=0,I=f.length-1;P<I;)B=P+I>>1,n[f[B]]<y?P=B+1:I=B;y<n[f[P]]&&(P>0&&(c[p]=f[P-1]),f[P]=p)}}for(P=f.length,I=f[P-1];P-- >0;)f[P]=I,I=c[I];return f}function zw(n){const c=n.subTree.component;if(c)return c.asyncDep&&!c.asyncResolved?c:zw(c)}function wv(n){if(n)for(let c=0;c<n.length;c++)n[c].active=!1}const p0=Symbol.for("v-scx"),g0=()=>Ca(p0),qf={};function Qf(n,c,f){return Ww(n,c,f)}function Ww(n,c,{immediate:f,deep:p,flush:E,once:P,onTrack:I,onTrigger:B}=hi){if(c&&P){const Z=c;c=(..._e)=>{Z(..._e),at()}}const k=Ts,y=Z=>p===!0?Z:nc(Z,p===!1?1:void 0);let C,U=!1,X=!1;if(Qs(n)?(C=()=>n.value,U=vd(n)):gu(n)?(C=()=>y(n),U=!0):Et(n)?(X=!0,U=n.some(Z=>gu(Z)||vd(Z)),C=()=>n.map(Z=>{if(Qs(Z))return Z.value;if(gu(Z))return y(Z);if(xt(Z))return $o(Z,k,2)})):xt(n)?c?C=()=>$o(n,k,2):C=()=>(te&&te(),Or(n,k,3,[Pe])):C=Cn,c&&p){const Z=C;C=()=>nc(Z())}let te,Pe=Z=>{te=xe.onStop=()=>{$o(Z,k,4),te=xe.onStop=void 0}},de;if(qp)if(Pe=Cn,c?f&&Or(c,k,3,[C(),X?[]:void 0,Pe]):C(),E==="sync"){const Z=g0();de=Z.__watcherHandles||(Z.__watcherHandles=[])}else return Cn;let Ve=X?new Array(n.length).fill(qf):qf;const Ae=()=>{if(!(!xe.active||!xe.dirty))if(c){const Z=xe.run();(p||U||(X?Z.some((_e,Le)=>qo(_e,Ve[Le])):qo(Z,Ve)))&&(te&&te(),Or(c,k,3,[Z,Ve===qf?void 0:X&&Ve[0]===qf?[]:Ve,Pe]),Ve=Z)}else xe.run()};Ae.allowRecurse=!!c;let ge;E==="sync"?ge=Ae:E==="post"?ge=()=>Ys(Ae,k&&k.suspense):(Ae.pre=!0,k&&(Ae.id=k.uid),ge=()=>Ub(Ae));const xe=new kb(C,Cn,ge),ze=rS(),at=()=>{xe.stop(),ze&&Rb(ze.effects,xe)};return c?f?Ae():Ve=xe.run():E==="post"?Ys(xe.run.bind(xe),k&&k.suspense):xe.run(),de&&de.push(at),at}function m0(n,c,f){const p=this.proxy,E=ts(n)?n.includes(".")?$w(p,n):()=>p[n]:n.bind(p,p);let P;xt(c)?P=c:(P=c.handler,f=c);const I=Tu(this),B=Ww(E,P.bind(p),f);return I(),B}function $w(n,c){const f=c.split(".");return()=>{let p=n;for(let E=0;E<f.length&&p;E++)p=p[f[E]];return p}}function nc(n,c=1/0,f){if(c<=0||!xi(n)||n.__v_skip||(f=f||new Set,f.has(n)))return n;if(f.add(n),c--,Qs(n))nc(n.value,c,f);else if(Et(n))for(let p=0;p<n.length;p++)nc(n[p],c,f);else if(WE(n)||fu(n))n.forEach(p=>{nc(p,c,f)});else if(GE(n)){for(const p in n)nc(n[p],c,f);for(const p of Object.getOwnPropertySymbols(n))Object.prototype.propertyIsEnumerable.call(n,p)&&nc(n[p],c,f)}return n}const b0=(n,c)=>c==="modelValue"||c==="model-value"?n.modelModifiers:n[`${c}Modifiers`]||n[`${oc(c)}Modifiers`]||n[`${cc(c)}Modifiers`];function v0(n,c,...f){if(n.isUnmounted)return;const p=n.vnode.props||hi;let E=f;const P=c.startsWith("update:"),I=P&&b0(p,c.slice(7));I&&(I.trim&&(E=f.map(C=>ts(C)?C.trim():C)),I.number&&(E=f.map(YE)));let B,k=p[B=_g(c)]||p[B=_g(oc(c))];!k&&P&&(k=p[B=_g(cc(c))]),k&&Or(k,n,6,E);const y=p[B+"Once"];if(y){if(!n.emitted)n.emitted={};else if(n.emitted[B])return;n.emitted[B]=!0,Or(y,n,6,E)}}function qw(n,c,f=!1){const p=c.emitsCache,E=p.get(n);if(E!==void 0)return E;const P=n.emits;let I={},B=!1;if(!xt(n)){const k=y=>{const C=qw(y,c,!0);C&&(B=!0,fs(I,C))};!f&&c.mixins.length&&c.mixins.forEach(k),n.extends&&k(n.extends),n.mixins&&n.mixins.forEach(k)}return!P&&!B?(xi(n)&&p.set(n,null),null):(Et(P)?P.forEach(k=>I[k]=null):fs(I,P),xi(n)&&p.set(n,I),I)}function Up(n,c){return!n||!kp(c)?!1:(c=c.slice(2).replace(/Once$/,""),Bt(n,c[0].toLowerCase()+c.slice(1))||Bt(n,cc(c))||Bt(n,c))}function Ag(n){const{type:c,vnode:f,proxy:p,withProxy:E,propsOptions:[P],slots:I,attrs:B,emit:k,render:y,renderCache:C,props:U,data:X,setupState:te,ctx:Pe,inheritAttrs:de}=n,Ve=Lp(n);let Ae,ge;try{if(f.shapeFlag&4){const ze=E||p,at=ze;Ae=Ea(y.call(at,ze,C,U,te,X,Pe)),ge=B}else{const ze=c;Ae=Ea(ze.length>1?ze(U,{attrs:B,slots:I,emit:k}):ze(U,null)),ge=c.props?B:w0(B)}}catch(ze){bu.length=0,Bp(ze,n,1),Ae=Ls(Au)}let xe=Ae;if(ge&&de!==!1){const ze=Object.keys(ge),{shapeFlag:at}=xe;ze.length&&at&7&&(P&&ze.some(Lb)&&(ge=_0(ge,P)),xe=wd(xe,ge,!1,!0))}return f.dirs&&(xe=wd(xe,null,!1,!0),xe.dirs=xe.dirs?xe.dirs.concat(f.dirs):f.dirs),f.transition&&(xe.transition=f.transition),Ae=xe,Lp(Ve),Ae}const w0=n=>{let c;for(const f in n)(f==="class"||f==="style"||kp(f))&&((c||(c={}))[f]=n[f]);return c},_0=(n,c)=>{const f={};for(const p in n)(!Lb(p)||!(p.slice(9)in c))&&(f[p]=n[p]);return f};function y0(n,c,f){const{props:p,children:E,component:P}=n,{props:I,children:B,patchFlag:k}=c,y=P.emitsOptions;if(c.dirs||c.transition)return!0;if(f&&k>=0){if(k&1024)return!0;if(k&16)return p?_v(p,I,y):!!I;if(k&8){const C=c.dynamicProps;for(let U=0;U<C.length;U++){const X=C[U];if(I[X]!==p[X]&&!Up(y,X))return!0}}}else return(E||B)&&(!B||!B.$stable)?!0:p===I?!1:p?I?_v(p,I,y):!0:!!I;return!1}function _v(n,c,f){const p=Object.keys(c);if(p.length!==Object.keys(n).length)return!0;for(let E=0;E<p.length;E++){const P=p[E];if(c[P]!==n[P]&&!Up(f,P))return!0}return!1}function E0({vnode:n,parent:c},f){for(;c;){const p=c.subTree;if(p.suspense&&p.suspense.activeBranch===n&&(p.el=n.el),p===n)(n=c.vnode).el=f,c=c.parent;else break}}const S0=n=>n.__isSuspense;function A0(n,c){c&&c.pendingBranch?Et(n)?c.effects.push(...n):c.effects.push(n):IS(n)}const ya=Symbol.for("v-fgt"),zp=Symbol.for("v-txt"),Au=Symbol.for("v-cmt"),Cg=Symbol.for("v-stc"),bu=[];let Pn=null;function Wp(n=!1){bu.push(Pn=n?null:[])}function C0(){bu.pop(),Pn=bu[bu.length-1]||null}let Cu=1;function yv(n){Cu+=n,n<0&&Pn&&(Pn.hasOnce=!0)}function P0(n){return n.dynamicChildren=Cu>0?Pn||pd:null,C0(),Cu>0&&Pn&&Pn.push(n),n}function $p(n,c,f,p,E,P){return P0(Pi(n,c,f,p,E,P,!0))}function Hg(n){return n?n.__v_isVNode===!0:!1}function qh(n,c){return n.type===c.type&&n.key===c.key}const Gw=({key:n})=>n??null,Jf=({ref:n,ref_key:c,ref_for:f})=>(typeof n=="number"&&(n=""+n),n!=null?ts(n)||Qs(n)||xt(n)?{i:Aa,r:n,k:c,f:!!f}:n:null);function Pi(n,c=null,f=null,p=0,E=null,P=n===ya?0:1,I=!1,B=!1){const k={__v_isVNode:!0,__v_skip:!0,type:n,props:c,key:c&&Gw(c),ref:c&&Jf(c),scopeId:Vp,slotScopeIds:null,children:f,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:P,patchFlag:p,dynamicProps:E,dynamicChildren:null,appContext:null,ctx:Aa};return B?($b(k,f),P&128&&n.normalize(k)):f&&(k.shapeFlag|=ts(f)?8:16),Cu>0&&!I&&Pn&&(k.patchFlag>0||P&6)&&k.patchFlag!==32&&Pn.push(k),k}const Ls=x0;function x0(n,c=null,f=null,p=0,E=null,P=!1){if((!n||n===GS)&&(n=Au),Hg(n)){const B=wd(n,c,!0);return f&&$b(B,f),Cu>0&&!P&&Pn&&(B.shapeFlag&6?Pn[Pn.indexOf(n)]=B:Pn.push(B)),B.patchFlag=-2,B}if(D0(n)&&(n=n.__vccOpts),c){c=T0(c);let{class:B,style:k}=c;B&&!ts(B)&&(c.class=gd(B)),xi(k)&&(mw(k)&&!Et(k)&&(k=fs({},k)),c.style=Ib(k))}const I=ts(n)?1:S0(n)?128:c0(n)?64:xi(n)?4:xt(n)?2:0;return Pi(n,c,f,p,E,I,P,!0)}function T0(n){return n?mw(n)||Nw(n)?fs({},n):n:null}function wd(n,c,f=!1,p=!1){const{props:E,ref:P,patchFlag:I,children:B,transition:k}=n,y=c?L0(E||{},c):E,C={__v_isVNode:!0,__v_skip:!0,type:n.type,props:y,key:y&&Gw(y),ref:c&&c.ref?f&&P?Et(P)?P.concat(Jf(c)):[P,Jf(c)]:Jf(c):P,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:B,target:n.target,targetStart:n.targetStart,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:c&&n.type!==ya?I===-1?16:I|16:I,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:k,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&wd(n.ssContent),ssFallback:n.ssFallback&&wd(n.ssFallback),el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce};return k&&p&&Pw(C,k.clone(C)),C}function ep(n=" ",c=0){return Ls(zp,null,n,c)}function Ea(n){return n==null||typeof n=="boolean"?Ls(Au):Et(n)?Ls(ya,null,n.slice()):typeof n=="object"?Uo(n):Ls(zp,null,String(n))}function Uo(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:wd(n)}function $b(n,c){let f=0;const{shapeFlag:p}=n;if(c==null)c=null;else if(Et(c))f=16;else if(typeof c=="object")if(p&65){const E=c.default;E&&(E._c&&(E._d=!1),$b(n,E()),E._c&&(E._d=!0));return}else{f=32;const E=c._;!E&&!Nw(c)?c._ctx=Aa:E===3&&Aa&&(Aa.slots._===1?c._=1:(c._=2,n.patchFlag|=1024))}else xt(c)?(c={default:c,_ctx:Aa},f=32):(c=String(c),p&64?(f=16,c=[ep(c)]):f=8);n.children=c,n.shapeFlag|=f}function L0(...n){const c={};for(let f=0;f<n.length;f++){const p=n[f];for(const E in p)if(E==="class")c.class!==p.class&&(c.class=gd([c.class,p.class]));else if(E==="style")c.style=Ib([c.style,p.style]);else if(kp(E)){const P=c[E],I=p[E];I&&P!==I&&!(Et(P)&&P.includes(I))&&(c[E]=P?[].concat(P,I):I)}else E!==""&&(c[E]=p[E])}return c}function _a(n,c,f,p=null){Or(n,c,7,[f,p])}const R0=Iw();let M0=0;function I0(n,c,f){const p=n.type,E=(c?c.appContext:n.appContext)||R0,P={uid:M0++,vnode:n,type:p,parent:c,appContext:E,root:null,next:null,subTree:null,effect:null,update:null,scope:new sS(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:c?c.provides:Object.create(E.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Dw(p,E),emitsOptions:qw(p,E),emit:null,emitted:null,propsDefaults:hi,inheritAttrs:p.inheritAttrs,ctx:hi,data:hi,props:hi,attrs:hi,slots:hi,refs:hi,setupState:hi,setupContext:null,suspense:f,suspenseId:f?f.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return P.ctx={_:P},P.root=c?c.root:P,P.emit=v0.bind(null,P),n.ce&&n.ce(P),P}let Ts=null,Mp,Ug;{const n=tw(),c=(f,p)=>{let E;return(E=n[f])||(E=n[f]=[]),E.push(p),P=>{E.length>1?E.forEach(I=>I(P)):E[0](P)}};Mp=c("__VUE_INSTANCE_SETTERS__",f=>Ts=f),Ug=c("__VUE_SSR_SETTERS__",f=>qp=f)}const Tu=n=>{const c=Ts;return Mp(n),n.scope.on(),()=>{n.scope.off(),Mp(c)}},Ev=()=>{Ts&&Ts.scope.off(),Mp(null)};function Kw(n){return n.vnode.shapeFlag&4}let qp=!1;function k0(n,c=!1,f=!1){c&&Ug(c);const{props:p,children:E}=n.vnode,P=Kw(n);i0(n,p,P,c),a0(n,E,f);const I=P?O0(n,c):void 0;return c&&Ug(!1),I}function O0(n,c){const f=n.type;n.accessCache=Object.create(null),n.proxy=new Proxy(n.ctx,KS);const{setup:p}=f;if(p){const E=n.setupContext=p.length>1?F0(n):null,P=Tu(n);Go();const I=$o(p,n,0,[n.props,E]);if(Ko(),P(),Qv(I)){if(I.then(Ev,Ev),c)return I.then(B=>{Sv(n,B,c)}).catch(B=>{Bp(B,n,0)});n.asyncDep=I}else Sv(n,I,c)}else Xw(n,c)}function Sv(n,c,f){xt(c)?n.type.__ssrInlineRender?n.ssrRender=c:n.render=c:xi(c)&&(n.setupState=_w(c)),Xw(n,f)}let Av;function Xw(n,c,f){const p=n.type;if(!n.render){if(!c&&Av&&!p.render){const E=p.template||zb(n).template;if(E){const{isCustomElement:P,compilerOptions:I}=n.appContext.config,{delimiters:B,compilerOptions:k}=p,y=fs(fs({isCustomElement:P,delimiters:B},I),k);p.render=Av(E,y)}}n.render=p.render||Cn}{const E=Tu(n);Go();try{XS(n)}finally{Ko(),E()}}}const N0={get(n,c){return Zs(n,"get",""),n[c]}};function F0(n){const c=f=>{n.exposed=f||{}};return{attrs:new Proxy(n.attrs,N0),slots:n.slots,emit:n.emit,expose:c}}function qb(n){return n.exposed?n.exposeProxy||(n.exposeProxy=new Proxy(_w(CS(n.exposed)),{get(c,f){if(f in c)return c[f];if(f in mu)return mu[f](n)},has(c,f){return f in c||f in mu}})):n.proxy}function D0(n){return xt(n)&&"__vccOpts"in n}const kr=(n,c)=>PS(n,c,qp);function Yw(n,c,f){const p=arguments.length;return p===2?xi(c)&&!Et(c)?Hg(c)?Ls(n,null,[c]):Ls(n,c):Ls(n,null,c):(p>3?f=Array.prototype.slice.call(arguments,2):p===3&&Hg(f)&&(f=[f]),Ls(n,c,f))}const B0="3.4.38";/**
* @vue/runtime-dom v3.4.38
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const V0="http://www.w3.org/2000/svg",j0="http://www.w3.org/1998/Math/MathML",ro=typeof document<"u"?document:null,Cv=ro&&ro.createElement("template"),H0={insert:(n,c,f)=>{c.insertBefore(n,f||null)},remove:n=>{const c=n.parentNode;c&&c.removeChild(n)},createElement:(n,c,f,p)=>{const E=c==="svg"?ro.createElementNS(V0,n):c==="mathml"?ro.createElementNS(j0,n):f?ro.createElement(n,{is:f}):ro.createElement(n);return n==="select"&&p&&p.multiple!=null&&E.setAttribute("multiple",p.multiple),E},createText:n=>ro.createTextNode(n),createComment:n=>ro.createComment(n),setText:(n,c)=>{n.nodeValue=c},setElementText:(n,c)=>{n.textContent=c},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>ro.querySelector(n),setScopeId(n,c){n.setAttribute(c,"")},insertStaticContent(n,c,f,p,E,P){const I=f?f.previousSibling:c.lastChild;if(E&&(E===P||E.nextSibling))for(;c.insertBefore(E.cloneNode(!0),f),!(E===P||!(E=E.nextSibling)););else{Cv.innerHTML=p==="svg"?`<svg>${n}</svg>`:p==="mathml"?`<math>${n}</math>`:n;const B=Cv.content;if(p==="svg"||p==="mathml"){const k=B.firstChild;for(;k.firstChild;)B.appendChild(k.firstChild);B.removeChild(k)}c.insertBefore(B,f)}return[I?I.nextSibling:c.firstChild,f?f.previousSibling:c.lastChild]}},U0=Symbol("_vtc");function z0(n,c,f){const p=n[U0];p&&(c=(c?[c,...p]:[...p]).join(" ")),c==null?n.removeAttribute("class"):f?n.setAttribute("class",c):n.className=c}const Pv=Symbol("_vod"),W0=Symbol("_vsh"),$0=Symbol(""),q0=/(^|;)\s*display\s*:/;function G0(n,c,f){const p=n.style,E=ts(f);let P=!1;if(f&&!E){if(c)if(ts(c))for(const I of c.split(";")){const B=I.slice(0,I.indexOf(":")).trim();f[B]==null&&tp(p,B,"")}else for(const I in c)f[I]==null&&tp(p,I,"");for(const I in f)I==="display"&&(P=!0),tp(p,I,f[I])}else if(E){if(c!==f){const I=p[$0];I&&(f+=";"+I),p.cssText=f,P=q0.test(f)}}else c&&n.removeAttribute("style");Pv in n&&(n[Pv]=P?p.display:"",n[W0]&&(p.display="none"))}const xv=/\s*!important$/;function tp(n,c,f){if(Et(f))f.forEach(p=>tp(n,c,p));else if(f==null&&(f=""),c.startsWith("--"))n.setProperty(c,f);else{const p=K0(n,c);xv.test(f)?n.setProperty(cc(p),f.replace(xv,""),"important"):n[p]=f}}const Tv=["Webkit","Moz","ms"],Pg={};function K0(n,c){const f=Pg[c];if(f)return f;let p=oc(c);if(p!=="filter"&&p in n)return Pg[c]=p;p=Jv(p);for(let E=0;E<Tv.length;E++){const P=Tv[E]+p;if(P in n)return Pg[c]=P}return c}const Lv="http://www.w3.org/1999/xlink";function Rv(n,c,f,p,E,P=iS(c)){p&&c.startsWith("xlink:")?f==null?n.removeAttributeNS(Lv,c.slice(6,c.length)):n.setAttributeNS(Lv,c,f):f==null||P&&!iw(f)?n.removeAttribute(c):n.setAttribute(c,P?"":Ed(f)?String(f):f)}function X0(n,c,f,p){if(c==="innerHTML"||c==="textContent"){if(f==null)return;n[c]=f;return}const E=n.tagName;if(c==="value"&&E!=="PROGRESS"&&!E.includes("-")){const I=E==="OPTION"?n.getAttribute("value")||"":n.value,B=f==null?"":String(f);(I!==B||!("_value"in n))&&(n.value=B),f==null&&n.removeAttribute(c),n._value=f;return}let P=!1;if(f===""||f==null){const I=typeof n[c];I==="boolean"?f=iw(f):f==null&&I==="string"?(f="",P=!0):I==="number"&&(f=0,P=!0)}try{n[c]=f}catch{}P&&n.removeAttribute(c)}function Y0(n,c,f,p){n.addEventListener(c,f,p)}function Z0(n,c,f,p){n.removeEventListener(c,f,p)}const Mv=Symbol("_vei");function Q0(n,c,f,p,E=null){const P=n[Mv]||(n[Mv]={}),I=P[c];if(p&&I)I.value=p;else{const[B,k]=J0(c);if(p){const y=P[c]=iA(p,E);Y0(n,B,y,k)}else I&&(Z0(n,B,I,k),P[c]=void 0)}}const Iv=/(?:Once|Passive|Capture)$/;function J0(n){let c;if(Iv.test(n)){c={};let p;for(;p=n.match(Iv);)n=n.slice(0,n.length-p[0].length),c[p[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):cc(n.slice(2)),c]}let xg=0;const eA=Promise.resolve(),tA=()=>xg||(eA.then(()=>xg=0),xg=Date.now());function iA(n,c){const f=p=>{if(!p._vts)p._vts=Date.now();else if(p._vts<=f.attached)return;Or(sA(p,f.value),c,5,[p])};return f.value=n,f.attached=tA(),f}function sA(n,c){if(Et(c)){const f=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{f.call(n),n._stopped=!0},c.map(p=>E=>!E._stopped&&p&&p(E))}else return c}const kv=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)>96&&n.charCodeAt(2)<123,nA=(n,c,f,p,E,P)=>{const I=E==="svg";c==="class"?z0(n,p,I):c==="style"?G0(n,f,p):kp(c)?Lb(c)||Q0(n,c,f,p,P):(c[0]==="."?(c=c.slice(1),!0):c[0]==="^"?(c=c.slice(1),!1):rA(n,c,p,I))?(X0(n,c,p),!n.tagName.includes("-")&&(c==="value"||c==="checked"||c==="selected")&&Rv(n,c,p,I,P,c!=="value")):(c==="true-value"?n._trueValue=p:c==="false-value"&&(n._falseValue=p),Rv(n,c,p,I))};function rA(n,c,f,p){if(p)return!!(c==="innerHTML"||c==="textContent"||c in n&&kv(c)&&xt(f));if(c==="spellcheck"||c==="draggable"||c==="translate"||c==="form"||c==="list"&&n.tagName==="INPUT"||c==="type"&&n.tagName==="TEXTAREA")return!1;if(c==="width"||c==="height"){const E=n.tagName;if(E==="IMG"||E==="VIDEO"||E==="CANVAS"||E==="SOURCE")return!1}return kv(c)&&ts(f)?!1:c in n}const aA=fs({patchProp:nA},H0);let Ov;function oA(){return Ov||(Ov=d0(aA))}const lA=(...n)=>{const c=oA().createApp(...n),{mount:f}=c;return c.mount=p=>{const E=dA(p);if(!E)return;const P=c._component;!xt(P)&&!P.render&&!P.template&&(P.template=E.innerHTML),E.innerHTML="";const I=f(E,!1,cA(E));return E instanceof Element&&(E.removeAttribute("v-cloak"),E.setAttribute("data-v-app","")),I},c};function cA(n){if(n instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&n instanceof MathMLElement)return"mathml"}function dA(n){return ts(n)?document.querySelector(n):n}/*!
  * vue-router v4.4.3
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const ad=typeof document<"u";function hA(n){return n.__esModule||n[Symbol.toStringTag]==="Module"}const Yt=Object.assign;function Tg(n,c){const f={};for(const p in c){const E=c[p];f[p]=Nr(E)?E.map(n):n(E)}return f}const vu=()=>{},Nr=Array.isArray,Zw=/#/g,uA=/&/g,fA=/\//g,pA=/=/g,gA=/\?/g,Qw=/\+/g,mA=/%5B/g,bA=/%5D/g,Jw=/%5E/g,vA=/%60/g,e_=/%7B/g,wA=/%7C/g,t_=/%7D/g,_A=/%20/g;function Gb(n){return encodeURI(""+n).replace(wA,"|").replace(mA,"[").replace(bA,"]")}function yA(n){return Gb(n).replace(e_,"{").replace(t_,"}").replace(Jw,"^")}function zg(n){return Gb(n).replace(Qw,"%2B").replace(_A,"+").replace(Zw,"%23").replace(uA,"%26").replace(vA,"`").replace(e_,"{").replace(t_,"}").replace(Jw,"^")}function EA(n){return zg(n).replace(pA,"%3D")}function SA(n){return Gb(n).replace(Zw,"%23").replace(gA,"%3F")}function AA(n){return n==null?"":SA(n).replace(fA,"%2F")}function Pu(n){try{return decodeURIComponent(""+n)}catch{}return""+n}const CA=/\/$/,PA=n=>n.replace(CA,"");function Lg(n,c,f="/"){let p,E={},P="",I="";const B=c.indexOf("#");let k=c.indexOf("?");return B<k&&B>=0&&(k=-1),k>-1&&(p=c.slice(0,k),P=c.slice(k+1,B>-1?B:c.length),E=n(P)),B>-1&&(p=p||c.slice(0,B),I=c.slice(B,c.length)),p=RA(p??c,f),{fullPath:p+(P&&"?")+P+I,path:p,query:E,hash:Pu(I)}}function xA(n,c){const f=c.query?n(c.query):"";return c.path+(f&&"?")+f+(c.hash||"")}function Nv(n,c){return!c||!n.toLowerCase().startsWith(c.toLowerCase())?n:n.slice(c.length)||"/"}function TA(n,c,f){const p=c.matched.length-1,E=f.matched.length-1;return p>-1&&p===E&&_d(c.matched[p],f.matched[E])&&i_(c.params,f.params)&&n(c.query)===n(f.query)&&c.hash===f.hash}function _d(n,c){return(n.aliasOf||n)===(c.aliasOf||c)}function i_(n,c){if(Object.keys(n).length!==Object.keys(c).length)return!1;for(const f in n)if(!LA(n[f],c[f]))return!1;return!0}function LA(n,c){return Nr(n)?Fv(n,c):Nr(c)?Fv(c,n):n===c}function Fv(n,c){return Nr(c)?n.length===c.length&&n.every((f,p)=>f===c[p]):n.length===1&&n[0]===c}function RA(n,c){if(n.startsWith("/"))return n;if(!n)return c;const f=c.split("/"),p=n.split("/"),E=p[p.length-1];(E===".."||E===".")&&p.push("");let P=f.length-1,I,B;for(I=0;I<p.length;I++)if(B=p[I],B!==".")if(B==="..")P>1&&P--;else break;return f.slice(0,P).join("/")+"/"+p.slice(I).join("/")}const jo={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var xu;(function(n){n.pop="pop",n.push="push"})(xu||(xu={}));var wu;(function(n){n.back="back",n.forward="forward",n.unknown=""})(wu||(wu={}));function MA(n){if(!n)if(ad){const c=document.querySelector("base");n=c&&c.getAttribute("href")||"/",n=n.replace(/^\w+:\/\/[^\/]+/,"")}else n="/";return n[0]!=="/"&&n[0]!=="#"&&(n="/"+n),PA(n)}const IA=/^[^#]+#/;function kA(n,c){return n.replace(IA,"#")+c}function OA(n,c){const f=document.documentElement.getBoundingClientRect(),p=n.getBoundingClientRect();return{behavior:c.behavior,left:p.left-f.left-(c.left||0),top:p.top-f.top-(c.top||0)}}const Gp=()=>({left:window.scrollX,top:window.scrollY});function NA(n){let c;if("el"in n){const f=n.el,p=typeof f=="string"&&f.startsWith("#"),E=typeof f=="string"?p?document.getElementById(f.slice(1)):document.querySelector(f):f;if(!E)return;c=OA(E,n)}else c=n;"scrollBehavior"in document.documentElement.style?window.scrollTo(c):window.scrollTo(c.left!=null?c.left:window.scrollX,c.top!=null?c.top:window.scrollY)}function Dv(n,c){return(history.state?history.state.position-c:-1)+n}const Wg=new Map;function FA(n,c){Wg.set(n,c)}function DA(n){const c=Wg.get(n);return Wg.delete(n),c}let BA=()=>location.protocol+"//"+location.host;function s_(n,c){const{pathname:f,search:p,hash:E}=c,P=n.indexOf("#");if(P>-1){let B=E.includes(n.slice(P))?n.slice(P).length:1,k=E.slice(B);return k[0]!=="/"&&(k="/"+k),Nv(k,"")}return Nv(f,n)+p+E}function VA(n,c,f,p){let E=[],P=[],I=null;const B=({state:X})=>{const te=s_(n,location),Pe=f.value,de=c.value;let Ve=0;if(X){if(f.value=te,c.value=X,I&&I===Pe){I=null;return}Ve=de?X.position-de.position:0}else p(te);E.forEach(Ae=>{Ae(f.value,Pe,{delta:Ve,type:xu.pop,direction:Ve?Ve>0?wu.forward:wu.back:wu.unknown})})};function k(){I=f.value}function y(X){E.push(X);const te=()=>{const Pe=E.indexOf(X);Pe>-1&&E.splice(Pe,1)};return P.push(te),te}function C(){const{history:X}=window;X.state&&X.replaceState(Yt({},X.state,{scroll:Gp()}),"")}function U(){for(const X of P)X();P=[],window.removeEventListener("popstate",B),window.removeEventListener("beforeunload",C)}return window.addEventListener("popstate",B),window.addEventListener("beforeunload",C,{passive:!0}),{pauseListeners:k,listen:y,destroy:U}}function Bv(n,c,f,p=!1,E=!1){return{back:n,current:c,forward:f,replaced:p,position:window.history.length,scroll:E?Gp():null}}function jA(n){const{history:c,location:f}=window,p={value:s_(n,f)},E={value:c.state};E.value||P(p.value,{back:null,current:p.value,forward:null,position:c.length-1,replaced:!0,scroll:null},!0);function P(k,y,C){const U=n.indexOf("#"),X=U>-1?(f.host&&document.querySelector("base")?n:n.slice(U))+k:BA()+n+k;try{c[C?"replaceState":"pushState"](y,"",X),E.value=y}catch(te){console.error(te),f[C?"replace":"assign"](X)}}function I(k,y){const C=Yt({},c.state,Bv(E.value.back,k,E.value.forward,!0),y,{position:E.value.position});P(k,C,!0),p.value=k}function B(k,y){const C=Yt({},E.value,c.state,{forward:k,scroll:Gp()});P(C.current,C,!0);const U=Yt({},Bv(p.value,k,null),{position:C.position+1},y);P(k,U,!1),p.value=k}return{location:p,state:E,push:B,replace:I}}function HA(n){n=MA(n);const c=jA(n),f=VA(n,c.state,c.location,c.replace);function p(P,I=!0){I||f.pauseListeners(),history.go(P)}const E=Yt({location:"",base:n,go:p,createHref:kA.bind(null,n)},c,f);return Object.defineProperty(E,"location",{enumerable:!0,get:()=>c.location.value}),Object.defineProperty(E,"state",{enumerable:!0,get:()=>c.state.value}),E}function UA(n){return n=location.host?n||location.pathname+location.search:"",n.includes("#")||(n+="#"),HA(n)}function zA(n){return typeof n=="string"||n&&typeof n=="object"}function n_(n){return typeof n=="string"||typeof n=="symbol"}const r_=Symbol("");var Vv;(function(n){n[n.aborted=4]="aborted",n[n.cancelled=8]="cancelled",n[n.duplicated=16]="duplicated"})(Vv||(Vv={}));function yd(n,c){return Yt(new Error,{type:n,[r_]:!0},c)}function io(n,c){return n instanceof Error&&r_ in n&&(c==null||!!(n.type&c))}const jv="[^/]+?",WA={sensitive:!1,strict:!1,start:!0,end:!0},$A=/[.+*?^${}()[\]/\\]/g;function qA(n,c){const f=Yt({},WA,c),p=[];let E=f.start?"^":"";const P=[];for(const y of n){const C=y.length?[]:[90];f.strict&&!y.length&&(E+="/");for(let U=0;U<y.length;U++){const X=y[U];let te=40+(f.sensitive?.25:0);if(X.type===0)U||(E+="/"),E+=X.value.replace($A,"\\$&"),te+=40;else if(X.type===1){const{value:Pe,repeatable:de,optional:Ve,regexp:Ae}=X;P.push({name:Pe,repeatable:de,optional:Ve});const ge=Ae||jv;if(ge!==jv){te+=10;try{new RegExp(`(${ge})`)}catch(ze){throw new Error(`Invalid custom RegExp for param "${Pe}" (${ge}): `+ze.message)}}let xe=de?`((?:${ge})(?:/(?:${ge}))*)`:`(${ge})`;U||(xe=Ve&&y.length<2?`(?:/${xe})`:"/"+xe),Ve&&(xe+="?"),E+=xe,te+=20,Ve&&(te+=-8),de&&(te+=-20),ge===".*"&&(te+=-50)}C.push(te)}p.push(C)}if(f.strict&&f.end){const y=p.length-1;p[y][p[y].length-1]+=.7000000000000001}f.strict||(E+="/?"),f.end?E+="$":f.strict&&(E+="(?:/|$)");const I=new RegExp(E,f.sensitive?"":"i");function B(y){const C=y.match(I),U={};if(!C)return null;for(let X=1;X<C.length;X++){const te=C[X]||"",Pe=P[X-1];U[Pe.name]=te&&Pe.repeatable?te.split("/"):te}return U}function k(y){let C="",U=!1;for(const X of n){(!U||!C.endsWith("/"))&&(C+="/"),U=!1;for(const te of X)if(te.type===0)C+=te.value;else if(te.type===1){const{value:Pe,repeatable:de,optional:Ve}=te,Ae=Pe in y?y[Pe]:"";if(Nr(Ae)&&!de)throw new Error(`Provided param "${Pe}" is an array but it is not repeatable (* or + modifiers)`);const ge=Nr(Ae)?Ae.join("/"):Ae;if(!ge)if(Ve)X.length<2&&(C.endsWith("/")?C=C.slice(0,-1):U=!0);else throw new Error(`Missing required param "${Pe}"`);C+=ge}}return C||"/"}return{re:I,score:p,keys:P,parse:B,stringify:k}}function GA(n,c){let f=0;for(;f<n.length&&f<c.length;){const p=c[f]-n[f];if(p)return p;f++}return n.length<c.length?n.length===1&&n[0]===40+40?-1:1:n.length>c.length?c.length===1&&c[0]===40+40?1:-1:0}function a_(n,c){let f=0;const p=n.score,E=c.score;for(;f<p.length&&f<E.length;){const P=GA(p[f],E[f]);if(P)return P;f++}if(Math.abs(E.length-p.length)===1){if(Hv(p))return 1;if(Hv(E))return-1}return E.length-p.length}function Hv(n){const c=n[n.length-1];return n.length>0&&c[c.length-1]<0}const KA={type:0,value:""},XA=/[a-zA-Z0-9_]/;function YA(n){if(!n)return[[]];if(n==="/")return[[KA]];if(!n.startsWith("/"))throw new Error(`Invalid path "${n}"`);function c(te){throw new Error(`ERR (${f})/"${y}": ${te}`)}let f=0,p=f;const E=[];let P;function I(){P&&E.push(P),P=[]}let B=0,k,y="",C="";function U(){y&&(f===0?P.push({type:0,value:y}):f===1||f===2||f===3?(P.length>1&&(k==="*"||k==="+")&&c(`A repeatable param (${y}) must be alone in its segment. eg: '/:ids+.`),P.push({type:1,value:y,regexp:C,repeatable:k==="*"||k==="+",optional:k==="*"||k==="?"})):c("Invalid state to consume buffer"),y="")}function X(){y+=k}for(;B<n.length;){if(k=n[B++],k==="\\"&&f!==2){p=f,f=4;continue}switch(f){case 0:k==="/"?(y&&U(),I()):k===":"?(U(),f=1):X();break;case 4:X(),f=p;break;case 1:k==="("?f=2:XA.test(k)?X():(U(),f=0,k!=="*"&&k!=="?"&&k!=="+"&&B--);break;case 2:k===")"?C[C.length-1]=="\\"?C=C.slice(0,-1)+k:f=3:C+=k;break;case 3:U(),f=0,k!=="*"&&k!=="?"&&k!=="+"&&B--,C="";break;default:c("Unknown state");break}}return f===2&&c(`Unfinished custom RegExp for param "${y}"`),U(),I(),E}function ZA(n,c,f){const p=qA(YA(n.path),f),E=Yt(p,{record:n,parent:c,children:[],alias:[]});return c&&!E.record.aliasOf==!c.record.aliasOf&&c.children.push(E),E}function QA(n,c){const f=[],p=new Map;c=Wv({strict:!1,end:!0,sensitive:!1},c);function E(U){return p.get(U)}function P(U,X,te){const Pe=!te,de=JA(U);de.aliasOf=te&&te.record;const Ve=Wv(c,U),Ae=[de];if("alias"in U){const ze=typeof U.alias=="string"?[U.alias]:U.alias;for(const at of ze)Ae.push(Yt({},de,{components:te?te.record.components:de.components,path:at,aliasOf:te?te.record:de}))}let ge,xe;for(const ze of Ae){const{path:at}=ze;if(X&&at[0]!=="/"){const Z=X.record.path,_e=Z[Z.length-1]==="/"?"":"/";ze.path=X.record.path+(at&&_e+at)}if(ge=ZA(ze,X,Ve),te?te.alias.push(ge):(xe=xe||ge,xe!==ge&&xe.alias.push(ge),Pe&&U.name&&!zv(ge)&&I(U.name)),o_(ge)&&k(ge),de.children){const Z=de.children;for(let _e=0;_e<Z.length;_e++)P(Z[_e],ge,te&&te.children[_e])}te=te||ge}return xe?()=>{I(xe)}:vu}function I(U){if(n_(U)){const X=p.get(U);X&&(p.delete(U),f.splice(f.indexOf(X),1),X.children.forEach(I),X.alias.forEach(I))}else{const X=f.indexOf(U);X>-1&&(f.splice(X,1),U.record.name&&p.delete(U.record.name),U.children.forEach(I),U.alias.forEach(I))}}function B(){return f}function k(U){const X=iC(U,f);f.splice(X,0,U),U.record.name&&!zv(U)&&p.set(U.record.name,U)}function y(U,X){let te,Pe={},de,Ve;if("name"in U&&U.name){if(te=p.get(U.name),!te)throw yd(1,{location:U});Ve=te.record.name,Pe=Yt(Uv(X.params,te.keys.filter(xe=>!xe.optional).concat(te.parent?te.parent.keys.filter(xe=>xe.optional):[]).map(xe=>xe.name)),U.params&&Uv(U.params,te.keys.map(xe=>xe.name))),de=te.stringify(Pe)}else if(U.path!=null)de=U.path,te=f.find(xe=>xe.re.test(de)),te&&(Pe=te.parse(de),Ve=te.record.name);else{if(te=X.name?p.get(X.name):f.find(xe=>xe.re.test(X.path)),!te)throw yd(1,{location:U,currentLocation:X});Ve=te.record.name,Pe=Yt({},X.params,U.params),de=te.stringify(Pe)}const Ae=[];let ge=te;for(;ge;)Ae.unshift(ge.record),ge=ge.parent;return{name:Ve,path:de,params:Pe,matched:Ae,meta:tC(Ae)}}n.forEach(U=>P(U));function C(){f.length=0,p.clear()}return{addRoute:P,resolve:y,removeRoute:I,clearRoutes:C,getRoutes:B,getRecordMatcher:E}}function Uv(n,c){const f={};for(const p of c)p in n&&(f[p]=n[p]);return f}function JA(n){return{path:n.path,redirect:n.redirect,name:n.name,meta:n.meta||{},aliasOf:void 0,beforeEnter:n.beforeEnter,props:eC(n),children:n.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in n?n.components||null:n.component&&{default:n.component}}}function eC(n){const c={},f=n.props||!1;if("component"in n)c.default=f;else for(const p in n.components)c[p]=typeof f=="object"?f[p]:f;return c}function zv(n){for(;n;){if(n.record.aliasOf)return!0;n=n.parent}return!1}function tC(n){return n.reduce((c,f)=>Yt(c,f.meta),{})}function Wv(n,c){const f={};for(const p in n)f[p]=p in c?c[p]:n[p];return f}function iC(n,c){let f=0,p=c.length;for(;f!==p;){const P=f+p>>1;a_(n,c[P])<0?p=P:f=P+1}const E=sC(n);return E&&(p=c.lastIndexOf(E,p-1)),p}function sC(n){let c=n;for(;c=c.parent;)if(o_(c)&&a_(n,c)===0)return c}function o_({record:n}){return!!(n.name||n.components&&Object.keys(n.components).length||n.redirect)}function nC(n){const c={};if(n===""||n==="?")return c;const p=(n[0]==="?"?n.slice(1):n).split("&");for(let E=0;E<p.length;++E){const P=p[E].replace(Qw," "),I=P.indexOf("="),B=Pu(I<0?P:P.slice(0,I)),k=I<0?null:Pu(P.slice(I+1));if(B in c){let y=c[B];Nr(y)||(y=c[B]=[y]),y.push(k)}else c[B]=k}return c}function $v(n){let c="";for(let f in n){const p=n[f];if(f=EA(f),p==null){p!==void 0&&(c+=(c.length?"&":"")+f);continue}(Nr(p)?p.map(P=>P&&zg(P)):[p&&zg(p)]).forEach(P=>{P!==void 0&&(c+=(c.length?"&":"")+f,P!=null&&(c+="="+P))})}return c}function rC(n){const c={};for(const f in n){const p=n[f];p!==void 0&&(c[f]=Nr(p)?p.map(E=>E==null?null:""+E):p==null?p:""+p)}return c}const aC=Symbol(""),qv=Symbol(""),Kb=Symbol(""),Xb=Symbol(""),$g=Symbol("");function Gh(){let n=[];function c(p){return n.push(p),()=>{const E=n.indexOf(p);E>-1&&n.splice(E,1)}}function f(){n=[]}return{add:c,list:()=>n.slice(),reset:f}}function zo(n,c,f,p,E,P=I=>I()){const I=p&&(p.enterCallbacks[E]=p.enterCallbacks[E]||[]);return()=>new Promise((B,k)=>{const y=X=>{X===!1?k(yd(4,{from:f,to:c})):X instanceof Error?k(X):zA(X)?k(yd(2,{from:c,to:X})):(I&&p.enterCallbacks[E]===I&&typeof X=="function"&&I.push(X),B())},C=P(()=>n.call(p&&p.instances[E],c,f,y));let U=Promise.resolve(C);n.length<3&&(U=U.then(y)),U.catch(X=>k(X))})}function Rg(n,c,f,p,E=P=>P()){const P=[];for(const I of n)for(const B in I.components){let k=I.components[B];if(!(c!=="beforeRouteEnter"&&!I.instances[B]))if(oC(k)){const C=(k.__vccOpts||k)[c];C&&P.push(zo(C,f,p,I,B,E))}else{let y=k();P.push(()=>y.then(C=>{if(!C)return Promise.reject(new Error(`Couldn't resolve component "${B}" at "${I.path}"`));const U=hA(C)?C.default:C;I.components[B]=U;const te=(U.__vccOpts||U)[c];return te&&zo(te,f,p,I,B,E)()}))}}return P}function oC(n){return typeof n=="object"||"displayName"in n||"props"in n||"__vccOpts"in n}function Gv(n){const c=Ca(Kb),f=Ca(Xb),p=kr(()=>{const k=An(n.to);return c.resolve(k)}),E=kr(()=>{const{matched:k}=p.value,{length:y}=k,C=k[y-1],U=f.matched;if(!C||!U.length)return-1;const X=U.findIndex(_d.bind(null,C));if(X>-1)return X;const te=Kv(k[y-2]);return y>1&&Kv(C)===te&&U[U.length-1].path!==te?U.findIndex(_d.bind(null,k[y-2])):X}),P=kr(()=>E.value>-1&&dC(f.params,p.value.params)),I=kr(()=>E.value>-1&&E.value===f.matched.length-1&&i_(f.params,p.value.params));function B(k={}){return cC(k)?c[An(n.replace)?"replace":"push"](An(n.to)).catch(vu):Promise.resolve()}return{route:p,href:kr(()=>p.value.href),isActive:P,isExactActive:I,navigate:B}}const lC=xw({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Gv,setup(n,{slots:c}){const f=Dp(Gv(n)),{options:p}=Ca(Kb),E=kr(()=>({[Xv(n.activeClass,p.linkActiveClass,"router-link-active")]:f.isActive,[Xv(n.exactActiveClass,p.linkExactActiveClass,"router-link-exact-active")]:f.isExactActive}));return()=>{const P=c.default&&c.default(f);return n.custom?P:Yw("a",{"aria-current":f.isExactActive?n.ariaCurrentValue:null,href:f.href,onClick:f.navigate,class:E.value},P)}}}),ip=lC;function cC(n){if(!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)&&!n.defaultPrevented&&!(n.button!==void 0&&n.button!==0)){if(n.currentTarget&&n.currentTarget.getAttribute){const c=n.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(c))return}return n.preventDefault&&n.preventDefault(),!0}}function dC(n,c){for(const f in c){const p=c[f],E=n[f];if(typeof p=="string"){if(p!==E)return!1}else if(!Nr(E)||E.length!==p.length||p.some((P,I)=>P!==E[I]))return!1}return!0}function Kv(n){return n?n.aliasOf?n.aliasOf.path:n.path:""}const Xv=(n,c,f)=>n??c??f,hC=xw({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(n,{attrs:c,slots:f}){const p=Ca($g),E=kr(()=>n.route||p.value),P=Ca(qv,0),I=kr(()=>{let y=An(P);const{matched:C}=E.value;let U;for(;(U=C[y])&&!U.components;)y++;return y}),B=kr(()=>E.value.matched[I.value]);Zf(qv,kr(()=>I.value+1)),Zf(aC,B),Zf($g,E);const k=yu();return Qf(()=>[k.value,B.value,n.name],([y,C,U],[X,te,Pe])=>{C&&(C.instances[U]=y,te&&te!==C&&y&&y===X&&(C.leaveGuards.size||(C.leaveGuards=te.leaveGuards),C.updateGuards.size||(C.updateGuards=te.updateGuards))),y&&C&&(!te||!_d(C,te)||!X)&&(C.enterCallbacks[U]||[]).forEach(de=>de(y))},{flush:"post"}),()=>{const y=E.value,C=n.name,U=B.value,X=U&&U.components[C];if(!X)return Yv(f.default,{Component:X,route:y});const te=U.props[C],Pe=te?te===!0?y.params:typeof te=="function"?te(y):te:null,Ve=Yw(X,Yt({},Pe,c,{onVnodeUnmounted:Ae=>{Ae.component.isUnmounted&&(U.instances[C]=null)},ref:k}));return Yv(f.default,{Component:Ve,route:y})||Ve}}});function Yv(n,c){if(!n)return null;const f=n(c);return f.length===1?f[0]:f}const l_=hC;function uC(n){const c=QA(n.routes,n),f=n.parseQuery||nC,p=n.stringifyQuery||$v,E=n.history,P=Gh(),I=Gh(),B=Gh(),k=jb(jo);let y=jo;ad&&n.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const C=Tg.bind(null,oe=>""+oe),U=Tg.bind(null,AA),X=Tg.bind(null,Pu);function te(oe,We){let Fe,Ze;return n_(oe)?(Fe=c.getRecordMatcher(oe),Ze=We):Ze=oe,c.addRoute(Ze,Fe)}function Pe(oe){const We=c.getRecordMatcher(oe);We&&c.removeRoute(We)}function de(){return c.getRoutes().map(oe=>oe.record)}function Ve(oe){return!!c.getRecordMatcher(oe)}function Ae(oe,We){if(We=Yt({},We||k.value),typeof oe=="string"){const j=Lg(f,oe,We.path),se=c.resolve({path:j.path},We),fe=E.createHref(j.fullPath);return Yt(j,se,{params:X(se.params),hash:Pu(j.hash),redirectedFrom:void 0,href:fe})}let Fe;if(oe.path!=null)Fe=Yt({},oe,{path:Lg(f,oe.path,We.path).path});else{const j=Yt({},oe.params);for(const se in j)j[se]==null&&delete j[se];Fe=Yt({},oe,{params:U(j)}),We.params=U(We.params)}const Ze=c.resolve(Fe,We),gt=oe.hash||"";Ze.params=C(X(Ze.params));const Nt=xA(p,Yt({},oe,{hash:yA(gt),path:Ze.path})),V=E.createHref(Nt);return Yt({fullPath:Nt,hash:gt,query:p===$v?rC(oe.query):oe.query||{}},Ze,{redirectedFrom:void 0,href:V})}function ge(oe){return typeof oe=="string"?Lg(f,oe,k.value.path):Yt({},oe)}function xe(oe,We){if(y!==oe)return yd(8,{from:We,to:oe})}function ze(oe){return _e(oe)}function at(oe){return ze(Yt(ge(oe),{replace:!0}))}function Z(oe){const We=oe.matched[oe.matched.length-1];if(We&&We.redirect){const{redirect:Fe}=We;let Ze=typeof Fe=="function"?Fe(oe):Fe;return typeof Ze=="string"&&(Ze=Ze.includes("?")||Ze.includes("#")?Ze=ge(Ze):{path:Ze},Ze.params={}),Yt({query:oe.query,hash:oe.hash,params:Ze.path!=null?{}:oe.params},Ze)}}function _e(oe,We){const Fe=y=Ae(oe),Ze=k.value,gt=oe.state,Nt=oe.force,V=oe.replace===!0,j=Z(Fe);if(j)return _e(Yt(ge(j),{state:typeof j=="object"?Yt({},gt,j.state):gt,force:Nt,replace:V}),We||Fe);const se=Fe;se.redirectedFrom=We;let fe;return!Nt&&TA(p,Ze,Fe)&&(fe=yd(16,{to:se,from:Ze}),be(Ze,Ze,!0,!1)),(fe?Promise.resolve(fe):Ce(se,Ze)).catch(le=>io(le)?io(le,2)?le:Ee(le):ne(le,se,Ze)).then(le=>{if(le){if(io(le,2))return _e(Yt({replace:V},ge(le.to),{state:typeof le.to=="object"?Yt({},gt,le.to.state):gt,force:Nt}),We||se)}else le=Ge(se,Ze,!0,V,gt);return De(se,Ze,le),le})}function Le(oe,We){const Fe=xe(oe,We);return Fe?Promise.reject(Fe):Promise.resolve()}function tt(oe){const We=dt.values().next().value;return We&&typeof We.runWithContext=="function"?We.runWithContext(oe):oe()}function Ce(oe,We){let Fe;const[Ze,gt,Nt]=fC(oe,We);Fe=Rg(Ze.reverse(),"beforeRouteLeave",oe,We);for(const j of Ze)j.leaveGuards.forEach(se=>{Fe.push(zo(se,oe,We))});const V=Le.bind(null,oe,We);return Fe.push(V),_t(Fe).then(()=>{Fe=[];for(const j of P.list())Fe.push(zo(j,oe,We));return Fe.push(V),_t(Fe)}).then(()=>{Fe=Rg(gt,"beforeRouteUpdate",oe,We);for(const j of gt)j.updateGuards.forEach(se=>{Fe.push(zo(se,oe,We))});return Fe.push(V),_t(Fe)}).then(()=>{Fe=[];for(const j of Nt)if(j.beforeEnter)if(Nr(j.beforeEnter))for(const se of j.beforeEnter)Fe.push(zo(se,oe,We));else Fe.push(zo(j.beforeEnter,oe,We));return Fe.push(V),_t(Fe)}).then(()=>(oe.matched.forEach(j=>j.enterCallbacks={}),Fe=Rg(Nt,"beforeRouteEnter",oe,We,tt),Fe.push(V),_t(Fe))).then(()=>{Fe=[];for(const j of I.list())Fe.push(zo(j,oe,We));return Fe.push(V),_t(Fe)}).catch(j=>io(j,8)?j:Promise.reject(j))}function De(oe,We,Fe){B.list().forEach(Ze=>tt(()=>Ze(oe,We,Fe)))}function Ge(oe,We,Fe,Ze,gt){const Nt=xe(oe,We);if(Nt)return Nt;const V=We===jo,j=ad?history.state:{};Fe&&(Ze||V?E.replace(oe.fullPath,Yt({scroll:V&&j&&j.scroll},gt)):E.push(oe.fullPath,gt)),k.value=oe,be(oe,We,Fe,V),Ee()}let ct;function St(){ct||(ct=E.listen((oe,We,Fe)=>{if(!Ct.listening)return;const Ze=Ae(oe),gt=Z(Ze);if(gt){_e(Yt(gt,{replace:!0}),Ze).catch(vu);return}y=Ze;const Nt=k.value;ad&&FA(Dv(Nt.fullPath,Fe.delta),Gp()),Ce(Ze,Nt).catch(V=>io(V,12)?V:io(V,2)?(_e(V.to,Ze).then(j=>{io(j,20)&&!Fe.delta&&Fe.type===xu.pop&&E.go(-1,!1)}).catch(vu),Promise.reject()):(Fe.delta&&E.go(-Fe.delta,!1),ne(V,Ze,Nt))).then(V=>{V=V||Ge(Ze,Nt,!1),V&&(Fe.delta&&!io(V,8)?E.go(-Fe.delta,!1):Fe.type===xu.pop&&io(V,20)&&E.go(-1,!1)),De(Ze,Nt,V)}).catch(vu)}))}let Tt=Gh(),ce=Gh(),W;function ne(oe,We,Fe){Ee(oe);const Ze=ce.list();return Ze.length?Ze.forEach(gt=>gt(oe,We,Fe)):console.error(oe),Promise.reject(oe)}function Re(){return W&&k.value!==jo?Promise.resolve():new Promise((oe,We)=>{Tt.add([oe,We])})}function Ee(oe){return W||(W=!oe,St(),Tt.list().forEach(([We,Fe])=>oe?Fe(oe):We()),Tt.reset()),oe}function be(oe,We,Fe,Ze){const{scrollBehavior:gt}=n;if(!ad||!gt)return Promise.resolve();const Nt=!Fe&&DA(Dv(oe.fullPath,0))||(Ze||!Fe)&&history.state&&history.state.scroll||null;return Ew().then(()=>gt(oe,We,Nt)).then(V=>V&&NA(V)).catch(V=>ne(V,oe,We))}const Je=oe=>E.go(oe);let bt;const dt=new Set,Ct={currentRoute:k,listening:!0,addRoute:te,removeRoute:Pe,clearRoutes:c.clearRoutes,hasRoute:Ve,getRoutes:de,resolve:Ae,options:n,push:ze,replace:at,go:Je,back:()=>Je(-1),forward:()=>Je(1),beforeEach:P.add,beforeResolve:I.add,afterEach:B.add,onError:ce.add,isReady:Re,install(oe){const We=this;oe.component("RouterLink",ip),oe.component("RouterView",l_),oe.config.globalProperties.$router=We,Object.defineProperty(oe.config.globalProperties,"$route",{enumerable:!0,get:()=>An(k)}),ad&&!bt&&k.value===jo&&(bt=!0,ze(E.location).catch(gt=>{}));const Fe={};for(const gt in jo)Object.defineProperty(Fe,gt,{get:()=>k.value[gt],enumerable:!0});oe.provide(Kb,We),oe.provide(Xb,pw(Fe)),oe.provide($g,k);const Ze=oe.unmount;dt.add(oe),oe.unmount=function(){dt.delete(oe),dt.size<1&&(y=jo,ct&&ct(),ct=null,k.value=jo,bt=!1,W=!1),Ze()}}};function _t(oe){return oe.reduce((We,Fe)=>We.then(()=>tt(Fe)),Promise.resolve())}return Ct}function fC(n,c){const f=[],p=[],E=[],P=Math.max(c.matched.length,n.matched.length);for(let I=0;I<P;I++){const B=c.matched[I];B&&(n.matched.find(y=>_d(y,B))?p.push(B):f.push(B));const k=n.matched[I];k&&(c.matched.find(y=>_d(y,k))||E.push(k))}return[f,p,E]}function pC(n){return Ca(Xb)}const Yb=(n,c)=>{const f=n.__vccOpts||n;for(const[p,E]of c)f[p]=E;return f},gC={__name:"App",setup(n){const c=pC();return console.log("route",c),(f,p)=>(Wp(),$p(ya,null,[Pi("aside",null,[Pi("nav",null,[Ls(An(ip),{class:gd(["nav-link",{active:An(c).path==="/"}]),to:"/"},{default:Xf(()=>[ep("PDF.js Viewer")]),_:1},8,["class"]),Ls(An(ip),{class:gd(["nav-link",{active:An(c).path==="/custom-toolbar"}]),to:"/custom-toolbar"},{default:Xf(()=>[ep("Custom Toolbar")]),_:1},8,["class"]),Ls(An(ip),{class:gd(["nav-link",{active:An(c).path==="/multiple-pdf-files"}]),to:"/multiple-pdf-files"},{default:Xf(()=>[ep("Multiple PDF")]),_:1},8,["class"])])]),Pi("main",null,[Ls(An(l_))])],64))}},mC=Yb(gC,[["__scopeId","data-v-5fc08738"]]),bC="modulepreload",vC=function(n){return"/document-viewer/demos/"+n},Zv={},Gf=function(c,f,p){if(!f||f.length===0)return c();const E=document.getElementsByTagName("link");return Promise.all(f.map(P=>{if(P=vC(P),P in Zv)return;Zv[P]=!0;const I=P.endsWith(".css"),B=I?'[rel="stylesheet"]':"";if(!!p)for(let C=E.length-1;C>=0;C--){const U=E[C];if(U.href===P&&(!I||U.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${P}"]${B}`))return;const y=document.createElement("link");if(y.rel=I?"stylesheet":bC,I||(y.as="script",y.crossOrigin=""),y.href=P,document.head.appendChild(y),I)return new Promise((C,U)=>{y.addEventListener("load",C),y.addEventListener("error",()=>U(new Error(`Unable to preload CSS for ${P}`)))})})).then(()=>c()).catch(P=>{const I=new Event("vite:preloadError",{cancelable:!0});if(I.payload=P,window.dispatchEvent(I),!I.defaultPrevented)throw P})};var c_={exports:{}};(function(n,c){(function(p,E){n.exports=E()})(globalThis,()=>(()=>{var f={294:(I,B,k)=>{var Ta,Rn,gs,jr,jt,Mi,ms,La,tn,Ra,er,Hr,tl,tr,ir,Ma,Ur,Ms,uo,Ia,il,d_,sl,qg,fo,sp,ka,Gg,nl,Kg,pc,h_,zr,u_,rl,Xg,gc,f_,Wr,Is,Mn,Oa,al,ol,Yg,mc,p_,ll,Zg,ks,g_,vc,m_,wc,b_,_c,v_,$r,ci,cl,w_,ss,dl,Qg,qr,Xh,hl,Jg,yc,__,sr,em,ul,y_,Ii,Os,ns,Ec,E_,po,tm,sn,im,Sc,S_,fl,A_,Ac,C_,pl,sm,Cc,P_,Pc,x_,go,np,Gr,Yh,Kr,od,xc,T_,gl,nm,Na,rm,Fa,rp,mo,L_,Da,am,In,om,bs,Zh,Ns,zi,R_,nr,lm,nn,ui,Fs,M_,rs,Qh,rn,I_,Zr,k_,rr,O_,ar,N_,an,cm,kn,F_,On,Jh,Ba,D_,Qr,B_,bo,V_,on,j_,di,H_,Fd,dm,si,ni,fi,as,Ds,Jt,os,Bs,$t,pi,Fn,U_,Wi,ap,Jr,hm,ea,z_,ln,eu,Dt,cn,or,lr,Vs,js,ld,ta,W_,cr,um,ia,$_,vs,op,Hs,q_,ja,G_,Dn,zd,fm,$d,pm,vl,tu,Ku,K_,Xu,X_,Yu,Y_,na,Kd,ra,Mc,ws,Xd,gm,aa,Fi,Yd,mm,zs,bm,Ei,gi,Si,_s,$i,lp,Qd,vm,dn,qi,$s,dr,Zu,Z_,Ju,Q_,yl,qs,_o,hn,Jd,un,kc,hr,Ai,mi,Gs,cp,fn,wm,Bn,_m,ur,ym,fr,Em,ys,Sm,la,J_,ca,ey,pr,Am,Es,Al,gr,Cm,pn,eh,da,Ua,bi,Cl,mr,Pl,br,Nc,Ks,Fc,ha,sf,Vn,gn,mn,Dc,ua,ty,jn,iy,qt,sy,ri,iu,Bc,dp,vr,ny,wr,Pm,fa,ry,Ss,so,ih,xm,lf,ay,cf,oy,_r,Tm,Hn,ly,Di,bn,hp,df,cy,za,dy,As,Lm,rh,Rm,So,Un,hy,zn,uy,ah,Mm,Ki,su;k.d(B,{createViewerApp:()=>cg,getActiveApp:()=>lg,getViewerConfiguration:()=>Hu});var y=k(927),C=k(972);const U=1e3;function X(T){const{appOptions:s}=T,o=["null","http://mozilla.github.io","https://mozilla.github.io"];var u=function(re){if(re)try{const Ie=new URL(window.location.href).origin||"null";if(o.includes(Ie))return;if(new URL(re,window.location.href).origin!==Ie)throw new Error("file origin does not match viewer's")}catch(Ie){throw T.l10n.get("loading_error").then($e=>{T._documentError($e,{message:Ie==null?void 0:Ie.message})}),Ie}};async function m(){var re;(re=C.GlobalWorkerOptions).workerSrc||(re.workerSrc=s.get("workerSrc")),await Gf(()=>import(C.PDFWorker.workerSrc),[])}async function A(re){const{debuggerScriptPath:Ie}=re.appConfig,{PDFBug:$e}=await Gf(()=>import(Ie),[]);re._PDFBug=$e}function x({pageNumber:re}){var $e,mt;if(!(($e=globalThis.Stats)!=null&&$e.enabled))return;const Ie=T.pdfViewer.getPageView(re-1);globalThis.Stats.add(re,(mt=Ie==null?void 0:Ie.pdfPage)==null?void 0:mt.stats)}function O({pageNumber:re}){var Ie;re===T.page&&((Ie=T.toolbar)==null||Ie.updateLoadingIndicatorState(!0))}function D({pageNumber:re,error:Ie}){var $e,mt,ut;if(re===T.page&&(($e=T.toolbar)==null||$e.updateLoadingIndicatorState(!1)),((mt=T.pdfSidebar)==null?void 0:mt.visibleView)===y.SidebarView.THUMBS){const At=T.pdfViewer.getPageView(re-1),Rt=(ut=T.pdfThumbnailViewer)==null?void 0:ut.getThumbnail(re-1);At&&(Rt==null||Rt.setImage(At))}Ie&&T.l10n.get("rendering_error").then(At=>{T._otherError(At,Ie)})}function H({mode:re}){var $e;let Ie;switch(re){case"thumbs":Ie=y.SidebarView.THUMBS;break;case"bookmarks":case"outline":Ie=y.SidebarView.OUTLINE;break;case"attachments":Ie=y.SidebarView.ATTACHMENTS;break;case"layers":Ie=y.SidebarView.LAYERS;break;case"none":Ie=y.SidebarView.NONE;break;default:console.error('Invalid "pagemode" hash parameter: '+re);return}($e=T.pdfSidebar)==null||$e.switchView(Ie,!0)}function q(re){var Ie;switch(re.action){case"GoToPage":(Ie=T.appConfig.toolbar)==null||Ie.pageNumber.select();break;case"Find":T.supportsIntegratedFind||T==null||T.findBar.toggle();break;case"Print":T.triggerPrinting();break;case"SaveAs":T.downloadOrSave();break}}function ae(re){T.pdfViewer.presentationModeState=re.state}function ve({view:re}){var Ie;T.pdfRenderingQueue.isThumbnailViewEnabled=re===y.SidebarView.THUMBS,T.isInitialViewSet&&((Ie=T.store)==null||Ie.set("sidebarView",re).catch(()=>{}))}function Ye({location:re}){var Ie;if(T.isInitialViewSet&&((Ie=T.store)==null||Ie.setMultiple({page:re.pageNumber,zoom:re.scale,scrollLeft:re.left,scrollTop:re.top,rotation:re.rotation}).catch(()=>{})),T.appConfig.secondaryToolbar){const $e=T.pdfLinkService.getAnchorUrl(re.pdfOpenParams);T.appConfig.secondaryToolbar.viewBookmarkButton.href=$e}}function qe(re){var Ie;T.isInitialViewSet&&!T.pdfViewer.isInPresentationMode&&((Ie=T.store)==null||Ie.set("scrollMode",re.mode).catch(()=>{}))}function Ke(re){var Ie;T.isInitialViewSet&&!T.pdfViewer.isInPresentationMode&&((Ie=T.store)==null||Ie.set("spreadMode",re.mode).catch(()=>{}))}function et(){const{pdfDocument:re,pdfViewer:Ie,pdfRenderingQueue:$e}=T;if($e.printing&&window.matchMedia("print").matches||!re)return;const mt=Ie.currentScaleValue;(mt==="auto"||mt==="page-fit"||mt==="page-width")&&(Ie.currentScaleValue=mt),Ie.update()}function nt(re){var $e;const Ie=re.hash;Ie&&(T.isInitialViewSet?($e=T.pdfHistory)!=null&&$e.popStateInProgress||T.pdfLinkService.setHash(Ie):T.initialBookmark=Ie)}var ot=function(re){var $e;if(($e=T.pdfViewer)!=null&&$e.isInPresentationMode)return;const Ie=re.fileInput.files[0];T.open({url:URL.createObjectURL(Ie),originalUrl:Ie.name})};function Xe(){T.requestPresentationMode()}function vt(re){T.pdfViewer.annotationEditorMode=re}function ht(re){T.pdfViewer.annotationEditorParams=re}function Ue(){T.triggerPrinting()}function st(){T.downloadOrSave()}function yt(){T.openInExternalApp()}function Ut(){T.page=1}function Lt(){T.page=T.pagesCount}function kt(){T.pdfViewer.nextPage()}function Pt(){T.pdfViewer.previousPage()}function Gt(){T.zoomIn()}function Cs(){T.zoomOut()}function yr(){T.zoomReset()}function Er(re){var $e;const Ie=T.pdfViewer;re.value!==""&&T.pdfLinkService.goToPage(re.value),re.value!==Ie.currentPageNumber.toString()&&re.value!==Ie.currentPageLabel&&(($e=T.toolbar)==null||$e.setPageNumber(Ie.currentPageNumber,Ie.currentPageLabel))}function Sr(re){T.pdfViewer.currentScaleValue=re.value}function wn(){T.rotatePages(90)}function ga(){T.rotatePages(-90)}function oh(re){T.pdfViewer.optionalContentConfigPromise=re.promise}function Wn(re){T.pdfViewer.scrollMode=re.mode}function ff(re){T.pdfViewer.spreadMode=re.mode}function Ar(){var re;(re=T.pdfDocumentProperties)==null||re.open()}function lh(re){T.eventBus.dispatch("find",{source:re.source,type:"",query:re.query,caseSensitive:!1,entireWord:!1,highlightAll:!0,findPrevious:!1,matchDiacritics:!0})}function Cr({matchesCount:re}){T.supportsIntegratedFind?T.externalServices.updateFindMatchesCount(re):T.findBar.updateResultsCount(re)}function ch({state:re,previous:Ie,matchesCount:$e,rawQuery:mt}){var ut;T.supportsIntegratedFind?T.externalServices.updateFindControlState({result:re,findPrevious:Ie,matchesCount:$e,rawQuery:mt}):(ut=T.findBar)==null||ut.updateUIState(re,Ie,$e)}function Wa(re){var Ie;(Ie=T.toolbar)==null||Ie.setPageScale(re.presetValue,re.scale),T.pdfViewer.update()}function Ao(re){T.pdfThumbnailViewer&&(T.pdfThumbnailViewer.pagesRotation=re.pagesRotation),T.forceRendering(),T.pdfViewer.currentPageNumber=re.pageNumber}function $a({pageNumber:re,pageLabel:Ie}){var mt,ut,At,Rt,Qt;(mt=T.toolbar)==null||mt.setPageNumber(re,Ie),(ut=T.secondaryToolbar)==null||ut.setPageNumber(re),((At=T.pdfSidebar)==null?void 0:At.visibleView)===y.SidebarView.THUMBS&&((Rt=T.pdfThumbnailViewer)==null||Rt.scrollThumbnailIntoView(re));const $e=T.pdfViewer.getPageView(re-1);(Qt=T.toolbar)==null||Qt.updateLoadingIndicatorState(($e==null?void 0:$e.renderingState)===y.RenderingStates.RUNNING)}function qa(re){T.pdfViewer.refresh()}function Ll(re){document.visibilityState==="visible"&&Ga()}let Pr=null;function Ga(){Pr&&clearTimeout(Pr),Pr=setTimeout(function(){Pr=null},U)}function DE(re){const{pdfViewer:Ie,supportedMouseWheelZoomModifierKeys:$e,supportsPinchToZoom:mt}=T;if(Ie.isInPresentationMode)return;const ut=re.deltaMode;let At=Math.exp(-re.deltaY/100);const Rt=!1,Qt=re.ctrlKey&&!T._isCtrlKeyDown&&ut===WheelEvent.DOM_DELTA_PIXEL&&re.deltaX===0&&(Math.abs(At-1)<.05||Rt)&&re.deltaZ===0;if(Qt||re.ctrlKey&&$e.ctrlKey||re.metaKey&&$e.metaKey){if(re.preventDefault(),Pr||document.visibilityState==="hidden"||T.overlayManager.active)return;const Xi=Ie.currentScale;if(Qt&&mt)if(At=T._accumulateFactor(Xi,At,"_wheelUnusedFactor"),At<1)T.zoomOut(null,At);else if(At>1)T.zoomIn(null,At);else return;else{const vi=(0,y.normalizeWheelEventDirection)(re);let cs=0;if(ut===WheelEvent.DOM_DELTA_LINE||ut===WheelEvent.DOM_DELTA_PAGE?Math.abs(vi)>=1?cs=Math.sign(vi):cs=T._accumulateTicks(vi,"_wheelUnusedTicks"):cs=T._accumulateTicks(vi/30,"_wheelUnusedTicks"),cs<0)T.zoomOut(-cs);else if(cs>0)T.zoomIn(cs);else return}T._centerAtPos(Xi,re.clientX,re.clientY)}else Ga()}function Rl(re){if(T.pdfViewer.isInPresentationMode||re.touches.length<2)return;if(re.preventDefault(),re.touches.length!==2||T.overlayManager.active){T._touchInfo=null;return}let[Ie,$e]=re.touches;Ie.identifier>$e.identifier&&([Ie,$e]=[$e,Ie]),T._touchInfo={touch0X:Ie.pageX,touch0Y:Ie.pageY,touch1X:$e.pageX,touch1Y:$e.pageY}}function Ka(re){if(!T._touchInfo||re.touches.length!==2)return;const{pdfViewer:Ie,_touchInfo:$e,supportsPinchToZoom:mt}=T;let[ut,At]=re.touches;ut.identifier>At.identifier&&([ut,At]=[At,ut]);const{pageX:Rt,pageY:Qt}=ut,{pageX:Xi,pageY:vi}=At,{touch0X:cs,touch0Y:Xs,touch1X:Po,touch1Y:ds}=$e;if(Math.abs(cs-Rt)<=1&&Math.abs(Xs-Qt)<=1&&Math.abs(Po-Xi)<=1&&Math.abs(ds-vi)<=1)return;if($e.touch0X=Rt,$e.touch0Y=Qt,$e.touch1X=Xi,$e.touch1Y=vi,cs===Rt&&Xs===Qt){const Bi=Po-Rt,qn=ds-Qt,_n=Xi-Rt,Ol=vi-Qt,ei=Bi*Ol-qn*_n;if(Math.abs(ei)>.02*Math.hypot(Bi,qn)*Math.hypot(_n,Ol))return}else if(Po===Xi&&ds===vi){const Bi=cs-Xi,qn=Xs-vi,_n=Rt-Xi,Ol=Qt-vi,ei=Bi*Ol-qn*_n;if(Math.abs(ei)>.02*Math.hypot(Bi,qn)*Math.hypot(_n,Ol))return}else{const Bi=Rt-cs,qn=Xi-Po,_n=Qt-Xs,Ol=vi-ds;if(Bi*qn+_n*Ol>=0)return}re.preventDefault();const dh=Math.hypot(Rt-Xi,Qt-vi)||1,Ri=Math.hypot(cs-Po,Xs-ds)||1,$n=Ie.currentScale;if(mt){const Bi=T._accumulateFactor($n,dh/Ri,"_touchUnusedFactor");if(Bi<1)T.zoomOut(null,Bi);else if(Bi>1)T.zoomIn(null,Bi);else return}else{const qn=T._accumulateTicks((dh-Ri)/30,"_touchUnusedTicks");if(qn<0)T.zoomOut(-qn);else if(qn>0)T.zoomIn(qn);else return}T._centerAtPos($n,(Rt+Xi)/2,(Qt+vi)/2)}function Co(re){T._touchInfo&&(re.preventDefault(),T._touchInfo=null,T._touchUnusedTicks=0,T._touchUnusedFactor=1)}function Uc(re){var $e,mt,ut;if(!(($e=T.secondaryToolbar)!=null&&$e.isOpen))return;const Ie=T.appConfig;(T.pdfViewer.containsElement(re.target)||(mt=Ie.toolbar)!=null&&mt.container.contains(re.target)&&re.target!==((ut=Ie.secondaryToolbar)==null?void 0:ut.toggleButton))&&T.secondaryToolbar.close()}function BE(re){re.key==="Control"&&(T._isCtrlKeyDown=!1)}function Ml(re){var vi,cs,Xs,Po,ds,dh;if(T._isCtrlKeyDown=re.key==="Control",T.overlayManager.active)return;const{eventBus:Ie,pdfViewer:$e}=T,mt=$e.isInPresentationMode;let ut=!1,At=!1;const Rt=(re.ctrlKey?1:0)|(re.altKey?2:0)|(re.shiftKey?4:0)|(re.metaKey?8:0);if(Rt===1||Rt===8||Rt===5||Rt===12)switch(re.keyCode){case 70:!T.supportsIntegratedFind&&!re.shiftKey&&((vi=T.findBar)==null||vi.open(),ut=!0);break;case 71:if(!T.supportsIntegratedFind){const{state:Ri}=T.findController;if(Ri){const $n={source:window,type:"again",findPrevious:Rt===5||Rt===12};Ie.dispatch("find",{...Ri,...$n})}ut=!0}break;case 61:case 107:case 187:case 171:T.zoomIn(),ut=!0;break;case 173:case 109:case 189:T.zoomOut(),ut=!0;break;case 48:case 96:mt||(setTimeout(function(){T.zoomReset()}),ut=!1);break;case 38:(mt||T.page>1)&&(T.page=1,ut=!0,At=!0);break;case 40:(mt||T.page<T.pagesCount)&&(T.page=T.pagesCount,ut=!0,At=!0);break}if(Rt===1||Rt===8)switch(re.keyCode){case 83:Ie.dispatch("download",{source:window}),ut=!0;break;case 79:Ie.dispatch("openfile",{source:window}),ut=!0;break}if(Rt===3||Rt===10)switch(re.keyCode){case 80:T.requestPresentationMode(),ut=!0,T.externalServices.reportTelemetry({type:"buttons",data:{id:"presentationModeKeyboard"}});break;case 71:T.appConfig.toolbar&&(T.appConfig.toolbar.pageNumber.select(),ut=!0);break}if(ut){At&&!mt&&$e.focus(),re.preventDefault();return}const Qt=(0,y.getActiveOrFocusedElement)(),Xi=Qt==null?void 0:Qt.tagName.toUpperCase();if(!((Xi==="INPUT"||Xi==="TEXTAREA"||Xi==="SELECT"||Qt!=null&&Qt.isContentEditable)&&re.keyCode!==27)){if(Rt===0){let Ri=0,$n=!1;switch(re.keyCode){case 38:case 33:$e.isVerticalScrollbarEnabled&&($n=!0),Ri=-1;break;case 8:mt||($n=!0),Ri=-1;break;case 37:$e.isHorizontalScrollbarEnabled&&($n=!0);case 75:case 80:Ri=-1;break;case 27:(cs=T.secondaryToolbar)!=null&&cs.isOpen&&(T.secondaryToolbar.close(),ut=!0),!T.supportsIntegratedFind&&((Xs=T.findBar)!=null&&Xs.opened)&&(T.findBar.close(),ut=!0);break;case 40:case 34:$e.isVerticalScrollbarEnabled&&($n=!0),Ri=1;break;case 13:case 32:mt||($n=!0),Ri=1;break;case 39:$e.isHorizontalScrollbarEnabled&&($n=!0);case 74:case 78:Ri=1;break;case 36:(mt||T.page>1)&&(T.page=1,ut=!0,At=!0);break;case 35:(mt||T.page<T.pagesCount)&&(T.page=T.pagesCount,ut=!0,At=!0);break;case 83:(Po=T.pdfCursorTools)==null||Po.switchTool(y.CursorTool.SELECT);break;case 72:(ds=T.pdfCursorTools)==null||ds.switchTool(y.CursorTool.HAND);break;case 82:T.rotatePages(90);break;case 115:(dh=T.pdfSidebar)==null||dh.toggle();break}Ri!==0&&(!$n||$e.currentScaleValue==="page-fit")&&(Ri>0?$e.nextPage():$e.previousPage(),ut=!0)}if(Rt===4)switch(re.keyCode){case 13:case 32:if(!mt&&$e.currentScaleValue!=="page-fit")break;$e.previousPage(),ut=!0;break;case 82:T.rotatePages(-90);break}!ut&&!mt&&(re.keyCode>=33&&re.keyCode<=40||re.keyCode===32&&Xi!=="BUTTON")&&(At=!0),At&&!$e.containsElement(Qt)&&$e.focus(),ut&&re.preventDefault()}}function VE(re){return re.preventDefault(),re.returnValue="",!1}function Il(re){T.externalServices.updateEditorStates(re)}function kl({details:re}){T.externalServices.reportTelemetry(re)}return{validateFileURL:u,webViewerFileInputChange:ot,loadFakeWorker:m,loadPDFBug:A,reportPageStatsPDFBug:x,webViewerPageRender:O,webViewerPageRendered:D,webViewerPageMode:H,webViewerNamedAction:q,webViewerPresentationModeChanged:ae,webViewerSidebarViewChanged:ve,webViewerUpdateViewarea:Ye,webViewerScrollModeChanged:qe,webViewerSpreadModeChanged:Ke,webViewerResize:et,webViewerHashchange:nt,webViewerPresentationMode:Xe,webViewerSwitchAnnotationEditorMode:vt,webViewerSwitchAnnotationEditorParams:ht,webViewerPrint:Ue,webViewerDownload:st,webViewerOpenInExternalApp:yt,webViewerFirstPage:Ut,webViewerLastPage:Lt,webViewerNextPage:kt,webViewerPreviousPage:Pt,webViewerZoomIn:Gt,webViewerZoomOut:Cs,webViewerZoomReset:yr,webViewerPageNumberChanged:Er,webViewerScaleChanged:Sr,webViewerRotateCw:wn,webViewerRotateCcw:ga,webViewerOptionalContentConfig:oh,webViewerSwitchScrollMode:Wn,webViewerSwitchSpreadMode:ff,webViewerDocumentProperties:Ar,webViewerFindFromUrlHash:lh,webViewerUpdateFindMatchesCount:Cr,webViewerUpdateFindControlState:ch,webViewerScaleChanging:Wa,webViewerRotationChanging:Ao,webViewerPageChanging:$a,webViewerResolutionChange:qa,webViewerVisibilityChange:Ll,setZoomDisabledTimeout:Ga,webViewerWheel:DE,webViewerTouchStart:Rl,webViewerTouchMove:Ka,webViewerTouchEnd:Co,webViewerClick:Uc,webViewerKeyUp:BE,webViewerKeyDown:Ml,beforeUnload:VE,webViewerAnnotationEditorStatesChanged:Il,webViewerReportTelemetry:kl}}var te=k(961);const Pe={EVENT:"event",TIMEOUT:"timeout"};function de({target:T,name:s,delay:o=0}){return new Promise(function(u,m){if(typeof T!="object"||!(s&&typeof s=="string")||!(Number.isInteger(o)&&o>=0))throw new Error("waitOnEventOrTimeout - invalid parameters.");function A(H){T instanceof Ve?T._off(s,x):T.removeEventListener(s,x),D&&clearTimeout(D),u(H)}const x=A.bind(null,Pe.EVENT);T instanceof Ve?T._on(s,x):T.addEventListener(s,x);const O=A.bind(null,Pe.TIMEOUT),D=setTimeout(O,o)})}class Ve{constructor(){b(this,Ta,Object.create(null))}on(s,o,u=null){this._on(s,o,{external:!0,once:u==null?void 0:u.once})}off(s,o,u=null){this._off(s,o,{external:!0,once:u==null?void 0:u.once})}dispatch(s,o){const u=a(this,Ta)[s];if(!u||u.length===0)return;let m;for(const{listener:A,external:x,once:O}of u.slice(0)){if(O&&this._off(s,A),x){(m||(m=[])).push(A);continue}A(o)}if(m){for(const A of m)A(o);m=null}}_on(s,o,u=null){var A;((A=a(this,Ta))[s]||(A[s]=[])).push({listener:o,external:(u==null?void 0:u.external)===!0,once:(u==null?void 0:u.once)===!0})}_off(s,o,u=null){const m=a(this,Ta)[s];if(m){for(let A=0,x=m.length;A<x;A++)if(m[A].listener===o){m.splice(A,1);return}}}}Ta=new WeakMap;class Ae extends Ve{dispatch(s,o){throw new Error("Not implemented: AutomationEventBus.dispatch")}}var ge=k(234);class xe{constructor({dialog:s,optionDescription:o,optionDecorative:u,textarea:m,cancelButton:A,saveButton:x},O,D,H){b(this,il);b(this,sl);b(this,fo);b(this,ka);b(this,nl);b(this,pc);b(this,zr);b(this,rl);b(this,Rn,S(this,nl,Kg).bind(this));b(this,gs,S(this,sl,qg).bind(this));b(this,jr,S(this,zr,u_).bind(this));b(this,jt,null);b(this,Mi,void 0);b(this,ms,void 0);b(this,La,void 0);b(this,tn,!1);b(this,Ra,void 0);b(this,er,void 0);b(this,Hr,void 0);b(this,tl,void 0);b(this,tr,void 0);b(this,ir,void 0);b(this,Ma,null);b(this,Ur,null);b(this,Ms,null);b(this,uo,void 0);b(this,Ia,null);R(this,ms,s),R(this,Ra,o),R(this,er,u),R(this,tr,m),R(this,Mi,A),R(this,tl,x),R(this,Hr,D),R(this,La,H),R(this,uo,O),s.addEventListener("close",S(this,ka,Gg).bind(this)),s.addEventListener("contextmenu",q=>{q.target!==a(this,tr)&&q.preventDefault()}),A.addEventListener("click",S(this,fo,sp).bind(this)),x.addEventListener("click",S(this,pc,h_).bind(this)),o.addEventListener("change",a(this,Rn)),u.addEventListener("change",a(this,Rn)),a(this,Hr).register(s)}get _elements(){return(0,C.shadow)(this,"_elements",[a(this,Ra),a(this,er),a(this,tr),a(this,tl),a(this,Mi)])}async editAltText(s,o){if(a(this,jt)||!o)return;S(this,il,d_).call(this),R(this,tn,!1);for(const A of this._elements)A.addEventListener("click",a(this,jr));const{altText:u,decorative:m}=o.altTextData;m===!0?(a(this,er).checked=!0,a(this,Ra).checked=!1):(a(this,er).checked=!1,a(this,Ra).checked=!0),R(this,Ma,a(this,tr).value=(u==null?void 0:u.trim())||""),S(this,nl,Kg).call(this),R(this,jt,o),R(this,ir,s),a(this,ir).removeEditListeners(),a(this,La)._on("resize",a(this,gs));try{await a(this,Hr).open(a(this,ms)),S(this,sl,qg).call(this)}catch(A){throw S(this,ka,Gg).call(this),A}}destroy(){var s;R(this,ir,null),S(this,fo,sp).call(this),(s=a(this,Ur))==null||s.remove(),R(this,Ur,R(this,Ms,null))}}Rn=new WeakMap,gs=new WeakMap,jr=new WeakMap,jt=new WeakMap,Mi=new WeakMap,ms=new WeakMap,La=new WeakMap,tn=new WeakMap,Ra=new WeakMap,er=new WeakMap,Hr=new WeakMap,tl=new WeakMap,tr=new WeakMap,ir=new WeakMap,Ma=new WeakMap,Ur=new WeakMap,Ms=new WeakMap,uo=new WeakMap,Ia=new WeakMap,il=new WeakSet,d_=function(){if(a(this,Ur))return;const s=new C.DOMSVGFactory,o=R(this,Ur,s.createElement("svg"));o.setAttribute("width","0"),o.setAttribute("height","0");const u=s.createElement("defs");o.append(u);const m=s.createElement("mask");u.append(m),m.setAttribute("id","alttext-manager-mask"),m.setAttribute("maskContentUnits","objectBoundingBox");let A=s.createElement("rect");m.append(A),A.setAttribute("fill","white"),A.setAttribute("width","1"),A.setAttribute("height","1"),A.setAttribute("x","0"),A.setAttribute("y","0"),A=R(this,Ms,s.createElement("rect")),m.append(A),A.setAttribute("fill","black"),a(this,ms).append(o)},sl=new WeakSet,qg=function(){if(!a(this,jt))return;const s=a(this,ms),{style:o}=s,{x:u,y:m,width:A,height:x}=a(this,uo).getBoundingClientRect(),{innerWidth:O,innerHeight:D}=window,{width:H,height:q}=s.getBoundingClientRect(),{x:ae,y:ve,width:Ye,height:qe}=a(this,jt).getClientDimensions(),Ke=10,et=a(this,ir).direction==="ltr",nt=Math.max(ae,u),ot=Math.min(ae+Ye,u+A),Xe=Math.max(ve,m),vt=Math.min(ve+qe,m+x);a(this,Ms).setAttribute("width",`${(ot-nt)/O}`),a(this,Ms).setAttribute("height",`${(vt-Xe)/D}`),a(this,Ms).setAttribute("x",`${nt/O}`),a(this,Ms).setAttribute("y",`${Xe/D}`);let ht=null,Ue=Math.max(ve,0);Ue+=Math.min(D-(Ue+q),0),et?ae+Ye+Ke+H<O?ht=ae+Ye+Ke:ae>H+Ke&&(ht=ae-H-Ke):ae>H+Ke?ht=ae-H-Ke:ae+Ye+Ke+H<O&&(ht=ae+Ye+Ke),ht===null&&(Ue=null,ht=Math.max(ae,0),ht+=Math.min(O-(ht+H),0),ve>q+Ke?Ue=ve-q-Ke:ve+qe+Ke+q<D&&(Ue=ve+qe+Ke)),Ue!==null?(s.classList.add("positioned"),et?o.left=`${ht}px`:o.right=`${O-ht-H}px`,o.top=`${Ue}px`):(s.classList.remove("positioned"),o.left="",o.top="")},fo=new WeakSet,sp=function(){a(this,Hr).active===a(this,ms)&&a(this,Hr).close(a(this,ms))},ka=new WeakSet,Gg=function(){var s;a(this,La).dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:a(this,jt).editorType,data:a(this,Ia)||{action:"alt_text_cancel",alt_text_keyboard:!a(this,tn)}}}),R(this,Ia,null),S(this,rl,Xg).call(this),(s=a(this,ir))==null||s.addEditListeners(),a(this,La)._off("resize",a(this,gs)),a(this,jt).altTextFinish(),R(this,jt,null),R(this,ir,null)},nl=new WeakSet,Kg=function(){a(this,tr).disabled=a(this,er).checked},pc=new WeakSet,h_=function(){const s=a(this,tr).value.trim(),o=a(this,er).checked;a(this,jt).altTextData={altText:s,decorative:o},R(this,Ia,{action:"alt_text_save",alt_text_description:!!s,alt_text_edit:!!a(this,Ma)&&a(this,Ma)!==s,alt_text_decorative:o,alt_text_keyboard:!a(this,tn)}),S(this,fo,sp).call(this)},zr=new WeakSet,u_=function(s){s.detail!==0&&(R(this,tn,!0),S(this,rl,Xg).call(this))},rl=new WeakSet,Xg=function(){for(const s of this._elements)s.removeEventListener("click",a(this,jr))};class ze{constructor(s,o){b(this,gc);this.eventBus=o,S(this,gc,f_).call(this,s)}}gc=new WeakSet,f_=function({editorFreeTextFontSize:s,editorFreeTextColor:o,editorInkColor:u,editorInkThickness:m,editorInkOpacity:A,editorStampAddImage:x}){const O=(D,H)=>{this.eventBus.dispatch("switchannotationeditorparams",{source:this,type:C.AnnotationEditorParamsType[D],value:H})};s.addEventListener("input",function(){O("FREETEXT_SIZE",this.valueAsNumber)}),o.addEventListener("input",function(){O("FREETEXT_COLOR",this.value)}),u.addEventListener("input",function(){O("INK_COLOR",this.value)}),m.addEventListener("input",function(){O("INK_THICKNESS",this.valueAsNumber)}),A.addEventListener("input",function(){O("INK_OPACITY",this.valueAsNumber)}),x.addEventListener("click",()=>{O("CREATE")}),this.eventBus._on("annotationeditorparamschanged",D=>{for(const[H,q]of D.details)switch(H){case C.AnnotationEditorParamsType.FREETEXT_SIZE:s.value=q;break;case C.AnnotationEditorParamsType.FREETEXT_COLOR:o.value=q;break;case C.AnnotationEditorParamsType.INK_COLOR:u.value=q;break;case C.AnnotationEditorParamsType.INK_THICKNESS:m.value=q;break;case C.AnnotationEditorParamsType.INK_OPACITY:A.value=q;break}})};class at{constructor(){b(this,Wr,new WeakMap);b(this,Is,null)}get active(){return a(this,Is)}async register(s,o=!1){if(typeof s!="object")throw new Error("Not enough parameters.");if(a(this,Wr).has(s))throw new Error("The overlay is already registered.");a(this,Wr).set(s,{canForceClose:o}),s.addEventListener("cancel",u=>{R(this,Is,null)})}async open(s){if(a(this,Wr).has(s)){if(a(this,Is)){if(a(this,Is)===s)throw new Error("The overlay is already active.");if(a(this,Wr).get(s).canForceClose)await this.close();else throw new Error("Another overlay is currently active.")}}else throw new Error("The overlay does not exist.");R(this,Is,s),s.showModal()}async close(s=a(this,Is)){if(a(this,Wr).has(s))if(a(this,Is)){if(a(this,Is)!==s)throw new Error("Another overlay is currently active.")}else throw new Error("The overlay is currently not active.");else throw new Error("The overlay does not exist.");s.close(),R(this,Is,null)}}Wr=new WeakMap,Is=new WeakMap;class Z{constructor(s,o,u=!1){b(this,ol);b(this,mc);b(this,ll);b(this,Mn,null);b(this,Oa,null);b(this,al,null);this.dialog=s.dialog,this.label=s.label,this.input=s.input,this.submitButton=s.submitButton,this.cancelButton=s.cancelButton,this.overlayManager=o,this._isViewerEmbedded=u,this.submitButton.addEventListener("click",S(this,ol,Yg).bind(this)),this.cancelButton.addEventListener("click",this.close.bind(this)),this.input.addEventListener("keydown",m=>{m.keyCode===13&&S(this,ol,Yg).call(this)}),this.overlayManager.register(this.dialog,!0),this.dialog.addEventListener("close",S(this,mc,p_).bind(this))}async open(){a(this,Mn)&&await a(this,Mn).promise,R(this,Mn,new C.PromiseCapability);try{await this.overlayManager.open(this.dialog)}catch(o){throw a(this,Mn).resolve(),o}const s=a(this,al)===C.PasswordResponses.INCORRECT_PASSWORD;(!this._isViewerEmbedded||s)&&this.input.focus(),this.label.setAttribute("data-l10n-id",`pdfjs-password-${s?"invalid":"label"}`)}async close(){this.overlayManager.active===this.dialog&&this.overlayManager.close(this.dialog)}async setUpdateCallback(s,o){a(this,Mn)&&await a(this,Mn).promise,R(this,Oa,s),R(this,al,o)}}Mn=new WeakMap,Oa=new WeakMap,al=new WeakMap,ol=new WeakSet,Yg=function(){const s=this.input.value;(s==null?void 0:s.length)>0&&S(this,ll,Zg).call(this,s)},mc=new WeakSet,p_=function(){S(this,ll,Zg).call(this,new Error("PasswordPrompt cancelled.")),a(this,Mn).resolve()},ll=new WeakSet,Zg=function(s){a(this,Oa)&&(this.close(),this.input.value="",a(this,Oa).call(this,s),R(this,Oa,null))};const _e=-100,Le="selected";class tt{constructor(s){if(this.constructor===tt)throw new Error("Cannot initialize BaseTreeViewer.");this.container=s.container,this.eventBus=s.eventBus,this._l10n=s.l10n,this.reset()}reset(){this._pdfDocument=null,this._lastToggleIsShow=!0,this._currentTreeItem=null,this.container.textContent="",this.container.classList.remove("treeWithDeepNesting")}_dispatchEvent(s){throw new Error("Not implemented: _dispatchEvent")}_bindLink(s,o){throw new Error("Not implemented: _bindLink")}_normalizeTextContent(s){return(0,y.removeNullCharacters)(s,!0)||""}_addToggleButton(s,o=!1){const u=document.createElement("div");u.className="treeItemToggler",o&&u.classList.add("treeItemsHidden"),u.onclick=m=>{if(m.stopPropagation(),u.classList.toggle("treeItemsHidden"),m.shiftKey){const A=!u.classList.contains("treeItemsHidden");this._toggleTreeItem(s,A)}},s.prepend(u)}_toggleTreeItem(s,o=!1){this._l10n.pause(),this._lastToggleIsShow=o;for(const u of s.querySelectorAll(".treeItemToggler"))u.classList.toggle("treeItemsHidden",!o);this._l10n.resume()}_toggleAllTreeItems(){this._toggleTreeItem(this.container,!this._lastToggleIsShow)}_finishRendering(s,o,u=!1){u&&(this.container.classList.add("treeWithDeepNesting"),this._lastToggleIsShow=!s.querySelector(".treeItemsHidden")),this._l10n.pause(),this.container.append(s),this._l10n.resume(),this._dispatchEvent(o)}render(s){throw new Error("Not implemented: render")}_updateCurrentTreeItem(s=null){this._currentTreeItem&&(this._currentTreeItem.classList.remove(Le),this._currentTreeItem=null),s&&(s.classList.add(Le),this._currentTreeItem=s)}_scrollToCurrentTreeItem(s){if(!s)return;this._l10n.pause();let o=s.parentNode;for(;o&&o!==this.container;){if(o.classList.contains("treeItem")){const u=o.firstElementChild;u==null||u.classList.remove("treeItemsHidden")}o=o.parentNode}this._l10n.resume(),this._updateCurrentTreeItem(s),this.container.scrollTo(s.offsetLeft,s.offsetTop+_e)}}class Ce extends tt{constructor(o){super(o);b(this,ks);this.downloadManager=o.downloadManager,this.eventBus._on("fileattachmentannotation",S(this,ks,g_).bind(this))}reset(o=!1){super.reset(),this._attachments=null,o||(this._renderedCapability=new C.PromiseCapability),this._pendingDispatchEvent=!1}async _dispatchEvent(o){this._renderedCapability.resolve(),!(o===0&&!this._pendingDispatchEvent&&(this._pendingDispatchEvent=!0,await de({target:this.eventBus,name:"annotationlayerrendered",delay:1e3}),!this._pendingDispatchEvent))&&(this._pendingDispatchEvent=!1,this.eventBus.dispatch("attachmentsloaded",{source:this,attachmentsCount:o}))}_bindLink(o,{content:u,filename:m}){o.onclick=()=>(this.downloadManager.openOrDownloadData(u,m),!1)}render({attachments:o,keepRenderedCapability:u=!1}){if(this._attachments&&this.reset(u),this._attachments=o||null,!o){this._dispatchEvent(0);return}const m=document.createDocumentFragment();let A=0;for(const x in o){const O=o[x],D=O.content,H=(0,C.getFilenameFromUrl)(O.filename,!0),q=document.createElement("div");q.className="treeItem";const ae=document.createElement("a");this._bindLink(ae,{content:D,filename:H}),ae.textContent=this._normalizeTextContent(H),q.append(ae),m.append(q),A++}this._finishRendering(m,A)}}ks=new WeakSet,g_=function({filename:o,content:u}){const m=this._renderedCapability.promise;m.then(()=>{if(m!==this._renderedCapability.promise)return;const A=this._attachments||Object.create(null);for(const x in A)if(o===x)return;A[o]={filename:o,content:u},this.render({attachments:A,keepRenderedCapability:!0})})};const De="grab-to-pan-grab";class Ge{constructor({element:s}){b(this,vc);b(this,wc);b(this,_c);this.element=s,this.document=s.ownerDocument,this.activate=this.activate.bind(this),this.deactivate=this.deactivate.bind(this),this.toggle=this.toggle.bind(this),this._onMouseDown=S(this,vc,m_).bind(this),this._onMouseMove=S(this,wc,b_).bind(this),this._endPan=S(this,_c,v_).bind(this);const o=this.overlay=document.createElement("div");o.className="grab-to-pan-grabbing"}activate(){this.active||(this.active=!0,this.element.addEventListener("mousedown",this._onMouseDown,!0),this.element.classList.add(De))}deactivate(){this.active&&(this.active=!1,this.element.removeEventListener("mousedown",this._onMouseDown,!0),this._endPan(),this.element.classList.remove(De))}toggle(){this.active?this.deactivate():this.activate()}ignoreTarget(s){return s.matches("a[href], a[href] *, input, textarea, button, button *, select, option")}}vc=new WeakSet,m_=function(s){if(s.button!==0||this.ignoreTarget(s.target))return;if(s.originalTarget)try{s.originalTarget.tagName}catch{return}this.scrollLeftStart=this.element.scrollLeft,this.scrollTopStart=this.element.scrollTop,this.clientXStart=s.clientX,this.clientYStart=s.clientY,this.document.addEventListener("mousemove",this._onMouseMove,!0),this.document.addEventListener("mouseup",this._endPan,!0),this.element.addEventListener("scroll",this._endPan,!0),s.preventDefault(),s.stopPropagation();const o=document.activeElement;o&&!o.contains(s.target)&&o.blur()},wc=new WeakSet,b_=function(s){if(this.element.removeEventListener("scroll",this._endPan,!0),!(s.buttons&1)){this._endPan();return}const o=s.clientX-this.clientXStart,u=s.clientY-this.clientYStart;this.element.scrollTo({top:this.scrollTopStart-u,left:this.scrollLeftStart-o,behavior:"instant"}),this.overlay.parentNode||document.body.append(this.overlay)},_c=new WeakSet,v_=function(){this.element.removeEventListener("scroll",this._endPan,!0),this.document.removeEventListener("mousemove",this._onMouseMove,!0),this.document.removeEventListener("mouseup",this._endPan,!0),this.overlay.remove()};class ct{constructor({container:s,eventBus:o,cursorToolOnLoad:u=y.CursorTool.SELECT}){b(this,cl);b(this,$r,y.CursorTool.SELECT);b(this,ci,null);this.container=s,this.eventBus=o,S(this,cl,w_).call(this),Promise.resolve().then(()=>{this.switchTool(u)})}get activeTool(){return a(this,$r)}switchTool(s){if(a(this,ci)!==null||s===a(this,$r))return;const o=()=>{switch(a(this,$r)){case y.CursorTool.SELECT:break;case y.CursorTool.HAND:this._handTool.deactivate();break;case y.CursorTool.ZOOM:}};switch(s){case y.CursorTool.SELECT:o();break;case y.CursorTool.HAND:o(),this._handTool.activate();break;case y.CursorTool.ZOOM:default:console.error(`switchTool: "${s}" is an unsupported value.`);return}R(this,$r,s),this.eventBus.dispatch("cursortoolchanged",{source:this,tool:s})}get _handTool(){return(0,C.shadow)(this,"_handTool",new Ge({element:this.container}))}}$r=new WeakMap,ci=new WeakMap,cl=new WeakSet,w_=function(){this.eventBus._on("switchcursortool",A=>{this.switchTool(A.tool)});let s=C.AnnotationEditorType.NONE,o=y.PresentationModeState.NORMAL;const u=()=>{const A=a(this,$r);this.switchTool(y.CursorTool.SELECT),a(this,ci)??R(this,ci,A)},m=()=>{const A=a(this,ci);A!==null&&s===C.AnnotationEditorType.NONE&&o===y.PresentationModeState.NORMAL&&(R(this,ci,null),this.switchTool(A))};this.eventBus._on("secondarytoolbarreset",A=>{a(this,ci)!==null&&(s=C.AnnotationEditorType.NONE,o=y.PresentationModeState.NORMAL,m())}),this.eventBus._on("annotationeditormodechanged",({mode:A})=>{s=A,A===C.AnnotationEditorType.NONE?m():u()}),this.eventBus._on("presentationmodechanged",({state:A})=>{o=A,A===y.PresentationModeState.NORMAL?m():A===y.PresentationModeState.FULLSCREEN&&u()})};const St="-",Tt=["en-us","en-lr","my"],ce={"8.5x11":"letter","8.5x14":"legal"},W={"297x420":"a-three","210x297":"a-four"};function ne(T,s,o){const u=s?T.width:T.height,m=s?T.height:T.width;return o[`${u}x${m}`]}class Re{constructor({dialog:s,fields:o,closeButton:u},m,A,x,O){b(this,dl);b(this,qr);b(this,hl);b(this,yc);b(this,sr);b(this,ul);b(this,ss,null);this.dialog=s,this.fields=o,this.overlayManager=m,this.l10n=x,this._fileNameLookup=O,S(this,dl,Qg).call(this),u.addEventListener("click",this.close.bind(this)),this.overlayManager.register(this.dialog),A._on("pagechanging",D=>{this._currentPageNumber=D.pageNumber}),A._on("rotationchanging",D=>{this._pagesRotation=D.pagesRotation}),this._isNonMetricLocale=Tt.includes(x.getLanguage())}async open(){await Promise.all([this.overlayManager.open(this.dialog),this._dataAvailableCapability.promise]);const s=this._currentPageNumber,o=this._pagesRotation;if(a(this,ss)&&s===a(this,ss)._currentPageNumber&&o===a(this,ss)._pagesRotation){S(this,qr,Xh).call(this);return}const{info:u,contentLength:m}=await this.pdfDocument.getMetadata(),[A,x,O,D,H,q]=await Promise.all([this._fileNameLookup(),S(this,hl,Jg).call(this,m),S(this,sr,em).call(this,u.CreationDate),S(this,sr,em).call(this,u.ModDate),this.pdfDocument.getPage(s).then(Ye=>S(this,yc,__).call(this,(0,y.getPageSizeInches)(Ye),o)),S(this,ul,y_).call(this,u.IsLinearized)]);R(this,ss,Object.freeze({fileName:A,fileSize:x,title:u.Title,author:u.Author,subject:u.Subject,keywords:u.Keywords,creationDate:O,modificationDate:D,creator:u.Creator,producer:u.Producer,version:u.PDFFormatVersion,pageCount:this.pdfDocument.numPages,pageSize:H,linearized:q,_currentPageNumber:s,_pagesRotation:o})),S(this,qr,Xh).call(this);const{length:ae}=await this.pdfDocument.getDownloadInfo();if(m===ae)return;const ve=Object.assign(Object.create(null),a(this,ss));ve.fileSize=await S(this,hl,Jg).call(this,ae),R(this,ss,Object.freeze(ve)),S(this,qr,Xh).call(this)}async close(){this.overlayManager.close(this.dialog)}setDocument(s){this.pdfDocument&&(S(this,dl,Qg).call(this),S(this,qr,Xh).call(this,!0)),s&&(this.pdfDocument=s,this._dataAvailableCapability.resolve())}}ss=new WeakMap,dl=new WeakSet,Qg=function(){this.pdfDocument=null,R(this,ss,null),this._dataAvailableCapability=new C.PromiseCapability,this._currentPageNumber=1,this._pagesRotation=0},qr=new WeakSet,Xh=function(s=!1){if(s||!a(this,ss)){for(const o in this.fields)this.fields[o].textContent=St;return}if(this.overlayManager.active===this.dialog)for(const o in this.fields){const u=a(this,ss)[o];this.fields[o].textContent=u||u===0?u:St}},hl=new WeakSet,Jg=async function(s=0){const o=s/1024,u=o/1024;if(o)return this.l10n.get(`pdfjs-document-properties-${u>=1?"mb":"kb"}`,{size_mb:u>=1&&(+u.toPrecision(3)).toLocaleString(),size_kb:u<1&&(+o.toPrecision(3)).toLocaleString(),size_b:s.toLocaleString()})},yc=new WeakSet,__=async function(s,o){if(!s)return;o%180!==0&&(s={width:s.height,height:s.width});const u=(0,y.isPortraitOrientation)(s);let m={width:Math.round(s.width*100)/100,height:Math.round(s.height*100)/100},A={width:Math.round(s.width*25.4*10)/10,height:Math.round(s.height*25.4*10)/10},x=ne(m,u,ce)||ne(A,u,W);if(!x&&!(Number.isInteger(A.width)&&Number.isInteger(A.height))){const ve={width:s.width*25.4,height:s.height*25.4},Ye={width:Math.round(A.width),height:Math.round(A.height)};Math.abs(ve.width-Ye.width)<.1&&Math.abs(ve.height-Ye.height)<.1&&(x=ne(Ye,u,W),x&&(m={width:Math.round(Ye.width/25.4*100)/100,height:Math.round(Ye.height/25.4*100)/100},A=Ye))}const[{width:O,height:D},H,q,ae]=await Promise.all([this._isNonMetricLocale?m:A,this.l10n.get(`pdfjs-document-properties-page-size-unit-${this._isNonMetricLocale?"inches":"millimeters"}`),x&&this.l10n.get(`pdfjs-document-properties-page-size-name-${x}`),this.l10n.get(`pdfjs-document-properties-page-size-orientation-${u?"portrait":"landscape"}`)]);return this.l10n.get(`pdfjs-document-properties-page-size-dimension-${q?"name-":""}string`,{width:O.toLocaleString(),height:D.toLocaleString(),unit:H,name:q,orientation:ae})},sr=new WeakSet,em=async function(s){const o=C.PDFDateString.toDateObject(s);if(o)return this.l10n.get("pdfjs-document-properties-date-string",{date:o.toLocaleDateString(),time:o.toLocaleTimeString()})},ul=new WeakSet,y_=function(s){return this.l10n.get(`pdfjs-document-properties-linearized-${s?"yes":"no"}`)};const Ee={SPACE:0,ALPHA_LETTER:1,PUNCT:2,HAN_LETTER:3,KATAKANA_LETTER:4,HIRAGANA_LETTER:5,HALFWIDTH_KATAKANA_LETTER:6,THAI_LETTER:7};function be(T){return T<11904}function Je(T){return(T&65408)===0}function bt(T){return T>=97&&T<=122||T>=65&&T<=90}function dt(T){return T>=48&&T<=57}function Ct(T){return T===32||T===9||T===13||T===10}function _t(T){return T>=13312&&T<=40959||T>=63744&&T<=64255}function oe(T){return T>=12448&&T<=12543}function We(T){return T>=12352&&T<=12447}function Fe(T){return T>=65376&&T<=65439}function Ze(T){return(T&65408)===3584}function gt(T){return be(T)?Je(T)?Ct(T)?Ee.SPACE:bt(T)||dt(T)||T===95?Ee.ALPHA_LETTER:Ee.PUNCT:Ze(T)?Ee.THAI_LETTER:T===160?Ee.SPACE:Ee.ALPHA_LETTER:_t(T)?Ee.HAN_LETTER:oe(T)?Ee.KATAKANA_LETTER:We(T)?Ee.HIRAGANA_LETTER:Fe(T)?Ee.HALFWIDTH_KATAKANA_LETTER:Ee.ALPHA_LETTER}let Nt;function V(){return Nt||(Nt="---------------------------------------------------------------------------------------------------"),Nt}const j={FOUND:0,NOT_FOUND:1,WRAPPED:2,PENDING:3},se=250,fe=-50,le=-400,J={"":"-","":"'","":"'","":"'","":"'","":'"',"":'"',"":'"',"":'"',"":"1/4","":"1/2","":"3/4"},Oe=new Set([12441,12442,2381,2509,2637,2765,2893,3021,3149,3277,3387,3388,3405,3530,3642,3770,3972,4153,4154,5908,5940,6098,6752,6980,7082,7083,7154,7155,11647,43014,43052,43204,43347,43456,43766,44013,3158,3953,3954,3962,3963,3964,3965,3968,3956]);let Me;const me=/\p{M}+/gu,G=/([.*+?^${}()|[\]\\])|(\p{P})|(\s+)|(\p{M})|(\p{L})/gu,ee=/([^\p{M}])\p{M}*$/u,Se=/^\p{M}*([^\p{M}])/u,he=/[\uAC00-\uD7AF\uFA6C\uFACF-\uFAD1\uFAD5-\uFAD7]+/g,Y=new Map,$="[\\u1100-\\u1112\\ud7a4-\\ud7af\\ud84a\\ud84c\\ud850\\ud854\\ud857\\ud85f]",Q=new Map;let ye=null,Ne=null;function Qe(T){const s=[];let o;for(;(o=he.exec(T))!==null;){let{index:Ye}=o;for(const qe of o[0]){let Ke=Y.get(qe);Ke||(Ke=qe.normalize("NFD").length,Y.set(qe,Ke)),s.push([Ke,Ye++])}}let u;if(s.length===0&&ye)u=ye;else if(s.length>0&&Ne)u=Ne;else{const Ye=Object.keys(J).join(""),qe=V(),nt=`([${Ye}])|([${qe}])|((?:|)\\n)|(\\p{M}+(?:-\\n)?)|(\\S-\\n)|((?:\\p{Ideographic}|[-])\\n)|(\\n)`;s.length===0?u=ye=new RegExp(nt+"|(\\u0000)","gum"):u=Ne=new RegExp(nt+`|(${$})`,"gum")}const m=[];for(;(o=me.exec(T))!==null;)m.push([o[0].length,o.index]);let A=T.normalize("NFD");const x=[[0,0]];let O=0,D=0,H=0,q=0,ae=0,ve=!1;return A=A.replace(u,(Ye,qe,Ke,et,nt,ot,Xe,vt,ht,Ue)=>{var st,yt,Ut;if(Ue-=q,qe){const Lt=J[qe],kt=Lt.length;for(let Pt=1;Pt<kt;Pt++)x.push([Ue-H+Pt,H-Pt]);return H-=kt-1,Lt}if(Ke){let Lt=Q.get(Ke);Lt||(Lt=Ke.normalize("NFKC"),Q.set(Ke,Lt));const kt=Lt.length;for(let Pt=1;Pt<kt;Pt++)x.push([Ue-H+Pt,H-Pt]);return H-=kt-1,Lt}if(et)return ve=!0,Ue+ae===((st=m[O])==null?void 0:st[1])?++O:(x.push([Ue-1-H+1,H-1]),H-=1,q+=1),x.push([Ue-H+1,H]),q+=1,ae+=1,et.charAt(0);if(nt){const Lt=nt.endsWith(`
`),kt=Lt?nt.length-2:nt.length;ve=!0;let Pt=kt;Ue+ae===((yt=m[O])==null?void 0:yt[1])&&(Pt-=m[O][0],++O);for(let Gt=1;Gt<=Pt;Gt++)x.push([Ue-1-H+Gt,H-Gt]);return H-=Pt,q+=Pt,Lt?(Ue+=kt-1,x.push([Ue-H+1,1+H]),H+=1,q+=1,ae+=1,nt.slice(0,kt)):nt}if(ot){const Lt=ot.length-2;return x.push([Ue-H+Lt,1+H]),H+=1,q+=1,ae+=1,ot.slice(0,-2)}if(Xe){const Lt=Xe.length-1;return x.push([Ue-H+Lt,H]),q+=1,ae+=1,Xe.slice(0,-1)}if(vt)return x.push([Ue-H+1,H-1]),H-=1,q+=1,ae+=1," ";if(Ue+ae===((Ut=s[D])==null?void 0:Ut[1])){const Lt=s[D][0]-1;++D;for(let kt=1;kt<=Lt;kt++)x.push([Ue-(H-kt),H-kt]);H-=Lt,q+=Lt}return ht}),x.push([A.length,H]),[A,x,ve]}function Ot(T,s,o){if(!T)return[s,o];const u=s,m=s+o-1;let A=(0,y.binarySearchFirstItem)(T,q=>q[0]>=u);T[A][0]>u&&--A;let x=(0,y.binarySearchFirstItem)(T,q=>q[0]>=m,A);T[x][0]>m&&--x;const O=u+T[A][1],H=m+T[x][1]+1-O;return[O,H]}class Xt{constructor({linkService:s,eventBus:o,updateMatchesCountOnProgress:u=!0}){b(this,Ec);b(this,po);b(this,sn);b(this,Sc);b(this,fl);b(this,Ac);b(this,pl);b(this,Cc);b(this,Pc);b(this,go);b(this,Gr);b(this,Kr);b(this,xc);b(this,gl);b(this,Na);b(this,Fa);b(this,mo);b(this,Da);b(this,In);b(this,bs);b(this,Ii,null);b(this,Os,!0);b(this,ns,0);this._linkService=s,this._eventBus=o,R(this,Os,u),this.onIsPageVisible=null,S(this,po,tm).call(this),o._on("find",S(this,Ec,E_).bind(this)),o._on("findbarclose",S(this,mo,L_).bind(this))}get highlightMatches(){return this._highlightMatches}get pageMatches(){return this._pageMatches}get pageMatchesLength(){return this._pageMatchesLength}get selected(){return this._selected}get state(){return a(this,Ii)}setDocument(s){this._pdfDocument&&S(this,po,tm).call(this),s&&(this._pdfDocument=s,this._firstPageCapability.resolve())}scrollMatchIntoView({element:s=null,selectedLeft:o=0,pageIndex:u=-1,matchIndex:m=-1}){if(!this._scrollMatches||!s)return;if(m===-1||m!==this._selected.matchIdx)return;if(u===-1||u!==this._selected.pageIdx)return;this._scrollMatches=!1;const A={top:fe,left:o+le};(0,y.scrollIntoView)(s,A,!0)}}Ii=new WeakMap,Os=new WeakMap,ns=new WeakMap,Ec=new WeakSet,E_=function(s){if(!s)return;const o=this._pdfDocument,{type:u}=s;(a(this,Ii)===null||S(this,Sc,S_).call(this,s))&&(this._dirtyMatch=!0),R(this,Ii,s),u!=="highlightallchange"&&S(this,bs,Zh).call(this,j.PENDING),this._firstPageCapability.promise.then(()=>{if(!this._pdfDocument||o&&this._pdfDocument!==o)return;S(this,Pc,x_).call(this);const m=!this._highlightMatches,A=!!this._findTimeout;this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),u?this._dirtyMatch?S(this,Kr,od).call(this):u==="again"?(S(this,Kr,od).call(this),m&&a(this,Ii).highlightAll&&S(this,Gr,Yh).call(this)):u==="highlightallchange"?(A?S(this,Kr,od).call(this):this._highlightMatches=!0,S(this,Gr,Yh).call(this)):S(this,Kr,od).call(this):this._findTimeout=setTimeout(()=>{S(this,Kr,od).call(this),this._findTimeout=null},se)})},po=new WeakSet,tm=function(){this._highlightMatches=!1,this._scrollMatches=!1,this._pdfDocument=null,this._pageMatches=[],this._pageMatchesLength=[],R(this,ns,0),R(this,Ii,null),this._selected={pageIdx:-1,matchIdx:-1},this._offset={pageIdx:null,matchIdx:null,wrapped:!1},this._extractTextPromises=[],this._pageContents=[],this._pageDiffs=[],this._hasDiacritics=[],this._matchesCountTotal=0,this._pagesToSearch=null,this._pendingFindMatches=new Set,this._resumePageIdx=null,this._dirtyMatch=!1,clearTimeout(this._findTimeout),this._findTimeout=null,this._firstPageCapability=new C.PromiseCapability},sn=new WeakSet,im=function(){const{query:s}=a(this,Ii);return typeof s=="string"?(s!==this._rawQuery&&(this._rawQuery=s,[this._normalizedQuery]=Qe(s)),this._normalizedQuery):(s||[]).filter(o=>!!o).map(o=>Qe(o)[0])},Sc=new WeakSet,S_=function(s){var x;const o=s.query,u=a(this,Ii).query,m=typeof o;if(m!==typeof u)return!0;if(m==="string"){if(o!==u)return!0}else if(JSON.stringify(o)!==JSON.stringify(u))return!0;switch(s.type){case"again":const O=this._selected.pageIdx+1,D=this._linkService;return O>=1&&O<=D.pagesCount&&O!==D.page&&!(((x=this.onIsPageVisible)==null?void 0:x.call(this,O))??!0);case"highlightallchange":return!1}return!0},fl=new WeakSet,A_=function(s,o,u){let m=s.slice(0,o).match(ee);if(m){const A=s.charCodeAt(o),x=m[1].charCodeAt(0);if(gt(A)===gt(x))return!1}if(m=s.slice(o+u).match(Se),m){const A=s.charCodeAt(o+u-1),x=m[1].charCodeAt(0);if(gt(A)===gt(x))return!1}return!0},Ac=new WeakSet,C_=function(s,o,u,m){const A=this._pageMatches[u]=[],x=this._pageMatchesLength[u]=[];if(!s)return;const O=this._pageDiffs[u];let D;for(;(D=s.exec(m))!==null;){if(o&&!S(this,fl,A_).call(this,m,D.index,D[0].length))continue;const[H,q]=Ot(O,D.index,D[0].length);q&&(A.push(H),x.push(q))}},pl=new WeakSet,sm=function(s,o){const{matchDiacritics:u}=a(this,Ii);let m=!1;s=s.replaceAll(G,(x,O,D,H,q,ae)=>O?`[ ]*\\${O}[ ]*`:D?`[ ]*${D}[ ]*`:H?"[ ]+":u?q||ae:q?Oe.has(q.charCodeAt(0))?q:"":o?(m=!0,`${ae}\\p{M}*`):ae);const A="[ ]*";return s.endsWith(A)&&(s=s.slice(0,s.length-A.length)),u&&o&&(Me||(Me=String.fromCharCode(...Oe)),m=!0,s=`${s}(?=[${Me}]|[^\\p{M}]|$)`),[m,s]},Cc=new WeakSet,P_=function(s){let o=a(this,sn,im);if(o.length===0)return;const{caseSensitive:u,entireWord:m}=a(this,Ii),A=this._pageContents[s],x=this._hasDiacritics[s];let O=!1;typeof o=="string"?[O,o]=S(this,pl,sm).call(this,o,x):o=o.sort().reverse().map(q=>{const[ae,ve]=S(this,pl,sm).call(this,q,x);return O||(O=ae),`(${ve})`}).join("|");const D=`g${O?"u":""}${u?"":"i"}`;o=o?new RegExp(o,D):null,S(this,Ac,C_).call(this,o,m,s,A),a(this,Ii).highlightAll&&S(this,go,np).call(this,s),this._resumePageIdx===s&&(this._resumePageIdx=null,S(this,gl,nm).call(this));const H=this._pageMatches[s].length;this._matchesCountTotal+=H,a(this,Os)?H>0&&S(this,In,om).call(this):++wa(this,ns)._===this._linkService.pagesCount&&S(this,In,om).call(this)},Pc=new WeakSet,x_=function(){if(this._extractTextPromises.length>0)return;let s=Promise.resolve();const o={disableNormalization:!0};for(let u=0,m=this._linkService.pagesCount;u<m;u++){const A=new C.PromiseCapability;this._extractTextPromises[u]=A.promise,s=s.then(()=>this._pdfDocument.getPage(u+1).then(x=>x.getTextContent(o)).then(x=>{const O=[];for(const D of x.items)O.push(D.str),D.hasEOL&&O.push(`
`);[this._pageContents[u],this._pageDiffs[u],this._hasDiacritics[u]]=Qe(O.join("")),A.resolve()},x=>{console.error(`Unable to get text content for page ${u+1}`,x),this._pageContents[u]="",this._pageDiffs[u]=null,this._hasDiacritics[u]=!1,A.resolve()}))}},go=new WeakSet,np=function(s){this._scrollMatches&&this._selected.pageIdx===s&&(this._linkService.page=s+1),this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:s})},Gr=new WeakSet,Yh=function(){this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:-1})},Kr=new WeakSet,od=function(){const s=a(this,Ii).findPrevious,o=this._linkService.page-1,u=this._linkService.pagesCount;if(this._highlightMatches=!0,this._dirtyMatch){this._dirtyMatch=!1,this._selected.pageIdx=this._selected.matchIdx=-1,this._offset.pageIdx=o,this._offset.matchIdx=null,this._offset.wrapped=!1,this._resumePageIdx=null,this._pageMatches.length=0,this._pageMatchesLength.length=0,R(this,ns,0),this._matchesCountTotal=0,S(this,Gr,Yh).call(this);for(let x=0;x<u;x++)this._pendingFindMatches.has(x)||(this._pendingFindMatches.add(x),this._extractTextPromises[x].then(()=>{this._pendingFindMatches.delete(x),S(this,Cc,P_).call(this,x)}))}if(a(this,sn,im).length===0){S(this,bs,Zh).call(this,j.FOUND);return}if(this._resumePageIdx)return;const A=this._offset;if(this._pagesToSearch=u,A.matchIdx!==null){const x=this._pageMatches[A.pageIdx].length;if(!s&&A.matchIdx+1<x||s&&A.matchIdx>0){A.matchIdx=s?A.matchIdx-1:A.matchIdx+1,S(this,Fa,rp).call(this,!0);return}S(this,Na,rm).call(this,s)}S(this,gl,nm).call(this)},xc=new WeakSet,T_=function(s){const o=this._offset,u=s.length,m=a(this,Ii).findPrevious;return u?(o.matchIdx=m?u-1:0,S(this,Fa,rp).call(this,!0),!0):(S(this,Na,rm).call(this,m),o.wrapped&&(o.matchIdx=null,this._pagesToSearch<0)?(S(this,Fa,rp).call(this,!1),!0):!1)},gl=new WeakSet,nm=function(){this._resumePageIdx!==null&&console.error("There can only be one pending page.");let s=null;do{const o=this._offset.pageIdx;if(s=this._pageMatches[o],!s){this._resumePageIdx=o;break}}while(!S(this,xc,T_).call(this,s))},Na=new WeakSet,rm=function(s){const o=this._offset,u=this._linkService.pagesCount;o.pageIdx=s?o.pageIdx-1:o.pageIdx+1,o.matchIdx=null,this._pagesToSearch--,(o.pageIdx>=u||o.pageIdx<0)&&(o.pageIdx=s?u-1:0,o.wrapped=!0)},Fa=new WeakSet,rp=function(s=!1){let o=j.NOT_FOUND;const u=this._offset.wrapped;if(this._offset.wrapped=!1,s){const m=this._selected.pageIdx;this._selected.pageIdx=this._offset.pageIdx,this._selected.matchIdx=this._offset.matchIdx,o=u?j.WRAPPED:j.FOUND,m!==-1&&m!==this._selected.pageIdx&&S(this,go,np).call(this,m)}S(this,bs,Zh).call(this,o,a(this,Ii).findPrevious),this._selected.pageIdx!==-1&&(this._scrollMatches=!0,S(this,go,np).call(this,this._selected.pageIdx))},mo=new WeakSet,L_=function(s){const o=this._pdfDocument;this._firstPageCapability.promise.then(()=>{!this._pdfDocument||o&&this._pdfDocument!==o||(this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),this._resumePageIdx&&(this._resumePageIdx=null,this._dirtyMatch=!0),S(this,bs,Zh).call(this,j.FOUND),this._highlightMatches=!1,S(this,Gr,Yh).call(this))})},Da=new WeakSet,am=function(){var A;const{pageIdx:s,matchIdx:o}=this._selected;let u=0,m=this._matchesCountTotal;if(o!==-1){for(let x=0;x<s;x++)u+=((A=this._pageMatches[x])==null?void 0:A.length)||0;u+=o+1}return(u<1||u>m)&&(u=m=0),{current:u,total:m}},In=new WeakSet,om=function(){this._eventBus.dispatch("updatefindmatchescount",{source:this,matchesCount:S(this,Da,am).call(this)})},bs=new WeakSet,Zh=function(s,o=!1){var u;!a(this,Os)&&(a(this,ns)!==this._linkService.pagesCount||s===j.PENDING)||this._eventBus.dispatch("updatefindcontrolstate",{source:this,state:s,previous:o,matchesCount:S(this,Da,am).call(this),rawQuery:((u=a(this,Ii))==null?void 0:u.query)??null})};const is=1e3;class Yn{constructor(s,o){b(this,zi);b(this,Ns,new ResizeObserver(S(this,zi,R_).bind(this)));this.opened=!1,this.bar=s.bar,this.toggleButton=s.toggleButton,this.findField=s.findField,this.highlightAll=s.highlightAllCheckbox,this.caseSensitive=s.caseSensitiveCheckbox,this.matchDiacritics=s.matchDiacriticsCheckbox,this.entireWord=s.entireWordCheckbox,this.findMsg=s.findMsg,this.findResultsCount=s.findResultsCount,this.findPreviousButton=s.findPreviousButton,this.findNextButton=s.findNextButton,this.eventBus=o,this.toggleButton.addEventListener("click",()=>{this.toggle()}),this.findField.addEventListener("input",()=>{this.dispatchEvent("")}),this.bar.addEventListener("keydown",u=>{switch(u.keyCode){case 13:u.target===this.findField&&this.dispatchEvent("again",u.shiftKey);break;case 27:this.close();break}}),this.findPreviousButton.addEventListener("click",()=>{this.dispatchEvent("again",!0)}),this.findNextButton.addEventListener("click",()=>{this.dispatchEvent("again",!1)}),this.highlightAll.addEventListener("click",()=>{this.dispatchEvent("highlightallchange")}),this.caseSensitive.addEventListener("click",()=>{this.dispatchEvent("casesensitivitychange")}),this.entireWord.addEventListener("click",()=>{this.dispatchEvent("entirewordchange")}),this.matchDiacritics.addEventListener("click",()=>{this.dispatchEvent("diacriticmatchingchange")})}reset(){this.updateUIState()}dispatchEvent(s,o=!1){this.eventBus.dispatch("find",{source:this,type:s,query:this.findField.value,caseSensitive:this.caseSensitive.checked,entireWord:this.entireWord.checked,highlightAll:this.highlightAll.checked,findPrevious:o,matchDiacritics:this.matchDiacritics.checked})}updateUIState(s,o,u){const{findField:m,findMsg:A}=this;let x="",O="";switch(s){case j.FOUND:break;case j.PENDING:O="pending";break;case j.NOT_FOUND:x="pdfjs-find-not-found",O="notFound";break;case j.WRAPPED:x=`pdfjs-find-reached-${o?"top":"bottom"}`;break}m.setAttribute("data-status",O),m.setAttribute("aria-invalid",s===j.NOT_FOUND),A.setAttribute("data-status",O),x?A.setAttribute("data-l10n-id",x):(A.removeAttribute("data-l10n-id"),A.textContent=""),this.updateResultsCount(u)}updateResultsCount({current:s=0,total:o=0}={}){const{findResultsCount:u}=this;if(o>0){const m=is;u.setAttribute("data-l10n-id",`pdfjs-find-match-count${o>m?"-limit":""}`),u.setAttribute("data-l10n-args",JSON.stringify({limit:m,current:s,total:o}))}else u.removeAttribute("data-l10n-id"),u.textContent=""}open(){this.opened||(a(this,Ns).observe(this.bar.parentNode),a(this,Ns).observe(this.bar),this.opened=!0,(0,y.toggleExpandedBtn)(this.toggleButton,!0,this.bar)),this.findField.select(),this.findField.focus()}close(){this.opened&&(a(this,Ns).disconnect(),this.opened=!1,(0,y.toggleExpandedBtn)(this.toggleButton,!1,this.bar),this.eventBus.dispatch("findbarclose",{source:this}))}toggle(){this.opened?this.close():this.open()}}Ns=new WeakMap,zi=new WeakSet,R_=function(s){const{bar:o}=this;o.classList.remove("wrapContainers");const u=o.clientHeight,m=o.firstElementChild.clientHeight;u>m&&o.classList.add("wrapContainers")};const zt=1e3,oi=50,xn=1e3;function Tn(){return document.location.hash}class Ti{constructor({linkService:s,eventBus:o}){this.linkService=s,this.eventBus=o,this._initialized=!1,this._fingerprint="",this.reset(),this._boundEvents=null,this.eventBus._on("pagesinit",()=>{this._isPagesLoaded=!1,this.eventBus._on("pagesloaded",u=>{this._isPagesLoaded=!!u.pagesCount},{once:!0})})}initialize({fingerprint:s,resetHistory:o=!1,updateUrl:u=!1}){if(!s||typeof s!="string"){console.error('PDFHistory.initialize: The "fingerprint" must be a non-empty string.');return}this._initialized&&this.reset();const m=this._fingerprint!==""&&this._fingerprint!==s;this._fingerprint=s,this._updateUrl=u===!0,this._initialized=!0,this._bindEvents();const A=window.history.state;if(this._popStateInProgress=!1,this._blockHashChange=0,this._currentHash=Tn(),this._numPositionUpdates=0,this._uid=this._maxUid=0,this._destination=null,this._position=null,!this._isValidState(A,!0)||o){const{hash:O,page:D,rotation:H}=this._parseCurrentHash(!0);if(!O||m||o){this._pushOrReplaceState(null,!0);return}this._pushOrReplaceState({hash:O,page:D,rotation:H},!0);return}const x=A.destination;this._updateInternalState(x,A.uid,!0),x.rotation!==void 0&&(this._initialRotation=x.rotation),x.dest?(this._initialBookmark=JSON.stringify(x.dest),this._destination.page=null):x.hash?this._initialBookmark=x.hash:x.page&&(this._initialBookmark=`page=${x.page}`)}reset(){this._initialized&&(this._pageHide(),this._initialized=!1,this._unbindEvents()),this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._initialBookmark=null,this._initialRotation=null}push({namedDest:s=null,explicitDest:o,pageNumber:u}){if(!this._initialized)return;if(s&&typeof s!="string"){console.error(`PDFHistory.push: "${s}" is not a valid namedDest parameter.`);return}else if(Array.isArray(o)){if(!this._isValidPage(u)&&(u!==null||this._destination)){console.error(`PDFHistory.push: "${u}" is not a valid pageNumber parameter.`);return}}else{console.error(`PDFHistory.push: "${o}" is not a valid explicitDest parameter.`);return}const m=s||JSON.stringify(o);if(!m)return;let A=!1;if(this._destination&&(li(this._destination.hash,m)||_i(this._destination.dest,o))){if(this._destination.page)return;A=!0}this._popStateInProgress&&!A||(this._pushOrReplaceState({dest:o,hash:m,page:u,rotation:this.linkService.rotation},A),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1})))}pushPage(s){var o;if(this._initialized){if(!this._isValidPage(s)){console.error(`PDFHistory.pushPage: "${s}" is not a valid page number.`);return}((o=this._destination)==null?void 0:o.page)!==s&&(this._popStateInProgress||(this._pushOrReplaceState({dest:null,hash:`page=${s}`,page:s,rotation:this.linkService.rotation}),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1}))))}}pushCurrentPosition(){!this._initialized||this._popStateInProgress||this._tryPushCurrentPosition()}back(){if(!this._initialized||this._popStateInProgress)return;const s=window.history.state;this._isValidState(s)&&s.uid>0&&window.history.back()}forward(){if(!this._initialized||this._popStateInProgress)return;const s=window.history.state;this._isValidState(s)&&s.uid<this._maxUid&&window.history.forward()}get popStateInProgress(){return this._initialized&&(this._popStateInProgress||this._blockHashChange>0)}get initialBookmark(){return this._initialized?this._initialBookmark:null}get initialRotation(){return this._initialized?this._initialRotation:null}_pushOrReplaceState(s,o=!1){const u=o||!this._destination,m={fingerprint:this._fingerprint,uid:u?this._uid:this._uid+1,destination:s};this._updateInternalState(s,m.uid);let A;if(this._updateUrl&&(s!=null&&s.hash)){const x=document.location.href.split("#")[0];x.startsWith("file://")||(A=`${x}#${s.hash}`)}u?window.history.replaceState(m,"",A):window.history.pushState(m,"",A)}_tryPushCurrentPosition(s=!1){if(!this._position)return;let o=this._position;if(s&&(o=Object.assign(Object.create(null),this._position),o.temporary=!0),!this._destination){this._pushOrReplaceState(o);return}if(this._destination.temporary){this._pushOrReplaceState(o,!0);return}if(this._destination.hash===o.hash||!this._destination.page&&this._numPositionUpdates<=oi)return;let u=!1;if(this._destination.page>=o.first&&this._destination.page<=o.page){if(this._destination.dest!==void 0||!this._destination.first)return;u=!0}this._pushOrReplaceState(o,u)}_isValidPage(s){return Number.isInteger(s)&&s>0&&s<=this.linkService.pagesCount}_isValidState(s,o=!1){if(!s)return!1;if(s.fingerprint!==this._fingerprint)if(o){if(typeof s.fingerprint!="string"||s.fingerprint.length!==this._fingerprint.length)return!1;const[u]=performance.getEntriesByType("navigation");if((u==null?void 0:u.type)!=="reload")return!1}else return!1;return!(!Number.isInteger(s.uid)||s.uid<0||s.destination===null||typeof s.destination!="object")}_updateInternalState(s,o,u=!1){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),u&&(s!=null&&s.temporary)&&delete s.temporary,this._destination=s,this._uid=o,this._maxUid=Math.max(this._maxUid,o),this._numPositionUpdates=0}_parseCurrentHash(s=!1){const o=unescape(Tn()).substring(1),u=(0,y.parseQueryString)(o),m=u.get("nameddest")||"";let A=u.get("page")|0;return(!this._isValidPage(A)||s&&m.length>0)&&(A=null),{hash:o,page:A,rotation:this.linkService.rotation}}_updateViewarea({location:s}){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._position={hash:s.pdfOpenParams.substring(1),page:this.linkService.page,first:s.pageNumber,rotation:s.rotation},!this._popStateInProgress&&(this._isPagesLoaded&&this._destination&&!this._destination.page&&this._numPositionUpdates++,this._updateViewareaTimeout=setTimeout(()=>{this._popStateInProgress||this._tryPushCurrentPosition(!0),this._updateViewareaTimeout=null},xn))}_popState({state:s}){const o=Tn(),u=this._currentHash!==o;if(this._currentHash=o,!s){this._uid++;const{hash:A,page:x,rotation:O}=this._parseCurrentHash();this._pushOrReplaceState({hash:A,page:x,rotation:O},!0);return}if(!this._isValidState(s))return;this._popStateInProgress=!0,u&&(this._blockHashChange++,de({target:window,name:"hashchange",delay:zt}).then(()=>{this._blockHashChange--}));const m=s.destination;this._updateInternalState(m,s.uid,!0),(0,y.isValidRotation)(m.rotation)&&(this.linkService.rotation=m.rotation),m.dest?this.linkService.goToDestination(m.dest):m.hash?this.linkService.setHash(m.hash):m.page&&(this.linkService.page=m.page),Promise.resolve().then(()=>{this._popStateInProgress=!1})}_pageHide(){(!this._destination||this._destination.temporary)&&this._tryPushCurrentPosition()}_bindEvents(){this._boundEvents||(this._boundEvents={updateViewarea:this._updateViewarea.bind(this),popState:this._popState.bind(this),pageHide:this._pageHide.bind(this)},this.eventBus._on("updateviewarea",this._boundEvents.updateViewarea),window.addEventListener("popstate",this._boundEvents.popState),window.addEventListener("pagehide",this._boundEvents.pageHide))}_unbindEvents(){this._boundEvents&&(this.eventBus._off("updateviewarea",this._boundEvents.updateViewarea),window.removeEventListener("popstate",this._boundEvents.popState),window.removeEventListener("pagehide",this._boundEvents.pageHide),this._boundEvents=null)}}function li(T,s){return typeof T!="string"||typeof s!="string"?!1:T===s||(0,y.parseQueryString)(T).get("nameddest")===s}function _i(T,s){function o(u,m){if(typeof u!=typeof m||Array.isArray(u)||Array.isArray(m))return!1;if(u!==null&&typeof u=="object"&&m!==null){if(Object.keys(u).length!==Object.keys(m).length)return!1;for(const A in u)if(!o(u[A],m[A]))return!1;return!0}return u===m||Number.isNaN(u)&&Number.isNaN(m)}if(!(Array.isArray(T)&&Array.isArray(s))||T.length!==s.length)return!1;for(let u=0,m=T.length;u<m;u++)if(!o(T[u],s[u]))return!1;return!0}class ps extends tt{constructor(o){super(o);b(this,nr);this.eventBus._on("optionalcontentconfigchanged",u=>{S(this,nr,lm).call(this,u.promise)}),this.eventBus._on("resetlayers",()=>{S(this,nr,lm).call(this)}),this.eventBus._on("togglelayerstree",this._toggleAllTreeItems.bind(this))}reset(){super.reset(),this._optionalContentConfig=null,this._optionalContentHash=null}_dispatchEvent(o){this.eventBus.dispatch("layersloaded",{source:this,layersCount:o})}_bindLink(o,{groupId:u,input:m}){const A=()=>{this._optionalContentConfig.setVisibility(u,m.checked),this._optionalContentHash=this._optionalContentConfig.getHash(),this.eventBus.dispatch("optionalcontentconfig",{source:this,promise:Promise.resolve(this._optionalContentConfig)})};o.onclick=x=>x.target===m?(A(),!0):x.target!==o?!0:(m.checked=!m.checked,A(),!1)}async _setNestedName(o,{name:u=null}){if(typeof u=="string"){o.textContent=this._normalizeTextContent(u);return}o.textContent=await this._l10n.get("pdfjs-additional-layers"),o.style.fontStyle="italic"}_addToggleButton(o,{name:u=null}){super._addToggleButton(o,u===null)}_toggleAllTreeItems(){this._optionalContentConfig&&super._toggleAllTreeItems()}render({optionalContentConfig:o,pdfDocument:u}){this._optionalContentConfig&&this.reset(),this._optionalContentConfig=o||null,this._pdfDocument=u||null;const m=o==null?void 0:o.getOrder();if(!m){this._dispatchEvent(0);return}this._optionalContentHash=o.getHash();const A=document.createDocumentFragment(),x=[{parent:A,groups:m}];let O=0,D=!1;for(;x.length>0;){const H=x.shift();for(const q of H.groups){const ae=document.createElement("div");ae.className="treeItem";const ve=document.createElement("a");if(ae.append(ve),typeof q=="object"){D=!0,this._addToggleButton(ae,q),this._setNestedName(ve,q);const Ye=document.createElement("div");Ye.className="treeItems",ae.append(Ye),x.push({parent:Ye,groups:q.order})}else{const Ye=o.getGroup(q),qe=document.createElement("input");this._bindLink(ve,{groupId:q,input:qe}),qe.type="checkbox",qe.checked=Ye.visible;const Ke=document.createElement("label");Ke.textContent=this._normalizeTextContent(Ye.name),Ke.append(qe),ve.append(Ke),O++}H.parent.append(ae)}}this._finishRendering(A,O,D)}}nr=new WeakSet,lm=async function(o=null){if(!this._optionalContentConfig)return;const u=this._pdfDocument,m=await(o||u.getOptionalContentConfig());if(u===this._pdfDocument){if(o){if(m.getHash()===this._optionalContentHash)return}else this.eventBus.dispatch("optionalcontentconfig",{source:this,promise:Promise.resolve(m)});this.render({optionalContentConfig:m,pdfDocument:this._pdfDocument})}};class Js extends tt{constructor(s){super(s),this.linkService=s.linkService,this.downloadManager=s.downloadManager,this.eventBus._on("toggleoutlinetree",this._toggleAllTreeItems.bind(this)),this.eventBus._on("currentoutlineitem",this._currentOutlineItem.bind(this)),this.eventBus._on("pagechanging",o=>{this._currentPageNumber=o.pageNumber}),this.eventBus._on("pagesloaded",o=>{this._isPagesLoaded=!!o.pagesCount,this._currentOutlineItemCapability&&!this._currentOutlineItemCapability.settled&&this._currentOutlineItemCapability.resolve(this._isPagesLoaded)}),this.eventBus._on("sidebarviewchanged",o=>{this._sidebarView=o.view})}reset(){super.reset(),this._outline=null,this._pageNumberToDestHashCapability=null,this._currentPageNumber=1,this._isPagesLoaded=null,this._currentOutlineItemCapability&&!this._currentOutlineItemCapability.settled&&this._currentOutlineItemCapability.resolve(!1),this._currentOutlineItemCapability=null}_dispatchEvent(s){var o;this._currentOutlineItemCapability=new C.PromiseCapability,s===0||(o=this._pdfDocument)!=null&&o.loadingParams.disableAutoFetch?this._currentOutlineItemCapability.resolve(!1):this._isPagesLoaded!==null&&this._currentOutlineItemCapability.resolve(this._isPagesLoaded),this.eventBus.dispatch("outlineloaded",{source:this,outlineCount:s,currentOutlineItemPromise:this._currentOutlineItemCapability.promise})}_bindLink(s,{url:o,newWindow:u,action:m,attachment:A,dest:x,setOCGState:O}){const{linkService:D}=this;if(o){D.addLinkAttributes(s,o,u);return}if(m){s.href=D.getAnchorUrl(""),s.onclick=()=>(D.executeNamedAction(m),!1);return}if(A){s.href=D.getAnchorUrl(""),s.onclick=()=>(this.downloadManager.openOrDownloadData(A.content,A.filename),!1);return}if(O){s.href=D.getAnchorUrl(""),s.onclick=()=>(D.executeSetOCGState(O),!1);return}s.href=D.getDestinationHash(x),s.onclick=H=>(this._updateCurrentTreeItem(H.target.parentNode),x&&D.goToDestination(x),!1)}_setStyles(s,{bold:o,italic:u}){o&&(s.style.fontWeight="bold"),u&&(s.style.fontStyle="italic")}_addToggleButton(s,{count:o,items:u}){let m=!1;if(o<0){let A=u.length;if(A>0){const x=[...u];for(;x.length>0;){const{count:O,items:D}=x.shift();O>0&&D.length>0&&(A+=D.length,x.push(...D))}}Math.abs(o)===A&&(m=!0)}super._addToggleButton(s,m)}_toggleAllTreeItems(){this._outline&&super._toggleAllTreeItems()}render({outline:s,pdfDocument:o}){if(this._outline&&this.reset(),this._outline=s||null,this._pdfDocument=o||null,!s){this._dispatchEvent(0);return}const u=document.createDocumentFragment(),m=[{parent:u,items:s}];let A=0,x=!1;for(;m.length>0;){const O=m.shift();for(const D of O.items){const H=document.createElement("div");H.className="treeItem";const q=document.createElement("a");if(this._bindLink(q,D),this._setStyles(q,D),q.textContent=this._normalizeTextContent(D.title),H.append(q),D.items.length>0){x=!0,this._addToggleButton(H,D);const ae=document.createElement("div");ae.className="treeItems",H.append(ae),m.push({parent:ae,items:D.items})}O.parent.append(H),A++}}this._finishRendering(u,A,x)}async _currentOutlineItem(){if(!this._isPagesLoaded)throw new Error("_currentOutlineItem: All pages have not been loaded.");if(!this._outline||!this._pdfDocument)return;const s=await this._getPageNumberToDestHash(this._pdfDocument);if(s&&(this._updateCurrentTreeItem(null),this._sidebarView===y.SidebarView.OUTLINE))for(let o=this._currentPageNumber;o>0;o--){const u=s.get(o);if(!u)continue;const m=this.container.querySelector(`a[href="${u}"]`);if(m){this._scrollToCurrentTreeItem(m.parentNode);break}}}async _getPageNumberToDestHash(s){if(this._pageNumberToDestHashCapability)return this._pageNumberToDestHashCapability.promise;this._pageNumberToDestHashCapability=new C.PromiseCapability;const o=new Map,u=new Map,m=[{nesting:0,items:this._outline}];for(;m.length>0;){const A=m.shift(),x=A.nesting;for(const{dest:O,items:D}of A.items){let H,q;if(typeof O=="string"){if(H=await s.getDestination(O),s!==this._pdfDocument)return null}else H=O;if(Array.isArray(H)){const[ae]=H;if(typeof ae=="object"&&ae!==null){if(q=this.linkService._cachedPageNumber(ae),!q)try{if(q=await s.getPageIndex(ae)+1,s!==this._pdfDocument)return null;this.linkService.cachePageRef(q,ae)}catch{}}else Number.isInteger(ae)&&(q=ae+1);if(Number.isInteger(q)&&(!o.has(q)||x>u.get(q))){const ve=this.linkService.getDestinationHash(O);o.set(q,ve),u.set(q,x)}}D.length>0&&m.push({nesting:x+1,items:D})}}return this._pageNumberToDestHashCapability.resolve(o.size>0?o:null),this._pageNumberToDestHashCapability.promise}}const Fr=3e3,Zn="pdfPresentationMode",en="pdfPresentationModeControls",Oi=50,Dr=.1,Br=50,Be=Math.PI/6;class it{constructor({container:s,pdfViewer:o,eventBus:u}){b(this,Fs);b(this,rs);b(this,rn);b(this,Zr);b(this,rr);b(this,ar);b(this,an);b(this,kn);b(this,On);b(this,Ba);b(this,Qr);b(this,bo);b(this,on);b(this,di);b(this,Fd);b(this,nn,y.PresentationModeState.UNKNOWN);b(this,ui,null);this.container=s,this.pdfViewer=o,this.eventBus=u,this.contextMenuOpen=!1,this.mouseScrollTimeStamp=0,this.mouseScrollDelta=0,this.touchSwipeState=null}async request(){const{container:s,pdfViewer:o}=this;if(this.active||!o.pagesCount||!s.requestFullscreen)return!1;S(this,di,H_).call(this),S(this,rs,Qh).call(this,y.PresentationModeState.CHANGING);const u=s.requestFullscreen();R(this,ui,{pageNumber:o.currentPageNumber,scaleValue:o.currentScaleValue,scrollMode:o.scrollMode,spreadMode:null,annotationEditorMode:null}),o.spreadMode!==y.SpreadMode.NONE&&!(o.pageViewsReady&&o.hasEqualPageSizes)&&(console.warn("Ignoring Spread modes when entering PresentationMode, since the document may contain varying page sizes."),a(this,ui).spreadMode=o.spreadMode),o.annotationEditorMode!==C.AnnotationEditorType.DISABLE&&(a(this,ui).annotationEditorMode=o.annotationEditorMode);try{return await u,o.focus(),!0}catch{S(this,Fd,dm).call(this),S(this,rs,Qh).call(this,y.PresentationModeState.NORMAL)}return!1}get active(){return a(this,nn)===y.PresentationModeState.CHANGING||a(this,nn)===y.PresentationModeState.FULLSCREEN}}nn=new WeakMap,ui=new WeakMap,Fs=new WeakSet,M_=function(s){if(!this.active)return;s.preventDefault();const o=(0,y.normalizeWheelEventDelta)(s),u=Date.now(),m=this.mouseScrollTimeStamp;if(!(u>m&&u-m<Oi)&&((this.mouseScrollDelta>0&&o<0||this.mouseScrollDelta<0&&o>0)&&S(this,On,Jh).call(this),this.mouseScrollDelta+=o,Math.abs(this.mouseScrollDelta)>=Dr)){const A=this.mouseScrollDelta;S(this,On,Jh).call(this),(A>0?this.pdfViewer.previousPage():this.pdfViewer.nextPage())&&(this.mouseScrollTimeStamp=u)}},rs=new WeakSet,Qh=function(s){R(this,nn,s),this.eventBus.dispatch("presentationmodechanged",{source:this,state:s})},rn=new WeakSet,I_=function(){S(this,rs,Qh).call(this,y.PresentationModeState.FULLSCREEN),this.container.classList.add(Zn),setTimeout(()=>{this.pdfViewer.scrollMode=y.ScrollMode.PAGE,a(this,ui).spreadMode!==null&&(this.pdfViewer.spreadMode=y.SpreadMode.NONE),this.pdfViewer.currentPageNumber=a(this,ui).pageNumber,this.pdfViewer.currentScaleValue="page-fit",a(this,ui).annotationEditorMode!==null&&(this.pdfViewer.annotationEditorMode={mode:C.AnnotationEditorType.NONE})},0),S(this,Qr,B_).call(this),S(this,an,cm).call(this),this.contextMenuOpen=!1,window.getSelection().removeAllRanges()},Zr=new WeakSet,k_=function(){const s=this.pdfViewer.currentPageNumber;this.container.classList.remove(Zn),setTimeout(()=>{S(this,Fd,dm).call(this),S(this,rs,Qh).call(this,y.PresentationModeState.NORMAL),this.pdfViewer.scrollMode=a(this,ui).scrollMode,a(this,ui).spreadMode!==null&&(this.pdfViewer.spreadMode=a(this,ui).spreadMode),this.pdfViewer.currentScaleValue=a(this,ui).scaleValue,this.pdfViewer.currentPageNumber=s,a(this,ui).annotationEditorMode!==null&&(this.pdfViewer.annotationEditorMode={mode:a(this,ui).annotationEditorMode}),R(this,ui,null)},0),S(this,bo,V_).call(this),S(this,kn,F_).call(this),S(this,On,Jh).call(this),this.contextMenuOpen=!1},rr=new WeakSet,O_=function(s){var o;if(this.contextMenuOpen){this.contextMenuOpen=!1,s.preventDefault();return}s.button===0&&(s.target.href&&((o=s.target.parentNode)!=null&&o.hasAttribute("data-internal-link"))||(s.preventDefault(),s.shiftKey?this.pdfViewer.previousPage():this.pdfViewer.nextPage()))},ar=new WeakSet,N_=function(){this.contextMenuOpen=!0},an=new WeakSet,cm=function(){this.controlsTimeout?clearTimeout(this.controlsTimeout):this.container.classList.add(en),this.controlsTimeout=setTimeout(()=>{this.container.classList.remove(en),delete this.controlsTimeout},Fr)},kn=new WeakSet,F_=function(){this.controlsTimeout&&(clearTimeout(this.controlsTimeout),this.container.classList.remove(en),delete this.controlsTimeout)},On=new WeakSet,Jh=function(){this.mouseScrollTimeStamp=0,this.mouseScrollDelta=0},Ba=new WeakSet,D_=function(s){if(this.active){if(s.touches.length>1){this.touchSwipeState=null;return}switch(s.type){case"touchstart":this.touchSwipeState={startX:s.touches[0].pageX,startY:s.touches[0].pageY,endX:s.touches[0].pageX,endY:s.touches[0].pageY};break;case"touchmove":if(this.touchSwipeState===null)return;this.touchSwipeState.endX=s.touches[0].pageX,this.touchSwipeState.endY=s.touches[0].pageY,s.preventDefault();break;case"touchend":if(this.touchSwipeState===null)return;let o=0;const u=this.touchSwipeState.endX-this.touchSwipeState.startX,m=this.touchSwipeState.endY-this.touchSwipeState.startY,A=Math.abs(Math.atan2(m,u));Math.abs(u)>Br&&(A<=Be||A>=Math.PI-Be)?o=u:Math.abs(m)>Br&&Math.abs(A-Math.PI/2)<=Be&&(o=m),o>0?this.pdfViewer.previousPage():o<0&&this.pdfViewer.nextPage();break}}},Qr=new WeakSet,B_=function(){this.showControlsBind=S(this,an,cm).bind(this),this.mouseDownBind=S(this,rr,O_).bind(this),this.mouseWheelBind=S(this,Fs,M_).bind(this),this.resetMouseScrollStateBind=S(this,On,Jh).bind(this),this.contextMenuBind=S(this,ar,N_).bind(this),this.touchSwipeBind=S(this,Ba,D_).bind(this),window.addEventListener("mousemove",this.showControlsBind),window.addEventListener("mousedown",this.mouseDownBind),window.addEventListener("wheel",this.mouseWheelBind,{passive:!1}),window.addEventListener("keydown",this.resetMouseScrollStateBind),window.addEventListener("contextmenu",this.contextMenuBind),window.addEventListener("touchstart",this.touchSwipeBind),window.addEventListener("touchmove",this.touchSwipeBind),window.addEventListener("touchend",this.touchSwipeBind)},bo=new WeakSet,V_=function(){window.removeEventListener("mousemove",this.showControlsBind),window.removeEventListener("mousedown",this.mouseDownBind),window.removeEventListener("wheel",this.mouseWheelBind,{passive:!1}),window.removeEventListener("keydown",this.resetMouseScrollStateBind),window.removeEventListener("contextmenu",this.contextMenuBind),window.removeEventListener("touchstart",this.touchSwipeBind),window.removeEventListener("touchmove",this.touchSwipeBind),window.removeEventListener("touchend",this.touchSwipeBind),delete this.showControlsBind,delete this.mouseDownBind,delete this.mouseWheelBind,delete this.resetMouseScrollStateBind,delete this.contextMenuBind,delete this.touchSwipeBind},on=new WeakSet,j_=function(){document.fullscreenElement?S(this,rn,I_).call(this):S(this,Zr,k_).call(this)},di=new WeakSet,H_=function(){this.fullscreenChangeBind=S(this,on,j_).bind(this),window.addEventListener("fullscreenchange",this.fullscreenChangeBind)},Fd=new WeakSet,dm=function(){window.removeEventListener("fullscreenchange",this.fullscreenChangeBind),delete this.fullscreenChangeBind};const Wt=3e4;class Ft{constructor(){this.pdfViewer=null,this.pdfThumbnailViewer=null,this.onIdle=null,this.highestPriorityPage=null,this.idleTimeout=null,this.printing=!1,this.isThumbnailViewEnabled=!1,Object.defineProperty(this,"hasViewer",{value:()=>!!this.pdfViewer})}setViewer(s){this.pdfViewer=s}setThumbnailViewer(s){this.pdfThumbnailViewer=s}isHighestPriority(s){return this.highestPriorityPage===s.renderingId}renderHighestPriority(s){var o;this.idleTimeout&&(clearTimeout(this.idleTimeout),this.idleTimeout=null),!this.pdfViewer.forceRendering(s)&&(this.isThumbnailViewEnabled&&((o=this.pdfThumbnailViewer)!=null&&o.forceRendering())||this.printing||this.onIdle&&(this.idleTimeout=setTimeout(this.onIdle.bind(this),Wt)))}getHighestPriority(s,o,u,m=!1){const A=s.views,x=A.length;if(x===0)return null;for(let ae=0;ae<x;ae++){const ve=A[ae].view;if(!this.isViewFinished(ve))return ve}const O=s.first.id,D=s.last.id;if(D-O+1>x){const ae=s.ids;for(let ve=1,Ye=D-O;ve<Ye;ve++){const qe=u?O+ve:D-ve;if(ae.has(qe))continue;const Ke=o[qe-1];if(!this.isViewFinished(Ke))return Ke}}let H=u?D:O-2,q=o[H];return q&&!this.isViewFinished(q)||m&&(H+=u?1:-1,q=o[H],q&&!this.isViewFinished(q))?q:null}isViewFinished(s){return s.renderingState===y.RenderingStates.FINISHED}renderView(s){switch(s.renderingState){case y.RenderingStates.FINISHED:return!1;case y.RenderingStates.PAUSED:this.highestPriorityPage=s.renderingId,s.resume();break;case y.RenderingStates.RUNNING:this.highestPriorityPage=s.renderingId;break;case y.RenderingStates.INITIAL:this.highestPriorityPage=s.renderingId,s.draw().finally(()=>{this.renderHighestPriority()}).catch(o=>{o instanceof C.RenderingCancelledException||console.error(`renderView: "${o}"`)});break}return!0}}class ji{constructor({eventBus:s,externalServices:o=null,docProperties:u=null}){b(this,Fn);b(this,Wi);b(this,Jr);b(this,ea);b(this,ln);b(this,si,null);b(this,ni,null);b(this,fi,null);b(this,as,null);b(this,Ds,null);b(this,Jt,null);b(this,os,null);b(this,Bs,!1);b(this,$t,null);b(this,pi,null);R(this,as,s),R(this,Ds,o),R(this,fi,u)}setViewer(s){R(this,os,s)}async setDocument(s){var A;if(a(this,Jt)&&await S(this,ln,eu).call(this),R(this,Jt,s),!s)return;const[o,u,m]=await Promise.all([s.getFieldObjects(),s.getCalculationOrderIds(),s.getJSActions()]);if(!o&&!m){await S(this,ln,eu).call(this);return}if(s===a(this,Jt)){try{R(this,$t,S(this,ea,z_).call(this))}catch(x){console.error(`setDocument: "${x.message}".`),await S(this,ln,eu).call(this);return}this._internalEvents.set("updatefromsandbox",x=>{(x==null?void 0:x.source)===window&&S(this,Fn,U_).call(this,x.detail)}),this._internalEvents.set("dispatcheventinsandbox",x=>{var O;(O=a(this,$t))==null||O.dispatchEventInSandbox(x.detail)}),this._internalEvents.set("pagechanging",({pageNumber:x,previous:O})=>{x!==O&&(S(this,Jr,hm).call(this,O),S(this,Wi,ap).call(this,x))}),this._internalEvents.set("pagerendered",({pageNumber:x})=>{this._pageOpenPending.has(x)&&x===a(this,os).currentPageNumber&&S(this,Wi,ap).call(this,x)}),this._internalEvents.set("pagesdestroy",async()=>{var x,O;await S(this,Jr,hm).call(this,a(this,os).currentPageNumber),await((x=a(this,$t))==null?void 0:x.dispatchEventInSandbox({id:"doc",name:"WillClose"})),(O=a(this,si))==null||O.resolve()});for(const[x,O]of this._internalEvents)a(this,as)._on(x,O);try{const x=await a(this,fi).call(this,s);if(s!==a(this,Jt))return;await a(this,$t).createSandbox({objects:o,calculationOrder:u,appInfo:{platform:navigator.platform,language:navigator.language},docInfo:{...x,actions:m}}),a(this,as).dispatch("sandboxcreated",{source:this})}catch(x){console.error(`setDocument: "${x.message}".`),await S(this,ln,eu).call(this);return}await((A=a(this,$t))==null?void 0:A.dispatchEventInSandbox({id:"doc",name:"Open"})),await S(this,Wi,ap).call(this,a(this,os).currentPageNumber,!0),Promise.resolve().then(()=>{s===a(this,Jt)&&R(this,Bs,!0)})}}async dispatchWillSave(){var s;return(s=a(this,$t))==null?void 0:s.dispatchEventInSandbox({id:"doc",name:"WillSave"})}async dispatchDidSave(){var s;return(s=a(this,$t))==null?void 0:s.dispatchEventInSandbox({id:"doc",name:"DidSave"})}async dispatchWillPrint(){var s;if(a(this,$t)){await((s=a(this,pi))==null?void 0:s.promise),R(this,pi,new C.PromiseCapability);try{await a(this,$t).dispatchEventInSandbox({id:"doc",name:"WillPrint"})}catch(o){throw a(this,pi).resolve(),R(this,pi,null),o}await a(this,pi).promise}}async dispatchDidPrint(){var s;return(s=a(this,$t))==null?void 0:s.dispatchEventInSandbox({id:"doc",name:"DidPrint"})}get destroyPromise(){var s;return((s=a(this,ni))==null?void 0:s.promise)||null}get ready(){return a(this,Bs)}get _internalEvents(){return(0,C.shadow)(this,"_internalEvents",new Map)}get _pageOpenPending(){return(0,C.shadow)(this,"_pageOpenPending",new Set)}get _visitedPages(){return(0,C.shadow)(this,"_visitedPages",new Map)}}si=new WeakMap,ni=new WeakMap,fi=new WeakMap,as=new WeakMap,Ds=new WeakMap,Jt=new WeakMap,os=new WeakMap,Bs=new WeakMap,$t=new WeakMap,pi=new WeakMap,Fn=new WeakSet,U_=async function(s){var H,q;const o=a(this,os),u=o.isInPresentationMode||o.isChangingPresentationMode,{id:m,siblings:A,command:x,value:O}=s;if(!m){switch(x){case"clear":console.clear();break;case"error":console.error(O);break;case"layout":if(!u){const ae=(0,y.apiPageLayoutToViewerModes)(O);o.spreadMode=ae.spreadMode}break;case"page-num":o.currentPageNumber=O+1;break;case"print":await o.pagesPromise,a(this,as).dispatch("print",{source:this});break;case"println":console.log(O);break;case"zoom":u||(o.currentScaleValue=O);break;case"SaveAs":a(this,as).dispatch("download",{source:this});break;case"FirstPage":o.currentPageNumber=1;break;case"LastPage":o.currentPageNumber=o.pagesCount;break;case"NextPage":o.nextPage();break;case"PrevPage":o.previousPage();break;case"ZoomViewIn":u||o.increaseScale();break;case"ZoomViewOut":u||o.decreaseScale();break;case"WillPrintFinished":(H=a(this,pi))==null||H.resolve(),R(this,pi,null);break}return}if(u&&s.focus)return;delete s.id,delete s.siblings;const D=A?[m,...A]:[m];for(const ae of D){const ve=document.querySelector(`[data-element-id="${ae}"]`);ve?ve.dispatchEvent(new CustomEvent("updatefromsandbox",{detail:s})):(q=a(this,Jt))==null||q.annotationStorage.setValue(ae,s)}},Wi=new WeakSet,ap=async function(s,o=!1){const u=a(this,Jt),m=this._visitedPages;if(o&&R(this,si,new C.PromiseCapability),!a(this,si))return;const A=a(this,os).getPageView(s-1);if((A==null?void 0:A.renderingState)!==y.RenderingStates.FINISHED){this._pageOpenPending.add(s);return}this._pageOpenPending.delete(s);const x=(async()=>{var D,H;const O=await(m.has(s)?null:(D=A.pdfPage)==null?void 0:D.getJSActions());u===a(this,Jt)&&await((H=a(this,$t))==null?void 0:H.dispatchEventInSandbox({id:"page",name:"PageOpen",pageNumber:s,actions:O}))})();m.set(s,x)},Jr=new WeakSet,hm=async function(s){var A;const o=a(this,Jt),u=this._visitedPages;if(!a(this,si)||this._pageOpenPending.has(s))return;const m=u.get(s);m&&(u.set(s,null),await m,o===a(this,Jt)&&await((A=a(this,$t))==null?void 0:A.dispatchEventInSandbox({id:"page",name:"PageClose",pageNumber:s})))},ea=new WeakSet,z_=function(){if(R(this,ni,new C.PromiseCapability),a(this,$t))throw new Error("#initScripting: Scripting already exists.");return a(this,Ds).createScripting()},ln=new WeakSet,eu=async function(){var s,o,u;if(!a(this,$t)){R(this,Jt,null),(s=a(this,ni))==null||s.resolve();return}a(this,si)&&(await Promise.race([a(this,si).promise,new Promise(m=>{setTimeout(m,1e3)})]).catch(()=>{}),R(this,si,null)),R(this,Jt,null);try{await a(this,$t).destroySandbox()}catch{}(o=a(this,pi))==null||o.reject(new Error("Scripting destroyed.")),R(this,pi,null);for(const[m,A]of this._internalEvents)a(this,as)._off(m,A);this._internalEvents.clear(),this._pageOpenPending.clear(),this._visitedPages.clear(),R(this,$t,null),R(this,Bs,!1),(u=a(this,ni))==null||u.resolve()};const Li="--sidebar-width",Xo=200,dc="sidebarResizing",Lu="pdfSidebarNotification";class Sd{constructor({elements:s,eventBus:o,l10n:u}){b(this,js);b(this,ta);b(this,cr);b(this,ia);b(this,vs);b(this,Hs);b(this,ja);b(this,Dt,!1);b(this,cn,S(this,Hs,q_).bind(this));b(this,or,S(this,ja,G_).bind(this));b(this,lr,null);b(this,Vs,null);this.isOpen=!1,this.active=y.SidebarView.THUMBS,this.isInitialViewSet=!1,this.isInitialEventDispatched=!1,this.onToggled=null,this.onUpdateThumbnails=null,this.outerContainer=s.outerContainer,this.sidebarContainer=s.sidebarContainer,this.toggleButton=s.toggleButton,this.resizer=s.resizer,this.thumbnailButton=s.thumbnailButton,this.outlineButton=s.outlineButton,this.attachmentsButton=s.attachmentsButton,this.layersButton=s.layersButton,this.thumbnailView=s.thumbnailView,this.outlineView=s.outlineView,this.attachmentsView=s.attachmentsView,this.layersView=s.layersView,this._currentOutlineItemButton=s.currentOutlineItemButton,this.eventBus=o,R(this,Dt,u.getDirection()==="rtl"),S(this,ia,$_).call(this)}reset(){this.isInitialViewSet=!1,this.isInitialEventDispatched=!1,S(this,cr,um).call(this,!0),this.switchView(y.SidebarView.THUMBS),this.outlineButton.disabled=!1,this.attachmentsButton.disabled=!1,this.layersButton.disabled=!1,this._currentOutlineItemButton.disabled=!0}get visibleView(){return this.isOpen?this.active:y.SidebarView.NONE}setInitialView(s=y.SidebarView.NONE){if(!this.isInitialViewSet){if(this.isInitialViewSet=!0,s===y.SidebarView.NONE||s===y.SidebarView.UNKNOWN){S(this,js,ld).call(this);return}this.switchView(s,!0),this.isInitialEventDispatched||S(this,js,ld).call(this)}}switchView(s,o=!1){const u=s!==this.active;let m=!1;switch(s){case y.SidebarView.NONE:this.isOpen&&this.close();return;case y.SidebarView.THUMBS:this.isOpen&&u&&(m=!0);break;case y.SidebarView.OUTLINE:if(this.outlineButton.disabled)return;break;case y.SidebarView.ATTACHMENTS:if(this.attachmentsButton.disabled)return;break;case y.SidebarView.LAYERS:if(this.layersButton.disabled)return;break;default:console.error(`PDFSidebar.switchView: "${s}" is not a valid view.`);return}if(this.active=s,(0,y.toggleCheckedBtn)(this.thumbnailButton,s===y.SidebarView.THUMBS,this.thumbnailView),(0,y.toggleCheckedBtn)(this.outlineButton,s===y.SidebarView.OUTLINE,this.outlineView),(0,y.toggleCheckedBtn)(this.attachmentsButton,s===y.SidebarView.ATTACHMENTS,this.attachmentsView),(0,y.toggleCheckedBtn)(this.layersButton,s===y.SidebarView.LAYERS,this.layersView),o&&!this.isOpen){this.open();return}m&&(this.onUpdateThumbnails(),this.onToggled()),u&&S(this,js,ld).call(this)}open(){this.isOpen||(this.isOpen=!0,(0,y.toggleExpandedBtn)(this.toggleButton,!0),this.outerContainer.classList.add("sidebarMoving","sidebarOpen"),this.active===y.SidebarView.THUMBS&&this.onUpdateThumbnails(),this.onToggled(),S(this,js,ld).call(this),S(this,cr,um).call(this))}close(s=null){this.isOpen&&(this.isOpen=!1,(0,y.toggleExpandedBtn)(this.toggleButton,!1),this.outerContainer.classList.add("sidebarMoving"),this.outerContainer.classList.remove("sidebarOpen"),this.onToggled(),S(this,js,ld).call(this),(s==null?void 0:s.detail)>0&&this.toggleButton.blur())}toggle(s=null){this.isOpen?this.close(s):this.open()}get outerContainerWidth(){return a(this,lr)||R(this,lr,this.outerContainer.clientWidth)}}Dt=new WeakMap,cn=new WeakMap,or=new WeakMap,lr=new WeakMap,Vs=new WeakMap,js=new WeakSet,ld=function(){this.isInitialViewSet&&(this.isInitialEventDispatched||(this.isInitialEventDispatched=!0)),this.eventBus.dispatch("sidebarviewchanged",{source:this,view:this.visibleView})},ta=new WeakSet,W_=function(){this.toggleButton.setAttribute("data-l10n-id","pdfjs-toggle-sidebar-notification-button"),this.isOpen||this.toggleButton.classList.add(Lu)},cr=new WeakSet,um=function(s=!1){(this.isOpen||s)&&this.toggleButton.classList.remove(Lu),s&&this.toggleButton.setAttribute("data-l10n-id","pdfjs-toggle-sidebar-button")},ia=new WeakSet,$_=function(){this.sidebarContainer.addEventListener("transitionend",o=>{o.target===this.sidebarContainer&&(this.outerContainer.classList.remove("sidebarMoving"),this.eventBus.dispatch("resize",{source:this}))}),this.toggleButton.addEventListener("click",o=>{this.toggle(o)}),this.thumbnailButton.addEventListener("click",()=>{this.switchView(y.SidebarView.THUMBS)}),this.outlineButton.addEventListener("click",()=>{this.switchView(y.SidebarView.OUTLINE)}),this.outlineButton.addEventListener("dblclick",()=>{this.eventBus.dispatch("toggleoutlinetree",{source:this})}),this.attachmentsButton.addEventListener("click",()=>{this.switchView(y.SidebarView.ATTACHMENTS)}),this.layersButton.addEventListener("click",()=>{this.switchView(y.SidebarView.LAYERS)}),this.layersButton.addEventListener("dblclick",()=>{this.eventBus.dispatch("resetlayers",{source:this})}),this._currentOutlineItemButton.addEventListener("click",()=>{this.eventBus.dispatch("currentoutlineitem",{source:this})});const s=(o,u,m)=>{u.disabled=!o,o?S(this,ta,W_).call(this):this.active===m&&this.switchView(y.SidebarView.THUMBS)};this.eventBus._on("outlineloaded",o=>{s(o.outlineCount,this.outlineButton,y.SidebarView.OUTLINE),o.currentOutlineItemPromise.then(u=>{this.isInitialViewSet&&(this._currentOutlineItemButton.disabled=!u)})}),this.eventBus._on("attachmentsloaded",o=>{s(o.attachmentsCount,this.attachmentsButton,y.SidebarView.ATTACHMENTS)}),this.eventBus._on("layersloaded",o=>{s(o.layersCount,this.layersButton,y.SidebarView.LAYERS)}),this.eventBus._on("presentationmodechanged",o=>{o.state===y.PresentationModeState.NORMAL&&this.visibleView===y.SidebarView.THUMBS&&this.onUpdateThumbnails()}),this.resizer.addEventListener("mousedown",o=>{o.button===0&&(this.outerContainer.classList.add(dc),window.addEventListener("mousemove",a(this,cn)),window.addEventListener("mouseup",a(this,or)))}),this.eventBus._on("resize",o=>{if(o.source!==window||(R(this,lr,null),!a(this,Vs)))return;if(!this.isOpen){S(this,vs,op).call(this,a(this,Vs));return}this.outerContainer.classList.add(dc);const u=S(this,vs,op).call(this,a(this,Vs));Promise.resolve().then(()=>{this.outerContainer.classList.remove(dc),u&&this.eventBus.dispatch("resize",{source:this})})})},vs=new WeakSet,op=function(s=0){const o=Math.floor(this.outerContainerWidth/2);return s>o&&(s=o),s<Xo&&(s=Xo),s===a(this,Vs)?!1:(R(this,Vs,s),y.docStyle.setProperty(Li,`${s}px`),!0)},Hs=new WeakSet,q_=function(s){let o=s.clientX;a(this,Dt)&&(o=this.outerContainerWidth-o),S(this,vs,op).call(this,o)},ja=new WeakSet,G_=function(s){this.outerContainer.classList.remove(dc),this.eventBus.dispatch("resize",{source:this}),window.removeEventListener("mousemove",a(this,cn)),window.removeEventListener("mouseup",a(this,or))};const Ru=2,Yo=3,Ad=98;class Qn{static getCanvas(s,o){const u=a(this,Dn)||R(this,Dn,document.createElement("canvas"));u.width=s,u.height=o;const m=u.getContext("2d",{alpha:!1});return m.save(),m.fillStyle="rgb(255, 255, 255)",m.fillRect(0,0,s,o),m.restore(),[u,u.getContext("2d")]}static destroyCanvas(){const s=a(this,Dn);s&&(s.width=0,s.height=0),R(this,Dn,null)}}Dn=new WeakMap,b(Qn,Dn,null);class hc{constructor({container:s,eventBus:o,id:u,defaultViewport:m,optionalContentConfigPromise:A,linkService:x,renderingQueue:O,pageColors:D}){b(this,zd);b(this,$d);b(this,vl);this.id=u,this.renderingId="thumbnail"+u,this.pageLabel=null,this.pdfPage=null,this.rotation=0,this.viewport=m,this.pdfPageRotate=m.rotation,this._optionalContentConfigPromise=A||null,this.pageColors=D||null,this.eventBus=o,this.linkService=x,this.renderingQueue=O,this.renderTask=null,this.renderingState=y.RenderingStates.INITIAL,this.resume=null;const H=document.createElement("a");H.href=x.getAnchorUrl("#page="+u),H.setAttribute("data-l10n-id","pdfjs-thumb-page-title"),H.setAttribute("data-l10n-args",a(this,vl,tu)),H.onclick=function(){return x.goToPage(u),!1},this.anchor=H;const q=document.createElement("div");q.className="thumbnail",q.setAttribute("data-page-number",this.id),this.div=q,S(this,zd,fm).call(this);const ae=document.createElement("div");ae.className="thumbnailImage",this._placeholderImg=ae,q.append(ae),H.append(q),s.append(H)}setPdfPage(s){this.pdfPage=s,this.pdfPageRotate=s.rotate;const o=(this.rotation+this.pdfPageRotate)%360;this.viewport=s.getViewport({scale:1,rotation:o}),this.reset()}reset(){var s;this.cancelRendering(),this.renderingState=y.RenderingStates.INITIAL,this.div.removeAttribute("data-loaded"),(s=this.image)==null||s.replaceWith(this._placeholderImg),S(this,zd,fm).call(this),this.image&&(this.image.removeAttribute("src"),delete this.image)}update({rotation:s=null}){typeof s=="number"&&(this.rotation=s);const o=(this.rotation+this.pdfPageRotate)%360;this.viewport=this.viewport.clone({scale:1,rotation:o}),this.reset()}cancelRendering(){this.renderTask&&(this.renderTask.cancel(),this.renderTask=null),this.resume=null}_getPageDrawContext(s=1){const o=document.createElement("canvas"),u=o.getContext("2d",{alpha:!1}),m=new y.OutputScale;o.width=s*this.canvasWidth*m.sx|0,o.height=s*this.canvasHeight*m.sy|0;const A=m.scaled?[m.sx,0,0,m.sy,0,0]:null;return{ctx:u,canvas:o,transform:A}}_convertCanvasToImage(s){if(this.renderingState!==y.RenderingStates.FINISHED)throw new Error("_convertCanvasToImage: Rendering has not finished.");const o=this._reduceImage(s),u=document.createElement("img");u.className="thumbnailImage",u.setAttribute("data-l10n-id","pdfjs-thumb-page-canvas"),u.setAttribute("data-l10n-args",a(this,vl,tu)),u.src=o.toDataURL(),this.image=u,this.div.setAttribute("data-loaded",!0),this._placeholderImg.replaceWith(u),o.width=0,o.height=0}async draw(){if(this.renderingState!==y.RenderingStates.INITIAL){console.error("Must be in new state before drawing");return}const{pdfPage:s}=this;if(!s)throw this.renderingState=y.RenderingStates.FINISHED,new Error("pdfPage is not loaded");this.renderingState=y.RenderingStates.RUNNING;const{ctx:o,canvas:u,transform:m}=this._getPageDrawContext(Ru),A=this.viewport.clone({scale:Ru*this.scale}),x=q=>{if(!this.renderingQueue.isHighestPriority(this)){this.renderingState=y.RenderingStates.PAUSED,this.resume=()=>{this.renderingState=y.RenderingStates.RUNNING,q()};return}q()},O={canvasContext:o,transform:m,viewport:A,optionalContentConfigPromise:this._optionalContentConfigPromise,pageColors:this.pageColors},D=this.renderTask=s.render(O);D.onContinue=x;const H=D.promise.then(()=>S(this,$d,pm).call(this,D,u),q=>S(this,$d,pm).call(this,D,u,q));return H.finally(()=>{u.width=0,u.height=0,this.eventBus.dispatch("thumbnailrendered",{source:this,pageNumber:this.id,pdfPage:this.pdfPage})}),H}setImage(s){if(this.renderingState!==y.RenderingStates.INITIAL)return;const{thumbnailCanvas:o,pdfPage:u,scale:m}=s;o&&(this.pdfPage||this.setPdfPage(u),!(m<this.scale)&&(this.renderingState=y.RenderingStates.FINISHED,this._convertCanvasToImage(o)))}_reduceImage(s){const{ctx:o,canvas:u}=this._getPageDrawContext();if(s.width<=2*u.width)return o.drawImage(s,0,0,s.width,s.height,0,0,u.width,u.height),u;let m=u.width<<Yo,A=u.height<<Yo;const[x,O]=Qn.getCanvas(m,A);for(;m>s.width||A>s.height;)m>>=1,A>>=1;for(O.drawImage(s,0,0,s.width,s.height,0,0,m,A);m>2*u.width;)O.drawImage(x,0,0,m,A,0,0,m>>1,A>>1),m>>=1,A>>=1;return o.drawImage(x,0,0,m,A,0,0,u.width,u.height),u}setPageLabel(s){var o;this.pageLabel=typeof s=="string"?s:null,this.anchor.setAttribute("data-l10n-args",a(this,vl,tu)),this.renderingState===y.RenderingStates.FINISHED&&((o=this.image)==null||o.setAttribute("data-l10n-args",a(this,vl,tu)))}}zd=new WeakSet,fm=function(){const{width:s,height:o}=this.viewport,u=s/o;this.canvasWidth=Ad,this.canvasHeight=this.canvasWidth/u|0,this.scale=this.canvasWidth/s;const{style:m}=this.div;m.setProperty("--thumbnail-width",`${this.canvasWidth}px`),m.setProperty("--thumbnail-height",`${this.canvasHeight}px`)},$d=new WeakSet,pm=async function(s,o,u=null){if(s===this.renderTask&&(this.renderTask=null),!(u instanceof C.RenderingCancelledException)&&(this.renderingState=y.RenderingStates.FINISHED,this._convertCanvasToImage(o),u))throw u},vl=new WeakSet,tu=function(){return JSON.stringify({page:this.pageLabel??this.id})};const Cd=-19,Vt="selected";class Kp{constructor({container:s,eventBus:o,linkService:u,renderingQueue:m,pageColors:A}){b(this,Ku);b(this,Xu);this.container=s,this.eventBus=o,this.linkService=u,this.renderingQueue=m,this.pageColors=A||null,this.scroll=(0,y.watchScroll)(this.container,this._scrollUpdated.bind(this)),this._resetView()}_scrollUpdated(){this.renderingQueue.renderHighestPriority()}getThumbnail(s){return this._thumbnails[s]}_getVisibleThumbs(){return(0,y.getVisibleElements)({scrollEl:this.container,views:this._thumbnails})}scrollThumbnailIntoView(s){if(!this.pdfDocument)return;const o=this._thumbnails[s-1];if(!o){console.error('scrollThumbnailIntoView: Invalid "pageNumber" parameter.');return}s!==this._currentPageNumber&&(this._thumbnails[this._currentPageNumber-1].div.classList.remove(Vt),o.div.classList.add(Vt));const{first:u,last:m,views:A}=this._getVisibleThumbs();if(A.length>0){let x=!1;if(s<=u.id||s>=m.id)x=!0;else for(const{id:O,percent:D}of A)if(O===s){x=D<100;break}x&&(0,y.scrollIntoView)(o.div,{top:Cd})}this._currentPageNumber=s}get pagesRotation(){return this._pagesRotation}set pagesRotation(s){if(!(0,y.isValidRotation)(s))throw new Error("Invalid thumbnails rotation angle.");if(!this.pdfDocument||this._pagesRotation===s)return;this._pagesRotation=s;const o={rotation:s};for(const u of this._thumbnails)u.update(o)}cleanup(){for(const s of this._thumbnails)s.renderingState!==y.RenderingStates.FINISHED&&s.reset();Qn.destroyCanvas()}_resetView(){this._thumbnails=[],this._currentPageNumber=1,this._pageLabels=null,this._pagesRotation=0,this.container.textContent=""}setDocument(s){if(this.pdfDocument&&(this._cancelRendering(),this._resetView()),this.pdfDocument=s,!s)return;const o=s.getPage(1),u=s.getOptionalContentConfig();o.then(m=>{var D;const A=s.numPages,x=m.getViewport({scale:1});for(let H=1;H<=A;++H){const q=new hc({container:this.container,eventBus:this.eventBus,id:H,defaultViewport:x.clone(),optionalContentConfigPromise:u,linkService:this.linkService,renderingQueue:this.renderingQueue,pageColors:this.pageColors});this._thumbnails.push(q)}(D=this._thumbnails[0])==null||D.setPdfPage(m),this._thumbnails[this._currentPageNumber-1].div.classList.add(Vt)}).catch(m=>{console.error("Unable to initialize thumbnail viewer",m)})}_cancelRendering(){for(const s of this._thumbnails)s.cancelRendering()}setPageLabels(s){var o;if(this.pdfDocument){s?Array.isArray(s)&&this.pdfDocument.numPages===s.length?this._pageLabels=s:(this._pageLabels=null,console.error("PDFThumbnailViewer_setPageLabels: Invalid page labels.")):this._pageLabels=null;for(let u=0,m=this._thumbnails.length;u<m;u++)this._thumbnails[u].setPageLabel(((o=this._pageLabels)==null?void 0:o[u])??null)}}forceRendering(){const s=this._getVisibleThumbs(),o=S(this,Xu,X_).call(this,s),u=this.renderingQueue.getHighestPriority(s,this._thumbnails,o);return u?(S(this,Ku,K_).call(this,u).then(()=>{this.renderingQueue.renderView(u)}),!0):!1}}Ku=new WeakSet,K_=async function(s){if(s.pdfPage)return s.pdfPage;try{const o=await this.pdfDocument.getPage(s.id);return s.pdfPage||s.setPdfPage(o),o}catch(o){return console.error("Unable to get page for thumb view",o),null}},Xu=new WeakSet,X_=function(s){var o,u;return((o=s.first)==null?void 0:o.id)===1?!0:((u=s.last)==null?void 0:u.id)===this._thumbnails.length?!1:this.scroll.down};var Pd=k(759),Rs=k(275),Ln=k(65);const Rc=class Rc extends Ln.L10n{constructor(s){super({lang:s}),this._setL10n(new Rs.DOMLocalization([],S(Rc,Yu,Y_).bind(Rc,s)))}static get instance(){return(0,C.shadow)(this,"instance",new Rc("en-us"))}};Yu=new WeakSet,Y_=async function*(s){const o=`pdfjs-previous-button =
    .title = Previous Page
pdfjs-previous-button-label = Previous
pdfjs-next-button =
    .title = Next Page
pdfjs-next-button-label = Next
pdfjs-page-input =
    .title = Page
pdfjs-of-pages = of { $pagesCount }
pdfjs-page-of-pages = ({ $pageNumber } of { $pagesCount })
pdfjs-zoom-out-button =
    .title = Zoom Out
pdfjs-zoom-out-button-label = Zoom Out
pdfjs-zoom-in-button =
    .title = Zoom In
pdfjs-zoom-in-button-label = Zoom In
pdfjs-zoom-select =
    .title = Zoom
pdfjs-presentation-mode-button =
    .title = Switch to Presentation Mode
pdfjs-presentation-mode-button-label = Presentation Mode
pdfjs-open-file-button =
    .title = Open File
pdfjs-open-file-button-label = Open
pdfjs-print-button =
    .title = Print
pdfjs-print-button-label = Print
pdfjs-save-button =
    .title = Save
pdfjs-save-button-label = Save
pdfjs-download-button =
    .title = Download
pdfjs-download-button-label = Download
pdfjs-bookmark-button =
    .title = Current Page (View URL from Current Page)
pdfjs-bookmark-button-label = Current Page
pdfjs-open-in-app-button =
    .title = Open in app
pdfjs-open-in-app-button-label = Open in app
pdfjs-tools-button =
    .title = Tools
pdfjs-tools-button-label = Tools
pdfjs-first-page-button =
    .title = Go to First Page
pdfjs-first-page-button-label = Go to First Page
pdfjs-last-page-button =
    .title = Go to Last Page
pdfjs-last-page-button-label = Go to Last Page
pdfjs-page-rotate-cw-button =
    .title = Rotate Clockwise
pdfjs-page-rotate-cw-button-label = Rotate Clockwise
pdfjs-page-rotate-ccw-button =
    .title = Rotate Counterclockwise
pdfjs-page-rotate-ccw-button-label = Rotate Counterclockwise
pdfjs-cursor-text-select-tool-button =
    .title = Enable Text Selection Tool
pdfjs-cursor-text-select-tool-button-label = Text Selection Tool
pdfjs-cursor-hand-tool-button =
    .title = Enable Hand Tool
pdfjs-cursor-hand-tool-button-label = Hand Tool
pdfjs-scroll-page-button =
    .title = Use Page Scrolling
pdfjs-scroll-page-button-label = Page Scrolling
pdfjs-scroll-vertical-button =
    .title = Use Vertical Scrolling
pdfjs-scroll-vertical-button-label = Vertical Scrolling
pdfjs-scroll-horizontal-button =
    .title = Use Horizontal Scrolling
pdfjs-scroll-horizontal-button-label = Horizontal Scrolling
pdfjs-scroll-wrapped-button =
    .title = Use Wrapped Scrolling
pdfjs-scroll-wrapped-button-label = Wrapped Scrolling
pdfjs-spread-none-button =
    .title = Do not join page spreads
pdfjs-spread-none-button-label = No Spreads
pdfjs-spread-odd-button =
    .title = Join page spreads starting with odd-numbered pages
pdfjs-spread-odd-button-label = Odd Spreads
pdfjs-spread-even-button =
    .title = Join page spreads starting with even-numbered pages
pdfjs-spread-even-button-label = Even Spreads
pdfjs-document-properties-button =
    .title = Document Properties
pdfjs-document-properties-button-label = Document Properties
pdfjs-document-properties-file-name = File name:
pdfjs-document-properties-file-size = File size:
pdfjs-document-properties-kb = { $size_kb } KB ({ $size_b } bytes)
pdfjs-document-properties-mb = { $size_mb } MB ({ $size_b } bytes)
pdfjs-document-properties-title = Title:
pdfjs-document-properties-author = Author:
pdfjs-document-properties-subject = Subject:
pdfjs-document-properties-keywords = Keywords:
pdfjs-document-properties-creation-date = Creation Date:
pdfjs-document-properties-modification-date = Modification Date:
pdfjs-document-properties-date-string = { $date }, { $time }
pdfjs-document-properties-creator = Creator:
pdfjs-document-properties-producer = PDF Producer:
pdfjs-document-properties-version = PDF Version:
pdfjs-document-properties-page-count = Page Count:
pdfjs-document-properties-page-size = Page Size:
pdfjs-document-properties-page-size-unit-inches = in
pdfjs-document-properties-page-size-unit-millimeters = mm
pdfjs-document-properties-page-size-orientation-portrait = portrait
pdfjs-document-properties-page-size-orientation-landscape = landscape
pdfjs-document-properties-page-size-name-a-three = A3
pdfjs-document-properties-page-size-name-a-four = A4
pdfjs-document-properties-page-size-name-letter = Letter
pdfjs-document-properties-page-size-name-legal = Legal
pdfjs-document-properties-page-size-dimension-string = { $width }  { $height } { $unit } ({ $orientation })
pdfjs-document-properties-page-size-dimension-name-string = { $width }  { $height } { $unit } ({ $name }, { $orientation })
pdfjs-document-properties-linearized = Fast Web View:
pdfjs-document-properties-linearized-yes = Yes
pdfjs-document-properties-linearized-no = No
pdfjs-document-properties-close-button = Close
pdfjs-print-progress-message = Preparing document for printing
pdfjs-print-progress-percent = { $progress }%
pdfjs-print-progress-close-button = Cancel
pdfjs-printing-not-supported = Warning: Printing is not fully supported by this browser.
pdfjs-printing-not-ready = Warning: The PDF is not fully loaded for printing.
pdfjs-toggle-sidebar-button =
    .title = Toggle Sidebar
pdfjs-toggle-sidebar-notification-button =
    .title = Toggle Sidebar (document contains outline/attachments/layers)
pdfjs-toggle-sidebar-button-label = Toggle Sidebar
pdfjs-document-outline-button =
    .title = Show Document Outline (double-click to expand/collapse all items)
pdfjs-document-outline-button-label = Document Outline
pdfjs-attachments-button =
    .title = Show Attachments
pdfjs-attachments-button-label = Attachments
pdfjs-layers-button =
    .title = Show Layers (double-click to reset all layers to the default state)
pdfjs-layers-button-label = Layers
pdfjs-thumbs-button =
    .title = Show Thumbnails
pdfjs-thumbs-button-label = Thumbnails
pdfjs-current-outline-item-button =
    .title = Find Current Outline Item
pdfjs-current-outline-item-button-label = Current Outline Item
pdfjs-findbar-button =
    .title = Find in Document
pdfjs-findbar-button-label = Find
pdfjs-additional-layers = Additional Layers
pdfjs-thumb-page-title =
    .title = Page { $page }
pdfjs-thumb-page-canvas =
    .aria-label = Thumbnail of Page { $page }
pdfjs-find-input =
    .title = Find
    .placeholder = Find in document
pdfjs-find-previous-button =
    .title = Find the previous occurrence of the phrase
pdfjs-find-previous-button-label = Previous
pdfjs-find-next-button =
    .title = Find the next occurrence of the phrase
pdfjs-find-next-button-label = Next
pdfjs-find-highlight-checkbox = Highlight All
pdfjs-find-match-case-checkbox-label = Match Case
pdfjs-find-match-diacritics-checkbox-label = Match Diacritics
pdfjs-find-entire-word-checkbox-label = Whole Words
pdfjs-find-reached-top = Reached top of document, continued from bottom
pdfjs-find-reached-bottom = Reached end of document, continued from top
pdfjs-find-match-count =
    { $total ->
        [one] { $current } of { $total } match
       *[other] { $current } of { $total } matches
    }
pdfjs-find-match-count-limit =
    { $limit ->
        [one] More than { $limit } match
       *[other] More than { $limit } matches
    }
pdfjs-find-not-found = Phrase not found
pdfjs-page-scale-width = Page Width
pdfjs-page-scale-fit = Page Fit
pdfjs-page-scale-auto = Automatic Zoom
pdfjs-page-scale-actual = Actual Size
pdfjs-page-scale-percent = { $scale }%
pdfjs-page-landmark =
    .aria-label = Page { $page }
pdfjs-loading-error = An error occurred while loading the PDF.
pdfjs-invalid-file-error = Invalid or corrupted PDF file.
pdfjs-missing-file-error = Missing PDF file.
pdfjs-unexpected-response-error = Unexpected server response.
pdfjs-rendering-error = An error occurred while rendering the page.
pdfjs-annotation-date-string = { $date }, { $time }
pdfjs-text-annotation-type =
    .alt = [{ $type } Annotation]
pdfjs-password-label = Enter the password to open this PDF file.
pdfjs-password-invalid = Invalid password. Please try again.
pdfjs-password-ok-button = OK
pdfjs-password-cancel-button = Cancel
pdfjs-web-fonts-disabled = Web fonts are disabled: unable to use embedded PDF fonts.
pdfjs-editor-free-text-button =
    .title = Text
pdfjs-editor-free-text-button-label = Text
pdfjs-editor-ink-button =
    .title = Draw
pdfjs-editor-ink-button-label = Draw
pdfjs-editor-stamp-button =
    .title = Add or edit images
pdfjs-editor-stamp-button-label = Add or edit images
pdfjs-editor-highlight-button =
    .title = Highlight
pdfjs-editor-highlight-button-label = Highlight
pdfjs-editor-remove-ink-button =
    .title = Remove drawing
pdfjs-editor-remove-freetext-button =
    .title = Remove text
pdfjs-editor-remove-stamp-button =
    .title = Remove image
pdfjs-editor-remove-highlight-button =
    .title = Remove highlight
pdfjs-editor-free-text-color-input = Color
pdfjs-editor-free-text-size-input = Size
pdfjs-editor-ink-color-input = Color
pdfjs-editor-ink-thickness-input = Thickness
pdfjs-editor-ink-opacity-input = Opacity
pdfjs-editor-stamp-add-image-button =
    .title = Add image
pdfjs-editor-stamp-add-image-button-label = Add image
pdfjs-free-text =
    .aria-label = Text Editor
pdfjs-free-text-default-content = Start typing
pdfjs-ink =
    .aria-label = Draw Editor
pdfjs-ink-canvas =
    .aria-label = User-created image
pdfjs-editor-alt-text-button-label = Alt text
pdfjs-editor-alt-text-edit-button-label = Edit alt text
pdfjs-editor-alt-text-dialog-label = Choose an option
pdfjs-editor-alt-text-dialog-description = Alt text (alternative text) helps when people cant see the image or when it doesnt load.
pdfjs-editor-alt-text-add-description-label = Add a description
pdfjs-editor-alt-text-add-description-description = Aim for 1-2 sentences that describe the subject, setting, or actions.
pdfjs-editor-alt-text-mark-decorative-label = Mark as decorative
pdfjs-editor-alt-text-mark-decorative-description = This is used for ornamental images, like borders or watermarks.
pdfjs-editor-alt-text-cancel-button = Cancel
pdfjs-editor-alt-text-save-button = Save
pdfjs-editor-alt-text-decorative-tooltip = Marked as decorative
pdfjs-editor-alt-text-textarea =
    .placeholder = For example, A young man sits down at a table to eat a meal
pdfjs-editor-resizer-label-top-left = Top left corner  resize
pdfjs-editor-resizer-label-top-middle = Top middle  resize
pdfjs-editor-resizer-label-top-right = Top right corner  resize
pdfjs-editor-resizer-label-middle-right = Middle right  resize
pdfjs-editor-resizer-label-bottom-right = Bottom right corner  resize
pdfjs-editor-resizer-label-bottom-middle = Bottom middle  resize
pdfjs-editor-resizer-label-bottom-left = Bottom left corner  resize
pdfjs-editor-resizer-label-middle-left = Middle left  resize
pdfjs-editor-highlight-colorpicker-label = Highlight color
pdfjs-editor-colorpicker-button =
    .title = Change color
pdfjs-editor-colorpicker-dropdown =
    .aria-label = Color choices
pdfjs-editor-colorpicker-yellow =
    .title = Yellow
pdfjs-editor-colorpicker-green =
    .title = Green
pdfjs-editor-colorpicker-blue =
    .title = Blue
pdfjs-editor-colorpicker-pink =
    .title = Pink
pdfjs-editor-colorpicker-red =
    .title = Red`,u=new Pd.FluentResource(o),m=new Pd.FluentBundle(s),A=m.addResource(u);A.length&&console.error("L10n errors",A),yield m},b(Rc,Yu);let Jn=Rc;const Pa={getLanguage(){return Jn.instance.getLanguage()},getDirection(){return Jn.instance.getDirection()},async get(T,s=null,o){return Jn.instance.get(T,s,o)},async translate(T){return Jn.instance.translate(T)},pause(){return Jn.instance.pause()},resume(){return Jn.instance.resume()}};class xd{constructor(s){b(this,na,null);b(this,Kd,null);b(this,ra,null);b(this,Mc,void 0);this.pageDiv=s.pageDiv,this.pdfPage=s.pdfPage,this.accessibilityManager=s.accessibilityManager,this.l10n=s.l10n||Pa,this.annotationEditorLayer=null,this.div=null,this._cancelled=!1,R(this,Mc,s.uiManager),R(this,na,s.annotationLayer||null),R(this,ra,s.textLayer||null),R(this,Kd,s.drawLayer||null)}async render(s,o="display"){if(o!=="display"||this._cancelled)return;const u=s.clone({dontFlip:!0});if(this.div){this.annotationEditorLayer.update({viewport:u}),this.show();return}const m=this.div=document.createElement("div");m.className="annotationEditorLayer",m.tabIndex=0,m.hidden=!0,m.dir=a(this,Mc).direction,this.pageDiv.append(m),this.annotationEditorLayer=new C.AnnotationEditorLayer({uiManager:a(this,Mc),div:m,accessibilityManager:this.accessibilityManager,pageIndex:this.pdfPage.pageNumber-1,l10n:this.l10n,viewport:u,annotationLayer:a(this,na),textLayer:a(this,ra),drawLayer:a(this,Kd)});const A={viewport:u,div:m,annotations:null,intent:o};this.annotationEditorLayer.render(A),this.show()}cancel(){this._cancelled=!0,this.div&&(this.pageDiv=null,this.annotationEditorLayer.destroy(),this.div.remove())}hide(){this.div&&(this.div.hidden=!0)}show(){!this.div||this.annotationEditorLayer.isEmpty||(this.div.hidden=!1)}}na=new WeakMap,Kd=new WeakMap,ra=new WeakMap,Mc=new WeakMap;class Mu{constructor({pageDiv:s,pdfPage:o,linkService:u,downloadManager:m,annotationStorage:A=null,imageResourcesPath:x="",renderForms:O=!0,enableScripting:D=!1,hasJSActionsPromise:H=null,fieldObjectsPromise:q=null,annotationCanvasMap:ae=null,accessibilityManager:ve=null}){b(this,Xd);b(this,ws,null);this.pageDiv=s,this.pdfPage=o,this.linkService=u,this.downloadManager=m,this.imageResourcesPath=x,this.renderForms=O,this.annotationStorage=A,this.enableScripting=D,this._hasJSActionsPromise=H||Promise.resolve(!1),this._fieldObjectsPromise=q||Promise.resolve(null),this._annotationCanvasMap=ae,this._accessibilityManager=ve,this.annotationLayer=null,this.div=null,this._cancelled=!1,this._eventBus=u.eventBus}async render(s,o="display"){var O;if(this.div){if(this._cancelled||!this.annotationLayer)return;this.annotationLayer.update({viewport:s.clone({dontFlip:!0})});return}const[u,m,A]=await Promise.all([this.pdfPage.getAnnotations({intent:o}),this._hasJSActionsPromise,this._fieldObjectsPromise]);if(this._cancelled)return;const x=this.div=document.createElement("div");if(x.className="annotationLayer",this.pageDiv.append(x),u.length===0){this.hide();return}this.annotationLayer=new C.AnnotationLayer({div:x,accessibilityManager:this._accessibilityManager,annotationCanvasMap:this._annotationCanvasMap,page:this.pdfPage,viewport:s.clone({dontFlip:!0})}),await this.annotationLayer.render({annotations:u,imageResourcesPath:this.imageResourcesPath,renderForms:this.renderForms,linkService:this.linkService,downloadManager:this.downloadManager,annotationStorage:this.annotationStorage,enableScripting:this.enableScripting,hasJSActions:m,fieldObjects:A}),this.linkService.isInPresentationMode&&S(this,Xd,gm).call(this,y.PresentationModeState.FULLSCREEN),a(this,ws)||(R(this,ws,D=>{S(this,Xd,gm).call(this,D.state)}),(O=this._eventBus)==null||O._on("presentationmodechanged",a(this,ws)))}cancel(){var s;this._cancelled=!0,a(this,ws)&&((s=this._eventBus)==null||s._off("presentationmodechanged",a(this,ws)),R(this,ws,null))}hide(){this.div&&(this.div.hidden=!0)}}ws=new WeakMap,Xd=new WeakSet,gm=function(s){if(!this.div)return;let o=!1;switch(s){case y.PresentationModeState.FULLSCREEN:o=!0;break;case y.PresentationModeState.NORMAL:break;default:return}for(const u of this.div.childNodes)u.hasAttribute("data-internal-link")||(u.inert=o)};class Xp{constructor(s){b(this,aa,null);this.pageIndex=s.pageIndex}async render(s="display"){s!=="display"||a(this,aa)||this._cancelled||R(this,aa,new C.DrawLayer({pageIndex:this.pageIndex}))}cancel(){this._cancelled=!0,a(this,aa)&&(a(this,aa).destroy(),R(this,aa,null))}setParent(s){var o;(o=a(this,aa))==null||o.setParent(s)}getDrawLayer(){return a(this,aa)}}aa=new WeakMap;const Iu={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},Yp=/^H(\d+)$/;class Zp{constructor(){b(this,Yd);b(this,zs);b(this,Fi,void 0)}get renderingDone(){return a(this,Fi)!==void 0}render(s){if(a(this,Fi)!==void 0)return a(this,Fi);const o=S(this,zs,bm).call(this,s);return o==null||o.classList.add("structTree"),R(this,Fi,o)}hide(){a(this,Fi)&&!a(this,Fi).hidden&&(a(this,Fi).hidden=!0)}show(){var s;(s=a(this,Fi))!=null&&s.hidden&&(a(this,Fi).hidden=!1)}}Fi=new WeakMap,Yd=new WeakSet,mm=function(s,o){const{alt:u,id:m,lang:A}=s;u!==void 0&&o.setAttribute("aria-label",(0,y.removeNullCharacters)(u)),m!==void 0&&o.setAttribute("aria-owns",m),A!==void 0&&o.setAttribute("lang",(0,y.removeNullCharacters)(A,!0))},zs=new WeakSet,bm=function(s){if(!s)return null;const o=document.createElement("span");if("role"in s){const{role:u}=s,m=u.match(Yp);m?(o.setAttribute("role","heading"),o.setAttribute("aria-level",m[1])):Iu[u]&&o.setAttribute("role",Iu[u])}if(S(this,Yd,mm).call(this,s,o),s.children)if(s.children.length===1&&"id"in s.children[0])S(this,Yd,mm).call(this,s.children[0],o);else for(const u of s.children)o.append(S(this,zs,bm).call(this,u));return o};const Ws=class Ws{constructor(){b(this,Qd);b(this,Ei,!1);b(this,gi,null);b(this,Si,new Map);b(this,_s,new Map)}setTextMapping(s){R(this,gi,s)}enable(){if(a(this,Ei))throw new Error("TextAccessibilityManager is already enabled.");if(!a(this,gi))throw new Error("Text divs and strings have not been set.");if(R(this,Ei,!0),R(this,gi,a(this,gi).slice()),a(this,gi).sort(S(Ws,$i,lp)),a(this,Si).size>0){const s=a(this,gi);for(const[o,u]of a(this,Si)){if(!document.getElementById(o)){a(this,Si).delete(o);continue}S(this,Qd,vm).call(this,o,s[u])}}for(const[s,o]of a(this,_s))this.addPointerInTextLayer(s,o);a(this,_s).clear()}disable(){a(this,Ei)&&(a(this,_s).clear(),R(this,gi,null),R(this,Ei,!1))}removePointerInTextLayer(s){if(!a(this,Ei)){a(this,_s).delete(s);return}const o=a(this,gi);if(!o||o.length===0)return;const{id:u}=s,m=a(this,Si).get(u);if(m===void 0)return;const A=o[m];a(this,Si).delete(u);let x=A.getAttribute("aria-owns");x!=null&&x.includes(u)&&(x=x.split(" ").filter(O=>O!==u).join(" "),x?A.setAttribute("aria-owns",x):(A.removeAttribute("aria-owns"),A.setAttribute("role","presentation")))}addPointerInTextLayer(s,o){const{id:u}=s;if(!u)return null;if(!a(this,Ei))return a(this,_s).set(s,o),null;o&&this.removePointerInTextLayer(s);const m=a(this,gi);if(!m||m.length===0)return null;const A=(0,y.binarySearchFirstItem)(m,H=>{var q;return S(q=Ws,$i,lp).call(q,s,H)<0}),x=Math.max(0,A-1),O=m[x];S(this,Qd,vm).call(this,u,O),a(this,Si).set(u,x);const D=O.parentNode;return D!=null&&D.classList.contains("markedContent")?D.id:null}moveElementInDOM(s,o,u,m){const A=this.addPointerInTextLayer(u,m);if(!s.hasChildNodes())return s.append(o),A;const x=Array.from(s.childNodes).filter(H=>H!==o);if(x.length===0)return A;const O=u||o,D=(0,y.binarySearchFirstItem)(x,H=>{var q;return S(q=Ws,$i,lp).call(q,O,H)<0});return D===0?x[0].before(o):x[D-1].after(o),A}};Ei=new WeakMap,gi=new WeakMap,Si=new WeakMap,_s=new WeakMap,$i=new WeakSet,lp=function(s,o){const u=s.getBoundingClientRect(),m=o.getBoundingClientRect();if(u.width===0&&u.height===0)return 1;if(m.width===0&&m.height===0)return-1;const A=u.y,x=u.y+u.height,O=u.y+u.height/2,D=m.y,H=m.y+m.height,q=m.y+m.height/2;if(O<=D&&q>=x)return-1;if(q<=A&&O>=H)return 1;const ae=u.x+u.width/2,ve=m.x+m.width/2;return ae-ve},Qd=new WeakSet,vm=function(s,o){const u=o.getAttribute("aria-owns");u!=null&&u.includes(s)||o.setAttribute("aria-owns",u?`${u} ${s}`:s),o.removeAttribute("role")},b(Ws,$i);let Td=Ws;class Qp{constructor({findController:s,eventBus:o,pageIndex:u}){this.findController=s,this.matches=[],this.eventBus=o,this.pageIdx=u,this._onUpdateTextLayerMatches=null,this.textDivs=null,this.textContentItemsStr=null,this.enabled=!1}setTextMapping(s,o){this.textDivs=s,this.textContentItemsStr=o}enable(){if(!this.textDivs||!this.textContentItemsStr)throw new Error("Text divs and strings have not been set.");if(this.enabled)throw new Error("TextHighlighter is already enabled.");this.enabled=!0,this._onUpdateTextLayerMatches||(this._onUpdateTextLayerMatches=s=>{(s.pageIndex===this.pageIdx||s.pageIndex===-1)&&this._updateMatches()},this.eventBus._on("updatetextlayermatches",this._onUpdateTextLayerMatches)),this._updateMatches()}disable(){this.enabled&&(this.enabled=!1,this._onUpdateTextLayerMatches&&(this.eventBus._off("updatetextlayermatches",this._onUpdateTextLayerMatches),this._onUpdateTextLayerMatches=null),this._updateMatches(!0))}_convertMatches(s,o){if(!s)return[];const{textContentItemsStr:u}=this;let m=0,A=0;const x=u.length-1,O=[];for(let D=0,H=s.length;D<H;D++){let q=s[D];for(;m!==x&&q>=A+u[m].length;)A+=u[m].length,m++;m===u.length&&console.error("Could not find a matching mapping");const ae={begin:{divIdx:m,offset:q-A}};for(q+=o[D];m!==x&&q>A+u[m].length;)A+=u[m].length,m++;ae.end={divIdx:m,offset:q-A},O.push(ae)}return O}_renderMatches(s){if(s.length===0)return;const{findController:o,pageIdx:u}=this,{textContentItemsStr:m,textDivs:A}=this,x=u===o.selected.pageIdx,O=o.selected.matchIdx,D=o.state.highlightAll;let H=null;const q={divIdx:-1,offset:void 0};function ae(nt,ot){const Xe=nt.divIdx;return A[Xe].textContent="",ve(Xe,0,nt.offset,ot)}function ve(nt,ot,Xe,vt){let ht=A[nt];if(ht.nodeType===Node.TEXT_NODE){const yt=document.createElement("span");ht.before(yt),yt.append(ht),A[nt]=yt,ht=yt}const Ue=m[nt].substring(ot,Xe),st=document.createTextNode(Ue);if(vt){const yt=document.createElement("span");return yt.className=`${vt} appended`,yt.append(st),ht.append(yt),vt.includes("selected")?yt.offsetLeft:0}return ht.append(st),0}let Ye=O,qe=Ye+1;if(D)Ye=0,qe=s.length;else if(!x)return;let Ke=-1,et=-1;for(let nt=Ye;nt<qe;nt++){const ot=s[nt],Xe=ot.begin;if(Xe.divIdx===Ke&&Xe.offset===et)continue;Ke=Xe.divIdx,et=Xe.offset;const vt=ot.end,ht=x&&nt===O,Ue=ht?" selected":"";let st=0;if(!H||Xe.divIdx!==H.divIdx?(H!==null&&ve(H.divIdx,H.offset,q.offset),ae(Xe)):ve(H.divIdx,H.offset,Xe.offset),Xe.divIdx===vt.divIdx)st=ve(Xe.divIdx,Xe.offset,vt.offset,"highlight"+Ue);else{st=ve(Xe.divIdx,Xe.offset,q.offset,"highlight begin"+Ue);for(let yt=Xe.divIdx+1,Ut=vt.divIdx;yt<Ut;yt++)A[yt].className="highlight middle"+Ue;ae(vt,"highlight end"+Ue)}H=vt,ht&&o.scrollMatchIntoView({element:A[Xe.divIdx],selectedLeft:st,pageIndex:u,matchIndex:O})}H&&ve(H.divIdx,H.offset,q.offset)}_updateMatches(s=!1){if(!this.enabled&&!s)return;const{findController:o,matches:u,pageIdx:m}=this,{textContentItemsStr:A,textDivs:x}=this;let O=-1;for(const q of u){const ae=Math.max(O,q.begin.divIdx);for(let ve=ae,Ye=q.end.divIdx;ve<=Ye;ve++){const qe=x[ve];qe.textContent=A[ve],qe.className=""}O=q.end.divIdx+1}if(!(o!=null&&o.highlightMatches)||s)return;const D=o.pageMatches[m]||null,H=o.pageMatchesLength[m]||null;this.matches=this._convertMatches(D,H),this._renderMatches(this.matches)}}class Jp{constructor({highlighter:s=null,accessibilityManager:o=null,isOffscreenCanvasSupported:u=!0,enablePermissions:m=!1}){b(this,Zu);b(this,Ju);b(this,dn,!1);b(this,qi,0);b(this,$s,0);b(this,dr,null);this.textContentItemsStr=[],this.renderingDone=!1,this.textDivs=[],this.textDivProperties=new WeakMap,this.textLayerRenderTask=null,this.highlighter=s,this.accessibilityManager=o,this.isOffscreenCanvasSupported=u,R(this,dn,m===!0),this.onAppend=null,this.div=document.createElement("div"),this.div.className="textLayer"}get numTextDivs(){return this.textDivs.length}async render(s){var m,A,x,O;if(!a(this,dr))throw new Error('No "textContentSource" parameter specified.');const o=s.scale*(globalThis.devicePixelRatio||1),{rotation:u}=s;if(this.renderingDone){const D=u!==a(this,qi),H=o!==a(this,$s);(D||H)&&(this.hide(),(0,C.updateTextLayer)({container:this.div,viewport:s,textDivs:this.textDivs,textDivProperties:this.textDivProperties,isOffscreenCanvasSupported:this.isOffscreenCanvasSupported,mustRescale:H,mustRotate:D}),R(this,$s,o),R(this,qi,u)),this.show();return}this.cancel(),(m=this.highlighter)==null||m.setTextMapping(this.textDivs,this.textContentItemsStr),(A=this.accessibilityManager)==null||A.setTextMapping(this.textDivs),this.textLayerRenderTask=(0,C.renderTextLayer)({textContentSource:a(this,dr),container:this.div,viewport:s,textDivs:this.textDivs,textDivProperties:this.textDivProperties,textContentItemsStr:this.textContentItemsStr,isOffscreenCanvasSupported:this.isOffscreenCanvasSupported}),await this.textLayerRenderTask.promise,S(this,Zu,Z_).call(this),R(this,$s,o),R(this,qi,u),this.onAppend(this.div),(x=this.highlighter)==null||x.enable(),(O=this.accessibilityManager)==null||O.enable()}hide(){var s;!this.div.hidden&&this.renderingDone&&((s=this.highlighter)==null||s.disable(),this.div.hidden=!0)}show(){var s;this.div.hidden&&this.renderingDone&&(this.div.hidden=!1,(s=this.highlighter)==null||s.enable())}cancel(){var s,o;this.textLayerRenderTask&&(this.textLayerRenderTask.cancel(),this.textLayerRenderTask=null),(s=this.highlighter)==null||s.disable(),(o=this.accessibilityManager)==null||o.disable(),this.textContentItemsStr.length=0,this.textDivs.length=0,this.textDivProperties=new WeakMap}setTextContentSource(s){this.cancel(),R(this,dr,s)}}dn=new WeakMap,qi=new WeakMap,$s=new WeakMap,dr=new WeakMap,Zu=new WeakSet,Z_=function(){this.renderingDone=!0;const s=document.createElement("div");s.className="endOfContent",this.div.append(s),S(this,Ju,Q_).call(this)},Ju=new WeakSet,Q_=function(){const{div:s}=this;s.addEventListener("mousedown",o=>{const u=s.querySelector(".endOfContent");if(!u)return;let m=o.target!==s;if(m&&(m=getComputedStyle(u).getPropertyValue("-moz-user-select")!=="none"),m){const A=s.getBoundingClientRect(),x=Math.max(0,(o.pageY-A.top)/A.height);u.style.top=(x*100).toFixed(2)+"%"}u.classList.add("active")}),s.addEventListener("mouseup",()=>{const o=s.querySelector(".endOfContent");o&&(o.style.top="",o.classList.remove("active"))}),s.addEventListener("copy",o=>{if(!a(this,dn)){const u=document.getSelection();o.clipboardData.setData("text/plain",(0,y.removeNullCharacters)((0,C.normalizeUnicode)(u.toString())))}o.preventDefault(),o.stopPropagation()})};var Hi=k(12);const Ld=te.compatibilityParams.maxCanvasPixels||16777216,Zo=null;class eg{constructor(s){b(this,Gs);b(this,fn);b(this,Bn);b(this,ur);b(this,fr);b(this,ys);b(this,la);b(this,ca);b(this,pr);b(this,yl,C.AnnotationMode.ENABLE_FORMS);b(this,qs,!1);b(this,_o,null);b(this,hn,null);b(this,Jd,null);b(this,un,null);b(this,kc,y.RenderingStates.INITIAL);b(this,hr,y.TextLayerMode.ENABLE);b(this,Ai,{directDrawing:!0,initialOptionalContent:!0,regularAnnotations:!0});b(this,mi,new WeakMap);var A;const o=s.container,u=s.defaultViewport;this.id=s.id,this.renderingId="page"+this.id,R(this,_o,s.layerProperties||Zo),this.pdfPage=null,this.pageLabel=null,this.rotation=0,this.scale=s.scale||y.DEFAULT_SCALE,this.viewport=u,this.pdfPageRotate=u.rotation,this._optionalContentConfigPromise=s.optionalContentConfigPromise||null,R(this,hr,s.textLayerMode??y.TextLayerMode.ENABLE),R(this,yl,s.annotationMode??C.AnnotationMode.ENABLE_FORMS),this.imageResourcesPath=s.imageResourcesPath||"",this.isOffscreenCanvasSupported=s.isOffscreenCanvasSupported??!0,this.maxCanvasPixels=s.maxCanvasPixels??Ld,this.pageColors=s.pageColors||null,this.eventBus=s.eventBus,this.renderingQueue=s.renderingQueue,this.l10n=s.l10n||Pa,this.renderTask=null,this.resume=null,this._isStandalone=!((A=this.renderingQueue)!=null&&A.hasViewer()),this._container=o,this._annotationCanvasMap=null,this.annotationLayer=null,this.annotationEditorLayer=null,this.textLayer=null,this.zoomLayer=null,this.xfaLayer=null,this.structTreeLayer=null,this.drawLayer=null;const m=document.createElement("div");if(m.className="page",m.setAttribute("data-page-number",this.id),m.setAttribute("role","region"),m.setAttribute("data-l10n-id","pdfjs-page-landmark"),m.setAttribute("data-l10n-args",JSON.stringify({page:this.id})),this.div=m,S(this,Gs,cp).call(this),o==null||o.append(m),this._isStandalone){o==null||o.style.setProperty("--scale-factor",this.scale*C.PixelsPerInch.PDF_TO_CSS_UNITS);const{optionalContentConfigPromise:x}=s;x&&x.then(O=>{x===this._optionalContentConfigPromise&&(a(this,Ai).initialOptionalContent=O.hasInitialVisibility)}),this.l10n===Pa&&this.l10n.translate(this.div)}}get renderingState(){return a(this,kc)}set renderingState(s){if(s!==a(this,kc))switch(R(this,kc,s),a(this,hn)&&(clearTimeout(a(this,hn)),R(this,hn,null)),s){case y.RenderingStates.PAUSED:this.div.classList.remove("loading");break;case y.RenderingStates.RUNNING:this.div.classList.add("loadingIcon"),R(this,hn,setTimeout(()=>{this.div.classList.add("loading"),R(this,hn,null)},0));break;case y.RenderingStates.INITIAL:case y.RenderingStates.FINISHED:this.div.classList.remove("loadingIcon","loading");break}}setPdfPage(s){var u,m,A;this._isStandalone&&(((u=this.pageColors)==null?void 0:u.foreground)==="CanvasText"||((m=this.pageColors)==null?void 0:m.background)==="Canvas")&&((A=this._container)==null||A.style.setProperty("--hcm-highlight-filter",s.filterFactory.addHighlightHCMFilter("CanvasText","Canvas","HighlightText","Highlight"))),this.pdfPage=s,this.pdfPageRotate=s.rotate;const o=(this.rotation+this.pdfPageRotate)%360;this.viewport=s.getViewport({scale:this.scale*C.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:o}),S(this,Gs,cp).call(this),this.reset()}destroy(){var s;this.reset(),(s=this.pdfPage)==null||s.cleanup()}get _textHighlighter(){return(0,C.shadow)(this,"_textHighlighter",new Qp({pageIndex:this.id-1,eventBus:this.eventBus,findController:a(this,_o).findController}))}_resetZoomLayer(s=!1){if(!this.zoomLayer)return;const o=this.zoomLayer.firstChild;a(this,mi).delete(o),o.width=0,o.height=0,s&&this.zoomLayer.remove(),this.zoomLayer=null}reset({keepZoomLayer:s=!1,keepAnnotationLayer:o=!1,keepAnnotationEditorLayer:u=!1,keepXfaLayer:m=!1,keepTextLayer:A=!1}={}){var Ye,qe,Ke,et,nt;this.cancelRendering({keepAnnotationLayer:o,keepAnnotationEditorLayer:u,keepXfaLayer:m,keepTextLayer:A}),this.renderingState=y.RenderingStates.INITIAL;const x=this.div,O=x.childNodes,D=s&&this.zoomLayer||null,H=o&&((Ye=this.annotationLayer)==null?void 0:Ye.div)||null,q=u&&((qe=this.annotationEditorLayer)==null?void 0:qe.div)||null,ae=m&&((Ke=this.xfaLayer)==null?void 0:Ke.div)||null,ve=A&&((et=this.textLayer)==null?void 0:et.div)||null;for(let ot=O.length-1;ot>=0;ot--){const Xe=O[ot];switch(Xe){case D:case H:case q:case ae:case ve:continue}Xe.remove()}x.removeAttribute("data-loaded"),H&&this.annotationLayer.hide(),q&&this.annotationEditorLayer.hide(),ae&&this.xfaLayer.hide(),ve&&this.textLayer.hide(),(nt=this.structTreeLayer)==null||nt.hide(),D||(this.canvas&&(a(this,mi).delete(this.canvas),this.canvas.width=0,this.canvas.height=0,delete this.canvas),this._resetZoomLayer())}update({scale:s=0,rotation:o=null,optionalContentConfigPromise:u=null,drawingDelay:m=-1}){var x;this.scale=s||this.scale,typeof o=="number"&&(this.rotation=o),u instanceof Promise&&(this._optionalContentConfigPromise=u,u.then(O=>{u===this._optionalContentConfigPromise&&(a(this,Ai).initialOptionalContent=O.hasInitialVisibility)})),a(this,Ai).directDrawing=!0;const A=(this.rotation+this.pdfPageRotate)%360;if(this.viewport=this.viewport.clone({scale:this.scale*C.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:A}),S(this,Gs,cp).call(this),this._isStandalone&&((x=this._container)==null||x.style.setProperty("--scale-factor",this.viewport.scale)),this.canvas){let O=!1;if(a(this,qs)){if(this.maxCanvasPixels===0)O=!0;else if(this.maxCanvasPixels>0){const{width:H,height:q}=this.viewport,{sx:ae,sy:ve}=this.outputScale;O=(Math.floor(H)*ae|0)*(Math.floor(q)*ve|0)>this.maxCanvasPixels}}const D=!O&&m>=0&&m<1e3;if(D||O){if(D&&this.renderingState!==y.RenderingStates.FINISHED&&(this.cancelRendering({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0,cancelExtraDelay:m}),this.renderingState=y.RenderingStates.FINISHED,a(this,Ai).directDrawing=!1),this.cssTransform({target:this.canvas,redrawAnnotationLayer:!0,redrawAnnotationEditorLayer:!0,redrawXfaLayer:!0,redrawTextLayer:!D,hideTextLayer:D}),D)return;this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:a(this,un)});return}!this.zoomLayer&&!this.canvas.hidden&&(this.zoomLayer=this.canvas.parentNode,this.zoomLayer.style.position="absolute")}this.zoomLayer&&this.cssTransform({target:this.zoomLayer.firstChild}),this.reset({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0})}cancelRendering({keepAnnotationLayer:s=!1,keepAnnotationEditorLayer:o=!1,keepXfaLayer:u=!1,keepTextLayer:m=!1,cancelExtraDelay:A=0}={}){var x;this.renderTask&&(this.renderTask.cancel(A),this.renderTask=null),this.resume=null,this.textLayer&&(!m||!this.textLayer.div)&&(this.textLayer.cancel(),this.textLayer=null),this.structTreeLayer&&!this.textLayer&&(this.structTreeLayer=null),this.annotationLayer&&(!s||!this.annotationLayer.div)&&(this.annotationLayer.cancel(),this.annotationLayer=null,this._annotationCanvasMap=null),this.annotationEditorLayer&&(!o||!this.annotationEditorLayer.div)&&(this.drawLayer&&(this.drawLayer.cancel(),this.drawLayer=null),this.annotationEditorLayer.cancel(),this.annotationEditorLayer=null),this.xfaLayer&&(!u||!this.xfaLayer.div)&&(this.xfaLayer.cancel(),this.xfaLayer=null,(x=this._textHighlighter)==null||x.disable())}cssTransform({target:s,redrawAnnotationLayer:o=!1,redrawAnnotationEditorLayer:u=!1,redrawXfaLayer:m=!1,redrawTextLayer:A=!1,hideTextLayer:x=!1}){var D;if(!s.hasAttribute("zooming")){s.setAttribute("zooming",!0);const{style:H}=s;H.width=H.height=""}const O=a(this,mi).get(s);if(this.viewport!==O){const H=this.viewport.rotation-O.rotation,q=Math.abs(H);let ae=1,ve=1;if(q===90||q===270){const{width:Ye,height:qe}=this.viewport;ae=qe/Ye,ve=Ye/qe}s.style.transform=`rotate(${H}deg) scale(${ae}, ${ve})`}o&&this.annotationLayer&&S(this,fn,wm).call(this),u&&this.annotationEditorLayer&&(this.drawLayer&&S(this,ur,ym).call(this),S(this,Bn,_m).call(this)),m&&this.xfaLayer&&S(this,fr,Em).call(this),this.textLayer&&(x?(this.textLayer.hide(),(D=this.structTreeLayer)==null||D.hide()):A&&S(this,ys,Sm).call(this))}get width(){return this.viewport.width}get height(){return this.viewport.height}getPagePoint(s,o){return this.viewport.convertToPdfPoint(s,o)}async draw(){this.renderingState!==y.RenderingStates.INITIAL&&(console.error("Must be in new state before drawing"),this.reset());const{div:s,l10n:o,pageColors:u,pdfPage:m,viewport:A}=this;if(!m)throw this.renderingState=y.RenderingStates.FINISHED,new Error("pdfPage is not loaded");this.renderingState=y.RenderingStates.RUNNING;const x=document.createElement("div");if(x.classList.add("canvasWrapper"),s.append(x),!this.textLayer&&a(this,hr)!==y.TextLayerMode.DISABLE&&!m.isPureXfa&&(this._accessibilityManager||(this._accessibilityManager=new Td),this.textLayer=new Jp({highlighter:this._textHighlighter,accessibilityManager:this._accessibilityManager,isOffscreenCanvasSupported:this.isOffscreenCanvasSupported,enablePermissions:a(this,hr)===y.TextLayerMode.ENABLE_PERMISSIONS}),this.textLayer.onAppend=Ue=>{this.l10n.pause(),this.div.append(Ue),this.l10n.resume()}),!this.annotationLayer&&a(this,yl)!==C.AnnotationMode.DISABLE){const{annotationStorage:Ue,downloadManager:st,enableScripting:yt,fieldObjectsPromise:Ut,hasJSActionsPromise:Lt,linkService:kt}=a(this,_o);this._annotationCanvasMap||(this._annotationCanvasMap=new Map),this.annotationLayer=new Mu({pageDiv:s,pdfPage:m,annotationStorage:Ue,imageResourcesPath:this.imageResourcesPath,renderForms:a(this,yl)===C.AnnotationMode.ENABLE_FORMS,linkService:kt,downloadManager:st,enableScripting:yt,hasJSActionsPromise:Lt,fieldObjectsPromise:Ut,annotationCanvasMap:this._annotationCanvasMap,accessibilityManager:this._accessibilityManager})}const O=Ue=>{if(ve==null||ve(!1),this.renderingQueue&&!this.renderingQueue.isHighestPriority(this)){this.renderingState=y.RenderingStates.PAUSED,this.resume=()=>{this.renderingState=y.RenderingStates.RUNNING,Ue()};return}Ue()},{width:D,height:H}=A,q=document.createElement("canvas");q.setAttribute("role","presentation"),q.hidden=!0;const ae=!!(u!=null&&u.background&&(u!=null&&u.foreground));let ve=Ue=>{(!ae||Ue)&&(q.hidden=!1,ve=null)};x.append(q),this.canvas=q;const Ye=q.getContext("2d",{alpha:!1}),qe=this.outputScale=new y.OutputScale;if(this.maxCanvasPixels===0){const Ue=1/this.scale;qe.sx*=Ue,qe.sy*=Ue,R(this,qs,!0)}else if(this.maxCanvasPixels>0){const Ue=D*H,st=Math.sqrt(this.maxCanvasPixels/Ue);qe.sx>st||qe.sy>st?(qe.sx=st,qe.sy=st,R(this,qs,!0)):R(this,qs,!1)}const Ke=(0,y.approximateFraction)(qe.sx),et=(0,y.approximateFraction)(qe.sy);q.width=(0,y.roundToDivide)(D*qe.sx,Ke[0]),q.height=(0,y.roundToDivide)(H*qe.sy,et[0]);const{style:nt}=q;nt.width=(0,y.roundToDivide)(D,Ke[1])+"px",nt.height=(0,y.roundToDivide)(H,et[1])+"px",a(this,mi).set(q,A);const ot=qe.scaled?[qe.sx,0,0,qe.sy,0,0]:null,Xe={canvasContext:Ye,transform:ot,viewport:A,annotationMode:a(this,yl),optionalContentConfigPromise:this._optionalContentConfigPromise,annotationCanvasMap:this._annotationCanvasMap,pageColors:u},vt=this.renderTask=this.pdfPage.render(Xe);vt.onContinue=O;const ht=vt.promise.then(async()=>{var st;ve==null||ve(!0),await S(this,pr,Am).call(this,vt),S(this,ys,Sm).call(this),this.annotationLayer&&await S(this,fn,wm).call(this);const{annotationEditorUIManager:Ue}=a(this,_o);Ue&&(this.drawLayer||(this.drawLayer=new Xp({pageIndex:this.id})),await S(this,ur,ym).call(this),this.drawLayer.setParent(x),this.annotationEditorLayer||(this.annotationEditorLayer=new xd({uiManager:Ue,pageDiv:s,pdfPage:m,l10n:o,accessibilityManager:this._accessibilityManager,annotationLayer:(st=this.annotationLayer)==null?void 0:st.annotationLayer,textLayer:this.textLayer,drawLayer:this.drawLayer.getDrawLayer()})),S(this,Bn,_m).call(this))},Ue=>(Ue instanceof C.RenderingCancelledException||ve==null||ve(!0),S(this,pr,Am).call(this,vt,Ue)));if(m.isPureXfa){if(!this.xfaLayer){const{annotationStorage:Ue,linkService:st}=a(this,_o);this.xfaLayer=new Hi.XfaLayerBuilder({pdfPage:m,annotationStorage:Ue,linkService:st})}S(this,fr,Em).call(this)}return s.setAttribute("data-loaded",!0),this.eventBus.dispatch("pagerender",{source:this,pageNumber:this.id}),ht}setPageLabel(s){this.pageLabel=typeof s=="string"?s:null,this.div.setAttribute("data-l10n-args",JSON.stringify({page:this.pageLabel??this.id})),this.pageLabel!==null?this.div.setAttribute("data-page-label",this.pageLabel):this.div.removeAttribute("data-page-label")}get thumbnailCanvas(){const{directDrawing:s,initialOptionalContent:o,regularAnnotations:u}=a(this,Ai);return s&&o&&u?this.canvas:null}}yl=new WeakMap,qs=new WeakMap,_o=new WeakMap,hn=new WeakMap,Jd=new WeakMap,un=new WeakMap,kc=new WeakMap,hr=new WeakMap,Ai=new WeakMap,mi=new WeakMap,Gs=new WeakSet,cp=function(){const{viewport:s}=this;if(this.pdfPage){if(a(this,Jd)===s.rotation)return;R(this,Jd,s.rotation)}(0,C.setLayerDimensions)(this.div,s,!0,!1)},fn=new WeakSet,wm=async function(){let s=null;try{await this.annotationLayer.render(this.viewport,"display")}catch(o){console.error(`#renderAnnotationLayer: "${o}".`),s=o}finally{this.eventBus.dispatch("annotationlayerrendered",{source:this,pageNumber:this.id,error:s})}},Bn=new WeakSet,_m=async function(){let s=null;try{await this.annotationEditorLayer.render(this.viewport,"display")}catch(o){console.error(`#renderAnnotationEditorLayer: "${o}".`),s=o}finally{this.eventBus.dispatch("annotationeditorlayerrendered",{source:this,pageNumber:this.id,error:s})}},ur=new WeakSet,ym=async function(){try{await this.drawLayer.render("display")}catch(s){console.error(`#renderDrawLayer: "${s}".`)}},fr=new WeakSet,Em=async function(){var o;let s=null;try{const u=await this.xfaLayer.render(this.viewport,"display");u!=null&&u.textDivs&&this._textHighlighter&&S(this,ca,ey).call(this,u.textDivs)}catch(u){console.error(`#renderXfaLayer: "${u}".`),s=u}finally{(o=this.xfaLayer)!=null&&o.div&&(this.l10n.pause(),this.div.append(this.xfaLayer.div),this.l10n.resume()),this.eventBus.dispatch("xfalayerrendered",{source:this,pageNumber:this.id,error:s})}},ys=new WeakSet,Sm=async function(){const{pdfPage:s,textLayer:o,viewport:u}=this;if(!o)return;let m=null;try{if(!o.renderingDone){const A=s.streamTextContent({includeMarkedContent:!0,disableNormalization:!0});o.setTextContentSource(A)}await o.render(u)}catch(A){if(A instanceof C.AbortException)return;console.error(`#renderTextLayer: "${A}".`),m=A}this.eventBus.dispatch("textlayerrendered",{source:this,pageNumber:this.id,numTextDivs:o.numTextDivs,error:m}),S(this,la,J_).call(this)},la=new WeakSet,J_=async function(){var u,m,A;if(!this.textLayer)return;this.structTreeLayer||(this.structTreeLayer=new Zp);const s=await(this.structTreeLayer.renderingDone?null:this.pdfPage.getStructTree()),o=(u=this.structTreeLayer)==null?void 0:u.render(s);o&&(this.l10n.pause(),(m=this.canvas)==null||m.append(o),this.l10n.resume()),(A=this.structTreeLayer)==null||A.show()},ca=new WeakSet,ey=async function(s){const o=await this.pdfPage.getTextContent(),u=[];for(const m of o.items)u.push(m.str);this._textHighlighter.setTextMapping(s,u),this._textHighlighter.enable()},pr=new WeakSet,Am=async function(s,o=null){if(s===this.renderTask&&(this.renderTask=null),o instanceof C.RenderingCancelledException){R(this,un,null);return}if(R(this,un,o),this.renderingState=y.RenderingStates.FINISHED,this._resetZoomLayer(!0),a(this,Ai).regularAnnotations=!s.separateAnnots,this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!1,timestamp:performance.now(),error:a(this,un)}),o)throw o};const uc=10,Qo={FORCE_SCROLL_MODE_PAGE:15e3,FORCE_LAZY_PAGE_INIT:7500,PAUSE_EAGER_PAGE_INIT:250};function ku(T){return Object.values(C.AnnotationEditorType).includes(T)&&T!==C.AnnotationEditorType.DISABLE}class tg{constructor(s){b(this,gr);b(this,Es,new Set);b(this,Al,0);R(this,Al,s)}push(s){const o=a(this,Es);o.has(s)&&o.delete(s),o.add(s),o.size>a(this,Al)&&S(this,gr,Cm).call(this)}resize(s,o=null){R(this,Al,s);const u=a(this,Es);if(o){const m=u.size;let A=1;for(const x of u)if(o.has(x.id)&&(u.delete(x),u.add(x)),++A>m)break}for(;u.size>a(this,Al);)S(this,gr,Cm).call(this)}has(s){return a(this,Es).has(s)}[Symbol.iterator](){return a(this,Es).keys()}}Es=new WeakMap,Al=new WeakMap,gr=new WeakSet,Cm=function(){const s=a(this,Es).keys().next().value;s==null||s.destroy(),a(this,Es).delete(s)};class ig{constructor(s){b(this,ua);b(this,jn);b(this,qt);b(this,ri);b(this,Bc);b(this,vr);b(this,wr);b(this,fa);b(this,Ss);b(this,ih);b(this,lf);b(this,cf);b(this,_r);b(this,Hn);b(this,pn,null);b(this,eh,null);b(this,da,null);b(this,Ua,C.AnnotationEditorType.NONE);b(this,bi,null);b(this,Cl,C.AnnotationMode.ENABLE_FORMS);b(this,mr,null);b(this,Pl,null);b(this,br,!1);b(this,Nc,!1);b(this,Ks,null);b(this,Fc,!1);b(this,ha,0);b(this,sf,new ResizeObserver(S(this,Hn,ly).bind(this)));b(this,Vn,null);b(this,gn,null);b(this,mn,null);b(this,Dc,y.TextLayerMode.ENABLE);var u,m;const o="4.0.381";if(C.version!==o)throw new Error(`The API version "${C.version}" does not match the Viewer version "${o}".`);if(this.container=s.container,this.viewer=s.viewer||s.container.firstElementChild,((u=this.container)==null?void 0:u.tagName)!=="DIV"||((m=this.viewer)==null?void 0:m.tagName)!=="DIV")throw new Error("Invalid `container` and/or `viewer` option.");if(this.container.offsetParent&&getComputedStyle(this.container).position!=="absolute")throw new Error("The `container` must be absolutely positioned.");a(this,sf).observe(this.container),this.eventBus=s.eventBus,this.linkService=s.linkService||new ge.SimpleLinkService,this.downloadManager=s.downloadManager||null,this.findController=s.findController||null,R(this,eh,s.altTextManager||null),this.findController&&(this.findController.onIsPageVisible=A=>this._getVisiblePages().ids.has(A)),this._scriptingManager=s.scriptingManager||null,R(this,Dc,s.textLayerMode??y.TextLayerMode.ENABLE),R(this,Cl,s.annotationMode??C.AnnotationMode.ENABLE_FORMS),R(this,Ua,s.annotationEditorMode??C.AnnotationEditorType.NONE),R(this,da,s.annotationEditorHighlightColors||null),this.imageResourcesPath=s.imageResourcesPath||"",this.enablePrintAutoRotate=s.enablePrintAutoRotate||!1,this.removePageBorders=s.removePageBorders||!1,this.isOffscreenCanvasSupported=s.isOffscreenCanvasSupported??!0,this.maxCanvasPixels=s.maxCanvasPixels,this.l10n=s.l10n||Pa,R(this,br,s.enablePermissions||!1),this.pageColors=s.pageColors||null,this.defaultRenderingQueue=!s.renderingQueue,this.defaultRenderingQueue?(this.renderingQueue=new Ft,this.renderingQueue.setViewer(this)):this.renderingQueue=s.renderingQueue,this.scroll=(0,y.watchScroll)(this.container,this._scrollUpdate.bind(this)),this.presentationModeState=y.PresentationModeState.UNKNOWN,this._onBeforeDraw=this._onAfterDraw=null,this._resetView(),this.removePageBorders&&this.viewer.classList.add("removePageBorders"),S(this,_r,Tm).call(this),this.eventBus._on("thumbnailrendered",({pageNumber:A,pdfPage:x})=>{const O=this._pages[A-1];a(this,pn).has(O)||x==null||x.cleanup()}),this.l10n===Pa&&this.l10n.translate(this.container)}get pagesCount(){return this._pages.length}getPageView(s){return this._pages[s]}getCachedPageViews(){return new Set(a(this,pn))}get pageViewsReady(){return this._pagesCapability.settled&&this._pages.every(s=>s==null?void 0:s.pdfPage)}get renderForms(){return a(this,Cl)===C.AnnotationMode.ENABLE_FORMS}get enableScripting(){return!!this._scriptingManager}get currentPageNumber(){return this._currentPageNumber}set currentPageNumber(s){if(!Number.isInteger(s))throw new Error("Invalid page number.");this.pdfDocument&&(this._setCurrentPageNumber(s,!0)||console.error(`currentPageNumber: "${s}" is not a valid page.`))}_setCurrentPageNumber(s,o=!1){var m;if(this._currentPageNumber===s)return o&&S(this,ih,xm).call(this),!0;if(!(0<s&&s<=this.pagesCount))return!1;const u=this._currentPageNumber;return this._currentPageNumber=s,this.eventBus.dispatch("pagechanging",{source:this,pageNumber:s,pageLabel:((m=this._pageLabels)==null?void 0:m[s-1])??null,previous:u}),o&&S(this,ih,xm).call(this),!0}get currentPageLabel(){var s;return((s=this._pageLabels)==null?void 0:s[this._currentPageNumber-1])??null}set currentPageLabel(s){if(!this.pdfDocument)return;let o=s|0;if(this._pageLabels){const u=this._pageLabels.indexOf(s);u>=0&&(o=u+1)}this._setCurrentPageNumber(o,!0)||console.error(`currentPageLabel: "${s}" is not a valid page.`)}get currentScale(){return this._currentScale!==y.UNKNOWN_SCALE?this._currentScale:y.DEFAULT_SCALE}set currentScale(s){if(isNaN(s))throw new Error("Invalid numeric scale.");this.pdfDocument&&S(this,Ss,so).call(this,s,{noScroll:!1})}get currentScaleValue(){return this._currentScaleValue}set currentScaleValue(s){this.pdfDocument&&S(this,Ss,so).call(this,s,{noScroll:!1})}get pagesRotation(){return this._pagesRotation}set pagesRotation(s){if(!(0,y.isValidRotation)(s))throw new Error("Invalid pages rotation angle.");if(!this.pdfDocument||(s%=360,s<0&&(s+=360),this._pagesRotation===s))return;this._pagesRotation=s;const o=this._currentPageNumber;this.refresh(!0,{rotation:s}),this._currentScaleValue&&S(this,Ss,so).call(this,this._currentScaleValue,{noScroll:!0}),this.eventBus.dispatch("rotationchanging",{source:this,pagesRotation:s,pageNumber:o}),this.defaultRenderingQueue&&this.update()}get firstPagePromise(){return this.pdfDocument?this._firstPageCapability.promise:null}get onePageRendered(){return this.pdfDocument?this._onePageRenderedCapability.promise:null}get pagesPromise(){return this.pdfDocument?this._pagesCapability.promise:null}get _layerProperties(){const s=this;return(0,C.shadow)(this,"_layerProperties",{get annotationEditorUIManager(){return a(s,bi)},get annotationStorage(){var o;return(o=s.pdfDocument)==null?void 0:o.annotationStorage},get downloadManager(){return s.downloadManager},get enableScripting(){return!!s._scriptingManager},get fieldObjectsPromise(){var o;return(o=s.pdfDocument)==null?void 0:o.getFieldObjects()},get findController(){return s.findController},get hasJSActionsPromise(){var o;return(o=s.pdfDocument)==null?void 0:o.hasJSActions()},get linkService(){return s.linkService}})}async getAllText(){const s=[],o=[];for(let u=1,m=this.pdfDocument.numPages;u<=m;++u){if(a(this,Fc))return null;o.length=0;const A=await this.pdfDocument.getPage(u),{items:x}=await A.getTextContent();for(const O of x)O.str&&o.push(O.str),O.hasEOL&&o.push(`
`);s.push((0,y.removeNullCharacters)(o.join("")))}return s.join(`
`)}setDocument(s){var x,O;if(this.pdfDocument&&(this.eventBus.dispatch("pagesdestroy",{source:this}),this._cancelRendering(),this._resetView(),(x=this.findController)==null||x.setDocument(null),(O=this._scriptingManager)==null||O.setDocument(null),a(this,bi)&&(a(this,bi).destroy(),R(this,bi,null))),this.pdfDocument=s,!s)return;const o=s.numPages,u=s.getPage(1),m=s.getOptionalContentConfig(),A=a(this,br)?s.getPermissions():Promise.resolve();if(o>Qo.FORCE_SCROLL_MODE_PAGE){console.warn("Forcing PAGE-scrolling for performance reasons, given the length of the document.");const D=this._scrollMode=y.ScrollMode.PAGE;this.eventBus.dispatch("scrollmodechanged",{source:this,mode:D})}this._pagesCapability.promise.then(()=>{this.eventBus.dispatch("pagesloaded",{source:this,pagesCount:o})},()=>{}),this._onBeforeDraw=D=>{const H=this._pages[D.pageNumber-1];H&&a(this,pn).push(H)},this.eventBus._on("pagerender",this._onBeforeDraw),this._onAfterDraw=D=>{D.cssTransform||this._onePageRenderedCapability.settled||(this._onePageRenderedCapability.resolve({timestamp:D.timestamp}),this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null,a(this,gn)&&(document.removeEventListener("visibilitychange",a(this,gn)),R(this,gn,null)))},this.eventBus._on("pagerendered",this._onAfterDraw),Promise.all([u,A]).then(([D,H])=>{var nt,ot;if(s!==this.pdfDocument)return;this._firstPageCapability.resolve(D),this._optionalContentConfigPromise=m;const{annotationEditorMode:q,annotationMode:ae,textLayerMode:ve}=S(this,ua,ty).call(this,H);if(ve!==y.TextLayerMode.DISABLE){const Xe=R(this,Ks,document.createElement("div"));Xe.id="hiddenCopyElement",this.viewer.before(Xe)}if(q!==C.AnnotationEditorType.DISABLE){const Xe=q;s.isPureXfa?console.warn("Warning: XFA-editing is not implemented."):ku(Xe)?(R(this,bi,new C.AnnotationEditorUIManager(this.container,this.viewer,a(this,eh),this.eventBus,s,this.pageColors,a(this,da))),this.eventBus.dispatch("annotationeditoruimanager",{source:this,uiManager:a(this,bi)}),Xe!==C.AnnotationEditorType.NONE&&a(this,bi).updateMode(Xe)):console.error(`Invalid AnnotationEditor mode: ${Xe}`)}const Ye=this._scrollMode===y.ScrollMode.PAGE?null:this.viewer,qe=this.currentScale,Ke=D.getViewport({scale:qe*C.PixelsPerInch.PDF_TO_CSS_UNITS});this.viewer.style.setProperty("--scale-factor",Ke.scale),(((nt=this.pageColors)==null?void 0:nt.foreground)==="CanvasText"||((ot=this.pageColors)==null?void 0:ot.background)==="Canvas")&&this.viewer.style.setProperty("--hcm-highlight-filter",s.filterFactory.addHighlightHCMFilter("CanvasText","Canvas","HighlightText","Highlight"));for(let Xe=1;Xe<=o;++Xe){const vt=new eg({container:Ye,eventBus:this.eventBus,id:Xe,scale:qe,defaultViewport:Ke.clone(),optionalContentConfigPromise:m,renderingQueue:this.renderingQueue,textLayerMode:ve,annotationMode:ae,imageResourcesPath:this.imageResourcesPath,isOffscreenCanvasSupported:this.isOffscreenCanvasSupported,maxCanvasPixels:this.maxCanvasPixels,pageColors:this.pageColors,l10n:this.l10n,layerProperties:this._layerProperties});this._pages.push(vt)}const et=this._pages[0];et&&(et.setPdfPage(D),this.linkService.cachePageRef(1,D.ref)),this._scrollMode===y.ScrollMode.PAGE?S(this,ri,iu).call(this):this._spreadMode!==y.SpreadMode.NONE&&this._updateSpreadMode(),S(this,jn,iy).call(this).then(async()=>{var vt,ht;if((vt=this.findController)==null||vt.setDocument(s),(ht=this._scriptingManager)==null||ht.setDocument(s),a(this,Ks)&&(R(this,Pl,S(this,qt,sy).bind(this,ve)),document.addEventListener("copy",a(this,Pl))),a(this,bi)&&this.eventBus.dispatch("annotationeditormodechanged",{source:this,mode:a(this,Ua)}),s.loadingParams.disableAutoFetch||o>Qo.FORCE_LAZY_PAGE_INIT){this._pagesCapability.resolve();return}let Xe=o-1;if(Xe<=0){this._pagesCapability.resolve();return}for(let Ue=2;Ue<=o;++Ue){const st=s.getPage(Ue).then(yt=>{const Ut=this._pages[Ue-1];Ut.pdfPage||Ut.setPdfPage(yt),this.linkService.cachePageRef(Ue,yt.ref),--Xe===0&&this._pagesCapability.resolve()},yt=>{console.error(`Unable to get page ${Ue} to initialize viewer`,yt),--Xe===0&&this._pagesCapability.resolve()});Ue%Qo.PAUSE_EAGER_PAGE_INIT===0&&await st}}),this.eventBus.dispatch("pagesinit",{source:this}),s.getMetadata().then(({info:Xe})=>{s===this.pdfDocument&&Xe.Language&&(this.viewer.lang=Xe.Language)}),this.defaultRenderingQueue&&this.update()}).catch(D=>{console.error("Unable to initialize viewer",D),this._pagesCapability.reject(D)})}setPageLabels(s){var o;if(this.pdfDocument){s?Array.isArray(s)&&this.pdfDocument.numPages===s.length?this._pageLabels=s:(this._pageLabels=null,console.error("setPageLabels: Invalid page labels.")):this._pageLabels=null;for(let u=0,m=this._pages.length;u<m;u++)this._pages[u].setPageLabel(((o=this._pageLabels)==null?void 0:o[u])??null)}}_resetView(){this._pages=[],this._currentPageNumber=1,this._currentScale=y.UNKNOWN_SCALE,this._currentScaleValue=null,this._pageLabels=null,R(this,pn,new tg(uc)),this._location=null,this._pagesRotation=0,this._optionalContentConfigPromise=null,this._firstPageCapability=new C.PromiseCapability,this._onePageRenderedCapability=new C.PromiseCapability,this._pagesCapability=new C.PromiseCapability,this._scrollMode=y.ScrollMode.VERTICAL,this._previousScrollMode=y.ScrollMode.UNKNOWN,this._spreadMode=y.SpreadMode.NONE,R(this,Vn,{previousPageNumber:1,scrollDown:!0,pages:[]}),this._onBeforeDraw&&(this.eventBus._off("pagerender",this._onBeforeDraw),this._onBeforeDraw=null),this._onAfterDraw&&(this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null),a(this,gn)&&(document.removeEventListener("visibilitychange",a(this,gn)),R(this,gn,null)),this.viewer.textContent="",this._updateScrollMode(),this.viewer.removeAttribute("lang"),a(this,Ks)&&(document.removeEventListener("copy",a(this,Pl)),R(this,Pl,null),a(this,Ks).remove(),R(this,Ks,null))}_scrollUpdate(){this.pagesCount!==0&&this.update()}pageLabelToPageNumber(s){if(!this._pageLabels)return null;const o=this._pageLabels.indexOf(s);return o<0?null:o+1}scrollPageIntoView({pageNumber:s,destArray:o=null,allowNegativeOffset:u=!1,ignoreDestinationZoom:m=!1}){if(!this.pdfDocument)return;const A=Number.isInteger(s)&&this._pages[s-1];if(!A){console.error(`scrollPageIntoView: "${s}" is not a valid pageNumber parameter.`);return}if(this.isInPresentationMode||!o){this._setCurrentPageNumber(s,!0);return}let x=0,O=0,D=0,H=0,q,ae;const ve=A.rotation%180!==0,Ye=(ve?A.height:A.width)/A.scale/C.PixelsPerInch.PDF_TO_CSS_UNITS,qe=(ve?A.width:A.height)/A.scale/C.PixelsPerInch.PDF_TO_CSS_UNITS;let Ke=0;switch(o[1].name){case"XYZ":x=o[2],O=o[3],Ke=o[4],x=x!==null?x:0,O=O!==null?O:qe;break;case"Fit":case"FitB":Ke="page-fit";break;case"FitH":case"FitBH":O=o[2],Ke="page-width",O===null&&this._location?(x=this._location.left,O=this._location.top):(typeof O!="number"||O<0)&&(O=qe);break;case"FitV":case"FitBV":x=o[2],D=Ye,H=qe,Ke="page-height";break;case"FitR":x=o[2],O=o[3],D=o[4]-x,H=o[5]-O;let Xe=y.SCROLLBAR_PADDING,vt=y.VERTICAL_PADDING;this.removePageBorders&&(Xe=vt=0),q=(this.container.clientWidth-Xe)/D/C.PixelsPerInch.PDF_TO_CSS_UNITS,ae=(this.container.clientHeight-vt)/H/C.PixelsPerInch.PDF_TO_CSS_UNITS,Ke=Math.min(Math.abs(q),Math.abs(ae));break;default:console.error(`scrollPageIntoView: "${o[1].name}" is not a valid destination type.`);return}if(m||(Ke&&Ke!==this._currentScale?this.currentScaleValue=Ke:this._currentScale===y.UNKNOWN_SCALE&&(this.currentScaleValue=y.DEFAULT_SCALE_VALUE)),Ke==="page-fit"&&!o[4]){S(this,Bc,dp).call(this,A);return}const et=[A.viewport.convertToViewportPoint(x,O),A.viewport.convertToViewportPoint(x+D,O+H)];let nt=Math.min(et[0][0],et[1][0]),ot=Math.min(et[0][1],et[1][1]);u||(nt=Math.max(nt,0),ot=Math.max(ot,0)),S(this,Bc,dp).call(this,A,{left:nt,top:ot})}_updateLocation(s){const o=this._currentScale,u=this._currentScaleValue,m=parseFloat(u)===o?Math.round(o*1e4)/100:u,A=s.id,x=this._pages[A-1],O=this.container,D=x.getPagePoint(O.scrollLeft-s.x,O.scrollTop-s.y),H=Math.round(D[0]),q=Math.round(D[1]);let ae=`#page=${A}`;this.isInPresentationMode||(ae+=`&zoom=${m},${H},${q}`),this._location={pageNumber:A,scale:m,top:q,left:H,rotation:this._pagesRotation,pdfOpenParams:ae}}update(){const s=this._getVisiblePages(),o=s.views,u=o.length;if(u===0)return;const m=Math.max(uc,2*u+1);a(this,pn).resize(m,s.ids),this.renderingQueue.renderHighestPriority(s);const A=this._spreadMode===y.SpreadMode.NONE&&(this._scrollMode===y.ScrollMode.PAGE||this._scrollMode===y.ScrollMode.VERTICAL),x=this._currentPageNumber;let O=!1;for(const D of o){if(D.percent<100)break;if(D.id===x&&A){O=!0;break}}this._setCurrentPageNumber(O?x:o[0].id),this._updateLocation(s.first),this.eventBus.dispatch("updateviewarea",{source:this,location:this._location})}containsElement(s){return this.container.contains(s)}focus(){this.container.focus()}get _isContainerRtl(){return getComputedStyle(this.container).direction==="rtl"}get isInPresentationMode(){return this.presentationModeState===y.PresentationModeState.FULLSCREEN}get isChangingPresentationMode(){return this.presentationModeState===y.PresentationModeState.CHANGING}get isHorizontalScrollbarEnabled(){return this.isInPresentationMode?!1:this.container.scrollWidth>this.container.clientWidth}get isVerticalScrollbarEnabled(){return this.isInPresentationMode?!1:this.container.scrollHeight>this.container.clientHeight}_getVisiblePages(){const s=this._scrollMode===y.ScrollMode.PAGE?a(this,Vn).pages:this._pages,o=this._scrollMode===y.ScrollMode.HORIZONTAL,u=o&&this._isContainerRtl;return(0,y.getVisibleElements)({scrollEl:this.container,views:s,sortByVisibility:!0,horizontal:o,rtl:u})}cleanup(){for(const s of this._pages)s.renderingState!==y.RenderingStates.FINISHED&&s.reset()}_cancelRendering(){for(const s of this._pages)s.cancelRendering()}forceRendering(s){const o=s||this._getVisiblePages(),u=S(this,cf,oy).call(this,o),m=this._spreadMode!==y.SpreadMode.NONE&&this._scrollMode!==y.ScrollMode.HORIZONTAL,A=this.renderingQueue.getHighestPriority(o,this._pages,u,m);return A?(S(this,lf,ay).call(this,A).then(()=>{this.renderingQueue.renderView(A)}),!0):!1}get hasEqualPageSizes(){const s=this._pages[0];for(let o=1,u=this._pages.length;o<u;++o){const m=this._pages[o];if(m.width!==s.width||m.height!==s.height)return!1}return!0}getPagesOverview(){let s;return this._pages.map(o=>{const u=o.pdfPage.getViewport({scale:1}),m=(0,y.isPortraitOrientation)(u);if(s===void 0)s=m;else if(this.enablePrintAutoRotate&&m!==s)return{width:u.height,height:u.width,rotation:(u.rotation-90)%360};return{width:u.width,height:u.height,rotation:u.rotation}})}get optionalContentConfigPromise(){return this.pdfDocument?this._optionalContentConfigPromise?this._optionalContentConfigPromise:(console.error("optionalContentConfigPromise: Not initialized yet."),this.pdfDocument.getOptionalContentConfig()):Promise.resolve(null)}set optionalContentConfigPromise(s){if(!(s instanceof Promise))throw new Error(`Invalid optionalContentConfigPromise: ${s}`);this.pdfDocument&&this._optionalContentConfigPromise&&(this._optionalContentConfigPromise=s,this.refresh(!1,{optionalContentConfigPromise:s}),this.eventBus.dispatch("optionalcontentconfigchanged",{source:this,promise:s}))}get scrollMode(){return this._scrollMode}set scrollMode(s){if(this._scrollMode!==s){if(!(0,y.isValidScrollMode)(s))throw new Error(`Invalid scroll mode: ${s}`);this.pagesCount>Qo.FORCE_SCROLL_MODE_PAGE||(this._previousScrollMode=this._scrollMode,this._scrollMode=s,this.eventBus.dispatch("scrollmodechanged",{source:this,mode:s}),this._updateScrollMode(this._currentPageNumber))}}_updateScrollMode(s=null){const o=this._scrollMode,u=this.viewer;u.classList.toggle("scrollHorizontal",o===y.ScrollMode.HORIZONTAL),u.classList.toggle("scrollWrapped",o===y.ScrollMode.WRAPPED),!(!this.pdfDocument||!s)&&(o===y.ScrollMode.PAGE?S(this,ri,iu).call(this):this._previousScrollMode===y.ScrollMode.PAGE&&this._updateSpreadMode(),this._currentScaleValue&&isNaN(this._currentScaleValue)&&S(this,Ss,so).call(this,this._currentScaleValue,{noScroll:!0}),this._setCurrentPageNumber(s,!0),this.update())}get spreadMode(){return this._spreadMode}set spreadMode(s){if(this._spreadMode!==s){if(!(0,y.isValidSpreadMode)(s))throw new Error(`Invalid spread mode: ${s}`);this._spreadMode=s,this.eventBus.dispatch("spreadmodechanged",{source:this,mode:s}),this._updateSpreadMode(this._currentPageNumber)}}_updateSpreadMode(s=null){if(!this.pdfDocument)return;const o=this.viewer,u=this._pages;if(this._scrollMode===y.ScrollMode.PAGE)S(this,ri,iu).call(this);else if(o.textContent="",this._spreadMode===y.SpreadMode.NONE)for(const m of this._pages)o.append(m.div);else{const m=this._spreadMode-1;let A=null;for(let x=0,O=u.length;x<O;++x)A===null?(A=document.createElement("div"),A.className="spread",o.append(A)):x%2===m&&(A=A.cloneNode(!1),o.append(A)),A.append(u[x].div)}s&&(this._currentScaleValue&&isNaN(this._currentScaleValue)&&S(this,Ss,so).call(this,this._currentScaleValue,{noScroll:!0}),this._setCurrentPageNumber(s,!0),this.update())}_getPageAdvance(s,o=!1){switch(this._scrollMode){case y.ScrollMode.WRAPPED:{const{views:u}=this._getVisiblePages(),m=new Map;for(const{id:A,y:x,percent:O,widthPercent:D}of u){if(O===0||D<100)continue;let H=m.get(x);H||m.set(x,H||(H=[])),H.push(A)}for(const A of m.values()){const x=A.indexOf(s);if(x===-1)continue;const O=A.length;if(O===1)break;if(o)for(let D=x-1,H=0;D>=H;D--){const q=A[D],ae=A[D+1]-1;if(q<ae)return s-ae}else for(let D=x+1,H=O;D<H;D++){const q=A[D],ae=A[D-1]+1;if(q>ae)return ae-s}if(o){const D=A[0];if(D<s)return s-D+1}else{const D=A[O-1];if(D>s)return D-s+1}break}break}case y.ScrollMode.HORIZONTAL:break;case y.ScrollMode.PAGE:case y.ScrollMode.VERTICAL:{if(this._spreadMode===y.SpreadMode.NONE)break;const u=this._spreadMode-1;if(o&&s%2!==u)break;if(!o&&s%2===u)break;const{views:m}=this._getVisiblePages(),A=o?s-1:s+1;for(const{id:x,percent:O,widthPercent:D}of m)if(x===A){if(O>0&&D===100)return 2;break}break}}return 1}nextPage(){const s=this._currentPageNumber,o=this.pagesCount;if(s>=o)return!1;const u=this._getPageAdvance(s,!1)||1;return this.currentPageNumber=Math.min(s+u,o),!0}previousPage(){const s=this._currentPageNumber;if(s<=1)return!1;const o=this._getPageAdvance(s,!0)||1;return this.currentPageNumber=Math.max(s-o,1),!0}increaseScale({drawingDelay:s,scaleFactor:o,steps:u}={}){if(!this.pdfDocument)return;let m=this._currentScale;if(o>1)m=Math.round(m*o*100)/100;else{u??(u=1);do m=Math.ceil((m*y.DEFAULT_SCALE_DELTA).toFixed(2)*10)/10;while(--u>0&&m<y.MAX_SCALE)}S(this,Ss,so).call(this,Math.min(y.MAX_SCALE,m),{noScroll:!1,drawingDelay:s})}decreaseScale({drawingDelay:s,scaleFactor:o,steps:u}={}){if(!this.pdfDocument)return;let m=this._currentScale;if(o>0&&o<1)m=Math.round(m*o*100)/100;else{u??(u=1);do m=Math.floor((m/y.DEFAULT_SCALE_DELTA).toFixed(2)*10)/10;while(--u>0&&m>y.MIN_SCALE)}S(this,Ss,so).call(this,Math.max(y.MIN_SCALE,m),{noScroll:!1,drawingDelay:s})}get containerTopLeft(){return a(this,mr)||R(this,mr,[this.container.offsetTop,this.container.offsetLeft])}get annotationEditorMode(){return a(this,bi)?a(this,Ua):C.AnnotationEditorType.DISABLE}set annotationEditorMode({mode:s,editId:o=null,isFromKeyboard:u=!1}){if(!a(this,bi))throw new Error("The AnnotationEditor is not enabled.");if(a(this,Ua)!==s){if(!ku(s))throw new Error(`Invalid AnnotationEditor mode: ${s}`);this.pdfDocument&&(R(this,Ua,s),this.eventBus.dispatch("annotationeditormodechanged",{source:this,mode:s}),a(this,bi).updateMode(s,o,u))}}set annotationEditorParams({type:s,value:o}){if(!a(this,bi))throw new Error("The AnnotationEditor is not enabled.");a(this,bi).updateParams(s,o)}refresh(s=!1,o=Object.create(null)){if(this.pdfDocument){for(const u of this._pages)u.update(o);a(this,mn)!==null&&(clearTimeout(a(this,mn)),R(this,mn,null)),s||this.update()}}}pn=new WeakMap,eh=new WeakMap,da=new WeakMap,Ua=new WeakMap,bi=new WeakMap,Cl=new WeakMap,mr=new WeakMap,Pl=new WeakMap,br=new WeakMap,Nc=new WeakMap,Ks=new WeakMap,Fc=new WeakMap,ha=new WeakMap,sf=new WeakMap,Vn=new WeakMap,gn=new WeakMap,mn=new WeakMap,Dc=new WeakMap,ua=new WeakSet,ty=function(s){const o={annotationEditorMode:a(this,Ua),annotationMode:a(this,Cl),textLayerMode:a(this,Dc)};return s&&(!s.includes(C.PermissionFlag.COPY)&&a(this,Dc)===y.TextLayerMode.ENABLE&&(o.textLayerMode=y.TextLayerMode.ENABLE_PERMISSIONS),s.includes(C.PermissionFlag.MODIFY_CONTENTS)||(o.annotationEditorMode=C.AnnotationEditorType.DISABLE),!s.includes(C.PermissionFlag.MODIFY_ANNOTATIONS)&&!s.includes(C.PermissionFlag.FILL_INTERACTIVE_FORMS)&&a(this,Cl)===C.AnnotationMode.ENABLE_FORMS&&(o.annotationMode=C.AnnotationMode.ENABLE)),o},jn=new WeakSet,iy=function(){if(document.visibilityState==="hidden"||!this.container.offsetParent||this._getVisiblePages().views.length===0)return Promise.resolve();const s=new Promise(o=>{R(this,gn,()=>{document.visibilityState==="hidden"&&(o(),document.removeEventListener("visibilitychange",a(this,gn)),R(this,gn,null))}),document.addEventListener("visibilitychange",a(this,gn))});return Promise.race([this._onePageRenderedCapability.promise,s])},qt=new WeakSet,sy=function(s,o){const u=document.getSelection(),{focusNode:m,anchorNode:A}=u;if(A&&m&&u.containsNode(a(this,Ks))){if(a(this,Nc)||s===y.TextLayerMode.ENABLE_PERMISSIONS){o.preventDefault(),o.stopPropagation();return}R(this,Nc,!0);const x=this.container.style.cursor;this.container.style.cursor="wait";const O=D=>R(this,Fc,D.key==="Escape");window.addEventListener("keydown",O),this.getAllText().then(async D=>{D!==null&&await navigator.clipboard.writeText(D)}).catch(D=>{console.warn(`Something goes wrong when extracting the text: ${D.message}`)}).finally(()=>{R(this,Nc,!1),R(this,Fc,!1),window.removeEventListener("keydown",O),this.container.style.cursor=x}),o.preventDefault(),o.stopPropagation()}},ri=new WeakSet,iu=function(){if(this._scrollMode!==y.ScrollMode.PAGE)throw new Error("#ensurePageViewVisible: Invalid scrollMode value.");const s=this._currentPageNumber,o=a(this,Vn),u=this.viewer;if(u.textContent="",o.pages.length=0,this._spreadMode===y.SpreadMode.NONE&&!this.isInPresentationMode){const m=this._pages[s-1];u.append(m.div),o.pages.push(m)}else{const m=new Set,A=this._spreadMode-1;A===-1?m.add(s-1):s%2!==A?(m.add(s-1),m.add(s)):(m.add(s-2),m.add(s-1));const x=document.createElement("div");if(x.className="spread",this.isInPresentationMode){const O=document.createElement("div");O.className="dummyPage",x.append(O)}for(const O of m){const D=this._pages[O];D&&(x.append(D.div),o.pages.push(D))}u.append(x)}o.scrollDown=s>=o.previousPageNumber,o.previousPageNumber=s},Bc=new WeakSet,dp=function(s,o=null){const{div:u,id:m}=s;if(this._currentPageNumber!==m&&this._setCurrentPageNumber(m),this._scrollMode===y.ScrollMode.PAGE&&(S(this,ri,iu).call(this),this.update()),!o&&!this.isInPresentationMode){const A=u.offsetLeft+u.clientLeft,x=A+u.clientWidth,{scrollLeft:O,clientWidth:D}=this.container;(this._scrollMode===y.ScrollMode.HORIZONTAL||A<O||x>O+D)&&(o={left:0,top:0})}(0,y.scrollIntoView)(u,o),!this._currentScaleValue&&this._location&&(this._location=null)},vr=new WeakSet,ny=function(s){return s===this._currentScale||Math.abs(s-this._currentScale)<1e-15},wr=new WeakSet,Pm=function(s,o,{noScroll:u=!1,preset:m=!1,drawingDelay:A=-1}){if(this._currentScaleValue=o.toString(),S(this,vr,ny).call(this,s)){m&&this.eventBus.dispatch("scalechanging",{source:this,scale:s,presetValue:o});return}this.viewer.style.setProperty("--scale-factor",s*C.PixelsPerInch.PDF_TO_CSS_UNITS);const x=A>=0&&A<1e3;if(this.refresh(!0,{scale:s,drawingDelay:x?A:-1}),x&&R(this,mn,setTimeout(()=>{R(this,mn,null),this.refresh()},A)),this._currentScale=s,!u){let O=this._currentPageNumber,D;this._location&&!(this.isInPresentationMode||this.isChangingPresentationMode)&&(O=this._location.pageNumber,D=[null,{name:"XYZ"},this._location.left,this._location.top,null]),this.scrollPageIntoView({pageNumber:O,destArray:D,allowNegativeOffset:!0})}this.eventBus.dispatch("scalechanging",{source:this,scale:s,presetValue:m?o:void 0}),this.defaultRenderingQueue&&this.update()},fa=new WeakSet,ry=function(){return this._spreadMode!==y.SpreadMode.NONE&&this._scrollMode!==y.ScrollMode.HORIZONTAL?2:1},Ss=new WeakSet,so=function(s,o){let u=parseFloat(s);if(u>0)o.preset=!1,S(this,wr,Pm).call(this,u,s,o);else{const m=this._pages[this._currentPageNumber-1];if(!m)return;let A=y.SCROLLBAR_PADDING,x=y.VERTICAL_PADDING;this.isInPresentationMode?(A=x=4,this._spreadMode!==y.SpreadMode.NONE&&(A*=2)):this.removePageBorders?A=x=0:this._scrollMode===y.ScrollMode.HORIZONTAL&&([A,x]=[x,A]);const O=(this.container.clientWidth-A)/m.width*m.scale/a(this,fa,ry),D=(this.container.clientHeight-x)/m.height*m.scale;switch(s){case"page-actual":u=1;break;case"page-width":u=O;break;case"page-height":u=D;break;case"page-fit":u=Math.min(O,D);break;case"auto":const H=(0,y.isPortraitOrientation)(m)?O:Math.min(D,O);u=Math.min(y.MAX_AUTO_SCALE,H);break;default:console.error(`#setScale: "${s}" is an unknown zoom value.`);return}o.preset=!0,S(this,wr,Pm).call(this,u,s,o)}},ih=new WeakSet,xm=function(){const s=this._pages[this._currentPageNumber-1];this.isInPresentationMode&&S(this,Ss,so).call(this,this._currentScaleValue,{noScroll:!0}),S(this,Bc,dp).call(this,s)},lf=new WeakSet,ay=async function(s){var o,u;if(s.pdfPage)return s.pdfPage;try{const m=await this.pdfDocument.getPage(s.id);return s.pdfPage||s.setPdfPage(m),(u=(o=this.linkService)._cachedPageNumber)!=null&&u.call(o,m.ref)||this.linkService.cachePageRef(s.id,m.ref),m}catch(m){return console.error("Unable to get page for page view",m),null}},cf=new WeakSet,oy=function(s){var o,u;if(((o=s.first)==null?void 0:o.id)===1)return!0;if(((u=s.last)==null?void 0:u.id)===this.pagesCount)return!1;switch(this._scrollMode){case y.ScrollMode.PAGE:return a(this,Vn).scrollDown;case y.ScrollMode.HORIZONTAL:return this.scroll.right}return this.scroll.down},_r=new WeakSet,Tm=function(s=this.container.clientHeight){s!==a(this,ha)&&(R(this,ha,s),y.docStyle.setProperty("--viewer-container-height",`${s}px`))},Hn=new WeakSet,ly=function(s){for(const o of s)if(o.target===this.container){S(this,_r,Tm).call(this,Math.floor(o.borderBoxSize[0].blockSize)),R(this,mr,null);break}};class Ou{constructor(s,o){b(this,bn);b(this,df);b(this,za);b(this,As);b(this,rh);b(this,Di,void 0);R(this,Di,s);const u=[{element:s.presentationModeButton,eventName:"presentationmode",close:!0},{element:s.printButton,eventName:"print",close:!0},{element:s.downloadButton,eventName:"download",close:!0},{element:s.viewBookmarkButton,eventName:null,close:!0},{element:s.firstPageButton,eventName:"firstpage",close:!0},{element:s.lastPageButton,eventName:"lastpage",close:!0},{element:s.pageRotateCwButton,eventName:"rotatecw",close:!1},{element:s.pageRotateCcwButton,eventName:"rotateccw",close:!1},{element:s.cursorSelectToolButton,eventName:"switchcursortool",eventDetails:{tool:y.CursorTool.SELECT},close:!0},{element:s.cursorHandToolButton,eventName:"switchcursortool",eventDetails:{tool:y.CursorTool.HAND},close:!0},{element:s.scrollPageButton,eventName:"switchscrollmode",eventDetails:{mode:y.ScrollMode.PAGE},close:!0},{element:s.scrollVerticalButton,eventName:"switchscrollmode",eventDetails:{mode:y.ScrollMode.VERTICAL},close:!0},{element:s.scrollHorizontalButton,eventName:"switchscrollmode",eventDetails:{mode:y.ScrollMode.HORIZONTAL},close:!0},{element:s.scrollWrappedButton,eventName:"switchscrollmode",eventDetails:{mode:y.ScrollMode.WRAPPED},close:!0},{element:s.spreadNoneButton,eventName:"switchspreadmode",eventDetails:{mode:y.SpreadMode.NONE},close:!0},{element:s.spreadOddButton,eventName:"switchspreadmode",eventDetails:{mode:y.SpreadMode.ODD},close:!0},{element:s.spreadEvenButton,eventName:"switchspreadmode",eventDetails:{mode:y.SpreadMode.EVEN},close:!0},{element:s.documentPropertiesButton,eventName:"documentproperties",close:!0}];u.push({element:s.openFileButton,eventName:"openfile",close:!0}),this.eventBus=o,this.opened=!1,S(this,df,cy).call(this,u),this.reset()}get isOpen(){return this.opened}setPageNumber(s){this.pageNumber=s,S(this,bn,hp).call(this)}setPagesCount(s){this.pagesCount=s,S(this,bn,hp).call(this)}reset(){this.pageNumber=0,this.pagesCount=0,S(this,bn,hp).call(this),S(this,As,Lm).call(this,{mode:y.ScrollMode.VERTICAL}),S(this,rh,Rm).call(this,{mode:y.SpreadMode.NONE})}open(){if(this.opened)return;this.opened=!0;const{toggleButton:s,toolbar:o}=a(this,Di);(0,y.toggleExpandedBtn)(s,!0,o)}close(){if(!this.opened)return;this.opened=!1;const{toggleButton:s,toolbar:o}=a(this,Di);(0,y.toggleExpandedBtn)(s,!1,o)}toggle(){this.opened?this.close():this.open()}}Di=new WeakMap,bn=new WeakSet,hp=function(){const{firstPageButton:s,lastPageButton:o,pageRotateCwButton:u,pageRotateCcwButton:m}=a(this,Di);s.disabled=this.pageNumber<=1,o.disabled=this.pageNumber>=this.pagesCount,u.disabled=this.pagesCount===0,m.disabled=this.pagesCount===0},df=new WeakSet,cy=function(s){const{eventBus:o}=this,{toggleButton:u}=a(this,Di);u.addEventListener("click",this.toggle.bind(this));for(const{element:m,eventName:A,close:x,eventDetails:O}of s)m.addEventListener("click",D=>{A!==null&&o.dispatch(A,{source:this,...O}),x&&this.close(),o.dispatch("reporttelemetry",{source:this,details:{type:"buttons",data:{id:m.id}}})});o._on("cursortoolchanged",S(this,za,dy).bind(this)),o._on("scrollmodechanged",S(this,As,Lm).bind(this)),o._on("spreadmodechanged",S(this,rh,Rm).bind(this))},za=new WeakSet,dy=function({tool:s}){const{cursorSelectToolButton:o,cursorHandToolButton:u}=a(this,Di);(0,y.toggleCheckedBtn)(o,s===y.CursorTool.SELECT),(0,y.toggleCheckedBtn)(u,s===y.CursorTool.HAND)},As=new WeakSet,Lm=function({mode:s}){const{scrollPageButton:o,scrollVerticalButton:u,scrollHorizontalButton:m,scrollWrappedButton:A,spreadNoneButton:x,spreadOddButton:O,spreadEvenButton:D}=a(this,Di);(0,y.toggleCheckedBtn)(o,s===y.ScrollMode.PAGE),(0,y.toggleCheckedBtn)(u,s===y.ScrollMode.VERTICAL),(0,y.toggleCheckedBtn)(m,s===y.ScrollMode.HORIZONTAL),(0,y.toggleCheckedBtn)(A,s===y.ScrollMode.WRAPPED);const H=this.pagesCount>Qo.FORCE_SCROLL_MODE_PAGE;o.disabled=H,u.disabled=H,m.disabled=H,A.disabled=H;const q=s===y.ScrollMode.HORIZONTAL;x.disabled=q,O.disabled=q,D.disabled=q},rh=new WeakSet,Rm=function({mode:s}){const{spreadNoneButton:o,spreadOddButton:u,spreadEvenButton:m}=a(this,Di);(0,y.toggleCheckedBtn)(o,s===y.SpreadMode.NONE),(0,y.toggleCheckedBtn)(u,s===y.SpreadMode.ODD),(0,y.toggleCheckedBtn)(m,s===y.SpreadMode.EVEN)};class Rd{constructor(s,o){b(this,Un);b(this,zn);b(this,ah);b(this,Ki);b(this,So,void 0);R(this,So,s),this.eventBus=o;const u=[{element:s.previous,eventName:"previouspage"},{element:s.next,eventName:"nextpage"},{element:s.zoomIn,eventName:"zoomin"},{element:s.zoomOut,eventName:"zoomout"},{element:s.print,eventName:"print"},{element:s.download,eventName:"download"},{element:s.editorFreeTextButton,eventName:"switchannotationeditormode",eventDetails:{get mode(){const{classList:m}=s.editorFreeTextButton;return m.contains("toggled")?C.AnnotationEditorType.NONE:C.AnnotationEditorType.FREETEXT}}},{element:s.editorHighlightButton,eventName:"switchannotationeditormode",eventDetails:{get mode(){const{classList:m}=s.editorHighlightButton;return m.contains("toggled")?C.AnnotationEditorType.NONE:C.AnnotationEditorType.HIGHLIGHT}}},{element:s.editorInkButton,eventName:"switchannotationeditormode",eventDetails:{get mode(){const{classList:m}=s.editorInkButton;return m.contains("toggled")?C.AnnotationEditorType.NONE:C.AnnotationEditorType.INK}}},{element:s.editorStampButton,eventName:"switchannotationeditormode",eventDetails:{get mode(){const{classList:m}=s.editorStampButton;return m.contains("toggled")?C.AnnotationEditorType.NONE:C.AnnotationEditorType.STAMP}}}];S(this,zn,uy).call(this,u),s.editorHighlightColorPicker&&o._on("annotationeditoruimanager",({uiManager:m})=>{S(this,Un,hy).call(this,m,s.editorHighlightColorPicker)},{once:!0}),this.reset()}setPageNumber(s,o){this.pageNumber=s,this.pageLabel=o,S(this,Ki,su).call(this,!1)}setPagesCount(s,o){this.pagesCount=s,this.hasPageLabels=o,S(this,Ki,su).call(this,!0)}setPageScale(s,o){this.pageScaleValue=(s||o).toString(),this.pageScale=o,S(this,Ki,su).call(this,!1)}reset(){this.pageNumber=0,this.pageLabel=null,this.hasPageLabels=!1,this.pagesCount=0,this.pageScaleValue=y.DEFAULT_SCALE_VALUE,this.pageScale=y.DEFAULT_SCALE,S(this,Ki,su).call(this,!0),this.updateLoadingIndicatorState(),S(this,ah,Mm).call(this,{mode:C.AnnotationEditorType.DISABLE})}updateLoadingIndicatorState(s=!1){const{pageNumber:o}=a(this,So);o.classList.toggle("loading",s)}}So=new WeakMap,Un=new WeakSet,hy=function(s,o){const u=new C.ColorPicker({uiManager:s});s.setMainHighlightColorPicker(u),o.append(u.renderMainDropdown())},zn=new WeakSet,uy=function(s){const{eventBus:o}=this,{pageNumber:u,scaleSelect:m}=a(this,So),A=this;for(const{element:x,eventName:O,eventDetails:D}of s)x.addEventListener("click",H=>{O!==null&&o.dispatch(O,{source:this,...D,isFromKeyboard:H.detail===0})});u.addEventListener("click",function(){this.select()}),u.addEventListener("change",function(){o.dispatch("pagenumberchanged",{source:A,value:this.value})}),m.addEventListener("change",function(){this.value!=="custom"&&o.dispatch("scalechanged",{source:A,value:this.value})}),m.addEventListener("click",function({target:x}){this.value===A.pageScaleValue&&x.tagName.toUpperCase()==="OPTION"&&this.blur()}),m.oncontextmenu=C.noContextMenu,o._on("annotationeditormodechanged",S(this,ah,Mm).bind(this))},ah=new WeakSet,Mm=function({mode:s}){const{editorFreeTextButton:o,editorFreeTextParamsToolbar:u,editorHighlightButton:m,editorHighlightParamsToolbar:A,editorInkButton:x,editorInkParamsToolbar:O,editorStampButton:D,editorStampParamsToolbar:H}=a(this,So);(0,y.toggleCheckedBtn)(o,s===C.AnnotationEditorType.FREETEXT,u),(0,y.toggleCheckedBtn)(m,s===C.AnnotationEditorType.HIGHLIGHT,A),(0,y.toggleCheckedBtn)(x,s===C.AnnotationEditorType.INK,O),(0,y.toggleCheckedBtn)(D,s===C.AnnotationEditorType.STAMP,H);const q=s===C.AnnotationEditorType.DISABLE;o.disabled=q,m.disabled=q,x.disabled=q,D.disabled=q},Ki=new WeakSet,su=function(s=!1){const{pageNumber:o,pagesCount:u,pageScaleValue:m,pageScale:A}=this,x=a(this,So);s&&(this.hasPageLabels?(x.pageNumber.type="text",x.numPages.setAttribute("data-l10n-id","pdfjs-page-of-pages")):(x.pageNumber.type="number",x.numPages.setAttribute("data-l10n-id","pdfjs-of-pages"),x.numPages.setAttribute("data-l10n-args",JSON.stringify({pagesCount:u}))),x.pageNumber.max=u),this.hasPageLabels?(x.pageNumber.value=this.pageLabel,x.numPages.setAttribute("data-l10n-args",JSON.stringify({pageNumber:o,pagesCount:u}))):x.pageNumber.value=o,x.previous.disabled=o<=1,x.next.disabled=o>=u,x.zoomOut.disabled=A<=y.MIN_SCALE,x.zoomIn.disabled=A>=y.MAX_SCALE;let O=!1;for(const D of x.scaleSelect.options){if(D.value!==m){D.selected=!1;continue}D.selected=!0,O=!0}O||(x.customScaleOption.selected=!0,x.customScaleOption.setAttribute("data-l10n-args",JSON.stringify({scale:Math.round(A*1e4)/100})))};const sg=20;class Nu{constructor(s,o=sg){this.fingerprint=s,this.cacheSize=o,this._initializedPromise=this._readFromStorage().then(u=>{const m=JSON.parse(u||"{}");let A=-1;if(!Array.isArray(m.files))m.files=[];else{for(;m.files.length>=this.cacheSize;)m.files.shift();for(let x=0,O=m.files.length;x<O;x++)if(m.files[x].fingerprint===this.fingerprint){A=x;break}}A===-1&&(A=m.files.push({fingerprint:this.fingerprint})-1),this.file=m.files[A],this.database=m})}async _writeToStorage(){const s=JSON.stringify(this.database);localStorage.setItem("pdfjs.history",s)}async _readFromStorage(){return localStorage.getItem("pdfjs.history")}async set(s,o){return await this._initializedPromise,this.file[s]=o,this._writeToStorage()}async setMultiple(s){await this._initializedPromise;for(const o in s)this.file[o]=s[o];return this._writeToStorage()}async get(s,o){await this._initializedPromise;const u=this.file[s];return u!==void 0?u:o}async getMultiple(s){await this._initializedPromise;const o=Object.create(null);for(const u in s){const m=this.file[u];o[u]=m!==void 0?m:s[u]}return o}}var Fu=k(107);const lo=1e4,Md={UNKNOWN:-1,PREVIOUS:0,INITIAL:1},fc={instance:{supportsPrinting:!1,createPrintService(){throw new Error("Not implemented: createPrintService")}}};class Du{constructor(){ke(this,"initialBookmark",document.location.hash.substring(1));ke(this,"_initializedCapability",new C.PromiseCapability);ke(this,"appConfig",null);ke(this,"pdfDocument",null);ke(this,"pdfLoadingTask",null);ke(this,"printService",null);ke(this,"pdfViewer",null);ke(this,"pdfThumbnailViewer",null);ke(this,"pdfRenderingQueue",null);ke(this,"pdfPresentationMode",null);ke(this,"pdfDocumentProperties",null);ke(this,"pdfLinkService",null);ke(this,"pdfHistory",null);ke(this,"pdfSidebar",null);ke(this,"pdfOutlineViewer",null);ke(this,"pdfAttachmentViewer",null);ke(this,"pdfLayerViewer",null);ke(this,"pdfCursorTools",null);ke(this,"pdfScriptingManager",null);ke(this,"store",null);ke(this,"downloadManager",null);ke(this,"overlayManager",null);ke(this,"preferences",null);ke(this,"toolbar",null);ke(this,"secondaryToolbar",null);ke(this,"eventBus",null);ke(this,"l10n",null);ke(this,"annotationEditorParams",null);ke(this,"isInitialViewSet",!1);ke(this,"downloadComplete",!1);ke(this,"isViewerEmbedded",window.parent!==window);ke(this,"url","");ke(this,"baseUrl","");ke(this,"_downloadUrl","");ke(this,"externalServices",Fu.DefaultExternalServices);ke(this,"_boundEvents",Object.create(null));ke(this,"documentInfo",null);ke(this,"metadata",null);ke(this,"_contentDispositionFilename",null);ke(this,"_contentLength",null);ke(this,"_saveInProgress",!1);ke(this,"_wheelUnusedTicks",0);ke(this,"_wheelUnusedFactor",1);ke(this,"_touchUnusedTicks",0);ke(this,"_touchUnusedFactor",1);ke(this,"_PDFBug",null);ke(this,"_hasAnnotationEditors",!1);ke(this,"_title",document.title);ke(this,"_printAnnotationStoragePromise",null);ke(this,"_touchInfo",null);ke(this,"_isCtrlKeyDown",!1);ke(this,"_nimbusDataPromise",null)}async initialize(s){const{appOptions:o}=this;let u;this.appConfig=s;try{await this.preferences.initializedPromise}catch(A){console.error(`initialize: "${A.message}".`)}o.get("pdfBugEnabled")&&await this._parseHashParams();let m;switch(o.get("viewerCssTheme")){case 1:m="is-light";break;case 2:m="is-dark";break}m&&document.documentElement.classList.add(m),u=this.externalServices.createL10n(o.get("locale")),this.l10n=await u,document.getElementsByTagName("html")[0].dir=this.l10n.getDirection(),this.l10n.translate(s.appContainer||document.documentElement),this.isViewerEmbedded&&o.get("externalLinkTarget")===ge.LinkTarget.NONE&&o.set("externalLinkTarget",ge.LinkTarget.TOP),await this._initializeViewerComponents(),this.bindEvents(),this.bindWindowEvents(),this._initializedCapability.resolve()}async _parseHashParams(s){const{appOptions:o}=this,u=document.location.hash.substring(1);if(!u)return;const{mainContainer:m,viewerContainer:A}=this.appConfig,x=(0,y.parseQueryString)(u);if(x.get("disableworker")==="true")try{await s()}catch(O){console.error(`_parseHashParams: "${O.message}".`)}if(x.has("disablerange")&&o.set("disableRange",x.get("disablerange")==="true"),x.has("disablestream")&&o.set("disableStream",x.get("disablestream")==="true"),x.has("disableautofetch")&&o.set("disableAutoFetch",x.get("disableautofetch")==="true"),x.has("disablefontface")&&o.set("disableFontFace",x.get("disablefontface")==="true"),x.has("disablehistory")&&o.set("disableHistory",x.get("disablehistory")==="true"),x.has("verbosity")&&o.set("verbosity",x.get("verbosity")|0),x.has("textlayer"))switch(x.get("textlayer")){case"off":o.set("textLayerMode",y.TextLayerMode.DISABLE);break;case"visible":case"shadow":case"hover":A.classList.add(`textLayer-${x.get("textlayer")}`);try{await loadPDFBug(this),this._PDFBug.loadCSS()}catch(O){console.error(`_parseHashParams: "${O.message}".`)}break}if(x.has("pdfbug")){o.set("pdfBug",!0),o.set("fontExtraProperties",!0);const O=x.get("pdfbug").split(",");try{await loadPDFBug(this),this._PDFBug.init(m,O)}catch(D){console.error(`_parseHashParams: "${D.message}".`)}}x.has("locale")&&o.set("locale",x.get("locale"))}async _initializeViewerComponents(){var ot,Xe,vt,ht,Ue,st,yt,Ut,Lt,kt;const{appOptions:s}=this,{appConfig:o,externalServices:u,l10n:m}=this,A=s.get("isInAutomation")?new Ae:new Ve;this.eventBus=A,this.overlayManager=new at;const x=new Ft;x.onIdle=this._cleanup.bind(this),this.pdfRenderingQueue=x;const O=new ge.PDFLinkService({eventBus:A,externalLinkTarget:s.get("externalLinkTarget"),externalLinkRel:s.get("externalLinkRel"),ignoreDestinationZoom:s.get("ignoreDestinationZoom")});this.pdfLinkService=O;const D=u.createDownloadManager();this.downloadManager=D;const H=new Xt({linkService:O,eventBus:A,updateMatchesCountOnProgress:!0});this.findController=H;const q=new ji({eventBus:A,externalServices:u,docProperties:this._scriptingDocProperties.bind(this)});this.pdfScriptingManager=q;const ae=o.mainContainer,ve=o.viewerContainer,Ye=s.get("annotationEditorMode"),qe=s.get("isOffscreenCanvasSupported")&&C.FeatureTest.isOffscreenCanvasSupported,Ke=s.get("forcePageColors")||window.matchMedia("(forced-colors: active)").matches?{background:s.get("pageColorsBackground"),foreground:s.get("pageColorsForeground")}:null,et=o.altTextDialog?new xe(o.altTextDialog,ae,this.overlayManager,A):null,nt=new ig({container:ae,viewer:ve,eventBus:A,renderingQueue:x,linkService:O,downloadManager:D,altTextManager:et,findController:H,scriptingManager:s.get("enableScripting")&&q,l10n:m,textLayerMode:s.get("textLayerMode"),annotationMode:s.get("annotationMode"),annotationEditorMode:Ye,annotationEditorHighlightColors:s.get("highlightEditorColors"),imageResourcesPath:s.get("imageResourcesPath"),enablePrintAutoRotate:s.get("enablePrintAutoRotate"),isOffscreenCanvasSupported:qe,maxCanvasPixels:s.get("maxCanvasPixels"),enablePermissions:s.get("enablePermissions"),pageColors:Ke});if(this.pdfViewer=nt,x.setViewer(nt),O.setViewer(nt),q.setViewer(nt),(ot=o.sidebar)!=null&&ot.thumbnailView&&(this.pdfThumbnailViewer=new Kp({container:o.sidebar.thumbnailView,eventBus:A,renderingQueue:x,linkService:O,pageColors:Ke}),x.setThumbnailViewer(this.pdfThumbnailViewer)),!this.isViewerEmbedded&&!s.get("disableHistory")&&(this.pdfHistory=new Ti({linkService:O,eventBus:A}),O.setHistory(this.pdfHistory)),!this.supportsIntegratedFind&&o.findBar&&(this.findBar=new Yn(o.findBar,A)),o.annotationEditorParams)if(Ye!==C.AnnotationEditorType.DISABLE){qe||(vt=(Xe=o.toolbar)==null?void 0:Xe.editorStampButton)==null||vt.classList.add("hidden");const Pt=(ht=o.toolbar)==null?void 0:ht.editorHighlightButton;Pt&&s.get("enableHighlightEditor")&&(Pt.hidden=!1),this.annotationEditorParams=new ze(o.annotationEditorParams,A)}else for(const Pt of["editorModeButtons","editorModeSeparator"])(Ue=document.getElementById(Pt))==null||Ue.classList.add("hidden");o.documentProperties&&(this.pdfDocumentProperties=new Re(o.documentProperties,this.overlayManager,A,m,()=>this._docFilename)),(st=o.secondaryToolbar)!=null&&st.cursorHandToolButton&&(this.pdfCursorTools=new ct({container:ae,eventBus:A,cursorToolOnLoad:s.get("cursorToolOnLoad")})),o.toolbar&&(this.toolbar=new Rd(o.toolbar,A)),o.secondaryToolbar&&(this.secondaryToolbar=new Ou(o.secondaryToolbar,A)),this.supportsFullscreen&&((yt=o.secondaryToolbar)!=null&&yt.presentationModeButton)&&(this.pdfPresentationMode=new it({container:ae,pdfViewer:nt,eventBus:A})),o.passwordOverlay&&(this.passwordPrompt=new Z(o.passwordOverlay,this.overlayManager,this.isViewerEmbedded)),(Ut=o.sidebar)!=null&&Ut.outlineView&&(this.pdfOutlineViewer=new Js({container:o.sidebar.outlineView,eventBus:A,l10n:m,linkService:O,downloadManager:D})),(Lt=o.sidebar)!=null&&Lt.attachmentsView&&(this.pdfAttachmentViewer=new Ce({container:o.sidebar.attachmentsView,eventBus:A,l10n:m,downloadManager:D})),(kt=o.sidebar)!=null&&kt.layersView&&(this.pdfLayerViewer=new ps({container:o.sidebar.layersView,eventBus:A,l10n:m})),o.sidebar&&(this.pdfSidebar=new Sd({elements:o.sidebar,eventBus:A,l10n:m}),this.pdfSidebar.onToggled=this.forceRendering.bind(this),this.pdfSidebar.onUpdateThumbnails=()=>{var Pt;for(const Gt of nt.getCachedPageViews())Gt.renderingState===y.RenderingStates.FINISHED&&((Pt=this.pdfThumbnailViewer.getThumbnail(Gt.id-1))==null||Pt.setImage(Gt));this.pdfThumbnailViewer.scrollThumbnailIntoView(nt.currentPageNumber)})}async run(s,o){var q,ae,ve,Ye,qe,Ke;const{appOptions:u}=this;this.preferences=this.externalServices.createPreferences(),await this.initialize(s);const{appConfig:m,eventBus:A}=this;let x;const O=document.location.search.substring(1);x=(0,y.parseQueryString)(O).get("file")??u.get("defaultUrl"),o(x);const H=m.openFileInput;H.value=null,H.addEventListener("change",function(et){const{files:nt}=et.target;!nt||nt.length===0||A.dispatch("fileinputchange",{source:this,fileInput:et.target})}),m.mainContainer.addEventListener("dragover",function(et){et.preventDefault(),et.dataTransfer.dropEffect=et.dataTransfer.effectAllowed==="copy"?"copy":"move"}),m.mainContainer.addEventListener("drop",function(et){et.preventDefault();const{files:nt}=et.dataTransfer;!nt||nt.length===0||A.dispatch("fileinputchange",{source:this,fileInput:et.dataTransfer})}),u.get("supportsDocumentFonts")||(u.set("disableFontFace",!0),this.l10n.get("pdfjs-web-fonts-disabled").then(et=>{console.warn(et)})),this.supportsPrinting||((ae=(q=m.toolbar)==null?void 0:q.print)==null||ae.classList.add("hidden"),(ve=m.secondaryToolbar)==null||ve.printButton.classList.add("hidden")),this.supportsFullscreen||(Ye=m.secondaryToolbar)==null||Ye.presentationModeButton.classList.add("hidden"),this.supportsIntegratedFind&&((Ke=(qe=m.toolbar)==null?void 0:qe.viewFind)==null||Ke.classList.add("hidden")),x?this.open({url:x}):this._hideViewBookmark()}get initialized(){return this._initializedCapability.settled}get initializedPromise(){return this._initializedCapability.promise}zoomIn(s,o){const{appOptions:u}=this;this.pdfViewer.isInPresentationMode||this.pdfViewer.increaseScale({drawingDelay:u.get("defaultZoomDelay"),steps:s,scaleFactor:o})}zoomOut(s,o){const{appOptions:u}=this;this.pdfViewer.isInPresentationMode||this.pdfViewer.decreaseScale({drawingDelay:u.get("defaultZoomDelay"),steps:s,scaleFactor:o})}zoomReset(){this.pdfViewer.isInPresentationMode||(this.pdfViewer.currentScaleValue=y.DEFAULT_SCALE_VALUE)}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return this.pdfViewer.currentPageNumber}get supportsPrinting(){return fc.instance.supportsPrinting}get supportsFullscreen(){return(0,C.shadow)(this,"supportsFullscreen",document.fullscreenEnabled)}get supportsPinchToZoom(){const{appOptions:s}=this;return(0,C.shadow)(this,"supportsPinchToZoom",s.get("supportsPinchToZoom"))}get supportsIntegratedFind(){const{appOptions:s}=this;return(0,C.shadow)(this,"supportsIntegratedFind",s.get("supportsIntegratedFind"))}get loadingBar(){const s=document.getElementById("loadingBar"),o=s?new y.ProgressBar(s):null;return(0,C.shadow)(this,"loadingBar",o)}get supportsMouseWheelZoomCtrlKey(){const{appOptions:s}=this;return(0,C.shadow)(this,"supportsMouseWheelZoomCtrlKey",s.get("supportsMouseWheelZoomCtrlKey"))}get supportsMouseWheelZoomMetaKey(){const{appOptions:s}=this;return(0,C.shadow)(this,"supportsMouseWheelZoomMetaKey",s.get("supportsMouseWheelZoomMetaKey"))}initPassiveLoading(s){throw new Error("Not implemented: initPassiveLoading")}setTitleUsingUrl(s="",o=null){this.url=s,this.baseUrl=s.split("#",1)[0],o&&(this._downloadUrl=o===s?this.baseUrl:o.split("#",1)[0]),(0,C.isDataScheme)(s)&&this._hideViewBookmark();let u=(0,C.getPdfFilenameFromUrl)(s,"");if(!u)try{u=decodeURIComponent((0,C.getFilenameFromUrl)(s))||s}catch{u=s}this.setTitle(u)}setTitle(s=this._title){if(this._title=s,this.isViewerEmbedded)return;const o=this._hasAnnotationEditors&&!this.pdfRenderingQueue.printing;document.title=`${o?"* ":""}${s}`}get _docFilename(){return this._contentDispositionFilename||(0,C.getPdfFilenameFromUrl)(this.url)}_hideViewBookmark(){var o;const{secondaryToolbar:s}=this.appConfig;s==null||s.viewBookmarkButton.classList.add("hidden"),s!=null&&s.presentationModeButton.classList.contains("hidden")&&((o=document.getElementById("viewBookmarkSeparator"))==null||o.classList.add("hidden"))}async close(){var o,u,m,A,x,O,D,H,q,ae,ve,Ye;if(this._unblockDocumentLoadEvent(),this._hideViewBookmark(),!this.pdfLoadingTask)return;if(((o=this.pdfDocument)==null?void 0:o.annotationStorage.size)>0&&this._annotationStorageModified)try{await this.save()}catch{}const s=[];s.push(this.pdfLoadingTask.destroy()),this.pdfLoadingTask=null,this.pdfDocument&&(this.pdfDocument=null,(u=this.pdfThumbnailViewer)==null||u.setDocument(null),this.pdfViewer.setDocument(null),this.pdfLinkService.setDocument(null),(m=this.pdfDocumentProperties)==null||m.setDocument(null)),this.pdfLinkService.externalLinkEnabled=!0,this.store=null,this.isInitialViewSet=!1,this.downloadComplete=!1,this.url="",this.baseUrl="",this._downloadUrl="",this.documentInfo=null,this.metadata=null,this._contentDispositionFilename=null,this._contentLength=null,this._saveInProgress=!1,this._hasAnnotationEditors=!1,s.push(this.pdfScriptingManager.destroyPromise,this.passwordPrompt.close()),this.setTitle(),(A=this.pdfSidebar)==null||A.reset(),(x=this.pdfOutlineViewer)==null||x.reset(),(O=this.pdfAttachmentViewer)==null||O.reset(),(D=this.pdfLayerViewer)==null||D.reset(),(H=this.pdfHistory)==null||H.reset(),(q=this.findBar)==null||q.reset(),(ae=this.toolbar)==null||ae.reset(),(ve=this.secondaryToolbar)==null||ve.reset(),(Ye=this._PDFBug)==null||Ye.cleanup(),await Promise.all(s)}async open(s){const{appOptions:o}=this;this.pdfLoadingTask&&await this.close();const u=o.getAll(te.OptionKind.WORKER);Object.assign(C.GlobalWorkerOptions,u),s.url&&this.setTitleUsingUrl(s.originalUrl||s.url,s.url);const m=o.getAll(te.OptionKind.API),A=(0,C.getDocument)({...m,...s});return this.pdfLoadingTask=A,A.onPassword=(x,O)=>{this.isViewerEmbedded&&this._unblockDocumentLoadEvent(),this.pdfLinkService.externalLinkEnabled=!1,this.passwordPrompt.setUpdateCallback(x,O),this.passwordPrompt.open()},A.onProgress=({loaded:x,total:O})=>{this.progress(x/O)},A.promise.then(x=>{this.load(x)},x=>{if(A!==this.pdfLoadingTask)return;let O="pdfjs-loading-error";return x instanceof C.InvalidPDFException?O="pdfjs-invalid-file-error":x instanceof C.MissingPDFException?O="pdfjs-missing-file-error":x instanceof C.UnexpectedResponseException&&(O="pdfjs-unexpected-response-error"),this.l10n.get(O).then(D=>{throw this._documentError(D,{message:x==null?void 0:x.message}),x})})}_ensureDownloadComplete(){if(!(this.pdfDocument&&this.downloadComplete))throw new Error("PDF document not downloaded.")}async download(s={}){const o=this._downloadUrl,u=this._docFilename;try{this._ensureDownloadComplete();const m=await this.pdfDocument.getData(),A=new Blob([m],{type:"application/pdf"});await this.downloadManager.download(A,o,u,s)}catch{await this.downloadManager.downloadUrl(o,u,s)}}async save(s={}){if(this._saveInProgress)return;this._saveInProgress=!0,await this.pdfScriptingManager.dispatchWillSave();const o=this._downloadUrl,u=this._docFilename;try{this._ensureDownloadComplete();const m=await this.pdfDocument.saveDocument(),A=new Blob([m],{type:"application/pdf"});await this.downloadManager.download(A,o,u,s)}catch(m){console.error(`Error when saving the document: ${m.message}`),await this.download(s)}finally{await this.pdfScriptingManager.dispatchDidSave(),this._saveInProgress=!1}this._hasAnnotationEditors&&this.externalServices.reportTelemetry({type:"editing",data:{type:"save"}})}downloadOrSave(s={}){var o;((o=this.pdfDocument)==null?void 0:o.annotationStorage.size)>0?this.save(s):this.download(s)}openInExternalApp(){this.downloadOrSave({openInExternalApp:!0})}_documentError(s,o=null){this._unblockDocumentLoadEvent(),this._otherError(s,o),this.eventBus.dispatch("documenterror",{source:this,message:s,reason:(o==null?void 0:o.message)??null})}_otherError(s,o=null){const u=[`PDF.js v${C.version||"?"} (build: ${C.build||"?"})`];o&&(u.push(`Message: ${o.message}`),o.stack?u.push(`Stack: ${o.stack}`):(o.filename&&u.push(`File: ${o.filename}`),o.lineNumber&&u.push(`Line: ${o.lineNumber}`))),console.error(`${s}

${u.join(`
`)}`)}progress(s){var m;const{appOptions:o}=this;if(!this.loadingBar||this.downloadComplete)return;const u=Math.round(s*100);u<=this.loadingBar.percent||(this.loadingBar.percent=u,(((m=this.pdfDocument)==null?void 0:m.loadingParams.disableAutoFetch)??o.get("disableAutoFetch"))&&this.loadingBar.setDisableAutoFetch())}load(s){var ae,ve,Ye,qe;const{appOptions:o}=this;this.pdfDocument=s,s.getDownloadInfo().then(({length:Ke})=>{var et;this._contentLength=Ke,this.downloadComplete=!0,(et=this.loadingBar)==null||et.hide(),O.then(()=>{this.eventBus.dispatch("documentloaded",{source:this})})});const u=s.getPageLayout().catch(()=>{}),m=s.getPageMode().catch(()=>{}),A=s.getOpenAction().catch(()=>{});(ae=this.toolbar)==null||ae.setPagesCount(s.numPages,!1),(ve=this.secondaryToolbar)==null||ve.setPagesCount(s.numPages),this.pdfLinkService.setDocument(s),(Ye=this.pdfDocumentProperties)==null||Ye.setDocument(s);const x=this.pdfViewer;x.setDocument(s);const{firstPagePromise:O,onePageRendered:D,pagesPromise:H}=x;(qe=this.pdfThumbnailViewer)==null||qe.setDocument(s);const q=(this.store=new Nu(s.fingerprints[0])).getMultiple({page:null,zoom:y.DEFAULT_SCALE_VALUE,scrollLeft:"0",scrollTop:"0",rotation:null,sidebarView:y.SidebarView.UNKNOWN,scrollMode:y.ScrollMode.UNKNOWN,spreadMode:y.SpreadMode.UNKNOWN}).catch(()=>{});O.then(Ke=>{var et;(et=this.loadingBar)==null||et.setWidth(this.appConfig.viewerContainer),this._initializeAnnotationStorageCallbacks(s),Promise.all([y.animationStarted,q,u,m,A]).then(async([nt,ot,Xe,vt,ht])=>{const Ue=o.get("viewOnLoad");this._initializePdfHistory({fingerprint:s.fingerprints[0],viewOnLoad:Ue,initialDest:ht==null?void 0:ht.dest});const st=this.initialBookmark,yt=o.get("defaultZoomValue");let Ut=yt?`zoom=${yt}`:null,Lt=null,kt=o.get("sidebarViewOnLoad"),Pt=o.get("scrollModeOnLoad"),Gt=o.get("spreadModeOnLoad");ot!=null&&ot.page&&Ue!==Md.INITIAL&&(Ut=`page=${ot.page}&zoom=${yt||ot.zoom},${ot.scrollLeft},${ot.scrollTop}`,Lt=parseInt(ot.rotation,10),kt===y.SidebarView.UNKNOWN&&(kt=ot.sidebarView|0),Pt===y.ScrollMode.UNKNOWN&&(Pt=ot.scrollMode|0),Gt===y.SpreadMode.UNKNOWN&&(Gt=ot.spreadMode|0)),vt&&kt===y.SidebarView.UNKNOWN&&(kt=(0,y.apiPageModeToSidebarView)(vt)),Xe&&Pt===y.ScrollMode.UNKNOWN&&Gt===y.SpreadMode.UNKNOWN&&(Gt=(0,y.apiPageLayoutToViewerModes)(Xe).spreadMode),this.setInitialView(Ut,{rotation:Lt,sidebarView:kt,scrollMode:Pt,spreadMode:Gt}),this.eventBus.dispatch("documentinit",{source:this}),this.isViewerEmbedded||x.focus(),await Promise.race([H,new Promise(Cs=>{setTimeout(Cs,lo)})]),!(!st&&!Ut)&&(x.hasEqualPageSizes||(this.initialBookmark=st,x.currentScaleValue=x.currentScaleValue,this.setInitialView(Ut)))}).catch(()=>{this.setInitialView()}).then(function(){x.update()})}),H.then(()=>{this._unblockDocumentLoadEvent(),this._initializeAutoPrint(s,A)},Ke=>{this.l10n.get("pdfjs-loading-error").then(et=>{this._documentError(et,{message:Ke==null?void 0:Ke.message})})}),D.then(Ke=>{this.externalServices.reportTelemetry({type:"pageInfo",timestamp:Ke.timestamp}),this.pdfOutlineViewer&&s.getOutline().then(et=>{s===this.pdfDocument&&this.pdfOutlineViewer.render({outline:et,pdfDocument:s})}),this.pdfAttachmentViewer&&s.getAttachments().then(et=>{s===this.pdfDocument&&this.pdfAttachmentViewer.render({attachments:et})}),this.pdfLayerViewer&&x.optionalContentConfigPromise.then(et=>{s===this.pdfDocument&&this.pdfLayerViewer.render({optionalContentConfig:et,pdfDocument:s})})}),this._initializePageLabels(s),this._initializeMetadata(s)}async _scriptingDocProperties(s){var o,u;return!this.documentInfo&&(await new Promise(m=>{this.eventBus._on("metadataloaded",m,{once:!0})}),s!==this.pdfDocument)||!this._contentLength&&(await new Promise(m=>{this.eventBus._on("documentloaded",m,{once:!0})}),s!==this.pdfDocument)?null:{...this.documentInfo,baseURL:this.baseUrl,filesize:this._contentLength,filename:this._docFilename,metadata:(o=this.metadata)==null?void 0:o.getRaw(),authors:(u=this.metadata)==null?void 0:u.get("dc:creator"),numPages:this.pagesCount,URL:this.url}}async _initializeAutoPrint(s,o){const[u,m]=await Promise.all([o,this.pdfViewer.enableScripting?null:s.getJSActions()]);if(s!==this.pdfDocument)return;let A=(u==null?void 0:u.action)==="Print";if(m){console.warn("Warning: JavaScript support is not enabled");for(const x in m){if(A)break;switch(x){case"WillClose":case"WillSave":case"DidSave":case"WillPrint":case"DidPrint":continue}A=m[x].some(O=>y.AutoPrintRegExp.test(O))}}A&&this.triggerPrinting()}async _initializeMetadata(s){const{info:o,metadata:u,contentDispositionFilename:m,contentLength:A}=await s.getMetadata();if(s!==this.pdfDocument)return;this.documentInfo=o,this.metadata=u,this._contentDispositionFilename??(this._contentDispositionFilename=m),this._contentLength??(this._contentLength=A),console.log(`PDF ${s.fingerprints[0]} [${o.PDFFormatVersion} ${(o.Producer||"-").trim()} / ${(o.Creator||"-").trim()}] (PDF.js: ${C.version||"?"} [${C.build||"?"}])`);let x=o.Title;const O=u==null?void 0:u.get("dc:title");O&&O!=="Untitled"&&!/[\uFFF0-\uFFFF]/g.test(O)&&(x=O),x?this.setTitle(`${x} - ${this._contentDispositionFilename||this._title}`):this._contentDispositionFilename&&this.setTitle(this._contentDispositionFilename),o.IsXFAPresent&&!o.IsAcroFormPresent&&!s.isPureXfa?s.loadingParams.enableXfa?console.warn("Warning: XFA Foreground documents are not supported"):console.warn("Warning: XFA support is not enabled"):(o.IsAcroFormPresent||o.IsXFAPresent)&&!this.pdfViewer.renderForms&&console.warn("Warning: Interactive form support is not enabled"),o.IsSignaturesPresent&&console.warn("Warning: Digital signatures validation is not supported"),this.eventBus.dispatch("metadataloaded",{source:this})}async _initializePageLabels(s){const{appOptions:o}=this,u=await s.getPageLabels();if(s!==this.pdfDocument||!u||o.get("disablePageLabels"))return;const m=u.length;let A=0,x=0;for(let q=0;q<m;q++){const ae=u[q];if(ae===(q+1).toString())A++;else if(ae==="")x++;else break}if(A>=m||x>=m)return;const{pdfViewer:O,pdfThumbnailViewer:D,toolbar:H}=this;O.setPageLabels(u),D==null||D.setPageLabels(u),H==null||H.setPagesCount(m,!0),H==null||H.setPageNumber(O.currentPageNumber,O.currentPageLabel)}_initializePdfHistory({fingerprint:s,viewOnLoad:o,initialDest:u=null}){const{appOptions:m}=this;this.pdfHistory&&(this.pdfHistory.initialize({fingerprint:s,resetHistory:o===Md.INITIAL,updateUrl:m.get("historyUpdateUrl")}),this.pdfHistory.initialBookmark&&(this.initialBookmark=this.pdfHistory.initialBookmark,this.initialRotation=this.pdfHistory.initialRotation),u&&!this.initialBookmark&&o===Md.UNKNOWN&&(this.initialBookmark=JSON.stringify(u),this.pdfHistory.push({explicitDest:u,pageNumber:null})))}_initializeAnnotationStorageCallbacks(s){if(s!==this.pdfDocument)return;const{annotationStorage:o}=s;o.onSetModified=()=>{window.addEventListener("beforeunload",beforeUnload),this._annotationStorageModified=!0},o.onResetModified=()=>{window.removeEventListener("beforeunload",beforeUnload),delete this._annotationStorageModified},o.onAnnotationEditor=u=>{this._hasAnnotationEditors=!!u,this.setTitle(),u&&this.externalServices.reportTelemetry({type:"editing",data:{type:u}})}}setInitialView(s,{rotation:o,sidebarView:u,scrollMode:m,spreadMode:A}={}){var D,H,q;const x=ae=>{(0,y.isValidRotation)(ae)&&(this.pdfViewer.pagesRotation=ae)},O=(ae,ve)=>{(0,y.isValidScrollMode)(ae)&&(this.pdfViewer.scrollMode=ae),(0,y.isValidSpreadMode)(ve)&&(this.pdfViewer.spreadMode=ve)};this.isInitialViewSet=!0,(D=this.pdfSidebar)==null||D.setInitialView(u),O(m,A),this.initialBookmark?(x(this.initialRotation),delete this.initialRotation,this.pdfLinkService.setHash(this.initialBookmark),this.initialBookmark=null):s&&(x(o),this.pdfLinkService.setHash(s)),(H=this.toolbar)==null||H.setPageNumber(this.pdfViewer.currentPageNumber,this.pdfViewer.currentPageLabel),(q=this.secondaryToolbar)==null||q.setPageNumber(this.pdfViewer.currentPageNumber),this.pdfViewer.currentScaleValue||(this.pdfViewer.currentScaleValue=y.DEFAULT_SCALE_VALUE)}_cleanup(){var o;const{appOptions:s}=this;this.pdfDocument&&(this.pdfViewer.cleanup(),(o=this.pdfThumbnailViewer)==null||o.cleanup(),this.pdfDocument.cleanup(s.get("fontExtraProperties")))}forceRendering(){var s;this.pdfRenderingQueue.printing=!!this.printService,this.pdfRenderingQueue.isThumbnailViewEnabled=((s=this.pdfSidebar)==null?void 0:s.visibleView)===y.SidebarView.THUMBS,this.pdfRenderingQueue.renderHighestPriority()}beforePrint(){const{appOptions:s}=this;if(this._printAnnotationStoragePromise=this.pdfScriptingManager.dispatchWillPrint().catch(()=>{}).then(()=>{var O;return(O=this.pdfDocument)==null?void 0:O.annotationStorage.print}),this.printService)return;if(!this.supportsPrinting){this.l10n.get("pdfjs-printing-not-supported").then(O=>{this._otherError(O)});return}if(!this.pdfViewer.pageViewsReady){this.l10n.get("pdfjs-printing-not-ready").then(O=>{window.alert(O)});return}const o=this.pdfViewer.getPagesOverview(),u=this.appConfig.printContainer,m=s.get("printResolution"),A=this.pdfViewer.optionalContentConfigPromise,x=fc.instance.createPrintService(this.pdfDocument,o,u,m,A,this._printAnnotationStoragePromise);this.printService=x,this.forceRendering(),this.setTitle(),x.layout(),this._hasAnnotationEditors&&this.externalServices.reportTelemetry({type:"editing",data:{type:"print"}})}afterPrint(){var s;this._printAnnotationStoragePromise&&(this._printAnnotationStoragePromise.then(()=>{this.pdfScriptingManager.dispatchDidPrint()}),this._printAnnotationStoragePromise=null),this.printService&&(this.printService.destroy(),this.printService=null,(s=this.pdfDocument)==null||s.annotationStorage.resetModified()),this.forceRendering(),this.setTitle()}rotatePages(s){this.pdfViewer.pagesRotation+=s}requestPresentationMode(){var s;(s=this.pdfPresentationMode)==null||s.request()}triggerPrinting(){this.supportsPrinting&&window.print()}bindEvents(){const{appOptions:s}=this,{eventBus:o,_boundEvents:u}=this;u.beforePrint=this.beforePrint.bind(this),u.afterPrint=this.afterPrint.bind(this),o._on("resize",webViewerResize),o._on("hashchange",webViewerHashchange),o._on("beforeprint",u.beforePrint),o._on("afterprint",u.afterPrint),o._on("pagerender",webViewerPageRender),o._on("pagerendered",webViewerPageRendered),o._on("updateviewarea",webViewerUpdateViewarea),o._on("pagechanging",webViewerPageChanging),o._on("scalechanging",webViewerScaleChanging),o._on("rotationchanging",webViewerRotationChanging),o._on("sidebarviewchanged",webViewerSidebarViewChanged),o._on("pagemode",webViewerPageMode),o._on("namedaction",webViewerNamedAction),o._on("presentationmodechanged",webViewerPresentationModeChanged),o._on("presentationmode",webViewerPresentationMode),o._on("switchannotationeditormode",webViewerSwitchAnnotationEditorMode),o._on("switchannotationeditorparams",webViewerSwitchAnnotationEditorParams),o._on("print",webViewerPrint),o._on("download",webViewerDownload),o._on("openinexternalapp",webViewerOpenInExternalApp),o._on("firstpage",webViewerFirstPage),o._on("lastpage",webViewerLastPage),o._on("nextpage",webViewerNextPage),o._on("previouspage",webViewerPreviousPage),o._on("zoomin",webViewerZoomIn),o._on("zoomout",webViewerZoomOut),o._on("zoomreset",webViewerZoomReset),o._on("pagenumberchanged",webViewerPageNumberChanged),o._on("scalechanged",webViewerScaleChanged),o._on("rotatecw",webViewerRotateCw),o._on("rotateccw",webViewerRotateCcw),o._on("optionalcontentconfig",webViewerOptionalContentConfig),o._on("switchscrollmode",webViewerSwitchScrollMode),o._on("scrollmodechanged",webViewerScrollModeChanged),o._on("switchspreadmode",webViewerSwitchSpreadMode),o._on("spreadmodechanged",webViewerSpreadModeChanged),o._on("documentproperties",webViewerDocumentProperties),o._on("findfromurlhash",webViewerFindFromUrlHash),o._on("updatefindmatchescount",webViewerUpdateFindMatchesCount),o._on("updatefindcontrolstate",webViewerUpdateFindControlState),s.get("pdfBug")&&(u.reportPageStatsPDFBug=reportPageStatsPDFBug,o._on("pagerendered",u.reportPageStatsPDFBug),o._on("pagechanging",u.reportPageStatsPDFBug)),o._on("fileinputchange",webViewerFileInputChange),o._on("openfile",webViewerOpenFile)}bindWindowEvents(){const{eventBus:s,_boundEvents:o}=this;function u(m=null){m&&webViewerResolutionChange(m);const A=window.matchMedia(`(resolution: ${window.devicePixelRatio||1}dppx)`);A.addEventListener("change",u,{once:!0}),o.removeWindowResolutionChange||(o.removeWindowResolutionChange=function(){A.removeEventListener("change",u),o.removeWindowResolutionChange=null})}u(),o.windowResize=()=>{s.dispatch("resize",{source:window})},o.windowHashChange=()=>{s.dispatch("hashchange",{source:window,hash:document.location.hash.substring(1)})},o.windowBeforePrint=()=>{s.dispatch("beforeprint",{source:window})},o.windowAfterPrint=()=>{s.dispatch("afterprint",{source:window})},o.windowUpdateFromSandbox=m=>{s.dispatch("updatefromsandbox",{source:window,detail:m.detail})},window.addEventListener("visibilitychange",webViewerVisibilityChange),window.addEventListener("wheel",webViewerWheel,{passive:!1}),window.addEventListener("touchstart",webViewerTouchStart,{passive:!1}),window.addEventListener("touchmove",webViewerTouchMove,{passive:!1}),window.addEventListener("touchend",webViewerTouchEnd,{passive:!1}),window.addEventListener("click",webViewerClick),window.addEventListener("keydown",webViewerKeyDown),window.addEventListener("keyup",webViewerKeyUp),window.addEventListener("resize",o.windowResize),window.addEventListener("hashchange",o.windowHashChange),window.addEventListener("beforeprint",o.windowBeforePrint),window.addEventListener("afterprint",o.windowAfterPrint),window.addEventListener("updatefromsandbox",o.windowUpdateFromSandbox)}unbindEvents(){const{eventBus:s,_boundEvents:o}=this;s._off("resize",webViewerResize),s._off("hashchange",webViewerHashchange),s._off("beforeprint",o.beforePrint),s._off("afterprint",o.afterPrint),s._off("pagerender",webViewerPageRender),s._off("pagerendered",webViewerPageRendered),s._off("updateviewarea",webViewerUpdateViewarea),s._off("pagechanging",webViewerPageChanging),s._off("scalechanging",webViewerScaleChanging),s._off("rotationchanging",webViewerRotationChanging),s._off("sidebarviewchanged",webViewerSidebarViewChanged),s._off("pagemode",webViewerPageMode),s._off("namedaction",webViewerNamedAction),s._off("presentationmodechanged",webViewerPresentationModeChanged),s._off("presentationmode",webViewerPresentationMode),s._off("print",webViewerPrint),s._off("download",webViewerDownload),s._off("openinexternalapp",webViewerOpenInExternalApp),s._off("firstpage",webViewerFirstPage),s._off("lastpage",webViewerLastPage),s._off("nextpage",webViewerNextPage),s._off("previouspage",webViewerPreviousPage),s._off("zoomin",webViewerZoomIn),s._off("zoomout",webViewerZoomOut),s._off("zoomreset",webViewerZoomReset),s._off("pagenumberchanged",webViewerPageNumberChanged),s._off("scalechanged",webViewerScaleChanged),s._off("rotatecw",webViewerRotateCw),s._off("rotateccw",webViewerRotateCcw),s._off("optionalcontentconfig",webViewerOptionalContentConfig),s._off("switchscrollmode",webViewerSwitchScrollMode),s._off("scrollmodechanged",webViewerScrollModeChanged),s._off("switchspreadmode",webViewerSwitchSpreadMode),s._off("spreadmodechanged",webViewerSpreadModeChanged),s._off("documentproperties",webViewerDocumentProperties),s._off("findfromurlhash",webViewerFindFromUrlHash),s._off("updatefindmatchescount",webViewerUpdateFindMatchesCount),s._off("updatefindcontrolstate",webViewerUpdateFindControlState),o.reportPageStatsPDFBug&&(s._off("pagerendered",o.reportPageStatsPDFBug),s._off("pagechanging",o.reportPageStatsPDFBug),o.reportPageStatsPDFBug=null),s._off("fileinputchange",webViewerFileInputChange),s._off("openfile",webViewerOpenFile),o.beforePrint=null,o.afterPrint=null}unbindWindowEvents(){var o;const{_boundEvents:s}=this;window.removeEventListener("visibilitychange",webViewerVisibilityChange),window.removeEventListener("wheel",webViewerWheel,{passive:!1}),window.removeEventListener("touchstart",webViewerTouchStart,{passive:!1}),window.removeEventListener("touchmove",webViewerTouchMove,{passive:!1}),window.removeEventListener("touchend",webViewerTouchEnd,{passive:!1}),window.removeEventListener("click",webViewerClick),window.removeEventListener("keydown",webViewerKeyDown),window.removeEventListener("keyup",webViewerKeyUp),window.removeEventListener("resize",s.windowResize),window.removeEventListener("hashchange",s.windowHashChange),window.removeEventListener("beforeprint",s.windowBeforePrint),window.removeEventListener("afterprint",s.windowAfterPrint),window.removeEventListener("updatefromsandbox",s.windowUpdateFromSandbox),(o=s.removeWindowResolutionChange)==null||o.call(s),s.windowResize=null,s.windowHashChange=null,s.windowBeforePrint=null,s.windowAfterPrint=null,s.windowUpdateFromSandbox=null}_accumulateTicks(s,o){(this[o]>0&&s<0||this[o]<0&&s>0)&&(this[o]=0),this[o]+=s;const u=Math.trunc(this[o]);return this[o]-=u,u}_accumulateFactor(s,o,u){if(o===1)return 1;(this[u]>1&&o<1||this[u]<1&&o>1)&&(this[u]=1);const m=Math.floor(s*o*this[u]*100)/(100*s);return this[u]=o/m,m}_centerAtPos(s,o,u){const{pdfViewer:m}=this,A=m.currentScale/s-1;if(A!==0){const[x,O]=m.containerTopLeft;m.container.scrollLeft+=(o-O)*A,m.container.scrollTop+=(u-x)*A}}_unblockDocumentLoadEvent(){var s;(s=document.blockUnblockOnload)==null||s.call(document,!1),this._unblockDocumentLoadEvent=()=>{}}get scriptingReady(){return this.pdfScriptingManager.ready}}let Ui,Bu;Bu=k(464).bindExternalService,Ui=k(81).bindPrintServiceFactory,document.blockUnblockOnload&&document.blockUnblockOnload(!0);class ng extends Du{constructor(s){super(),this.appOptions=s,this.helper=X(this),this.bindServices()}bindServices(){Bu(this),Ui(fc)}run(s){const{validateFileURL:o}=this.helper;return super.run(s,o)}_parseHashParams(){const{loadFakeWorker:s}=this.helper;return super._parseHashParams(s)}bindEvents(){const s=this.appOptions,{eventBus:o,_boundEvents:u}=this;u.beforePrint=this.beforePrint.bind(this),u.afterPrint=this.afterPrint.bind(this);const{webViewerResize:m,webViewerHashchange:A,webViewerPageRendered:x,webViewerUpdateViewarea:O,webViewerPageChanging:D,webViewerScaleChanging:H,webViewerRotationChanging:q,webViewerSidebarViewChanged:ae,webViewerPageMode:ve,webViewerNamedAction:Ye,webViewerPresentationModeChanged:qe,webViewerPresentationMode:Ke,webViewerPrint:et,webViewerDownload:nt,webViewerSave:ot,webViewerFirstPage:Xe,webViewerLastPage:vt,webViewerNextPage:ht,webViewerPreviousPage:Ue,webViewerZoomIn:st,webViewerZoomOut:yt,webViewerZoomReset:Ut,webViewerPageNumberChanged:Lt,webViewerScaleChanged:kt,webViewerRotateCw:Pt,webViewerRotateCcw:Gt,webViewerOptionalContentConfig:Cs,webViewerSwitchScrollMode:yr,webViewerScrollModeChanged:Er,webViewerSwitchSpreadMode:Sr,webViewerSpreadModeChanged:wn,webViewerDocumentProperties:ga,webViewerFindFromUrlHash:oh,webViewerUpdateFindMatchesCount:Wn,webViewerUpdateFindControlState:ff,reportPageStatsPDFBug:Ar,webViewerFileInputChange:lh,webViewerOpenFile:Cr,webViewerSwitchAnnotationEditorMode:ch,webViewerSwitchAnnotationEditorParams:Wa,webViewerAnnotationEditorStatesChanged:Ao,webViewerPageRender:$a,webViewerOpenInExternalApp:qa}=this.helper;o._on("resize",m),o._on("hashchange",A),o._on("beforeprint",u.beforePrint),o._on("afterprint",u.afterPrint),o._on("pagerender",$a),o._on("pagerendered",x),o._on("updateviewarea",O),o._on("pagechanging",D),o._on("scalechanging",H),o._on("rotationchanging",q),o._on("sidebarviewchanged",ae),o._on("pagemode",ve),o._on("namedaction",Ye),o._on("presentationmodechanged",qe),o._on("presentationmode",Ke),o._on("switchannotationeditormode",ch),o._on("switchannotationeditorparams",Wa),o._on("print",et),o._on("download",nt),o._on("openinexternalapp",qa),o._on("firstpage",Xe),o._on("lastpage",vt),o._on("nextpage",ht),o._on("previouspage",Ue),o._on("zoomin",st),o._on("zoomout",yt),o._on("zoomreset",Ut),o._on("pagenumberchanged",Lt),o._on("scalechanged",kt),o._on("rotatecw",Pt),o._on("rotateccw",Gt),o._on("optionalcontentconfig",Cs),o._on("switchscrollmode",yr),o._on("scrollmodechanged",Er),o._on("switchspreadmode",Sr),o._on("spreadmodechanged",wn),o._on("documentproperties",ga),o._on("findfromurlhash",oh),o._on("updatefindmatchescount",Wn),o._on("updatefindcontrolstate",ff),s.get("pdfBug")&&(u.reportPageStatsPDFBug=Ar,o._on("pagerendered",u.reportPageStatsPDFBug),o._on("pagechanging",u.reportPageStatsPDFBug)),o._on("fileinputchange",lh),o._on("openfile",Cr)}setTitle(s=this._title){if(this._title=s,this.isViewerEmbedded||this.appOptions.get("disableAutoSetTitle"))return;const o=this._hasAnnotationEditors&&!this.pdfRenderingQueue.printing;document.title=`${o?"* ":""}${s}`}bindWindowEvents(){const{eventBus:s,_boundEvents:o}=this,{webViewerVisibilityChange:u,webViewerWheel:m,webViewerTouchStart:A,webViewerTouchMove:x,webViewerTouchEnd:O,webViewerClick:D,webViewerKeyDown:H,webViewerKeyUp:q,webViewerResolutionChange:ae}=this.helper;function ve(Ye=null){Ye&&ae(Ye);const qe=window.matchMedia(`(resolution: ${window.devicePixelRatio||1}dppx)`);qe.addEventListener("change",ve,{once:!0}),o.removeWindowResolutionChange||(o.removeWindowResolutionChange=function(){qe.removeEventListener("change",ve),o.removeWindowResolutionChange=null})}ve(),o.windowResize=()=>{s.dispatch("resize",{source:window})},o.windowHashChange=()=>{s.dispatch("hashchange",{source:window,hash:document.location.hash.substring(1)})},o.windowBeforePrint=()=>{s.dispatch("beforeprint",{source:window})},o.windowAfterPrint=()=>{s.dispatch("afterprint",{source:window})},o.windowUpdateFromSandbox=Ye=>{s.dispatch("updatefromsandbox",{source:window,detail:Ye.detail})},window.addEventListener("visibilitychange",u),window.addEventListener("wheel",m,{passive:!1}),window.addEventListener("touchstart",A,{passive:!1}),window.addEventListener("touchmove",x,{passive:!1}),window.addEventListener("touchend",O,{passive:!1}),window.addEventListener("click",D),window.addEventListener("keydown",H),window.addEventListener("keyup",q),window.addEventListener("resize",o.windowResize),window.addEventListener("hashchange",o.windowHashChange),window.addEventListener("beforeprint",o.windowBeforePrint),window.addEventListener("afterprint",o.windowAfterPrint),window.addEventListener("updatefromsandbox",o.windowUpdateFromSandbox)}unbindEvents(){const{eventBus:s,_boundEvents:o}=this,{webViewerResize:u,webViewerHashchange:m,webViewerPageRendered:A,webViewerUpdateViewarea:x,webViewerPageChanging:O,webViewerScaleChanging:D,webViewerRotationChanging:H,webViewerSidebarViewChanged:q,webViewerPageMode:ae,webViewerNamedAction:ve,webViewerPresentationModeChanged:Ye,webViewerPresentationMode:qe,webViewerPrint:Ke,webViewerDownload:et,webViewerSave:nt,webViewerFirstPage:ot,webViewerLastPage:Xe,webViewerNextPage:vt,webViewerPreviousPage:ht,webViewerZoomIn:Ue,webViewerZoomOut:st,webViewerZoomReset:yt,webViewerPageNumberChanged:Ut,webViewerScaleChanged:Lt,webViewerRotateCw:kt,webViewerRotateCcw:Pt,webViewerOptionalContentConfig:Gt,webViewerSwitchScrollMode:Cs,webViewerScrollModeChanged:yr,webViewerSwitchSpreadMode:Er,webViewerSpreadModeChanged:Sr,webViewerDocumentProperties:wn,webViewerFindFromUrlHash:ga,webViewerUpdateFindMatchesCount:oh,webViewerUpdateFindControlState:Wn,reportPageStatsPDFBug:ff,webViewerFileInputChange:Ar,webViewerOpenFile:lh,webViewerPageRender:Cr,webViewerOpenInExternalApp:ch}=this.helper;s._off("resize",u),s._off("hashchange",m),s._off("beforeprint",o.beforePrint),s._off("afterprint",o.afterPrint),s._on("pagerender",Cr),s._off("pagerendered",A),s._off("updateviewarea",x),s._off("pagechanging",O),s._off("scalechanging",D),s._off("rotationchanging",H),s._off("sidebarviewchanged",q),s._off("pagemode",ae),s._off("namedaction",ve),s._off("presentationmodechanged",Ye),s._off("presentationmode",qe),s._off("print",Ke),s._off("download",et),s._off("openinexternalapp",ch),s._off("firstpage",ot),s._off("lastpage",Xe),s._off("nextpage",vt),s._off("previouspage",ht),s._off("zoomin",Ue),s._off("zoomout",st),s._off("zoomreset",yt),s._off("pagenumberchanged",Ut),s._off("scalechanged",Lt),s._off("rotatecw",kt),s._off("rotateccw",Pt),s._off("optionalcontentconfig",Gt),s._off("switchscrollmode",Cs),s._off("scrollmodechanged",yr),s._off("switchspreadmode",Er),s._off("spreadmodechanged",Sr),s._off("documentproperties",wn),s._off("findfromurlhash",ga),s._off("updatefindmatchescount",oh),s._off("updatefindcontrolstate",Wn),o.reportPageStatsPDFBug&&(s._off("pagerendered",o.reportPageStatsPDFBug),s._off("pagechanging",o.reportPageStatsPDFBug),o.reportPageStatsPDFBug=null),s._off("fileinputchange",Ar),s._off("openfile",lh),o.beforePrint=null,o.afterPrint=null}unbindWindowEvents(){var q;const{_boundEvents:s}=this,{webViewerVisibilityChange:o,webViewerWheel:u,webViewerTouchStart:m,webViewerTouchMove:A,webViewerTouchEnd:x,webViewerClick:O,webViewerKeyDown:D,webViewerKeyUp:H}=this.helper;window.removeEventListener("visibilitychange",o),window.removeEventListener("wheel",u,{passive:!1}),window.removeEventListener("touchstart",m,{passive:!1}),window.removeEventListener("touchmove",A,{passive:!1}),window.removeEventListener("touchend",x,{passive:!1}),window.removeEventListener("click",O),window.removeEventListener("keydown",D),window.removeEventListener("keyup",H),window.removeEventListener("resize",s.windowResize),window.removeEventListener("hashchange",s.windowHashChange),window.removeEventListener("beforeprint",s.windowBeforePrint),window.removeEventListener("afterprint",s.windowAfterPrint),window.removeEventListener("updatefromsandbox",s.windowUpdateFromSandbox),(q=s.removeWindowResolutionChange)==null||q.call(s),s.windowResize=null,s.windowHashChange=null,s.windowBeforePrint=null,s.windowAfterPrint=null,s.windowUpdateFromSandbox=null}_initializeAnnotationStorageCallbacks(s){if(s!==this.pdfDocument)return;const{annotationStorage:o}=s;o.onSetModified=()=>{window.addEventListener("beforeunload",this.helper.beforeUnload),this._annotationStorageModified=!0},o.onResetModified=()=>{window.removeEventListener("beforeunload",this.helper.beforeUnload),delete this._annotationStorageModified},o.onAnnotationEditor=u=>{this._hasAnnotationEditors=!!u,this.setTitle(),u&&this.externalServices.reportTelemetry({type:"editing",data:{type:u}})}}}const co=Object.create(null);{const T=navigator.userAgent||"",s=navigator.platform||"",o=navigator.maxTouchPoints||1,u=/Android/.test(T),m=/\b(iPad|iPhone|iPod)(?=;)/.test(T)||s==="MacIntel"&&o>1;(function(){(m||u)&&(co.maxCanvasPixels=5242880)})()}const He={VIEWER:2,API:4,WORKER:8,PREFERENCE:128},Vr={annotationEditorMode:{value:0,kind:He.VIEWER+He.PREFERENCE},annotationMode:{value:2,kind:He.VIEWER+He.PREFERENCE},cursorToolOnLoad:{value:0,kind:He.VIEWER+He.PREFERENCE},defaultZoomDelay:{value:400,kind:He.VIEWER+He.PREFERENCE},defaultZoomValue:{value:"",kind:He.VIEWER+He.PREFERENCE},disableHistory:{value:!1,kind:He.VIEWER},disablePageLabels:{value:!1,kind:He.VIEWER+He.PREFERENCE},enablePermissions:{value:!1,kind:He.VIEWER+He.PREFERENCE},enablePrintAutoRotate:{value:!0,kind:He.VIEWER+He.PREFERENCE},enableScripting:{value:!0,kind:He.VIEWER+He.PREFERENCE},enableStampEditor:{value:!0,kind:He.VIEWER+He.PREFERENCE},externalLinkRel:{value:"noopener noreferrer nofollow",kind:He.VIEWER},externalLinkTarget:{value:0,kind:He.VIEWER+He.PREFERENCE},highlightEditorColors:{value:"yellow=#FFFF98,green=#53FFBC,blue=#80EBFF,pink=#FFCBE6,red=#FF4F5F",kind:He.VIEWER+He.PREFERENCE},historyUpdateUrl:{value:!1,kind:He.VIEWER+He.PREFERENCE},ignoreDestinationZoom:{value:!1,kind:He.VIEWER+He.PREFERENCE},imageResourcesPath:{value:"./images/",kind:He.VIEWER},maxCanvasPixels:{value:16777216,kind:He.VIEWER},forcePageColors:{value:!1,kind:He.VIEWER+He.PREFERENCE},pageColorsBackground:{value:"Canvas",kind:He.VIEWER+He.PREFERENCE},pageColorsForeground:{value:"CanvasText",kind:He.VIEWER+He.PREFERENCE},pdfBugEnabled:{value:!1,kind:He.VIEWER+He.PREFERENCE},printResolution:{value:150,kind:He.VIEWER},sidebarViewOnLoad:{value:-1,kind:He.VIEWER+He.PREFERENCE},scrollModeOnLoad:{value:-1,kind:He.VIEWER+He.PREFERENCE},spreadModeOnLoad:{value:-1,kind:He.VIEWER+He.PREFERENCE},textLayerMode:{value:1,kind:He.VIEWER+He.PREFERENCE},viewerCssTheme:{value:0,kind:He.VIEWER+He.PREFERENCE},viewOnLoad:{value:0,kind:He.VIEWER+He.PREFERENCE},cMapPacked:{value:!0,kind:He.API},cMapUrl:{value:"../web/cmaps/",kind:He.API},disableAutoFetch:{value:!1,kind:He.API+He.PREFERENCE},disableFontFace:{value:!1,kind:He.API+He.PREFERENCE},disableRange:{value:!1,kind:He.API+He.PREFERENCE},disableStream:{value:!1,kind:He.API+He.PREFERENCE},docBaseUrl:{value:"",kind:He.API},enableXfa:{value:!0,kind:He.API+He.PREFERENCE},fontExtraProperties:{value:!1,kind:He.API},isEvalSupported:{value:!0,kind:He.API},isOffscreenCanvasSupported:{value:!0,kind:He.API},maxImageSize:{value:-1,kind:He.API},pdfBug:{value:!1,kind:He.API},standardFontDataUrl:{value:"../web/standard_fonts/",kind:He.API},verbosity:{value:1,kind:He.API},workerPort:{value:null,kind:He.WORKER},workerSrc:{value:"../build/pdf.worker.js",kind:He.WORKER}};Vr.defaultUrl={value:"compressed.tracemonkey-pldi-09.pdf",kind:He.VIEWER},Vr.disablePreferences={value:!1,kind:He.VIEWER},Vr.locale={value:navigator.language||"en-US",kind:He.VIEWER},Vr.sandboxBundleSrc={value:"../build/pdf.sandbox.js",kind:He.VIEWER};class Vu{constructor(){this.userOptions=Object.create(null)}get(s){const o=this.userOptions[s];if(o!==void 0)return o;const u=Vr[s];if(u!==void 0)return co[s]??u.value}getAll(s=null){const o=Object.create(null);for(const u in Vr){const m=Vr[u];if(s&&!(s&m.kind))continue;const A=this.userOptions[u];o[u]=A!==void 0?A:co[u]??m.value}return o}set(s,o){this.userOptions[s]=o}setAll(s,o=!1){if(o){if(this.get("disablePreferences"))return;Object.keys(this.userOptions).length&&console.warn('setAll: The Preferences may override manually set AppOptions; please use the "disablePreferences"-option in order to prevent that.')}for(const u in s)this.userOptions[u]=s[u]}remove(s){delete this.userOptions[s]}_hasUserOptions(){return Object.keys(this.userOptions).length>0}}function ju(T){const s="application/l10n";let o=document.querySelector(`link[type="${s}"]`);o&&o.getAttribute("href")===T||(o=document.createElement("link"),o.rel="resource",o.type=s,o.href=T,document.head.appendChild(o))}const Jo=`
<div data-dom-id="outerContainer" class="outerContainer">
  <div data-dom-id="sidebarContainer" class="sidebarContainer">
    <div data-dom-id="toolbarSidebar" class="toolbarSidebar">
      <div data-dom-id="toolbarSidebarLeft" class="toolbarSidebarLeft">
        <div
          role="radiogroup"
          data-dom-id="sidebarViewButtons"
          class="splitToolbarButton toggled sidebarViewButtons"
        >
          <button
            title="Show Thumbnails"
            tabindex="2"
            data-l10n-id="pdfjs-thumbs-button"
            role="radio"
            aria-checked="true"
            aria-controls="thumbnailView"
            data-dom-id="viewThumbnail"
            class="toolbarButton toggled viewThumbnail"
          >
            <span data-l10n-id="pdfjs-thumbs-button-label"
              >Thumbnails</span
            ></button
          ><button
            title="Show Document Outline (double-click to expand/collapse all items)"
            tabindex="3"
            data-l10n-id="pdfjs-document-outline-button"
            role="radio"
            aria-checked="false"
            aria-controls="outlineView"
            data-dom-id="viewOutline"
            class="toolbarButton viewOutline"
          >
            <span data-l10n-id="pdfjs-document-outline-button-label"
              >Document Outline</span
            ></button
          ><button
            title="Show Attachments"
            tabindex="4"
            data-l10n-id="pdfjs-attachments-button"
            role="radio"
            aria-checked="false"
            aria-controls="attachmentsView"
            data-dom-id="viewAttachments"
            class="toolbarButton viewAttachments"
          >
            <span data-l10n-id="pdfjs-attachments-button-label"
              >Attachments</span
            ></button
          ><button
            title="Show Layers (double-click to reset all layers to the default state)"
            tabindex="5"
            data-l10n-id="pdfjs-layers-button"
            role="radio"
            aria-checked="false"
            aria-controls="layersView"
            data-dom-id="viewLayers"
            class="toolbarButton viewLayers"
          >
            <span data-l10n-id="pdfjs-layers-button-label">Layers</span>
          </button>
        </div>
      </div>
      <div data-dom-id="toolbarSidebarRight" class="toolbarSidebarRight">
        <div
          data-dom-id="outlineOptionsContainer"
          class="outlineOptionsContainer"
        >
          <div class="verticalToolbarSeparator"></div>
          <button
            disabled="disabled"
            title="Find Current Outline Item"
            tabindex="6"
            data-l10n-id="pdfjs-current-outline-item-button"
            data-dom-id="currentOutlineItem"
            class="toolbarButton currentOutlineItem"
          >
            <span data-l10n-id="pdfjs-current-outline-item-button-label"
              >Current Outline Item</span
            >
          </button>
        </div>
      </div>
    </div>
    <div data-dom-id="sidebarContent" class="sidebarContent">
      <div data-dom-id="thumbnailView" class="thumbnailView"></div>
      <div data-dom-id="outlineView" class="hidden outlineView"></div>
      <div data-dom-id="attachmentsView" class="hidden attachmentsView"></div>
      <div data-dom-id="layersView" class="hidden layersView"></div>
    </div>
    <div data-dom-id="sidebarResizer" class="sidebarResizer"></div>
  </div>
  <!-- sidebarContainer -->
  <div data-dom-id="mainContainer" class="mainContainer">
    <div class="findbar hidden doorHanger" data-dom-id="findbar">
      <div data-dom-id="findbarInputContainer" class="findbarInputContainer">
        <span class="loadingInput end"
          ><input
            title="Find"
            placeholder="Find in document"
            tabindex="91"
            data-l10n-id="pdfjs-find-input"
            aria-invalid="false"
            data-dom-id="findInput"
            class="toolbarField findInput"
        /></span>
        <div class="splitToolbarButton">
          <button
            title="Find the previous occurrence of the phrase"
            tabindex="92"
            data-l10n-id="pdfjs-find-previous-button"
            data-dom-id="findPrevious"
            class="toolbarButton findPrevious"
          >
            <span data-l10n-id="pdfjs-find-previous-button-label"
              >Previous</span
            >
          </button>
          <div class="splitToolbarButtonSeparator"></div>
          <button
            title="Find the next occurrence of the phrase"
            tabindex="93"
            data-l10n-id="pdfjs-find-next-button"
            data-dom-id="findNext"
            class="toolbarButton findNext"
          >
            <span data-l10n-id="pdfjs-find-next-button-label">Next</span>
          </button>
        </div>
      </div>
      <div
        data-dom-id="findbarOptionsOneContainer"
        class="findbarOptionsOneContainer"
      >
        <label
          ><input
            type="checkbox"
            tabindex="94"
            data-dom-id="findHighlightAll"
            class="toolbarField findHighlightAll"
          /><span
            class="toolbarLabel"
            data-l10n-id="pdfjs-find-highlight-checkbox"
            >Highlight All</span
          ></label
        ><!--Removed!--><label
          ><input
            type="checkbox"
            tabindex="95"
            data-dom-id="findMatchCase"
            class="toolbarField findMatchCase"
          /><span
            class="toolbarLabel"
            data-l10n-id="pdfjs-find-match-case-checkbox-label"
            >Match Case</span
          ></label
        ><!--Removed!-->
      </div>
      <div
        data-dom-id="findbarOptionsTwoContainer"
        class="findbarOptionsTwoContainer"
      >
        <label
          ><input
            type="checkbox"
            tabindex="96"
            data-dom-id="findMatchDiacritics"
            class="toolbarField findMatchDiacritics"
          /><span
            class="toolbarLabel"
            data-l10n-id="pdfjs-find-match-diacritics-checkbox-label"
            >Match Diacritics</span
          ></label
        ><!--Removed!--><label
          ><input
            type="checkbox"
            tabindex="97"
            data-dom-id="findEntireWord"
            class="toolbarField findEntireWord"
          /><span
            class="toolbarLabel"
            data-l10n-id="pdfjs-find-entire-word-checkbox-label"
            >Whole Words</span
          ></label
        ><!--Removed!-->
      </div>
      <div
        aria-live="polite"
        data-dom-id="findbarMessageContainer"
        class="findbarMessageContainer"
      >
        <span
          data-dom-id="findResultsCount"
          class="toolbarLabel findResultsCount"
        ></span
        ><span data-dom-id="findMsg" class="toolbarLabel findMsg"></span>
      </div>
    </div>
    <!-- findbar -->
    <div
      data-dom-id="editorHighlightParamsToolbar"
      class="editorParamsToolbar hidden doorHangerRight editorHighlightParamsToolbar"
    >
      <div
        data-dom-id="highlightParamsToolbarContainer"
        class="editorParamsToolbarContainer highlightParamsToolbarContainer"
      >
        <div
          data-dom-id="editorHighlightColorPicker"
          class="colorPicker editorHighlightColorPicker"
        >
          <span
            data-l10n-id="pdfjs-editor-highlight-colorpicker-label"
            data-dom-id="highlightColorPickerLabel"
            class="editorParamsLabel highlightColorPickerLabel"
            >Highlight color</span
          >
        </div>
      </div>
    </div>
    <div
      data-dom-id="editorFreeTextParamsToolbar"
      class="editorParamsToolbar hidden doorHangerRight editorFreeTextParamsToolbar"
    >
      <div class="editorParamsToolbarContainer">
        <div class="editorParamsSetter">
          <!--Removed!--><label
            ><input
              type="color"
              tabindex="102"
              data-dom-id="editorFreeTextColor"
              class="editorParamsColor editorFreeTextColor"
            /><span
              class="toolbarLabel"
              data-l10n-id="pdfjs-editor-free-text-color-input"
              >Color</span
            ></label
          >
        </div>
        <div class="editorParamsSetter">
          <!--Removed!--><label
            ><input
              type="range"
              value="10"
              min="5"
              max="100"
              step="1"
              tabindex="103"
              data-dom-id="editorFreeTextFontSize"
              class="editorParamsSlider editorFreeTextFontSize"
            /><span
              class="toolbarLabel"
              data-l10n-id="pdfjs-editor-free-text-size-input"
              >Size</span
            ></label
          >
        </div>
      </div>
    </div>
    <div
      data-dom-id="editorInkParamsToolbar"
      class="editorParamsToolbar hidden doorHangerRight editorInkParamsToolbar"
    >
      <div class="editorParamsToolbarContainer">
        <div class="editorParamsSetter">
          <!--Removed!--><label
            ><input
              type="color"
              tabindex="104"
              data-dom-id="editorInkColor"
              class="editorParamsColor editorInkColor"
            /><span
              class="toolbarLabel"
              data-l10n-id="pdfjs-editor-ink-color-input"
              >Color</span
            ></label
          >
        </div>
        <div class="editorParamsSetter">
          <!--Removed!--><label
            ><input
              type="range"
              value="1"
              min="1"
              max="20"
              step="1"
              tabindex="105"
              data-dom-id="editorInkThickness"
              class="editorParamsSlider editorInkThickness"
            /><span
              class="toolbarLabel"
              data-l10n-id="pdfjs-editor-ink-thickness-input"
              >Thickness</span
            ></label
          >
        </div>
        <div class="editorParamsSetter">
          <!--Removed!--><label
            ><input
              type="range"
              value="100"
              min="1"
              max="100"
              step="1"
              tabindex="106"
              data-dom-id="editorInkOpacity"
              class="editorParamsSlider editorInkOpacity"
            /><span
              class="toolbarLabel"
              data-l10n-id="pdfjs-editor-ink-opacity-input"
              >Opacity</span
            ></label
          >
        </div>
      </div>
    </div>
    <div
      data-dom-id="editorStampParamsToolbar"
      class="editorParamsToolbar hidden doorHangerRight editorStampParamsToolbar"
    >
      <div class="editorParamsToolbarContainer">
        <button
          title="Add image"
          tabindex="107"
          data-l10n-id="pdfjs-editor-stamp-add-image-button"
          data-dom-id="editorStampAddImage"
          class="secondaryToolbarButton editorStampAddImage"
        >
          <span
            class="editorParamsLabel"
            data-l10n-id="pdfjs-editor-stamp-add-image-button-label"
            >Add image</span
          >
        </button>
      </div>
    </div>
    <div
      class="secondaryToolbar hidden doorHangerRight"
      data-dom-id="secondaryToolbar"
    >
      <div
        data-dom-id="secondaryToolbarButtonContainer"
        class="secondaryToolbarButtonContainer"
      >
        <!--#if GENERIC--><button
          title="Open File"
          tabindex="51"
          data-l10n-id="pdfjs-open-file-button"
          data-dom-id="secondaryOpenFile"
          class="secondaryToolbarButton secondaryOpenFile"
        >
          <span data-l10n-id="pdfjs-open-file-button-label">Open</span></button
        ><!--#endif--><button
          title="Print"
          tabindex="52"
          data-l10n-id="pdfjs-print-button"
          data-dom-id="secondaryPrint"
          class="secondaryToolbarButton visibleMediumView secondaryPrint"
        >
          <span data-l10n-id="pdfjs-print-button-label">Print</span></button
        ><button
          title="Save"
          tabindex="53"
          data-l10n-id="pdfjs-save-button"
          data-dom-id="secondaryDownload"
          class="secondaryToolbarButton visibleMediumView secondaryDownload"
        >
          <span data-l10n-id="pdfjs-save-button-label">Save</span></button
        ><!--#if GENERIC-->
        <div class="horizontalToolbarSeparator"></div>
        <!--#else--><!--        <div class="horizontalToolbarSeparator visibleMediumView"></div>--><!--#endif--><button
          title="Switch to Presentation Mode"
          tabindex="54"
          data-l10n-id="pdfjs-presentation-mode-button"
          data-dom-id="presentationMode"
          class="secondaryToolbarButton presentationMode"
        >
          <span data-l10n-id="pdfjs-presentation-mode-button-label"
            >Presentation Mode</span
          ></button
        ><a
          href="#"
          title="Current Page (View URL from Current Page)"
          tabindex="55"
          data-l10n-id="pdfjs-bookmark-button"
          data-dom-id="viewBookmark"
          class="secondaryToolbarButton viewBookmark"
          ><span data-l10n-id="pdfjs-bookmark-button-label"
            >Current Page</span
          ></a
        >
        <div
          data-dom-id="viewBookmarkSeparator"
          class="horizontalToolbarSeparator viewBookmarkSeparator"
        ></div>
        <button
          title="Go to First Page"
          tabindex="56"
          data-l10n-id="pdfjs-first-page-button"
          data-dom-id="firstPage"
          class="secondaryToolbarButton firstPage"
        >
          <span data-l10n-id="pdfjs-first-page-button-label"
            >Go to First Page</span
          ></button
        ><button
          title="Go to Last Page"
          tabindex="57"
          data-l10n-id="pdfjs-last-page-button"
          data-dom-id="lastPage"
          class="secondaryToolbarButton lastPage"
        >
          <span data-l10n-id="pdfjs-last-page-button-label"
            >Go to Last Page</span
          >
        </button>
        <div class="horizontalToolbarSeparator"></div>
        <button
          title="Rotate Clockwise"
          tabindex="58"
          data-l10n-id="pdfjs-page-rotate-cw-button"
          data-dom-id="pageRotateCw"
          class="secondaryToolbarButton pageRotateCw"
        >
          <span data-l10n-id="pdfjs-page-rotate-cw-button-label"
            >Rotate Clockwise</span
          ></button
        ><button
          title="Rotate Counterclockwise"
          tabindex="59"
          data-l10n-id="pdfjs-page-rotate-ccw-button"
          data-dom-id="pageRotateCcw"
          class="secondaryToolbarButton pageRotateCcw"
        >
          <span data-l10n-id="pdfjs-page-rotate-ccw-button-label"
            >Rotate Counterclockwise</span
          >
        </button>
        <div class="horizontalToolbarSeparator"></div>
        <div
          role="radiogroup"
          data-dom-id="cursorToolButtons"
          class="cursorToolButtons"
        >
          <button
            title="Enable Text Selection Tool"
            tabindex="60"
            data-l10n-id="pdfjs-cursor-text-select-tool-button"
            role="radio"
            aria-checked="true"
            data-dom-id="cursorSelectTool"
            class="secondaryToolbarButton toggled cursorSelectTool"
          >
            <span data-l10n-id="pdfjs-cursor-text-select-tool-button-label"
              >Text Selection Tool</span
            ></button
          ><button
            title="Enable Hand Tool"
            tabindex="61"
            data-l10n-id="pdfjs-cursor-hand-tool-button"
            role="radio"
            aria-checked="false"
            data-dom-id="cursorHandTool"
            class="secondaryToolbarButton cursorHandTool"
          >
            <span data-l10n-id="pdfjs-cursor-hand-tool-button-label"
              >Hand Tool</span
            >
          </button>
        </div>
        <div class="horizontalToolbarSeparator"></div>
        <div
          role="radiogroup"
          data-dom-id="scrollModeButtons"
          class="scrollModeButtons"
        >
          <button
            title="Use Page Scrolling"
            tabindex="62"
            data-l10n-id="pdfjs-scroll-page-button"
            role="radio"
            aria-checked="false"
            data-dom-id="scrollPage"
            class="secondaryToolbarButton scrollPage"
          >
            <span data-l10n-id="pdfjs-scroll-page-button-label"
              >Page Scrolling</span
            ></button
          ><button
            title="Use Vertical Scrolling"
            tabindex="63"
            data-l10n-id="pdfjs-scroll-vertical-button"
            role="radio"
            aria-checked="true"
            data-dom-id="scrollVertical"
            class="secondaryToolbarButton toggled scrollVertical"
          >
            <span data-l10n-id="pdfjs-scroll-vertical-button-label"
              >Vertical Scrolling</span
            ></button
          ><button
            title="Use Horizontal Scrolling"
            tabindex="64"
            data-l10n-id="pdfjs-scroll-horizontal-button"
            role="radio"
            aria-checked="false"
            data-dom-id="scrollHorizontal"
            class="secondaryToolbarButton scrollHorizontal"
          >
            <span data-l10n-id="pdfjs-scroll-horizontal-button-label"
              >Horizontal Scrolling</span
            ></button
          ><button
            title="Use Wrapped Scrolling"
            tabindex="65"
            data-l10n-id="pdfjs-scroll-wrapped-button"
            role="radio"
            aria-checked="false"
            data-dom-id="scrollWrapped"
            class="secondaryToolbarButton scrollWrapped"
          >
            <span data-l10n-id="pdfjs-scroll-wrapped-button-label"
              >Wrapped Scrolling</span
            >
          </button>
        </div>
        <div class="horizontalToolbarSeparator"></div>
        <div
          role="radiogroup"
          data-dom-id="spreadModeButtons"
          class="spreadModeButtons"
        >
          <button
            title="Do not join page spreads"
            tabindex="66"
            data-l10n-id="pdfjs-spread-none-button"
            role="radio"
            aria-checked="true"
            data-dom-id="spreadNone"
            class="secondaryToolbarButton toggled spreadNone"
          >
            <span data-l10n-id="pdfjs-spread-none-button-label"
              >No Spreads</span
            ></button
          ><button
            title="Join page spreads starting with odd-numbered pages"
            tabindex="67"
            data-l10n-id="pdfjs-spread-odd-button"
            role="radio"
            aria-checked="false"
            data-dom-id="spreadOdd"
            class="secondaryToolbarButton spreadOdd"
          >
            <span data-l10n-id="pdfjs-spread-odd-button-label"
              >Odd Spreads</span
            ></button
          ><button
            title="Join page spreads starting with even-numbered pages"
            tabindex="68"
            data-l10n-id="pdfjs-spread-even-button"
            role="radio"
            aria-checked="false"
            data-dom-id="spreadEven"
            class="secondaryToolbarButton spreadEven"
          >
            <span data-l10n-id="pdfjs-spread-even-button-label"
              >Even Spreads</span
            >
          </button>
        </div>
        <div class="horizontalToolbarSeparator"></div>
        <button
          title="Document Properties"
          tabindex="69"
          data-l10n-id="pdfjs-document-properties-button"
          aria-controls="documentPropertiesDialog"
          data-dom-id="documentProperties"
          class="secondaryToolbarButton documentProperties"
        >
          <span data-l10n-id="pdfjs-document-properties-button-label"
            >Document Properties</span
          >
        </button>
      </div>
    </div>
    <!-- secondaryToolbar -->
    <div class="toolbar">
      <div data-dom-id="toolbarContainer" class="toolbarContainer">
        <div data-dom-id="toolbarViewer" class="toolbarViewer">
          <div data-dom-id="toolbarViewerLeft" class="toolbarViewerLeft">
            <button
              title="Toggle Sidebar"
              tabindex="11"
              data-l10n-id="pdfjs-toggle-sidebar-button"
              aria-expanded="false"
              aria-controls="sidebarContainer"
              data-dom-id="sidebarToggle"
              class="toolbarButton sidebarToggle"
            >
              <span data-l10n-id="pdfjs-toggle-sidebar-button-label"
                >Toggle Sidebar</span
              >
            </button>
            <div class="toolbarButtonSpacer"></div>
            <button
              title="Find in Document"
              tabindex="12"
              data-l10n-id="pdfjs-findbar-button"
              aria-expanded="false"
              aria-controls="findbar"
              data-dom-id="viewFind"
              class="toolbarButton viewFind"
            >
              <span data-l10n-id="pdfjs-findbar-button-label">Find</span>
            </button>
            <div class="splitToolbarButton hiddenSmallView">
              <button
                title="Previous Page"
                tabindex="13"
                data-l10n-id="pdfjs-previous-button"
                data-dom-id="previous"
                class="toolbarButton previous"
              >
                <span data-l10n-id="pdfjs-previous-button-label">Previous</span>
              </button>
              <div class="splitToolbarButtonSeparator"></div>
              <button
                title="Next Page"
                tabindex="14"
                data-l10n-id="pdfjs-next-button"
                data-dom-id="next"
                class="toolbarButton next"
              >
                <span data-l10n-id="pdfjs-next-button-label">Next</span>
              </button>
            </div>
            <span class="loadingInput start"
              ><input
                type="number"
                title="Page"
                value="1"
                min="1"
                tabindex="15"
                data-l10n-id="pdfjs-page-input"
                autocomplete="off"
                data-dom-id="pageNumber"
                class="toolbarField pageNumber" /></span
            ><span data-dom-id="numPages" class="toolbarLabel numPages"></span>
          </div>
          <div data-dom-id="toolbarViewerRight" class="toolbarViewerRight">
            <div
              role="radiogroup"
              data-dom-id="editorModeButtons"
              class="splitToolbarButton toggled editorModeButtons"
            >
              <button
                hidden="true"
                disabled="disabled"
                title="Highlight"
                role="radio"
                aria-checked="false"
                aria-controls="editorHighlightParamsToolbar"
                tabindex="31"
                data-l10n-id="pdfjs-editor-highlight-button"
                data-dom-id="editorHighlight"
                class="toolbarButton editorHighlight"
              >
                <span data-l10n-id="pdfjs-editor-highlight-button-label"
                  >Highlight</span
                ></button
              ><button
                disabled="disabled"
                title="Text"
                role="radio"
                aria-checked="false"
                aria-controls="editorFreeTextParamsToolbar"
                tabindex="32"
                data-l10n-id="pdfjs-editor-free-text-button"
                data-dom-id="editorFreeText"
                class="toolbarButton editorFreeText"
              >
                <span data-l10n-id="pdfjs-editor-free-text-button-label"
                  >Text</span
                ></button
              ><button
                disabled="disabled"
                title="Draw"
                role="radio"
                aria-checked="false"
                aria-controls="editorInkParamsToolbar"
                tabindex="33"
                data-l10n-id="pdfjs-editor-ink-button"
                data-dom-id="editorInk"
                class="toolbarButton editorInk"
              >
                <span data-l10n-id="pdfjs-editor-ink-button-label"
                  >Draw</span
                ></button
              ><button
                disabled="disabled"
                title="Add or edit images"
                role="radio"
                aria-checked="false"
                aria-controls="editorStampParamsToolbar"
                tabindex="34"
                data-l10n-id="pdfjs-editor-stamp-button"
                data-dom-id="editorStamp"
                class="toolbarButton editorStamp"
              >
                <span data-l10n-id="pdfjs-editor-stamp-button-label"
                  >Add or edit images</span
                >
              </button>
            </div>
            <div
              data-dom-id="editorModeSeparator"
              class="verticalToolbarSeparator editorModeSeparator"
            ></div>
            <button
              title="Print"
              tabindex="41"
              data-l10n-id="pdfjs-print-button"
              data-dom-id="print"
              class="toolbarButton hiddenMediumView print"
            >
              <span data-l10n-id="pdfjs-print-button-label">Print</span></button
            ><button
              title="Save"
              tabindex="42"
              data-l10n-id="pdfjs-save-button"
              data-dom-id="download"
              class="toolbarButton hiddenMediumView download"
            >
              <span data-l10n-id="pdfjs-save-button-label">Save</span>
            </button>
            <div class="verticalToolbarSeparator hiddenMediumView"></div>
            <button
              title="Tools"
              tabindex="43"
              data-l10n-id="pdfjs-tools-button"
              aria-expanded="false"
              aria-controls="secondaryToolbar"
              data-dom-id="secondaryToolbarToggle"
              class="toolbarButton secondaryToolbarToggle"
            >
              <span data-l10n-id="pdfjs-tools-button-label">Tools</span>
            </button>
          </div>
          <div data-dom-id="toolbarViewerMiddle" class="toolbarViewerMiddle">
            <div class="splitToolbarButton">
              <button
                title="Zoom Out"
                tabindex="21"
                data-l10n-id="pdfjs-zoom-out-button"
                data-dom-id="zoomOut"
                class="toolbarButton zoomOut"
              >
                <span data-l10n-id="pdfjs-zoom-out-button-label">Zoom Out</span>
              </button>
              <div class="splitToolbarButtonSeparator"></div>
              <button
                title="Zoom In"
                tabindex="22"
                data-l10n-id="pdfjs-zoom-in-button"
                data-dom-id="zoomIn"
                class="toolbarButton zoomIn"
              >
                <span data-l10n-id="pdfjs-zoom-in-button-label">Zoom In</span>
              </button>
            </div>
            <span
              data-dom-id="scaleSelectContainer"
              class="dropdownToolbarButton scaleSelectContainer"
              ><select
                title="Zoom"
                tabindex="23"
                data-l10n-id="pdfjs-zoom-select"
                data-dom-id="scaleSelect"
                class="scaleSelect"
              >
                <option
                  id="pageAutoOption"
                  title=""
                  value="auto"
                  selected="selected"
                  data-l10n-id="pdfjs-page-scale-auto"
                >
                  Automatic Zoom
                </option>
                <option
                  id="pageActualOption"
                  title=""
                  value="page-actual"
                  data-l10n-id="pdfjs-page-scale-actual"
                >
                  Actual Size
                </option>
                <option
                  id="pageFitOption"
                  title=""
                  value="page-fit"
                  data-l10n-id="pdfjs-page-scale-fit"
                >
                  Page Fit
                </option>
                <option
                  id="pageWidthOption"
                  title=""
                  value="page-width"
                  data-l10n-id="pdfjs-page-scale-width"
                >
                  Page Width
                </option>
                <option
                  id="customScaleOption"
                  title=""
                  value="custom"
                  disabled="disabled"
                  hidden="true"
                  data-l10n-id="pdfjs-page-scale-percent"
                  data-l10n-args='{ "scale": 0 }'
                >
                  0%
                </option>
                <option
                  title=""
                  value="0.5"
                  data-l10n-id="pdfjs-page-scale-percent"
                  data-l10n-args='{ "scale": 50 }'
                >
                  50%
                </option>
                <option
                  title=""
                  value="0.75"
                  data-l10n-id="pdfjs-page-scale-percent"
                  data-l10n-args='{ "scale": 75 }'
                >
                  75%
                </option>
                <option
                  title=""
                  value="1"
                  data-l10n-id="pdfjs-page-scale-percent"
                  data-l10n-args='{ "scale": 100 }'
                >
                  100%
                </option>
                <option
                  title=""
                  value="1.25"
                  data-l10n-id="pdfjs-page-scale-percent"
                  data-l10n-args='{ "scale": 125 }'
                >
                  125%
                </option>
                <option
                  title=""
                  value="1.5"
                  data-l10n-id="pdfjs-page-scale-percent"
                  data-l10n-args='{ "scale": 150 }'
                >
                  150%
                </option>
                <option
                  title=""
                  value="2"
                  data-l10n-id="pdfjs-page-scale-percent"
                  data-l10n-args='{ "scale": 200 }'
                >
                  200%
                </option>
                <option
                  title=""
                  value="3"
                  data-l10n-id="pdfjs-page-scale-percent"
                  data-l10n-args='{ "scale": 300 }'
                >
                  300%
                </option>
                <option
                  title=""
                  value="4"
                  data-l10n-id="pdfjs-page-scale-percent"
                  data-l10n-args='{ "scale": 400 }'
                >
                  400%
                </option>
              </select></span
            >
          </div>
        </div>
        <div data-dom-id="loadingBar" class="loadingBar">
          <div class="progress"><div class="glimmer"></div></div>
        </div>
      </div>
    </div>
    <div tabindex="0" data-dom-id="viewerContainer" class="viewerContainer">
      <div data-dom-id="viewer" class="pdfViewer viewer"></div>
    </div>
  </div>
  <!-- mainContainer -->
  <div data-dom-id="dialogContainer" class="dialogContainer">
    <dialog data-dom-id="passwordDialog" class="passwordDialog">
      <div class="row"><!--Removed!--></div>
      <div class="row">
        <input
          type="password"
          data-dom-id="password"
          class="toolbarField password"
        />
      </div>
      <div class="buttonRow">
        <button
          data-dom-id="passwordCancel"
          class="dialogButton passwordCancel"
        >
          <span data-l10n-id="pdfjs-password-cancel-button"
            >Cancel</span
          ></button
        ><button
          data-dom-id="passwordSubmit"
          class="dialogButton passwordSubmit"
        >
          <span data-l10n-id="pdfjs-password-ok-button">OK</span>
        </button>
      </div>
    </dialog>
    <dialog
      data-dom-id="documentPropertiesDialog"
      class="documentPropertiesDialog"
    >
      <div class="row">
        <span
          data-l10n-id="pdfjs-document-properties-file-name"
          data-dom-id="fileNameLabel"
          class="fileNameLabel"
          >File name:</span
        >
        <p
          aria-labelledby="fileNameLabel"
          data-dom-id="fileNameField"
          class="fileNameField"
        >
          -
        </p>
      </div>
      <div class="row">
        <span
          data-l10n-id="pdfjs-document-properties-file-size"
          data-dom-id="fileSizeLabel"
          class="fileSizeLabel"
          >File size:</span
        >
        <p
          aria-labelledby="fileSizeLabel"
          data-dom-id="fileSizeField"
          class="fileSizeField"
        >
          -
        </p>
      </div>
      <div class="separator"></div>
      <div class="row">
        <span
          data-l10n-id="pdfjs-document-properties-title"
          data-dom-id="titleLabel"
          class="titleLabel"
          >Title:</span
        >
        <p
          aria-labelledby="titleLabel"
          data-dom-id="titleField"
          class="titleField"
        >
          -
        </p>
      </div>
      <div class="row">
        <span
          data-l10n-id="pdfjs-document-properties-author"
          data-dom-id="authorLabel"
          class="authorLabel"
          >Author:</span
        >
        <p
          aria-labelledby="authorLabel"
          data-dom-id="authorField"
          class="authorField"
        >
          -
        </p>
      </div>
      <div class="row">
        <span
          data-l10n-id="pdfjs-document-properties-subject"
          data-dom-id="subjectLabel"
          class="subjectLabel"
          >Subject:</span
        >
        <p
          aria-labelledby="subjectLabel"
          data-dom-id="subjectField"
          class="subjectField"
        >
          -
        </p>
      </div>
      <div class="row">
        <span
          data-l10n-id="pdfjs-document-properties-keywords"
          data-dom-id="keywordsLabel"
          class="keywordsLabel"
          >Keywords:</span
        >
        <p
          aria-labelledby="keywordsLabel"
          data-dom-id="keywordsField"
          class="keywordsField"
        >
          -
        </p>
      </div>
      <div class="row">
        <span
          data-l10n-id="pdfjs-document-properties-creation-date"
          data-dom-id="creationDateLabel"
          class="creationDateLabel"
          >Creation Date:</span
        >
        <p
          aria-labelledby="creationDateLabel"
          data-dom-id="creationDateField"
          class="creationDateField"
        >
          -
        </p>
      </div>
      <div class="row">
        <span
          data-l10n-id="pdfjs-document-properties-modification-date"
          data-dom-id="modificationDateLabel"
          class="modificationDateLabel"
          >Modification Date:</span
        >
        <p
          aria-labelledby="modificationDateLabel"
          data-dom-id="modificationDateField"
          class="modificationDateField"
        >
          -
        </p>
      </div>
      <div class="row">
        <span
          data-l10n-id="pdfjs-document-properties-creator"
          data-dom-id="creatorLabel"
          class="creatorLabel"
          >Creator:</span
        >
        <p
          aria-labelledby="creatorLabel"
          data-dom-id="creatorField"
          class="creatorField"
        >
          -
        </p>
      </div>
      <div class="separator"></div>
      <div class="row">
        <span
          data-l10n-id="pdfjs-document-properties-producer"
          data-dom-id="producerLabel"
          class="producerLabel"
          >PDF Producer:</span
        >
        <p
          aria-labelledby="producerLabel"
          data-dom-id="producerField"
          class="producerField"
        >
          -
        </p>
      </div>
      <div class="row">
        <span
          data-l10n-id="pdfjs-document-properties-version"
          data-dom-id="versionLabel"
          class="versionLabel"
          >PDF Version:</span
        >
        <p
          aria-labelledby="versionLabel"
          data-dom-id="versionField"
          class="versionField"
        >
          -
        </p>
      </div>
      <div class="row">
        <span
          data-l10n-id="pdfjs-document-properties-page-count"
          data-dom-id="pageCountLabel"
          class="pageCountLabel"
          >Page Count:</span
        >
        <p
          aria-labelledby="pageCountLabel"
          data-dom-id="pageCountField"
          class="pageCountField"
        >
          -
        </p>
      </div>
      <div class="row">
        <span
          data-l10n-id="pdfjs-document-properties-page-size"
          data-dom-id="pageSizeLabel"
          class="pageSizeLabel"
          >Page Size:</span
        >
        <p
          aria-labelledby="pageSizeLabel"
          data-dom-id="pageSizeField"
          class="pageSizeField"
        >
          -
        </p>
      </div>
      <div class="separator"></div>
      <div class="row">
        <span
          data-l10n-id="pdfjs-document-properties-linearized"
          data-dom-id="linearizedLabel"
          class="linearizedLabel"
          >Fast Web View:</span
        >
        <p
          aria-labelledby="linearizedLabel"
          data-dom-id="linearizedField"
          class="linearizedField"
        >
          -
        </p>
      </div>
      <div class="buttonRow">
        <button
          data-dom-id="documentPropertiesClose"
          class="dialogButton documentPropertiesClose"
        >
          <span data-l10n-id="pdfjs-document-properties-close-button"
            >Close</span
          >
        </button>
      </div>
    </dialog>
    <dialog
      aria-labelledby="dialogLabel"
      aria-describedby="dialogDescription"
      data-dom-id="altTextDialog"
      class="altTextDialog"
    >
      <div data-dom-id="altTextContainer" class="altTextContainer">
        <div data-dom-id="overallDescription" class="overallDescription">
          <span
            data-l10n-id="pdfjs-editor-alt-text-dialog-label"
            data-dom-id="dialogLabel"
            class="title dialogLabel"
            >Choose an option</span
          ><span
            data-l10n-id="pdfjs-editor-alt-text-dialog-description"
            data-dom-id="dialogDescription"
            class="dialogDescription"
          >
            Alt text (alternative text) helps when people cant see the image or
            when it doesnt load.
          </span>
        </div>
        <div data-dom-id="addDescription" class="addDescription">
          <div class="radio">
            <div class="radioButton">
              <label
                ><input
                  type="radio"
                  name="altTextOption"
                  tabindex="0"
                  aria-describedby="descriptionAreaLabel"
                  checked=""
                  data-dom-id="descriptionButton"
                  class="descriptionButton"
                /><span
                  class="toolbarLabel"
                  data-l10n-id="pdfjs-editor-alt-text-add-description-label"
                  >Add a description</span
                ></label
              ><!--Removed!-->
            </div>
            <div class="radioLabel">
              <span
                data-l10n-id="pdfjs-editor-alt-text-add-description-description"
                data-dom-id="descriptionAreaLabel"
                class="descriptionAreaLabel"
              >
                Aim for 1-2 sentences that describe the subject, setting, or
                actions.
              </span>
            </div>
          </div>
          <div class="descriptionArea">
            <textarea
              placeholder="For example, A young man sits down at a table to eat a meal"
              aria-labelledby="descriptionAreaLabel"
              data-l10n-id="pdfjs-editor-alt-text-textarea"
              tabindex="0"
              data-dom-id="descriptionTextarea"
              class="descriptionTextarea"
            ></textarea>
          </div>
        </div>
        <div data-dom-id="markAsDecorative" class="markAsDecorative">
          <div class="radio">
            <div class="radioButton">
              <label
                ><input
                  type="radio"
                  name="altTextOption"
                  aria-describedby="decorativeLabel"
                  data-dom-id="decorativeButton"
                  class="decorativeButton"
                /><span
                  class="toolbarLabel"
                  data-l10n-id="pdfjs-editor-alt-text-mark-decorative-label"
                  >Mark as decorative</span
                ></label
              ><!--Removed!-->
            </div>
            <div class="radioLabel">
              <span
                data-l10n-id="pdfjs-editor-alt-text-mark-decorative-description"
                data-dom-id="decorativeLabel"
                class="decorativeLabel"
              >
                This is used for ornamental images, like borders or watermarks.
              </span>
            </div>
          </div>
        </div>
        <div data-dom-id="buttons" class="buttons">
          <button
            tabindex="0"
            data-dom-id="altTextCancel"
            class="altTextCancel"
          >
            <span data-l10n-id="pdfjs-editor-alt-text-cancel-button"
              >Cancel</span
            ></button
          ><button tabindex="0" data-dom-id="altTextSave" class="altTextSave">
            <span data-l10n-id="pdfjs-editor-alt-text-save-button">Save</span>
          </button>
        </div>
      </div>
    </dialog>
    <!--#if !MOZCENTRAL-->
    <dialog
      style="min-width: 200px"
      data-dom-id="printServiceDialog"
      class="printServiceDialog"
    >
      <div class="row">
        <span data-l10n-id="pdfjs-print-progress-message"
          >Preparing document for printing</span
        >
      </div>
      <div class="row">
        <progress value="0" max="100"></progress
        ><span
          data-l10n-id="pdfjs-print-progress-percent"
          data-l10n-args='{ "progress": 0 }'
          class="relative-progress"
          >0%</span
        >
      </div>
      <div class="buttonRow">
        <button data-dom-id="printCancel" class="dialogButton printCancel">
          <span data-l10n-id="pdfjs-print-progress-close-button">Cancel</span>
        </button>
      </div>
    </dialog>
    <!--#endif--><!--#if CHROME--><!--#include viewer-snippet-chrome-overlays.html--><!--#endif-->
  </div>
  <!-- dialogContainer -->
</div>
<!-- outerContainer -->
<div data-dom-id="printContainer" class="printContainer"></div>
<!--#if GENERIC--><input
  type="file"
  data-dom-id="fileInput"
  class="hidden fileInput"
/><!--#endif-->
`;let ho;function rg(){if(!ho){const T=document.createElement("template");T.innerHTML=Jo,ho=T.content}return document.importNode(ho,!0)}const ag=rg;let xa,el=null;function Hu(T){return{appContainer:T,mainContainer:T.querySelector("[data-dom-id='viewerContainer']"),viewerContainer:T.querySelector("[data-dom-id='viewer']"),toolbar:{container:T.querySelector("[data-dom-id='toolbarViewer']"),numPages:T.querySelector("[data-dom-id='numPages']"),pageNumber:T.querySelector("[data-dom-id='pageNumber']"),scaleSelect:T.querySelector("[data-dom-id='scaleSelect']"),customScaleOption:T.querySelector("[data-dom-id='customScaleOption']"),previous:T.querySelector("[data-dom-id='previous']"),next:T.querySelector("[data-dom-id='next']"),zoomIn:T.querySelector("[data-dom-id='zoomIn']"),zoomOut:T.querySelector("[data-dom-id='zoomOut']"),viewFind:T.querySelector("[data-dom-id='viewFind']"),print:T.querySelector("[data-dom-id='print']"),editorFreeTextButton:T.querySelector("[data-dom-id='editorFreeText']"),editorFreeTextParamsToolbar:T.querySelector("[data-dom-id='editorFreeTextParamsToolbar']"),editorHighlightButton:T.querySelector("[data-dom-id='editorHighlight']"),editorHighlightParamsToolbar:T.querySelector("[data-dom-id='editorHighlightParamsToolbar']"),editorHighlightColorPicker:T.querySelector("[data-dom-id='editorHighlightColorPicker']"),editorInkButton:T.querySelector("[data-dom-id='editorInk']"),editorInkParamsToolbar:T.querySelector("[data-dom-id='editorInkParamsToolbar']"),editorStampButton:T.querySelector("[data-dom-id='editorStamp']"),editorStampParamsToolbar:T.querySelector("[data-dom-id='editorStampParamsToolbar']"),download:T.querySelector("[data-dom-id='download']")},secondaryToolbar:{toolbar:T.querySelector("[data-dom-id='secondaryToolbar']"),toggleButton:T.querySelector("[data-dom-id='secondaryToolbarToggle']"),presentationModeButton:T.querySelector("[data-dom-id='presentationMode']"),openFileButton:T.querySelector("[data-dom-id='secondaryOpenFile']"),printButton:T.querySelector("[data-dom-id='secondaryPrint']"),downloadButton:T.querySelector("[data-dom-id='secondaryDownload']"),viewBookmarkButton:T.querySelector("[data-dom-id='viewBookmark']"),firstPageButton:T.querySelector("[data-dom-id='firstPage']"),lastPageButton:T.querySelector("[data-dom-id='lastPage']"),pageRotateCwButton:T.querySelector("[data-dom-id='pageRotateCw']"),pageRotateCcwButton:T.querySelector("[data-dom-id='pageRotateCcw']"),cursorSelectToolButton:T.querySelector("[data-dom-id='cursorSelectTool']"),cursorHandToolButton:T.querySelector("[data-dom-id='cursorHandTool']"),scrollPageButton:T.querySelector("[data-dom-id='scrollPage']"),scrollVerticalButton:T.querySelector("[data-dom-id='scrollVertical']"),scrollHorizontalButton:T.querySelector("[data-dom-id='scrollHorizontal']"),scrollWrappedButton:T.querySelector("[data-dom-id='scrollWrapped']"),spreadNoneButton:T.querySelector("[data-dom-id='spreadNone']"),spreadOddButton:T.querySelector("[data-dom-id='spreadOdd']"),spreadEvenButton:T.querySelector("[data-dom-id='spreadEven']"),documentPropertiesButton:T.querySelector("[data-dom-id='documentProperties']")},sidebar:{outerContainer:T.querySelector("[data-dom-id='outerContainer']"),sidebarContainer:T.querySelector("[data-dom-id='sidebarContainer']"),toggleButton:T.querySelector("[data-dom-id='sidebarToggle']"),resizer:T.querySelector("[data-dom-id='sidebarResizer']"),thumbnailButton:T.querySelector("[data-dom-id='viewThumbnail']"),outlineButton:T.querySelector("[data-dom-id='viewOutline']"),attachmentsButton:T.querySelector("[data-dom-id='viewAttachments']"),layersButton:T.querySelector("[data-dom-id='viewLayers']"),thumbnailView:T.querySelector("[data-dom-id='thumbnailView']"),outlineView:T.querySelector("[data-dom-id='outlineView']"),attachmentsView:T.querySelector("[data-dom-id='attachmentsView']"),layersView:T.querySelector("[data-dom-id='layersView']"),outlineOptionsContainer:T.querySelector("[data-dom-id='outlineOptionsContainer']"),currentOutlineItemButton:T.querySelector("[data-dom-id='currentOutlineItem']")},findBar:{bar:T.querySelector("[data-dom-id='findbar']"),toggleButton:T.querySelector("[data-dom-id='viewFind']"),findField:T.querySelector("[data-dom-id='findInput']"),highlightAllCheckbox:T.querySelector("[data-dom-id='findHighlightAll']"),caseSensitiveCheckbox:T.querySelector("[data-dom-id='findMatchCase']"),matchDiacriticsCheckbox:T.querySelector("[data-dom-id='findMatchDiacritics']"),entireWordCheckbox:T.querySelector("[data-dom-id='findEntireWord']"),findMsg:T.querySelector("[data-dom-id='findMsg']"),findResultsCount:T.querySelector("[data-dom-id='findResultsCount']"),findPreviousButton:T.querySelector("[data-dom-id='findPrevious']"),findNextButton:T.querySelector("[data-dom-id='findNext']")},passwordOverlay:{dialog:T.querySelector("[data-dom-id='passwordDialog']"),label:T.querySelector("[data-dom-id='passwordText']"),input:T.querySelector("[data-dom-id='password']"),submitButton:T.querySelector("[data-dom-id='passwordSubmit']"),cancelButton:T.querySelector("[data-dom-id='passwordCancel']")},documentProperties:{dialog:T.querySelector("[data-dom-id='documentPropertiesDialog']"),closeButton:T.querySelector("[data-dom-id='documentPropertiesClose']"),fields:{fileName:T.querySelector("[data-dom-id='fileNameField']"),fileSize:T.querySelector("[data-dom-id='fileSizeField']"),title:T.querySelector("[data-dom-id='titleField']"),author:T.querySelector("[data-dom-id='authorField']"),subject:T.querySelector("[data-dom-id='subjectField']"),keywords:T.querySelector("[data-dom-id='keywordsField']"),creationDate:T.querySelector("[data-dom-id='creationDateField']"),modificationDate:T.querySelector("[data-dom-id='modificationDateField']"),creator:T.querySelector("[data-dom-id='creatorField']"),producer:T.querySelector("[data-dom-id='producerField']"),version:T.querySelector("[data-dom-id='versionField']"),pageCount:T.querySelector("[data-dom-id='pageCountField']"),pageSize:T.querySelector("[data-dom-id='pageSizeField']"),linearized:T.querySelector("[data-dom-id='linearizedField']")}},altTextDialog:{dialog:T.querySelector("[data-dom-id='altTextDialog']"),optionDescription:T.querySelector("[data-dom-id='descriptionButton']"),optionDecorative:T.querySelector("[data-dom-id='decorativeButton']"),textarea:T.querySelector("[data-dom-id='descriptionTextarea']"),cancelButton:T.querySelector("[data-dom-id='altTextCancel']"),saveButton:T.querySelector("[data-dom-id='altTextSave']")},annotationEditorParams:{editorFreeTextFontSize:T.querySelector("[data-dom-id='editorFreeTextFontSize']"),editorFreeTextColor:T.querySelector("[data-dom-id='editorFreeTextColor']"),editorInkColor:T.querySelector("[data-dom-id='editorInkColor']"),editorInkThickness:T.querySelector("[data-dom-id='editorInkThickness']"),editorInkOpacity:T.querySelector("[data-dom-id='editorInkOpacity']"),editorStampAddImage:T.querySelector("[data-dom-id='editorStampAddImage']")},printContainer:T.querySelector("[data-dom-id='printContainer']"),openFileInput:T.querySelector("[data-dom-id='fileInput']"),debuggerScriptPath:"../pdf.js/web/debugger.js"}}function Uu(T){const{parent:s=null,resourcePath:o,src:u,disableCORSCheck:m=!1,disableAutoSetTitle:A=!1,appOptions:x={}}=T,O=`${o}/build/pdf.worker.mjs`,D=new Vu;Object.keys(x).forEach(function(ae){D.set(ae,x[ae])}),D.set("workerSrc",O),D.set("sandboxBundleSrc",`${o}/build/pdf.sandbox.mjs`),D.set("defaultUrl",u),D.set("disableCORSCheck",m),D.set("disableAutoSetTitle",A),D.set("disablePreferences",!0);const H=`${o}/web/locale/locale.json`;ju(H);const q=new ng(D);if(xa=q,s){const ae=ag();s.appendChild(ae);const ve=Hu(s);q.run(ve)}return q}function og(T){return el||(el={createApp(s){const o=Uu(s);return this._register(o),o},_register(s){let o=null;const u=function(m){o||(o=window.requestAnimationFrame(()=>{o=null,el.activateApp(m)}))};s.initializedPromise.then(()=>{T.forEach(m=>{s.appConfig.sidebar.outerContainer.addEventListener(m,()=>{u(s)})})})},activateApp(s){xa!==s&&(xa&&window.removeEventListener("keydown",xa.helper.webViewerKeyDown),xa=s,window.addEventListener("keydown",xa.helper.webViewerKeyDown))}},el)}function lg(){return xa}function cg(T){return og(["mousemove","click","mousedown","touchstart"]).createApp(T)}},107:(I,B,k)=>{k.d(B,{DefaultExternalServices:()=>C});var y=k(972);class C{constructor(){throw new Error("Cannot initialize DefaultExternalServices.")}static updateFindControlState(X){}static updateFindMatchesCount(X){}static initPassiveLoading(X){}static reportTelemetry(X){}static createDownloadManager(){throw new Error("Not implemented: createDownloadManager")}static createPreferences(){throw new Error("Not implemented: createPreferences")}static async createL10n(){throw new Error("Not implemented: createL10n")}static createScripting(){throw new Error("Not implemented: createScripting")}static updateEditorStates(X){throw new Error("Not implemented: updateEditorStates")}static getNimbusExperimentData(){return(0,y.shadow)(this,"getNimbusExperimentData",Promise.resolve(null))}}},464:(I,B,k)=>{var _e,Le,tt,De,Ge,fy,St,py,ce,gy;k.d(B,{bindExternalService:()=>Z});var y=k(107),C=k(961);const Ce=class Ce{constructor(){b(this,_e,Object.freeze({}));b(this,Le,Object.create(null));b(this,tt,null);if(this.constructor===Ce)throw new Error("Cannot initialize BasePreferences.");R(this,tt,this._readFromStorage(a(this,_e)).then(({browserPrefs:Ee,prefs:be})=>{const Je={},bt=Object.create(null);for(const[dt,Ct]of Object.entries(Je)){const _t=Ee==null?void 0:Ee[dt];bt[dt]=typeof _t==typeof Ct?_t:Ct}for(const[dt,Ct]of Object.entries(a(this,_e))){const _t=be==null?void 0:be[dt];bt[dt]=a(this,Le)[dt]=typeof _t==typeof Ct?_t:Ct}C.AppOptions.setAll(bt,!0)}))}async _writeToStorage(Ee){throw new Error("Not implemented: _writeToStorage")}async _readFromStorage(Ee){throw new Error("Not implemented: _readFromStorage")}async reset(){await a(this,tt);const Ee=a(this,Le);return R(this,Le,Object.create(null)),this._writeToStorage(a(this,_e)).catch(be=>{throw R(this,Le,Ee),be})}async set(Ee,be){await a(this,tt);const Je=a(this,_e)[Ee],bt=a(this,Le);if(Je===void 0)throw new Error(`Set preference: "${Ee}" is undefined.`);if(be===void 0)throw new Error("Set preference: no value is specified.");const dt=typeof be,Ct=typeof Je;if(dt!==Ct)if(dt==="number"&&Ct==="string")be=be.toString();else throw new Error(`Set preference: "${be}" is a ${dt}, expected a ${Ct}.`);else if(dt==="number"&&!Number.isInteger(be))throw new Error(`Set preference: "${be}" must be an integer.`);return a(this,Le)[Ee]=be,this._writeToStorage(a(this,Le)).catch(_t=>{throw R(this,Le,bt),_t})}async get(Ee){await a(this,tt);const be=a(this,_e)[Ee];if(be===void 0)throw new Error(`Get preference: "${Ee}" is undefined.`);return a(this,Le)[Ee]??be}get initializedPromise(){return a(this,tt)}};_e=new WeakMap,Le=new WeakMap,tt=new WeakMap;let U=Ce;var X=k(972);function te(Re,Ee){const be=document.createElement("a");if(!be.click)throw new Error('DownloadManager: "a.click()" is not supported.');be.href=Re,be.target="_parent","download"in be&&(be.download=Ee),(document.body||document.documentElement).append(be),be.click(),be.remove()}class Pe{constructor(){b(this,De,new WeakMap)}downloadUrl(Ee,be,Je){if(!(0,X.createValidAbsoluteUrl)(Ee,"http://example.com")){console.error(`downloadUrl - not a valid URL: ${Ee}`);return}te(Ee+"#pdfjs.action=download",be)}downloadData(Ee,be,Je){const bt=URL.createObjectURL(new Blob([Ee],{type:Je}));te(bt,be)}openOrDownloadData(Ee,be,Je=null){const bt=(0,X.isPdfFile)(be),dt=bt?"application/pdf":"";if(bt){let Ct=a(this,De).get(Ee);Ct||(Ct=URL.createObjectURL(new Blob([Ee],{type:dt})),a(this,De).set(Ee,Ct));let _t;_t="?file="+encodeURIComponent(Ct+"#"+be),Je&&(_t+=`#${escape(Je)}`);try{return window.open(_t),!0}catch(oe){console.error(`openOrDownloadData: ${oe}`),URL.revokeObjectURL(Ct),a(this,De).delete(Ee)}}return this.downloadData(Ee,be,dt),!1}download(Ee,be,Je,bt){const dt=URL.createObjectURL(Ee);te(dt,Je)}}De=new WeakMap;var de=k(759),Ve=k(275),Ae=k(65);const ne=class ne extends Ae.L10n{constructor(Ee){super({lang:Ee}),this._setL10n(new Ve.DOMLocalization([],S(ne,Ge,fy).bind(ne,"en-us",this.getLanguage())))}};Ge=new WeakSet,fy=async function*(Ee,be){const{baseURL:Je,paths:bt}=await S(this,ce,gy).call(this),dt=[be];if(Ee!==be){const Ct=be.split("-",1)[0];Ct!==be&&dt.push(Ct),dt.push(Ee)}for(const Ct of dt){const _t=await S(this,St,py).call(this,Ct,Je,bt);_t&&(yield _t)}},St=new WeakSet,py=async function(Ee,be,Je){const bt=Je[Ee];if(!bt)return null;const dt=new URL(bt,be),Ct=await(0,X.fetchData)(dt,"text"),_t=new de.FluentResource(Ct),oe=new de.FluentBundle(Ee),We=oe.addResource(_t);return We.length&&console.error("L10n errors",We),oe},ce=new WeakSet,gy=async function(){const{href:Ee}=document.querySelector('link[type="application/l10n"]'),be=await(0,X.fetchData)(Ee,"json");return{baseURL:Ee.replace(/[^/]*$/,"")||"./",paths:be}},b(ne,Ge),b(ne,St),b(ne,ce);let ge=ne;class xe{constructor(Ee){this._ready=new Promise((be,Je)=>{Gf(()=>import(Ee),[]).then(dt=>{be(dt.QuickJSSandbox())}).catch(Je)})}async createSandbox(Ee){(await this._ready).create(Ee)}async dispatchEventInSandbox(Ee){const be=await this._ready;setTimeout(()=>be.dispatchEvent(Ee),0)}async destroySandbox(){(await this._ready).nukeSandbox()}}class ze extends U{async _writeToStorage(Ee){localStorage.setItem("pdfjs.preferences",JSON.stringify(Ee))}async _readFromStorage(Ee){return JSON.parse(localStorage.getItem("pdfjs.preferences"))}}class at extends y.DefaultExternalServices{static createDownloadManager(){return new Pe}static createPreferences(){return new ze}static createL10n(Ee){return new ge(Ee)}static createScripting({sandboxBundleSrc:Ee}){return new xe(Ee)}}function Z(Re){Re.externalServices=at}},972:(I,B,k)=>{var In,bs,Xr,Ns,zi,$u,nr,Yr,nn,ui,Fs,kd,rs,cd,rn,dd,Zr,Im,rr,up,ar,fp,an,nu,kn,ru,On,Od,Ba,Nn,Qr,km,Ni,on,Nd,di,qu,my,si,ni,fi,as,Ds,Jt,os,Bs,$t,pi,Fn,Dd,Wi,Tc,Jr,vo,ea,bl,ln,Va,Dt,cn,or,lr,Vs,js,Bd,ta,Vd,cr,jd,ia,Hd,vs,sa,Hs,Ud,ja,by,Dn,Om,Wd,Nm,Lc,pp,qd,Fm,Gd,Dm,Us,Xn,wl,au,na,vy,ra,wy,ws,Bm,_l,ou,Fi,Vm,zs,wo,Ei,gi,Si,_s,$i,Zd,jm,Ws,dn,qi,$s,dr,_y,Qu,yy,ef,Ey,qs,gp,hn,Sy,un,Hm,Ai,mi,Gs,Gi,fn,Oc,Bn,ls,ur,El,fr,Sl,ys,oa,la,tf,ca,Um,pr,zm,Es,Wm,gr,$m,pn,Ay,da,Cy,bi,qm,mr,Gm,br,Km,Ks,Py,ha,xy,Vn,Ty,mn,Ly,ua,Xm,jn,lu,xl,ri,nf,Ry,th,vr,wr,Ym,fa,Zm,af,My,of,Iy,Vc,mp,Tl,_r,sh,Hn,Zt,Di,bn,nh,Qm,hf,yo,As,Eo,hd,jc,bp,Un,uf,zn,Hc,vp,Ki,pa,T,s,o,wp,m,A,Jm,O,D,q,ve,ic,qe,ky,et,Oy,ot,Xe,vt,ht,Ue,st,yt,Ut,Lt,kt,Pt,Gt,Cs,yr,Er,Sr,wn,ga,Ny,Wn,_p,Ar,eb,Cr,tb,Wa,Ao,$a,qa,Ll,Pr,Ga,ib,Rl,Ka,Co,Uc,Fy,Ml,sb,Il,kl,re,Ie,$e,mt,ut,At,Rt,Qt,Dy,vi,By,Xs,Vy,ds,cu,Ri,nb,Bi,jy,_n,rb,zc,xr,Nl,Wc,ki,hh,uh,fh,xo,ph,ab,gh,ob,pf,Hy,gf,Uy,mh,To,Tr,mf,zy,$c,yp,bf,Wy,vf,$y,bh,lb,Lo,qc,Fl,Dl,Bl,Vl,Gn,vh,jl,yn,wh,cb,wf,qy,_h,db,Gc,Ep,yh,hb,_f,Gy,yf,Ky,Hl,Ul,Eh,Sh,Ah,zl,ma,Ya,Kn,Wl,$l,ql,Gl,Kl,Ro,Ef,Xy,Sf,Yy,Af,Zy,Cf,Qy,Ch,ub,Pf,Jy,Ph,fb,xf,eE,Tf,tE,Lf,iE,Rf,sE,Mf,nE,Lr,no,xh,pb,Kc,Sp,Xc,Ap,Mo,ud,Th,gb,Yc,Cp,If,rE,Lh,mb,kf,aE,Of,oE,Rh,bb,Zc,Pp,Io,fd,Yi,hs,ko,Za,Oo,Qc,Qa,Xl,ba,Rr,Mh,Yl,du,Zl,hu,Jc,xp,Ih,vb,Nf,lE,Ff,cE,kh,wb,ed,Tp,Df,dE,Ql,td,Ja,Nh,Bf,Fh,eo,Dh,En,No,id,sd,to,wt,Fo,Bh,_b,Vh,yb,Jl,uu,jh,Eb,Hh,Sb,va,Uh,Zi,zh,Ab,Wh,Cb,$h,Pb;k.d(B,{AbortException:()=>Fe,AnnotationEditorLayer:()=>Da,AnnotationEditorParamsType:()=>ge,AnnotationEditorType:()=>Ae,AnnotationEditorUIManager:()=>Qn,AnnotationLayer:()=>FE,AnnotationMode:()=>de,ColorPicker:()=>Wu,DOMSVGFactory:()=>Tn,DrawLayer:()=>mg,FeatureTest:()=>fe,GlobalWorkerOptions:()=>gs,InvalidPDFException:()=>Ct,MissingPDFException:()=>_t,PDFDateString:()=>Br,PDFWorker:()=>bc,PasswordResponses:()=>De,PermissionFlag:()=>xe,PixelsPerInch:()=>Xt,PromiseCapability:()=>me,RenderingCancelledException:()=>li,UnexpectedResponseException:()=>oe,XfaLayer:()=>ul,build:()=>AE,createValidAbsoluteUrl:()=>Ee,fetchData:()=>zt,getDocument:()=>Mn,getFilenameFromUrl:()=>Js,getPdfFilenameFromUrl:()=>Fr,getXfaPageViewport:()=>Be,isDataScheme:()=>_i,isPdfFile:()=>ps,noContextMenu:()=>Oi,normalizeUnicode:()=>Se,renderTextLayer:()=>xE,setLayerDimensions:()=>Li,shadow:()=>be,updateTextLayer:()=>yc,version:()=>_c});const y=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),C=[1,0,0,1,0,0],U=[.001,0,0,.001,0,0],X=1e7,te=1.35,Pe={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256},de={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},Ve="pdfjs_internal_editor_",Ae={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},ge={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32},xe={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},ze={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},at={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Z={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},_e={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Le={ERRORS:0,WARNINGS:1,INFOS:5},tt={NONE:0,BINARY:1},Ce={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},De={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Ge=Le.WARNINGS;function ct(v){Number.isInteger(v)&&(Ge=v)}function St(){return Ge}function Tt(v){Ge>=Le.INFOS&&console.log(`Info: ${v}`)}function ce(v){Ge>=Le.WARNINGS&&console.log(`Warning: ${v}`)}function W(v){throw new Error(v)}function ne(v,e){v||W(e)}function Re(v){switch(v==null?void 0:v.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Ee(v,e=null,t=null){if(!v)return null;try{if(t&&typeof v=="string"){if(t.addDefaultProtocol&&v.startsWith("www.")){const r=v.match(/\./g);(r==null?void 0:r.length)>=2&&(v=`http://${v}`)}if(t.tryConvertEncoding)try{v=Oe(v)}catch{}}const i=e?new URL(v,e):new URL(v);if(Re(i))return i}catch{}return null}function be(v,e,t,i=!1){return Object.defineProperty(v,e,{value:t,enumerable:!i,configurable:!0,writable:!1}),t}const Je=function(){function e(t,i){this.constructor===e&&W("Cannot initialize BaseException."),this.message=t,this.name=i}return e.prototype=new Error,e.constructor=e,e}();class bt extends Je{constructor(e,t){super(e,"PasswordException"),this.code=t}}class dt extends Je{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class Ct extends Je{constructor(e){super(e,"InvalidPDFException")}}class _t extends Je{constructor(e){super(e,"MissingPDFException")}}class oe extends Je{constructor(e,t){super(e,"UnexpectedResponseException"),this.status=t}}class We extends Je{constructor(e){super(e,"FormatError")}}class Fe extends Je{constructor(e){super(e,"AbortException")}}function Ze(v){(typeof v!="object"||(v==null?void 0:v.length)===void 0)&&W("Invalid argument for bytesToString");const e=v.length,t=8192;if(e<t)return String.fromCharCode.apply(null,v);const i=[];for(let r=0;r<e;r+=t){const l=Math.min(r+t,e),d=v.subarray(r,l);i.push(String.fromCharCode.apply(null,d))}return i.join("")}function gt(v){typeof v!="string"&&W("Invalid argument for stringToBytes");const e=v.length,t=new Uint8Array(e);for(let i=0;i<e;++i)t[i]=v.charCodeAt(i)&255;return t}function Nt(v){return String.fromCharCode(v>>24&255,v>>16&255,v>>8&255,v&255)}function V(v){const e=Object.create(null);for(const[t,i]of v)e[t]=i;return e}function j(){const v=new Uint8Array(4);return v[0]=1,new Uint32Array(v.buffer,0,1)[0]===1}function se(){try{return new Function(""),!0}catch{return!1}}class fe{static get isLittleEndian(){return be(this,"isLittleEndian",j())}static get isEvalSupported(){return be(this,"isEvalSupported",se())}static get isOffscreenCanvasSupported(){return be(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?be(this,"platform",{isMac:navigator.platform.includes("Mac")}):be(this,"platform",{isMac:!1})}static get isCSSRoundSupported(){var e,t;return be(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const le=[...Array(256).keys()].map(v=>v.toString(16).padStart(2,"0"));class J{static makeHexColor(e,t,i){return`#${le[e]}${le[t]}${le[i]}`}static scaleMinMax(e,t){let i;e[0]?(e[0]<0&&(i=t[0],t[0]=t[1],t[1]=i),t[0]*=e[0],t[1]*=e[0],e[3]<0&&(i=t[2],t[2]=t[3],t[3]=i),t[2]*=e[3],t[3]*=e[3]):(i=t[0],t[0]=t[2],t[2]=i,i=t[1],t[1]=t[3],t[3]=i,e[1]<0&&(i=t[2],t[2]=t[3],t[3]=i),t[2]*=e[1],t[3]*=e[1],e[2]<0&&(i=t[0],t[0]=t[1],t[1]=i),t[0]*=e[2],t[1]*=e[2]),t[0]+=e[4],t[1]+=e[4],t[2]+=e[5],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){const i=e[0]*t[0]+e[1]*t[2]+t[4],r=e[0]*t[1]+e[1]*t[3]+t[5];return[i,r]}static applyInverseTransform(e,t){const i=t[0]*t[3]-t[1]*t[2],r=(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/i,l=(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/i;return[r,l]}static getAxialAlignedBoundingBox(e,t){const i=this.applyTransform(e,t),r=this.applyTransform(e.slice(2,4),t),l=this.applyTransform([e[0],e[3]],t),d=this.applyTransform([e[2],e[1]],t);return[Math.min(i[0],r[0],l[0],d[0]),Math.min(i[1],r[1],l[1],d[1]),Math.max(i[0],r[0],l[0],d[0]),Math.max(i[1],r[1],l[1],d[1])]}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e){const t=[e[0],e[2],e[1],e[3]],i=e[0]*t[0]+e[1]*t[2],r=e[0]*t[1]+e[1]*t[3],l=e[2]*t[0]+e[3]*t[2],d=e[2]*t[1]+e[3]*t[3],h=(i+d)/2,g=Math.sqrt((i+d)**2-4*(i*d-l*r))/2,_=h+g||1,w=h-g||1;return[Math.sqrt(_),Math.sqrt(w)]}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const i=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),r=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(i>r)return null;const l=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),d=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return l>d?null:[i,l,r,d]}static bezierBoundingBox(e,t,i,r,l,d,h,g){const _=[],w=[[],[]];let L,M,N,F,z,ie,K,we;for(let je=0;je<2;++je){if(je===0?(M=6*e-12*i+6*l,L=-3*e+9*i-9*l+3*h,N=3*i-3*e):(M=6*t-12*r+6*d,L=-3*t+9*r-9*d+3*g,N=3*r-3*t),Math.abs(L)<1e-12){if(Math.abs(M)<1e-12)continue;F=-N/M,0<F&&F<1&&_.push(F);continue}K=M*M-4*N*L,we=Math.sqrt(K),!(K<0)&&(z=(-M+we)/(2*L),0<z&&z<1&&_.push(z),ie=(-M-we)/(2*L),0<ie&&ie<1&&_.push(ie))}let ue=_.length,pe;const Te=ue;for(;ue--;)F=_[ue],pe=1-F,w[0][ue]=pe*pe*pe*e+3*pe*pe*F*i+3*pe*F*F*l+F*F*F*h,w[1][ue]=pe*pe*pe*t+3*pe*pe*F*r+3*pe*F*F*d+F*F*F*g;return w[0][Te]=e,w[1][Te]=t,w[0][Te+1]=h,w[1][Te+1]=g,w[0].length=w[1].length=Te+2,[Math.min(...w[0]),Math.min(...w[1]),Math.max(...w[0]),Math.max(...w[1])]}}function Oe(v){return decodeURIComponent(escape(v))}function Me(v){return typeof v=="object"&&(v==null?void 0:v.byteLength)!==void 0}class me{constructor(){b(this,In,!1);this.promise=new Promise((e,t)=>{this.resolve=i=>{R(this,In,!0),e(i)},this.reject=i=>{R(this,In,!0),t(i)}})}get settled(){return a(this,In)}}In=new WeakMap;let G=null,ee=null;function Se(v){return G||(G=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,ee=new Map([["","t"]])),v.replaceAll(G,(e,t,i)=>t?t.normalize("NFKC"):ee.get(i))}function he(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const v=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(v);else for(let e=0;e<32;e++)v[e]=Math.floor(Math.random()*255);return Ze(v)}const Y="pdfjs_internal_id_";class ${constructor(){this.constructor===$&&W("Cannot initialize BaseFilterFactory.")}addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addHighlightHCMFilter(e,t,i,r){return"none"}destroy(e=!1){}}class Q{constructor(){this.constructor===Q&&W("Cannot initialize BaseCanvasFactory.")}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const i=this._createCanvas(e,t);return{canvas:i,context:i.getContext("2d")}}reset(e,t,i){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||i<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=i}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){W("Abstract method `_createCanvas` called.")}}class ye{constructor({baseUrl:e=null,isCompressed:t=!0}){this.constructor===ye&&W("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":""),i=this.isCompressed?tt.BINARY:tt.NONE;return this._fetchData(t,i).catch(r=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}_fetchData(e,t){W("Abstract method `_fetchData` called.")}}class Ne{constructor({baseUrl:e=null}){this.constructor===Ne&&W("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetchData(t).catch(i=>{throw new Error(`Unable to load font data at: ${t}`)})}_fetchData(e){W("Abstract method `_fetchData` called.")}}class Qe{constructor(){this.constructor===Qe&&W("Cannot initialize BaseSVGFactory.")}create(e,t,i=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),i||(r.setAttribute("width",`${e}px`),r.setAttribute("height",`${t}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${e} ${t}`),r}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){W("Abstract method `_createSVG` called.")}}const Ot="http://www.w3.org/2000/svg",ml=class ml{};ke(ml,"CSS",96),ke(ml,"PDF",72),ke(ml,"PDF_TO_CSS_UNITS",ml.CSS/ml.PDF);let Xt=ml;class is extends ${constructor({docId:t,ownerDocument:i=globalThis.document}={}){super();b(this,rs);b(this,rn);b(this,Zr);b(this,rr);b(this,ar);b(this,an);b(this,kn);b(this,bs,void 0);b(this,Xr,void 0);b(this,Ns,void 0);b(this,zi,void 0);b(this,$u,void 0);b(this,nr,void 0);b(this,Yr,void 0);b(this,nn,void 0);b(this,ui,void 0);b(this,Fs,void 0);b(this,kd,0);R(this,Ns,t),R(this,zi,i)}addFilter(t){if(!t)return"none";let i=a(this,rs,cd).get(t);if(i)return i;let r,l,d,h;if(t.length===1){const L=t[0],M=new Array(256);for(let N=0;N<256;N++)M[N]=L[N]/255;h=r=l=d=M.join(",")}else{const[L,M,N]=t,F=new Array(256),z=new Array(256),ie=new Array(256);for(let K=0;K<256;K++)F[K]=L[K]/255,z[K]=M[K]/255,ie[K]=N[K]/255;r=F.join(","),l=z.join(","),d=ie.join(","),h=`${r}${l}${d}`}if(i=a(this,rs,cd).get(h),i)return a(this,rs,cd).set(t,i),i;const g=`g_${a(this,Ns)}_transfer_map_${wa(this,kd)._++}`,_=`url(#${g})`;a(this,rs,cd).set(t,_),a(this,rs,cd).set(h,_);const w=S(this,rr,up).call(this,g);return S(this,an,nu).call(this,r,l,d,w),_}addHCMFilter(t,i){var M;const r=`${t}-${i}`;if(a(this,nr)===r)return a(this,Yr);if(R(this,nr,r),R(this,Yr,"none"),(M=a(this,$u))==null||M.remove(),!t||!i)return a(this,Yr);const l=S(this,kn,ru).call(this,t);t=J.makeHexColor(...l);const d=S(this,kn,ru).call(this,i);if(i=J.makeHexColor(...d),a(this,rn,dd).style.color="",t==="#000000"&&i==="#ffffff"||t===i)return a(this,Yr);const h=new Array(256);for(let N=0;N<=255;N++){const F=N/255;h[N]=F<=.03928?F/12.92:((F+.055)/1.055)**2.4}const g=h.join(","),_=`g_${a(this,Ns)}_hcm_filter`,w=R(this,nn,S(this,rr,up).call(this,_));S(this,an,nu).call(this,g,g,g,w),S(this,Zr,Im).call(this,w);const L=(N,F)=>{const z=l[N]/255,ie=d[N]/255,K=new Array(F+1);for(let we=0;we<=F;we++)K[we]=z+we/F*(ie-z);return K.join(",")};return S(this,an,nu).call(this,L(0,5),L(1,5),L(2,5),w),R(this,Yr,`url(#${_})`),a(this,Yr)}addHighlightHCMFilter(t,i,r,l){var ie;const d=`${t}-${i}-${r}-${l}`;if(a(this,ui)===d)return a(this,Fs);if(R(this,ui,d),R(this,Fs,"none"),(ie=a(this,nn))==null||ie.remove(),!t||!i)return a(this,Fs);const[h,g]=[t,i].map(S(this,kn,ru).bind(this));let _=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),w=Math.round(.2126*g[0]+.7152*g[1]+.0722*g[2]),[L,M]=[r,l].map(S(this,kn,ru).bind(this));w<_&&([_,w,L,M]=[w,_,M,L]),a(this,rn,dd).style.color="";const N=(K,we,ue)=>{const pe=new Array(256),Te=(w-_)/ue,je=K/255,rt=(we-K)/(255*ue);let lt=0;for(let pt=0;pt<=ue;pt++){const Ht=Math.round(_+pt*Te),Mt=je+pt*rt;for(let ai=lt;ai<=Ht;ai++)pe[ai]=Mt;lt=Ht+1}for(let pt=lt;pt<256;pt++)pe[pt]=pe[lt-1];return pe.join(",")},F=`g_${a(this,Ns)}_hcm_highlight_filter`,z=R(this,nn,S(this,rr,up).call(this,F));return S(this,Zr,Im).call(this,z),S(this,an,nu).call(this,N(L[0],M[0],5),N(L[1],M[1],5),N(L[2],M[2],5),z),R(this,Fs,`url(#${F})`),a(this,Fs)}destroy(t=!1){t&&(a(this,Yr)||a(this,Fs))||(a(this,Xr)&&(a(this,Xr).parentNode.parentNode.remove(),R(this,Xr,null)),a(this,bs)&&(a(this,bs).clear(),R(this,bs,null)),R(this,kd,0))}}bs=new WeakMap,Xr=new WeakMap,Ns=new WeakMap,zi=new WeakMap,$u=new WeakMap,nr=new WeakMap,Yr=new WeakMap,nn=new WeakMap,ui=new WeakMap,Fs=new WeakMap,kd=new WeakMap,rs=new WeakSet,cd=function(){return a(this,bs)||R(this,bs,new Map)},rn=new WeakSet,dd=function(){if(!a(this,Xr)){const t=a(this,zi).createElement("div"),{style:i}=t;i.visibility="hidden",i.contain="strict",i.width=i.height=0,i.position="absolute",i.top=i.left=0,i.zIndex=-1;const r=a(this,zi).createElementNS(Ot,"svg");r.setAttribute("width",0),r.setAttribute("height",0),R(this,Xr,a(this,zi).createElementNS(Ot,"defs")),t.append(r),r.append(a(this,Xr)),a(this,zi).body.append(t)}return a(this,Xr)},Zr=new WeakSet,Im=function(t){const i=a(this,zi).createElementNS(Ot,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(i)},rr=new WeakSet,up=function(t){const i=a(this,zi).createElementNS(Ot,"filter");return i.setAttribute("color-interpolation-filters","sRGB"),i.setAttribute("id",t),a(this,rn,dd).append(i),i},ar=new WeakSet,fp=function(t,i,r){const l=a(this,zi).createElementNS(Ot,i);l.setAttribute("type","discrete"),l.setAttribute("tableValues",r),t.append(l)},an=new WeakSet,nu=function(t,i,r,l){const d=a(this,zi).createElementNS(Ot,"feComponentTransfer");l.append(d),S(this,ar,fp).call(this,d,"feFuncR",t),S(this,ar,fp).call(this,d,"feFuncG",i),S(this,ar,fp).call(this,d,"feFuncB",r)},kn=new WeakSet,ru=function(t){return a(this,rn,dd).style.color=t,it(getComputedStyle(a(this,rn,dd)).getPropertyValue("color"))};class Yn extends Q{constructor({ownerDocument:e=globalThis.document}={}){super(),this._document=e}_createCanvas(e,t){const i=this._document.createElement("canvas");return i.width=e,i.height=t,i}}async function zt(v,e="text"){if(en(v,document.baseURI)){const t=await fetch(v);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,i)=>{const r=new XMLHttpRequest;r.open("GET",v,!0),r.responseType=e,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){let l;switch(e){case"arraybuffer":case"blob":case"json":l=r.response;break;default:l=r.responseText;break}if(l){t(l);return}}i(new Error(r.statusText))}},r.send(null)})}class oi extends ye{_fetchData(e,t){return zt(e,this.isCompressed?"arraybuffer":"text").then(i=>({cMapData:i instanceof ArrayBuffer?new Uint8Array(i):gt(i),compressionType:t}))}}class xn extends Ne{_fetchData(e){return zt(e,"arraybuffer").then(t=>new Uint8Array(t))}}class Tn extends Qe{_createSVG(e){return document.createElementNS(Ot,e)}}class Ti{constructor({viewBox:e,scale:t,rotation:i,offsetX:r=0,offsetY:l=0,dontFlip:d=!1}){this.viewBox=e,this.scale=t,this.rotation=i,this.offsetX=r,this.offsetY=l;const h=(e[2]+e[0])/2,g=(e[3]+e[1])/2;let _,w,L,M;switch(i%=360,i<0&&(i+=360),i){case 180:_=-1,w=0,L=0,M=1;break;case 90:_=0,w=1,L=1,M=0;break;case 270:_=0,w=-1,L=-1,M=0;break;case 0:_=1,w=0,L=0,M=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}d&&(L=-L,M=-M);let N,F,z,ie;_===0?(N=Math.abs(g-e[1])*t+r,F=Math.abs(h-e[0])*t+l,z=(e[3]-e[1])*t,ie=(e[2]-e[0])*t):(N=Math.abs(h-e[0])*t+r,F=Math.abs(g-e[1])*t+l,z=(e[2]-e[0])*t,ie=(e[3]-e[1])*t),this.transform=[_*t,w*t,L*t,M*t,N-_*t*h-L*t*g,F-w*t*h-M*t*g],this.width=z,this.height=ie}get rawDims(){const{viewBox:e}=this;return be(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:i=this.offsetX,offsetY:r=this.offsetY,dontFlip:l=!1}={}){return new Ti({viewBox:this.viewBox.slice(),scale:e,rotation:t,offsetX:i,offsetY:r,dontFlip:l})}convertToViewportPoint(e,t){return J.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){const t=J.applyTransform([e[0],e[1]],this.transform),i=J.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],i[0],i[1]]}convertToPdfPoint(e,t){return J.applyInverseTransform([e,t],this.transform)}}class li extends Je{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function _i(v){const e=v.length;let t=0;for(;t<e&&v[t].trim()==="";)t++;return v.substring(t,t+5).toLowerCase()==="data:"}function ps(v){return typeof v=="string"&&/\.pdf$/i.test(v)}function Js(v,e=!1){return e||([v]=v.split(/[#?]/,1)),v.substring(v.lastIndexOf("/")+1)}function Fr(v,e="document.pdf"){if(typeof v!="string")return e;if(_i(v))return ce('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const t=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,i=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,r=t.exec(v);let l=i.exec(r[1])||i.exec(r[2])||i.exec(r[3]);if(l&&(l=l[0],l.includes("%")))try{l=i.exec(decodeURIComponent(l))[0]}catch{}return l||e}class Zn{constructor(){ke(this,"started",Object.create(null));ke(this,"times",[])}time(e){e in this.started&&ce(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||ce(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:i}of this.times)t=Math.max(i.length,t);for(const{name:i,start:r,end:l}of this.times)e.push(`${i.padEnd(t)} ${l-r}ms
`);return e.join("")}}function en(v,e){try{const{protocol:t}=e?new URL(v,e):new URL(v);return t==="http:"||t==="https:"}catch{return!1}}function Oi(v){v.preventDefault()}let Dr;class Br{static toDateObject(e){if(!e||typeof e!="string")return null;Dr||(Dr=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=Dr.exec(e);if(!t)return null;const i=parseInt(t[1],10);let r=parseInt(t[2],10);r=r>=1&&r<=12?r-1:0;let l=parseInt(t[3],10);l=l>=1&&l<=31?l:1;let d=parseInt(t[4],10);d=d>=0&&d<=23?d:0;let h=parseInt(t[5],10);h=h>=0&&h<=59?h:0;let g=parseInt(t[6],10);g=g>=0&&g<=59?g:0;const _=t[7]||"Z";let w=parseInt(t[8],10);w=w>=0&&w<=23?w:0;let L=parseInt(t[9],10)||0;return L=L>=0&&L<=59?L:0,_==="-"?(d+=w,h+=L):_==="+"&&(d-=w,h-=L),new Date(Date.UTC(i,r,l,d,h,g))}}function Be(v,{scale:e=1,rotation:t=0}){const{width:i,height:r}=v.attributes.style,l=[0,0,parseInt(i),parseInt(r)];return new Ti({viewBox:l,scale:e,rotation:t})}function it(v){if(v.startsWith("#")){const e=parseInt(v.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return v.startsWith("rgb(")?v.slice(4,-1).split(",").map(e=>parseInt(e)):v.startsWith("rgba(")?v.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(ce(`Not a valid color format: "${v}"`),[0,0,0])}function Wt(v){const e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);for(const t of v.keys()){e.style.color=t;const i=window.getComputedStyle(e).color;v.set(t,it(i))}e.remove()}function Ft(v){const{a:e,b:t,c:i,d:r,e:l,f:d}=v.getTransform();return[e,t,i,r,l,d]}function ji(v){const{a:e,b:t,c:i,d:r,e:l,f:d}=v.getTransform().invertSelf();return[e,t,i,r,l,d]}function Li(v,e,t=!1,i=!0){if(e instanceof Ti){const{pageWidth:r,pageHeight:l}=e.rawDims,{style:d}=v,h=fe.isCSSRoundSupported,g=`var(--scale-factor) * ${r}px`,_=`var(--scale-factor) * ${l}px`,w=h?`round(${g}, 1px)`:`calc(${g})`,L=h?`round(${_}, 1px)`:`calc(${_})`;!t||e.rotation%180===0?(d.width=w,d.height=L):(d.width=L,d.height=w)}i&&v.setAttribute("data-main-rotation",e.rotation)}function Xo(v,e,t){for(const i of t)e.addEventListener(i,v[i].bind(v))}function dc(v){return Math.round(Math.min(255,Math.max(1,255*v))).toString(16).padStart(2,"0")}class Lu{constructor(){b(this,On,0)}getId(){return`${Ve}${wa(this,On)._++}`}}On=new WeakMap;const bo=class bo{constructor(){b(this,Qr);b(this,Od,he());b(this,Ba,0);b(this,Nn,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',i=new OffscreenCanvas(1,3).getContext("2d"),r=new Image;r.src=e;const l=r.decode().then(()=>(i.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(i.getImageData(0,0,1,1).data.buffer)[0]===0));return be(this,"_isSVGFittingCanvas",l)}async getFromFile(e){const{lastModified:t,name:i,size:r,type:l}=e;return S(this,Qr,km).call(this,`${t}_${i}_${r}_${l}`,e)}async getFromUrl(e){return S(this,Qr,km).call(this,e,e)}async getFromId(e){a(this,Nn)||R(this,Nn,new Map);const t=a(this,Nn).get(e);return t?t.bitmap?(t.refCounter+=1,t):t.file?this.getFromFile(t.file):this.getFromUrl(t.url):null}getSvgUrl(e){const t=a(this,Nn).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){a(this,Nn)||R(this,Nn,new Map);const t=a(this,Nn).get(e);t&&(t.refCounter-=1,t.refCounter===0&&(t.bitmap=null))}isValidId(e){return e.startsWith(`image_${a(this,Od)}_`)}};Od=new WeakMap,Ba=new WeakMap,Nn=new WeakMap,Qr=new WeakSet,km=async function(e,t){a(this,Nn)||R(this,Nn,new Map);let i=a(this,Nn).get(e);if(i===null)return null;if(i!=null&&i.bitmap)return i.refCounter+=1,i;try{i||(i={bitmap:null,id:`image_${a(this,Od)}_${wa(this,Ba)._++}`,refCounter:0,isSvg:!1});let r;if(typeof t=="string"?(i.url=t,r=await zt(t,"blob")):r=i.file=t,r.type==="image/svg+xml"){const l=bo._isSVGFittingCanvas,d=new FileReader,h=new Image,g=new Promise((_,w)=>{h.onload=()=>{i.bitmap=h,i.isSvg=!0,_()},d.onload=async()=>{const L=i.svgUrl=d.result;h.src=await l?`${L}#svgView(preserveAspectRatio(none))`:L},h.onerror=d.onerror=w});d.readAsDataURL(r),await g}else i.bitmap=await createImageBitmap(r);i.refCounter=1}catch(r){console.error(r),i=null}return a(this,Nn).set(e,i),i&&a(this,Nn).set(i.id,i),i};let Sd=bo;class Ru{constructor(e=128){b(this,Ni,[]);b(this,on,!1);b(this,Nd,void 0);b(this,di,-1);R(this,Nd,e)}add({cmd:e,undo:t,mustExec:i,type:r=NaN,overwriteIfSameType:l=!1,keepUndo:d=!1}){if(i&&e(),a(this,on))return;const h={cmd:e,undo:t,type:r};if(a(this,di)===-1){a(this,Ni).length>0&&(a(this,Ni).length=0),R(this,di,0),a(this,Ni).push(h);return}if(l&&a(this,Ni)[a(this,di)].type===r){d&&(h.undo=a(this,Ni)[a(this,di)].undo),a(this,Ni)[a(this,di)]=h;return}const g=a(this,di)+1;g===a(this,Nd)?a(this,Ni).splice(0,1):(R(this,di,g),g<a(this,Ni).length&&a(this,Ni).splice(g)),a(this,Ni).push(h)}undo(){a(this,di)!==-1&&(R(this,on,!0),a(this,Ni)[a(this,di)].undo(),R(this,on,!1),R(this,di,a(this,di)-1))}redo(){a(this,di)<a(this,Ni).length-1&&(R(this,di,a(this,di)+1),R(this,on,!0),a(this,Ni)[a(this,di)].cmd(),R(this,on,!1))}hasSomethingToUndo(){return a(this,di)!==-1}hasSomethingToRedo(){return a(this,di)<a(this,Ni).length-1}destroy(){R(this,Ni,null)}}Ni=new WeakMap,on=new WeakMap,Nd=new WeakMap,di=new WeakMap;class Yo{constructor(e){b(this,qu);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=fe.platform;for(const[i,r,l={}]of e)for(const d of i){const h=d.startsWith("mac+");t&&h?(this.callbacks.set(d.slice(4),{callback:r,options:l}),this.allKeys.add(d.split("+").at(-1))):!t&&!h&&(this.callbacks.set(d,{callback:r,options:l}),this.allKeys.add(d.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const i=this.callbacks.get(S(this,qu,my).call(this,t));if(!i)return;const{callback:r,options:{bubbles:l=!1,args:d=[],checker:h=null}}=i;h&&!h(e,t)||(r.bind(e,...d,t)(),l||(t.stopPropagation(),t.preventDefault()))}}qu=new WeakSet,my=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const Gu=class Gu{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return Wt(e),be(this,"_colors",e)}convert(e){const t=it(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[i,r]of this._colors)if(r.every((l,d)=>l===t[d]))return Gu._colorsMapping.get(i);return t}getHexCode(e){const t=this._colors.get(e);return t?J.makeHexColor(...t):e}};ke(Gu,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let Ad=Gu;const Ic=class Ic{constructor(e,t,i,r,l,d,h){b(this,ja);b(this,Dn);b(this,Wd);b(this,Lc);b(this,qd);b(this,Gd);b(this,Us);b(this,wl);b(this,na);b(this,ra);b(this,ws);b(this,_l);b(this,Fi);b(this,si,null);b(this,ni,new Map);b(this,fi,new Map);b(this,as,null);b(this,Ds,null);b(this,Jt,new Ru);b(this,os,0);b(this,Bs,new Set);b(this,$t,null);b(this,pi,null);b(this,Fn,new Set);b(this,Dd,null);b(this,Wi,null);b(this,Tc,null);b(this,Jr,new Lu);b(this,vo,!1);b(this,ea,!1);b(this,bl,null);b(this,ln,null);b(this,Va,Ae.NONE);b(this,Dt,new Set);b(this,cn,null);b(this,or,this.blur.bind(this));b(this,lr,this.focus.bind(this));b(this,Vs,this.copy.bind(this));b(this,js,this.cut.bind(this));b(this,Bd,this.paste.bind(this));b(this,ta,this.keydown.bind(this));b(this,Vd,this.onEditingAction.bind(this));b(this,cr,this.onPageChanging.bind(this));b(this,jd,this.onScaleChanging.bind(this));b(this,ia,this.onRotationChanging.bind(this));b(this,Hd,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});b(this,vs,[0,0]);b(this,sa,null);b(this,Hs,null);b(this,Ud,null);R(this,Hs,e),R(this,Ud,t),R(this,as,i),this._eventBus=r,this._eventBus._on("editingaction",a(this,Vd)),this._eventBus._on("pagechanging",a(this,cr)),this._eventBus._on("scalechanging",a(this,jd)),this._eventBus._on("rotationchanging",a(this,ia)),R(this,Ds,l.annotationStorage),R(this,Dd,l.filterFactory),R(this,cn,d),R(this,Tc,h||null),this.viewParameters={realScale:Xt.PDF_TO_CSS_UNITS,rotation:0}}static get _keyboardManager(){const e=Ic.prototype,t=d=>a(d,Hs).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&d.hasSomethingToControl(),i=(d,{target:h})=>{if(h instanceof HTMLInputElement){const{type:g}=h;return g!=="text"&&g!=="number"}return!0},r=this.TRANSLATE_SMALL,l=this.TRANSLATE_BIG;return be(this,"_keyboardManager",new Yo([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],e.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:i}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(d,{target:h})=>!(h instanceof HTMLButtonElement)&&a(d,Hs).contains(h)&&!d.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:d=>a(d,Hs).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-l,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[l,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-l],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,l],checker:t}]]))}destroy(){var e;S(this,Lc,pp).call(this),S(this,Dn,Om).call(this),this._eventBus._off("editingaction",a(this,Vd)),this._eventBus._off("pagechanging",a(this,cr)),this._eventBus._off("scalechanging",a(this,jd)),this._eventBus._off("rotationchanging",a(this,ia));for(const t of a(this,fi).values())t.destroy();a(this,fi).clear(),a(this,ni).clear(),a(this,Fn).clear(),R(this,si,null),a(this,Dt).clear(),a(this,Jt).destroy(),(e=a(this,as))==null||e.destroy(),a(this,Wi)&&(clearTimeout(a(this,Wi)),R(this,Wi,null)),a(this,sa)&&(clearTimeout(a(this,sa)),R(this,sa,null))}get hcmFilter(){return be(this,"hcmFilter",a(this,cn)?a(this,Dd).addHCMFilter(a(this,cn).foreground,a(this,cn).background):"none")}get direction(){return be(this,"direction",getComputedStyle(a(this,Hs)).direction)}get highlightColors(){return be(this,"highlightColors",a(this,Tc)?new Map(a(this,Tc).split(",").map(e=>e.split("=").map(t=>t.trim()))):null)}setMainHighlightColorPicker(e){R(this,ln,e)}editAltText(e){var t;(t=a(this,as))==null||t.editAltText(this,e)}onPageChanging({pageNumber:e}){R(this,os,e-1)}focusMainContainer(){a(this,Hs).focus()}findParent(e,t){for(const i of a(this,fi).values()){const{x:r,y:l,width:d,height:h}=i.div.getBoundingClientRect();if(e>=r&&e<=r+d&&t>=l&&t<=l+h)return i}return null}disableUserSelect(e=!1){a(this,Ud).classList.toggle("noUserSelect",e)}addShouldRescale(e){a(this,Fn).add(e)}removeShouldRescale(e){a(this,Fn).delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*Xt.PDF_TO_CSS_UNITS;for(const t of a(this,Fn))t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}addToAnnotationStorage(e){!e.isEmpty()&&a(this,Ds)&&!a(this,Ds).has(e.id)&&a(this,Ds).setValue(e.id,e)}blur(){if(!this.hasSelection)return;const{activeElement:e}=document;for(const t of a(this,Dt))if(t.div.contains(e)){R(this,bl,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!a(this,bl))return;const[e,t]=a(this,bl);R(this,bl,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0}),t.focus()}addEditListeners(){S(this,Wd,Nm).call(this),S(this,qd,Fm).call(this)}removeEditListeners(){S(this,Lc,pp).call(this),S(this,Gd,Dm).call(this)}copy(e){var i;if(e.preventDefault(),(i=a(this,si))==null||i.commitOrRemove(),!this.hasSelection)return;const t=[];for(const r of a(this,Dt)){const l=r.serialize(!0);l&&t.push(l)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}paste(e){e.preventDefault();const{clipboardData:t}=e;for(const l of t.items)for(const d of a(this,pi))if(d.isHandlingMimeForPasting(l.type)){d.paste(l,this.currentLayer);return}let i=t.getData("application/pdfjs");if(!i)return;try{i=JSON.parse(i)}catch(l){ce(`paste: "${l.message}".`);return}if(!Array.isArray(i))return;this.unselectAll();const r=this.currentLayer;try{const l=[];for(const g of i){const _=r.deserialize(g);if(!_)return;l.push(_)}const d=()=>{for(const g of l)S(this,ws,Bm).call(this,g);S(this,Fi,Vm).call(this,l)},h=()=>{for(const g of l)g.remove()};this.addCommands({cmd:d,undo:h,mustExec:!0})}catch(l){ce(`paste: "${l.message}".`)}}keydown(e){this.isEditorHandlingKeyboard||Ic._keyboardManager.exec(this,e)}onEditingAction(e){["undo","redo","delete","selectAll"].includes(e.name)&&this[e.name]()}setEditingState(e){e?(S(this,ja,by).call(this),S(this,Wd,Nm).call(this),S(this,qd,Fm).call(this),S(this,Us,Xn).call(this,{isEditing:a(this,Va)!==Ae.NONE,isEmpty:S(this,_l,ou).call(this),hasSomethingToUndo:a(this,Jt).hasSomethingToUndo(),hasSomethingToRedo:a(this,Jt).hasSomethingToRedo(),hasSelectedEditor:!1})):(S(this,Dn,Om).call(this),S(this,Lc,pp).call(this),S(this,Gd,Dm).call(this),S(this,Us,Xn).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!a(this,pi)){R(this,pi,e);for(const t of a(this,pi))S(this,wl,au).call(this,t.defaultPropertiesToUpdate)}}getId(){return a(this,Jr).getId()}get currentLayer(){return a(this,fi).get(a(this,os))}getLayer(e){return a(this,fi).get(e)}get currentPageIndex(){return a(this,os)}addLayer(e){a(this,fi).set(e.pageIndex,e),a(this,vo)?e.enable():e.disable()}removeLayer(e){a(this,fi).delete(e.pageIndex)}updateMode(e,t=null,i=!1){if(a(this,Va)!==e){if(R(this,Va,e),e===Ae.NONE){this.setEditingState(!1),S(this,ra,wy).call(this);return}this.setEditingState(!0),S(this,na,vy).call(this),this.unselectAll();for(const r of a(this,fi).values())r.updateMode(e);if(!t&&i){this.addNewEditorFromKeyboard();return}if(t){for(const r of a(this,ni).values())if(r.annotationElementId===t){this.setSelected(r),r.enterInEditMode();break}}}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e!==a(this,Va)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,t){var i;if(a(this,pi)){switch(e){case ge.CREATE:this.currentLayer.addNewEditor();return;case ge.HIGHLIGHT_DEFAULT_COLOR:(i=a(this,ln))==null||i.updateColor(t);break}for(const r of a(this,Dt))r.updateParams(e,t);for(const r of a(this,pi))r.updateDefaultParams(e,t)}}enableWaiting(e=!1){if(a(this,ea)!==e){R(this,ea,e);for(const t of a(this,fi).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}getEditors(e){const t=[];for(const i of a(this,ni).values())i.pageIndex===e&&t.push(i);return t}getEditor(e){return a(this,ni).get(e)}addEditor(e){a(this,ni).set(e.id,e)}removeEditor(e){var t;e.div.contains(document.activeElement)&&(a(this,Wi)&&clearTimeout(a(this,Wi)),R(this,Wi,setTimeout(()=>{this.focusMainContainer(),R(this,Wi,null)},0))),a(this,ni).delete(e.id),this.unselect(e),(!e.annotationElementId||!a(this,Bs).has(e.annotationElementId))&&((t=a(this,Ds))==null||t.remove(e.id))}addDeletedAnnotationElement(e){a(this,Bs).add(e.annotationElementId),e.deleted=!0}isDeletedAnnotationElement(e){return a(this,Bs).has(e)}removeDeletedAnnotationElement(e){a(this,Bs).delete(e.annotationElementId),e.deleted=!1}setActiveEditor(e){a(this,si)!==e&&(R(this,si,e),e&&S(this,wl,au).call(this,e.propertiesToUpdate))}toggleSelected(e){if(a(this,Dt).has(e)){a(this,Dt).delete(e),e.unselect(),S(this,Us,Xn).call(this,{hasSelectedEditor:this.hasSelection});return}a(this,Dt).add(e),e.select(),S(this,wl,au).call(this,e.propertiesToUpdate),S(this,Us,Xn).call(this,{hasSelectedEditor:!0})}setSelected(e){for(const t of a(this,Dt))t!==e&&t.unselect();a(this,Dt).clear(),a(this,Dt).add(e),e.select(),S(this,wl,au).call(this,e.propertiesToUpdate),S(this,Us,Xn).call(this,{hasSelectedEditor:!0})}isSelected(e){return a(this,Dt).has(e)}get firstSelectedEditor(){return a(this,Dt).values().next().value}unselect(e){e.unselect(),a(this,Dt).delete(e),S(this,Us,Xn).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return a(this,Dt).size!==0}get isEnterHandled(){return a(this,Dt).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){a(this,Jt).undo(),S(this,Us,Xn).call(this,{hasSomethingToUndo:a(this,Jt).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:S(this,_l,ou).call(this)})}redo(){a(this,Jt).redo(),S(this,Us,Xn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:a(this,Jt).hasSomethingToRedo(),isEmpty:S(this,_l,ou).call(this)})}addCommands(e){a(this,Jt).add(e),S(this,Us,Xn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:S(this,_l,ou).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const e=[...a(this,Dt)],t=()=>{for(const r of e)r.remove()},i=()=>{for(const r of e)S(this,ws,Bm).call(this,r)};this.addCommands({cmd:t,undo:i,mustExec:!0})}commitOrRemove(){var e;(e=a(this,si))==null||e.commitOrRemove()}hasSomethingToControl(){return a(this,si)||this.hasSelection}selectAll(){for(const e of a(this,Dt))e.commit();S(this,Fi,Vm).call(this,a(this,ni).values())}unselectAll(){if(!(a(this,si)&&(a(this,si).commitOrRemove(),a(this,Va)!==Ae.NONE))&&this.hasSelection){for(const e of a(this,Dt))e.unselect();a(this,Dt).clear(),S(this,Us,Xn).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,i=!1){if(i||this.commitOrRemove(),!this.hasSelection)return;a(this,vs)[0]+=e,a(this,vs)[1]+=t;const[r,l]=a(this,vs),d=[...a(this,Dt)],h=1e3;a(this,sa)&&clearTimeout(a(this,sa)),R(this,sa,setTimeout(()=>{R(this,sa,null),a(this,vs)[0]=a(this,vs)[1]=0,this.addCommands({cmd:()=>{for(const g of d)a(this,ni).has(g.id)&&g.translateInPage(r,l)},undo:()=>{for(const g of d)a(this,ni).has(g.id)&&g.translateInPage(-r,-l)},mustExec:!1})},h));for(const g of d)g.translateInPage(e,t)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),R(this,$t,new Map);for(const e of a(this,Dt))a(this,$t).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!a(this,$t))return!1;this.disableUserSelect(!1);const e=a(this,$t);R(this,$t,null);let t=!1;for(const[{x:r,y:l,pageIndex:d},h]of e)h.newX=r,h.newY=l,h.newPageIndex=d,t||(t=r!==h.savedX||l!==h.savedY||d!==h.savedPageIndex);if(!t)return!1;const i=(r,l,d,h)=>{if(a(this,ni).has(r.id)){const g=a(this,fi).get(h);g?r._setParentAndPosition(g,l,d):(r.pageIndex=h,r.x=l,r.y=d)}};return this.addCommands({cmd:()=>{for(const[r,{newX:l,newY:d,newPageIndex:h}]of e)i(r,l,d,h)},undo:()=>{for(const[r,{savedX:l,savedY:d,savedPageIndex:h}]of e)i(r,l,d,h)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(a(this,$t))for(const i of a(this,$t).keys())i.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||a(this,Dt).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return a(this,si)===e}getActive(){return a(this,si)}getMode(){return a(this,Va)}get imageManager(){return be(this,"imageManager",new Sd)}};si=new WeakMap,ni=new WeakMap,fi=new WeakMap,as=new WeakMap,Ds=new WeakMap,Jt=new WeakMap,os=new WeakMap,Bs=new WeakMap,$t=new WeakMap,pi=new WeakMap,Fn=new WeakMap,Dd=new WeakMap,Wi=new WeakMap,Tc=new WeakMap,Jr=new WeakMap,vo=new WeakMap,ea=new WeakMap,bl=new WeakMap,ln=new WeakMap,Va=new WeakMap,Dt=new WeakMap,cn=new WeakMap,or=new WeakMap,lr=new WeakMap,Vs=new WeakMap,js=new WeakMap,Bd=new WeakMap,ta=new WeakMap,Vd=new WeakMap,cr=new WeakMap,jd=new WeakMap,ia=new WeakMap,Hd=new WeakMap,vs=new WeakMap,sa=new WeakMap,Hs=new WeakMap,Ud=new WeakMap,ja=new WeakSet,by=function(){window.addEventListener("focus",a(this,lr)),window.addEventListener("blur",a(this,or))},Dn=new WeakSet,Om=function(){window.removeEventListener("focus",a(this,lr)),window.removeEventListener("blur",a(this,or))},Wd=new WeakSet,Nm=function(){window.addEventListener("keydown",a(this,ta))},Lc=new WeakSet,pp=function(){window.removeEventListener("keydown",a(this,ta))},qd=new WeakSet,Fm=function(){document.addEventListener("copy",a(this,Vs)),document.addEventListener("cut",a(this,js)),document.addEventListener("paste",a(this,Bd))},Gd=new WeakSet,Dm=function(){document.removeEventListener("copy",a(this,Vs)),document.removeEventListener("cut",a(this,js)),document.removeEventListener("paste",a(this,Bd))},Us=new WeakSet,Xn=function(e){Object.entries(e).some(([i,r])=>a(this,Hd)[i]!==r)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(a(this,Hd),e)})},wl=new WeakSet,au=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},na=new WeakSet,vy=function(){if(!a(this,vo)){R(this,vo,!0);for(const e of a(this,fi).values())e.enable()}},ra=new WeakSet,wy=function(){if(this.unselectAll(),a(this,vo)){R(this,vo,!1);for(const e of a(this,fi).values())e.disable()}},ws=new WeakSet,Bm=function(e){const t=a(this,fi).get(e.pageIndex);t?t.addOrRebuild(e):this.addEditor(e)},_l=new WeakSet,ou=function(){if(a(this,ni).size===0)return!0;if(a(this,ni).size===1)for(const e of a(this,ni).values())return e.isEmpty();return!1},Fi=new WeakSet,Vm=function(e){a(this,Dt).clear();for(const t of e)t.isEmpty()||(a(this,Dt).add(t),t.select());S(this,Us,Xn).call(this,{hasSelectedEditor:!0})},ke(Ic,"TRANSLATE_SMALL",1),ke(Ic,"TRANSLATE_BIG",10);let Qn=Ic;const Ha=class Ha{constructor(e){b(this,Zd);b(this,zs,"");b(this,wo,!1);b(this,Ei,null);b(this,gi,null);b(this,Si,null);b(this,_s,!1);b(this,$i,null);R(this,$i,e)}static initialize(e){Ha._l10nPromise||(Ha._l10nPromise=e)}async render(){const e=R(this,Ei,document.createElement("button"));e.className="altText";const t=await Ha._l10nPromise.get("pdfjs-editor-alt-text-button-label");e.textContent=t,e.setAttribute("aria-label",t),e.tabIndex="0",e.addEventListener("contextmenu",Oi),e.addEventListener("pointerdown",r=>r.stopPropagation());const i=r=>{r.preventDefault(),a(this,$i)._uiManager.editAltText(a(this,$i))};return e.addEventListener("click",i,{capture:!0}),e.addEventListener("keydown",r=>{r.target===e&&r.key==="Enter"&&(R(this,_s,!0),i(r))}),await S(this,Zd,jm).call(this),e}finish(){a(this,Ei)&&(a(this,Ei).focus({focusVisible:a(this,_s)}),R(this,_s,!1))}get data(){return{altText:a(this,zs),decorative:a(this,wo)}}set data({altText:e,decorative:t}){a(this,zs)===e&&a(this,wo)===t||(R(this,zs,e),R(this,wo,t),S(this,Zd,jm).call(this))}toggle(e=!1){a(this,Ei)&&(!e&&a(this,Si)&&(clearTimeout(a(this,Si)),R(this,Si,null)),a(this,Ei).disabled=!e)}destroy(){var e;(e=a(this,Ei))==null||e.remove(),R(this,Ei,null),R(this,gi,null)}};zs=new WeakMap,wo=new WeakMap,Ei=new WeakMap,gi=new WeakMap,Si=new WeakMap,_s=new WeakMap,$i=new WeakMap,Zd=new WeakSet,jm=async function(){var r;const e=a(this,Ei);if(!e)return;if(!a(this,zs)&&!a(this,wo)){e.classList.remove("done"),(r=a(this,gi))==null||r.remove();return}e.classList.add("done"),Ha._l10nPromise.get("pdfjs-editor-alt-text-edit-button-label").then(l=>{e.setAttribute("aria-label",l)});let t=a(this,gi);if(!t){R(this,gi,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip");const l=t.id=`alt-text-tooltip-${a(this,$i).id}`;e.setAttribute("aria-describedby",l);const d=100;e.addEventListener("mouseenter",()=>{R(this,Si,setTimeout(()=>{R(this,Si,null),a(this,gi).classList.add("show"),a(this,$i)._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:a(this,$i).editorType,data:{action:"alt_text_tooltip"}}})},d))}),e.addEventListener("mouseleave",()=>{var h;a(this,Si)&&(clearTimeout(a(this,Si)),R(this,Si,null)),(h=a(this,gi))==null||h.classList.remove("show")})}t.innerText=a(this,wo)?await Ha._l10nPromise.get("pdfjs-editor-alt-text-decorative-tooltip"):a(this,zs),t.parentNode||e.append(t);const i=a(this,$i).getImageForAltText();i==null||i.setAttribute("aria-describedby",t.id)},ke(Ha,"_l10nPromise",null);let hc=Ha;const hr=class hr{constructor(e){b(this,Qu);b(this,ef);b(this,qs);b(this,hn);b(this,un);b(this,Ws,null);b(this,dn,null);b(this,qi,void 0);b(this,$s,null);R(this,qi,e)}render(){const e=R(this,Ws,document.createElement("div"));e.className="editToolbar",e.addEventListener("contextmenu",Oi),e.addEventListener("pointerdown",S(hr,dr,_y));const t=R(this,$s,document.createElement("div"));t.className="buttons",e.append(t);const i=a(this,qi).toolbarPosition;if(i){const{style:r}=e,l=a(this,qi)._uiManager.direction==="ltr"?1-i[0]:i[0];r.insetInlineEnd=`${100*l}%`,r.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`}return S(this,hn,Sy).call(this),e}hide(){var e;a(this,Ws).classList.add("hidden"),(e=a(this,dn))==null||e.hideDropdown()}show(){a(this,Ws).classList.remove("hidden")}addAltTextButton(e){S(this,qs,gp).call(this,e),a(this,$s).prepend(e,a(this,un,Hm))}addColorPicker(e){R(this,dn,e);const t=e.renderButton();S(this,qs,gp).call(this,t),a(this,$s).prepend(t,a(this,un,Hm))}remove(){var e;a(this,Ws).remove(),(e=a(this,dn))==null||e.destroy(),R(this,dn,null)}};Ws=new WeakMap,dn=new WeakMap,qi=new WeakMap,$s=new WeakMap,dr=new WeakSet,_y=function(e){e.stopPropagation()},Qu=new WeakSet,yy=function(e){a(this,qi)._focusEventsAllowed=!1,e.preventDefault(),e.stopPropagation()},ef=new WeakSet,Ey=function(e){a(this,qi)._focusEventsAllowed=!0,e.preventDefault(),e.stopPropagation()},qs=new WeakSet,gp=function(e){e.addEventListener("focusin",S(this,Qu,yy).bind(this),{capture:!0}),e.addEventListener("focusout",S(this,ef,Ey).bind(this),{capture:!0}),e.addEventListener("contextmenu",Oi)},hn=new WeakSet,Sy=function(){const e=document.createElement("button");e.className="delete",e.tabIndex=0,e.setAttribute("data-l10n-id",`pdfjs-editor-remove-${a(this,qi).editorType}-button`),S(this,qs,gp).call(this,e),e.addEventListener("click",t=>{a(this,qi)._uiManager.delete()}),a(this,$s).append(e)},un=new WeakSet,Hm=function(){const e=document.createElement("div");return e.className="divider",e},b(hr,dr);let Cd=hr;const qt=class qt{constructor(e){b(this,ca);b(this,pr);b(this,gr);b(this,pn);b(this,da);b(this,bi);b(this,mr);b(this,br);b(this,Ks);b(this,ha);b(this,Vn);b(this,mn);b(this,ua);b(this,jn);b(this,Ai,null);b(this,mi,null);b(this,Gs,!1);b(this,Gi,null);b(this,fn,null);b(this,Oc,this.focusin.bind(this));b(this,Bn,this.focusout.bind(this));b(this,ls,null);b(this,ur,"");b(this,El,!1);b(this,fr,!1);b(this,Sl,!1);b(this,ys,!1);b(this,oa,null);ke(this,"_initialOptions",Object.create(null));ke(this,"_uiManager",null);ke(this,"_focusEventsAllowed",!0);ke(this,"_l10nPromise",null);b(this,la,!1);b(this,tf,qt._zIndex++);this.constructor===qt&&W("Cannot initialize AnnotationEditor."),this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;const{rotation:t,rawDims:{pageWidth:i,pageHeight:r,pageX:l,pageY:d}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,r],this.pageTranslation=[l,d];const[h,g]=this.parentDimensions;this.x=e.x/h,this.y=e.y/g,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=qt.prototype._resizeWithKeyboard,t=Qn.TRANSLATE_SMALL,i=Qn.TRANSLATE_BIG;return be(this,"_resizerKeyboardManager",new Yo([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,i]}],[["Escape","mac+Escape"],qt.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return be(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new Kp({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t=null){if(qt._l10nPromise||(qt._l10nPromise=new Map(["pdfjs-editor-alt-text-button-label","pdfjs-editor-alt-text-edit-button-label","pdfjs-editor-alt-text-decorative-tooltip","pdfjs-editor-resizer-label-topLeft","pdfjs-editor-resizer-label-topMiddle","pdfjs-editor-resizer-label-topRight","pdfjs-editor-resizer-label-middleRight","pdfjs-editor-resizer-label-bottomRight","pdfjs-editor-resizer-label-bottomMiddle","pdfjs-editor-resizer-label-bottomLeft","pdfjs-editor-resizer-label-middleLeft"].map(r=>[r,e.get(r.replaceAll(/([A-Z])/g,l=>`-${l.toLowerCase()}`))]))),t!=null&&t.strings)for(const r of t.strings)qt._l10nPromise.set(r,e.get(r));if(qt._borderLineWidth!==-1)return;const i=getComputedStyle(document.documentElement);qt._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){W("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return a(this,la)}set _isDraggable(e){var t;R(this,la,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=a(this,tf)}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):S(this,jn,lu).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(a(this,El)?R(this,El,!1):this.parent.setSelected(this))}focusout(e){var i;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(i=this.parent)!=null&&i.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,i,r){const[l,d]=this.parentDimensions;[i,r]=this.screenToPageTranslation(i,r),this.x=(e+i)/l,this.y=(t+r)/d,this.fixAndSetPosition()}translate(e,t){S(this,ca,Um).call(this,this.parentDimensions,e,t)}translateInPage(e,t){S(this,ca,Um).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}drag(e,t){const[i,r]=this.parentDimensions;if(this.x+=e/i,this.y+=t/r,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:_,y:w}=this.div.getBoundingClientRect();this.parent.findNewParent(this,_,w)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:l,y:d}=this;const[h,g]=S(this,pr,zm).call(this);l+=h,d+=g,this.div.style.left=`${(100*l).toFixed(2)}%`,this.div.style.top=`${(100*d).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(e=this.rotation){const[t,i]=this.pageDimensions;let{x:r,y:l,width:d,height:h}=this;switch(d*=t,h*=i,r*=t,l*=i,e){case 0:r=Math.max(0,Math.min(t-d,r)),l=Math.max(0,Math.min(i-h,l));break;case 90:r=Math.max(0,Math.min(t-h,r)),l=Math.min(i,Math.max(d,l));break;case 180:r=Math.min(t,Math.max(d,r)),l=Math.min(i,Math.max(h,l));break;case 270:r=Math.min(t,Math.max(h,r)),l=Math.max(0,Math.min(i-d,l));break}this.x=r/=t,this.y=l/=i;const[g,_]=S(this,pr,zm).call(this);r+=g,l+=_;const{style:w}=this.div;w.left=`${(100*r).toFixed(2)}%`,w.top=`${(100*l).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var i;return S(i=qt,Es,Wm).call(i,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var i;return S(i=qt,Es,Wm).call(i,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,i]}=this,r=t*e,l=i*e;return fe.isCSSRoundSupported?[Math.round(r),Math.round(l)]:[r,l]}setDims(e,t){const[i,r]=this.parentDimensions;this.div.style.width=`${(100*e/i).toFixed(2)}%`,a(this,Gs)||(this.div.style.height=`${(100*t/r).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:i}=e,r=i.endsWith("%"),l=!a(this,Gs)&&t.endsWith("%");if(r&&l)return;const[d,h]=this.parentDimensions;r||(e.width=`${(100*parseFloat(i)/d).toFixed(2)}%`),!a(this,Gs)&&!l&&(e.height=`${(100*parseFloat(t)/h).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}altTextFinish(){var e;(e=a(this,mi))==null||e.finish()}async addEditToolbar(){return a(this,ls)||a(this,Sl)?a(this,ls):(R(this,ls,new Cd(this)),this.div.append(a(this,ls).render()),a(this,mi)&&a(this,ls).addAltTextButton(await a(this,mi).render()),a(this,ls))}removeEditToolbar(){var e;a(this,ls)&&(a(this,ls).remove(),R(this,ls,null),(e=a(this,mi))==null||e.destroy())}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){a(this,mi)||(hc.initialize(qt._l10nPromise),R(this,mi,new hc(this)),await this.addEditToolbar())}get altTextData(){var e;return(e=a(this,mi))==null?void 0:e.data}set altTextData(e){a(this,mi)&&(a(this,mi).data=e)}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",a(this,Oc)),this.div.addEventListener("focusout",a(this,Bn));const[e,t]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*t/e).toFixed(2)}%`,this.div.style.maxHeight=`${(100*e/t).toFixed(2)}%`);const[i,r]=this.getInitialTranslation();return this.translate(i,r),Xo(this,this.div,["pointerdown"]),this.div}pointerdown(e){const{isMac:t}=fe.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(R(this,El,!0),this._isDraggable){S(this,Ks,Py).call(this,e);return}S(this,br,Km).call(this,e)}moveInDOM(){a(this,oa)&&clearTimeout(a(this,oa)),R(this,oa,setTimeout(()=>{var e;R(this,oa,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,i){e.changeParent(this),this.x=t,this.y=i,this.fixAndSetPosition()}getRect(e,t,i=this.rotation){const r=this.parentScale,[l,d]=this.pageDimensions,[h,g]=this.pageTranslation,_=e/r,w=t/r,L=this.x*l,M=this.y*d,N=this.width*l,F=this.height*d;switch(i){case 0:return[L+_+h,d-M-w-F+g,L+_+N+h,d-M-w+g];case 90:return[L+w+h,d-M+_+g,L+w+F+h,d-M+_+N+g];case 180:return[L-_-N+h,d-M+w+g,L-_+h,d-M+w+F+g];case 270:return[L-w-F+h,d-M-_-N+g,L-w+h,d-M-_+g];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[i,r,l,d]=e,h=l-i,g=d-r;switch(this.rotation){case 0:return[i,t-d,h,g];case 90:return[i,t-r,g,h];case 180:return[l,t-r,h,g];case 270:return[l,t-d,g,h];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){R(this,Sl,!0)}disableEditMode(){R(this,Sl,!1)}isInEditMode(){return a(this,Sl)}shouldGetKeyboardEvents(){return a(this,ys)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var e,t;(e=this.div)==null||e.addEventListener("focusin",a(this,Oc)),(t=this.div)==null||t.addEventListener("focusout",a(this,Bn))}rotate(e){}serialize(e=!1,t=null){W("An editor must be serializable")}static deserialize(e,t,i){const r=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:i});r.rotation=e.rotation;const[l,d]=r.pageDimensions,[h,g,_,w]=r.getRectInCurrentCoords(e.rect,d);return r.x=h/l,r.y=g/d,r.width=_/l,r.height=w/d,r}remove(){this.div.removeEventListener("focusin",a(this,Oc)),this.div.removeEventListener("focusout",a(this,Bn)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),a(this,oa)&&(clearTimeout(a(this,oa)),R(this,oa,null)),S(this,jn,lu).call(this),this.removeEditToolbar()}get isResizable(){return!1}makeResizable(){this.isResizable&&(S(this,pn,Ay).call(this),a(this,Gi).classList.remove("hidden"),Xo(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),R(this,fn,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=a(this,Gi).children;if(!a(this,Ai)){R(this,Ai,Array.from(t));const d=S(this,ha,xy).bind(this),h=S(this,Vn,Ty).bind(this);for(const g of a(this,Ai)){const _=g.getAttribute("data-resizer-name");g.setAttribute("role","spinbutton"),g.addEventListener("keydown",d),g.addEventListener("blur",h),g.addEventListener("focus",S(this,mn,Ly).bind(this,_)),qt._l10nPromise.get(`pdfjs-editor-resizer-label-${_}`).then(w=>g.setAttribute("aria-label",w))}}const i=a(this,Ai)[0];let r=0;for(const d of t){if(d===i)break;r++}const l=(360-this.rotation+this.parentRotation)%360/90*(a(this,Ai).length/4);if(l!==r){if(l<r)for(let h=0;h<r-l;h++)a(this,Gi).append(a(this,Gi).firstChild);else if(l>r)for(let h=0;h<l-r;h++)a(this,Gi).firstChild.before(a(this,Gi).lastChild);let d=0;for(const h of t){const _=a(this,Ai)[d++].getAttribute("data-resizer-name");qt._l10nPromise.get(`pdfjs-editor-resizer-label-${_}`).then(w=>h.setAttribute("aria-label",w))}}S(this,ua,Xm).call(this,0),R(this,ys,!0),a(this,Gi).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){a(this,ys)&&S(this,mr,Gm).call(this,a(this,ur),{movementX:e,movementY:t})}_stopResizingWithKeyboard(){S(this,jn,lu).call(this),this.div.focus()}select(){var e,t;if(this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!a(this,ls)){this.addEditToolbar().then(()=>{var i,r;(i=this.div)!=null&&i.classList.contains("selectedEditor")&&((r=a(this,ls))==null||r.show())});return}(t=a(this,ls))==null||t.show()}unselect(){var e,t,i,r;(e=a(this,Gi))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(i=this.div)!=null&&i.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus(),(r=a(this,ls))==null||r.hide()}updateParams(e,t){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return a(this,fr)}set isEditing(e){R(this,fr,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){R(this,Gs,!0);const i=e/t,{style:r}=this.div;r.aspectRatio=i,r.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}};Ai=new WeakMap,mi=new WeakMap,Gs=new WeakMap,Gi=new WeakMap,fn=new WeakMap,Oc=new WeakMap,Bn=new WeakMap,ls=new WeakMap,ur=new WeakMap,El=new WeakMap,fr=new WeakMap,Sl=new WeakMap,ys=new WeakMap,oa=new WeakMap,la=new WeakMap,tf=new WeakMap,ca=new WeakSet,Um=function([e,t],i,r){[i,r]=this.screenToPageTranslation(i,r),this.x+=i/e,this.y+=r/t,this.fixAndSetPosition()},pr=new WeakSet,zm=function(){const[e,t]=this.parentDimensions,{_borderLineWidth:i}=qt,r=i/e,l=i/t;switch(this.rotation){case 90:return[-r,l];case 180:return[r,l];case 270:return[r,-l];default:return[-r,-l]}},Es=new WeakSet,Wm=function(e,t,i){switch(i){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},gr=new WeakSet,$m=function(e){switch(e){case 90:{const[t,i]=this.pageDimensions;return[0,-t/i,i/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,i]=this.pageDimensions;return[0,t/i,-i/t,0]}default:return[1,0,0,1]}},pn=new WeakSet,Ay=function(){if(a(this,Gi))return;R(this,Gi,document.createElement("div")),a(this,Gi).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"];for(const t of e){const i=document.createElement("div");a(this,Gi).append(i),i.classList.add("resizer",t),i.setAttribute("data-resizer-name",t),i.addEventListener("pointerdown",S(this,da,Cy).bind(this,t)),i.addEventListener("contextmenu",Oi),i.tabIndex=-1}this.div.prepend(a(this,Gi))},da=new WeakSet,Cy=function(e,t){var F;t.preventDefault();const{isMac:i}=fe.platform;if(t.button!==0||t.ctrlKey&&i)return;(F=a(this,mi))==null||F.toggle(!1);const r=S(this,mr,Gm).bind(this,e),l=this._isDraggable;this._isDraggable=!1;const d={passive:!0,capture:!0};this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",r,d);const h=this.x,g=this.y,_=this.width,w=this.height,L=this.parent.div.style.cursor,M=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const N=()=>{var z;this.parent.togglePointerEvents(!0),(z=a(this,mi))==null||z.toggle(!0),this._isDraggable=l,window.removeEventListener("pointerup",N),window.removeEventListener("blur",N),window.removeEventListener("pointermove",r,d),this.parent.div.style.cursor=L,this.div.style.cursor=M,S(this,bi,qm).call(this,h,g,_,w)};window.addEventListener("pointerup",N),window.addEventListener("blur",N)},bi=new WeakSet,qm=function(e,t,i,r){const l=this.x,d=this.y,h=this.width,g=this.height;l===e&&d===t&&h===i&&g===r||this.addCommands({cmd:()=>{this.width=h,this.height=g,this.x=l,this.y=d;const[_,w]=this.parentDimensions;this.setDims(_*h,w*g),this.fixAndSetPosition()},undo:()=>{this.width=i,this.height=r,this.x=e,this.y=t;const[_,w]=this.parentDimensions;this.setDims(_*i,w*r),this.fixAndSetPosition()},mustExec:!0})},mr=new WeakSet,Gm=function(e,t){const[i,r]=this.parentDimensions,l=this.x,d=this.y,h=this.width,g=this.height,_=qt.MIN_SIZE/i,w=qt.MIN_SIZE/r,L=ft=>Math.round(ft*1e4)/1e4,M=S(this,gr,$m).call(this,this.rotation),N=(ft,It)=>[M[0]*ft+M[2]*It,M[1]*ft+M[3]*It],F=S(this,gr,$m).call(this,360-this.rotation),z=(ft,It)=>[F[0]*ft+F[2]*It,F[1]*ft+F[3]*It];let ie,K,we=!1,ue=!1;switch(e){case"topLeft":we=!0,ie=(ft,It)=>[0,0],K=(ft,It)=>[ft,It];break;case"topMiddle":ie=(ft,It)=>[ft/2,0],K=(ft,It)=>[ft/2,It];break;case"topRight":we=!0,ie=(ft,It)=>[ft,0],K=(ft,It)=>[0,It];break;case"middleRight":ue=!0,ie=(ft,It)=>[ft,It/2],K=(ft,It)=>[0,It/2];break;case"bottomRight":we=!0,ie=(ft,It)=>[ft,It],K=(ft,It)=>[0,0];break;case"bottomMiddle":ie=(ft,It)=>[ft/2,It],K=(ft,It)=>[ft/2,0];break;case"bottomLeft":we=!0,ie=(ft,It)=>[0,It],K=(ft,It)=>[ft,0];break;case"middleLeft":ue=!0,ie=(ft,It)=>[0,It/2],K=(ft,It)=>[ft,It/2];break}const pe=ie(h,g),Te=K(h,g);let je=N(...Te);const rt=L(l+je[0]),lt=L(d+je[1]);let pt=1,Ht=1,[Mt,ai]=this.screenToPageTranslation(t.movementX,t.movementY);if([Mt,ai]=z(Mt/i,ai/r),we){const ft=Math.hypot(h,g);pt=Ht=Math.max(Math.min(Math.hypot(Te[0]-pe[0]-Mt,Te[1]-pe[1]-ai)/ft,1/h,1/g),_/h,w/g)}else ue?pt=Math.max(_,Math.min(1,Math.abs(Te[0]-pe[0]-Mt)))/h:Ht=Math.max(w,Math.min(1,Math.abs(Te[1]-pe[1]-ai)))/g;const Ci=L(h*pt),Ji=L(g*Ht);je=N(...K(Ci,Ji));const ii=rt-je[0],Ps=lt-je[1];this.width=Ci,this.height=Ji,this.x=ii,this.y=Ps,this.setDims(i*Ci,r*Ji),this.fixAndSetPosition()},br=new WeakSet,Km=function(e){const{isMac:t}=fe.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},Ks=new WeakSet,Py=function(e){const t=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let i,r;t&&(i={passive:!0,capture:!0},r=d=>{const[h,g]=this.screenToPageTranslation(d.movementX,d.movementY);this._uiManager.dragSelectedEditors(h,g)},window.addEventListener("pointermove",r,i));const l=()=>{window.removeEventListener("pointerup",l),window.removeEventListener("blur",l),t&&window.removeEventListener("pointermove",r,i),R(this,El,!1),this._uiManager.endDragSession()||S(this,br,Km).call(this,e)};window.addEventListener("pointerup",l),window.addEventListener("blur",l)},ha=new WeakSet,xy=function(e){qt._resizerKeyboardManager.exec(this,e)},Vn=new WeakSet,Ty=function(e){var t;a(this,ys)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==a(this,Gi)&&S(this,jn,lu).call(this)},mn=new WeakSet,Ly=function(e){R(this,ur,a(this,ys)?e:"")},ua=new WeakSet,Xm=function(e){if(a(this,Ai))for(const t of a(this,Ai))t.tabIndex=e},jn=new WeakSet,lu=function(){if(R(this,ys,!1),S(this,ua,Xm).call(this,-1),a(this,fn)){const{savedX:e,savedY:t,savedWidth:i,savedHeight:r}=a(this,fn);S(this,bi,qm).call(this,e,t,i,r),R(this,fn,null)}},b(qt,Es),ke(qt,"_borderLineWidth",-1),ke(qt,"_colorManager",new Ad),ke(qt,"_zIndex",1);let Vt=qt;class Kp extends Vt{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}const Pd=3285377520,Rs=4294901760,Ln=65535;class Jn{constructor(e){this.h1=e?e&4294967295:Pd,this.h2=e?e&4294967295:Pd}update(e){let t,i;if(typeof e=="string"){t=new Uint8Array(e.length*2),i=0;for(let z=0,ie=e.length;z<ie;z++){const K=e.charCodeAt(z);K<=255?t[i++]=K:(t[i++]=K>>>8,t[i++]=K&255)}}else if(Me(e))t=e.slice(),i=t.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const r=i>>2,l=i-r*4,d=new Uint32Array(t.buffer,0,r);let h=0,g=0,_=this.h1,w=this.h2;const L=3432918353,M=461845907,N=L&Ln,F=M&Ln;for(let z=0;z<r;z++)z&1?(h=d[z],h=h*L&Rs|h*N&Ln,h=h<<15|h>>>17,h=h*M&Rs|h*F&Ln,_^=h,_=_<<13|_>>>19,_=_*5+3864292196):(g=d[z],g=g*L&Rs|g*N&Ln,g=g<<15|g>>>17,g=g*M&Rs|g*F&Ln,w^=g,w=w<<13|w>>>19,w=w*5+3864292196);switch(h=0,l){case 3:h^=t[r*4+2]<<16;case 2:h^=t[r*4+1]<<8;case 1:h^=t[r*4],h=h*L&Rs|h*N&Ln,h=h<<15|h>>>17,h=h*M&Rs|h*F&Ln,r&1?_^=h:w^=h}this.h1=_,this.h2=w}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&Rs|e*36045&Ln,t=t*4283543511&Rs|((t<<16|e>>>16)*2950163797&Rs)>>>16,e^=t>>>1,e=e*444984403&Rs|e*60499&Ln,t=t*3301882366&Rs|((t<<16|e>>>16)*3120437893&Rs)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const Pa=Object.freeze({map:null,hash:"",transfer:void 0});class xd{constructor(){b(this,nf);b(this,xl,!1);b(this,ri,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const i=a(this,ri).get(e);return i===void 0?t:Object.assign(t,i)}getRawValue(e){return a(this,ri).get(e)}remove(e){if(a(this,ri).delete(e),a(this,ri).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const t of a(this,ri).values())if(t instanceof Vt)return;this.onAnnotationEditor(null)}}setValue(e,t){const i=a(this,ri).get(e);let r=!1;if(i!==void 0)for(const[l,d]of Object.entries(t))i[l]!==d&&(r=!0,i[l]=d);else r=!0,a(this,ri).set(e,t);r&&S(this,nf,Ry).call(this),t instanceof Vt&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return a(this,ri).has(e)}getAll(){return a(this,ri).size>0?V(a(this,ri)):null}setAll(e){for(const[t,i]of Object.entries(e))this.setValue(t,i)}get size(){return a(this,ri).size}resetModified(){a(this,xl)&&(R(this,xl,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new Mu(this)}get serializable(){if(a(this,ri).size===0)return Pa;const e=new Map,t=new Jn,i=[],r=Object.create(null);let l=!1;for(const[d,h]of a(this,ri)){const g=h instanceof Vt?h.serialize(!1,r):h;g&&(e.set(d,g),t.update(`${d}:${JSON.stringify(g)}`),l||(l=!!g.bitmap))}if(l)for(const d of e.values())d.bitmap&&i.push(d.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:i}:Pa}}xl=new WeakMap,ri=new WeakMap,nf=new WeakSet,Ry=function(){a(this,xl)||(R(this,xl,!0),typeof this.onSetModified=="function"&&this.onSetModified())};class Mu extends xd{constructor(t){super();b(this,th,void 0);const{map:i,hash:r,transfer:l}=t.serializable,d=structuredClone(i,l?{transfer:l}:null);R(this,th,{map:d,hash:r,transfer:l})}get print(){W("Should not call PrintAnnotationStorage.print")}get serializable(){return a(this,th)}}th=new WeakMap;class Xp{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){b(this,vr,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),a(this,vr).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,_inspectFont:t}){if(!(!e||a(this,vr).has(e.loadedName))){if(ne(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:r,style:l}=e,d=new FontFace(i,r,l);this.addNativeFontFace(d);try{await d.load(),a(this,vr).add(i),t==null||t(e)}catch{ce(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(d)}return}W("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const i=e.createNativeFontFace();if(i){this.addNativeFontFace(i);try{await i.loaded}catch(r){throw ce(`Failed to load font '${i.family}': '${r}'.`),e.disableFontFace=!0,r}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(i=>{const r=this._queueLoadingCallback(i);this._prepareFontLoadEvent(e,r)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return be(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){let e=!1;return(y||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(e=!0),be(this,"isSyncFontLoadingSupported",e)}_queueLoadingCallback(e){function t(){for(ne(!r.done,"completeRequest() cannot be called twice."),r.done=!0;i.length>0&&i[0].done;){const l=i.shift();setTimeout(l.callback,0)}}const{loadingRequests:i}=this,r={done:!1,complete:t,callback:e};return i.push(r),r}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return be(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function i(pe,Te){return pe.charCodeAt(Te)<<24|pe.charCodeAt(Te+1)<<16|pe.charCodeAt(Te+2)<<8|pe.charCodeAt(Te+3)&255}function r(pe,Te,je,rt){const lt=pe.substring(0,Te),pt=pe.substring(Te+je);return lt+rt+pt}let l,d;const h=this._document.createElement("canvas");h.width=1,h.height=1;const g=h.getContext("2d");let _=0;function w(pe,Te){if(++_>30){ce("Load test font never loaded."),Te();return}if(g.font="30px "+pe,g.fillText(".",0,20),g.getImageData(0,0,1,1).data[3]>0){Te();return}setTimeout(w.bind(null,pe,Te))}const L=`lt${Date.now()}${this.loadTestFontId++}`;let M=this._loadTestFont;M=r(M,976,L.length,L);const F=16,z=1482184792;let ie=i(M,F);for(l=0,d=L.length-3;l<d;l+=4)ie=ie-z+i(L,l)|0;l<L.length&&(ie=ie-z+i(L+"XXX",l)|0),M=r(M,F,4,Nt(ie));const K=`url(data:font/opentype;base64,${btoa(M)});`,we=`@font-face {font-family:"${L}";src:${K}}`;this.insertRule(we);const ue=this._document.createElement("div");ue.style.visibility="hidden",ue.style.width=ue.style.height="10px",ue.style.position="absolute",ue.style.top=ue.style.left="0px";for(const pe of[e.loadedName,L]){const Te=this._document.createElement("span");Te.textContent="Hi",Te.style.fontFamily=pe,ue.append(Te)}this._document.body.append(ue),w(L,()=>{ue.remove(),t.complete()})}}vr=new WeakMap;class Iu{constructor(e,{isEvalSupported:t=!0,disableFontFace:i=!1,ignoreErrors:r=!1,inspectFont:l=null}){this.compiledGlyphs=Object.create(null);for(const d in e)this[d]=e[d];this.isEvalSupported=t!==!1,this.disableFontFace=i===!0,this.ignoreErrors=r===!0,this._inspectFont=l}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const i={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(i.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,i)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var r;if(!this.data||this.disableFontFace)return null;const e=Ze(this.data),t=`url(data:${this.mimetype};base64,${btoa(e)});`;let i;if(!this.cssFontInfo)i=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let l=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(l+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),i=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${l}src:${t}}`}return(r=this._inspectFont)==null||r.call(this,this,t),i}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];let i;try{i=e.get(this.loadedName+"_path_"+t)}catch(r){if(!this.ignoreErrors)throw r;return ce(`getPathGenerator - ignoring character: "${r}".`),this.compiledGlyphs[t]=function(l,d){}}if(this.isEvalSupported&&fe.isEvalSupported){const r=[];for(const l of i){const d=l.args!==void 0?l.args.join(","):"";r.push("c.",l.cmd,"(",d,`);
`)}return this.compiledGlyphs[t]=new Function("c","size",r.join(""))}return this.compiledGlyphs[t]=function(r,l){for(const d of i)d.cmd==="scale"&&(d.args=[l,-l]),r[d.cmd].apply(r,d.args)}}}const Yp=null,Zp=null,Td=null,Qp=null,Jp=null,Hi={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Ld(v,e){if(!e)return;const t=e[2]-e[0],i=e[3]-e[1],r=new Path2D;r.rect(e[0],e[1],t,i),v.clip(r)}class Zo{constructor(){this.constructor===Zo&&W("Cannot initialize BaseShadingPattern.")}getPattern(){W("Abstract method `getPattern` called.")}}class eg extends Zo{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const i of this._colorStops)t.addColorStop(i[0],i[1]);return t}getPattern(e,t,i,r){let l;if(r===Hi.STROKE||r===Hi.FILL){const d=t.current.getClippedPathBoundingBox(r,Ft(e))||[0,0,0,0],h=Math.ceil(d[2]-d[0])||1,g=Math.ceil(d[3]-d[1])||1,_=t.cachedCanvases.getCanvas("pattern",h,g,!0),w=_.context;w.clearRect(0,0,w.canvas.width,w.canvas.height),w.beginPath(),w.rect(0,0,w.canvas.width,w.canvas.height),w.translate(-d[0],-d[1]),i=J.transform(i,[1,0,0,1,d[0],d[1]]),w.transform(...t.baseTransform),this.matrix&&w.transform(...this.matrix),Ld(w,this._bbox),w.fillStyle=this._createGradient(w),w.fill(),l=e.createPattern(_.canvas,"no-repeat");const L=new DOMMatrix(i);l.setTransform(L)}else Ld(e,this._bbox),l=this._createGradient(e);return l}}function uc(v,e,t,i,r,l,d,h){const g=e.coords,_=e.colors,w=v.data,L=v.width*4;let M;g[t+1]>g[i+1]&&(M=t,t=i,i=M,M=l,l=d,d=M),g[i+1]>g[r+1]&&(M=i,i=r,r=M,M=d,d=h,h=M),g[t+1]>g[i+1]&&(M=t,t=i,i=M,M=l,l=d,d=M);const N=(g[t]+e.offsetX)*e.scaleX,F=(g[t+1]+e.offsetY)*e.scaleY,z=(g[i]+e.offsetX)*e.scaleX,ie=(g[i+1]+e.offsetY)*e.scaleY,K=(g[r]+e.offsetX)*e.scaleX,we=(g[r+1]+e.offsetY)*e.scaleY;if(F>=we)return;const ue=_[l],pe=_[l+1],Te=_[l+2],je=_[d],rt=_[d+1],lt=_[d+2],pt=_[h],Ht=_[h+1],Mt=_[h+2],ai=Math.round(F),Ci=Math.round(we);let Ji,ii,Ps,ft,It,Vf,jf,nd;for(let Sn=ai;Sn<=Ci;Sn++){if(Sn<ie){const wi=Sn<F?0:(F-Sn)/(F-ie);Ji=N-(N-z)*wi,ii=ue-(ue-je)*wi,Ps=pe-(pe-rt)*wi,ft=Te-(Te-lt)*wi}else{let wi;Sn>we?wi=1:ie===we?wi=0:wi=(ie-Sn)/(ie-we),Ji=z-(z-K)*wi,ii=je-(je-pt)*wi,Ps=rt-(rt-Ht)*wi,ft=lt-(lt-Mt)*wi}let es;Sn<F?es=0:Sn>we?es=1:es=(F-Sn)/(F-we),It=N-(N-K)*es,Vf=ue-(ue-pt)*es,jf=pe-(pe-Ht)*es,nd=Te-(Te-Mt)*es;const Do=Math.round(Math.min(Ji,It)),bg=Math.round(Math.max(Ji,It));let Bo=L*Sn+Do*4;for(let wi=Do;wi<=bg;wi++)es=(Ji-wi)/(Ji-It),es<0?es=0:es>1&&(es=1),w[Bo++]=ii-(ii-Vf)*es|0,w[Bo++]=Ps-(Ps-jf)*es|0,w[Bo++]=ft-(ft-nd)*es|0,w[Bo++]=255}}function Qo(v,e,t){const i=e.coords,r=e.colors;let l,d;switch(e.type){case"lattice":const h=e.verticesPerRow,g=Math.floor(i.length/h)-1,_=h-1;for(l=0;l<g;l++){let w=l*h;for(let L=0;L<_;L++,w++)uc(v,t,i[w],i[w+1],i[w+h],r[w],r[w+1],r[w+h]),uc(v,t,i[w+h+1],i[w+1],i[w+h],r[w+h+1],r[w+1],r[w+h])}break;case"triangles":for(l=0,d=i.length;l<d;l+=3)uc(v,t,i[l],i[l+1],i[l+2],r[l],r[l+1],r[l+2]);break;default:throw new Error("illegal figure")}}class ku extends Zo{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}_createMeshCanvas(e,t,i){const h=Math.floor(this._bounds[0]),g=Math.floor(this._bounds[1]),_=Math.ceil(this._bounds[2])-h,w=Math.ceil(this._bounds[3])-g,L=Math.min(Math.ceil(Math.abs(_*e[0]*1.1)),3e3),M=Math.min(Math.ceil(Math.abs(w*e[1]*1.1)),3e3),N=_/L,F=w/M,z={coords:this._coords,colors:this._colors,offsetX:-h,offsetY:-g,scaleX:1/N,scaleY:1/F},ie=L+2*2,K=M+2*2,we=i.getCanvas("mesh",ie,K,!1),ue=we.context,pe=ue.createImageData(L,M);if(t){const je=pe.data;for(let rt=0,lt=je.length;rt<lt;rt+=4)je[rt]=t[0],je[rt+1]=t[1],je[rt+2]=t[2],je[rt+3]=255}for(const je of this._figures)Qo(pe,je,z);return ue.putImageData(pe,2,2),{canvas:we.canvas,offsetX:h-2*N,offsetY:g-2*F,scaleX:N,scaleY:F}}getPattern(e,t,i,r){Ld(e,this._bbox);let l;if(r===Hi.SHADING)l=J.singularValueDecompose2dScale(Ft(e));else if(l=J.singularValueDecompose2dScale(t.baseTransform),this.matrix){const h=J.singularValueDecompose2dScale(this.matrix);l=[l[0]*h[0],l[1]*h[1]]}const d=this._createMeshCanvas(l,r===Hi.SHADING?null:this._background,t.cachedCanvases);return r!==Hi.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(d.offsetX,d.offsetY),e.scale(d.scaleX,d.scaleY),e.createPattern(d.canvas,"no-repeat")}}class tg extends Zo{getPattern(){return"hotpink"}}function ig(v){switch(v[0]){case"RadialAxial":return new eg(v);case"Mesh":return new ku(v);case"Dummy":return new tg}throw new Error(`Unknown IR type: ${v[0]}`)}const Ou={COLORED:1,UNCOLORED:2},rf=class rf{constructor(e,t,i,r,l){this.operatorList=e[2],this.matrix=e[3]||[1,0,0,1,0,0],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=t,this.ctx=i,this.canvasGraphicsFactory=r,this.baseTransform=l}createPatternCanvas(e){const t=this.operatorList,i=this.bbox,r=this.xstep,l=this.ystep,d=this.paintType,h=this.tilingType,g=this.color,_=this.canvasGraphicsFactory;Tt("TilingType: "+h);const w=i[0],L=i[1],M=i[2],N=i[3],F=J.singularValueDecompose2dScale(this.matrix),z=J.singularValueDecompose2dScale(this.baseTransform),ie=[F[0]*z[0],F[1]*z[1]],K=this.getSizeAndScale(r,this.ctx.canvas.width,ie[0]),we=this.getSizeAndScale(l,this.ctx.canvas.height,ie[1]),ue=e.cachedCanvases.getCanvas("pattern",K.size,we.size,!0),pe=ue.context,Te=_.createCanvasGraphics(pe);Te.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(Te,d,g);let je=w,rt=L,lt=M,pt=N;return w<0&&(je=0,lt+=Math.abs(w)),L<0&&(rt=0,pt+=Math.abs(L)),pe.translate(-(K.scale*je),-(we.scale*rt)),Te.transform(K.scale,0,0,we.scale,0,0),pe.save(),this.clipBbox(Te,je,rt,lt,pt),Te.baseTransform=Ft(Te.ctx),Te.executeOperatorList(t),Te.endDrawing(),{canvas:ue.canvas,scaleX:K.scale,scaleY:we.scale,offsetX:je,offsetY:rt}}getSizeAndScale(e,t,i){e=Math.abs(e);const r=Math.max(rf.MAX_PATTERN_SIZE,t);let l=Math.ceil(e*i);return l>=r?l=r:i=l/e,{scale:i,size:l}}clipBbox(e,t,i,r,l){const d=r-t,h=l-i;e.ctx.rect(t,i,d,h),e.current.updateRectMinMax(Ft(e.ctx),[t,i,r,l]),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,i){const r=e.ctx,l=e.current;switch(t){case Ou.COLORED:const d=this.ctx;r.fillStyle=d.fillStyle,r.strokeStyle=d.strokeStyle,l.fillColor=d.fillStyle,l.strokeColor=d.strokeStyle;break;case Ou.UNCOLORED:const h=J.makeHexColor(i[0],i[1],i[2]);r.fillStyle=h,r.strokeStyle=h,l.fillColor=h,l.strokeColor=h;break;default:throw new We(`Unsupported paint type: ${t}`)}}getPattern(e,t,i,r){let l=i;r!==Hi.SHADING&&(l=J.transform(l,t.baseTransform),this.matrix&&(l=J.transform(l,this.matrix)));const d=this.createPatternCanvas(t);let h=new DOMMatrix(l);h=h.translate(d.offsetX,d.offsetY),h=h.scale(1/d.scaleX,1/d.scaleY);const g=e.createPattern(d.canvas,"repeat");return g.setTransform(h),g}};ke(rf,"MAX_PATTERN_SIZE",3e3);let Rd=rf;function sg({src:v,srcPos:e=0,dest:t,width:i,height:r,nonBlackColor:l=4294967295,inverseDecode:d=!1}){const h=fe.isLittleEndian?4278190080:255,[g,_]=d?[l,h]:[h,l],w=i>>3,L=i&7,M=v.length;t=new Uint32Array(t.buffer);let N=0;for(let F=0;F<r;F++){for(const ie=e+w;e<ie;e++){const K=e<M?v[e]:255;t[N++]=K&128?_:g,t[N++]=K&64?_:g,t[N++]=K&32?_:g,t[N++]=K&16?_:g,t[N++]=K&8?_:g,t[N++]=K&4?_:g,t[N++]=K&2?_:g,t[N++]=K&1?_:g}if(L===0)continue;const z=e<M?v[e++]:255;for(let ie=0;ie<L;ie++)t[N++]=z&1<<7-ie?_:g}return{srcPos:e,destPos:N}}const Nu=16,Fu=100,lo=4096,Md=15,fc=10,Du=1e3,Ui=16;function Bu(v,e){if(v._removeMirroring)throw new Error("Context is already forwarding operations.");v.__originalSave=v.save,v.__originalRestore=v.restore,v.__originalRotate=v.rotate,v.__originalScale=v.scale,v.__originalTranslate=v.translate,v.__originalTransform=v.transform,v.__originalSetTransform=v.setTransform,v.__originalResetTransform=v.resetTransform,v.__originalClip=v.clip,v.__originalMoveTo=v.moveTo,v.__originalLineTo=v.lineTo,v.__originalBezierCurveTo=v.bezierCurveTo,v.__originalRect=v.rect,v.__originalClosePath=v.closePath,v.__originalBeginPath=v.beginPath,v._removeMirroring=()=>{v.save=v.__originalSave,v.restore=v.__originalRestore,v.rotate=v.__originalRotate,v.scale=v.__originalScale,v.translate=v.__originalTranslate,v.transform=v.__originalTransform,v.setTransform=v.__originalSetTransform,v.resetTransform=v.__originalResetTransform,v.clip=v.__originalClip,v.moveTo=v.__originalMoveTo,v.lineTo=v.__originalLineTo,v.bezierCurveTo=v.__originalBezierCurveTo,v.rect=v.__originalRect,v.closePath=v.__originalClosePath,v.beginPath=v.__originalBeginPath,delete v._removeMirroring},v.save=function(){e.save(),this.__originalSave()},v.restore=function(){e.restore(),this.__originalRestore()},v.translate=function(i,r){e.translate(i,r),this.__originalTranslate(i,r)},v.scale=function(i,r){e.scale(i,r),this.__originalScale(i,r)},v.transform=function(i,r,l,d,h,g){e.transform(i,r,l,d,h,g),this.__originalTransform(i,r,l,d,h,g)},v.setTransform=function(i,r,l,d,h,g){e.setTransform(i,r,l,d,h,g),this.__originalSetTransform(i,r,l,d,h,g)},v.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},v.rotate=function(i){e.rotate(i),this.__originalRotate(i)},v.clip=function(i){e.clip(i),this.__originalClip(i)},v.moveTo=function(t,i){e.moveTo(t,i),this.__originalMoveTo(t,i)},v.lineTo=function(t,i){e.lineTo(t,i),this.__originalLineTo(t,i)},v.bezierCurveTo=function(t,i,r,l,d,h){e.bezierCurveTo(t,i,r,l,d,h),this.__originalBezierCurveTo(t,i,r,l,d,h)},v.rect=function(t,i,r,l){e.rect(t,i,r,l),this.__originalRect(t,i,r,l)},v.closePath=function(){e.closePath(),this.__originalClosePath()},v.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class ng{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,i){let r;return this.cache[e]!==void 0?(r=this.cache[e],this.canvasFactory.reset(r,t,i)):(r=this.canvasFactory.create(t,i),this.cache[e]=r),r}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function co(v,e,t,i,r,l,d,h,g,_){const[w,L,M,N,F,z]=Ft(v);if(L===0&&M===0){const we=d*w+F,ue=Math.round(we),pe=h*N+z,Te=Math.round(pe),je=(d+g)*w+F,rt=Math.abs(Math.round(je)-ue)||1,lt=(h+_)*N+z,pt=Math.abs(Math.round(lt)-Te)||1;return v.setTransform(Math.sign(w),0,0,Math.sign(N),ue,Te),v.drawImage(e,t,i,r,l,0,0,rt,pt),v.setTransform(w,L,M,N,F,z),[rt,pt]}if(w===0&&N===0){const we=h*M+F,ue=Math.round(we),pe=d*L+z,Te=Math.round(pe),je=(h+_)*M+F,rt=Math.abs(Math.round(je)-ue)||1,lt=(d+g)*L+z,pt=Math.abs(Math.round(lt)-Te)||1;return v.setTransform(0,Math.sign(L),Math.sign(M),0,ue,Te),v.drawImage(e,t,i,r,l,0,0,pt,rt),v.setTransform(w,L,M,N,F,z),[pt,rt]}v.drawImage(e,t,i,r,l,d,h,g,_);const ie=Math.hypot(w,L),K=Math.hypot(M,N);return[ie*g,K*_]}function He(v){const{width:e,height:t}=v;if(e>Du||t>Du)return null;const i=1e3,r=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),l=e+1;let d=new Uint8Array(l*(t+1)),h,g,_;const w=e+7&-8;let L=new Uint8Array(w*t),M=0;for(const K of v.data){let we=128;for(;we>0;)L[M++]=K&we?0:255,we>>=1}let N=0;for(M=0,L[M]!==0&&(d[0]=1,++N),g=1;g<e;g++)L[M]!==L[M+1]&&(d[g]=L[M]?2:1,++N),M++;for(L[M]!==0&&(d[g]=2,++N),h=1;h<t;h++){M=h*w,_=h*l,L[M-w]!==L[M]&&(d[_]=L[M]?1:8,++N);let K=(L[M]?4:0)+(L[M-w]?8:0);for(g=1;g<e;g++)K=(K>>2)+(L[M+1]?4:0)+(L[M-w+1]?8:0),r[K]&&(d[_+g]=r[K],++N),M++;if(L[M-w]!==L[M]&&(d[_+g]=L[M]?2:4,++N),N>i)return null}for(M=w*(t-1),_=h*l,L[M]!==0&&(d[_]=8,++N),g=1;g<e;g++)L[M]!==L[M+1]&&(d[_+g]=L[M]?4:8,++N),M++;if(L[M]!==0&&(d[_+g]=4,++N),N>i)return null;const F=new Int32Array([0,l,-1,0,-l,0,0,0,1]),z=new Path2D;for(h=0;N&&h<=t;h++){let K=h*l;const we=K+e;for(;K<we&&!d[K];)K++;if(K===we)continue;z.moveTo(K%l,h);const ue=K;let pe=d[K];do{const Te=F[pe];do K+=Te;while(!d[K]);const je=d[K];je!==5&&je!==10?(pe=je,d[K]=0):(pe=je&51*pe>>4,d[K]&=pe>>2|pe<<2),z.lineTo(K%l,K/l|0),d[K]||--N}while(ue!==K);--h}return L=null,d=null,function(K){K.save(),K.scale(1/e,-1/t),K.translate(0,-t),K.fill(z),K.beginPath(),K.restore()}}class Vr{constructor(e,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=C,this.textMatrixScale=1,this.fontMatrix=U,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=ze.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,t])}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,t){this.x=e,this.y=t}updatePathMinMax(e,t,i){[t,i]=J.applyTransform([t,i],e),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,i),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,i)}updateRectMinMax(e,t){const i=J.applyTransform(t,e),r=J.applyTransform(t.slice(2),e),l=J.applyTransform([t[0],t[3]],e),d=J.applyTransform([t[2],t[1]],e);this.minX=Math.min(this.minX,i[0],r[0],l[0],d[0]),this.minY=Math.min(this.minY,i[1],r[1],l[1],d[1]),this.maxX=Math.max(this.maxX,i[0],r[0],l[0],d[0]),this.maxY=Math.max(this.maxY,i[1],r[1],l[1],d[1])}updateScalingPathMinMax(e,t){J.scaleMinMax(e,t),this.minX=Math.min(this.minX,t[0]),this.maxX=Math.max(this.maxX,t[1]),this.minY=Math.min(this.minY,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(e,t,i,r,l,d,h,g,_,w){const L=J.bezierBoundingBox(t,i,r,l,d,h,g,_);if(w){w[0]=Math.min(w[0],L[0],L[2]),w[1]=Math.max(w[1],L[0],L[2]),w[2]=Math.min(w[2],L[1],L[3]),w[3]=Math.max(w[3],L[1],L[3]);return}this.updateRectMinMax(e,L)}getPathBoundingBox(e=Hi.FILL,t=null){const i=[this.minX,this.minY,this.maxX,this.maxY];if(e===Hi.STROKE){t||W("Stroke bounding box must include transform.");const r=J.singularValueDecompose2dScale(t),l=r[0]*this.lineWidth/2,d=r[1]*this.lineWidth/2;i[0]-=l,i[1]-=d,i[2]+=l,i[3]+=d}return i}updateClipFromPath(){const e=J.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(e=Hi.FILL,t=null){return J.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function Vu(v,e){if(typeof ImageData<"u"&&e instanceof ImageData){v.putImageData(e,0,0);return}const t=e.height,i=e.width,r=t%Ui,l=(t-r)/Ui,d=r===0?l:l+1,h=v.createImageData(i,Ui);let g=0,_;const w=e.data,L=h.data;let M,N,F,z;if(e.kind===at.GRAYSCALE_1BPP){const ie=w.byteLength,K=new Uint32Array(L.buffer,0,L.byteLength>>2),we=K.length,ue=i+7>>3,pe=4294967295,Te=fe.isLittleEndian?4278190080:255;for(M=0;M<d;M++){for(F=M<l?Ui:r,_=0,N=0;N<F;N++){const je=ie-g;let rt=0;const lt=je>ue?i:je*8-7,pt=lt&-8;let Ht=0,Mt=0;for(;rt<pt;rt+=8)Mt=w[g++],K[_++]=Mt&128?pe:Te,K[_++]=Mt&64?pe:Te,K[_++]=Mt&32?pe:Te,K[_++]=Mt&16?pe:Te,K[_++]=Mt&8?pe:Te,K[_++]=Mt&4?pe:Te,K[_++]=Mt&2?pe:Te,K[_++]=Mt&1?pe:Te;for(;rt<lt;rt++)Ht===0&&(Mt=w[g++],Ht=128),K[_++]=Mt&Ht?pe:Te,Ht>>=1}for(;_<we;)K[_++]=0;v.putImageData(h,0,M*Ui)}}else if(e.kind===at.RGBA_32BPP){for(N=0,z=i*Ui*4,M=0;M<l;M++)L.set(w.subarray(g,g+z)),g+=z,v.putImageData(h,0,N),N+=Ui;M<d&&(z=i*r*4,L.set(w.subarray(g,g+z)),v.putImageData(h,0,N))}else if(e.kind===at.RGB_24BPP)for(F=Ui,z=i*F,M=0;M<d;M++){for(M>=l&&(F=r,z=i*F),_=0,N=z;N--;)L[_++]=w[g++],L[_++]=w[g++],L[_++]=w[g++],L[_++]=255;v.putImageData(h,0,M*Ui)}else throw new Error(`bad image kind: ${e.kind}`)}function ju(v,e){if(e.bitmap){v.drawImage(e.bitmap,0,0);return}const t=e.height,i=e.width,r=t%Ui,l=(t-r)/Ui,d=r===0?l:l+1,h=v.createImageData(i,Ui);let g=0;const _=e.data,w=h.data;for(let L=0;L<d;L++){const M=L<l?Ui:r;({srcPos:g}=sg({src:_,srcPos:g,dest:w,width:i,height:M,nonBlackColor:0})),v.putImageData(h,0,L*Ui)}}function Jo(v,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of t)v[i]!==void 0&&(e[i]=v[i]);v.setLineDash!==void 0&&(e.setLineDash(v.getLineDash()),e.lineDashOffset=v.lineDashOffset)}function ho(v){if(v.strokeStyle=v.fillStyle="#000000",v.fillRule="nonzero",v.globalAlpha=1,v.lineWidth=1,v.lineCap="butt",v.lineJoin="miter",v.miterLimit=10,v.globalCompositeOperation="source-over",v.font="10px sans-serif",v.setLineDash!==void 0&&(v.setLineDash([]),v.lineDashOffset=0),!y){const{filter:e}=v;e!=="none"&&e!==""&&(v.filter="none")}}function rg(v,e,t,i){const r=v.length;for(let l=3;l<r;l+=4){const d=v[l];if(d===0)v[l-3]=e,v[l-2]=t,v[l-1]=i;else if(d<255){const h=255-d;v[l-3]=v[l-3]*d+e*h>>8,v[l-2]=v[l-2]*d+t*h>>8,v[l-1]=v[l-1]*d+i*h>>8}}}function ag(v,e,t){const i=v.length,r=1/255;for(let l=3;l<i;l+=4){const d=t?t[v[l]]:v[l];e[l]=e[l]*d*r|0}}function xa(v,e,t){const i=v.length;for(let r=3;r<i;r+=4){const l=v[r-3]*77+v[r-2]*152+v[r-1]*28;e[r]=t?e[r]*t[l>>8]>>8:e[r]*l>>16}}function el(v,e,t,i,r,l,d,h,g,_,w){const L=!!l,M=L?l[0]:0,N=L?l[1]:0,F=L?l[2]:0,z=r==="Luminosity"?xa:ag,K=Math.min(i,Math.ceil(1048576/t));for(let we=0;we<i;we+=K){const ue=Math.min(K,i-we),pe=v.getImageData(h-_,we+(g-w),t,ue),Te=e.getImageData(h,we+g,t,ue);L&&rg(pe.data,M,N,F),z(pe.data,Te.data,d),e.putImageData(Te,h,we+g)}}function Hu(v,e,t,i){const r=i[0],l=i[1],d=i[2]-r,h=i[3]-l;d===0||h===0||(el(e.context,t,d,h,e.subtype,e.backdrop,e.transferMap,r,l,e.offsetX,e.offsetY),v.save(),v.globalAlpha=1,v.globalCompositeOperation="source-over",v.setTransform(1,0,0,1,0,0),v.drawImage(t.canvas,0,0),v.restore())}function Uu(v,e){const t=J.singularValueDecompose2dScale(v);t[0]=Math.fround(t[0]),t[1]=Math.fround(t[1]);const i=Math.fround((globalThis.devicePixelRatio||1)*Xt.PDF_TO_CSS_UNITS);return e!==void 0?e:t[0]<=i||t[1]<=i}const og=["butt","round","square"],lg=["miter","round","bevel"],cg={},Ta={},Ss=class Ss{constructor(e,t,i,r,l,{optionalContentConfig:d,markedContentStack:h=null},g,_){b(this,wr);b(this,fa);this.ctx=e,this.current=new Vr(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=i,this.canvasFactory=r,this.filterFactory=l,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=h||[],this.optionalContentConfig=d,this.cachedCanvases=new ng(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=g,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=_,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:i=!1,background:r=null}){const l=this.ctx.canvas.width,d=this.ctx.canvas.height,h=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,l,d),this.ctx.fillStyle=h,i){const g=this.cachedCanvases.getCanvas("transparent",l,d);this.compositeCtx=this.ctx,this.transparentCanvas=g.canvas,this.ctx=g.context,this.ctx.save(),this.ctx.transform(...Ft(this.compositeCtx))}this.ctx.save(),ho(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=Ft(this.ctx)}executeOperatorList(e,t,i,r){const l=e.argsArray,d=e.fnArray;let h=t||0;const g=l.length;if(g===h)return h;const _=g-h>fc&&typeof i=="function",w=_?Date.now()+Md:0;let L=0;const M=this.commonObjs,N=this.objs;let F;for(;;){if(r!==void 0&&h===r.nextBreakPoint)return r.breakIt(h,i),h;if(F=d[h],F!==Ce.dependency)this[F].apply(this,l[h]);else for(const z of l[h]){const ie=z.startsWith("g_")?M:N;if(!ie.has(z))return ie.get(z,i),h}if(h++,h===g)return h;if(_&&++L>fc){if(Date.now()>w)return i(),h;L=0}}}endDrawing(){S(this,wr,Ym).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),S(this,fa,Zm).call(this)}_scaleImage(e,t){const i=e.width,r=e.height;let l=Math.max(Math.hypot(t[0],t[1]),1),d=Math.max(Math.hypot(t[2],t[3]),1),h=i,g=r,_="prescale1",w,L;for(;l>2&&h>1||d>2&&g>1;){let M=h,N=g;l>2&&h>1&&(M=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h/2),l/=h/M),d>2&&g>1&&(N=g>=16384?Math.floor(g/2)-1||1:Math.ceil(g)/2,d/=g/N),w=this.cachedCanvases.getCanvas(_,M,N),L=w.context,L.clearRect(0,0,M,N),L.drawImage(e,0,0,h,g,0,0,M,N),e=w.canvas,h=M,g=N,_=_==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:h,paintHeight:g}}_createMaskCanvas(e){const t=this.ctx,{width:i,height:r}=e,l=this.current.fillColor,d=this.current.patternFill,h=Ft(t);let g,_,w,L;if((e.bitmap||e.data)&&e.count>1){const lt=e.bitmap||e.data.buffer;_=JSON.stringify(d?h:[h.slice(0,4),l]),g=this._cachedBitmapsMap.get(lt),g||(g=new Map,this._cachedBitmapsMap.set(lt,g));const pt=g.get(_);if(pt&&!d){const Ht=Math.round(Math.min(h[0],h[2])+h[4]),Mt=Math.round(Math.min(h[1],h[3])+h[5]);return{canvas:pt,offsetX:Ht,offsetY:Mt}}w=pt}w||(L=this.cachedCanvases.getCanvas("maskCanvas",i,r),ju(L.context,e));let M=J.transform(h,[1/i,0,0,-1/r,0,0]);M=J.transform(M,[1,0,0,1,0,-r]);const[N,F,z,ie]=J.getAxialAlignedBoundingBox([0,0,i,r],M),K=Math.round(z-N)||1,we=Math.round(ie-F)||1,ue=this.cachedCanvases.getCanvas("fillCanvas",K,we),pe=ue.context,Te=N,je=F;pe.translate(-Te,-je),pe.transform(...M),w||(w=this._scaleImage(L.canvas,ji(pe)),w=w.img,g&&d&&g.set(_,w)),pe.imageSmoothingEnabled=Uu(Ft(pe),e.interpolate),co(pe,w,0,0,w.width,w.height,0,0,i,r),pe.globalCompositeOperation="source-in";const rt=J.transform(ji(pe),[1,0,0,1,-Te,-je]);return pe.fillStyle=d?l.getPattern(t,this,rt,Hi.FILL):l,pe.fillRect(0,0,i,r),g&&!d&&(this.cachedCanvases.delete("fillCanvas"),g.set(_,ue.canvas)),{canvas:ue.canvas,offsetX:Math.round(Te),offsetY:Math.round(je)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=og[e]}setLineJoin(e){this.ctx.lineJoin=lg[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(e),i.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,i]of e)switch(t){case"LW":this.setLineWidth(i);break;case"LC":this.setLineCap(i);break;case"LJ":this.setLineJoin(i);break;case"ML":this.setMiterLimit(i);break;case"D":this.setDash(i[0],i[1]);break;case"RI":this.setRenderingIntent(i);break;case"FL":this.setFlatness(i);break;case"Font":this.setFont(i[0],i[1]);break;case"CA":this.current.strokeAlpha=i;break;case"ca":this.current.fillAlpha=i,this.ctx.globalAlpha=i;break;case"BM":this.ctx.globalCompositeOperation=i;break;case"SMask":this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(i,e,t);this.suspendedCtx=this.ctx,this.ctx=r.context;const l=this.ctx;l.setTransform(...Ft(this.suspendedCtx)),Jo(this.suspendedCtx,l),Bu(l,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Jo(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,i=this.suspendedCtx;Hu(i,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(Jo(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),Jo(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,t,i,r,l,d){this.ctx.transform(e,t,i,r,l,d),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,i){const r=this.ctx,l=this.current;let d=l.x,h=l.y,g,_;const w=Ft(r),L=w[0]===0&&w[3]===0||w[1]===0&&w[2]===0,M=L?i.slice(0):null;for(let N=0,F=0,z=e.length;N<z;N++)switch(e[N]|0){case Ce.rectangle:d=t[F++],h=t[F++];const ie=t[F++],K=t[F++],we=d+ie,ue=h+K;r.moveTo(d,h),ie===0||K===0?r.lineTo(we,ue):(r.lineTo(we,h),r.lineTo(we,ue),r.lineTo(d,ue)),L||l.updateRectMinMax(w,[d,h,we,ue]),r.closePath();break;case Ce.moveTo:d=t[F++],h=t[F++],r.moveTo(d,h),L||l.updatePathMinMax(w,d,h);break;case Ce.lineTo:d=t[F++],h=t[F++],r.lineTo(d,h),L||l.updatePathMinMax(w,d,h);break;case Ce.curveTo:g=d,_=h,d=t[F+4],h=t[F+5],r.bezierCurveTo(t[F],t[F+1],t[F+2],t[F+3],d,h),l.updateCurvePathMinMax(w,g,_,t[F],t[F+1],t[F+2],t[F+3],d,h,M),F+=6;break;case Ce.curveTo2:g=d,_=h,r.bezierCurveTo(d,h,t[F],t[F+1],t[F+2],t[F+3]),l.updateCurvePathMinMax(w,g,_,d,h,t[F],t[F+1],t[F+2],t[F+3],M),d=t[F+2],h=t[F+3],F+=4;break;case Ce.curveTo3:g=d,_=h,d=t[F+2],h=t[F+3],r.bezierCurveTo(t[F],t[F+1],d,h,d,h),l.updateCurvePathMinMax(w,g,_,t[F],t[F+1],d,h,d,h,M),F+=4;break;case Ce.closePath:r.closePath();break}L&&l.updateScalingPathMinMax(w,M),l.setCurrentPoint(d,h)}closePath(){this.ctx.closePath()}stroke(e=!0){const t=this.ctx,i=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof i=="object"&&(i!=null&&i.getPattern)?(t.save(),t.strokeStyle=i.getPattern(t,this,ji(t),Hi.STROKE),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(e=!0){const t=this.ctx,i=this.current.fillColor,r=this.current.patternFill;let l=!1;r&&(t.save(),t.fillStyle=i.getPattern(t,this,ji(t),Hi.FILL),l=!0);const d=this.current.getClippedPathBoundingBox();this.contentVisible&&d!==null&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),l&&t.restore(),e&&this.consumePath(d)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=cg}eoClip(){this.pendingClip=Ta}beginText(){this.current.textMatrix=C,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(e===void 0){t.beginPath();return}t.save(),t.beginPath();for(const i of e)t.setTransform(...i.transform),t.translate(i.x,i.y),i.addToPath(t,i.fontSize);t.restore(),t.clip(),t.beginPath(),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){var w;const i=this.commonObjs.get(e),r=this.current;if(!i)throw new Error(`Can't find font for ${e}`);if(r.fontMatrix=i.fontMatrix||U,(r.fontMatrix[0]===0||r.fontMatrix[3]===0)&&ce("Invalid font matrix for font "+e),t<0?(t=-t,r.fontDirection=-1):r.fontDirection=1,this.current.font=i,this.current.fontSize=t,i.isType3Font)return;const l=i.loadedName||"sans-serif",d=((w=i.systemFontInfo)==null?void 0:w.css)||`"${l}", ${i.fallbackName}`;let h="normal";i.black?h="900":i.bold&&(h="bold");const g=i.italic?"italic":"normal";let _=t;t<Nu?_=Nu:t>Fu&&(_=Fu),this.current.fontSizeScale=t/_,this.ctx.font=`${g} ${h} ${_}px ${d}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e,t,i,r,l,d){this.current.textMatrix=[e,t,i,r,l,d],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,i,r){const l=this.ctx,d=this.current,h=d.font,g=d.textRenderingMode,_=d.fontSize/d.fontSizeScale,w=g&ze.FILL_STROKE_MASK,L=!!(g&ze.ADD_TO_PATH_FLAG),M=d.patternFill&&!h.missingFile;let N;(h.disableFontFace||L||M)&&(N=h.getPathGenerator(this.commonObjs,e)),h.disableFontFace||M?(l.save(),l.translate(t,i),l.beginPath(),N(l,_),r&&l.setTransform(...r),(w===ze.FILL||w===ze.FILL_STROKE)&&l.fill(),(w===ze.STROKE||w===ze.FILL_STROKE)&&l.stroke(),l.restore()):((w===ze.FILL||w===ze.FILL_STROKE)&&l.fillText(e,t,i),(w===ze.STROKE||w===ze.FILL_STROKE)&&l.strokeText(e,t,i)),L&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Ft(l),x:t,y:i,fontSize:_,addToPath:N})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let i=!1;for(let r=3;r<t.length;r+=4)if(t[r]>0&&t[r]<255){i=!0;break}return be(this,"isFontSubpixelAAEnabled",i)}showText(e){const t=this.current,i=t.font;if(i.isType3Font)return this.showType3Text(e);const r=t.fontSize;if(r===0)return;const l=this.ctx,d=t.fontSizeScale,h=t.charSpacing,g=t.wordSpacing,_=t.fontDirection,w=t.textHScale*_,L=e.length,M=i.vertical,N=M?1:-1,F=i.defaultVMetrics,z=r*t.fontMatrix[0],ie=t.textRenderingMode===ze.FILL&&!i.disableFontFace&&!t.patternFill;l.save(),l.transform(...t.textMatrix),l.translate(t.x,t.y+t.textRise),_>0?l.scale(w,-1):l.scale(w,1);let K;if(t.patternFill){l.save();const je=t.fillColor.getPattern(l,this,ji(l),Hi.FILL);K=Ft(l),l.restore(),l.fillStyle=je}let we=t.lineWidth;const ue=t.textMatrixScale;if(ue===0||we===0){const je=t.textRenderingMode&ze.FILL_STROKE_MASK;(je===ze.STROKE||je===ze.FILL_STROKE)&&(we=this.getSinglePixelWidth())}else we/=ue;if(d!==1&&(l.scale(d,d),we/=d),l.lineWidth=we,i.isInvalidPDFjsFont){const je=[];let rt=0;for(const lt of e)je.push(lt.unicode),rt+=lt.width;l.fillText(je.join(""),0,0),t.x+=rt*z*w,l.restore(),this.compose();return}let pe=0,Te;for(Te=0;Te<L;++Te){const je=e[Te];if(typeof je=="number"){pe+=N*je*r/1e3;continue}let rt=!1;const lt=(je.isSpace?g:0)+h,pt=je.fontChar,Ht=je.accent;let Mt,ai,Ci=je.width;if(M){const ii=je.vmetric||F,Ps=-(je.vmetric?ii[1]:Ci*.5)*z,ft=ii[2]*z;Ci=ii?-ii[0]:Ci,Mt=Ps/d,ai=(pe+ft)/d}else Mt=pe/d,ai=0;if(i.remeasure&&Ci>0){const ii=l.measureText(pt).width*1e3/r*d;if(Ci<ii&&this.isFontSubpixelAAEnabled){const Ps=Ci/ii;rt=!0,l.save(),l.scale(Ps,1),Mt/=Ps}else Ci!==ii&&(Mt+=(Ci-ii)/2e3*r/d)}if(this.contentVisible&&(je.isInFont||i.missingFile)){if(ie&&!Ht)l.fillText(pt,Mt,ai);else if(this.paintChar(pt,Mt,ai,K),Ht){const ii=Mt+r*Ht.offset.x/d,Ps=ai-r*Ht.offset.y/d;this.paintChar(Ht.fontChar,ii,Ps,K)}}const Ji=M?Ci*z-lt*_:Ci*z+lt*_;pe+=Ji,rt&&l.restore()}M?t.y-=pe:t.x+=pe*w,l.restore(),this.compose()}showType3Text(e){const t=this.ctx,i=this.current,r=i.font,l=i.fontSize,d=i.fontDirection,h=r.vertical?1:-1,g=i.charSpacing,_=i.wordSpacing,w=i.textHScale*d,L=i.fontMatrix||U,M=e.length,N=i.textRenderingMode===ze.INVISIBLE;let F,z,ie,K;if(!(N||l===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),t.transform(...i.textMatrix),t.translate(i.x,i.y),t.scale(w,d),F=0;F<M;++F){if(z=e[F],typeof z=="number"){K=h*z*l/1e3,this.ctx.translate(K,0),i.x+=K*w;continue}const we=(z.isSpace?_:0)+g,ue=r.charProcOperatorList[z.operatorListId];if(!ue){ce(`Type3 character "${z.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=z,this.save(),t.scale(l,l),t.transform(...L),this.executeOperatorList(ue),this.restore()),ie=J.applyTransform([z.width,0],L)[0]*l+we,t.translate(ie,0),i.x+=ie*w}t.restore(),this.processingType3=null}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,i,r,l,d){this.ctx.rect(i,r,l-i,d-r),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let t;if(e[0]==="TilingPattern"){const i=e[1],r=this.baseTransform||Ft(this.ctx),l={createCanvasGraphics:d=>new Ss(d,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new Rd(e,i,this.ctx,l,r)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,t,i){const r=J.makeHexColor(e,t,i);this.ctx.strokeStyle=r,this.current.strokeColor=r}setFillRGBColor(e,t,i){const r=J.makeHexColor(e,t,i);this.ctx.fillStyle=r,this.current.fillColor=r,this.current.patternFill=!1}_getPattern(e,t=null){let i;return this.cachedPatterns.has(e)?i=this.cachedPatterns.get(e):(i=ig(this.getObject(e)),this.cachedPatterns.set(e,i)),t&&(i.matrix=t),i}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const i=this._getPattern(e);t.fillStyle=i.getPattern(t,this,ji(t),Hi.SHADING);const r=ji(t);if(r){const{width:l,height:d}=t.canvas,[h,g,_,w]=J.getAxialAlignedBoundingBox([0,0,l,d],r);this.ctx.fillRect(h,g,_-h,w-g)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){W("Should not call beginInlineImage")}beginImageData(){W("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(e)&&e.length===6&&this.transform(...e),this.baseTransform=Ft(this.ctx),t)){const i=t[2]-t[0],r=t[3]-t[1];this.ctx.rect(t[0],t[1],i,r),this.current.updateRectMinMax(Ft(this.ctx),t),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||Tt("TODO: Support non-isolated groups."),e.knockout&&ce("Knockout groups not supported.");const i=Ft(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let r=J.getAxialAlignedBoundingBox(e.bbox,Ft(t));const l=[0,0,t.canvas.width,t.canvas.height];r=J.intersect(r,l)||[0,0,0,0];const d=Math.floor(r[0]),h=Math.floor(r[1]);let g=Math.max(Math.ceil(r[2])-d,1),_=Math.max(Math.ceil(r[3])-h,1),w=1,L=1;g>lo&&(w=g/lo,g=lo),_>lo&&(L=_/lo,_=lo),this.current.startNewPathAndClipBox([0,0,g,_]);let M="groupAt"+this.groupLevel;e.smask&&(M+="_smask_"+this.smaskCounter++%2);const N=this.cachedCanvases.getCanvas(M,g,_),F=N.context;F.scale(1/w,1/L),F.translate(-d,-h),F.transform(...i),e.smask?this.smaskStack.push({canvas:N.canvas,context:F,offsetX:d,offsetY:h,scaleX:w,scaleY:L,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(d,h),t.scale(w,L),t.save()),Jo(t,F),this.ctx=F,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const r=Ft(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...r);const l=J.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],r);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(l)}}beginAnnotation(e,t,i,r,l){if(S(this,wr,Ym).call(this),ho(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(t)&&t.length===4){const d=t[2]-t[0],h=t[3]-t[1];if(l&&this.annotationCanvasMap){i=i.slice(),i[4]-=t[0],i[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=d,t[3]=h;const[g,_]=J.singularValueDecompose2dScale(Ft(this.ctx)),{viewportScale:w}=this,L=Math.ceil(d*this.outputScaleX*w),M=Math.ceil(h*this.outputScaleY*w);this.annotationCanvas=this.canvasFactory.create(L,M);const{canvas:N,context:F}=this.annotationCanvas;this.annotationCanvasMap.set(e,N),this.annotationCanvas.savedCtx=this.ctx,this.ctx=F,this.ctx.save(),this.ctx.setTransform(g,0,0,-_,0,h*_),ho(this.ctx)}else ho(this.ctx),this.ctx.rect(t[0],t[1],d,h),this.ctx.clip(),this.endPath()}this.current=new Vr(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...i),this.transform(...r)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),S(this,fa,Zm).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;e=this.getObject(e.data,e),e.count=t;const i=this.ctx,r=this.processingType3;if(r&&(r.compiled===void 0&&(r.compiled=He(e)),r.compiled)){r.compiled(i);return}const l=this._createMaskCanvas(e),d=l.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(d,l.offsetX,l.offsetY),i.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,i=0,r=0,l,d){if(!this.contentVisible)return;e=this.getObject(e.data,e);const h=this.ctx;h.save();const g=Ft(h);h.transform(t,i,r,l,0,0);const _=this._createMaskCanvas(e);h.setTransform(1,0,0,1,_.offsetX-g[4],_.offsetY-g[5]);for(let w=0,L=d.length;w<L;w+=2){const M=J.transform(g,[t,i,r,l,d[w],d[w+1]]),[N,F]=J.applyTransform([0,0],M);h.drawImage(_.canvas,N,F)}h.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,i=this.current.fillColor,r=this.current.patternFill;for(const l of e){const{data:d,width:h,height:g,transform:_}=l,w=this.cachedCanvases.getCanvas("maskCanvas",h,g),L=w.context;L.save();const M=this.getObject(d,l);ju(L,M),L.globalCompositeOperation="source-in",L.fillStyle=r?i.getPattern(L,this,ji(t),Hi.FILL):i,L.fillRect(0,0,h,g),L.restore(),t.save(),t.transform(..._),t.scale(1,-1),co(t,w.canvas,0,0,h,g,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);if(!t){ce("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,i,r){if(!this.contentVisible)return;const l=this.getObject(e);if(!l){ce("Dependent image isn't ready yet");return}const d=l.width,h=l.height,g=[];for(let _=0,w=r.length;_<w;_+=2)g.push({transform:[t,0,0,i,r[_],r[_+1]],x:0,y:0,w:d,h});this.paintInlineImageXObjectGroup(l,g)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:i,height:r}=e,l=this.cachedCanvases.getCanvas("inlineImage",i,r),d=l.context;return d.filter=this.current.transferMaps,d.drawImage(t,0,0),d.filter="none",l.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,i=e.height,r=this.ctx;if(this.save(),!y){const{filter:h}=r;h!=="none"&&h!==""&&(r.filter="none")}r.scale(1/t,-1/i);let l;if(e.bitmap)l=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)l=e;else{const g=this.cachedCanvases.getCanvas("inlineImage",t,i).context;Vu(g,e),l=this.applyTransferMapsToCanvas(g)}const d=this._scaleImage(l,ji(r));r.imageSmoothingEnabled=Uu(Ft(r),e.interpolate),co(r,d.img,0,0,d.paintWidth,d.paintHeight,0,-i,t,i),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const i=this.ctx;let r;if(e.bitmap)r=e.bitmap;else{const l=e.width,d=e.height,g=this.cachedCanvases.getCanvas("inlineImage",l,d).context;Vu(g,e),r=this.applyTransferMapsToCanvas(g)}for(const l of t)i.save(),i.transform(...l.transform),i.scale(1,-1),co(i,r,l.x,l.y,l.w,l.h,0,-1,1,1),i.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){const t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const i=this.ctx;this.pendingClip&&(t||(this.pendingClip===Ta?i.clip("evenodd"):i.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),i.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=Ft(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),i=Math.hypot(e[0],e[2]),r=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(i,r)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:i,c:r,d:l}=this.ctx.getTransform();let d,h;if(i===0&&r===0){const g=Math.abs(t),_=Math.abs(l);if(g===_)if(e===0)d=h=1/g;else{const w=g*e;d=h=w<1?1/w:1}else if(e===0)d=1/g,h=1/_;else{const w=g*e,L=_*e;d=w<1?1/w:1,h=L<1?1/L:1}}else{const g=Math.abs(t*l-i*r),_=Math.hypot(t,i),w=Math.hypot(r,l);if(e===0)d=w/g,h=_/g;else{const L=e*g;d=w>L?w/L:1,h=_>L?_/L:1}}this._cachedScaleForStroking[0]=d,this._cachedScaleForStroking[1]=h}return this._cachedScaleForStroking}rescaleAndStroke(e){const{ctx:t}=this,{lineWidth:i}=this.current,[r,l]=this.getScaleForStroking();if(t.lineWidth=i||1,r===1&&l===1){t.stroke();return}const d=t.getLineDash();if(e&&t.save(),t.scale(r,l),d.length>0){const h=Math.max(r,l);t.setLineDash(d.map(g=>g/h)),t.lineDashOffset/=h}t.stroke(),e&&t.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};wr=new WeakSet,Ym=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},fa=new WeakSet,Zm=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}};let Rn=Ss;for(const v in Ce)Rn.prototype[v]!==void 0&&(Rn.prototype[Ce[v]]=Rn.prototype[v]);const gs=Object.create(null);gs.workerPort=null,gs.workerSrc="";const jr={UNKNOWN:0,DATA:1,ERROR:2},jt={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Mi(v){switch(v instanceof Error||typeof v=="object"&&v!==null||W('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),v.name){case"AbortException":return new Fe(v.message);case"MissingPDFException":return new _t(v.message);case"PasswordException":return new bt(v.message,v.code);case"UnexpectedResponseException":return new oe(v.message,v.status);case"UnknownErrorException":return new dt(v.message,v.details);default:return new dt(v.message,v.toString())}}class ms{constructor(e,t,i){b(this,af);b(this,of);b(this,Vc);this.sourceName=e,this.targetName=t,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=r=>{const l=r.data;if(l.targetName!==this.sourceName)return;if(l.stream){S(this,of,Iy).call(this,l);return}if(l.callback){const h=l.callbackId,g=this.callbackCapabilities[h];if(!g)throw new Error(`Cannot resolve callback ${h}`);if(delete this.callbackCapabilities[h],l.callback===jr.DATA)g.resolve(l.data);else if(l.callback===jr.ERROR)g.reject(Mi(l.reason));else throw new Error("Unexpected callback case");return}const d=this.actionHandler[l.action];if(!d)throw new Error(`Unknown action from worker: ${l.action}`);if(l.callbackId){const h=this.sourceName,g=l.sourceName;new Promise(function(_){_(d(l.data))}).then(function(_){i.postMessage({sourceName:h,targetName:g,callback:jr.DATA,callbackId:l.callbackId,data:_})},function(_){i.postMessage({sourceName:h,targetName:g,callback:jr.ERROR,callbackId:l.callbackId,reason:Mi(_)})});return}if(l.streamId){S(this,af,My).call(this,l);return}d(l.data)},i.addEventListener("message",this._onComObjOnMessage)}on(e,t){const i=this.actionHandler;if(i[e])throw new Error(`There is already an actionName called "${e}"`);i[e]=t}send(e,t,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},i)}sendWithPromise(e,t,i){const r=this.callbackId++,l=new me;this.callbackCapabilities[r]=l;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:r,data:t},i)}catch(d){l.reject(d)}return l.promise}sendWithStream(e,t,i,r){const l=this.streamId++,d=this.sourceName,h=this.targetName,g=this.comObj;return new ReadableStream({start:_=>{const w=new me;return this.streamControllers[l]={controller:_,startCall:w,pullCall:null,cancelCall:null,isClosed:!1},g.postMessage({sourceName:d,targetName:h,action:e,streamId:l,data:t,desiredSize:_.desiredSize},r),w.promise},pull:_=>{const w=new me;return this.streamControllers[l].pullCall=w,g.postMessage({sourceName:d,targetName:h,stream:jt.PULL,streamId:l,desiredSize:_.desiredSize}),w.promise},cancel:_=>{ne(_ instanceof Error,"cancel must have a valid reason");const w=new me;return this.streamControllers[l].cancelCall=w,this.streamControllers[l].isClosed=!0,g.postMessage({sourceName:d,targetName:h,stream:jt.CANCEL,streamId:l,reason:Mi(_)}),w.promise}},i)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}af=new WeakSet,My=function(e){const t=e.streamId,i=this.sourceName,r=e.sourceName,l=this.comObj,d=this,h=this.actionHandler[e.action],g={enqueue(_,w=1,L){if(this.isCancelled)return;const M=this.desiredSize;this.desiredSize-=w,M>0&&this.desiredSize<=0&&(this.sinkCapability=new me,this.ready=this.sinkCapability.promise),l.postMessage({sourceName:i,targetName:r,stream:jt.ENQUEUE,streamId:t,chunk:_},L)},close(){this.isCancelled||(this.isCancelled=!0,l.postMessage({sourceName:i,targetName:r,stream:jt.CLOSE,streamId:t}),delete d.streamSinks[t])},error(_){ne(_ instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,l.postMessage({sourceName:i,targetName:r,stream:jt.ERROR,streamId:t,reason:Mi(_)}))},sinkCapability:new me,onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};g.sinkCapability.resolve(),g.ready=g.sinkCapability.promise,this.streamSinks[t]=g,new Promise(function(_){_(h(e.data,g))}).then(function(){l.postMessage({sourceName:i,targetName:r,stream:jt.START_COMPLETE,streamId:t,success:!0})},function(_){l.postMessage({sourceName:i,targetName:r,stream:jt.START_COMPLETE,streamId:t,reason:Mi(_)})})},of=new WeakSet,Iy=function(e){const t=e.streamId,i=this.sourceName,r=e.sourceName,l=this.comObj,d=this.streamControllers[t],h=this.streamSinks[t];switch(e.stream){case jt.START_COMPLETE:e.success?d.startCall.resolve():d.startCall.reject(Mi(e.reason));break;case jt.PULL_COMPLETE:e.success?d.pullCall.resolve():d.pullCall.reject(Mi(e.reason));break;case jt.PULL:if(!h){l.postMessage({sourceName:i,targetName:r,stream:jt.PULL_COMPLETE,streamId:t,success:!0});break}h.desiredSize<=0&&e.desiredSize>0&&h.sinkCapability.resolve(),h.desiredSize=e.desiredSize,new Promise(function(g){var _;g((_=h.onPull)==null?void 0:_.call(h))}).then(function(){l.postMessage({sourceName:i,targetName:r,stream:jt.PULL_COMPLETE,streamId:t,success:!0})},function(g){l.postMessage({sourceName:i,targetName:r,stream:jt.PULL_COMPLETE,streamId:t,reason:Mi(g)})});break;case jt.ENQUEUE:if(ne(d,"enqueue should have stream controller"),d.isClosed)break;d.controller.enqueue(e.chunk);break;case jt.CLOSE:if(ne(d,"close should have stream controller"),d.isClosed)break;d.isClosed=!0,d.controller.close(),S(this,Vc,mp).call(this,d,t);break;case jt.ERROR:ne(d,"error should have stream controller"),d.controller.error(Mi(e.reason)),S(this,Vc,mp).call(this,d,t);break;case jt.CANCEL_COMPLETE:e.success?d.cancelCall.resolve():d.cancelCall.reject(Mi(e.reason)),S(this,Vc,mp).call(this,d,t);break;case jt.CANCEL:if(!h)break;new Promise(function(g){var _;g((_=h.onCancel)==null?void 0:_.call(h,Mi(e.reason)))}).then(function(){l.postMessage({sourceName:i,targetName:r,stream:jt.CANCEL_COMPLETE,streamId:t,success:!0})},function(g){l.postMessage({sourceName:i,targetName:r,stream:jt.CANCEL_COMPLETE,streamId:t,reason:Mi(g)})}),h.sinkCapability.reject(Mi(e.reason)),h.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},Vc=new WeakSet,mp=async function(e,t){var i,r,l;await Promise.allSettled([(i=e.startCall)==null?void 0:i.promise,(r=e.pullCall)==null?void 0:r.promise,(l=e.cancelCall)==null?void 0:l.promise]),delete this.streamControllers[t]};class La{constructor({parsedData:e,rawData:t}){b(this,Tl,void 0);b(this,_r,void 0);R(this,Tl,e),R(this,_r,t)}getRaw(){return a(this,_r)}get(e){return a(this,Tl).get(e)??null}getAll(){return V(a(this,Tl))}has(e){return a(this,Tl).has(e)}}Tl=new WeakMap,_r=new WeakMap;const tn=Symbol("INTERNAL");class Ra{constructor(e,t){b(this,sh,!0);this.name=e,this.intent=t}get visible(){return a(this,sh)}_setVisible(e,t){e!==tn&&W("Internal method `_setVisible` called."),R(this,sh,t)}}sh=new WeakMap;class er{constructor(e){b(this,nh);b(this,Hn,null);b(this,Zt,new Map);b(this,Di,null);b(this,bn,null);if(this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,R(this,bn,e.order);for(const t of e.groups)a(this,Zt).set(t.id,new Ra(t.name,t.intent));if(e.baseState==="OFF")for(const t of a(this,Zt).values())t._setVisible(tn,!1);for(const t of e.on)a(this,Zt).get(t)._setVisible(tn,!0);for(const t of e.off)a(this,Zt).get(t)._setVisible(tn,!1);R(this,Di,this.getHash())}}isVisible(e){if(a(this,Zt).size===0)return!0;if(!e)return ce("Optional content group not defined."),!0;if(e.type==="OCG")return a(this,Zt).has(e.id)?a(this,Zt).get(e.id).visible:(ce(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return S(this,nh,Qm).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!a(this,Zt).has(t))return ce(`Optional content group not found: ${t}`),!0;if(a(this,Zt).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!a(this,Zt).has(t))return ce(`Optional content group not found: ${t}`),!0;if(!a(this,Zt).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!a(this,Zt).has(t))return ce(`Optional content group not found: ${t}`),!0;if(!a(this,Zt).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!a(this,Zt).has(t))return ce(`Optional content group not found: ${t}`),!0;if(a(this,Zt).get(t).visible)return!1}return!0}return ce(`Unknown optional content policy ${e.policy}.`),!0}return ce(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0){if(!a(this,Zt).has(e)){ce(`Optional content group not found: ${e}`);return}a(this,Zt).get(e)._setVisible(tn,!!t),R(this,Hn,null)}get hasInitialVisibility(){return a(this,Di)===null||this.getHash()===a(this,Di)}getOrder(){return a(this,Zt).size?a(this,bn)?a(this,bn).slice():[...a(this,Zt).keys()]:null}getGroups(){return a(this,Zt).size>0?V(a(this,Zt)):null}getGroup(e){return a(this,Zt).get(e)||null}getHash(){if(a(this,Hn)!==null)return a(this,Hn);const e=new Jn;for(const[t,i]of a(this,Zt))e.update(`${t}:${i.visible}`);return R(this,Hn,e.hexdigest())}}Hn=new WeakMap,Zt=new WeakMap,Di=new WeakMap,bn=new WeakMap,nh=new WeakSet,Qm=function(e){const t=e.length;if(t<2)return!0;const i=e[0];for(let r=1;r<t;r++){const l=e[r];let d;if(Array.isArray(l))d=S(this,nh,Qm).call(this,l);else if(a(this,Zt).has(l))d=a(this,Zt).get(l).visible;else return ce(`Optional content group not found: ${l}`),!0;switch(i){case"And":if(!d)return!1;break;case"Or":if(d)return!0;break;case"Not":return!d;default:return!0}}return i==="And"};class Hr{constructor({length:e,initialData:t,progressiveDone:i=!1,contentDispositionFilename:r=null,disableRange:l=!1,disableStream:d=!1},h){if(ne(h,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=i,this._contentDispositionFilename=r,(t==null?void 0:t.length)>0){const g=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;this._queuedChunks.push(g)}this._pdfDataRangeTransport=h,this._isStreamingSupported=!d,this._isRangeSupported=!l,this._contentLength=e,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((g,_)=>{this._onReceiveData({begin:g,chunk:_})}),this._pdfDataRangeTransport.addProgressListener((g,_)=>{this._onProgress({loaded:g,total:_})}),this._pdfDataRangeTransport.addProgressiveReadListener(g=>{this._onReceiveData({chunk:g})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:e,chunk:t}){const i=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{const r=this._rangeReaders.some(function(l){return l._begin!==e?!1:(l._enqueue(i),!0)});ne(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,i,r,l;e.total===void 0?(i=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||i.call(t,{loaded:e.loaded}):(l=(r=this._fullRequestReader)==null?void 0:r.onProgress)==null||l.call(r,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){ne(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new tl(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=new tr(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeReaders.slice(0))i.cancel(e);this._pdfDataRangeTransport.abort()}}class tl{constructor(e,t,i=!1,r=null){this._stream=e,this._done=i||!1,this._filename=ps(r)?r:null,this._queuedChunks=t||[],this._loaded=0;for(const l of this._queuedChunks)this._loaded+=l.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=new me;return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class tr{constructor(e,t,i){this._stream=e,this._begin=t,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=new me;return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function ir(v){let e=!0,t=i("filename\\*","i").exec(v);if(t){t=t[1];let w=h(t);return w=unescape(w),w=g(w),w=_(w),l(w)}if(t=d(v),t){const w=_(t);return l(w)}if(t=i("filename","i").exec(v),t){t=t[1];let w=h(t);return w=_(w),l(w)}function i(w,L){return new RegExp("(?:^|;)\\s*"+w+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',L)}function r(w,L){if(w){if(!/^[\x00-\xFF]+$/.test(L))return L;try{const M=new TextDecoder(w,{fatal:!0}),N=gt(L);L=M.decode(N),e=!1}catch{}}return L}function l(w){return e&&/[\x80-\xff]/.test(w)&&(w=r("utf-8",w),e&&(w=r("iso-8859-1",w))),w}function d(w){const L=[];let M;const N=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(M=N.exec(w))!==null;){let[,z,ie,K]=M;if(z=parseInt(z,10),z in L){if(z===0)break;continue}L[z]=[ie,K]}const F=[];for(let z=0;z<L.length&&z in L;++z){let[ie,K]=L[z];K=h(K),ie&&(K=unescape(K),z===0&&(K=g(K))),F.push(K)}return F.join("")}function h(w){if(w.startsWith('"')){const L=w.slice(1).split('\\"');for(let M=0;M<L.length;++M){const N=L[M].indexOf('"');N!==-1&&(L[M]=L[M].slice(0,N),L.length=M+1),L[M]=L[M].replaceAll(/\\(.)/g,"$1")}w=L.join('"')}return w}function g(w){const L=w.indexOf("'");if(L===-1)return w;const M=w.slice(0,L),F=w.slice(L+1).replace(/^[^']*'/,"");return r(M,F)}function _(w){return!w.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(w)?w:w.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(L,M,N,F){if(N==="q"||N==="Q")return F=F.replaceAll("_"," "),F=F.replaceAll(/=([0-9a-fA-F]{2})/g,function(z,ie){return String.fromCharCode(parseInt(ie,16))}),r(M,F);try{F=atob(F)}catch{}return r(M,F)})}return""}function Ma({getResponseHeader:v,isHttp:e,rangeChunkSize:t,disableRange:i}){const r={allowRangeRequests:!1,suggestedLength:void 0},l=parseInt(v("Content-Length"),10);return!Number.isInteger(l)||(r.suggestedLength=l,l<=2*t)||i||!e||v("Accept-Ranges")!=="bytes"||(v("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function Ur(v){const e=v("Content-Disposition");if(e){let t=ir(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(ps(t))return t}return null}function Ms(v,e){return v===404||v===0&&e.startsWith("file:")?new _t('Missing PDF "'+e+'".'):new oe(`Unexpected server response (${v}) while retrieving PDF "${e}".`,v)}function uo(v){return v===200||v===206}function Ia(v,e,t){return{method:"GET",headers:v,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function il(v){const e=new Headers;for(const t in v){const i=v[t];i!==void 0&&e.append(t,i)}return e}function Qb(v){return v instanceof Uint8Array?v.buffer:v instanceof ArrayBuffer?v:(ce(`getArrayBuffer - unexpected data format: ${v}`),new Uint8Array(v).buffer)}class sl{constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.httpHeaders=this.isHttp&&e.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return ne(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new gE(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=new fo(this,e,t);return this._rangeRequestReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeRequestReaders.slice(0))i.cancel(e)}}class gE{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=new me,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._headers=il(this._stream.httpHeaders);const i=t.url;fetch(i,Ia(this._headers,this._withCredentials,this._abortController)).then(r=>{if(!uo(r.status))throw Ms(r.status,i);this._reader=r.body.getReader(),this._headersCapability.resolve();const l=g=>r.headers.get(g),{allowRangeRequests:d,suggestedLength:h}=Ma({getResponseHeader:l,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=d,this._contentLength=h||this._contentLength,this._filename=Ur(l),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Fe("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:Qb(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class fo{constructor(e,t,i){this._stream=e,this._reader=null,this._loaded=0;const r=e.source;this._withCredentials=r.withCredentials||!1,this._readCapability=new me,this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController,this._headers=il(this._stream.httpHeaders),this._headers.append("Range",`bytes=${t}-${i-1}`);const l=r.url;fetch(l,Ia(this._headers,this._withCredentials,this._abortController)).then(d=>{if(!uo(d.status))throw Ms(d.status,l);this._readCapability.resolve(),this._reader=d.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded}),{value:Qb(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const dg=200,ka=206;function mE(v){const e=v.response;return typeof e!="string"?e:gt(e).buffer}class nl{constructor(e,t={}){this.url=e,this.isHttp=/^https?:/i.test(e),this.httpHeaders=this.isHttp&&t.httpHeaders||Object.create(null),this.withCredentials=t.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(e,t,i){const r={begin:e,end:t};for(const l in i)r[l]=i[l];return this.request(r)}requestFull(e){return this.request(e)}request(e){const t=new XMLHttpRequest,i=this.currXhrId++,r=this.pendingRequests[i]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const l in this.httpHeaders){const d=this.httpHeaders[l];d!==void 0&&t.setRequestHeader(l,d)}return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),r.expectedStatus=ka):r.expectedStatus=dg,t.responseType="arraybuffer",e.onError&&(t.onerror=function(l){e.onError(t.status)}),t.onreadystatechange=this.onStateChange.bind(this,i),t.onprogress=this.onProgress.bind(this,i),r.onHeadersReceived=e.onHeadersReceived,r.onDone=e.onDone,r.onError=e.onError,r.onProgress=e.onProgress,t.send(null),i}onProgress(e,t){var r;const i=this.pendingRequests[e];i&&((r=i.onProgress)==null||r.call(i,t))}onStateChange(e,t){var g,_,w;const i=this.pendingRequests[e];if(!i)return;const r=i.xhr;if(r.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),r.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],r.status===0&&this.isHttp){(g=i.onError)==null||g.call(i,r.status);return}const l=r.status||dg;if(!(l===dg&&i.expectedStatus===ka)&&l!==i.expectedStatus){(_=i.onError)==null||_.call(i,r.status);return}const h=mE(r);if(l===ka){const L=r.getResponseHeader("Content-Range"),M=/bytes (\d+)-(\d+)\/(\d+)/.exec(L);i.onDone({begin:parseInt(M[1],10),chunk:h})}else h?i.onDone({begin:0,chunk:h}):(w=i.onError)==null||w.call(i,r.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class bE{constructor(e){this._source=e,this._manager=new nl(e.url,{httpHeaders:e.httpHeaders,withCredentials:e.withCredentials}),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return ne(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new pc(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const i=new vE(this._manager,e,t);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeRequestReaders.slice(0))i.cancel(e)}}class pc{constructor(e,t){this._manager=e;const i={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._fullRequestId=e.requestFull(i),this._headersReceivedCapability=new me,this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e),i=d=>t.getResponseHeader(d),{allowRangeRequests:r,suggestedLength:l}=Ma({getResponseHeader:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=l||this._contentLength,this._filename=Ur(i),this._isRangeSupported&&this._manager.abortRequest(e),this._headersReceivedCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=Ms(e,this._url),this._headersReceivedCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=new me;return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersReceivedCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class vE{constructor(e,t,i){this._manager=e;const r={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._requestId=e.requestRange(t,i,r),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError=Ms(e,this._url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=new me;return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}class zr{static textContent(e){const t=[],i={items:t,styles:Object.create(null)};function r(l){var g;if(!l)return;let d=null;const h=l.name;if(h==="#text")d=l.value;else if(zr.shouldBuildText(h))(g=l==null?void 0:l.attributes)!=null&&g.textContent?d=l.attributes.textContent:l.value&&(d=l.value);else return;if(d!==null&&t.push({str:d}),!!l.children)for(const _ of l.children)r(_)}return r(e),i}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const wE=65536,rl=100,_E=5e3,gc=y?Yp:Yn,yE=y?Zp:oi,Wr=y?Td:is,Is=y?Qp:xn;function Mn(v){if(typeof v=="string"||v instanceof URL?v={url:v}:Me(v)&&(v={data:v}),typeof v!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!v.url&&!v.data&&!v.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const e=new hg,{docId:t}=e,i=v.url?al(v.url):null,r=v.data?ol(v.data):null,l=v.httpHeaders||null,d=v.withCredentials===!0,h=v.password??null,g=v.range instanceof mc?v.range:null,_=Number.isInteger(v.rangeChunkSize)&&v.rangeChunkSize>0?v.rangeChunkSize:wE;let w=v.worker instanceof bc?v.worker:null;const L=v.verbosity,M=typeof v.docBaseUrl=="string"&&!_i(v.docBaseUrl)?v.docBaseUrl:null,N=typeof v.cMapUrl=="string"?v.cMapUrl:null,F=v.cMapPacked!==!1,z=v.CMapReaderFactory||yE,ie=typeof v.standardFontDataUrl=="string"?v.standardFontDataUrl:null,K=v.StandardFontDataFactory||Is,we=v.stopAtErrors!==!0,ue=Number.isInteger(v.maxImageSize)&&v.maxImageSize>-1?v.maxImageSize:-1,pe=v.isEvalSupported!==!1,Te=typeof v.isOffscreenCanvasSupported=="boolean"?v.isOffscreenCanvasSupported:!y,je=Number.isInteger(v.canvasMaxAreaInBytes)?v.canvasMaxAreaInBytes:-1,rt=typeof v.disableFontFace=="boolean"?v.disableFontFace:y,lt=v.fontExtraProperties===!0,pt=v.enableXfa===!0,Ht=v.ownerDocument||globalThis.document,Mt=v.disableRange===!0,ai=v.disableStream===!0,Ci=v.disableAutoFetch===!0,Ji=v.pdfBug===!0,ii=g?g.length:v.length??NaN,Ps=typeof v.useSystemFonts=="boolean"?v.useSystemFonts:!y&&!rt,ft=typeof v.useWorkerFetch=="boolean"?v.useWorkerFetch:z===oi&&K===xn&&N&&ie&&en(N,document.baseURI)&&en(ie,document.baseURI),It=v.canvasFactory||new gc({ownerDocument:Ht}),Vf=v.filterFactory||new Wr({docId:t,ownerDocument:Ht}),jf=null;ct(L);const nd={canvasFactory:It,filterFactory:Vf};if(ft||(nd.cMapReaderFactory=new z({baseUrl:N,isCompressed:F}),nd.standardFontDataFactory=new K({baseUrl:ie})),!w){const Do={verbosity:L,port:gs.workerPort};w=Do.port?bc.fromPort(Do):new bc(Do),e._worker=w}const Sn={docId:t,apiVersion:"4.0.381",data:r,password:h,disableAutoFetch:Ci,rangeChunkSize:_,length:ii,docBaseUrl:M,enableXfa:pt,evaluatorOptions:{maxImageSize:ue,disableFontFace:rt,ignoreErrors:we,isEvalSupported:pe,isOffscreenCanvasSupported:Te,canvasMaxAreaInBytes:je,fontExtraProperties:lt,useSystemFonts:Ps,cMapUrl:ft?N:null,standardFontDataUrl:ft?ie:null}},es={ignoreErrors:we,isEvalSupported:pe,disableFontFace:rt,fontExtraProperties:lt,enableXfa:pt,ownerDocument:Ht,disableAutoFetch:Ci,pdfBug:Ji,styleElement:jf};return w.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");const Do=Oa(w,Sn),bg=new Promise(function(Bo){let wi;g?wi=new Hr({length:ii,initialData:g.initialData,progressiveDone:g.progressiveDone,contentDispositionFilename:g.contentDispositionFilename,disableRange:Mt,disableStream:ai},g):r||(wi=(rd=>y?new Jp(rd):en(rd.url)?new sl(rd):new bE(rd))({url:i,length:ii,httpHeaders:l,withCredentials:d,rangeChunkSize:_,disableRange:Mt,disableStream:ai})),Bo(wi)});return Promise.all([Do,bg]).then(function([Bo,wi]){if(e.destroyed)throw new Error("Loading aborted");const vg=new ms(t,Bo,w.port),rd=new vc(vg,e,wi,es,nd);e._transport=rd,vg.send("Ready",null)})}).catch(e._capability.reject),e}async function Oa(v,e){if(v.destroyed)throw new Error("Worker was destroyed");const t=await v.messageHandler.sendWithPromise("GetDocRequest",e,e.data?[e.data.buffer]:null);if(v.destroyed)throw new Error("Worker was destroyed");return t}function al(v){if(v instanceof URL)return v.href;try{return new URL(v,window.location).href}catch{if(y&&typeof v=="string")return v}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function ol(v){if(y&&typeof Buffer<"u"&&v instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(v instanceof Uint8Array&&v.byteLength===v.buffer.byteLength)return v;if(typeof v=="string")return gt(v);if(typeof v=="object"&&!isNaN(v==null?void 0:v.length)||Me(v))return new Uint8Array(v);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const za=class za{constructor(){this._capability=new me,this._transport=null,this._worker=null,this.docId=`d${wa(za,hf)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var e,t,i;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(r){throw(i=this._worker)!=null&&i.port&&delete this._worker._pendingDestroy,r}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};hf=new WeakMap,b(za,hf,0);let hg=za;class mc{constructor(e,t,i=!1,r=null){this.length=e,this.initialData=t,this.progressiveDone=i,this.contentDispositionFilename=r,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new me}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(const i of this._rangeListeners)i(e,t)}onDataProgress(e,t){this._readyCapability.promise.then(()=>{for(const i of this._progressListeners)i(e,t)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const t of this._progressiveReadListeners)t(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){W("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class EE{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return be(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class ll{constructor(e,t,i,r=!1){b(this,Eo);b(this,jc);b(this,yo,null);b(this,As,!1);this._pageIndex=e,this._pageInfo=t,this._transport=i,this._stats=r?new Zn:null,this._pdfBug=r,this.commonObjs=i.commonObjs,this.objs=new Jb,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:i=0,offsetY:r=0,dontFlip:l=!1}={}){return new Ti({viewBox:this.view,scale:e,rotation:t,offsetX:i,offsetY:r,dontFlip:l})}getAnnotations({intent:e="display"}={}){const t=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return be(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,viewport:t,intent:i="display",annotationMode:r=de.ENABLE,transform:l=null,background:d=null,optionalContentConfigPromise:h=null,annotationCanvasMap:g=null,pageColors:_=null,printAnnotationStorage:w=null}){var K,we;(K=this._stats)==null||K.time("Overall");const L=this._transport.getRenderingIntent(i,r,w);R(this,As,!1),S(this,jc,bp).call(this),h||(h=this._transport.getOptionalContentConfig());let M=this._intentStates.get(L.cacheKey);M||(M=Object.create(null),this._intentStates.set(L.cacheKey,M)),M.streamReaderCancelTimeout&&(clearTimeout(M.streamReaderCancelTimeout),M.streamReaderCancelTimeout=null);const N=!!(L.renderingIntent&Pe.PRINT);M.displayReadyCapability||(M.displayReadyCapability=new me,M.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(we=this._stats)==null||we.time("Page Request"),this._pumpOperatorList(L));const F=ue=>{var pe,Te;M.renderTasks.delete(z),(this._maybeCleanupAfterRender||N)&&R(this,As,!0),S(this,Eo,hd).call(this,!N),ue?(z.capability.reject(ue),this._abortOperatorList({intentState:M,reason:ue instanceof Error?ue:new Error(ue)})):z.capability.resolve(),(pe=this._stats)==null||pe.timeEnd("Rendering"),(Te=this._stats)==null||Te.timeEnd("Overall")},z=new ug({callback:F,params:{canvasContext:e,viewport:t,transform:l,background:d},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:g,operatorList:M.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!N,pdfBug:this._pdfBug,pageColors:_});(M.renderTasks||(M.renderTasks=new Set)).add(z);const ie=z.task;return Promise.all([M.displayReadyCapability.promise,h]).then(([ue,pe])=>{var Te;if(this.destroyed){F();return}(Te=this._stats)==null||Te.time("Rendering"),z.initializeGraphics({transparency:ue,optionalContentConfig:pe}),z.operatorListChanged()}).catch(F),ie}getOperatorList({intent:e="display",annotationMode:t=de.ENABLE,printAnnotationStorage:i=null}={}){var g;function r(){d.operatorList.lastChunk&&(d.opListReadCapability.resolve(d.operatorList),d.renderTasks.delete(h))}const l=this._transport.getRenderingIntent(e,t,i,!0);let d=this._intentStates.get(l.cacheKey);d||(d=Object.create(null),this._intentStates.set(l.cacheKey,d));let h;return d.opListReadCapability||(h=Object.create(null),h.operatorListChanged=r,d.opListReadCapability=new me,(d.renderTasks||(d.renderTasks=new Set)).add(h),d.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(g=this._stats)==null||g.time("Page Request"),this._pumpOperatorList(l)),d.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>zr.textContent(i));const t=this.streamTextContent(e);return new Promise(function(i,r){function l(){d.read().then(function({value:g,done:_}){if(_){i(h);return}Object.assign(h.styles,g.styles),h.items.push(...g.items),l()},r)}const d=t.getReader(),h={items:[],styles:Object.create(null)};l()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const i of t.renderTasks)e.push(i.completed),i.cancel();return this.objs.clear(),R(this,As,!1),S(this,jc,bp).call(this),Promise.all(e)}cleanup(e=!1){R(this,As,!0);const t=S(this,Eo,hd).call(this,!1);return e&&t&&this._stats&&(this._stats=new Zn),t}_startRenderPage(e,t){var r,l;const i=this._intentStates.get(t);i&&((r=this._stats)==null||r.timeEnd("Page Request"),(l=i.displayReadyCapability)==null||l.resolve(e))}_renderPageChunk(e,t){for(let i=0,r=e.length;i<r;i++)t.operatorList.fnArray.push(e.fnArray[i]),t.operatorList.argsArray.push(e.argsArray[i]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const i of t.renderTasks)i.operatorListChanged();e.lastChunk&&S(this,Eo,hd).call(this,!0)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:i}){const{map:r,transfer:l}=i,h=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:r},l).getReader(),g=this._intentStates.get(t);g.streamReader=h;const _=()=>{h.read().then(({value:w,done:L})=>{if(L){g.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(w,g),_())},w=>{if(g.streamReader=null,!this._transport.destroyed){if(g.operatorList){g.operatorList.lastChunk=!0;for(const L of g.renderTasks)L.operatorListChanged();S(this,Eo,hd).call(this,!0)}if(g.displayReadyCapability)g.displayReadyCapability.reject(w);else if(g.opListReadCapability)g.opListReadCapability.reject(w);else throw w}})};_()}_abortOperatorList({intentState:e,reason:t,force:i=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!i){if(e.renderTasks.size>0)return;if(t instanceof li){let r=rl;t.extraDelay>0&&t.extraDelay<1e3&&(r+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},r);return}}if(e.streamReader.cancel(new Fe(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[r,l]of this._intentStates)if(l===e){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}yo=new WeakMap,As=new WeakMap,Eo=new WeakSet,hd=function(e=!1){if(S(this,jc,bp).call(this),!a(this,As)||this.destroyed)return!1;if(e)return R(this,yo,setTimeout(()=>{R(this,yo,null),S(this,Eo,hd).call(this,!1)},_E)),!1;for(const{renderTasks:t,operatorList:i}of this._intentStates.values())if(t.size>0||!i.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),R(this,As,!1),!0},jc=new WeakSet,bp=function(){a(this,yo)&&(clearTimeout(a(this,yo)),R(this,yo,null))};class SE{constructor(){b(this,Un,new Set);b(this,uf,Promise.resolve())}postMessage(e,t){const i={data:structuredClone(e,t?{transfer:t}:null)};a(this,uf).then(()=>{for(const r of a(this,Un))r.call(this,i)})}addEventListener(e,t){a(this,Un).add(t)}removeEventListener(e,t){a(this,Un).delete(t)}terminate(){a(this,Un).clear()}}Un=new WeakMap,uf=new WeakMap;const ks={isWorkerDisabled:!1,fakeWorkerId:0};y&&(ks.isWorkerDisabled=!0,gs.workerSrc||(gs.workerSrc="./pdf.worker.mjs")),ks.isSameOrigin=function(v,e){let t;try{if(t=new URL(v),!t.origin||t.origin==="null")return!1}catch{return!1}const i=new URL(e,t);return t.origin===i.origin},ks.createCDNWrapper=function(v){const e=`await import("${v}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))};const vn=class vn{constructor({name:e=null,port:t=null,verbosity:i=St()}={}){var r;if(this.name=e,this.destroyed=!1,this.verbosity=i,this._readyCapability=new me,this._port=null,this._webWorker=null,this._messageHandler=null,t){if((r=a(vn,zn))!=null&&r.has(t))throw new Error("Cannot use more than one PDFWorker per port.");(a(vn,zn)||R(vn,zn,new WeakMap)).set(t,this),this._initializeFromPort(t);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new ms("main","worker",e),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!ks.isWorkerDisabled&&!a(vn,Hc,vp)){let{workerSrc:e}=vn;try{ks.isSameOrigin(window.location.href,e)||(e=ks.createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),i=new ms("main","worker",t),r=()=>{t.removeEventListener("error",l),i.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},l=()=>{this._webWorker||r()};t.addEventListener("error",l),i.on("test",h=>{if(t.removeEventListener("error",l),this.destroyed){r();return}h?(this._messageHandler=i,this._port=t,this._webWorker=t,this._readyCapability.resolve(),i.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),i.destroy(),t.terminate())}),i.on("ready",h=>{if(t.removeEventListener("error",l),this.destroyed){r();return}try{d()}catch{this._setupFakeWorker()}});const d=()=>{const h=new Uint8Array;i.send("test",h,[h.buffer])};d();return}catch{Tt("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){ks.isWorkerDisabled||(ce("Setting up fake worker."),ks.isWorkerDisabled=!0),vn._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const t=new SE;this._port=t;const i=`fake${ks.fakeWorkerId++}`,r=new ms(i+"_worker",i,t);e.setup(r,t);const l=new ms(i,i+"_worker",t);this._messageHandler=l,this._readyCapability.resolve(),l.send("configure",{verbosity:this.verbosity})}).catch(e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){var e;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(e=a(vn,zn))==null||e.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(e){var i;if(!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const t=(i=a(this,zn))==null?void 0:i.get(e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new vn(e)}static get workerSrc(){if(gs.workerSrc)return gs.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return be(this,"_setupFakeWorkerGlobal",(async()=>a(this,Hc,vp)?a(this,Hc,vp):(await Gf(()=>import(this.workerSrc),[])).WorkerMessageHandler)())}};zn=new WeakMap,Hc=new WeakSet,vp=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},b(vn,Hc),b(vn,zn,void 0);let bc=vn;class vc{constructor(e,t,i,r,l){b(this,o);b(this,Ki,new Map);b(this,pa,new Map);b(this,T,new Map);b(this,s,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new Jb,this.fontLoader=new Xp({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this._params=r,this.canvasFactory=l.canvasFactory,this.filterFactory=l.filterFactory,this.cMapReaderFactory=l.cMapReaderFactory,this.standardFontDataFactory=l.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new me,this.setupMessageHandler()}get annotationStorage(){return be(this,"annotationStorage",new xd)}getRenderingIntent(e,t=de.ENABLE,i=null,r=!1){let l=Pe.DISPLAY,d=Pa;switch(e){case"any":l=Pe.ANY;break;case"display":break;case"print":l=Pe.PRINT;break;default:ce(`getRenderingIntent - invalid intent: ${e}`)}switch(t){case de.DISABLE:l+=Pe.ANNOTATIONS_DISABLE;break;case de.ENABLE:break;case de.ENABLE_FORMS:l+=Pe.ANNOTATIONS_FORMS;break;case de.ENABLE_STORAGE:l+=Pe.ANNOTATIONS_STORAGE,d=(l&Pe.PRINT&&i instanceof Mu?i:this.annotationStorage).serializable;break;default:ce(`getRenderingIntent - invalid annotationMode: ${t}`)}return r&&(l+=Pe.OPLIST),{renderingIntent:l,cacheKey:`${l}_${d.hash}`,annotationStorageSerializable:d}}destroy(){var i;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new me,(i=a(this,s))==null||i.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const r of a(this,pa).values())e.push(r._destroy());a(this,pa).clear(),a(this,T).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var r;this.commonObjs.clear(),this.fontLoader.clear(),a(this,Ki).clear(),this.filterFactory.destroy(),(r=this._networkStream)==null||r.cancelAllRequests(new Fe("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(i,r)=>{ne(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=l=>{this._lastProgress={loaded:l.loaded,total:l.total}},r.onPull=()=>{this._fullReader.read().then(function({value:l,done:d}){if(d){r.close();return}ne(l instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(l),1,[l])}).catch(l=>{r.error(l)})},r.onCancel=l=>{this._fullReader.cancel(l),r.ready.catch(d=>{if(!this.destroyed)throw d})}}),e.on("ReaderHeadersReady",i=>{const r=new me,l=this._fullReader;return l.headersReady.then(()=>{var d;(!l.isStreamingSupported||!l.isRangeSupported)&&(this._lastProgress&&((d=t.onProgress)==null||d.call(t,this._lastProgress)),l.onProgress=h=>{var g;(g=t.onProgress)==null||g.call(t,{loaded:h.loaded,total:h.total})}),r.resolve({isStreamingSupported:l.isStreamingSupported,isRangeSupported:l.isRangeSupported,contentLength:l.contentLength})},r.reject),r.promise}),e.on("GetRangeReader",(i,r)=>{ne(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const l=this._networkStream.getRangeReader(i.begin,i.end);if(!l){r.close();return}r.onPull=()=>{l.read().then(function({value:d,done:h}){if(h){r.close();return}ne(d instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(d),1,[d])}).catch(d=>{r.error(d)})},r.onCancel=d=>{l.cancel(d),r.ready.catch(h=>{if(!this.destroyed)throw h})}}),e.on("GetDoc",({pdfInfo:i})=>{this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,t._capability.resolve(new EE(i,this))}),e.on("DocException",function(i){let r;switch(i.name){case"PasswordException":r=new bt(i.message,i.code);break;case"InvalidPDFException":r=new Ct(i.message);break;case"MissingPDFException":r=new _t(i.message);break;case"UnexpectedResponseException":r=new oe(i.message,i.status);break;case"UnknownErrorException":r=new dt(i.message,i.details);break;default:W("DocException - expected a valid Error.")}t._capability.reject(r)}),e.on("PasswordRequest",i=>{if(R(this,s,new me),t.onPassword){const r=l=>{l instanceof Error?a(this,s).reject(l):a(this,s).resolve({password:l})};try{t.onPassword(r,i.code)}catch(l){a(this,s).reject(l)}}else a(this,s).reject(new bt(i.message,i.code));return a(this,s).promise}),e.on("DataLoaded",i=>{var r;(r=t.onProgress)==null||r.call(t,{loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),e.on("StartRenderPage",i=>{if(this.destroyed)return;a(this,pa).get(i.pageIndex)._startRenderPage(i.transparency,i.cacheKey)}),e.on("commonobj",([i,r,l])=>{var d;if(this.destroyed||this.commonObjs.has(i))return null;switch(r){case"Font":const h=this._params;if("error"in l){const L=l.error;ce(`Error during font loading: ${L}`),this.commonObjs.resolve(i,L);break}const g=h.pdfBug&&((d=globalThis.FontInspector)!=null&&d.enabled)?(L,M)=>globalThis.FontInspector.fontAdded(L,M):null,_=new Iu(l,{isEvalSupported:h.isEvalSupported,disableFontFace:h.disableFontFace,ignoreErrors:h.ignoreErrors,inspectFont:g});this.fontLoader.bind(_).catch(L=>e.sendWithPromise("FontFallback",{id:i})).finally(()=>{!h.fontExtraProperties&&_.data&&(_.data=null),this.commonObjs.resolve(i,_)});break;case"CopyLocalImage":const{imageRef:w}=l;ne(w,"The imageRef must be defined.");for(const L of a(this,pa).values())for(const[,M]of L.objs)if(M.ref===w)return M.dataLen?(this.commonObjs.resolve(i,structuredClone(M)),M.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(i,l);break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),e.on("obj",([i,r,l,d])=>{var g;if(this.destroyed)return;const h=a(this,pa).get(r);if(!h.objs.has(i)){if(h._intentStates.size===0){(g=d==null?void 0:d.bitmap)==null||g.close();return}switch(l){case"Image":h.objs.resolve(i,d),(d==null?void 0:d.dataLen)>X&&(h._maybeCleanupAfterRender=!0);break;case"Pattern":h.objs.resolve(i,d);break;default:throw new Error(`Got unknown object type ${l}`)}}}),e.on("DocProgress",i=>{var r;this.destroyed||(r=t.onProgress)==null||r.call(t,{loaded:i.loaded,total:i.total})}),e.on("FetchBuiltInCMap",i=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(i):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),e.on("FetchStandardFontData",i=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(i):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var i;this.annotationStorage.size<=0&&ce("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((i=this._fullReader)==null?void 0:i.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,i=a(this,T).get(t);if(i)return i;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(l=>{if(this.destroyed)throw new Error("Transport destroyed");const d=new ll(t,l,this,this._params.pdfBug);return a(this,pa).set(t,d),d});return a(this,T).set(t,r),r}getPageIndex(e){return typeof e!="object"||e===null||!Number.isInteger(e.num)||e.num<0||!Number.isInteger(e.gen)||e.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen})}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return S(this,o,wp).call(this,"GetFieldObjects")}hasJSActions(){return S(this,o,wp).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return S(this,o,wp).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(e=>new er(e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=a(this,Ki).get(e);if(t)return t;const i=this.messageHandler.sendWithPromise(e,null).then(r=>{var l,d;return{info:r[0],metadata:r[1]?new La(r[1]):null,contentDispositionFilename:((l=this._fullReader)==null?void 0:l.filename)??null,contentLength:((d=this._fullReader)==null?void 0:d.contentLength)??null}});return a(this,Ki).set(e,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of a(this,pa).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),a(this,Ki).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:e,enableXfa:t}=this._params;return be(this,"loadingParams",{disableAutoFetch:e,enableXfa:t})}}Ki=new WeakMap,pa=new WeakMap,T=new WeakMap,s=new WeakMap,o=new WeakSet,wp=function(e,t=null){const i=a(this,Ki).get(e);if(i)return i;const r=this.messageHandler.sendWithPromise(e,t);return a(this,Ki).set(e,r),r};class Jb{constructor(){b(this,A);b(this,m,Object.create(null))}get(e,t=null){if(t){const r=S(this,A,Jm).call(this,e);return r.capability.promise.then(()=>t(r.data)),null}const i=a(this,m)[e];if(!(i!=null&&i.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${e}.`);return i.data}has(e){const t=a(this,m)[e];return(t==null?void 0:t.capability.settled)??!1}resolve(e,t=null){const i=S(this,A,Jm).call(this,e);i.data=t,i.capability.resolve()}clear(){var e;for(const t in a(this,m)){const{data:i}=a(this,m)[t];(e=i==null?void 0:i.bitmap)==null||e.close()}R(this,m,Object.create(null))}*[Symbol.iterator](){for(const e in a(this,m)){const{capability:t,data:i}=a(this,m)[e];t.settled&&(yield[e,i])}}}m=new WeakMap,A=new WeakSet,Jm=function(e){var t;return(t=a(this,m))[e]||(t[e]={capability:new me,data:null})};class wc{constructor(e){b(this,O,null);R(this,O,e),this.onContinue=null}get promise(){return a(this,O).capability.promise}cancel(e=0){a(this,O).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=a(this,O).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=a(this,O);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}O=new WeakMap;const H=class H{constructor({callback:e,params:t,objs:i,commonObjs:r,annotationCanvasMap:l,operatorList:d,pageIndex:h,canvasFactory:g,filterFactory:_,useRequestAnimationFrame:w=!1,pdfBug:L=!1,pageColors:M=null}){this.callback=e,this.params=t,this.objs=i,this.commonObjs=r,this.annotationCanvasMap=l,this.operatorListIdx=null,this.operatorList=d,this._pageIndex=h,this.canvasFactory=g,this.filterFactory=_,this._pdfBug=L,this.pageColors=M,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=w===!0&&typeof window<"u",this.cancelled=!1,this.capability=new me,this.task=new wc(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var h,g;if(this.cancelled)return;if(this._canvas){if(a(H,D).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");a(H,D).add(this._canvas)}this._pdfBug&&((h=globalThis.StepperManager)!=null&&h.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:i,viewport:r,transform:l,background:d}=this.params;this.gfx=new Rn(i,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:l,viewport:r,transparency:e,background:d}),this.operatorListIdx=0,this.graphicsReady=!0,(g=this.graphicsReadyCallback)==null||g.call(this)}cancel(e=null,t=0){var i;this.running=!1,this.cancelled=!0,(i=this.gfx)==null||i.endDrawing(),a(H,D).delete(this._canvas),this.callback(e||new li(`Rendering cancelled, page ${this._pageIndex+1}`,t))}operatorListChanged(){var e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),a(H,D).delete(this._canvas),this.callback())))}};D=new WeakMap,b(H,D,new WeakSet);let ug=H;const _c="4.0.381",AE="231c79800",$r=1e5,ci=30,cl=.8,zu=new Map;function ss(v,e){let t;if(e&&fe.isOffscreenCanvasSupported)t=new OffscreenCanvas(v,v).getContext("2d",{alpha:!1});else{const i=document.createElement("canvas");i.width=i.height=v,t=i.getContext("2d",{alpha:!1})}return t}function dl(v,e){const t=zu.get(v);if(t)return t;const i=ss(ci,e);i.font=`${ci}px ${v}`;const r=i.measureText("");let l=r.fontBoundingBoxAscent,d=Math.abs(r.fontBoundingBoxDescent);if(l){const g=l/(l+d);return zu.set(v,g),i.canvas.width=i.canvas.height=0,g}i.strokeStyle="red",i.clearRect(0,0,ci,ci),i.strokeText("g",0,0);let h=i.getImageData(0,0,ci,ci).data;d=0;for(let g=h.length-1-3;g>=0;g-=4)if(h[g]>0){d=Math.ceil(g/4/ci);break}i.clearRect(0,0,ci,ci),i.strokeText("A",0,ci),h=i.getImageData(0,0,ci,ci).data,l=0;for(let g=0,_=h.length;g<_;g+=4)if(h[g]>0){l=ci-Math.floor(g/4/ci);break}if(i.canvas.width=i.canvas.height=0,l){const g=l/(l+d);return zu.set(v,g),g}return zu.set(v,cl),cl}function CE(v,e,t){const i=document.createElement("span"),r={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};v._textDivs.push(i);const l=J.transform(v._transform,e.transform);let d=Math.atan2(l[1],l[0]);const h=t[e.fontName];h.vertical&&(d+=Math.PI/2);const g=v._fontInspectorEnabled&&h.fontSubstitution||h.fontFamily,_=Math.hypot(l[2],l[3]),w=_*dl(g,v._isOffscreenCanvasSupported);let L,M;d===0?(L=l[4],M=l[5]-w):(L=l[4]+w*Math.sin(d),M=l[5]-w*Math.cos(d));const N="calc(var(--scale-factor)*",F=i.style;v._container===v._rootContainer?(F.left=`${(100*L/v._pageWidth).toFixed(2)}%`,F.top=`${(100*M/v._pageHeight).toFixed(2)}%`):(F.left=`${N}${L.toFixed(2)}px)`,F.top=`${N}${M.toFixed(2)}px)`),F.fontSize=`${N}${_.toFixed(2)}px)`,F.fontFamily=g,r.fontSize=_,i.setAttribute("role","presentation"),i.textContent=e.str,i.dir=e.dir,v._fontInspectorEnabled&&(i.dataset.fontName=h.fontSubstitutionLoadedName||e.fontName),d!==0&&(r.angle=d*(180/Math.PI));let z=!1;if(e.str.length>1)z=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const ie=Math.abs(e.transform[0]),K=Math.abs(e.transform[3]);ie!==K&&Math.max(ie,K)/Math.min(ie,K)>1.5&&(z=!0)}z&&(r.canvasWidth=h.vertical?e.height:e.width),v._textDivProperties.set(i,r),v._isReadableStream&&v._layoutText(i)}function qr(v){const{div:e,scale:t,properties:i,ctx:r,prevFontSize:l,prevFontFamily:d}=v,{style:h}=e;let g="";if(i.canvasWidth!==0&&i.hasText){const{fontFamily:_}=h,{canvasWidth:w,fontSize:L}=i;(l!==L||d!==_)&&(r.font=`${L*t}px ${_}`,v.prevFontSize=L,v.prevFontFamily=_);const{width:M}=r.measureText(e.textContent);M>0&&(g=`scaleX(${w*t/M})`)}i.angle!==0&&(g=`rotate(${i.angle}deg) ${g}`),g.length>0&&(h.transform=g)}function PE(v){if(v._canceled)return;const e=v._textDivs,t=v._capability;if(e.length>$r){t.resolve();return}if(!v._isReadableStream)for(const r of e)v._layoutText(r);t.resolve()}class hl{constructor({textContentSource:e,container:t,viewport:i,textDivs:r,textDivProperties:l,textContentItemsStr:d,isOffscreenCanvasSupported:h}){var M;this._textContentSource=e,this._isReadableStream=e instanceof ReadableStream,this._container=this._rootContainer=t,this._textDivs=r||[],this._textContentItemsStr=d||[],this._isOffscreenCanvasSupported=h,this._fontInspectorEnabled=!!((M=globalThis.FontInspector)!=null&&M.enabled),this._reader=null,this._textDivProperties=l||new WeakMap,this._canceled=!1,this._capability=new me,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:i.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:ss(0,h)};const{pageWidth:g,pageHeight:_,pageX:w,pageY:L}=i.rawDims;this._transform=[1,0,0,-1,-w,L+_],this._pageWidth=g,this._pageHeight=_,Li(t,i),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new Fe("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new Fe("TextLayer task cancelled."))}_processItems(e,t){for(const i of e){if(i.str===void 0){if(i.type==="beginMarkedContentProps"||i.type==="beginMarkedContent"){const r=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),i.id!==null&&this._container.setAttribute("id",`${i.id}`),r.append(this._container)}else i.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(i.str),CE(this,i,t)}}_layoutText(e){const t=this._layoutTextParams.properties=this._textDivProperties.get(e);if(this._layoutTextParams.div=e,qr(this._layoutTextParams),t.hasText&&this._container.append(e),t.hasEOL){const i=document.createElement("br");i.setAttribute("role","presentation"),this._container.append(i)}}_render(){const e=new me;let t=Object.create(null);if(this._isReadableStream){const i=()=>{this._reader.read().then(({value:r,done:l})=>{if(l){e.resolve();return}Object.assign(t,r.styles),this._processItems(r.items,t),i()},e.reject)};this._reader=this._textContentSource.getReader(),i()}else if(this._textContentSource){const{items:i,styles:r}=this._textContentSource;this._processItems(i,r),e.resolve()}else throw new Error('No "textContentSource" parameter specified.');e.promise.then(()=>{t=null,PE(this)},this._capability.reject)}}function xE(v){const e=new hl(v);return e._render(),e}function yc({container:v,viewport:e,textDivs:t,textDivProperties:i,isOffscreenCanvasSupported:r,mustRotate:l=!0,mustRescale:d=!0}){if(l&&Li(v,{rotation:e.rotation}),d){const h=ss(0,r),_={prevFontSize:null,prevFontFamily:null,div:null,scale:e.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:h};for(const w of t)_.properties=i.get(w),_.div=w,qr(_)}}function ev(v){return Math.floor(Math.max(0,Math.min(1,v))*255).toString(16).padStart(2,"0")}function sr(v){return Math.max(0,Math.min(255,255*v))}class tv{static CMYK_G([e,t,i,r]){return["G",1-Math.min(1,.3*e+.59*i+.11*t+r)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=sr(e),[e,e,e]}static G_HTML([e]){const t=ev(e);return`#${t}${t}${t}`}static RGB_G([e,t,i]){return["G",.3*e+.59*t+.11*i]}static RGB_rgb(e){return e.map(sr)}static RGB_HTML(e){return`#${e.map(ev).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,i,r]){return["RGB",1-Math.min(1,e+r),1-Math.min(1,i+r),1-Math.min(1,t+r)]}static CMYK_rgb([e,t,i,r]){return[sr(1-Math.min(1,e+r)),sr(1-Math.min(1,i+r)),sr(1-Math.min(1,t+r))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,i]){const r=1-e,l=1-t,d=1-i,h=Math.min(r,l,d);return["CMYK",r,l,d,h]}}class ul{static setupStorage(e,t,i,r,l){const d=r.getValue(t,{value:null});switch(i.name){case"textarea":if(d.value!==null&&(e.textContent=d.value),l==="print")break;e.addEventListener("input",h=>{r.setValue(t,{value:h.target.value})});break;case"input":if(i.attributes.type==="radio"||i.attributes.type==="checkbox"){if(d.value===i.attributes.xfaOn?e.setAttribute("checked",!0):d.value===i.attributes.xfaOff&&e.removeAttribute("checked"),l==="print")break;e.addEventListener("change",h=>{r.setValue(t,{value:h.target.checked?h.target.getAttribute("xfaOn"):h.target.getAttribute("xfaOff")})})}else{if(d.value!==null&&e.setAttribute("value",d.value),l==="print")break;e.addEventListener("input",h=>{r.setValue(t,{value:h.target.value})})}break;case"select":if(d.value!==null){e.setAttribute("value",d.value);for(const h of i.children)h.attributes.value===d.value?h.attributes.selected=!0:h.attributes.hasOwnProperty("selected")&&delete h.attributes.selected}e.addEventListener("input",h=>{const g=h.target.options,_=g.selectedIndex===-1?"":g[g.selectedIndex].value;r.setValue(t,{value:_})});break}}static setAttributes({html:e,element:t,storage:i=null,intent:r,linkService:l}){const{attributes:d}=t,h=e instanceof HTMLAnchorElement;d.type==="radio"&&(d.name=`${d.name}-${r}`);for(const[g,_]of Object.entries(d))if(_!=null)switch(g){case"class":_.length&&e.setAttribute(g,_.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",_);break;case"style":Object.assign(e.style,_);break;case"textContent":e.textContent=_;break;default:(!h||g!=="href"&&g!=="newWindow")&&e.setAttribute(g,_)}h&&l.addLinkAttributes(e,d.href,d.newWindow),i&&d.dataId&&this.setupStorage(e,d.dataId,t,i)}static render(e){var L,M;const t=e.annotationStorage,i=e.linkService,r=e.xfaHtml,l=e.intent||"display",d=document.createElement(r.name);r.attributes&&this.setAttributes({html:d,element:r,intent:l,linkService:i});const h=l!=="richText",g=e.div;if(g.append(d),e.viewport){const N=`matrix(${e.viewport.transform.join(",")})`;g.style.transform=N}h&&g.setAttribute("class","xfaLayer xfaFont");const _=[];if(r.children.length===0){if(r.value){const N=document.createTextNode(r.value);d.append(N),h&&zr.shouldBuildText(r.name)&&_.push(N)}return{textDivs:_}}const w=[[r,-1,d]];for(;w.length>0;){const[N,F,z]=w.at(-1);if(F+1===N.children.length){w.pop();continue}const ie=N.children[++w.at(-1)[1]];if(ie===null)continue;const{name:K}=ie;if(K==="#text"){const ue=document.createTextNode(ie.value);_.push(ue),z.append(ue);continue}const we=(L=ie==null?void 0:ie.attributes)!=null&&L.xmlns?document.createElementNS(ie.attributes.xmlns,K):document.createElement(K);if(z.append(we),ie.attributes&&this.setAttributes({html:we,element:ie,storage:t,intent:l,linkService:i}),((M=ie.children)==null?void 0:M.length)>0)w.push([ie,-1,we]);else if(ie.value){const ue=document.createTextNode(ie.value);h&&zr.shouldBuildText(K)&&_.push(ue),we.append(ue)}}for(const N of g.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))N.setAttribute("readOnly",!0);return{textDivs:_}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const Id=1e3,Ii=9,Os=new WeakSet;function ns(v){return{width:v[2]-v[0],height:v[3]-v[1]}}class Ec{static create(e){switch(e.data.annotationType){case Z.LINK:return new po(e);case Z.TEXT:return new TE(e);case Z.WIDGET:switch(e.data.fieldType){case"Tx":return new LE(e);case"Btn":return e.data.radioButton?new fl(e):e.data.checkBox?new RE(e):new ME(e);case"Ch":return new Ac(e);case"Sig":return new Sc(e)}return new sn(e);case Z.POPUP:return new fg(e);case Z.FREETEXT:return new iv(e);case Z.LINE:return new Cc(e);case Z.SQUARE:return new IE(e);case Z.CIRCLE:return new Pc(e);case Z.POLYLINE:return new sv(e);case Z.CARET:return new kE(e);case Z.INK:return new Gr(e);case Z.POLYGON:return new go(e);case Z.HIGHLIGHT:return new OE(e);case Z.UNDERLINE:return new Kr(e);case Z.SQUIGGLY:return new NE(e);case Z.STRIKEOUT:return new xc(e);case Z.STAMP:return new nv(e);case Z.FILEATTACHMENT:return new gl(e);default:return new yi(e)}}}const ae=class ae{constructor(e,{isRenderable:t=!1,ignoreBorder:i=!1,createQuadrilaterals:r=!1}={}){b(this,q,!1);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(i)),r&&this._createQuadrilaterals()}static _hasPopupData({titleObj:e,contentsObj:t,richText:i}){return!!(e!=null&&e.str||t!=null&&t.str||i!=null&&i.str)}get hasPopupData(){return ae._hasPopupData(this.data)}_createContainer(e){const{data:t,parent:{page:i,viewport:r}}=this,l=document.createElement("section");l.setAttribute("data-annotation-id",t.id),this instanceof sn||(l.tabIndex=Id),l.style.zIndex=this.parent.zIndex++,this.data.popupRef&&l.setAttribute("aria-haspopup","dialog"),t.noRotate&&l.classList.add("norotate");const{pageWidth:d,pageHeight:h,pageX:g,pageY:_}=r.rawDims;if(!t.rect||this instanceof fg){const{rotation:F}=t;return!t.hasOwnCanvas&&F!==0&&this.setRotation(F,l),l}const{width:w,height:L}=ns(t.rect),M=J.normalizeRect([t.rect[0],i.view[3]-t.rect[1]+i.view[1],t.rect[2],i.view[3]-t.rect[3]+i.view[1]]);if(!e&&t.borderStyle.width>0){l.style.borderWidth=`${t.borderStyle.width}px`;const F=t.borderStyle.horizontalCornerRadius,z=t.borderStyle.verticalCornerRadius;if(F>0||z>0){const K=`calc(${F}px * var(--scale-factor)) / calc(${z}px * var(--scale-factor))`;l.style.borderRadius=K}else if(this instanceof fl){const K=`calc(${w}px * var(--scale-factor)) / calc(${L}px * var(--scale-factor))`;l.style.borderRadius=K}switch(t.borderStyle.style){case _e.SOLID:l.style.borderStyle="solid";break;case _e.DASHED:l.style.borderStyle="dashed";break;case _e.BEVELED:ce("Unimplemented border style: beveled");break;case _e.INSET:ce("Unimplemented border style: inset");break;case _e.UNDERLINE:l.style.borderBottomStyle="solid";break}const ie=t.borderColor||null;ie?(R(this,q,!0),l.style.borderColor=J.makeHexColor(ie[0]|0,ie[1]|0,ie[2]|0)):l.style.borderWidth=0}l.style.left=`${100*(M[0]-g)/d}%`,l.style.top=`${100*(M[1]-_)/h}%`;const{rotation:N}=t;return t.hasOwnCanvas||N===0?(l.style.width=`${100*w/d}%`,l.style.height=`${100*L/h}%`):this.setRotation(N,l),l}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:i,pageHeight:r}=this.parent.viewport.rawDims,{width:l,height:d}=ns(this.data.rect);let h,g;e%180===0?(h=100*l/i,g=100*d/r):(h=100*d/i,g=100*l/r),t.style.width=`${h}%`,t.style.height=`${g}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,i,r)=>{const l=r.detail[t],d=l[0],h=l.slice(1);r.target.style[i]=tv[`${d}_HTML`](h),this.annotationStorage.setValue(this.data.id,{[i]:tv[`${d}_rgb`](h)})};return be(this,"_commonActions",{display:t=>{const{display:i}=t.detail,r=i%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:i===1||i===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:i}=t.detail;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:i,noView:i})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const i=t.detail.rotation;this.setRotation(i),this.annotationStorage.setValue(this.data.id,{rotation:i})}})}_dispatchEventFromSandbox(e,t){const i=this._commonActions;for(const r of Object.keys(t.detail)){const l=e[r]||i[r];l==null||l(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const i=this._commonActions;for(const[r,l]of Object.entries(t)){const d=i[r];if(d){const h={detail:{[r]:l},target:e};d(h),delete t[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,i,r,l]=this.data.rect;if(e.length===1){const[,{x:z,y:ie},{x:K,y:we}]=e[0];if(r===z&&l===ie&&t===K&&i===we)return}const{style:d}=this.container;let h;if(a(this,q)){const{borderColor:z,borderWidth:ie}=d;d.borderWidth=0,h=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${z}" stroke-width="${ie}">`],this.container.classList.add("hasBorder")}const g=r-t,_=l-i,{svgFactory:w}=this,L=w.createElement("svg");L.classList.add("quadrilateralsContainer"),L.setAttribute("width",0),L.setAttribute("height",0);const M=w.createElement("defs");L.append(M);const N=w.createElement("clipPath"),F=`clippath_${this.data.id}`;N.setAttribute("id",F),N.setAttribute("clipPathUnits","objectBoundingBox"),M.append(N);for(const[,{x:z,y:ie},{x:K,y:we}]of e){const ue=w.createElement("rect"),pe=(K-t)/g,Te=(l-ie)/_,je=(z-K)/g,rt=(ie-we)/_;ue.setAttribute("x",pe),ue.setAttribute("y",Te),ue.setAttribute("width",je),ue.setAttribute("height",rt),N.append(ue),h==null||h.push(`<rect vector-effect="non-scaling-stroke" x="${pe}" y="${Te}" width="${je}" height="${rt}"/>`)}a(this,q)&&(h.push("</g></svg>')"),d.backgroundImage=h.join("")),this.container.append(L),this.container.style.clipPath=`url(#${F})`}_createPopup(){const{container:e,data:t}=this;e.setAttribute("aria-haspopup","dialog");const i=new fg({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation},parent:this.parent,elements:[this]});this.parent.div.append(i.render())}render(){W("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const i=[];if(this._fieldObjects){const r=this._fieldObjects[e];if(r)for(const{page:l,id:d,exportValues:h}of r){if(l===-1||d===t)continue;const g=typeof h=="string"?h:null,_=document.querySelector(`[data-element-id="${d}"]`);if(_&&!Os.has(_)){ce(`_getElementsByName - element not allowed: ${d}`);continue}i.push({id:d,exportValue:g,domElement:_})}return i}for(const r of document.getElementsByName(e)){const{exportValue:l}=r,d=r.getAttribute("data-element-id");d!==t&&Os.has(r)&&i.push({id:d,exportValue:l,domElement:r})}return i}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}get _isEditable(){return!1}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var i;(i=this.linkService.eventBus)==null||i.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})})}};q=new WeakMap;let yi=ae;class po extends yi{constructor(t,i=null){super(t,{isRenderable:!0,ignoreBorder:!!(i!=null&&i.ignoreBorder),createQuadrilaterals:!0});b(this,ve);b(this,qe);b(this,et);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:i}=this,r=document.createElement("a");r.setAttribute("data-element-id",t.id);let l=!1;return t.url?(i.addLinkAttributes(r,t.url,t.newWindow),l=!0):t.action?(this._bindNamedAction(r,t.action),l=!0):t.attachment?(S(this,qe,ky).call(this,r,t.attachment,t.attachmentDest),l=!0):t.setOCGState?(S(this,et,Oy).call(this,r,t.setOCGState),l=!0):t.dest?(this._bindLink(r,t.dest),l=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(r,t),l=!0),t.resetForm?(this._bindResetFormAction(r,t.resetForm),l=!0):this.isTooltipOnly&&!l&&(this._bindLink(r,""),l=!0)),this.container.classList.add("linkAnnotation"),l&&this.container.append(r),this.container}_bindLink(t,i){t.href=this.linkService.getDestinationHash(i),t.onclick=()=>(i&&this.linkService.goToDestination(i),!1),(i||i==="")&&S(this,ve,ic).call(this)}_bindNamedAction(t,i){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(i),!1),S(this,ve,ic).call(this)}_bindJSAction(t,i){t.href=this.linkService.getAnchorUrl("");const r=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const l of Object.keys(i.actions)){const d=r.get(l);d&&(t[d]=()=>{var h;return(h=this.linkService.eventBus)==null||h.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i.id,name:l}}),!1})}t.onclick||(t.onclick=()=>!1),S(this,ve,ic).call(this)}_bindResetFormAction(t,i){const r=t.onclick;if(r||(t.href=this.linkService.getAnchorUrl("")),S(this,ve,ic).call(this),!this._fieldObjects){ce('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),r||(t.onclick=()=>!1);return}t.onclick=()=>{var L;r==null||r();const{fields:l,refs:d,include:h}=i,g=[];if(l.length!==0||d.length!==0){const M=new Set(d);for(const N of l){const F=this._fieldObjects[N]||[];for(const{id:z}of F)M.add(z)}for(const N of Object.values(this._fieldObjects))for(const F of N)M.has(F.id)===h&&g.push(F)}else for(const M of Object.values(this._fieldObjects))g.push(...M);const _=this.annotationStorage,w=[];for(const M of g){const{id:N}=M;switch(w.push(N),M.type){case"text":{const z=M.defaultValue||"";_.setValue(N,{value:z});break}case"checkbox":case"radiobutton":{const z=M.defaultValue===M.exportValues;_.setValue(N,{value:z});break}case"combobox":case"listbox":{const z=M.defaultValue||"";_.setValue(N,{value:z});break}default:continue}const F=document.querySelector(`[data-element-id="${N}"]`);if(F){if(!Os.has(F)){ce(`_bindResetFormAction - element not allowed: ${N}`);continue}}else continue;F.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((L=this.linkService.eventBus)==null||L.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:w,name:"ResetForm"}})),!1}}}ve=new WeakSet,ic=function(){this.container.setAttribute("data-internal-link","")},qe=new WeakSet,ky=function(t,i,r=null){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>{var l;return(l=this.downloadManager)==null||l.openOrDownloadData(i.content,i.filename,r),!1},S(this,ve,ic).call(this)},et=new WeakSet,Oy=function(t,i){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(i),!1),S(this,ve,ic).call(this)};class TE extends yi{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class sn extends yi{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return fe.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,i,r,l){i.includes("mouse")?e.addEventListener(i,d=>{var h;(h=this.linkService.eventBus)==null||h.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:l(d),shift:d.shiftKey,modifier:this._getKeyModifier(d)}})}):e.addEventListener(i,d=>{var h;if(i==="blur"){if(!t.focused||!d.relatedTarget)return;t.focused=!1}else if(i==="focus"){if(t.focused)return;t.focused=!0}l&&((h=this.linkService.eventBus)==null||h.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:l(d)}}))})}_setEventListeners(e,t,i,r){var l,d,h;for(const[g,_]of i)(_==="Action"||(l=this.data.actions)!=null&&l[_])&&((_==="Focus"||_==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,g,_,r),_==="Focus"&&!((d=this.data.actions)!=null&&d.Blur)?this._setEventListener(e,t,"blur","Blur",null):_==="Blur"&&!((h=this.data.actions)!=null&&h.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":J.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:i}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||Ii,l=e.style;let d;const h=2,g=_=>Math.round(10*_)/10;if(this.data.multiLine){const _=Math.abs(this.data.rect[3]-this.data.rect[1]-h),w=Math.round(_/(te*r))||1,L=_/w;d=Math.min(r,g(L/te))}else{const _=Math.abs(this.data.rect[3]-this.data.rect[1]-h);d=Math.min(r,g(_/te))}l.fontSize=`calc(${d}px * var(--scale-factor))`,l.color=J.makeHexColor(i[0],i[1],i[2]),this.data.textAlignment!==null&&(l.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class LE extends sn{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,i,r){const l=this.annotationStorage;for(const d of this._getElementsByName(e.name,e.id))d.domElement&&(d.domElement[t]=i),l.setValue(d.id,{[r]:i})}render(){var r,l;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){const d=e.getValue(t,{value:this.data.fieldValue});let h=d.value||"";const g=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;g&&h.length>g&&(h=h.slice(0,g));let _=d.formattedValue||((r=this.data.textContent)==null?void 0:r.join(`
`))||null;_&&this.data.comb&&(_=_.replaceAll(/\s+/g,""));const w={userValue:h,formattedValue:_,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=_??h,this.data.doNotScroll&&(i.style.overflowY="hidden")):(i=document.createElement("input"),i.type="text",i.setAttribute("value",_??h),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),Os.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=Id,this._setRequired(i,this.data.required),g&&(i.maxLength=g),i.addEventListener("input",M=>{e.setValue(t,{value:M.target.value}),this.setPropertyOnSiblings(i,"value",M.target.value,"value"),w.formattedValue=null}),i.addEventListener("resetform",M=>{const N=this.data.defaultFieldValue??"";i.value=w.userValue=N,w.formattedValue=null});let L=M=>{const{formattedValue:N}=w;N!=null&&(M.target.value=N),M.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",N=>{var z;if(w.focused)return;const{target:F}=N;w.userValue&&(F.value=w.userValue),w.lastCommittedValue=F.value,w.commitKey=1,(z=this.data.actions)!=null&&z.Focus||(w.focused=!0)}),i.addEventListener("updatefromsandbox",N=>{this.showElementAndHideCanvas(N.target);const F={value(z){w.userValue=z.detail.value??"",e.setValue(t,{value:w.userValue.toString()}),z.target.value=w.userValue},formattedValue(z){const{formattedValue:ie}=z.detail;w.formattedValue=ie,ie!=null&&z.target!==document.activeElement&&(z.target.value=ie),e.setValue(t,{formattedValue:ie})},selRange(z){z.target.setSelectionRange(...z.detail.selRange)},charLimit:z=>{var ue;const{charLimit:ie}=z.detail,{target:K}=z;if(ie===0){K.removeAttribute("maxLength");return}K.setAttribute("maxLength",ie);let we=w.userValue;!we||we.length<=ie||(we=we.slice(0,ie),K.value=w.userValue=we,e.setValue(t,{value:we}),(ue=this.linkService.eventBus)==null||ue.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:we,willCommit:!0,commitKey:1,selStart:K.selectionStart,selEnd:K.selectionEnd}}))}};this._dispatchEventFromSandbox(F,N)}),i.addEventListener("keydown",N=>{var ie;w.commitKey=1;let F=-1;if(N.key==="Escape"?F=0:N.key==="Enter"&&!this.data.multiLine?F=2:N.key==="Tab"&&(w.commitKey=3),F===-1)return;const{value:z}=N.target;w.lastCommittedValue!==z&&(w.lastCommittedValue=z,w.userValue=z,(ie=this.linkService.eventBus)==null||ie.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:z,willCommit:!0,commitKey:F,selStart:N.target.selectionStart,selEnd:N.target.selectionEnd}}))});const M=L;L=null,i.addEventListener("blur",N=>{var z,ie;if(!w.focused||!N.relatedTarget)return;(z=this.data.actions)!=null&&z.Blur||(w.focused=!1);const{value:F}=N.target;w.userValue=F,w.lastCommittedValue!==F&&((ie=this.linkService.eventBus)==null||ie.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:F,willCommit:!0,commitKey:w.commitKey,selStart:N.target.selectionStart,selEnd:N.target.selectionEnd}})),M(N)}),(l=this.data.actions)!=null&&l.Keystroke&&i.addEventListener("beforeinput",N=>{var Te;w.lastCommittedValue=null;const{data:F,target:z}=N,{value:ie,selectionStart:K,selectionEnd:we}=z;let ue=K,pe=we;switch(N.inputType){case"deleteWordBackward":{const je=ie.substring(0,K).match(/\w*[^\w]*$/);je&&(ue-=je[0].length);break}case"deleteWordForward":{const je=ie.substring(K).match(/^[^\w]*\w*/);je&&(pe+=je[0].length);break}case"deleteContentBackward":K===we&&(ue-=1);break;case"deleteContentForward":K===we&&(pe+=1);break}N.preventDefault(),(Te=this.linkService.eventBus)==null||Te.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:ie,change:F||"",willCommit:!1,selStart:ue,selEnd:pe}})}),this._setEventListeners(i,w,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],N=>N.target.value)}if(L&&i.addEventListener("blur",L),this.data.comb){const N=(this.data.rect[2]-this.data.rect[0])/g;i.classList.add("comb"),i.style.letterSpacing=`calc(${N}px * var(--scale-factor) - 1ch)`}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class Sc extends sn{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class RE extends sn{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,i=t.id;let r=e.getValue(i,{value:t.exportValue===t.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",e.setValue(i,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const l=document.createElement("input");return Os.add(l),l.setAttribute("data-element-id",i),l.disabled=t.readOnly,this._setRequired(l,this.data.required),l.type="checkbox",l.name=t.fieldName,r&&l.setAttribute("checked",!0),l.setAttribute("exportValue",t.exportValue),l.tabIndex=Id,l.addEventListener("change",d=>{const{name:h,checked:g}=d.target;for(const _ of this._getElementsByName(h,i)){const w=g&&_.exportValue===t.exportValue;_.domElement&&(_.domElement.checked=w),e.setValue(_.id,{value:w})}e.setValue(i,{value:g})}),l.addEventListener("resetform",d=>{const h=t.defaultFieldValue||"Off";d.target.checked=h===t.exportValue}),this.enableScripting&&this.hasJSActions&&(l.addEventListener("updatefromsandbox",d=>{const h={value(g){g.target.checked=g.detail.value!=="Off",e.setValue(i,{value:g.target.checked})}};this._dispatchEventFromSandbox(h,d)}),this._setEventListeners(l,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],d=>d.target.checked)),this._setBackgroundColor(l),this._setDefaultPropertiesFromJS(l),this.container.append(l),this.container}}class fl extends sn{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,i=t.id;let r=e.getValue(i,{value:t.fieldValue===t.buttonValue}).value;if(typeof r=="string"&&(r=r!==t.buttonValue,e.setValue(i,{value:r})),r)for(const d of this._getElementsByName(t.fieldName,i))e.setValue(d.id,{value:!1});const l=document.createElement("input");if(Os.add(l),l.setAttribute("data-element-id",i),l.disabled=t.readOnly,this._setRequired(l,this.data.required),l.type="radio",l.name=t.fieldName,r&&l.setAttribute("checked",!0),l.tabIndex=Id,l.addEventListener("change",d=>{const{name:h,checked:g}=d.target;for(const _ of this._getElementsByName(h,i))e.setValue(_.id,{value:!1});e.setValue(i,{value:g})}),l.addEventListener("resetform",d=>{const h=t.defaultFieldValue;d.target.checked=h!=null&&h===t.buttonValue}),this.enableScripting&&this.hasJSActions){const d=t.buttonValue;l.addEventListener("updatefromsandbox",h=>{const g={value:_=>{const w=d===_.detail.value;for(const L of this._getElementsByName(_.target.name)){const M=w&&L.id===i;L.domElement&&(L.domElement.checked=M),e.setValue(L.id,{value:M})}}};this._dispatchEventFromSandbox(g,h)}),this._setEventListeners(l,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],h=>h.target.checked)}return this._setBackgroundColor(l),this._setDefaultPropertiesFromJS(l),this.container.append(l),this.container}}class ME extends po{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(e.title=this.data.alternativeText);const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",i=>{this._dispatchEventFromSandbox({},i)})),e}}class Ac extends sn{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,i=e.getValue(t,{value:this.data.fieldValue}),r=document.createElement("select");Os.add(r),r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=Id;let l=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",w=>{const L=this.data.defaultFieldValue;for(const M of r.options)M.selected=M.value===L});for(const w of this.data.options){const L=document.createElement("option");L.textContent=w.displayValue,L.value=w.exportValue,i.value.includes(w.exportValue)&&(L.setAttribute("selected",!0),l=!1),r.append(L)}let d=null;if(l){const w=document.createElement("option");w.value=" ",w.setAttribute("hidden",!0),w.setAttribute("selected",!0),r.prepend(w),d=()=>{w.remove(),r.removeEventListener("input",d),d=null},r.addEventListener("input",d)}const h=w=>{const L=w?"value":"textContent",{options:M,multiple:N}=r;return N?Array.prototype.filter.call(M,F=>F.selected).map(F=>F[L]):M.selectedIndex===-1?null:M[M.selectedIndex][L]};let g=h(!1);const _=w=>{const L=w.target.options;return Array.prototype.map.call(L,M=>({displayValue:M.textContent,exportValue:M.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",w=>{const L={value(M){d==null||d();const N=M.detail.value,F=new Set(Array.isArray(N)?N:[N]);for(const z of r.options)z.selected=F.has(z.value);e.setValue(t,{value:h(!0)}),g=h(!1)},multipleSelection(M){r.multiple=!0},remove(M){const N=r.options,F=M.detail.remove;N[F].selected=!1,r.remove(F),N.length>0&&Array.prototype.findIndex.call(N,ie=>ie.selected)===-1&&(N[0].selected=!0),e.setValue(t,{value:h(!0),items:_(M)}),g=h(!1)},clear(M){for(;r.length!==0;)r.remove(0);e.setValue(t,{value:null,items:[]}),g=h(!1)},insert(M){const{index:N,displayValue:F,exportValue:z}=M.detail.insert,ie=r.children[N],K=document.createElement("option");K.textContent=F,K.value=z,ie?ie.before(K):r.append(K),e.setValue(t,{value:h(!0),items:_(M)}),g=h(!1)},items(M){const{items:N}=M.detail;for(;r.length!==0;)r.remove(0);for(const F of N){const{displayValue:z,exportValue:ie}=F,K=document.createElement("option");K.textContent=z,K.value=ie,r.append(K)}r.options.length>0&&(r.options[0].selected=!0),e.setValue(t,{value:h(!0),items:_(M)}),g=h(!1)},indices(M){const N=new Set(M.detail.indices);for(const F of M.target.options)F.selected=N.has(F.index);e.setValue(t,{value:h(!0)}),g=h(!1)},editable(M){M.target.disabled=!M.detail.editable}};this._dispatchEventFromSandbox(L,w)}),r.addEventListener("input",w=>{var M;const L=h(!0);e.setValue(t,{value:L}),w.preventDefault(),(M=this.linkService.eventBus)==null||M.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:g,changeEx:L,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],w=>w.target.value)):r.addEventListener("input",function(w){e.setValue(t,{value:h(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class fg extends yi{constructor(e){const{data:t,elements:i}=e;super(e,{isRenderable:yi._hasPopupData(t)}),this.elements=i}render(){this.container.classList.add("popupAnnotation");const e=new pl({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(const i of this.elements)i.popup=e,t.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",t.map(i=>`${Y}${i}`).join(",")),this.container}}class pl{constructor({container:e,color:t,elements:i,titleObj:r,modificationDate:l,contentsObj:d,richText:h,parent:g,rect:_,parentRect:w,open:L}){b(this,ga);b(this,Wn);b(this,Ar);b(this,Cr);b(this,ot,S(this,ga,Ny).bind(this));b(this,Xe,S(this,Cr,tb).bind(this));b(this,vt,S(this,Ar,eb).bind(this));b(this,ht,S(this,Wn,_p).bind(this));b(this,Ue,null);b(this,st,null);b(this,yt,null);b(this,Ut,null);b(this,Lt,null);b(this,kt,null);b(this,Pt,null);b(this,Gt,!1);b(this,Cs,null);b(this,yr,null);b(this,Er,null);b(this,Sr,null);b(this,wn,!1);var M;R(this,st,e),R(this,Sr,r),R(this,yt,d),R(this,Er,h),R(this,kt,g),R(this,Ue,t),R(this,yr,_),R(this,Pt,w),R(this,Lt,i),R(this,Ut,Br.toDateObject(l)),this.trigger=i.flatMap(N=>N.getElementsToTriggerPopup());for(const N of this.trigger)N.addEventListener("click",a(this,ht)),N.addEventListener("mouseenter",a(this,vt)),N.addEventListener("mouseleave",a(this,Xe)),N.classList.add("popupTriggerArea");for(const N of i)(M=N.container)==null||M.addEventListener("keydown",a(this,ot));a(this,st).hidden=!0,L&&S(this,Wn,_p).call(this)}render(){if(a(this,Cs))return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:i,pageX:r,pageY:l}}}=a(this,kt),d=R(this,Cs,document.createElement("div"));if(d.className="popup",a(this,Ue)){const ue=d.style.outlineColor=J.makeHexColor(...a(this,Ue));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?d.style.backgroundColor=`color-mix(in srgb, ${ue} 30%, white)`:d.style.backgroundColor=J.makeHexColor(...a(this,Ue).map(Te=>Math.floor(.7*(255-Te)+Te)))}const h=document.createElement("span");h.className="header";const g=document.createElement("h1");if(h.append(g),{dir:g.dir,str:g.textContent}=a(this,Sr),d.append(h),a(this,Ut)){const ue=document.createElement("span");ue.classList.add("popupDate"),ue.setAttribute("data-l10n-id","pdfjs-annotation-date-string"),ue.setAttribute("data-l10n-args",JSON.stringify({date:a(this,Ut).toLocaleDateString(),time:a(this,Ut).toLocaleTimeString()})),h.append(ue)}const _=a(this,yt),w=a(this,Er);if(w!=null&&w.str&&(!(_!=null&&_.str)||_.str===w.str))ul.render({xfaHtml:w.html,intent:"richText",div:d}),d.lastChild.classList.add("richText","popupContent");else{const ue=this._formatContents(_);d.append(ue)}let L=!!a(this,Pt),M=L?a(this,Pt):a(this,yr);for(const ue of a(this,Lt))if(!M||J.intersect(ue.data.rect,M)!==null){M=ue.data.rect,L=!0;break}const N=J.normalizeRect([M[0],e[3]-M[1]+e[1],M[2],e[3]-M[3]+e[1]]),F=5,z=L?M[2]-M[0]+F:0,ie=N[0]+z,K=N[1],{style:we}=a(this,st);we.left=`${100*(ie-r)/t}%`,we.top=`${100*(K-l)/i}%`,a(this,st).append(d)}_formatContents({str:e,dir:t}){const i=document.createElement("p");i.classList.add("popupContent"),i.dir=t;const r=e.split(/(?:\r\n?|\n)/);for(let l=0,d=r.length;l<d;++l){const h=r[l];i.append(document.createTextNode(h)),l<d-1&&i.append(document.createElement("br"))}return i}forceHide(){R(this,wn,this.isVisible),a(this,wn)&&(a(this,st).hidden=!0)}maybeShow(){a(this,wn)&&(R(this,wn,!1),a(this,st).hidden=!1)}get isVisible(){return a(this,st).hidden===!1}}ot=new WeakMap,Xe=new WeakMap,vt=new WeakMap,ht=new WeakMap,Ue=new WeakMap,st=new WeakMap,yt=new WeakMap,Ut=new WeakMap,Lt=new WeakMap,kt=new WeakMap,Pt=new WeakMap,Gt=new WeakMap,Cs=new WeakMap,yr=new WeakMap,Er=new WeakMap,Sr=new WeakMap,wn=new WeakMap,ga=new WeakSet,Ny=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&a(this,Gt))&&S(this,Wn,_p).call(this)},Wn=new WeakSet,_p=function(){R(this,Gt,!a(this,Gt)),a(this,Gt)?(S(this,Ar,eb).call(this),a(this,st).addEventListener("click",a(this,ht)),a(this,st).addEventListener("keydown",a(this,ot))):(S(this,Cr,tb).call(this),a(this,st).removeEventListener("click",a(this,ht)),a(this,st).removeEventListener("keydown",a(this,ot)))},Ar=new WeakSet,eb=function(){a(this,Cs)||this.render(),this.isVisible?a(this,Gt)&&a(this,st).classList.add("focused"):(a(this,st).hidden=!1,a(this,st).style.zIndex=parseInt(a(this,st).style.zIndex)+1e3)},Cr=new WeakSet,tb=function(){a(this,st).classList.remove("focused"),!(a(this,Gt)||!this.isVisible)&&(a(this,st).hidden=!0,a(this,st).style.zIndex=parseInt(a(this,st).style.zIndex)-1e3)};class iv extends yi{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=Ae.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const i=document.createElement("span");i.textContent=t,e.append(i)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}get _isEditable(){return this.data.hasOwnCanvas}}class Cc extends yi{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});b(this,Wa,null)}render(){this.container.classList.add("lineAnnotation");const t=this.data,{width:i,height:r}=ns(t.rect),l=this.svgFactory.create(i,r,!0),d=R(this,Wa,this.svgFactory.createElement("svg:line"));return d.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),d.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),d.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),d.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),d.setAttribute("stroke-width",t.borderStyle.width||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),l.append(d),this.container.append(l),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,Wa)}addHighlightArea(){this.container.classList.add("highlightArea")}}Wa=new WeakMap;class IE extends yi{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});b(this,Ao,null)}render(){this.container.classList.add("squareAnnotation");const t=this.data,{width:i,height:r}=ns(t.rect),l=this.svgFactory.create(i,r,!0),d=t.borderStyle.width,h=R(this,Ao,this.svgFactory.createElement("svg:rect"));return h.setAttribute("x",d/2),h.setAttribute("y",d/2),h.setAttribute("width",i-d),h.setAttribute("height",r-d),h.setAttribute("stroke-width",d||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),l.append(h),this.container.append(l),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,Ao)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ao=new WeakMap;class Pc extends yi{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});b(this,$a,null)}render(){this.container.classList.add("circleAnnotation");const t=this.data,{width:i,height:r}=ns(t.rect),l=this.svgFactory.create(i,r,!0),d=t.borderStyle.width,h=R(this,$a,this.svgFactory.createElement("svg:ellipse"));return h.setAttribute("cx",i/2),h.setAttribute("cy",r/2),h.setAttribute("rx",i/2-d/2),h.setAttribute("ry",r/2-d/2),h.setAttribute("stroke-width",d||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),l.append(h),this.container.append(l),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,$a)}addHighlightArea(){this.container.classList.add("highlightArea")}}$a=new WeakMap;class sv extends yi{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});b(this,qa,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const t=this.data,{width:i,height:r}=ns(t.rect),l=this.svgFactory.create(i,r,!0);let d=[];for(const g of t.vertices){const _=g.x-t.rect[0],w=t.rect[3]-g.y;d.push(_+","+w)}d=d.join(" ");const h=R(this,qa,this.svgFactory.createElement(this.svgElementName));return h.setAttribute("points",d),h.setAttribute("stroke-width",t.borderStyle.width||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),l.append(h),this.container.append(l),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,qa)}addHighlightArea(){this.container.classList.add("highlightArea")}}qa=new WeakMap;class go extends sv{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class kE extends yi{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class Gr extends yi{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});b(this,Ll,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=Ae.INK}render(){this.container.classList.add(this.containerClassName);const t=this.data,{width:i,height:r}=ns(t.rect),l=this.svgFactory.create(i,r,!0);for(const d of t.inkLists){let h=[];for(const _ of d){const w=_.x-t.rect[0],L=t.rect[3]-_.y;h.push(`${w},${L}`)}h=h.join(" ");const g=this.svgFactory.createElement(this.svgElementName);a(this,Ll).push(g),g.setAttribute("points",h),g.setAttribute("stroke-width",t.borderStyle.width||1),g.setAttribute("stroke","transparent"),g.setAttribute("fill","transparent"),!t.popupRef&&this.hasPopupData&&this._createPopup(),l.append(g)}return this.container.append(l),this.container}getElementsToTriggerPopup(){return a(this,Ll)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ll=new WeakMap;class OE extends yi{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class Kr extends yi{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class NE extends yi{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class xc extends yi{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class nv extends yi{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class gl extends yi{constructor(t){var l;super(t,{isRenderable:!0});b(this,Ga);b(this,Pr,null);const{filename:i,content:r}=this.data.file;this.filename=Js(i,!0),this.content=r,(l=this.linkService.eventBus)==null||l.dispatch("fileattachmentannotation",{source:this,filename:i,content:r})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:i}=this;let r;i.hasAppearance||i.fillAlpha===0?r=document.createElement("div"):(r=document.createElement("img"),r.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(i.name)?"paperclip":"pushpin"}.svg`,i.fillAlpha&&i.fillAlpha<1&&(r.style=`filter: opacity(${Math.round(i.fillAlpha*100)}%);`)),r.addEventListener("dblclick",S(this,Ga,ib).bind(this)),R(this,Pr,r);const{isMac:l}=fe.platform;return t.addEventListener("keydown",d=>{d.key==="Enter"&&(l?d.metaKey:d.ctrlKey)&&S(this,Ga,ib).call(this)}),!i.popupRef&&this.hasPopupData?this._createPopup():r.classList.add("popupTriggerArea"),t.append(r),t}getElementsToTriggerPopup(){return a(this,Pr)}addHighlightArea(){this.container.classList.add("highlightArea")}}Pr=new WeakMap,Ga=new WeakSet,ib=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};class FE{constructor({div:e,accessibilityManager:t,annotationCanvasMap:i,page:r,viewport:l}){b(this,Uc);b(this,Ml);b(this,Rl,null);b(this,Ka,null);b(this,Co,new Map);this.div=e,R(this,Rl,t),R(this,Ka,i),this.page=r,this.viewport=l,this.zIndex=0}async render(e){const{annotations:t}=e,i=this.div;Li(i,this.viewport);const r=new Map,l={data:null,layer:i,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new Tn,annotationStorage:e.annotationStorage||new xd,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const d of t){if(d.noHTML)continue;const h=d.annotationType===Z.POPUP;if(h){const w=r.get(d.id);if(!w)continue;l.elements=w}else{const{width:w,height:L}=ns(d.rect);if(w<=0||L<=0)continue}l.data=d;const g=Ec.create(l);if(!g.isRenderable)continue;if(!h&&d.popupRef){const w=r.get(d.popupRef);w?w.push(g):r.set(d.popupRef,[g])}g.annotationEditorType>0&&a(this,Co).set(g.data.id,g);const _=g.render();d.hidden&&(_.style.visibility="hidden"),S(this,Uc,Fy).call(this,_,d.id)}S(this,Ml,sb).call(this)}update({viewport:e}){const t=this.div;this.viewport=e,Li(t,{rotation:e.rotation}),S(this,Ml,sb).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(a(this,Co).values())}getEditableAnnotation(e){return a(this,Co).get(e)}}Rl=new WeakMap,Ka=new WeakMap,Co=new WeakMap,Uc=new WeakSet,Fy=function(e,t){var r;const i=e.firstChild||e;i.id=`${Y}${t}`,this.div.append(e),(r=a(this,Rl))==null||r.moveElementInDOM(this.div,e,i,!1)},Ml=new WeakSet,sb=function(){if(!a(this,Ka))return;const e=this.div;for(const[t,i]of a(this,Ka)){const r=e.querySelector(`[data-annotation-id="${t}"]`);if(!r)continue;const{firstChild:l}=r;l?l.nodeName==="CANVAS"?l.replaceWith(i):l.before(i):r.append(i)}a(this,Ka).clear()};const ei=class ei extends Vt{constructor(t){super({...t,name:"freeTextEditor"});b(this,Qt);b(this,vi);b(this,Xs);b(this,ds);b(this,Ri);b(this,Bi);b(this,_n);b(this,Il,this.editorDivBlur.bind(this));b(this,kl,this.editorDivFocus.bind(this));b(this,re,this.editorDivInput.bind(this));b(this,Ie,this.editorDivKeydown.bind(this));b(this,$e,void 0);b(this,mt,"");b(this,ut,`${this.id}-editor`);b(this,At,void 0);b(this,Rt,null);R(this,$e,t.color||ei._defaultColor||Vt._defaultLineColor),R(this,At,t.fontSize||ei._defaultFontSize)}static get _keyboardManager(){const t=ei.prototype,i=d=>d.isEmpty(),r=Qn.TRANSLATE_SMALL,l=Qn.TRANSLATE_BIG;return be(this,"_keyboardManager",new Yo([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-l,0],checker:i}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[r,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[l,0],checker:i}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-l],checker:i}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,r],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,l],checker:i}]]))}static initialize(t){Vt.initialize(t,{strings:["pdfjs-free-text-default-content"]});const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,i){switch(t){case ge.FREETEXT_SIZE:ei._defaultFontSize=i;break;case ge.FREETEXT_COLOR:ei._defaultColor=i;break}}updateParams(t,i){switch(t){case ge.FREETEXT_SIZE:S(this,Qt,Dy).call(this,i);break;case ge.FREETEXT_COLOR:S(this,vi,By).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[ge.FREETEXT_SIZE,ei._defaultFontSize],[ge.FREETEXT_COLOR,ei._defaultColor||Vt._defaultLineColor]]}get propertiesToUpdate(){return[[ge.FREETEXT_SIZE,a(this,At)],[ge.FREETEXT_COLOR,a(this,$e)]]}_translateEmpty(t,i){this._uiManager.translateSelectedEditors(t,i,!0)}getInitialTranslation(){const t=this.parentScale;return[-ei._internalPadding*t,-(ei._internalPadding+a(this,At))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(Ae.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",a(this,Ie)),this.editorDiv.addEventListener("focus",a(this,kl)),this.editorDiv.addEventListener("blur",a(this,Il)),this.editorDiv.addEventListener("input",a(this,re)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",a(this,ut)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",a(this,Ie)),this.editorDiv.removeEventListener("focus",a(this,kl)),this.editorDiv.removeEventListener("blur",a(this,Il)),this.editorDiv.removeEventListener("input",a(this,re)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var t;if(this.width){S(this,_n,rb).call(this);return}this.enableEditMode(),this.editorDiv.focus(),(t=this._initialOptions)!=null&&t.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=a(this,mt),i=R(this,mt,S(this,Xs,Vy).call(this).trimEnd());if(t===i)return;const r=l=>{if(R(this,mt,l),!l){this.remove();return}S(this,Ri,nb).call(this),this._uiManager.rebuild(this),S(this,ds,cu).call(this)};this.addCommands({cmd:()=>{r(i)},undo:()=>{r(t)},mustExec:!1}),S(this,ds,cu).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(t){this.enterInEditMode()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){ei._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let t,i;this.width&&(t=this.x,i=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",a(this,ut)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text"),this.enableEditing(),Vt._l10nPromise.get("pdfjs-free-text-default-content").then(l=>{var d;return(d=this.editorDiv)==null?void 0:d.setAttribute("default-content",l)}),this.editorDiv.contentEditable=!0;const{style:r}=this.editorDiv;if(r.fontSize=`calc(${a(this,At)}px * var(--scale-factor))`,r.color=a(this,$e),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),Xo(this,this.div,["dblclick","keydown"]),this.width){const[l,d]=this.parentDimensions;if(this.annotationElementId){const{position:h}=a(this,Rt);let[g,_]=this.getInitialTranslation();[g,_]=this.pageTranslationToScreen(g,_);const[w,L]=this.pageDimensions,[M,N]=this.pageTranslation;let F,z;switch(this.rotation){case 0:F=t+(h[0]-M)/w,z=i+this.height-(h[1]-N)/L;break;case 90:F=t+(h[0]-M)/w,z=i-(h[1]-N)/L,[g,_]=[_,-g];break;case 180:F=t-this.width+(h[0]-M)/w,z=i-(h[1]-N)/L,[g,_]=[-g,-_];break;case 270:F=t+(h[0]-M-this.height*L)/w,z=i+(h[1]-N-this.width*w)/L,[g,_]=[-_,g];break}this.setAt(F*l,z*d,g,_)}else this.setAt(t*l,i*d,this.width*l,this.height*d);S(this,Ri,nb).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(t,i,r){let l=null;if(t instanceof iv){const{data:{defaultAppearanceData:{fontSize:h,fontColor:g},rect:_,rotation:w,id:L},textContent:M,textPosition:N,parent:{page:{pageNumber:F}}}=t;if(!M||M.length===0)return null;l=t={annotationType:Ae.FREETEXT,color:Array.from(g),fontSize:h,value:M.join(`
`),position:N,pageIndex:F-1,rect:_,rotation:w,id:L,deleted:!1}}const d=super.deserialize(t,i,r);return R(d,At,t.fontSize),R(d,$e,J.makeHexColor(...t.color)),R(d,mt,t.value),d.annotationElementId=t.id||null,R(d,Rt,l),d}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const i=ei._internalPadding*this.parentScale,r=this.getRect(i,i),l=Vt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:a(this,$e)),d={annotationType:Ae.FREETEXT,color:l,fontSize:a(this,At),value:a(this,mt),pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?d:this.annotationElementId&&!S(this,Bi,jy).call(this,d)?null:(d.id=this.annotationElementId,d)}};Il=new WeakMap,kl=new WeakMap,re=new WeakMap,Ie=new WeakMap,$e=new WeakMap,mt=new WeakMap,ut=new WeakMap,At=new WeakMap,Rt=new WeakMap,Qt=new WeakSet,Dy=function(t){const i=l=>{this.editorDiv.style.fontSize=`calc(${l}px * var(--scale-factor))`,this.translate(0,-(l-a(this,At))*this.parentScale),R(this,At,l),S(this,ds,cu).call(this)},r=a(this,At);this.addCommands({cmd:()=>{i(t)},undo:()=>{i(r)},mustExec:!0,type:ge.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},vi=new WeakSet,By=function(t){const i=a(this,$e);this.addCommands({cmd:()=>{R(this,$e,this.editorDiv.style.color=t)},undo:()=>{R(this,$e,this.editorDiv.style.color=i)},mustExec:!0,type:ge.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Xs=new WeakSet,Vy=function(){const t=this.editorDiv.getElementsByTagName("div");if(t.length===0)return this.editorDiv.innerText;const i=[];for(const r of t)i.push(r.innerText.replace(/\r\n?|\n/,""));return i.join(`
`)},ds=new WeakSet,cu=function(){const[t,i]=this.parentDimensions;let r;if(this.isAttachedToDOM)r=this.div.getBoundingClientRect();else{const{currentLayer:l,div:d}=this,h=d.style.display;d.style.display="hidden",l.div.append(this.div),r=d.getBoundingClientRect(),d.remove(),d.style.display=h}this.rotation%180===this.parentRotation%180?(this.width=r.width/t,this.height=r.height/i):(this.width=r.height/t,this.height=r.width/i),this.fixAndSetPosition()},Ri=new WeakSet,nb=function(){if(this.editorDiv.replaceChildren(),!!a(this,mt))for(const t of a(this,mt).split(`
`)){const i=document.createElement("div");i.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(i)}},Bi=new WeakSet,jy=function(t){const{value:i,fontSize:r,color:l,rect:d,pageIndex:h}=a(this,Rt);return t.value!==i||t.fontSize!==r||t.rect.some((g,_)=>Math.abs(g-d[_])>=1)||t.color.some((g,_)=>g!==l[_])||t.pageIndex!==h},_n=new WeakSet,rb=function(t=!1){if(!this.annotationElementId)return;if(S(this,ds,cu).call(this),!t&&(this.width===0||this.height===0)){setTimeout(()=>S(this,_n,rb).call(this,!0),0);return}const i=ei._internalPadding*this.parentScale;a(this,Rt).rect=this.getRect(i,i)},ke(ei,"_freeTextDefaultContent",""),ke(ei,"_internalPadding",0),ke(ei,"_defaultColor",null),ke(ei,"_defaultFontSize",10),ke(ei,"_type","freetext"),ke(ei,"_editorType",Ae.FREETEXT);let Na=ei;const Xa=class Xa{constructor({editor:e=null,uiManager:t=null}){b(this,ph);b(this,gh);b(this,pf);b(this,gf);b(this,zc,S(this,pf,Hy).bind(this));b(this,xr,null);b(this,Nl,null);b(this,Wc,void 0);b(this,ki,null);b(this,hh,!1);b(this,uh,!1);b(this,fh,void 0);b(this,xo,null);var i;R(this,uh,!e),R(this,xo,(e==null?void 0:e._uiManager)||t),R(this,fh,a(this,xo)._eventBus),R(this,Wc,(e==null?void 0:e.color)||((i=a(this,xo))==null?void 0:i.highlightColors.values().next().value)||"#FFFF98")}static get _keyboardManager(){return be(this,"_keyboardManager",new Yo([[["Escape","mac+Escape"],Xa.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Xa.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Xa.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Xa.prototype._moveToPrevious],[["Home","mac+Home"],Xa.prototype._moveToBeginning],[["End","mac+End"],Xa.prototype._moveToEnd]]))}renderButton(){const e=R(this,xr,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0),e.addEventListener("click",S(this,gf,Uy).bind(this));const t=R(this,Nl,document.createElement("span"));return t.className="swatch",t.style.backgroundColor=a(this,Wc),e.append(t),e}renderMainDropdown(){const e=R(this,ki,S(this,ph,ab).call(this,ge.HIGHLIGHT_DEFAULT_COLOR));return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}_colorSelectFromKeyboard(e){const t=e.target.getAttribute("data-color");t&&S(this,gh,ob).call(this,t,e)}_moveToNext(e){var t,i;if(e.target===a(this,xr)){(t=a(this,ki).firstChild)==null||t.focus();return}(i=e.target.nextSibling)==null||i.focus()}_moveToPrevious(e){var t;(t=e.target.previousSibling)==null||t.focus()}_moveToBeginning(){var e;(e=a(this,ki).firstChild)==null||e.focus()}_moveToEnd(){var e;(e=a(this,ki).lastChild)==null||e.focus()}hideDropdown(){var e;(e=a(this,ki))==null||e.classList.add("hidden")}_hideDropdownFromKeyboard(){a(this,uh)||!a(this,ki)||a(this,ki).classList.contains("hidden")||(this.hideDropdown(),a(this,xr).removeEventListener("keydown",a(this,zc)),a(this,xr).focus({preventScroll:!0,focusVisible:a(this,hh)}))}updateColor(e){if(a(this,Nl)&&(a(this,Nl).style.backgroundColor=e),!a(this,ki))return;const t=a(this,xo).highlightColors.values();for(const i of a(this,ki).children)i.setAttribute("aria-selected",t.next().value===e)}destroy(){var e,t;(e=a(this,xr))==null||e.remove(),R(this,xr,null),R(this,Nl,null),(t=a(this,ki))==null||t.remove(),R(this,ki,null)}};zc=new WeakMap,xr=new WeakMap,Nl=new WeakMap,Wc=new WeakMap,ki=new WeakMap,hh=new WeakMap,uh=new WeakMap,fh=new WeakMap,xo=new WeakMap,ph=new WeakSet,ab=function(e){const t=document.createElement("div");t.addEventListener("contextmenu",Oi),t.className="dropdown",t.role="listbox",t.setAttribute("aria-multiselectable",!1),t.setAttribute("aria-orientation","vertical"),t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[i,r]of a(this,xo).highlightColors){const l=document.createElement("button");l.tabIndex="0",l.role="option",l.setAttribute("data-color",r),l.title=i,l.setAttribute("data-l10n-id",`pdfjs-editor-colorpicker-${i}`);const d=document.createElement("span");l.append(d),d.className="swatch",d.style.backgroundColor=r,l.setAttribute("aria-selected",r===a(this,Wc)),l.addEventListener("click",S(this,gh,ob).bind(this,e,r)),t.append(l)}return t.addEventListener("keydown",a(this,zc)),t},gh=new WeakSet,ob=function(e,t,i){i.stopPropagation(),a(this,fh).dispatch("switchannotationeditorparams",{source:this,type:e,value:t})},pf=new WeakSet,Hy=function(e){Xa._keyboardManager.exec(this,e)},gf=new WeakSet,Uy=function(e){if(a(this,ki)&&!a(this,ki).classList.contains("hidden")){this.hideDropdown();return}if(a(this,xr).addEventListener("keydown",a(this,zc)),R(this,hh,e.detail===0),a(this,ki)){a(this,ki).classList.remove("hidden");return}const t=R(this,ki,S(this,ph,ab).call(this,ge.HIGHLIGHT_COLOR));a(this,xr).append(t)};let Wu=Xa;class Fa{constructor(e,t=0,i=0,r=!0){b(this,mf);b(this,$c);b(this,bf);b(this,vf);b(this,bh);b(this,mh,void 0);b(this,To,[]);b(this,Tr,[]);let l=1/0,d=-1/0,h=1/0,g=-1/0;const w=10**-4;for(const{x:K,y:we,width:ue,height:pe}of e){const Te=Math.floor((K-t)/w)*w,je=Math.ceil((K+ue+t)/w)*w,rt=Math.floor((we-t)/w)*w,lt=Math.ceil((we+pe+t)/w)*w,pt=[Te,rt,lt,!0],Ht=[je,rt,lt,!1];a(this,To).push(pt,Ht),l=Math.min(l,Te),d=Math.max(d,je),h=Math.min(h,rt),g=Math.max(g,lt)}const L=d-l+2*i,M=g-h+2*i,N=l-i,F=h-i,z=a(this,To).at(r?-1:-2),ie=[z[0],z[2]];for(const K of a(this,To)){const[we,ue,pe]=K;K[0]=(we-N)/L,K[1]=(ue-F)/M,K[2]=(pe-F)/M}R(this,mh,{x:N,y:F,width:L,height:M,lastPoint:ie})}getOutlines(){a(this,To).sort((t,i)=>t[0]-i[0]||t[1]-i[1]||t[2]-i[2]);const e=[];for(const t of a(this,To))t[3]?(e.push(...S(this,bh,lb).call(this,t)),S(this,bf,Wy).call(this,t)):(S(this,vf,$y).call(this,t),e.push(...S(this,bh,lb).call(this,t)));return S(this,mf,zy).call(this,e)}}mh=new WeakMap,To=new WeakMap,Tr=new WeakMap,mf=new WeakSet,zy=function(e){const t=[],i=new Set;for(const d of e){const[h,g,_]=d;t.push([h,g,d],[h,_,d])}t.sort((d,h)=>d[1]-h[1]||d[0]-h[0]);for(let d=0,h=t.length;d<h;d+=2){const g=t[d][2],_=t[d+1][2];g.push(_),_.push(g),i.add(g),i.add(_)}const r=[];let l;for(;i.size>0;){const d=i.values().next().value;let[h,g,_,w,L]=d;i.delete(d);let M=h,N=g;for(l=[h,_],r.push(l);;){let F;if(i.has(w))F=w;else if(i.has(L))F=L;else break;i.delete(F),[h,g,_,w,L]=F,M!==h&&(l.push(M,N,h,N===g?g:_),M=h),N=N===g?_:g}l.push(M,N)}return{outlines:r,box:a(this,mh)}},$c=new WeakSet,yp=function(e){const t=a(this,Tr);let i=0,r=t.length-1;for(;i<=r;){const l=i+r>>1,d=t[l][0];if(d===e)return l;d<e?i=l+1:r=l-1}return r+1},bf=new WeakSet,Wy=function([,e,t]){const i=S(this,$c,yp).call(this,e);a(this,Tr).splice(i,0,[e,t])},vf=new WeakSet,$y=function([,e,t]){const i=S(this,$c,yp).call(this,e);for(let r=i;r<a(this,Tr).length;r++){const[l,d]=a(this,Tr)[r];if(l!==e)break;if(l===e&&d===t){a(this,Tr).splice(r,1);return}}for(let r=i-1;r>=0;r--){const[l,d]=a(this,Tr)[r];if(l!==e)break;if(l===e&&d===t){a(this,Tr).splice(r,1);return}}},bh=new WeakSet,lb=function(e){const[t,i,r]=e,l=[[t,i,r]],d=S(this,$c,yp).call(this,r);for(let h=0;h<d;h++){const[g,_]=a(this,Tr)[h];for(let w=0,L=l.length;w<L;w++){const[,M,N]=l[w];if(!(_<=M||N<=g)){if(M>=g){if(N>_)l[w][1]=_;else{if(L===1)return[];l.splice(w,1),w--,L--}continue}l[w][2]=g,N>_&&l.push([t,_,N])}}}return l};const Vi=class Vi extends Vt{constructor(t){var i;super({...t,name:"highlightEditor"});b(this,wh);b(this,wf);b(this,_h);b(this,Gc);b(this,_f);b(this,yf);b(this,Lo,void 0);b(this,qc,null);b(this,Fl,null);b(this,Dl,null);b(this,Bl,null);b(this,Vl,null);b(this,Gn,null);b(this,vh,null);b(this,jl,void 0);b(this,yn,null);Vi._defaultColor||(Vi._defaultColor=((i=this._uiManager.highlightColors)==null?void 0:i.values().next().value)||"#fff066"),this.color=t.color||Vi._defaultColor,R(this,jl,t.opacity||Vi._defaultOpacity),R(this,Lo,t.boxes||null),this._isDraggable=!1,S(this,wh,cb).call(this),S(this,Gc,Ep).call(this),this.rotate(this.rotation)}static initialize(t){Vt.initialize(t)}static updateDefaultParams(t,i){switch(t){case ge.HIGHLIGHT_DEFAULT_COLOR:Vi._defaultColor=i;break}}get toolbarPosition(){return a(this,vh)}updateParams(t,i){switch(t){case ge.HIGHLIGHT_COLOR:S(this,wf,qy).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[ge.HIGHLIGHT_DEFAULT_COLOR,Vi._defaultColor]]}get propertiesToUpdate(){return[[ge.HIGHLIGHT_COLOR,this.color||Vi._defaultColor]]}async addEditToolbar(){const t=await super.addEditToolbar();return t?(this._uiManager.highlightColors&&(R(this,Fl,new Wu({editor:this})),t.addColorPicker(a(this,Fl))),t):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(0)}getRect(t,i){return super.getRect(t,i,0)}onceAdded(){this.parent.addUndoableEditor(this),this.div.focus()}remove(){super.remove(),S(this,_h,db).call(this)}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(S(this,Gc,Ep).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var r;let i=!1;this.parent&&!t?S(this,_h,db).call(this):t&&(S(this,Gc,Ep).call(this,t),i=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(t),i&&this.select()}rotate(t){var r,l;const{drawLayer:i}=this.parent;i.rotate(a(this,Gn),t),i.rotate(a(this,yn),t),i.updateBox(a(this,Gn),S(r=Vi,yh,hb).call(r,this,t)),i.updateBox(a(this,yn),S(l=Vi,yh,hb).call(l,a(this,Dl).box,t))}render(){if(this.div)return this.div;const t=super.render(),i=R(this,Bl,document.createElement("div"));t.append(i),i.className="internal",i.style.clipPath=a(this,qc);const[r,l]=this.parentDimensions;return this.setDims(this.width*r,this.height*l),Xo(this,a(this,Bl),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.parent.drawLayer.addClass(a(this,yn),"hovered")}pointerleave(){this.parent.drawLayer.removeClass(a(this,yn),"hovered")}select(){var t,i;super.select(),(t=this.parent)==null||t.drawLayer.removeClass(a(this,yn),"hovered"),(i=this.parent)==null||i.drawLayer.addClass(a(this,yn),"selected")}unselect(){var t;super.unselect(),(t=this.parent)==null||t.drawLayer.removeClass(a(this,yn),"selected")}static deserialize(t,i,r){var M;const l=super.deserialize(t,i,r),{rect:d,color:h,quadPoints:g}=t;l.color=J.makeHexColor(...h),R(l,jl,t.opacity);const[_,w]=l.pageDimensions;l.width=(d[2]-d[0])/_,l.height=(d[3]-d[1])/w;const L=R(l,Lo,[]);for(let N=0;N<g.length;N+=8)L.push({x:g[4]/_,y:1-g[N+5]/w,width:(g[N+2]-g[N])/_,height:(g[N+5]-g[N+1])/w});return S(M=l,wh,cb).call(M),l}serialize(t=!1){if(this.isEmpty()||t)return null;const i=this.getRect(0,0),r=Vt._colorManager.convert(this.color);return{annotationType:Ae.HIGHLIGHT,color:r,opacity:a(this,jl),quadPoints:S(this,_f,Gy).call(this),outlines:S(this,yf,Ky).call(this),pageIndex:this.pageIndex,rect:i,rotation:0,structTreeParentId:this._structTreeParentId}}static canCreateNewEmptyEditor(){return!1}};Lo=new WeakMap,qc=new WeakMap,Fl=new WeakMap,Dl=new WeakMap,Bl=new WeakMap,Vl=new WeakMap,Gn=new WeakMap,vh=new WeakMap,jl=new WeakMap,yn=new WeakMap,wh=new WeakSet,cb=function(){const t=new Fa(a(this,Lo),.001);R(this,Vl,t.getOutlines()),{x:this.x,y:this.y,width:this.width,height:this.height}=a(this,Vl).box;const i=new Fa(a(this,Lo),.0025,.001,this._uiManager.direction==="ltr");R(this,Dl,i.getOutlines());const{lastPoint:r}=a(this,Dl).box;R(this,vh,[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height])},wf=new WeakSet,qy=function(t){const i=this.color;this.addCommands({cmd:()=>{var r;this.color=t,this.parent.drawLayer.changeColor(a(this,Gn),t),(r=a(this,Fl))==null||r.updateColor(t)},undo:()=>{var r;this.color=i,this.parent.drawLayer.changeColor(a(this,Gn),i),(r=a(this,Fl))==null||r.updateColor(i)},mustExec:!0,type:ge.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},_h=new WeakSet,db=function(){a(this,Gn)===null||!this.parent||(this.parent.drawLayer.remove(a(this,Gn)),R(this,Gn,null),this.parent.drawLayer.remove(a(this,yn)),R(this,yn,null))},Gc=new WeakSet,Ep=function(t=this.parent){a(this,Gn)===null&&({id:wa(this,Gn)._,clipPathId:wa(this,qc)._}=t.drawLayer.highlight(a(this,Vl),this.color,a(this,jl)),a(this,Bl)&&(a(this,Bl).style.clipPath=a(this,qc)),R(this,yn,t.drawLayer.highlightOutline(a(this,Dl))))},yh=new WeakSet,hb=function({x:t,y:i,width:r,height:l},d){switch(d){case 90:return{x:1-i-l,y:t,width:l,height:r};case 180:return{x:1-t-r,y:1-i-l,width:r,height:l};case 270:return{x:i,y:1-t-r,width:l,height:r}}return{x:t,y:i,width:r,height:l}},_f=new WeakSet,Gy=function(){const[t,i]=this.pageDimensions,r=a(this,Lo),l=new Array(r.length*8);let d=0;for(const{x:h,y:g,width:_,height:w}of r){const L=h*t,M=(1-g-w)*i;l[d]=l[d+4]=L,l[d+1]=l[d+3]=M,l[d+2]=l[d+6]=L+_*t,l[d+5]=l[d+7]=M+w*i,d+=8}return l},yf=new WeakSet,Ky=function(){const[t,i]=this.pageDimensions,r=this.width*t,l=this.height*i,d=this.x*t,h=(1-this.y-this.height)*i,g=[];for(const _ of a(this,Vl).outlines){const w=new Array(_.length);for(let L=0;L<_.length;L+=2)w[L]=d+_[L]*r,w[L+1]=h+(1-_[L+1])*l;g.push(w)}return g},b(Vi,yh),ke(Vi,"_defaultColor",null),ke(Vi,"_defaultOpacity",1),ke(Vi,"_l10nPromise"),ke(Vi,"_type","highlight"),ke(Vi,"_editorType",Ae.HIGHLIGHT);let pg=Vi;const ti=class ti extends Vt{constructor(t){super({...t,name:"inkEditor"});b(this,Ef);b(this,Sf);b(this,Af);b(this,Cf);b(this,Ch);b(this,Pf);b(this,Ph);b(this,xf);b(this,Tf);b(this,Lf);b(this,Rf);b(this,Mf);b(this,Lr);b(this,xh);b(this,Kc);b(this,Xc);b(this,Mo);b(this,Th);b(this,Yc);b(this,Of);b(this,Rh);b(this,Zc);b(this,Io);b(this,Hl,0);b(this,Ul,0);b(this,Eh,this.canvasPointermove.bind(this));b(this,Sh,this.canvasPointerleave.bind(this));b(this,Ah,this.canvasPointerup.bind(this));b(this,zl,this.canvasPointerdown.bind(this));b(this,ma,null);b(this,Ya,new Path2D);b(this,Kn,!1);b(this,Wl,!1);b(this,$l,!1);b(this,ql,null);b(this,Gl,0);b(this,Kl,0);b(this,Ro,null);this.color=t.color||null,this.thickness=t.thickness||null,this.opacity=t.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(t){Vt.initialize(t)}static updateDefaultParams(t,i){switch(t){case ge.INK_THICKNESS:ti._defaultThickness=i;break;case ge.INK_COLOR:ti._defaultColor=i;break;case ge.INK_OPACITY:ti._defaultOpacity=i/100;break}}updateParams(t,i){switch(t){case ge.INK_THICKNESS:S(this,Ef,Xy).call(this,i);break;case ge.INK_COLOR:S(this,Sf,Yy).call(this,i);break;case ge.INK_OPACITY:S(this,Af,Zy).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[ge.INK_THICKNESS,ti._defaultThickness],[ge.INK_COLOR,ti._defaultColor||Vt._defaultLineColor],[ge.INK_OPACITY,Math.round(ti._defaultOpacity*100)]]}get propertiesToUpdate(){return[[ge.INK_THICKNESS,this.thickness||ti._defaultThickness],[ge.INK_COLOR,this.color||ti._defaultColor||Vt._defaultLineColor],[ge.INK_OPACITY,Math.round(100*(this.opacity??ti._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(S(this,Kc,Sp).call(this),S(this,Xc,Ap).call(this)),this.isAttachedToDOM||(this.parent.add(this),S(this,Mo,ud).call(this)),S(this,Io,fd).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,a(this,ma)&&(clearTimeout(a(this,ma)),R(this,ma,null)),a(this,ql).disconnect(),R(this,ql,null),super.remove())}setParent(t){!this.parent&&t?this._uiManager.removeShouldRescale(this):this.parent&&t===null&&this._uiManager.addShouldRescale(this),super.setParent(t)}onScaleChanging(){const[t,i]=this.parentDimensions,r=this.width*t,l=this.height*i;this.setDimensions(r,l)}enableEditMode(){a(this,Kn)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",a(this,zl)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",a(this,zl)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){a(this,Kn)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),R(this,Kn,!0),this.div.classList.add("disabled"),S(this,Io,fd).call(this,!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),this.enableEditMode())}canvasPointerdown(t){t.button!==0||!this.isInEditMode()||a(this,Kn)||(this.setInForeground(),t.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),S(this,Pf,Jy).call(this,t.offsetX,t.offsetY))}canvasPointermove(t){t.preventDefault(),S(this,Ph,fb).call(this,t.offsetX,t.offsetY)}canvasPointerup(t){t.preventDefault(),S(this,xh,pb).call(this,t)}canvasPointerleave(t){S(this,xh,pb).call(this,t)}get isResizable(){return!this.isEmpty()&&a(this,Kn)}render(){if(this.div)return this.div;let t,i;this.width&&(t=this.x,i=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[r,l,d,h]=S(this,Cf,Qy).call(this);if(this.setAt(r,l,0,0),this.setDims(d,h),S(this,Kc,Sp).call(this),this.width){const[g,_]=this.parentDimensions;this.setAspectRatio(this.width*g,this.height*_),this.setAt(t*g,i*_,this.width*g,this.height*_),R(this,$l,!0),S(this,Mo,ud).call(this),this.setDims(this.width*g,this.height*_),S(this,Lr,no).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return S(this,Xc,Ap).call(this),this.div}setDimensions(t,i){const r=Math.round(t),l=Math.round(i);if(a(this,Gl)===r&&a(this,Kl)===l)return;R(this,Gl,r),R(this,Kl,l),this.canvas.style.visibility="hidden";const[d,h]=this.parentDimensions;this.width=t/d,this.height=i/h,this.fixAndSetPosition(),a(this,Kn)&&S(this,Th,gb).call(this,t,i),S(this,Mo,ud).call(this),S(this,Lr,no).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(t,i,r){var ie,K,we;if(t instanceof Gr)return null;const l=super.deserialize(t,i,r);l.thickness=t.thickness,l.color=J.makeHexColor(...t.color),l.opacity=t.opacity;const[d,h]=l.pageDimensions,g=l.width*d,_=l.height*h,w=l.parentScale,L=t.thickness/2;R(l,Kn,!0),R(l,Gl,Math.round(g)),R(l,Kl,Math.round(_));const{paths:M,rect:N,rotation:F}=t;for(let{bezier:ue}of M){ue=S(ie=ti,kf,aE).call(ie,ue,N,F);const pe=[];l.paths.push(pe);let Te=w*(ue[0]-L),je=w*(ue[1]-L);for(let lt=2,pt=ue.length;lt<pt;lt+=6){const Ht=w*(ue[lt]-L),Mt=w*(ue[lt+1]-L),ai=w*(ue[lt+2]-L),Ci=w*(ue[lt+3]-L),Ji=w*(ue[lt+4]-L),ii=w*(ue[lt+5]-L);pe.push([[Te,je],[Ht,Mt],[ai,Ci],[Ji,ii]]),Te=Ji,je=ii}const rt=S(this,If,rE).call(this,pe);l.bezierPath2D.push(rt)}const z=S(K=l,Rh,bb).call(K);return R(l,Ul,Math.max(Vt.MIN_SIZE,z[2]-z[0])),R(l,Hl,Math.max(Vt.MIN_SIZE,z[3]-z[1])),S(we=l,Th,gb).call(we,g,_),l}serialize(){if(this.isEmpty())return null;const t=this.getRect(0,0),i=Vt._colorManager.convert(this.ctx.strokeStyle);return{annotationType:Ae.INK,color:i,thickness:this.thickness,opacity:this.opacity,paths:S(this,Of,oE).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,t),pageIndex:this.pageIndex,rect:t,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};Hl=new WeakMap,Ul=new WeakMap,Eh=new WeakMap,Sh=new WeakMap,Ah=new WeakMap,zl=new WeakMap,ma=new WeakMap,Ya=new WeakMap,Kn=new WeakMap,Wl=new WeakMap,$l=new WeakMap,ql=new WeakMap,Gl=new WeakMap,Kl=new WeakMap,Ro=new WeakMap,Ef=new WeakSet,Xy=function(t){const i=this.thickness;this.addCommands({cmd:()=>{this.thickness=t,S(this,Io,fd).call(this)},undo:()=>{this.thickness=i,S(this,Io,fd).call(this)},mustExec:!0,type:ge.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},Sf=new WeakSet,Yy=function(t){const i=this.color;this.addCommands({cmd:()=>{this.color=t,S(this,Lr,no).call(this)},undo:()=>{this.color=i,S(this,Lr,no).call(this)},mustExec:!0,type:ge.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Af=new WeakSet,Zy=function(t){t/=100;const i=this.opacity;this.addCommands({cmd:()=>{this.opacity=t,S(this,Lr,no).call(this)},undo:()=>{this.opacity=i,S(this,Lr,no).call(this)},mustExec:!0,type:ge.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},Cf=new WeakSet,Qy=function(){const{parentRotation:t,parentDimensions:[i,r]}=this;switch(t){case 90:return[0,r,r,i];case 180:return[i,r,i,r];case 270:return[i,0,r,i];default:return[0,0,i,r]}},Ch=new WeakSet,ub=function(){const{ctx:t,color:i,opacity:r,thickness:l,parentScale:d,scaleFactor:h}=this;t.lineWidth=l*d/h,t.lineCap="round",t.lineJoin="round",t.miterLimit=10,t.strokeStyle=`${i}${dc(r)}`},Pf=new WeakSet,Jy=function(t,i){this.canvas.addEventListener("contextmenu",Oi),this.canvas.addEventListener("pointerleave",a(this,Sh)),this.canvas.addEventListener("pointermove",a(this,Eh)),this.canvas.addEventListener("pointerup",a(this,Ah)),this.canvas.removeEventListener("pointerdown",a(this,zl)),this.isEditing=!0,a(this,$l)||(R(this,$l,!0),S(this,Mo,ud).call(this),this.thickness||(this.thickness=ti._defaultThickness),this.color||(this.color=ti._defaultColor||Vt._defaultLineColor),this.opacity??(this.opacity=ti._defaultOpacity)),this.currentPath.push([t,i]),R(this,Wl,!1),S(this,Ch,ub).call(this),R(this,Ro,()=>{S(this,Lf,iE).call(this),a(this,Ro)&&window.requestAnimationFrame(a(this,Ro))}),window.requestAnimationFrame(a(this,Ro))},Ph=new WeakSet,fb=function(t,i){const[r,l]=this.currentPath.at(-1);if(this.currentPath.length>1&&t===r&&i===l)return;const d=this.currentPath;let h=a(this,Ya);if(d.push([t,i]),R(this,Wl,!0),d.length<=2){h.moveTo(...d[0]),h.lineTo(t,i);return}d.length===3&&(R(this,Ya,h=new Path2D),h.moveTo(...d[0])),S(this,Rf,sE).call(this,h,...d.at(-3),...d.at(-2),t,i)},xf=new WeakSet,eE=function(){if(this.currentPath.length===0)return;const t=this.currentPath.at(-1);a(this,Ya).lineTo(...t)},Tf=new WeakSet,tE=function(t,i){R(this,Ro,null),t=Math.min(Math.max(t,0),this.canvas.width),i=Math.min(Math.max(i,0),this.canvas.height),S(this,Ph,fb).call(this,t,i),S(this,xf,eE).call(this);let r;if(this.currentPath.length!==1)r=S(this,Mf,nE).call(this);else{const _=[t,i];r=[[_,_.slice(),_.slice(),_]]}const l=a(this,Ya),d=this.currentPath;this.currentPath=[],R(this,Ya,new Path2D);const h=()=>{this.allRawPaths.push(d),this.paths.push(r),this.bezierPath2D.push(l),this.rebuild()},g=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(S(this,Kc,Sp).call(this),S(this,Xc,Ap).call(this)),S(this,Io,fd).call(this))};this.addCommands({cmd:h,undo:g,mustExec:!0})},Lf=new WeakSet,iE=function(){if(!a(this,Wl))return;R(this,Wl,!1);const t=Math.ceil(this.thickness*this.parentScale),i=this.currentPath.slice(-3),r=i.map(h=>h[0]),l=i.map(h=>h[1]);Math.min(...r)-t,Math.max(...r)+t,Math.min(...l)-t,Math.max(...l)+t;const{ctx:d}=this;d.save(),d.clearRect(0,0,this.canvas.width,this.canvas.height);for(const h of this.bezierPath2D)d.stroke(h);d.stroke(a(this,Ya)),d.restore()},Rf=new WeakSet,sE=function(t,i,r,l,d,h,g){const _=(i+l)/2,w=(r+d)/2,L=(l+h)/2,M=(d+g)/2;t.bezierCurveTo(_+2*(l-_)/3,w+2*(d-w)/3,L+2*(l-L)/3,M+2*(d-M)/3,L,M)},Mf=new WeakSet,nE=function(){const t=this.currentPath;if(t.length<=2)return[[t[0],t[0],t.at(-1),t.at(-1)]];const i=[];let r,[l,d]=t[0];for(r=1;r<t.length-2;r++){const[N,F]=t[r],[z,ie]=t[r+1],K=(N+z)/2,we=(F+ie)/2,ue=[l+2*(N-l)/3,d+2*(F-d)/3],pe=[K+2*(N-K)/3,we+2*(F-we)/3];i.push([[l,d],ue,pe,[K,we]]),[l,d]=[K,we]}const[h,g]=t[r],[_,w]=t[r+1],L=[l+2*(h-l)/3,d+2*(g-d)/3],M=[_+2*(h-_)/3,w+2*(g-w)/3];return i.push([[l,d],L,M,[_,w]]),i},Lr=new WeakSet,no=function(){if(this.isEmpty()){S(this,Yc,Cp).call(this);return}S(this,Ch,ub).call(this);const{canvas:t,ctx:i}=this;i.setTransform(1,0,0,1,0,0),i.clearRect(0,0,t.width,t.height),S(this,Yc,Cp).call(this);for(const r of this.bezierPath2D)i.stroke(r)},xh=new WeakSet,pb=function(t){this.canvas.removeEventListener("pointerleave",a(this,Sh)),this.canvas.removeEventListener("pointermove",a(this,Eh)),this.canvas.removeEventListener("pointerup",a(this,Ah)),this.canvas.addEventListener("pointerdown",a(this,zl)),a(this,ma)&&clearTimeout(a(this,ma)),R(this,ma,setTimeout(()=>{R(this,ma,null),this.canvas.removeEventListener("contextmenu",Oi)},10)),S(this,Tf,tE).call(this,t.offsetX,t.offsetY),this.addToAnnotationStorage(),this.setInBackground()},Kc=new WeakSet,Sp=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},Xc=new WeakSet,Ap=function(){R(this,ql,new ResizeObserver(t=>{const i=t[0].contentRect;i.width&&i.height&&this.setDimensions(i.width,i.height)})),a(this,ql).observe(this.div)},Mo=new WeakSet,ud=function(){if(!a(this,$l))return;const[t,i]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*t),this.canvas.height=Math.ceil(this.height*i),S(this,Yc,Cp).call(this)},Th=new WeakSet,gb=function(t,i){const r=S(this,Zc,Pp).call(this),l=(t-r)/a(this,Ul),d=(i-r)/a(this,Hl);this.scaleFactor=Math.min(l,d)},Yc=new WeakSet,Cp=function(){const t=S(this,Zc,Pp).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+t,this.translationY*this.scaleFactor+t)},If=new WeakSet,rE=function(t){const i=new Path2D;for(let r=0,l=t.length;r<l;r++){const[d,h,g,_]=t[r];r===0&&i.moveTo(...d),i.bezierCurveTo(h[0],h[1],g[0],g[1],_[0],_[1])}return i},Lh=new WeakSet,mb=function(t,i,r){const[l,d,h,g]=i;switch(r){case 0:for(let _=0,w=t.length;_<w;_+=2)t[_]+=l,t[_+1]=g-t[_+1];break;case 90:for(let _=0,w=t.length;_<w;_+=2){const L=t[_];t[_]=t[_+1]+l,t[_+1]=L+d}break;case 180:for(let _=0,w=t.length;_<w;_+=2)t[_]=h-t[_],t[_+1]+=d;break;case 270:for(let _=0,w=t.length;_<w;_+=2){const L=t[_];t[_]=h-t[_+1],t[_+1]=g-L}break;default:throw new Error("Invalid rotation")}return t},kf=new WeakSet,aE=function(t,i,r){const[l,d,h,g]=i;switch(r){case 0:for(let _=0,w=t.length;_<w;_+=2)t[_]-=l,t[_+1]=g-t[_+1];break;case 90:for(let _=0,w=t.length;_<w;_+=2){const L=t[_];t[_]=t[_+1]-d,t[_+1]=L-l}break;case 180:for(let _=0,w=t.length;_<w;_+=2)t[_]=h-t[_],t[_+1]-=d;break;case 270:for(let _=0,w=t.length;_<w;_+=2){const L=t[_];t[_]=g-t[_+1],t[_+1]=h-L}break;default:throw new Error("Invalid rotation")}return t},Of=new WeakSet,oE=function(t,i,r,l){var w,L;const d=[],h=this.thickness/2,g=t*i+h,_=t*r+h;for(const M of this.paths){const N=[],F=[];for(let z=0,ie=M.length;z<ie;z++){const[K,we,ue,pe]=M[z],Te=t*K[0]+g,je=t*K[1]+_,rt=t*we[0]+g,lt=t*we[1]+_,pt=t*ue[0]+g,Ht=t*ue[1]+_,Mt=t*pe[0]+g,ai=t*pe[1]+_;z===0&&(N.push(Te,je),F.push(Te,je)),N.push(rt,lt,pt,Ht,Mt,ai),F.push(rt,lt),z===ie-1&&F.push(Mt,ai)}d.push({bezier:S(w=ti,Lh,mb).call(w,N,l,this.rotation),points:S(L=ti,Lh,mb).call(L,F,l,this.rotation)})}return d},Rh=new WeakSet,bb=function(){let t=1/0,i=-1/0,r=1/0,l=-1/0;for(const d of this.paths)for(const[h,g,_,w]of d){const L=J.bezierBoundingBox(...h,...g,..._,...w);t=Math.min(t,L[0]),r=Math.min(r,L[1]),i=Math.max(i,L[2]),l=Math.max(l,L[3])}return[t,r,i,l]},Zc=new WeakSet,Pp=function(){return a(this,Kn)?Math.ceil(this.thickness*this.parentScale):0},Io=new WeakSet,fd=function(t=!1){if(this.isEmpty())return;if(!a(this,Kn)){S(this,Lr,no).call(this);return}const i=S(this,Rh,bb).call(this),r=S(this,Zc,Pp).call(this);R(this,Ul,Math.max(Vt.MIN_SIZE,i[2]-i[0])),R(this,Hl,Math.max(Vt.MIN_SIZE,i[3]-i[1]));const l=Math.ceil(r+a(this,Ul)*this.scaleFactor),d=Math.ceil(r+a(this,Hl)*this.scaleFactor),[h,g]=this.parentDimensions;this.width=l/h,this.height=d/g,this.setAspectRatio(l,d);const _=this.translationX,w=this.translationY;this.translationX=-i[0],this.translationY=-i[1],S(this,Mo,ud).call(this),S(this,Lr,no).call(this),R(this,Gl,l),R(this,Kl,d),this.setDims(l,d);const L=t?r/this.scaleFactor/2:0;this.translate(_-this.translationX-L,w-this.translationY-L)},b(ti,If),b(ti,Lh),b(ti,kf),ke(ti,"_defaultColor",null),ke(ti,"_defaultOpacity",1),ke(ti,"_defaultThickness",1),ke(ti,"_type","ink"),ke(ti,"_editorType",Ae.INK);let mo=ti;const Oh=class Oh extends Vt{constructor(t){super({...t,name:"stampEditor"});b(this,Yl);b(this,Zl);b(this,Jc);b(this,Ih);b(this,Nf);b(this,Ff);b(this,kh);b(this,ed);b(this,Df);b(this,Yi,null);b(this,hs,null);b(this,ko,null);b(this,Za,null);b(this,Oo,null);b(this,Qc,"");b(this,Qa,null);b(this,Xl,null);b(this,ba,null);b(this,Rr,!1);b(this,Mh,!1);R(this,Za,t.bitmapUrl),R(this,Oo,t.bitmapFile)}static initialize(t){Vt.initialize(t)}static get supportedTypes(){return be(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(i=>`image/${i}`))}static get supportedTypesStr(){return be(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(t){return this.supportedTypes.includes(t)}static paste(t,i){i.pasteEditor(Ae.STAMP,{bitmapFile:t.getAsFile()})}remove(){var t,i;a(this,hs)&&(R(this,Yi,null),this._uiManager.imageManager.deleteId(a(this,hs)),(t=a(this,Qa))==null||t.remove(),R(this,Qa,null),(i=a(this,Xl))==null||i.disconnect(),R(this,Xl,null),a(this,ba)&&(clearTimeout(a(this,ba)),R(this,ba,null))),super.remove()}rebuild(){if(!this.parent){a(this,hs)&&S(this,Jc,xp).call(this);return}super.rebuild(),this.div!==null&&(a(this,hs)&&S(this,Jc,xp).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(a(this,ko)||a(this,Yi)||a(this,Za)||a(this,Oo))}get isResizable(){return!0}render(){if(this.div)return this.div;let t,i;if(this.width&&(t=this.x,i=this.y),super.render(),this.div.hidden=!0,a(this,Yi)?S(this,Ih,vb).call(this):S(this,Jc,xp).call(this),this.width){const[r,l]=this.parentDimensions;this.setAt(t*r,i*l,this.width*r,this.height*l)}return this.div}getImageForAltText(){return a(this,Qa)}static deserialize(t,i,r){if(t instanceof nv)return null;const l=super.deserialize(t,i,r),{rect:d,bitmapUrl:h,bitmapId:g,isSvg:_,accessibilityData:w}=t;g&&r.imageManager.isValidId(g)?R(l,hs,g):R(l,Za,h),R(l,Rr,_);const[L,M]=l.pageDimensions;return l.width=(d[2]-d[0])/L,l.height=(d[3]-d[1])/M,w&&(l.altTextData=w),l}serialize(t=!1,i=null){if(this.isEmpty())return null;const r={annotationType:Ae.STAMP,bitmapId:a(this,hs),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:a(this,Rr),structTreeParentId:this._structTreeParentId};if(t)return r.bitmapUrl=S(this,ed,Tp).call(this,!0),r.accessibilityData=this.altTextData,r;const{decorative:l,altText:d}=this.altTextData;if(!l&&d&&(r.accessibilityData={type:"Figure",alt:d}),i===null)return r;i.stamps||(i.stamps=new Map);const h=a(this,Rr)?(r.rect[2]-r.rect[0])*(r.rect[3]-r.rect[1]):null;if(!i.stamps.has(a(this,hs)))i.stamps.set(a(this,hs),{area:h,serialized:r}),r.bitmap=S(this,ed,Tp).call(this,!1);else if(a(this,Rr)){const g=i.stamps.get(a(this,hs));h>g.area&&(g.area=h,g.serialized.bitmap.close(),g.serialized.bitmap=S(this,ed,Tp).call(this,!1))}return r}};Yi=new WeakMap,hs=new WeakMap,ko=new WeakMap,Za=new WeakMap,Oo=new WeakMap,Qc=new WeakMap,Qa=new WeakMap,Xl=new WeakMap,ba=new WeakMap,Rr=new WeakMap,Mh=new WeakMap,Yl=new WeakSet,du=function(t,i=!1){if(!t){this.remove();return}R(this,Yi,t.bitmap),i||(R(this,hs,t.id),R(this,Rr,t.isSvg)),t.file&&R(this,Qc,t.file.name),S(this,Ih,vb).call(this)},Zl=new WeakSet,hu=function(){R(this,ko,null),this._uiManager.enableWaiting(!1),a(this,Qa)&&this.div.focus()},Jc=new WeakSet,xp=function(){if(a(this,hs)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(a(this,hs)).then(i=>S(this,Yl,du).call(this,i,!0)).finally(()=>S(this,Zl,hu).call(this));return}if(a(this,Za)){const i=a(this,Za);R(this,Za,null),this._uiManager.enableWaiting(!0),R(this,ko,this._uiManager.imageManager.getFromUrl(i).then(r=>S(this,Yl,du).call(this,r)).finally(()=>S(this,Zl,hu).call(this)));return}if(a(this,Oo)){const i=a(this,Oo);R(this,Oo,null),this._uiManager.enableWaiting(!0),R(this,ko,this._uiManager.imageManager.getFromFile(i).then(r=>S(this,Yl,du).call(this,r)).finally(()=>S(this,Zl,hu).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=Oh.supportedTypesStr,R(this,ko,new Promise(i=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(t.files[0]);S(this,Yl,du).call(this,r)}i()}),t.addEventListener("cancel",()=>{this.remove(),i()})}).finally(()=>S(this,Zl,hu).call(this))),t.click()},Ih=new WeakSet,vb=function(){const{div:t}=this;let{width:i,height:r}=a(this,Yi);const[l,d]=this.pageDimensions,h=.75;if(this.width)i=this.width*l,r=this.height*d;else if(i>h*l||r>h*d){const L=Math.min(h*l/i,h*d/r);i*=L,r*=L}const[g,_]=this.parentDimensions;this.setDims(i*g/l,r*_/d),this._uiManager.enableWaiting(!1);const w=R(this,Qa,document.createElement("canvas"));t.append(w),t.hidden=!1,S(this,kh,wb).call(this,i,r),S(this,Df,dE).call(this),a(this,Mh)||(this.parent.addUndoableEditor(this),R(this,Mh,!0)),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton(),a(this,Qc)&&w.setAttribute("aria-label",a(this,Qc))},Nf=new WeakSet,lE=function(t,i){var h;const[r,l]=this.parentDimensions;this.width=t/r,this.height=i/l,this.setDims(t,i),(h=this._initialOptions)!=null&&h.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,a(this,ba)!==null&&clearTimeout(a(this,ba)),R(this,ba,setTimeout(()=>{R(this,ba,null),S(this,kh,wb).call(this,t,i)},200))},Ff=new WeakSet,cE=function(t,i){const{width:r,height:l}=a(this,Yi);let d=r,h=l,g=a(this,Yi);for(;d>2*t||h>2*i;){const _=d,w=h;d>2*t&&(d=d>=16384?Math.floor(d/2)-1:Math.ceil(d/2)),h>2*i&&(h=h>=16384?Math.floor(h/2)-1:Math.ceil(h/2));const L=new OffscreenCanvas(d,h);L.getContext("2d").drawImage(g,0,0,_,w,0,0,d,h),g=L.transferToImageBitmap()}return g},kh=new WeakSet,wb=function(t,i){t=Math.ceil(t),i=Math.ceil(i);const r=a(this,Qa);if(!r||r.width===t&&r.height===i)return;r.width=t,r.height=i;const l=a(this,Rr)?a(this,Yi):S(this,Ff,cE).call(this,t,i),d=r.getContext("2d");d.filter=this._uiManager.hcmFilter,d.drawImage(l,0,0,l.width,l.height,0,0,t,i)},ed=new WeakSet,Tp=function(t){if(t){if(a(this,Rr)){const l=this._uiManager.imageManager.getSvgUrl(a(this,hs));if(l)return l}const i=document.createElement("canvas");return{width:i.width,height:i.height}=a(this,Yi),i.getContext("2d").drawImage(a(this,Yi),0,0),i.toDataURL()}if(a(this,Rr)){const[i,r]=this.pageDimensions,l=Math.round(this.width*i*Xt.PDF_TO_CSS_UNITS),d=Math.round(this.height*r*Xt.PDF_TO_CSS_UNITS),h=new OffscreenCanvas(l,d);return h.getContext("2d").drawImage(a(this,Yi),0,0,a(this,Yi).width,a(this,Yi).height,0,0,l,d),h.transferToImageBitmap()}return structuredClone(a(this,Yi))},Df=new WeakSet,dE=function(){R(this,Xl,new ResizeObserver(t=>{const i=t[0].contentRect;i.width&&i.height&&S(this,Nf,lE).call(this,i.width,i.height)})),a(this,Xl).observe(this.div)},ke(Oh,"_type","stamp"),ke(Oh,"_editorType",Ae.STAMP);let gg=Oh;const Mr=class Mr{constructor({uiManager:e,pageIndex:t,div:i,accessibilityManager:r,annotationLayer:l,drawLayer:d,textLayer:h,viewport:g,l10n:_}){b(this,Bh);b(this,Vh);b(this,Jl);b(this,jh);b(this,Hh);b(this,Ql,void 0);b(this,td,!1);b(this,Ja,null);b(this,Nh,this.pointerup.bind(this));b(this,Bf,this.pointerUpAfterSelection.bind(this));b(this,Fh,this.pointerdown.bind(this));b(this,eo,null);b(this,Dh,this.selectionStart.bind(this));b(this,En,new Map);b(this,No,!1);b(this,id,!1);b(this,sd,!1);b(this,to,null);b(this,wt,void 0);const w=[...a(Mr,Fo).values()];if(!Mr._initialized){Mr._initialized=!0;for(const L of w)L.initialize(_)}e.registerEditorTypes(w),R(this,wt,e),this.pageIndex=t,this.div=i,R(this,Ql,r),R(this,Ja,l),this.viewport=g,R(this,to,h),this.drawLayer=d,a(this,wt).addLayer(this)}get isEmpty(){return a(this,En).size===0}updateToolbar(e){a(this,wt).updateToolbar(e)}updateMode(e=a(this,wt).getMode()){switch(S(this,Hh,Sb).call(this),e){case Ae.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;case Ae.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case Ae.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}if(e!==Ae.NONE){const{classList:t}=this.div;for(const i of a(Mr,Fo).values())t.toggle(`${i._type}Editing`,e===i._editorType);this.div.hidden=!1}}addInkEditorIfNeeded(e){if(a(this,wt).getMode()!==Ae.INK)return;if(!e){for(const i of a(this,En).values())if(i.isEmpty()){i.setInBackground();return}}S(this,Jl,uu).call(this,{offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(e){a(this,wt).setEditingState(e)}addCommands(e){a(this,wt).addCommands(e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}enable(){this.togglePointerEvents(!0);const e=new Set;for(const i of a(this,En).values())i.enableEditing(),i.annotationElementId&&e.add(i.annotationElementId);if(!a(this,Ja))return;const t=a(this,Ja).getEditableAnnotations();for(const i of t){if(i.hide(),a(this,wt).isDeletedAnnotationElement(i.data.id)||e.has(i.data.id))continue;const r=this.deserialize(i);r&&(this.addOrRebuild(r),r.enableEditing())}}disable(){var i;R(this,sd,!0),this.togglePointerEvents(!1);const e=new Set;for(const r of a(this,En).values()){if(r.disableEditing(),!r.annotationElementId||r.serialize()!==null){e.add(r.annotationElementId);continue}(i=this.getEditableAnnotation(r.annotationElementId))==null||i.show(),r.remove()}if(a(this,Ja)){const r=a(this,Ja).getEditableAnnotations();for(const l of r){const{id:d}=l.data;e.has(d)||a(this,wt).isDeletedAnnotationElement(d)||l.show()}}S(this,Hh,Sb).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:t}=this.div;for(const r of a(Mr,Fo).values())t.remove(`${r._type}Editing`);this.disableTextSelection(),R(this,sd,!1)}getEditableAnnotation(e){var t;return((t=a(this,Ja))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){a(this,wt).getActive()!==e&&a(this,wt).setActiveEditor(e)}enableTextSelection(){var e;(e=a(this,to))!=null&&e.div&&document.addEventListener("selectstart",a(this,Dh))}disableTextSelection(){var e;(e=a(this,to))!=null&&e.div&&document.removeEventListener("selectstart",a(this,Dh))}enableClick(){this.div.addEventListener("pointerdown",a(this,Fh)),this.div.addEventListener("pointerup",a(this,Nh))}disableClick(){this.div.removeEventListener("pointerdown",a(this,Fh)),this.div.removeEventListener("pointerup",a(this,Nh))}attach(e){a(this,En).set(e.id,e);const{annotationElementId:t}=e;t&&a(this,wt).isDeletedAnnotationElement(t)&&a(this,wt).removeDeletedAnnotationElement(e)}detach(e){var t;a(this,En).delete(e.id),(t=a(this,Ql))==null||t.removePointerInTextLayer(e.contentDiv),!a(this,sd)&&e.annotationElementId&&a(this,wt).addDeletedAnnotationElement(e)}remove(e){this.detach(e),a(this,wt).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1,a(this,id)||this.addInkEditorIfNeeded(!1)}changeParent(e){var t;e.parent!==this&&(e.annotationElementId&&(a(this,wt).addDeletedAnnotationElement(e.annotationElementId),Vt.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(this.changeParent(e),a(this,wt).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(),a(this,wt).addToAnnotationStorage(e)}moveEditorInDOM(e){var i;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!a(this,eo)&&(e._focusEventsAllowed=!1,R(this,eo,setTimeout(()=>{R(this,eo,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0}),t.focus())},0))),e._structTreeParentId=(i=a(this,Ql))==null?void 0:i.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),i=()=>{e.remove()};this.addCommands({cmd:t,undo:i,mustExec:!1})}getNextId(){return a(this,wt).getId()}canCreateNewEmptyEditor(){var e;return(e=a(this,Bh,_b))==null?void 0:e.canCreateNewEmptyEditor()}pasteEditor(e,t){a(this,wt).updateToolbar(e),a(this,wt).updateMode(e);const{offsetX:i,offsetY:r}=S(this,jh,Eb).call(this),l=this.getNextId(),d=S(this,Vh,yb).call(this,{parent:this,id:l,x:i,y:r,uiManager:a(this,wt),isCentered:!0,...t});d&&this.add(d)}deserialize(e){var t;return((t=a(Mr,Fo).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,a(this,wt)))||null}addNewEditor(){S(this,Jl,uu).call(this,S(this,jh,Eb).call(this),!0)}setSelected(e){a(this,wt).setSelected(e)}toggleSelected(e){a(this,wt).toggleSelected(e)}isSelected(e){return a(this,wt).isSelected(e)}unselect(e){a(this,wt).unselect(e)}selectionStart(e){var t;(t=a(this,to))==null||t.div.addEventListener("pointerup",a(this,Bf),{once:!0})}pointerUpAfterSelection(e){var L;const t=document.getSelection();if(t.rangeCount===0)return;const i=t.getRangeAt(0);if(i.collapsed||!((L=a(this,to))!=null&&L.div.contains(i.commonAncestorContainer)))return;const{x:r,y:l,width:d,height:h}=a(this,to).div.getBoundingClientRect(),g=i.getClientRects();let _;switch(this.viewport.rotation){case 90:_=(M,N,F,z)=>({x:(N-l)/h,y:1-(M+F-r)/d,width:z/h,height:F/d});break;case 180:_=(M,N,F,z)=>({x:1-(M+F-r)/d,y:1-(N+z-l)/h,width:F/d,height:z/h});break;case 270:_=(M,N,F,z)=>({x:1-(N+z-l)/h,y:(M-r)/d,width:z/h,height:F/d});break;default:_=(M,N,F,z)=>({x:(M-r)/d,y:(N-l)/h,width:F/d,height:z/h});break}const w=[];for(const{x:M,y:N,width:F,height:z}of g)F===0||z===0||w.push(_(M,N,F,z));w.length!==0&&S(this,Jl,uu).call(this,e,!1,{boxes:w}),t.empty()}pointerup(e){const{isMac:t}=fe.platform;if(!(e.button!==0||e.ctrlKey&&t)&&e.target===this.div&&a(this,No)){if(R(this,No,!1),!a(this,td)){R(this,td,!0);return}if(a(this,wt).getMode()===Ae.STAMP){a(this,wt).unselectAll();return}S(this,Jl,uu).call(this,e,!1)}}pointerdown(e){if(a(this,wt).getMode()===Ae.HIGHLIGHT&&this.enableTextSelection(),a(this,No)){R(this,No,!1);return}const{isMac:t}=fe.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;R(this,No,!0);const i=a(this,wt).getActive();R(this,td,!i||i.isEmpty())}findNewParent(e,t,i){const r=a(this,wt).findParent(t,i);return r===null||r===this?!1:(r.changeParent(e),!0)}destroy(){var e,t;((e=a(this,wt).getActive())==null?void 0:e.parent)===this&&(a(this,wt).commitOrRemove(),a(this,wt).setActiveEditor(null)),a(this,eo)&&(clearTimeout(a(this,eo)),R(this,eo,null));for(const i of a(this,En).values())(t=a(this,Ql))==null||t.removePointerInTextLayer(i.contentDiv),i.setParent(null),i.isAttachedToDOM=!1,i.div.remove();this.div=null,a(this,En).clear(),a(this,wt).removeLayer(this)}render({viewport:e}){this.viewport=e,Li(this.div,e);for(const t of a(this,wt).getEditors(this.pageIndex))this.add(t);this.updateMode()}update({viewport:e}){a(this,wt).commitOrRemove();const t=this.viewport.rotation,i=e.rotation;if(this.viewport=e,Li(this.div,{rotation:i}),t!==i)for(const r of a(this,En).values())r.rotate(i);this.updateMode()}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}};Ql=new WeakMap,td=new WeakMap,Ja=new WeakMap,Nh=new WeakMap,Bf=new WeakMap,Fh=new WeakMap,eo=new WeakMap,Dh=new WeakMap,En=new WeakMap,No=new WeakMap,id=new WeakMap,sd=new WeakMap,to=new WeakMap,wt=new WeakMap,Fo=new WeakMap,Bh=new WeakSet,_b=function(){return a(Mr,Fo).get(a(this,wt).getMode())},Vh=new WeakSet,yb=function(e){const t=a(this,Bh,_b);return t?new t.prototype.constructor(e):null},Jl=new WeakSet,uu=function(e,t,i={}){const r=this.getNextId(),l=S(this,Vh,yb).call(this,{parent:this,id:r,x:e.offsetX,y:e.offsetY,uiManager:a(this,wt),isCentered:t,...i});return l&&this.add(l),l},jh=new WeakSet,Eb=function(){const{x:e,y:t,width:i,height:r}=this.div.getBoundingClientRect(),l=Math.max(0,e),d=Math.max(0,t),h=Math.min(window.innerWidth,e+i),g=Math.min(window.innerHeight,t+r),_=(l+h)/2-e,w=(d+g)/2-t,[L,M]=this.viewport.rotation%180===0?[_,w]:[w,_];return{offsetX:L,offsetY:M}},Hh=new WeakSet,Sb=function(){R(this,id,!0);for(const e of a(this,En).values())e.isEmpty()&&e.remove();R(this,id,!1)},ke(Mr,"_initialized",!1),b(Mr,Fo,new Map([Na,mo,gg,pg].map(e=>[e._editorType,e])));let Da=Mr;const Qi=class Qi{constructor({pageIndex:e}){b(this,Wh);b(this,va,null);b(this,Uh,0);b(this,Zi,new Map);this.pageIndex=e}setParent(e){if(!a(this,va)){R(this,va,e);return}if(a(this,va)!==e){if(a(this,Zi).size>0)for(const t of a(this,Zi).values())t.remove(),e.append(t);R(this,va,e)}}static get _svgFactory(){return be(this,"_svgFactory",new Tn)}highlight({outlines:e,box:t},i,r){var F;const l=wa(this,Uh)._++,d=S(this,Wh,Cb).call(this,t);d.classList.add("highlight");const h=Qi._svgFactory.createElement("defs");d.append(h);const g=Qi._svgFactory.createElement("path");h.append(g);const _=`path_p${this.pageIndex}_${l}`;g.setAttribute("id",_),g.setAttribute("d",S(F=Qi,$h,Pb).call(F,e));const w=Qi._svgFactory.createElement("clipPath");h.append(w);const L=`clip_${_}`;w.setAttribute("id",L),w.setAttribute("clipPathUnits","objectBoundingBox");const M=Qi._svgFactory.createElement("use");w.append(M),M.setAttribute("href",`#${_}`),M.classList.add("clip");const N=Qi._svgFactory.createElement("use");return d.append(N),d.setAttribute("fill",i),d.setAttribute("fill-opacity",r),N.setAttribute("href",`#${_}`),a(this,Zi).set(l,d),{id:l,clipPathId:`url(#${L})`}}highlightOutline({outlines:e,box:t}){var w;const i=wa(this,Uh)._++,r=S(this,Wh,Cb).call(this,t);r.classList.add("highlightOutline");const l=Qi._svgFactory.createElement("defs");r.append(l);const d=Qi._svgFactory.createElement("path");l.append(d);const h=`path_p${this.pageIndex}_${i}`;d.setAttribute("id",h),d.setAttribute("d",S(w=Qi,$h,Pb).call(w,e)),d.setAttribute("vector-effect","non-scaling-stroke");const g=Qi._svgFactory.createElement("use");r.append(g),g.setAttribute("href",`#${h}`);const _=g.cloneNode();return r.append(_),g.classList.add("mainOutline"),_.classList.add("secondaryOutline"),a(this,Zi).set(i,r),i}updateBox(e,t){var i;S(i=Qi,zh,Ab).call(i,a(this,Zi).get(e),t)}rotate(e,t){a(this,Zi).get(e).setAttribute("data-main-rotation",t)}changeColor(e,t){a(this,Zi).get(e).setAttribute("fill",t)}changeOpacity(e,t){a(this,Zi).get(e).setAttribute("fill-opacity",t)}addClass(e,t){a(this,Zi).get(e).classList.add(t)}removeClass(e,t){a(this,Zi).get(e).classList.remove(t)}remove(e){a(this,va)!==null&&(a(this,Zi).get(e).remove(),a(this,Zi).delete(e))}destroy(){R(this,va,null);for(const e of a(this,Zi).values())e.remove();a(this,Zi).clear()}};va=new WeakMap,Uh=new WeakMap,Zi=new WeakMap,zh=new WeakSet,Ab=function(e,{x:t,y:i,width:r,height:l}){const{style:d}=e;d.top=`${100*i}%`,d.left=`${100*t}%`,d.width=`${100*r}%`,d.height=`${100*l}%`},Wh=new WeakSet,Cb=function(e){var i;const t=Qi._svgFactory.create(1,1,!0);return a(this,va).append(t),S(i=Qi,zh,Ab).call(i,t,e),t},$h=new WeakSet,Pb=function(e){const t=[];for(const i of e){let[r,l]=i;t.push(`M${r} ${l}`);for(let d=2;d<i.length;d+=2){const h=i[d],g=i[d+1];h===r?(t.push(`V${g}`),l=g):g===l&&(t.push(`H${h}`),r=h)}t.push("Z")}return t.join(" ")},b(Qi,zh),b(Qi,$h);let mg=Qi},81:(I,B,k)=>{k.d(B,{bindPrintServiceFactory:()=>tt});var y=k(972),C=k(234),U=k(12);function X(Ce,De){const Ge=De.allXfaHtml,ct=new C.SimpleLinkService,St=Math.round(y.PixelsPerInch.PDF_TO_CSS_UNITS*100)/100;for(const Tt of Ge.children){const ce=document.createElement("div");ce.className="xfaPrintedPage",Ce.append(ce);const W=new U.XfaLayerBuilder({pdfPage:null,annotationStorage:De.annotationStorage,linkService:ct,xfaHtml:Tt}),ne=(0,y.getXfaPageViewport)(Tt,{scale:St});W.render(ne,"print"),ce.append(W.div)}}var te=k(294);let Pe=null,de=null,Ve=null;function Ae(Ce,De,Ge,ct,St,Tt,ce){const W=Pe.scratchCanvas,ne=St/y.PixelsPerInch.PDF;W.width=Math.floor(ct.width*ne),W.height=Math.floor(ct.height*ne);const Re=W.getContext("2d");return Re.save(),Re.fillStyle="rgb(255, 255, 255)",Re.fillRect(0,0,W.width,W.height),Re.restore(),Promise.all([De.getPage(Ge),ce]).then(function([Ee,be]){const Je={canvasContext:Re,transform:[ne,0,0,ne,0,0],viewport:Ee.getViewport({scale:1,rotation:ct.rotation}),intent:"print",annotationMode:y.AnnotationMode.ENABLE_STORAGE,optionalContentConfigPromise:Tt,printAnnotationStorage:be};return Ee.render(Je).promise})}class ge{constructor(De,Ge,ct,St,Tt=null,ce=null,W){this.pdfDocument=De,this.pagesOverview=Ge,this.printContainer=ct,this._printResolution=St||150,this._optionalContentConfigPromise=Tt||De.getOptionalContentConfig(),this._printAnnotationStoragePromise=ce||Promise.resolve(),this.l10n=W,this.currentPage=-1,this.scratchCanvas=document.createElement("canvas")}layout(){this.throwIfInactive();const De=document.querySelector("body");De.setAttribute("data-pdfjsprinting",!0);const{width:Ge,height:ct}=this.pagesOverview[0];this.pagesOverview.every(Tt=>Tt.width===Ge&&Tt.height===ct)||console.warn("Not all pages have the same size. The printed result may be incorrect!"),this.pageStyleSheet=document.createElement("style"),this.pageStyleSheet.textContent=`@page { size: ${Ge}pt ${ct}pt;}`,De.append(this.pageStyleSheet)}destroy(){if(Pe!==this)return;this.printContainer.textContent="",document.querySelector("body").removeAttribute("data-pdfjsprinting"),this.pageStyleSheet&&(this.pageStyleSheet.remove(),this.pageStyleSheet=null),this.scratchCanvas.width=this.scratchCanvas.height=0,this.scratchCanvas=null,Pe=null,Le().then(function(){Ve.active===de&&Ve.close(de)})}renderPages(){if(this.pdfDocument.isPureXfa)return X(this.printContainer,this.pdfDocument),Promise.resolve();const De=this.pagesOverview.length,Ge=(ct,St)=>{if(this.throwIfInactive(),++this.currentPage>=De){Z(De,De,this.l10n),ct();return}const Tt=this.currentPage;Z(Tt,De,this.l10n),Ae(this,this.pdfDocument,Tt+1,this.pagesOverview[Tt],this._printResolution,this._optionalContentConfigPromise,this._printAnnotationStoragePromise).then(this.useRenderedPage.bind(this)).then(function(){Ge(ct,St)},St)};return new Promise(Ge)}useRenderedPage(){this.throwIfInactive();const De=document.createElement("img"),Ge=this.scratchCanvas;"toBlob"in Ge?Ge.toBlob(function(St){De.src=URL.createObjectURL(St)}):De.src=Ge.toDataURL();const ct=document.createElement("div");return ct.className="printedPage",ct.append(De),this.printContainer.append(ct),new Promise(function(St,Tt){De.onload=St,De.onerror=Tt})}performPrint(){return this.throwIfInactive(),new Promise(De=>{setTimeout(()=>{if(!this.active){De();return}xe.call(window),setTimeout(De,20)},0)})}get active(){return this===Pe}throwIfInactive(){if(!this.active)throw new Error("This print request was cancelled or completed.")}}const xe=window.print;window.print=function(){if(Pe){console.warn("Ignored window.print() because of a pending print job.");return}Le().then(function(){Pe&&Ve.open(de)});try{ze("beforeprint")}finally{if(!Pe){console.error("Expected print service to be initialized."),Le().then(function(){Ve.active===de&&Ve.close(de)});return}const Ce=Pe;Pe.renderPages().then(function(){return Ce.performPrint()}).catch(function(){}).then(function(){Ce.active&&at()})}};function ze(Ce){const De=new CustomEvent(Ce,{bubbles:!1,cancelable:!1,detail:"custom"});window.dispatchEvent(De)}function at(){Pe&&(Pe.destroy(),ze("afterprint"))}function Z(Ce,De,Ge){const ct=(0,te.getActiveApp)();de||(de=ct.appConfig.appContainer.querySelector(".printServiceDialog"));const St=Math.round(100*Ce/De),Tt=de.querySelector("progress"),ce=de.querySelector(".relative-progress");Tt.value=St,Ge.get("print_progress_percent",{progress:St}).then(W=>{ce.textContent=W})}if(window.addEventListener("keydown",function(Ce){Ce.keyCode===80&&(Ce.ctrlKey||Ce.metaKey)&&!Ce.altKey&&(!Ce.shiftKey||window.chrome||window.opera)&&(window.print(),Ce.preventDefault(),Ce.stopImmediatePropagation())},!0),"onbeforeprint"in window){const Ce=function(De){De.detail!=="custom"&&De.stopImmediatePropagation()};window.addEventListener("beforeprint",Ce),window.addEventListener("afterprint",Ce)}let _e;function Le(){if(!_e){const Ce=(0,te.getActiveApp)();if(Ve=Ce.overlayManager,!Ve)throw new Error("The overlay manager has not yet been initialized.");de||(de=Ce.appConfig.appContainer.querySelector(".printServiceDialog")),_e=Ve.register(de,!0),Ce.appConfig.appContainer.querySelector(".printCancel").onclick=at,de.addEventListener("close",at)}return _e}function tt(Ce){Ce.instance={supportsPrinting:!0,createPrintService(De,Ge,ct,St,Tt,ce,W){if(Pe)throw new Error("The print service is created and active.");return Pe=new ge(De,Ge,ct,St,Tt,ce,W),Pe}}}},759:(I,B,k)=>{k.d(B,{FluentBundle:()=>Re,FluentResource:()=>Se});class y{constructor($){this.value=$}valueOf(){return this.value}}class C extends y{constructor($="???"){super($)}toString($){return`{${this.value}}`}}class U extends y{constructor($,Q={}){super($),this.opts=Q}toString($){try{return $.memoizeIntlObject(Intl.NumberFormat,this.opts).format(this.value)}catch(Q){return $.reportError(Q),this.value.toString(10)}}}class X extends y{constructor($,Q={}){super($),this.opts=Q}toString($){try{return $.memoizeIntlObject(Intl.DateTimeFormat,this.opts).format(this.value)}catch(Q){return $.reportError(Q),new Date(this.value).toISOString()}}}const te=100,Pe="",de="";function Ve(Y,$,Q){if(Q===$||Q instanceof U&&$ instanceof U&&Q.value===$.value)return!0;if($ instanceof U&&typeof Q=="string"){let ye=Y.memoizeIntlObject(Intl.PluralRules,$.opts).select($.value);if(Q===ye)return!0}return!1}function Ae(Y,$,Q){return $[Q]?Ce(Y,$[Q].value):(Y.reportError(new RangeError("No default")),new C)}function ge(Y,$){const Q=[],ye=Object.create(null);for(const Ne of $)Ne.type==="narg"?ye[Ne.name]=xe(Y,Ne.value):Q.push(xe(Y,Ne));return{positional:Q,named:ye}}function xe(Y,$){switch($.type){case"str":return $.value;case"num":return new U($.value,{minimumFractionDigits:$.precision});case"var":return ze(Y,$);case"mesg":return at(Y,$);case"term":return Z(Y,$);case"func":return _e(Y,$);case"select":return Le(Y,$);default:return new C}}function ze(Y,{name:$}){let Q;if(Y.params)if(Object.prototype.hasOwnProperty.call(Y.params,$))Q=Y.params[$];else return new C(`$${$}`);else if(Y.args&&Object.prototype.hasOwnProperty.call(Y.args,$))Q=Y.args[$];else return Y.reportError(new ReferenceError(`Unknown variable: $${$}`)),new C(`$${$}`);if(Q instanceof y)return Q;switch(typeof Q){case"string":return Q;case"number":return new U(Q);case"object":if(Q instanceof Date)return new X(Q.getTime());default:return Y.reportError(new TypeError(`Variable type not supported: $${$}, ${typeof Q}`)),new C(`$${$}`)}}function at(Y,{name:$,attr:Q}){const ye=Y.bundle._messages.get($);if(!ye)return Y.reportError(new ReferenceError(`Unknown message: ${$}`)),new C($);if(Q){const Ne=ye.attributes[Q];return Ne?Ce(Y,Ne):(Y.reportError(new ReferenceError(`Unknown attribute: ${Q}`)),new C(`${$}.${Q}`))}return ye.value?Ce(Y,ye.value):(Y.reportError(new ReferenceError(`No value: ${$}`)),new C($))}function Z(Y,{name:$,attr:Q,args:ye}){const Ne=`-${$}`,Qe=Y.bundle._terms.get(Ne);if(!Qe)return Y.reportError(new ReferenceError(`Unknown term: ${Ne}`)),new C(Ne);if(Q){const Xt=Qe.attributes[Q];if(Xt){Y.params=ge(Y,ye).named;const is=Ce(Y,Xt);return Y.params=null,is}return Y.reportError(new ReferenceError(`Unknown attribute: ${Q}`)),new C(`${Ne}.${Q}`)}Y.params=ge(Y,ye).named;const Ot=Ce(Y,Qe.value);return Y.params=null,Ot}function _e(Y,{name:$,args:Q}){let ye=Y.bundle._functions[$];if(!ye)return Y.reportError(new ReferenceError(`Unknown function: ${$}()`)),new C(`${$}()`);if(typeof ye!="function")return Y.reportError(new TypeError(`Function ${$}() is not callable`)),new C(`${$}()`);try{let Ne=ge(Y,Q);return ye(Ne.positional,Ne.named)}catch(Ne){return Y.reportError(Ne),new C(`${$}()`)}}function Le(Y,{selector:$,variants:Q,star:ye}){let Ne=xe(Y,$);if(Ne instanceof C)return Ae(Y,Q,ye);for(const Qe of Q){const Ot=xe(Y,Qe.key);if(Ve(Y,Ne,Ot))return Ce(Y,Qe.value)}return Ae(Y,Q,ye)}function tt(Y,$){if(Y.dirty.has($))return Y.reportError(new RangeError("Cyclic reference")),new C;Y.dirty.add($);const Q=[],ye=Y.bundle._useIsolating&&$.length>1;for(const Ne of $){if(typeof Ne=="string"){Q.push(Y.bundle._transform(Ne));continue}if(Y.placeables++,Y.placeables>te)throw Y.dirty.delete($),new RangeError(`Too many placeables expanded: ${Y.placeables}, max allowed is ${te}`);ye&&Q.push(Pe),Q.push(xe(Y,Ne).toString(Y)),ye&&Q.push(de)}return Y.dirty.delete($),Q.join("")}function Ce(Y,$){return typeof $=="string"?Y.bundle._transform($):tt(Y,$)}class De{constructor($,Q,ye){this.dirty=new WeakSet,this.params=null,this.placeables=0,this.bundle=$,this.errors=Q,this.args=ye}reportError($){if(!this.errors||!($ instanceof Error))throw $;this.errors.push($)}memoizeIntlObject($,Q){let ye=this.bundle._intls.get($);ye||(ye={},this.bundle._intls.set($,ye));let Ne=JSON.stringify(Q);return ye[Ne]||(ye[Ne]=new $(this.bundle.locales,Q)),ye[Ne]}}function Ge(Y,$){const Q=Object.create(null);for(const[ye,Ne]of Object.entries(Y))$.includes(ye)&&(Q[ye]=Ne.valueOf());return Q}const ct=["unitDisplay","currencyDisplay","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits"];function St(Y,$){let Q=Y[0];if(Q instanceof C)return new C(`NUMBER(${Q.valueOf()})`);if(Q instanceof U)return new U(Q.valueOf(),{...Q.opts,...Ge($,ct)});if(Q instanceof X)return new U(Q.valueOf(),{...Ge($,ct)});throw new TypeError("Invalid argument to NUMBER")}const Tt=["dateStyle","timeStyle","fractionalSecondDigits","dayPeriod","hour12","weekday","era","year","month","day","hour","minute","second","timeZoneName"];function ce(Y,$){let Q=Y[0];if(Q instanceof C)return new C(`DATETIME(${Q.valueOf()})`);if(Q instanceof X)return new X(Q.valueOf(),{...Q.opts,...Ge($,Tt)});if(Q instanceof U)return new X(Q.valueOf(),{...Ge($,Tt)});throw new TypeError("Invalid argument to DATETIME")}const W=new Map;function ne(Y){const $=Array.isArray(Y)?Y.join(" "):Y;let Q=W.get($);return Q===void 0&&(Q=new Map,W.set($,Q)),Q}class Re{constructor($,{functions:Q,useIsolating:ye=!0,transform:Ne=Qe=>Qe}={}){this._terms=new Map,this._messages=new Map,this.locales=Array.isArray($)?$:[$],this._functions={NUMBER:St,DATETIME:ce,...Q},this._useIsolating=ye,this._transform=Ne,this._intls=ne($)}hasMessage($){return this._messages.has($)}getMessage($){return this._messages.get($)}addResource($,{allowOverrides:Q=!1}={}){const ye=[];for(let Ne=0;Ne<$.body.length;Ne++){let Qe=$.body[Ne];if(Qe.id.startsWith("-")){if(Q===!1&&this._terms.has(Qe.id)){ye.push(new Error(`Attempt to override an existing term: "${Qe.id}"`));continue}this._terms.set(Qe.id,Qe)}else{if(Q===!1&&this._messages.has(Qe.id)){ye.push(new Error(`Attempt to override an existing message: "${Qe.id}"`));continue}this._messages.set(Qe.id,Qe)}}return ye}formatPattern($,Q=null,ye=null){if(typeof $=="string")return this._transform($);let Ne=new De(this,ye,Q);try{return tt(Ne,$).toString(Ne)}catch(Qe){if(Ne.errors&&Qe instanceof Error)return Ne.errors.push(Qe),new C().toString(Ne);throw Qe}}}const Ee=/^(-?[a-zA-Z][\w-]*) *= */gm,be=/\.([a-zA-Z][\w-]*) *= */y,Je=/\*?\[/y,bt=/(-?[0-9]+(?:\.([0-9]+))?)/y,dt=/([a-zA-Z][\w-]*)/y,Ct=/([$-])?([a-zA-Z][\w-]*)(?:\.([a-zA-Z][\w-]*))?/y,_t=/^[A-Z][A-Z0-9_-]*$/,oe=/([^{}\n\r]+)/y,We=/([^\\"\n\r]*)/y,Fe=/\\([\\"])/y,Ze=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{6})/y,gt=/^\n+/,Nt=/ +$/,V=/ *\r?\n/g,j=/( *)$/,se=/{\s*/y,fe=/\s*}/y,le=/\[\s*/y,J=/\s*] */y,Oe=/\s*\(\s*/y,Me=/\s*->\s*/y,me=/\s*:\s*/y,G=/\s*,?\s*/y,ee=/\s+/y;class Se{constructor($){this.body=[],Ee.lastIndex=0;let Q=0;for(;;){let Be=Ee.exec($);if(Be===null)break;Q=Ee.lastIndex;try{this.body.push(is(Be[1]))}catch(it){if(it instanceof SyntaxError)continue;throw it}}function ye(Be){return Be.lastIndex=Q,Be.test($)}function Ne(Be,it){if($[Q]===Be)return Q++,!0;if(it)throw new it(`Expected ${Be}`);return!1}function Qe(Be,it){if(ye(Be))return Q=Be.lastIndex,!0;if(it)throw new it(`Expected ${Be.toString()}`);return!1}function Ot(Be){Be.lastIndex=Q;let it=Be.exec($);if(it===null)throw new SyntaxError(`Expected ${Be.toString()}`);return Q=Be.lastIndex,it}function Xt(Be){return Ot(Be)[1]}function is(Be){let it=zt(),Wt=Yn();if(it===null&&Object.keys(Wt).length===0)throw new SyntaxError("Expected message value or attributes");return{id:Be,value:it,attributes:Wt}}function Yn(){let Be=Object.create(null);for(;ye(be);){let it=Xt(be),Wt=zt();if(Wt===null)throw new SyntaxError("Expected attribute value");Be[it]=Wt}return Be}function zt(){let Be;if(ye(oe)&&(Be=Xt(oe)),$[Q]==="{"||$[Q]==="}")return oi(Be?[Be]:[],1/0);let it=Oi();return it?Be?oi([Be,it],it.length):(it.value=Dr(it.value,gt),oi([it],it.length)):Be?Dr(Be,Nt):null}function oi(Be=[],it){for(;;){if(ye(oe)){Be.push(Xt(oe));continue}if($[Q]==="{"){Be.push(xn());continue}if($[Q]==="}")throw new SyntaxError("Unbalanced closing brace");let Li=Oi();if(Li){Be.push(Li),it=Math.min(it,Li.length);continue}break}let Wt=Be.length-1,Ft=Be[Wt];typeof Ft=="string"&&(Be[Wt]=Dr(Ft,Nt));let ji=[];for(let Li of Be)Li instanceof he&&(Li=Li.value.slice(0,Li.value.length-it)),Li&&ji.push(Li);return ji}function xn(){Qe(se,SyntaxError);let Be=Tn();if(Qe(fe))return Be;if(Qe(Me)){let it=_i();return Qe(fe,SyntaxError),{type:"select",selector:Be,...it}}throw new SyntaxError("Unclosed placeable")}function Tn(){if($[Q]==="{")return xn();if(ye(Ct)){let[,Be,it,Wt=null]=Ot(Ct);if(Be==="$")return{type:"var",name:it};if(Qe(Oe)){let Ft=Ti();if(Be==="-")return{type:"term",name:it,attr:Wt,args:Ft};if(_t.test(it))return{type:"func",name:it,args:Ft};throw new SyntaxError("Function names must be all upper-case")}return Be==="-"?{type:"term",name:it,attr:Wt,args:[]}:{type:"mesg",name:it,attr:Wt}}return Js()}function Ti(){let Be=[];for(;;){switch($[Q]){case")":return Q++,Be;case void 0:throw new SyntaxError("Unclosed argument list")}Be.push(li()),Qe(G)}}function li(){let Be=Tn();return Be.type!=="mesg"?Be:Qe(me)?{type:"narg",name:Be.name,value:Js()}:Be}function _i(){let Be=[],it=0,Wt;for(;ye(Je);){Ne("*")&&(Wt=it);let Ft=ps(),ji=zt();if(ji===null)throw new SyntaxError("Expected variant value");Be[it++]={key:Ft,value:ji}}if(it===0)return null;if(Wt===void 0)throw new SyntaxError("Expected default variant");return{variants:Be,star:Wt}}function ps(){Qe(le,SyntaxError);let Be;return ye(bt)?Be=Fr():Be={type:"str",value:Xt(dt)},Qe(J,SyntaxError),Be}function Js(){if(ye(bt))return Fr();if($[Q]==='"')return Zn();throw new SyntaxError("Invalid expression")}function Fr(){let[,Be,it=""]=Ot(bt),Wt=it.length;return{type:"num",value:parseFloat(Be),precision:Wt}}function Zn(){Ne('"',SyntaxError);let Be="";for(;;){if(Be+=Xt(We),$[Q]==="\\"){Be+=en();continue}if(Ne('"'))return{type:"str",value:Be};throw new SyntaxError("Unclosed string literal")}}function en(){if(ye(Fe))return Xt(Fe);if(ye(Ze)){let[,Be,it]=Ot(Ze),Wt=parseInt(Be||it,16);return Wt<=55295||57344<=Wt?String.fromCodePoint(Wt):""}throw new SyntaxError("Unknown escape sequence")}function Oi(){let Be=Q;switch(Qe(ee),$[Q]){case".":case"[":case"*":case"}":case void 0:return!1;case"{":return Br($.slice(Be,Q))}return $[Q-1]===" "?Br($.slice(Be,Q)):!1}function Dr(Be,it){return Be.replace(it,"")}function Br(Be){let it=Be.replace(V,`
`),Wt=j.exec(Be)[1].length;return new he(it,Wt)}}}class he{constructor($,Q){this.value=$,this.length=Q}}},275:(I,B,k)=>{k.d(B,{DOMLocalization:()=>Tt});const y=/<|&#?\w+;/,C={"http://www.w3.org/1999/xhtml":["em","strong","small","s","cite","q","dfn","abbr","data","time","code","var","samp","kbd","sub","sup","i","b","u","mark","bdi","bdo","span","br","wbr"]},U={"http://www.w3.org/1999/xhtml":{global:["title","aria-label","aria-valuetext"],a:["download"],area:["download","alt"],input:["alt","placeholder"],menuitem:["label"],menu:["label"],optgroup:["label"],option:["label"],track:["label"],img:["alt"],textarea:["placeholder"],th:["abbr"]},"http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul":{global:["accesskey","aria-label","aria-valuetext","label","title","tooltiptext"],description:["value"],key:["key","keycode"],label:["value"],textbox:["placeholder","value"]}};function X(ce,W){const{value:ne}=W;if(typeof ne=="string")if(ce.localName==="title"&&ce.namespaceURI==="http://www.w3.org/1999/xhtml")ce.textContent=ne;else if(!y.test(ne))ce.textContent=ne;else{const Re=ce.ownerDocument.createElementNS("http://www.w3.org/1999/xhtml","template");Re.innerHTML=ne,te(Re.content,ce)}de(W,ce)}function te(ce,W){for(const ne of ce.childNodes)if(ne.nodeType!==ne.TEXT_NODE){if(ne.hasAttribute("data-l10n-name")){const Re=Ve(W,ne);ce.replaceChild(Re,ne);continue}if(xe(ne)){const Re=Ae(ne);ce.replaceChild(Re,ne);continue}console.warn(`An element of forbidden type "${ne.localName}" was found in the translation. Only safe text-level elements and elements with data-l10n-name are allowed.`),ce.replaceChild(ge(ne),ne)}W.textContent="",W.appendChild(ce)}function Pe(ce,W){if(!ce)return!1;for(let ne of ce)if(ne.name===W)return!0;return!1}function de(ce,W){const ne=W.hasAttribute("data-l10n-attrs")?W.getAttribute("data-l10n-attrs").split(",").map(Re=>Re.trim()):null;for(const Re of Array.from(W.attributes))ze(Re.name,W,ne)&&!Pe(ce.attributes,Re.name)&&W.removeAttribute(Re.name);if(ce.attributes)for(const Re of Array.from(ce.attributes))ze(Re.name,W,ne)&&W.getAttribute(Re.name)!==Re.value&&W.setAttribute(Re.name,Re.value)}function Ve(ce,W){const ne=W.getAttribute("data-l10n-name"),Re=ce.querySelector(`[data-l10n-name="${ne}"]`);if(!Re)return console.warn(`An element named "${ne}" wasn't found in the source.`),ge(W);if(Re.localName!==W.localName)return console.warn(`An element named "${ne}" was found in the translation but its type ${W.localName} didn't match the element found in the source (${Re.localName}).`),ge(W);ce.removeChild(Re);const Ee=Re.cloneNode(!1);return at(W,Ee)}function Ae(ce){const W=ce.ownerDocument.createElement(ce.localName);return at(ce,W)}function ge(ce){return ce.ownerDocument.createTextNode(ce.textContent)}function xe(ce){const W=C[ce.namespaceURI];return W&&W.includes(ce.localName)}function ze(ce,W,ne=null){if(ne&&ne.includes(ce))return!0;const Re=U[W.namespaceURI];if(!Re)return!1;const Ee=ce.toLowerCase(),be=W.localName;if(Re.global.includes(Ee))return!0;if(!Re[be])return!1;if(Re[be].includes(Ee))return!0;if(W.namespaceURI==="http://www.w3.org/1999/xhtml"&&be==="input"&&Ee==="value"){const Je=W.type.toLowerCase();if(Je==="submit"||Je==="button"||Je==="reset")return!0}return!1}function at(ce,W){return W.textContent=ce.textContent,de(ce,W),W}class Z extends Array{static from(W){return W instanceof this?W:new this(W)}}class _e extends Z{constructor(W){if(super(),Symbol.asyncIterator in Object(W))this.iterator=W[Symbol.asyncIterator]();else if(Symbol.iterator in Object(W))this.iterator=W[Symbol.iterator]();else throw new TypeError("Argument must implement the iteration protocol.")}[Symbol.asyncIterator](){const W=this;let ne=0;return{async next(){return W.length<=ne&&W.push(W.iterator.next()),W[ne++]}}}async touchNext(W=1){let ne=0;for(;ne++<W;){const Re=this[this.length-1];if(Re&&(await Re).done)break;this.push(this.iterator.next())}return this[this.length-1]}}class Le{constructor(W=[],ne){this.resourceIds=W,this.generateBundles=ne,this.onChange(!0)}addResourceIds(W,ne=!1){return this.resourceIds.push(...W),this.onChange(ne),this.resourceIds.length}removeResourceIds(W){return this.resourceIds=this.resourceIds.filter(ne=>!W.includes(ne)),this.onChange(),this.resourceIds.length}async formatWithFallback(W,ne){const Re=[];let Ee=!1;for await(const be of this.bundles){Ee=!0;const Je=De(ne,be,W,Re);if(Je.size===0)break;if(typeof console<"u"){const bt=be.locales[0],dt=Array.from(Je).join(", ");console.warn(`[fluent] Missing translations in ${bt}: ${dt}`)}}return!Ee&&typeof console<"u"&&console.warn(`[fluent] Request for keys failed because no resource bundles got generated.
  keys: ${JSON.stringify(W)}.
  resourceIds: ${JSON.stringify(this.resourceIds)}.`),Re}formatMessages(W){return this.formatWithFallback(W,Ce)}formatValues(W){return this.formatWithFallback(W,tt)}async formatValue(W,ne){const[Re]=await this.formatValues([{id:W,args:ne}]);return Re}handleEvent(){this.onChange()}onChange(W=!1){this.bundles=_e.from(this.generateBundles(this.resourceIds)),W&&this.bundles.touchNext(2)}}function tt(ce,W,ne,Re){return ne.value?ce.formatPattern(ne.value,Re,W):null}function Ce(ce,W,ne,Re){const Ee={value:null,attributes:null};ne.value&&(Ee.value=ce.formatPattern(ne.value,Re,W));let be=Object.keys(ne.attributes);if(be.length>0){Ee.attributes=new Array(be.length);for(let[Je,bt]of be.entries()){let dt=ce.formatPattern(ne.attributes[bt],Re,W);Ee.attributes[Je]={name:bt,value:dt}}}return Ee}function De(ce,W,ne,Re){const Ee=[],be=new Set;return ne.forEach(({id:Je,args:bt},dt)=>{if(Re[dt]!==void 0)return;let Ct=W.getMessage(Je);if(Ct){if(Ee.length=0,Re[dt]=ce(W,Ee,Ct,bt),Ee.length>0&&typeof console<"u"){const _t=W.locales[0],oe=Ee.join(", ");console.warn(`[fluent][resolver] errors in ${_t}/${Je}: ${oe}.`)}}else be.add(Je)}),be}const Ge="data-l10n-id",ct="data-l10n-args",St=`[${Ge}]`;class Tt extends Le{constructor(W,ne){super(W,ne),this.roots=new Set,this.pendingrAF=null,this.pendingElements=new Set,this.windowElement=null,this.mutationObserver=null,this.observerConfig={attributes:!0,characterData:!1,childList:!0,subtree:!0,attributeFilter:[Ge,ct]}}onChange(W=!1){super.onChange(W),this.roots&&this.translateRoots()}setAttributes(W,ne,Re){return W.setAttribute(Ge,ne),Re?W.setAttribute(ct,JSON.stringify(Re)):W.removeAttribute(ct),W}getAttributes(W){return{id:W.getAttribute(Ge),args:JSON.parse(W.getAttribute(ct)||null)}}connectRoot(W){for(const ne of this.roots)if(ne===W||ne.contains(W)||W.contains(ne))throw new Error("Cannot add a root that overlaps with existing root.");if(this.windowElement){if(this.windowElement!==W.ownerDocument.defaultView)throw new Error(`Cannot connect a root:
          DOMLocalization already has a root from a different window.`)}else this.windowElement=W.ownerDocument.defaultView,this.mutationObserver=new this.windowElement.MutationObserver(ne=>this.translateMutations(ne));this.roots.add(W),this.mutationObserver.observe(W,this.observerConfig)}disconnectRoot(W){return this.roots.delete(W),this.pauseObserving(),this.roots.size===0?(this.mutationObserver=null,this.windowElement=null,this.pendingrAF=null,this.pendingElements.clear(),!0):(this.resumeObserving(),!1)}translateRoots(){const W=Array.from(this.roots);return Promise.all(W.map(ne=>this.translateFragment(ne)))}pauseObserving(){this.mutationObserver&&(this.translateMutations(this.mutationObserver.takeRecords()),this.mutationObserver.disconnect())}resumeObserving(){if(this.mutationObserver)for(const W of this.roots)this.mutationObserver.observe(W,this.observerConfig)}translateMutations(W){for(const ne of W)switch(ne.type){case"attributes":ne.target.hasAttribute("data-l10n-id")&&this.pendingElements.add(ne.target);break;case"childList":for(const Re of ne.addedNodes)if(Re.nodeType===Re.ELEMENT_NODE)if(Re.childElementCount)for(const Ee of this.getTranslatables(Re))this.pendingElements.add(Ee);else Re.hasAttribute(Ge)&&this.pendingElements.add(Re);break}this.pendingElements.size>0&&this.pendingrAF===null&&(this.pendingrAF=this.windowElement.requestAnimationFrame(()=>{this.translateElements(Array.from(this.pendingElements)),this.pendingElements.clear(),this.pendingrAF=null}))}translateFragment(W){return this.translateElements(this.getTranslatables(W))}async translateElements(W){if(!W.length)return;const ne=W.map(this.getKeysForElement),Re=await this.formatMessages(ne);return this.applyTranslations(W,Re)}applyTranslations(W,ne){this.pauseObserving();for(let Re=0;Re<W.length;Re++)ne[Re]!==void 0&&X(W[Re],ne[Re]);this.resumeObserving()}getTranslatables(W){const ne=Array.from(W.querySelectorAll(St));return typeof W.hasAttribute=="function"&&W.hasAttribute(Ge)&&ne.push(W),ne}getKeysForElement(W){return{id:W.getAttribute(Ge),args:JSON.parse(W.getAttribute(ct)||null)}}}},961:(I,B,k)=>{k.d(B,{AppOptions:()=>te,OptionKind:()=>C,compatibilityParams:()=>y});const y=Object.create(null);{const Pe=navigator.userAgent||"",de=navigator.platform||"",Ve=navigator.maxTouchPoints||1,Ae=/Android/.test(Pe),ge=/\b(iPad|iPhone|iPod)(?=;)/.test(Pe)||de==="MacIntel"&&Ve>1;(function(){(ge||Ae)&&(y.maxCanvasPixels=5242880)})()}const C={BROWSER:1,VIEWER:2,API:4,WORKER:8,PREFERENCE:128},U={canvasMaxAreaInBytes:{value:-1,kind:C.BROWSER+C.API},isInAutomation:{value:!1,kind:C.BROWSER},supportsDocumentFonts:{value:!0,kind:C.BROWSER},supportsIntegratedFind:{value:!1,kind:C.BROWSER},supportsMouseWheelZoomCtrlKey:{value:!0,kind:C.BROWSER},supportsMouseWheelZoomMetaKey:{value:!0,kind:C.BROWSER},supportsPinchToZoom:{value:!0,kind:C.BROWSER},annotationEditorMode:{value:0,kind:C.VIEWER+C.PREFERENCE},annotationMode:{value:2,kind:C.VIEWER+C.PREFERENCE},cursorToolOnLoad:{value:0,kind:C.VIEWER+C.PREFERENCE},defaultZoomDelay:{value:400,kind:C.VIEWER+C.PREFERENCE},defaultZoomValue:{value:"",kind:C.VIEWER+C.PREFERENCE},disableHistory:{value:!1,kind:C.VIEWER},disablePageLabels:{value:!1,kind:C.VIEWER+C.PREFERENCE},enableHighlightEditor:{value:!1,kind:C.VIEWER+C.PREFERENCE},enablePermissions:{value:!1,kind:C.VIEWER+C.PREFERENCE},enablePrintAutoRotate:{value:!0,kind:C.VIEWER+C.PREFERENCE},enableScripting:{value:!0,kind:C.VIEWER+C.PREFERENCE},externalLinkRel:{value:"noopener noreferrer nofollow",kind:C.VIEWER},externalLinkTarget:{value:0,kind:C.VIEWER+C.PREFERENCE},highlightEditorColors:{value:"yellow=#FFFF98,green=#53FFBC,blue=#80EBFF,pink=#FFCBE6,red=#FF4F5F",kind:C.VIEWER+C.PREFERENCE},historyUpdateUrl:{value:!1,kind:C.VIEWER+C.PREFERENCE},ignoreDestinationZoom:{value:!1,kind:C.VIEWER+C.PREFERENCE},imageResourcesPath:{value:"./images/",kind:C.VIEWER},maxCanvasPixels:{value:16777216,kind:C.VIEWER},forcePageColors:{value:!1,kind:C.VIEWER+C.PREFERENCE},pageColorsBackground:{value:"Canvas",kind:C.VIEWER+C.PREFERENCE},pageColorsForeground:{value:"CanvasText",kind:C.VIEWER+C.PREFERENCE},pdfBugEnabled:{value:!1,kind:C.VIEWER+C.PREFERENCE},printResolution:{value:150,kind:C.VIEWER},sidebarViewOnLoad:{value:-1,kind:C.VIEWER+C.PREFERENCE},scrollModeOnLoad:{value:-1,kind:C.VIEWER+C.PREFERENCE},spreadModeOnLoad:{value:-1,kind:C.VIEWER+C.PREFERENCE},textLayerMode:{value:1,kind:C.VIEWER+C.PREFERENCE},viewOnLoad:{value:0,kind:C.VIEWER+C.PREFERENCE},cMapPacked:{value:!0,kind:C.API},cMapUrl:{value:"../web/cmaps/",kind:C.API},disableAutoFetch:{value:!1,kind:C.API+C.PREFERENCE},disableFontFace:{value:!1,kind:C.API+C.PREFERENCE},disableRange:{value:!1,kind:C.API+C.PREFERENCE},disableStream:{value:!1,kind:C.API+C.PREFERENCE},docBaseUrl:{value:"",kind:C.API},enableXfa:{value:!0,kind:C.API+C.PREFERENCE},fontExtraProperties:{value:!1,kind:C.API},isEvalSupported:{value:!0,kind:C.API},isOffscreenCanvasSupported:{value:!0,kind:C.API},maxImageSize:{value:-1,kind:C.API},pdfBug:{value:!1,kind:C.API},standardFontDataUrl:{value:"../web/standard_fonts/",kind:C.API},verbosity:{value:1,kind:C.API},workerPort:{value:null,kind:C.WORKER},workerSrc:{value:"../build/pdf.worker.mjs",kind:C.WORKER}};U.defaultUrl={value:"compressed.tracemonkey-pldi-09.pdf",kind:C.VIEWER},U.sandboxBundleSrc={value:"../build/pdf.sandbox.mjs",kind:C.VIEWER},U.viewerCssTheme={value:0,kind:C.VIEWER+C.PREFERENCE},U.disablePreferences={value:!1,kind:C.VIEWER},U.locale={value:navigator.language||"en-US",kind:C.VIEWER};const X=Object.create(null);class te{constructor(){throw new Error("Cannot initialize AppOptions.")}static get(de){const Ve=X[de];if(Ve!==void 0)return Ve;const Ae=U[de];if(Ae!==void 0)return y[de]??Ae.value}static getAll(de=null){const Ve=Object.create(null);for(const Ae in U){const ge=U[Ae];if(de&&!(de&ge.kind))continue;const xe=X[Ae];Ve[Ae]=xe!==void 0?xe:y[Ae]??ge.value}return Ve}static set(de,Ve){X[de]=Ve}static setAll(de,Ve=!1){if(Ve){if(this.get("disablePreferences"))return;Object.keys(X).length&&console.warn('setAll: The Preferences may override manually set AppOptions; please use the "disablePreferences"-option in order to prevent that.')}for(const Ae in de)X[Ae]=de[Ae]}static remove(de){delete X[de]}}},65:(I,B,k)=>{var C,U,X,te,hE,de,uE;k.d(B,{L10n:()=>y});const Ae=class Ae{constructor({lang:xe,isRTL:ze},at=null){b(this,C,void 0);b(this,U,void 0);b(this,X,void 0);var Z,_e;R(this,U,S(Z=Ae,te,hE).call(Z,xe)),R(this,X,at),R(this,C,ze??S(_e=Ae,de,uE).call(_e,a(this,U))?"rtl":"ltr")}_setL10n(xe){R(this,X,xe)}getLanguage(){return a(this,U)}getDirection(){return a(this,C)}async get(xe,ze=null,at){if(Array.isArray(xe))return xe=xe.map(Le=>({id:Le})),(await a(this,X).formatMessages(xe)).map(Le=>Le.value);const Z=await a(this,X).formatMessages([{id:xe,args:ze}]);return(Z==null?void 0:Z[0].value)||at}async translate(xe){try{a(this,X).connectRoot(xe),await a(this,X).translateRoots()}catch{}}pause(){a(this,X).pauseObserving()}resume(){a(this,X).resumeObserving()}};C=new WeakMap,U=new WeakMap,X=new WeakMap,te=new WeakSet,hE=function(xe){return xe=(xe==null?void 0:xe.toLowerCase())||"en-us",{en:"en-us",es:"es-es",fy:"fy-nl",ga:"ga-ie",gu:"gu-in",hi:"hi-in",hy:"hy-am",nb:"nb-no",ne:"ne-np",nn:"nn-no",pa:"pa-in",pt:"pt-pt",sv:"sv-se",zh:"zh-cn"}[xe]||xe},de=new WeakSet,uE=function(xe){const ze=xe.split("-",1)[0];return["ar","he","fa","ps","ur"].includes(ze)},b(Ae,te),b(Ae,de);let y=Ae},234:(I,B,k)=>{var de,Ve,xb,ge,fE;k.d(B,{LinkTarget:()=>U,PDFLinkService:()=>te,SimpleLinkService:()=>Pe});var y=k(927);const C="noopener noreferrer nofollow",U={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4};function X(at,{url:Z,target:_e,rel:Le,enabled:tt=!0}={}){if(!Z||typeof Z!="string")throw new Error('A valid "url" parameter must provided.');tt?at.href=at.title=Z:(at.href="",at.title=`Disabled: ${Z}`,at.onclick=()=>!1);let Ce="";switch(_e){case U.NONE:break;case U.SELF:Ce="_self";break;case U.BLANK:Ce="_blank";break;case U.PARENT:Ce="_parent";break;case U.TOP:Ce="_top";break}at.target=Ce,at.rel=typeof Le=="string"?Le:C}const ze=class ze{constructor({eventBus:Z,externalLinkTarget:_e=null,externalLinkRel:Le=null,ignoreDestinationZoom:tt=!1}={}){b(this,Ve);b(this,de,new Map);this.eventBus=Z,this.externalLinkTarget=_e,this.externalLinkRel=Le,this.externalLinkEnabled=!0,this._ignoreDestinationZoom=tt,this.baseUrl=null,this.pdfDocument=null,this.pdfViewer=null,this.pdfHistory=null}setDocument(Z,_e=null){this.baseUrl=_e,this.pdfDocument=Z,a(this,de).clear()}setViewer(Z){this.pdfViewer=Z}setHistory(Z){this.pdfHistory=Z}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return this.pdfViewer.currentPageNumber}set page(Z){this.pdfViewer.currentPageNumber=Z}get rotation(){return this.pdfViewer.pagesRotation}set rotation(Z){this.pdfViewer.pagesRotation=Z}get isInPresentationMode(){return this.pdfViewer.isInPresentationMode}async goToDestination(Z){if(!this.pdfDocument)return;let _e,Le;if(typeof Z=="string"?(_e=Z,Le=await this.pdfDocument.getDestination(Z)):(_e=null,Le=await Z),!Array.isArray(Le)){console.error(`PDFLinkService.goToDestination: "${Le}" is not a valid destination array, for dest="${Z}".`);return}S(this,Ve,xb).call(this,Z,_e,Le)}goToPage(Z){if(!this.pdfDocument)return;const _e=typeof Z=="string"&&this.pdfViewer.pageLabelToPageNumber(Z)||Z|0;if(!(Number.isInteger(_e)&&_e>0&&_e<=this.pagesCount)){console.error(`PDFLinkService.goToPage: "${Z}" is not a valid page.`);return}this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.pushPage(_e)),this.pdfViewer.scrollPageIntoView({pageNumber:_e})}addLinkAttributes(Z,_e,Le=!1){X(Z,{url:_e,target:Le?U.BLANK:this.externalLinkTarget,rel:this.externalLinkRel,enabled:this.externalLinkEnabled})}getDestinationHash(Z){if(typeof Z=="string"){if(Z.length>0)return this.getAnchorUrl("#"+escape(Z))}else if(Array.isArray(Z)){const _e=JSON.stringify(Z);if(_e.length>0)return this.getAnchorUrl("#"+escape(_e))}return this.getAnchorUrl("")}getAnchorUrl(Z){return this.baseUrl?this.baseUrl+Z:Z}setHash(Z){var tt;if(!this.pdfDocument)return;let _e,Le;if(Z.includes("=")){const Ce=(0,y.parseQueryString)(Z);if(Ce.has("search")){const De=Ce.get("search").replaceAll('"',""),Ge=Ce.get("phrase")==="true";this.eventBus.dispatch("findfromurlhash",{source:this,query:Ge?De:De.match(/\S+/g)})}if(Ce.has("page")&&(_e=Ce.get("page")|0||1),Ce.has("zoom")){const De=Ce.get("zoom").split(","),Ge=De[0],ct=parseFloat(Ge);Ge.includes("Fit")?Ge==="Fit"||Ge==="FitB"?Le=[null,{name:Ge}]:Ge==="FitH"||Ge==="FitBH"||Ge==="FitV"||Ge==="FitBV"?Le=[null,{name:Ge},De.length>1?De[1]|0:null]:Ge==="FitR"?De.length!==5?console.error('PDFLinkService.setHash: Not enough parameters for "FitR".'):Le=[null,{name:Ge},De[1]|0,De[2]|0,De[3]|0,De[4]|0]:console.error(`PDFLinkService.setHash: "${Ge}" is not a valid zoom value.`):Le=[null,{name:"XYZ"},De.length>1?De[1]|0:null,De.length>2?De[2]|0:null,ct?ct/100:Ge]}Le?this.pdfViewer.scrollPageIntoView({pageNumber:_e||this.page,destArray:Le,allowNegativeOffset:!0}):_e&&(this.page=_e),Ce.has("pagemode")&&this.eventBus.dispatch("pagemode",{source:this,mode:Ce.get("pagemode")}),Ce.has("nameddest")&&this.goToDestination(Ce.get("nameddest"));return}Le=unescape(Z);try{Le=JSON.parse(Le),Array.isArray(Le)||(Le=Le.toString())}catch{}if(typeof Le=="string"||S(tt=ze,ge,fE).call(tt,Le)){this.goToDestination(Le);return}console.error(`PDFLinkService.setHash: "${unescape(Z)}" is not a valid destination.`)}executeNamedAction(Z){var _e,Le;switch(Z){case"GoBack":(_e=this.pdfHistory)==null||_e.back();break;case"GoForward":(Le=this.pdfHistory)==null||Le.forward();break;case"NextPage":this.pdfViewer.nextPage();break;case"PrevPage":this.pdfViewer.previousPage();break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1;break}this.eventBus.dispatch("namedaction",{source:this,action:Z})}async executeSetOCGState(Z){const _e=this.pdfDocument,Le=await this.pdfViewer.optionalContentConfigPromise;if(_e!==this.pdfDocument)return;let tt;for(const Ce of Z.state){switch(Ce){case"ON":case"OFF":case"Toggle":tt=Ce;continue}switch(tt){case"ON":Le.setVisibility(Ce,!0);break;case"OFF":Le.setVisibility(Ce,!1);break;case"Toggle":const De=Le.getGroup(Ce);De&&Le.setVisibility(Ce,!De.visible);break}}this.pdfViewer.optionalContentConfigPromise=Promise.resolve(Le)}cachePageRef(Z,_e){if(!_e)return;const Le=_e.gen===0?`${_e.num}R`:`${_e.num}R${_e.gen}`;a(this,de).set(Le,Z)}_cachedPageNumber(Z){if(!Z)return null;const _e=Z.gen===0?`${Z.num}R`:`${Z.num}R${Z.gen}`;return a(this,de).get(_e)||null}};de=new WeakMap,Ve=new WeakSet,xb=function(Z,_e=null,Le){const tt=Le[0];let Ce;if(typeof tt=="object"&&tt!==null){if(Ce=this._cachedPageNumber(tt),!Ce){this.pdfDocument.getPageIndex(tt).then(De=>{this.cachePageRef(De+1,tt),S(this,Ve,xb).call(this,Z,_e,Le)}).catch(()=>{console.error(`PDFLinkService.#goToDestinationHelper: "${tt}" is not a valid page reference, for dest="${Z}".`)});return}}else if(Number.isInteger(tt))Ce=tt+1;else{console.error(`PDFLinkService.#goToDestinationHelper: "${tt}" is not a valid destination reference, for dest="${Z}".`);return}if(!Ce||Ce<1||Ce>this.pagesCount){console.error(`PDFLinkService.#goToDestinationHelper: "${Ce}" is not a valid page number, for dest="${Z}".`);return}this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.push({namedDest:_e,explicitDest:Le,pageNumber:Ce})),this.pdfViewer.scrollPageIntoView({pageNumber:Ce,destArray:Le,ignoreDestinationZoom:this._ignoreDestinationZoom})},ge=new WeakSet,fE=function(Z){if(!Array.isArray(Z))return!1;const _e=Z.length;if(_e<2)return!1;const Le=Z[0];if(!(typeof Le=="object"&&Number.isInteger(Le.num)&&Number.isInteger(Le.gen))&&!(Number.isInteger(Le)&&Le>=0))return!1;const tt=Z[1];if(!(typeof tt=="object"&&typeof tt.name=="string"))return!1;let Ce=!0;switch(tt.name){case"XYZ":if(_e!==5)return!1;break;case"Fit":case"FitB":return _e===2;case"FitH":case"FitBH":case"FitV":case"FitBV":if(_e!==3)return!1;break;case"FitR":if(_e!==6)return!1;Ce=!1;break;default:return!1}for(let De=2;De<_e;De++){const Ge=Z[De];if(!(typeof Ge=="number"||Ce&&Ge===null))return!1}return!0},b(ze,ge);let te=ze;class Pe{constructor(){this.externalLinkEnabled=!0}get pagesCount(){return 0}get page(){return 0}set page(Z){}get rotation(){return 0}set rotation(Z){}get isInPresentationMode(){return!1}async goToDestination(Z){}goToPage(Z){}addLinkAttributes(Z,_e,Le=!1){X(Z,{url:_e,enabled:this.externalLinkEnabled})}getDestinationHash(Z){return"#"}getAnchorUrl(Z){return"#"}setHash(Z){}executeNamedAction(Z){}executeSetOCGState(Z){}cachePageRef(Z,_e){}}},927:(I,B,k)=>{var le,J,Oe,Me,me;k.d(B,{AutoPrintRegExp:()=>tt,CursorTool:()=>Le,DEFAULT_SCALE:()=>C,DEFAULT_SCALE_DELTA:()=>U,DEFAULT_SCALE_VALUE:()=>y,MAX_AUTO_SCALE:()=>de,MAX_SCALE:()=>te,MIN_SCALE:()=>X,OutputScale:()=>Ce,PresentationModeState:()=>xe,ProgressBar:()=>gt,RenderingStates:()=>ge,SCROLLBAR_PADDING:()=>Ve,ScrollMode:()=>Z,SidebarView:()=>ze,SpreadMode:()=>_e,TextLayerMode:()=>at,UNKNOWN_SCALE:()=>Pe,VERTICAL_PADDING:()=>Ae,animationStarted:()=>We,apiPageLayoutToViewerModes:()=>V,apiPageModeToSidebarView:()=>j,approximateFraction:()=>W,binarySearchFirstItem:()=>ce,docStyle:()=>Fe,getActiveOrFocusedElement:()=>Nt,getPageSizeInches:()=>Re,getVisibleElements:()=>be,isPortraitOrientation:()=>oe,isValidRotation:()=>dt,isValidScrollMode:()=>Ct,isValidSpreadMode:()=>_t,normalizeWheelEventDelta:()=>bt,normalizeWheelEventDirection:()=>Je,parseQueryString:()=>ct,removeNullCharacters:()=>Tt,roundToDivide:()=>ne,scrollIntoView:()=>De,toggleCheckedBtn:()=>se,toggleExpandedBtn:()=>fe,watchScroll:()=>Ge});const y="auto",C=1,U=1.1,X=.1,te=10,Pe=0,de=1.25,Ve=40,Ae=5,ge={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3},xe={UNKNOWN:0,NORMAL:1,CHANGING:2,FULLSCREEN:3},ze={UNKNOWN:-1,NONE:0,THUMBS:1,OUTLINE:2,ATTACHMENTS:3,LAYERS:4},at={DISABLE:0,ENABLE:1,ENABLE_PERMISSIONS:2},Z={UNKNOWN:-1,VERTICAL:0,HORIZONTAL:1,WRAPPED:2,PAGE:3},_e={UNKNOWN:-1,NONE:0,ODD:1,EVEN:2},Le={SELECT:0,HAND:1,ZOOM:2},tt=/\bprint\s*\(/;class Ce{constructor(){const ee=window.devicePixelRatio||1;this.sx=ee,this.sy=ee}get scaled(){return this.sx!==1||this.sy!==1}}function De(G,ee,Se=!1){let he=G.offsetParent;if(!he){console.error("offsetParent is not set -- cannot scroll");return}let Y=G.offsetTop+G.clientTop,$=G.offsetLeft+G.clientLeft;for(;he.clientHeight===he.scrollHeight&&he.clientWidth===he.scrollWidth||Se&&(he.classList.contains("markedContent")||getComputedStyle(he).overflow==="hidden");)if(Y+=he.offsetTop,$+=he.offsetLeft,he=he.offsetParent,!he)return;ee&&(ee.top!==void 0&&(Y+=ee.top),ee.left!==void 0&&($+=ee.left,he.scrollLeft=$)),he.scrollTop=Y}function Ge(G,ee){const Se=function($){Y||(Y=window.requestAnimationFrame(function(){Y=null;const ye=G.scrollLeft,Ne=he.lastX;ye!==Ne&&(he.right=ye>Ne),he.lastX=ye;const Qe=G.scrollTop,Ot=he.lastY;Qe!==Ot&&(he.down=Qe>Ot),he.lastY=Qe,ee(he)}))},he={right:!0,down:!0,lastX:G.scrollLeft,lastY:G.scrollTop,_eventHandler:Se};let Y=null;return G.addEventListener("scroll",Se,!0),he}function ct(G){const ee=new Map;for(const[Se,he]of new URLSearchParams(G))ee.set(Se.toLowerCase(),he);return ee}const St=/[\x00-\x1F]/g;function Tt(G,ee=!1){return St.test(G)?ee?G.replaceAll(St,Se=>Se==="\0"?"":" "):G.replaceAll("\0",""):G}function ce(G,ee,Se=0){let he=Se,Y=G.length-1;if(Y<0||!ee(G[Y]))return G.length;if(ee(G[he]))return he;for(;he<Y;){const $=he+Y>>1,Q=G[$];ee(Q)?Y=$:he=$+1}return he}function W(G){if(Math.floor(G)===G)return[G,1];const ee=1/G,Se=8;if(ee>Se)return[1,Se];if(Math.floor(ee)===ee)return[1,ee];const he=G>1?ee:G;let Y=0,$=1,Q=1,ye=1;for(;;){const Qe=Y+Q,Ot=$+ye;if(Ot>Se)break;he<=Qe/Ot?(Q=Qe,ye=Ot):(Y=Qe,$=Ot)}let Ne;return he-Y/$<Q/ye-he?Ne=he===G?[Y,$]:[$,Y]:Ne=he===G?[Q,ye]:[ye,Q],Ne}function ne(G,ee){const Se=G%ee;return Se===0?G:Math.round(G-Se+ee)}function Re({view:G,userUnit:ee,rotate:Se}){const[he,Y,$,Q]=G,ye=Se%180!==0,Ne=($-he)/72*ee,Qe=(Q-Y)/72*ee;return{width:ye?Qe:Ne,height:ye?Ne:Qe}}function Ee(G,ee,Se){if(G<2)return G;let he=ee[G].div,Y=he.offsetTop+he.clientTop;Y>=Se&&(he=ee[G-1].div,Y=he.offsetTop+he.clientTop);for(let $=G-2;$>=0&&(he=ee[$].div,!(he.offsetTop+he.clientTop+he.clientHeight<=Y));--$)G=$;return G}function be({scrollEl:G,views:ee,sortByVisibility:Se=!1,horizontal:he=!1,rtl:Y=!1}){const $=G.scrollTop,Q=$+G.clientHeight,ye=G.scrollLeft,Ne=ye+G.clientWidth;function Qe(Ti){const li=Ti.div;return li.offsetTop+li.clientTop+li.clientHeight>$}function Ot(Ti){const li=Ti.div,_i=li.offsetLeft+li.clientLeft,ps=_i+li.clientWidth;return Y?_i<Ne:ps>ye}const Xt=[],is=new Set,Yn=ee.length;let zt=ce(ee,he?Ot:Qe);zt>0&&zt<Yn&&!he&&(zt=Ee(zt,ee,$));let oi=he?Ne:-1;for(let Ti=zt;Ti<Yn;Ti++){const li=ee[Ti],_i=li.div,ps=_i.offsetLeft+_i.clientLeft,Js=_i.offsetTop+_i.clientTop,Fr=_i.clientWidth,Zn=_i.clientHeight,en=ps+Fr,Oi=Js+Zn;if(oi===-1)Oi>=Q&&(oi=Oi);else if((he?ps:Js)>oi)break;if(Oi<=$||Js>=Q||en<=ye||ps>=Ne)continue;const Dr=Math.max(0,$-Js)+Math.max(0,Oi-Q),Br=Math.max(0,ye-ps)+Math.max(0,en-Ne),Be=(Zn-Dr)/Zn,it=(Fr-Br)/Fr,Wt=Be*it*100|0;Xt.push({id:li.id,x:ps,y:Js,view:li,percent:Wt,widthPercent:it*100|0}),is.add(li.id)}const xn=Xt[0],Tn=Xt.at(-1);return Se&&Xt.sort(function(Ti,li){const _i=Ti.percent-li.percent;return Math.abs(_i)>.001?-_i:Ti.id-li.id}),{first:xn,last:Tn,views:Xt,ids:is}}function Je(G){let ee=Math.hypot(G.deltaX,G.deltaY);const Se=Math.atan2(G.deltaY,G.deltaX);return-.25*Math.PI<Se&&Se<.75*Math.PI&&(ee=-ee),ee}function bt(G){const ee=G.deltaMode;let Se=Je(G);const he=30,Y=30;return ee===WheelEvent.DOM_DELTA_PIXEL?Se/=he*Y:ee===WheelEvent.DOM_DELTA_LINE&&(Se/=Y),Se}function dt(G){return Number.isInteger(G)&&G%90===0}function Ct(G){return Number.isInteger(G)&&Object.values(Z).includes(G)&&G!==Z.UNKNOWN}function _t(G){return Number.isInteger(G)&&Object.values(_e).includes(G)&&G!==_e.UNKNOWN}function oe(G){return G.width<=G.height}const We=new Promise(function(G){window.requestAnimationFrame(G)}),Fe=document.documentElement.style;function Ze(G,ee,Se){return Math.min(Math.max(G,ee),Se)}class gt{constructor(ee){b(this,le,null);b(this,J,null);b(this,Oe,0);b(this,Me,null);b(this,me,!0);R(this,le,ee.classList),R(this,Me,ee.style)}get percent(){return a(this,Oe)}set percent(ee){if(R(this,Oe,Ze(ee,0,100)),isNaN(ee)){a(this,le).add("indeterminate");return}a(this,le).remove("indeterminate"),a(this,Me).setProperty("--progressBar-percent",`${a(this,Oe)}%`)}setWidth(ee){if(!ee)return;const he=ee.parentNode.offsetWidth-ee.offsetWidth;he>0&&a(this,Me).setProperty("--progressBar-end-offset",`${he}px`)}setDisableAutoFetch(ee=5e3){isNaN(a(this,Oe))||(a(this,J)&&clearTimeout(a(this,J)),this.show(),R(this,J,setTimeout(()=>{R(this,J,null),this.hide()},ee)))}hide(){a(this,me)&&(R(this,me,!1),a(this,le).add("hidden"))}show(){a(this,me)||(R(this,me,!0),a(this,le).remove("hidden"))}}le=new WeakMap,J=new WeakMap,Oe=new WeakMap,Me=new WeakMap,me=new WeakMap;function Nt(){let G=document,ee=G.activeElement||G.querySelector(":focus");for(;ee!=null&&ee.shadowRoot;)G=ee.shadowRoot,ee=G.activeElement||G.querySelector(":focus");return ee}function V(G){let ee=Z.VERTICAL,Se=_e.NONE;switch(G){case"SinglePage":ee=Z.PAGE;break;case"OneColumn":break;case"TwoPageLeft":ee=Z.PAGE;case"TwoColumnLeft":Se=_e.ODD;break;case"TwoPageRight":ee=Z.PAGE;case"TwoColumnRight":Se=_e.EVEN;break}return{scrollMode:ee,spreadMode:Se}}function j(G){switch(G){case"UseNone":return ze.NONE;case"UseThumbs":return ze.THUMBS;case"UseOutlines":return ze.OUTLINE;case"UseAttachments":return ze.ATTACHMENTS;case"UseOC":return ze.LAYERS}return ze.NONE}function se(G,ee,Se=null){G.classList.toggle("toggled",ee),G.setAttribute("aria-checked",ee),Se==null||Se.classList.toggle("hidden",!ee)}function fe(G,ee,Se=null){G.classList.toggle("toggled",ee),G.setAttribute("aria-expanded",ee),Se==null||Se.classList.toggle("hidden",!ee)}},12:(I,B,k)=>{k.d(B,{XfaLayerBuilder:()=>C});var y=k(972);class C{constructor({pdfPage:X,annotationStorage:te=null,linkService:Pe,xfaHtml:de=null}){this.pdfPage=X,this.annotationStorage=te,this.linkService=Pe,this.xfaHtml=de,this.div=null,this._cancelled=!1}async render(X,te="display"){if(te==="print"){const Ve={viewport:X.clone({dontFlip:!0}),div:this.div,xfaHtml:this.xfaHtml,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:te};return this.div=document.createElement("div"),Ve.div=this.div,y.XfaLayer.render(Ve)}const Pe=await this.pdfPage.getXfa();if(this._cancelled||!Pe)return{textDivs:[]};const de={viewport:X.clone({dontFlip:!0}),div:this.div,xfaHtml:Pe,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:te};return this.div?y.XfaLayer.update(de):(this.div=document.createElement("div"),de.div=this.div,y.XfaLayer.render(de))}cancel(){this._cancelled=!0}hide(){this.div&&(this.div.hidden=!0)}}}},p={};function E(I){var B=p[I];if(B!==void 0)return B.exports;var k=p[I]={exports:{}};return f[I](k,k.exports,E),k.exports}E.d=(I,B)=>{for(var k in B)E.o(B,k)&&!E.o(I,k)&&Object.defineProperty(I,k,{enumerable:!0,get:B[k]})},E.o=(I,B)=>Object.prototype.hasOwnProperty.call(I,B),E.r=I=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(I,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(I,"__esModule",{value:!0})};var P={};return(()=>{var B;E.r(P),E.d(P,{createViewerApp:()=>I.createViewerApp,getViewerConfiguration:()=>I.getViewerConfiguration});var I=E(294);(B=document.blockUnblockOnload)==null||B.call(document,!0)})(),P})())})(c_);var Ip=c_.exports;let wC="./document-viewer/web/compressed.tracemonkey-pldi-09.pdf";const _C={src:wC,resourcePath:"document-viewer",disableCORSCheck:!0,disableAutoSetTitle:!0};function yC(n){return Ip.createViewerApp({parent:n,..._C})}const Zb=n=>(OS("data-v-e7dda392"),n=n(),NS(),n),EC={class:"pdf-viewer"},SC={class:"viewer-header"},AC=Zb(()=>Pi("svg",{viewBox:"0 0 24 24",width:"22",height:"22",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[Pi("path",{d:"M4 6H20V8H4V6ZM4 11H20V13H4V11ZM4 16H20V18H4V16Z",fill:"black"})],-1)),CC=[AC],PC={class:"header-item"},xC=Zb(()=>Pi("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 12 12",width:"22",height:"22"},[Pi("path",{d:"M7.5,2l-4,4,4,4,1-1-3-3,3-3Z"})],-1)),TC=[xC],LC=["value"],RC=Zb(()=>Pi("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 12 12",width:"22",height:"22"},[Pi("path",{d:"M4.5,10l4-4-4-4-1,1,3,3-3,3Z"})],-1)),MC=[RC],IC={__name:"CustomToolbar",setup(n){const c=yu(null),f=jb(null),p=yu(1);Hp(function(){f.value=yC(c.value),f.value.initializedPromise.then(function(){f.value.eventBus.on("pagechanging",function(k){p.value=k.pageNumber})})});function E(){f.value.pdfSidebar.toggle()}function P(){f.value.eventBus.dispatch("previouspage")}function I(){f.value.eventBus.dispatch("nextpage")}function B(k){const y=parseInt(k.target.value,10);f.value.pdfViewer.currentPageNumber=y}return(k,y)=>(Wp(),$p("div",EC,[Pi("div",SC,[Pi("div",{class:"header-item"},[Pi("button",{onClick:E,class:"menu-outline header-icon"},CC)]),Pi("div",PC,[Pi("button",{onClick:P,class:"prev-page header-icon"},TC),Pi("input",{class:"page-input",type:"text",value:p.value,onChange:B},null,40,LC),Pi("button",{onClick:I,class:"next-page header-icon"},MC)])]),Pi("div",{ref_key:"el$",ref:c,class:"viewer-content"},null,512)]))}},kC=Yb(IC,[["__scopeId","data-v-e7dda392"]]);let OC="./lc_pdf_overview_format.pdf",NC="./recognizing_malformed_pdf_f.pdf";const FC={src:OC,resourcePath:"document-viewer",disableCORSCheck:!0,disableAutoSetTitle:!0,appOptions:{}},DC={src:NC,resourcePath:"document-viewer",disableCORSCheck:!0,disableAutoSetTitle:!0};function BC(){Ip.createViewerApp({parent:document.getElementById("app1"),...FC}),Ip.createViewerApp({parent:document.getElementById("app2"),...DC})}const VC={class:"main"},jC=Pi("div",{id:"app1"},null,-1),HC=Pi("div",{id:"app2"},null,-1),UC=[jC,HC],zC={__name:"MultipleFiles",setup(n){return Hp(function(){BC()}),(c,f)=>(Wp(),$p("div",VC,UC))}};let WC="./document-viewer/web/compressed.tracemonkey-pldi-09.pdf";const $C={src:WC,resourcePath:"document-viewer",disableCORSCheck:!0,disableAutoSetTitle:!0,appOptions:{enableHighlightEditor:!0}};function qC(n){return Ip.createViewerApp({parent:n,...$C})}const GC={__name:"HomeView",setup(n){const c=yu(null),f=jb(null),p=yu(1);return Hp(function(){f.value=qC(c.value),f.value.initializedPromise.then(function(){f.value.eventBus.on("pagechanging",function(E){p.value=E.pageNumber})})}),(E,P)=>(Wp(),$p("div",{ref_key:"el$",ref:c,class:"pdf-viewer"},null,512))}},KC=Yb(GC,[["__scopeId","data-v-6dfde45f"]]),XC=uC({history:UA("/document-viewer/demos/"),routes:[{path:"/",name:"home",component:KC},{path:"/custom-toolbar",name:"customToolbar",component:kC},{path:"/multiple-pdf-files",name:"multiplePDFFiles",component:zC}]}),pE=lA(mC);pE.use(XC);pE.mount("#app");
