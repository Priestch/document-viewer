<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>The Knowledge I Learned from PDF.js | Free PDF Viewer build on PDF.js</title>
    <meta name="description" content="The out-of-the-box PDF reader & viewer built using vanilla Javascript based on PDF.js. It's framework agnostic and easy to integrate!">
    <meta name="generator" content="VitePress v1.0.0-rc.45">
    <link rel="preload stylesheet" href="/document-viewer/docs/assets/style.DF0fzn-O.css" as="style">
    
    <script type="module" src="/document-viewer/docs/assets/app.CNNeeHSZ.js"></script>
    <link rel="preload" href="/document-viewer/docs/assets/inter-roman-latin.Bu8hRsVA.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/document-viewer/docs/assets/chunks/framework.hrgFA2vO.js">
    <link rel="modulepreload" href="/document-viewer/docs/assets/chunks/theme.BLVUUVdk.js">
    <link rel="modulepreload" href="/document-viewer/docs/assets/learned-knowledge_index.md.DWVP8Q_P.lean.js">
    <script>(function(t,n,r,e,m){t[e]=t[e]||[],t[e].push({"gtm.start":new Date().getTime(),event:"gtm.js"});var g=n.getElementsByTagName(r)[0],a=n.createElement(r),s=e!="dataLayer"?"&l="+e:"";a.async=!0,a.src="https://www.googletagmanager.com/gtm.js?id="+m+s,g.parentNode.insertBefore(a,g)})(window,document,"script","dataLayer","GTM-N4MC8X9M");</script>
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
    <link rel="canonical" href="https://priestch.github.io/document-viewer/docs/learned-knowledge/">
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-f8c4997a><!--[--><!--]--><!--[--><span tabindex="-1" data-v-3d05ce97></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-3d05ce97> Skip to content </a><!--]--><!----><header class="VPNav" data-v-f8c4997a data-v-9e555376><div class="VPNavBar" data-v-9e555376 data-v-8d2f8b24><div class="wrapper" data-v-8d2f8b24><div class="container" data-v-8d2f8b24><div class="title" data-v-8d2f8b24><div class="VPNavBarTitle" data-v-8d2f8b24 data-v-897170ea><a class="title" href="/document-viewer/docs/" data-v-897170ea><!--[--><!--]--><!----><span data-v-897170ea>Free PDF Viewer build on PDF.js</span><!--[--><!--]--></a></div></div><div class="content" data-v-8d2f8b24><div class="content-body" data-v-8d2f8b24><!--[--><!--]--><div class="VPNavBarSearch search" data-v-8d2f8b24><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-8d2f8b24 data-v-1b5abf06><span id="main-nav-aria-label" class="visually-hidden" data-v-1b5abf06>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/document-viewer/docs/" tabindex="0" data-v-1b5abf06 data-v-dc915170><!--[--><span data-v-dc915170>Home</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/document-viewer/docs/api.html" tabindex="0" data-v-1b5abf06 data-v-dc915170><!--[--><span data-v-dc915170>API</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/document-viewer/docs/resources.html" tabindex="0" data-v-1b5abf06 data-v-dc915170><!--[--><span data-v-dc915170>Resources</span><!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup active" data-v-1b5abf06 data-v-979da8bb><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-979da8bb><span class="text" data-v-979da8bb><!----><span data-v-979da8bb>Learn PDF.js</span><span class="vpi-chevron-down text-icon" data-v-979da8bb></span></span></button><div class="menu" data-v-979da8bb><div class="VPMenu" data-v-979da8bb data-v-8a0a63a0><div class="items" data-v-8a0a63a0><!--[--><!--[--><div class="VPMenuLink" data-v-8a0a63a0 data-v-11b17785><a class="VPLink link active" href="/document-viewer/docs/learned-knowledge/" data-v-11b17785><!--[-->Learned Knowledge<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-8a0a63a0 data-v-11b17785><a class="VPLink link" href="/document-viewer/docs/architecture.html" data-v-11b17785><!--[-->Architecture<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-8a0a63a0 data-v-11b17785><a class="VPLink link" href="/document-viewer/docs/pitfalls.html" data-v-11b17785><!--[-->Common Pitfalls<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-8a0a63a0 data-v-11b17785><a class="VPLink link" href="/document-viewer/docs/communication.html" data-v-11b17785><!--[-->Threads Communication<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-1b5abf06 data-v-979da8bb><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-979da8bb><span class="text" data-v-979da8bb><!----><span data-v-979da8bb>Links</span><span class="vpi-chevron-down text-icon" data-v-979da8bb></span></span></button><div class="menu" data-v-979da8bb><div class="VPMenu" data-v-979da8bb data-v-8a0a63a0><div class="items" data-v-8a0a63a0><!--[--><!--[--><div class="VPMenuLink" data-v-8a0a63a0 data-v-11b17785><a class="VPLink link vp-external-link-icon" href="https://www.npmjs.com/package/@document-kits/viewer" target="_blank" rel="noreferrer" data-v-11b17785><!--[-->Npm Package<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-8a0a63a0 data-v-11b17785><a class="VPLink link vp-external-link-icon" href="https://github.com/Priestch/document-viewer/tags" target="_blank" rel="noreferrer" data-v-11b17785><!--[-->Releases<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><a class="VPLink link vp-external-link-icon VPNavBarMenuLink" href="https://priestch.github.io/document-viewer/demos/" target="_blank" rel="noreferrer" tabindex="0" data-v-1b5abf06 data-v-dc915170><!--[--><span data-v-dc915170>Demos</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-8d2f8b24 data-v-4f07862e><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-4f07862e data-v-bba37ed4 data-v-9abc5eae><span class="check" data-v-9abc5eae><span class="icon" data-v-9abc5eae><!--[--><span class="vpi-sun sun" data-v-bba37ed4></span><span class="vpi-moon moon" data-v-bba37ed4></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-8d2f8b24 data-v-8c82b47d data-v-73c816d8><!--[--><a class="VPSocialLink no-icon" href="https://github.com/Priestch/document-viewer" aria-label="github" target="_blank" rel="noopener" data-v-73c816d8 data-v-f37c6c33><span class="vpi-social-github" /></a><a class="VPSocialLink no-icon" href="https://discord.gg/hYXtcr37tz" aria-label="discord" target="_blank" rel="noopener" data-v-73c816d8 data-v-f37c6c33><span class="vpi-social-discord" /></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-8d2f8b24 data-v-4ee9c6b6 data-v-979da8bb><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-979da8bb><span class="vpi-more-horizontal icon" data-v-979da8bb></span></button><div class="menu" data-v-979da8bb><div class="VPMenu" data-v-979da8bb data-v-8a0a63a0><!----><!--[--><!--[--><!----><div class="group" data-v-4ee9c6b6><div class="item appearance" data-v-4ee9c6b6><p class="label" data-v-4ee9c6b6>Appearance</p><div class="appearance-action" data-v-4ee9c6b6><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-4ee9c6b6 data-v-bba37ed4 data-v-9abc5eae><span class="check" data-v-9abc5eae><span class="icon" data-v-9abc5eae><!--[--><span class="vpi-sun sun" data-v-bba37ed4></span><span class="vpi-moon moon" data-v-bba37ed4></span><!--]--></span></span></button></div></div></div><div class="group" data-v-4ee9c6b6><div class="item social-links" data-v-4ee9c6b6><div class="VPSocialLinks social-links-list" data-v-4ee9c6b6 data-v-73c816d8><!--[--><a class="VPSocialLink no-icon" href="https://github.com/Priestch/document-viewer" aria-label="github" target="_blank" rel="noopener" data-v-73c816d8 data-v-f37c6c33><span class="vpi-social-github" /></a><a class="VPSocialLink no-icon" href="https://discord.gg/hYXtcr37tz" aria-label="discord" target="_blank" rel="noopener" data-v-73c816d8 data-v-f37c6c33><span class="vpi-social-discord" /></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-8d2f8b24 data-v-ef709a30><span class="container" data-v-ef709a30><span class="top" data-v-ef709a30></span><span class="middle" data-v-ef709a30></span><span class="bottom" data-v-ef709a30></span></span></button></div></div></div></div><div class="divider" data-v-8d2f8b24><div class="divider-line" data-v-8d2f8b24></div></div></div><!----></header><div class="VPLocalNav empty fixed" data-v-f8c4997a data-v-5798fa78><div class="container" data-v-5798fa78><!----><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-5798fa78 data-v-dfe3d432><button data-v-dfe3d432>Return to top</button><!----></div></div></div><!----><div class="VPContent" id="VPContent" data-v-f8c4997a data-v-38bad42c><div class="VPDoc has-aside" data-v-38bad42c data-v-73a3cf53><!--[--><!--]--><div class="container" data-v-73a3cf53><div class="aside" data-v-73a3cf53><div class="aside-curtain" data-v-73a3cf53></div><div class="aside-container" data-v-73a3cf53><div class="aside-content" data-v-73a3cf53><div class="VPDocAside" data-v-73a3cf53 data-v-760fd414><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" role="navigation" data-v-760fd414 data-v-f0a3c685><div class="content" data-v-f0a3c685><div class="outline-marker" data-v-f0a3c685></div><div class="outline-title" role="heading" aria-level="2" data-v-f0a3c685>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-f0a3c685><span class="visually-hidden" id="doc-outline-aria-label" data-v-f0a3c685> Table of Contents for current page </span><ul class="VPDocOutlineItem root" data-v-f0a3c685 data-v-2da98c74><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-760fd414></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-73a3cf53><div class="content-container" data-v-73a3cf53><!--[--><!--]--><main class="main" data-v-73a3cf53><div style="position:relative;" class="vp-doc _document-viewer_docs_learned-knowledge_" data-v-73a3cf53><div><h1 id="acknowledge" tabindex="-1">Acknowledge <a class="header-anchor" href="#acknowledge" aria-label="Permalink to &quot;Acknowledge&quot;">​</a></h1><blockquote><p>There are critical comments about the PDF.js project, they say it should be easier to integrate the default viewer. I understand them somehow as a developer who want to show a PDF quickly, but knowing the primary goal of an OSS project can help us to understand the trade-off decisions made by the maintainers.</p><p>All these are what I learned from the PDF.js project. It may not be accurate, but I hope it can help you to understand the PDF.js better.</p></blockquote><h1 id="table-of-contents" tabindex="-1">Table of Contents <a class="header-anchor" href="#table-of-contents" aria-label="Permalink to &quot;Table of Contents&quot;">​</a></h1><nav class="table-of-contents"><ul><li><a href="#background">Background</a></li><li><a href="#introduction">Introduction</a></li><li><a href="#pdfviewerapplication">PDFViewerApplication</a></li><li><a href="#appoptions">AppOptions</a><ul><li><a href="#option-kinds">Option Kinds</a></li><li><a href="#important-options">Important options</a></li></ul></li><li><a href="#important-events">Important Events</a></li><li><a href="#gulp-tasks">Gulp Tasks</a></li></ul></nav><h2 id="background" tabindex="-1">Background <a class="header-anchor" href="#background" aria-label="Permalink to &quot;Background&quot;">​</a></h2><p><a href="https://github.com/mozilla/pdf.js" target="_blank" rel="noreferrer">PDF.js</a> is an OSS project supported by Mozilla and developed using HTML5, It&#39;s goal is to create a general-purpose, web standards-based platform for rendering PDFs in the <strong>Firefox browser</strong>. Many people find out that it&#39;s hard to integrate it into project, it&#39;s <a href="#issues-talked-about-why-it-s-hard-to-integrate">somehow intentionally</a>.</p><p>It&#39;s not developed as a component or library you can easily integrate like most npm packages, because it&#39;s primary goal is to be used easily in <strong>Firefox browser</strong>, the goal doesn&#39;t match most developers expectations. It&#39;s the trade-off decision made by the maintainers, we should understand it.</p><h4 id="issues-talked-about-why-it-s-not-easy-to-integrate" tabindex="-1">Issues talked about why it&#39;s not easy to integrate <a class="header-anchor" href="#issues-talked-about-why-it-s-not-easy-to-integrate" aria-label="Permalink to &quot;Issues talked about why it&#39;s not easy to integrate&quot;">​</a></h4><ul><li><a href="https://github.com/mozilla/pdf.js/issues/5609#issuecomment-68530552" target="_blank" rel="noreferrer">Issue 5609</a></li><li><a href="https://github.com/mozilla/pdf.js/issues/9210#issuecomment-347834276" target="_blank" rel="noreferrer">Issue 9210</a></li><li><a href="https://github.com/mozilla/pdf.js/issues/7203#issuecomment-210510569" target="_blank" rel="noreferrer">Issue 7203</a></li></ul><h2 id="introduction" tabindex="-1">Introduction <a class="header-anchor" href="#introduction" aria-label="Permalink to &quot;Introduction&quot;">​</a></h2><p>PDF.js use <a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API" target="_blank" rel="noreferrer">web worker</a> for better rendering performance.</p><p>A typical web application only has one bundle result, but PDF.js has at least 4 bundles, they are main, worker, sandbox and web bundles.</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// From https://github.com/mozilla/pdf.js/blob/master/gulpfile.mjs#L1001</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> buildGeneric</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">defines</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">dir</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  rimraf.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(dir);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> merge</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">([</span></span>
<span class="line highlighted"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    createMainBundle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(defines).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pipe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(gulp.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dest</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(dir </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;build&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)),</span></span>
<span class="line highlighted"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    createWorkerBundle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(defines).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pipe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(gulp.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dest</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(dir </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;build&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)),</span></span>
<span class="line highlighted"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    createSandboxBundle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(defines).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pipe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(gulp.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dest</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(dir </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;build&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)),</span></span>
<span class="line highlighted"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    createWebBundle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(defines, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      defaultPreferencesDir: defines.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SKIP_BABEL</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        ?</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;generic/&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        :</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;generic-legacy/&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pipe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(gulp.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dest</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(dir </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;web&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)),</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ]);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>The default viewer uses the web bundle directly, it depends on the main and worker bundles. <strong>Keep in mind you must load the main bundle before using the default viewer</strong>. Each time a PDF document is opened using the <a href="https://github.com/mozilla/pdf.js/blob/a6e0b0292e8d8952576f55073ba3b8df69a2932a/web/app.js#L935" target="_blank" rel="noreferrer">open</a> method, it will create a new worker to render the PDF document.</p><p>The main bundle is built from <a href="https://github.com/mozilla/pdf.js/blob/master/src/pdf.js" target="_blank" rel="noreferrer"><code>src/pdf.js</code></a>, it&#39;s the entry of the main bundle. The worker bundle is built from <a href="https://github.com/mozilla/pdf.js/blob/master/src/pdf.worker.js" target="_blank" rel="noreferrer"><code>src/pdf.worker.js</code></a>, it&#39;s the entry of the worker bundle.</p><p>The <a href="https://github.com/mozilla/pdf.js/tree/master/web" target="_blank" rel="noreferrer"><code>src/web</code></a> directory contains the source code of the default viewer, all modules depend on the main bundle have to import from the <code>pdfjs-lib</code> package, it will be resolved to <code>web/pdfjs.js</code> using the <a href="https://webpack.js.org/configuration/resolve/#resolvealias" target="_blank" rel="noreferrer"><code>resolve.alias</code></a> option of webpack when building.</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// web/pdfjs.js</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// https://github.com/mozilla/pdf.js/blob/master/web/pdfjs.js</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ((</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">typeof</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> PDFJSDev </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;undefined&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> PDFJSDev.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">test</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;GENERIC&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;&amp;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> !</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">globalThis.pdfjsLib) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> globalThis.pdfjsLibPromise;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  AbortException</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> globalThis.pdfjsLib;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  AbortException,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre></div><p>As we can see from the code above, the web bundle must load the main bundle first. You can import from the result of <code>globalThis.pdfjsLibPromise</code> only when the main bundle promise is resolved.</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// An example module in web/alt_text_manager.js depends main bundle.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// From https://github.com/mozilla/pdf.js/blob/master/web/alt_text_manager.js</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { DOMSVGFactory, shadow } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;pdfjs-lib&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AltTextManager</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="pdfviewerapplication" tabindex="-1">PDFViewerApplication <a class="header-anchor" href="#pdfviewerapplication" aria-label="Permalink to &quot;PDFViewerApplication&quot;">​</a></h2><p>The global <a href="https://github.com/mozilla/pdf.js/blob/a6e0b0292e8d8952576f55073ba3b8df69a2932a/web/app.js#L91" target="_blank" rel="noreferrer"><code>PDFViewerApplication</code></a> object is the entry of the default viewer of PDF.js, it glues all the modules together, and provides the API for the default viewer.</p><h2 id="appoptions" tabindex="-1">AppOptions <a class="header-anchor" href="#appoptions" aria-label="Permalink to &quot;AppOptions&quot;">​</a></h2><p>There are dozens of options in PDF.js, and they all belong to four kinds for now. You may wonder why there are so many options, and what they mean at the first time. This document will help you to understand them.</p><p>Let&#39;s crack on them one by one!</p><h3 id="option-kinds" tabindex="-1"><a href="https://github.com/mozilla/pdf.js/blob/34506f8874ce86ea21b9db54d0552947208bf4bb/web/app_options.js#L43" target="_blank" rel="noreferrer">Option Kinds</a> <a class="header-anchor" href="#option-kinds" aria-label="Permalink to &quot;[Option Kinds](https://github.com/mozilla/pdf.js/blob/34506f8874ce86ea21b9db54d0552947208bf4bb/web/app_options.js#L43)&quot;">​</a></h3><ul><li>VIEWER</li><li>API</li><li>WORKER</li><li>PREFERENCE</li></ul><h3 id="important-options" tabindex="-1">Important options <a class="header-anchor" href="#important-options" aria-label="Permalink to &quot;Important options&quot;">​</a></h3><ul><li><code>defaultUrl</code></li><li><code>locale</code></li><li><code>workerSrc</code></li><li><code>sandboxBundleSrc</code></li></ul><h4 id="defaulturl" tabindex="-1">defaultUrl <a class="header-anchor" href="#defaulturl" aria-label="Permalink to &quot;defaultUrl&quot;">​</a></h4><ul><li>Type <code>URL | string | Uint8Array</code></li></ul><p>The url of the PDF file. If you got <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS" target="_blank" rel="noreferrer">CORS</a> issue when loading a PDF file from a different origin, see details at <a href="/document-viewer/docs/pitfalls.html#origin-not-match">origin match error</a> section in common pitfalls page .</p><h4 id="locale" tabindex="-1">locale <a class="header-anchor" href="#locale" aria-label="Permalink to &quot;locale&quot;">​</a></h4><ul><li>Type <code>string</code></li><li>Default <code>en-US</code></li></ul><p>The locale of the viewer, it easy to switch a different locale by setting this option. See all supported locales in folder <a href="https://github.com/mozilla/pdf.js/tree/master/l10n" target="_blank" rel="noreferrer">l10n</a>.</p><h2 id="important-events" tabindex="-1">Important Events <a class="header-anchor" href="#important-events" aria-label="Permalink to &quot;Important Events&quot;">​</a></h2><h4 id="documentinit" tabindex="-1"><code>documentinit</code> <a class="header-anchor" href="#documentinit" aria-label="Permalink to &quot;`documentinit`&quot;">​</a></h4><p>Emitted after called the <code>setInitialView</code> method to show the initial view successfully. After the event is emitted, the viewer will be ready to use.</p><h4 id="documenterror" tabindex="-1"><code>documenterror</code> <a class="header-anchor" href="#documenterror" aria-label="Permalink to &quot;`documenterror`&quot;">​</a></h4><p>Emitted after error occurred when rendering document.</p><h4 id="pagerendered" tabindex="-1"><code>pagerendered</code> <a class="header-anchor" href="#pagerendered" aria-label="Permalink to &quot;`pagerendered`&quot;">​</a></h4><p>Emitted after each page is rendered successfully.</p><h2 id="gulp-tasks" tabindex="-1">Gulp Tasks <a class="header-anchor" href="#gulp-tasks" aria-label="Permalink to &quot;Gulp Tasks&quot;">​</a></h2></div></div></main><footer class="VPDocFooter" data-v-73a3cf53 data-v-6501975d><!--[--><!--]--><div class="edit-info" data-v-6501975d><!----><div class="last-updated" data-v-6501975d><p class="VPLastUpdated" data-v-6501975d data-v-7e190c8c>Last updated: <time datetime="2024-03-21T13:07:00.000Z" data-v-7e190c8c></time></p></div></div><!----></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"learned-knowledge_parts_application.md\":\"CkMbPVZG\",\"learned-knowledge_parts_events.md\":\"DZEIx5cp\",\"pitfalls.md\":\"Cdtbf1ZF\",\"resources.md\":\"Qkp08Gz9\",\"api.md\":\"90r9feAt\",\"architecture.md\":\"CXHRLWgZ\",\"learned-knowledge_parts_app-options.md\":\"BWeLXEfr\",\"communication.md\":\"CmPbSJ7s\",\"index.md\":\"CnfDnRac\",\"get-started.md\":\"DUmU7t9-\",\"learned-knowledge_index.md\":\"DWVP8Q_P\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"Free PDF Viewer build on PDF.js\",\"description\":\"The out-of-the-box PDF reader & viewer built using vanilla Javascript based on PDF.js. It's framework agnostic and easy to integrate!\",\"base\":\"/document-viewer/docs/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"search\":{\"provider\":\"local\"},\"nav\":[{\"text\":\"Home\",\"link\":\"/\"},{\"text\":\"API\",\"link\":\"/api\"},{\"text\":\"Resources\",\"link\":\"/resources\"},{\"text\":\"Learn PDF.js\",\"items\":[{\"text\":\"Learned Knowledge\",\"link\":\"/learned-knowledge/\"},{\"text\":\"Architecture\",\"link\":\"/architecture\"},{\"text\":\"Common Pitfalls\",\"link\":\"/pitfalls\"},{\"text\":\"Threads Communication\",\"link\":\"/communication\"}]},{\"text\":\"Links\",\"items\":[{\"text\":\"Npm Package\",\"link\":\"https://www.npmjs.com/package/@document-kits/viewer\"},{\"text\":\"Releases\",\"link\":\"https://github.com/Priestch/document-viewer/tags\"}]},{\"text\":\"Demos\",\"link\":\"https://priestch.github.io/document-viewer/demos/\"}],\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/Priestch/document-viewer\"},{\"icon\":\"discord\",\"link\":\"https://discord.gg/hYXtcr37tz\"}]},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>