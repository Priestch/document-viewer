var ur=Object.defineProperty;var fr=(e,t,l)=>t in e?ur(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l;var Je=(e,t,l)=>(fr(e,typeof t!="symbol"?t+"":t,l),l),ai=(e,t,l)=>{if(!t.has(e))throw TypeError("Cannot "+l)};var i=(e,t,l)=>(ai(e,t,"read from private field"),l?l.call(e):t.get(e)),H=(e,t,l)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,l)},he=(e,t,l,n)=>(ai(e,t,"write to private field"),n?n.call(e,l):t.set(e,l),l);var ft=(e,t,l,n)=>({set _(f){he(e,t,f,l)},get _(){return i(e,t,n)}}),W=(e,t,l)=>(ai(e,t,"access private method"),l);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const f of document.querySelectorAll('link[rel="modulepreload"]'))n(f);new MutationObserver(f=>{for(const I of f)if(I.type==="childList")for(const k of I.addedNodes)k.tagName==="LINK"&&k.rel==="modulepreload"&&n(k)}).observe(document,{childList:!0,subtree:!0});function l(f){const I={};return f.integrity&&(I.integrity=f.integrity),f.referrerPolicy&&(I.referrerPolicy=f.referrerPolicy),f.crossOrigin==="use-credentials"?I.credentials="include":f.crossOrigin==="anonymous"?I.credentials="omit":I.credentials="same-origin",I}function n(f){if(f.ep)return;f.ep=!0;const I=l(f);fetch(f.href,I)}})();const main="";function makeMap(e,t){const l=Object.create(null),n=e.split(",");for(let f=0;f<n.length;f++)l[n[f]]=!0;return t?f=>!!l[f.toLowerCase()]:f=>!!l[f]}const EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,onRE=/^on[^a-z]/,isOn=e=>onRE.test(e),isModelListener=e=>e.startsWith("onUpdate:"),extend=Object.assign,remove=(e,t)=>{const l=e.indexOf(t);l>-1&&e.splice(l,1)},hasOwnProperty$1=Object.prototype.hasOwnProperty,hasOwn=(e,t)=>hasOwnProperty$1.call(e,t),isArray$1=Array.isArray,isMap=e=>toTypeString(e)==="[object Map]",isSet=e=>toTypeString(e)==="[object Set]",isFunction=e=>typeof e=="function",isString=e=>typeof e=="string",isSymbol=e=>typeof e=="symbol",isObject=e=>e!==null&&typeof e=="object",isPromise=e=>isObject(e)&&isFunction(e.then)&&isFunction(e.catch),objectToString=Object.prototype.toString,toTypeString=e=>objectToString.call(e),toRawType=e=>toTypeString(e).slice(8,-1),isPlainObject=e=>toTypeString(e)==="[object Object]",isIntegerKey=e=>isString(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=e=>{const t=Object.create(null);return l=>t[l]||(t[l]=e(l))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction(e=>e.replace(camelizeRE,(t,l)=>l?l.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(e=>e.replace(hyphenateRE,"-$1").toLowerCase()),capitalize=cacheStringFunction(e=>e.charAt(0).toUpperCase()+e.slice(1)),toHandlerKey=cacheStringFunction(e=>e?`on${capitalize(e)}`:""),hasChanged=(e,t)=>!Object.is(e,t),invokeArrayFns=(e,t)=>{for(let l=0;l<e.length;l++)e[l](t)},def=(e,t,l)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:l})},looseToNumber=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function normalizeStyle(e){if(isArray$1(e)){const t={};for(let l=0;l<e.length;l++){const n=e[l],f=isString(n)?parseStringStyle(n):normalizeStyle(n);if(f)for(const I in f)t[I]=f[I]}return t}else{if(isString(e))return e;if(isObject(e))return e}}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*[^]*?\*\//g;function parseStringStyle(e){const t={};return e.replace(styleCommentRE,"").split(listDelimiterRE).forEach(l=>{if(l){const n=l.split(propertyDelimiterRE);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function normalizeClass(e){let t="";if(isString(e))t=e;else if(isArray$1(e))for(let l=0;l<e.length;l++){const n=normalizeClass(e[l]);n&&(t+=n+" ")}else if(isObject(e))for(const l in e)e[l]&&(t+=l+" ");return t.trim()}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(e){return!!e||e===""}let activeEffectScope;class EffectScope{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=activeEffectScope,!t&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const l=activeEffectScope;try{return activeEffectScope=this,t()}finally{activeEffectScope=l}}}on(){activeEffectScope=this}off(){activeEffectScope=this.parent}stop(t){if(this._active){let l,n;for(l=0,n=this.effects.length;l<n;l++)this.effects[l].stop();for(l=0,n=this.cleanups.length;l<n;l++)this.cleanups[l]();if(this.scopes)for(l=0,n=this.scopes.length;l<n;l++)this.scopes[l].stop(!0);if(!this.detached&&this.parent&&!t){const f=this.parent.scopes.pop();f&&f!==this&&(this.parent.scopes[this.index]=f,f.index=this.index)}this.parent=void 0,this._active=!1}}}function recordEffectScope(e,t=activeEffectScope){t&&t.active&&t.effects.push(e)}function getCurrentScope(){return activeEffectScope}const createDep=e=>{const t=new Set(e);return t.w=0,t.n=0,t},wasTracked=e=>(e.w&trackOpBit)>0,newTracked=e=>(e.n&trackOpBit)>0,initDepMarkers=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=trackOpBit},finalizeDepMarkers=e=>{const{deps:t}=e;if(t.length){let l=0;for(let n=0;n<t.length;n++){const f=t[n];wasTracked(f)&&!newTracked(f)?f.delete(e):t[l++]=f,f.w&=~trackOpBit,f.n&=~trackOpBit}t.length=l}},targetMap=new WeakMap;let effectTrackDepth=0,trackOpBit=1;const maxMarkerBits=30;let activeEffect;const ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol("");class ReactiveEffect{constructor(t,l=null,n){this.fn=t,this.scheduler=l,this.active=!0,this.deps=[],this.parent=void 0,recordEffectScope(this,n)}run(){if(!this.active)return this.fn();let t=activeEffect,l=shouldTrack;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=activeEffect,activeEffect=this,shouldTrack=!0,trackOpBit=1<<++effectTrackDepth,effectTrackDepth<=maxMarkerBits?initDepMarkers(this):cleanupEffect(this),this.fn()}finally{effectTrackDepth<=maxMarkerBits&&finalizeDepMarkers(this),trackOpBit=1<<--effectTrackDepth,activeEffect=this.parent,shouldTrack=l,this.parent=void 0,this.deferStop&&this.stop()}}stop(){activeEffect===this?this.deferStop=!0:this.active&&(cleanupEffect(this),this.onStop&&this.onStop(),this.active=!1)}}function cleanupEffect(e){const{deps:t}=e;if(t.length){for(let l=0;l<t.length;l++)t[l].delete(e);t.length=0}}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const e=trackStack.pop();shouldTrack=e===void 0?!0:e}function track(e,t,l){if(shouldTrack&&activeEffect){let n=targetMap.get(e);n||targetMap.set(e,n=new Map);let f=n.get(l);f||n.set(l,f=createDep()),trackEffects(f)}}function trackEffects(e,t){let l=!1;effectTrackDepth<=maxMarkerBits?newTracked(e)||(e.n|=trackOpBit,l=!wasTracked(e)):l=!e.has(activeEffect),l&&(e.add(activeEffect),activeEffect.deps.push(e))}function trigger(e,t,l,n,f,I){const k=targetMap.get(e);if(!k)return;let _=[];if(t==="clear")_=[...k.values()];else if(l==="length"&&isArray$1(e)){const m=Number(n);k.forEach((r,a)=>{(a==="length"||a>=m)&&_.push(r)})}else switch(l!==void 0&&_.push(k.get(l)),t){case"add":isArray$1(e)?isIntegerKey(l)&&_.push(k.get("length")):(_.push(k.get(ITERATE_KEY)),isMap(e)&&_.push(k.get(MAP_KEY_ITERATE_KEY)));break;case"delete":isArray$1(e)||(_.push(k.get(ITERATE_KEY)),isMap(e)&&_.push(k.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap(e)&&_.push(k.get(ITERATE_KEY));break}if(_.length===1)_[0]&&triggerEffects(_[0]);else{const m=[];for(const r of _)r&&m.push(...r);triggerEffects(createDep(m))}}function triggerEffects(e,t){const l=isArray$1(e)?e:[...e];for(const n of l)n.computed&&triggerEffect(n);for(const n of l)n.computed||triggerEffect(n)}function triggerEffect(e,t){(e!==activeEffect||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(isSymbol)),get$1=createGetter(),shallowGet=createGetter(!1,!0),readonlyGet=createGetter(!0),arrayInstrumentations=createArrayInstrumentations();function createArrayInstrumentations(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...l){const n=toRaw(this);for(let I=0,k=this.length;I<k;I++)track(n,"get",I+"");const f=n[t](...l);return f===-1||f===!1?n[t](...l.map(toRaw)):f}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...l){pauseTracking();const n=toRaw(this)[t].apply(this,l);return resetTracking(),n}}),e}function hasOwnProperty(e){const t=toRaw(this);return track(t,"has",e),t.hasOwnProperty(e)}function createGetter(e=!1,t=!1){return function(n,f,I){if(f==="__v_isReactive")return!e;if(f==="__v_isReadonly")return e;if(f==="__v_isShallow")return t;if(f==="__v_raw"&&I===(e?t?shallowReadonlyMap:readonlyMap:t?shallowReactiveMap:reactiveMap).get(n))return n;const k=isArray$1(n);if(!e){if(k&&hasOwn(arrayInstrumentations,f))return Reflect.get(arrayInstrumentations,f,I);if(f==="hasOwnProperty")return hasOwnProperty}const _=Reflect.get(n,f,I);return(isSymbol(f)?builtInSymbols.has(f):isNonTrackableKeys(f))||(e||track(n,"get",f),t)?_:isRef(_)?k&&isIntegerKey(f)?_:_.value:isObject(_)?e?readonly(_):reactive(_):_}}const set$1=createSetter(),shallowSet=createSetter(!0);function createSetter(e=!1){return function(l,n,f,I){let k=l[n];if(isReadonly(k)&&isRef(k)&&!isRef(f))return!1;if(!e&&(!isShallow(f)&&!isReadonly(f)&&(k=toRaw(k),f=toRaw(f)),!isArray$1(l)&&isRef(k)&&!isRef(f)))return k.value=f,!0;const _=isArray$1(l)&&isIntegerKey(n)?Number(n)<l.length:hasOwn(l,n),m=Reflect.set(l,n,f,I);return l===toRaw(I)&&(_?hasChanged(f,k)&&trigger(l,"set",n,f):trigger(l,"add",n,f)),m}}function deleteProperty(e,t){const l=hasOwn(e,t);e[t];const n=Reflect.deleteProperty(e,t);return n&&l&&trigger(e,"delete",t,void 0),n}function has$1(e,t){const l=Reflect.has(e,t);return(!isSymbol(t)||!builtInSymbols.has(t))&&track(e,"has",t),l}function ownKeys(e){return track(e,"iterate",isArray$1(e)?"length":ITERATE_KEY),Reflect.ownKeys(e)}const mutableHandlers={get:get$1,set:set$1,deleteProperty,has:has$1,ownKeys},readonlyHandlers={get:readonlyGet,set(e,t){return!0},deleteProperty(e,t){return!0}},shallowReactiveHandlers=extend({},mutableHandlers,{get:shallowGet,set:shallowSet}),toShallow=e=>e,getProto=e=>Reflect.getPrototypeOf(e);function get(e,t,l=!1,n=!1){e=e.__v_raw;const f=toRaw(e),I=toRaw(t);l||(t!==I&&track(f,"get",t),track(f,"get",I));const{has:k}=getProto(f),_=n?toShallow:l?toReadonly:toReactive;if(k.call(f,t))return _(e.get(t));if(k.call(f,I))return _(e.get(I));e!==f&&e.get(t)}function has(e,t=!1){const l=this.__v_raw,n=toRaw(l),f=toRaw(e);return t||(e!==f&&track(n,"has",e),track(n,"has",f)),e===f?l.has(e):l.has(e)||l.has(f)}function size(e,t=!1){return e=e.__v_raw,!t&&track(toRaw(e),"iterate",ITERATE_KEY),Reflect.get(e,"size",e)}function add(e){e=toRaw(e);const t=toRaw(this);return getProto(t).has.call(t,e)||(t.add(e),trigger(t,"add",e,e)),this}function set(e,t){t=toRaw(t);const l=toRaw(this),{has:n,get:f}=getProto(l);let I=n.call(l,e);I||(e=toRaw(e),I=n.call(l,e));const k=f.call(l,e);return l.set(e,t),I?hasChanged(t,k)&&trigger(l,"set",e,t):trigger(l,"add",e,t),this}function deleteEntry(e){const t=toRaw(this),{has:l,get:n}=getProto(t);let f=l.call(t,e);f||(e=toRaw(e),f=l.call(t,e)),n&&n.call(t,e);const I=t.delete(e);return f&&trigger(t,"delete",e,void 0),I}function clear(){const e=toRaw(this),t=e.size!==0,l=e.clear();return t&&trigger(e,"clear",void 0,void 0),l}function createForEach(e,t){return function(n,f){const I=this,k=I.__v_raw,_=toRaw(k),m=t?toShallow:e?toReadonly:toReactive;return!e&&track(_,"iterate",ITERATE_KEY),k.forEach((r,a)=>n.call(f,m(r),m(a),I))}}function createIterableMethod(e,t,l){return function(...n){const f=this.__v_raw,I=toRaw(f),k=isMap(I),_=e==="entries"||e===Symbol.iterator&&k,m=e==="keys"&&k,r=f[e](...n),a=l?toShallow:t?toReadonly:toReactive;return!t&&track(I,"iterate",m?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:T,done:E}=r.next();return E?{value:T,done:E}:{value:_?[a(T[0]),a(T[1])]:a(T),done:E}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(e){return function(...t){return e==="delete"?!1:this}}function createInstrumentations(){const e={get(I){return get(this,I)},get size(){return size(this)},has,add,set,delete:deleteEntry,clear,forEach:createForEach(!1,!1)},t={get(I){return get(this,I,!1,!0)},get size(){return size(this)},has,add,set,delete:deleteEntry,clear,forEach:createForEach(!1,!0)},l={get(I){return get(this,I,!0)},get size(){return size(this,!0)},has(I){return has.call(this,I,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!1)},n={get(I){return get(this,I,!0,!0)},get size(){return size(this,!0)},has(I){return has.call(this,I,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(I=>{e[I]=createIterableMethod(I,!1,!1),l[I]=createIterableMethod(I,!0,!1),t[I]=createIterableMethod(I,!1,!0),n[I]=createIterableMethod(I,!0,!0)}),[e,l,t,n]}const[mutableInstrumentations,readonlyInstrumentations,shallowInstrumentations,shallowReadonlyInstrumentations]=createInstrumentations();function createInstrumentationGetter(e,t){const l=t?e?shallowReadonlyInstrumentations:shallowInstrumentations:e?readonlyInstrumentations:mutableInstrumentations;return(n,f,I)=>f==="__v_isReactive"?!e:f==="__v_isReadonly"?e:f==="__v_raw"?n:Reflect.get(hasOwn(l,f)&&f in n?l:n,f,I)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(e){return e.__v_skip||!Object.isExtensible(e)?0:targetTypeMap(toRawType(e))}function reactive(e){return isReadonly(e)?e:createReactiveObject(e,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(e){return createReactiveObject(e,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(e){return createReactiveObject(e,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function createReactiveObject(e,t,l,n,f){if(!isObject(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const I=f.get(e);if(I)return I;const k=getTargetType(e);if(k===0)return e;const _=new Proxy(e,k===2?n:l);return f.set(e,_),_}function isReactive(e){return isReadonly(e)?isReactive(e.__v_raw):!!(e&&e.__v_isReactive)}function isReadonly(e){return!!(e&&e.__v_isReadonly)}function isShallow(e){return!!(e&&e.__v_isShallow)}function isProxy(e){return isReactive(e)||isReadonly(e)}function toRaw(e){const t=e&&e.__v_raw;return t?toRaw(t):e}function markRaw(e){return def(e,"__v_skip",!0),e}const toReactive=e=>isObject(e)?reactive(e):e,toReadonly=e=>isObject(e)?readonly(e):e;function trackRefValue(e){shouldTrack&&activeEffect&&(e=toRaw(e),trackEffects(e.dep||(e.dep=createDep())))}function triggerRefValue(e,t){e=toRaw(e);const l=e.dep;l&&triggerEffects(l)}function isRef(e){return!!(e&&e.__v_isRef===!0)}function ref(e){return createRef(e,!1)}function shallowRef(e){return createRef(e,!0)}function createRef(e,t){return isRef(e)?e:new RefImpl(e,t)}class RefImpl{constructor(t,l){this.__v_isShallow=l,this.dep=void 0,this.__v_isRef=!0,this._rawValue=l?t:toRaw(t),this._value=l?t:toReactive(t)}get value(){return trackRefValue(this),this._value}set value(t){const l=this.__v_isShallow||isShallow(t)||isReadonly(t);t=l?t:toRaw(t),hasChanged(t,this._rawValue)&&(this._rawValue=t,this._value=l?t:toReactive(t),triggerRefValue(this))}}function unref(e){return isRef(e)?e.value:e}const shallowUnwrapHandlers={get:(e,t,l)=>unref(Reflect.get(e,t,l)),set:(e,t,l,n)=>{const f=e[t];return isRef(f)&&!isRef(l)?(f.value=l,!0):Reflect.set(e,t,l,n)}};function proxyRefs(e){return isReactive(e)?e:new Proxy(e,shallowUnwrapHandlers)}class ComputedRefImpl{constructor(t,l,n,f){this._setter=l,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new ReactiveEffect(t,()=>{this._dirty||(this._dirty=!0,triggerRefValue(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!f,this.__v_isReadonly=n}get value(){const t=toRaw(this);return trackRefValue(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function computed$1(e,t,l=!1){let n,f;const I=isFunction(e);return I?(n=e,f=NOOP):(n=e.get,f=e.set),new ComputedRefImpl(n,f,I||!f,l)}function warn(e,...t){}function callWithErrorHandling(e,t,l,n){let f;try{f=n?e(...n):e()}catch(I){handleError(I,t,l)}return f}function callWithAsyncErrorHandling(e,t,l,n){if(isFunction(e)){const I=callWithErrorHandling(e,t,l,n);return I&&isPromise(I)&&I.catch(k=>{handleError(k,t,l)}),I}const f=[];for(let I=0;I<e.length;I++)f.push(callWithAsyncErrorHandling(e[I],t,l,n));return f}function handleError(e,t,l,n=!0){const f=t?t.vnode:null;if(t){let I=t.parent;const k=t.proxy,_=l;for(;I;){const r=I.ec;if(r){for(let a=0;a<r.length;a++)if(r[a](e,k,_)===!1)return}I=I.parent}const m=t.appContext.config.errorHandler;if(m){callWithErrorHandling(m,null,10,[e,k,_]);return}}logError(e,l,f,n)}function logError(e,t,l,n=!0){console.error(e)}let isFlushing=!1,isFlushPending=!1;const queue=[];let flushIndex=0;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick(e){const t=currentFlushPromise||resolvedPromise;return e?t.then(this?e.bind(this):e):t}function findInsertionIndex(e){let t=flushIndex+1,l=queue.length;for(;t<l;){const n=t+l>>>1;getId(queue[n])<e?t=n+1:l=n}return t}function queueJob(e){(!queue.length||!queue.includes(e,isFlushing&&e.allowRecurse?flushIndex+1:flushIndex))&&(e.id==null?queue.push(e):queue.splice(findInsertionIndex(e.id),0,e),queueFlush())}function queueFlush(){!isFlushing&&!isFlushPending&&(isFlushPending=!0,currentFlushPromise=resolvedPromise.then(flushJobs))}function invalidateJob(e){const t=queue.indexOf(e);t>flushIndex&&queue.splice(t,1)}function queuePostFlushCb(e){isArray$1(e)?pendingPostFlushCbs.push(...e):(!activePostFlushCbs||!activePostFlushCbs.includes(e,e.allowRecurse?postFlushIndex+1:postFlushIndex))&&pendingPostFlushCbs.push(e),queueFlush()}function flushPreFlushCbs(e,t=isFlushing?flushIndex+1:0){for(;t<queue.length;t++){const l=queue[t];l&&l.pre&&(queue.splice(t,1),t--,l())}}function flushPostFlushCbs(e){if(pendingPostFlushCbs.length){const t=[...new Set(pendingPostFlushCbs)];if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...t);return}for(activePostFlushCbs=t,activePostFlushCbs.sort((l,n)=>getId(l)-getId(n)),postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++)activePostFlushCbs[postFlushIndex]();activePostFlushCbs=null,postFlushIndex=0}}const getId=e=>e.id==null?1/0:e.id,comparator=(e,t)=>{const l=getId(e)-getId(t);if(l===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return l};function flushJobs(e){isFlushPending=!1,isFlushing=!0,queue.sort(comparator);const t=NOOP;try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const l=queue[flushIndex];l&&l.active!==!1&&callWithErrorHandling(l,null,14)}}finally{flushIndex=0,queue.length=0,flushPostFlushCbs(),isFlushing=!1,currentFlushPromise=null,(queue.length||pendingPostFlushCbs.length)&&flushJobs()}}function emit(e,t,...l){if(e.isUnmounted)return;const n=e.vnode.props||EMPTY_OBJ;let f=l;const I=t.startsWith("update:"),k=I&&t.slice(7);if(k&&k in n){const a=`${k==="modelValue"?"model":k}Modifiers`,{number:T,trim:E}=n[a]||EMPTY_OBJ;E&&(f=l.map(C=>isString(C)?C.trim():C)),T&&(f=l.map(looseToNumber))}let _,m=n[_=toHandlerKey(t)]||n[_=toHandlerKey(camelize(t))];!m&&I&&(m=n[_=toHandlerKey(hyphenate(t))]),m&&callWithAsyncErrorHandling(m,e,6,f);const r=n[_+"Once"];if(r){if(!e.emitted)e.emitted={};else if(e.emitted[_])return;e.emitted[_]=!0,callWithAsyncErrorHandling(r,e,6,f)}}function normalizeEmitsOptions(e,t,l=!1){const n=t.emitsCache,f=n.get(e);if(f!==void 0)return f;const I=e.emits;let k={},_=!1;if(!isFunction(e)){const m=r=>{const a=normalizeEmitsOptions(r,t,!0);a&&(_=!0,extend(k,a))};!l&&t.mixins.length&&t.mixins.forEach(m),e.extends&&m(e.extends),e.mixins&&e.mixins.forEach(m)}return!I&&!_?(isObject(e)&&n.set(e,null),null):(isArray$1(I)?I.forEach(m=>k[m]=null):extend(k,I),isObject(e)&&n.set(e,k),k)}function isEmitListener(e,t){return!e||!isOn(t)?!1:(t=t.slice(2).replace(/Once$/,""),hasOwn(e,t[0].toLowerCase()+t.slice(1))||hasOwn(e,hyphenate(t))||hasOwn(e,t))}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(e){const t=currentRenderingInstance;return currentRenderingInstance=e,currentScopeId=e&&e.type.__scopeId||null,t}function pushScopeId(e){currentScopeId=e}function popScopeId(){currentScopeId=null}function withCtx(e,t=currentRenderingInstance,l){if(!t||e._n)return e;const n=(...f)=>{n._d&&setBlockTracking(-1);const I=setCurrentRenderingInstance(t);let k;try{k=e(...f)}finally{setCurrentRenderingInstance(I),n._d&&setBlockTracking(1)}return k};return n._n=!0,n._c=!0,n._d=!0,n}function markAttrsAccessed(){}function renderComponentRoot(e){const{type:t,vnode:l,proxy:n,withProxy:f,props:I,propsOptions:[k],slots:_,attrs:m,emit:r,render:a,renderCache:T,data:E,setupState:C,ctx:s,inheritAttrs:g}=e;let b,P;const x=setCurrentRenderingInstance(e);try{if(l.shapeFlag&4){const A=f||n;b=normalizeVNode(a.call(A,A,T,I,C,E,s)),P=m}else{const A=t;b=normalizeVNode(A.length>1?A(I,{attrs:m,slots:_,emit:r}):A(I,null)),P=t.props?m:getFunctionalFallthrough(m)}}catch(A){blockStack.length=0,handleError(A,e,1),b=createVNode(Comment)}let y=b;if(P&&g!==!1){const A=Object.keys(P),{shapeFlag:o}=y;A.length&&o&7&&(k&&A.some(isModelListener)&&(P=filterModelListeners(P,k)),y=cloneVNode(y,P))}return l.dirs&&(y=cloneVNode(y),y.dirs=y.dirs?y.dirs.concat(l.dirs):l.dirs),l.transition&&(y.transition=l.transition),b=y,setCurrentRenderingInstance(x),b}const getFunctionalFallthrough=e=>{let t;for(const l in e)(l==="class"||l==="style"||isOn(l))&&((t||(t={}))[l]=e[l]);return t},filterModelListeners=(e,t)=>{const l={};for(const n in e)(!isModelListener(n)||!(n.slice(9)in t))&&(l[n]=e[n]);return l};function shouldUpdateComponent(e,t,l){const{props:n,children:f,component:I}=e,{props:k,children:_,patchFlag:m}=t,r=I.emitsOptions;if(t.dirs||t.transition)return!0;if(l&&m>=0){if(m&1024)return!0;if(m&16)return n?hasPropsChanged(n,k,r):!!k;if(m&8){const a=t.dynamicProps;for(let T=0;T<a.length;T++){const E=a[T];if(k[E]!==n[E]&&!isEmitListener(r,E))return!0}}}else return(f||_)&&(!_||!_.$stable)?!0:n===k?!1:n?k?hasPropsChanged(n,k,r):!0:!!k;return!1}function hasPropsChanged(e,t,l){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let f=0;f<n.length;f++){const I=n[f];if(t[I]!==e[I]&&!isEmitListener(l,I))return!0}return!1}function updateHOCHostEl({vnode:e,parent:t},l){for(;t&&t.subTree===e;)(e=t.vnode).el=l,t=t.parent}const isSuspense=e=>e.__isSuspense;function queueEffectWithSuspense(e,t){t&&t.pendingBranch?isArray$1(e)?t.effects.push(...e):t.effects.push(e):queuePostFlushCb(e)}const INITIAL_WATCHER_VALUE={};function watch(e,t,l){return doWatch(e,t,l)}function doWatch(e,t,{immediate:l,deep:n,flush:f,onTrack:I,onTrigger:k}=EMPTY_OBJ){var _;const m=getCurrentScope()===((_=currentInstance)==null?void 0:_.scope)?currentInstance:null;let r,a=!1,T=!1;if(isRef(e)?(r=()=>e.value,a=isShallow(e)):isReactive(e)?(r=()=>e,n=!0):isArray$1(e)?(T=!0,a=e.some(A=>isReactive(A)||isShallow(A)),r=()=>e.map(A=>{if(isRef(A))return A.value;if(isReactive(A))return traverse(A);if(isFunction(A))return callWithErrorHandling(A,m,2)})):isFunction(e)?t?r=()=>callWithErrorHandling(e,m,2):r=()=>{if(!(m&&m.isUnmounted))return E&&E(),callWithAsyncErrorHandling(e,m,3,[C])}:r=NOOP,t&&n){const A=r;r=()=>traverse(A())}let E,C=A=>{E=x.onStop=()=>{callWithErrorHandling(A,m,4)}},s;if(isInSSRComponentSetup)if(C=NOOP,t?l&&callWithAsyncErrorHandling(t,m,3,[r(),T?[]:void 0,C]):r(),f==="sync"){const A=useSSRContext();s=A.__watcherHandles||(A.__watcherHandles=[])}else return NOOP;let g=T?new Array(e.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const b=()=>{if(x.active)if(t){const A=x.run();(n||a||(T?A.some((o,c)=>hasChanged(o,g[c])):hasChanged(A,g)))&&(E&&E(),callWithAsyncErrorHandling(t,m,3,[A,g===INITIAL_WATCHER_VALUE?void 0:T&&g[0]===INITIAL_WATCHER_VALUE?[]:g,C]),g=A)}else x.run()};b.allowRecurse=!!t;let P;f==="sync"?P=b:f==="post"?P=()=>queuePostRenderEffect(b,m&&m.suspense):(b.pre=!0,m&&(b.id=m.uid),P=()=>queueJob(b));const x=new ReactiveEffect(r,P);t?l?b():g=x.run():f==="post"?queuePostRenderEffect(x.run.bind(x),m&&m.suspense):x.run();const y=()=>{x.stop(),m&&m.scope&&remove(m.scope.effects,x)};return s&&s.push(y),y}function instanceWatch(e,t,l){const n=this.proxy,f=isString(e)?e.includes(".")?createPathGetter(n,e):()=>n[e]:e.bind(n,n);let I;isFunction(t)?I=t:(I=t.handler,l=t);const k=currentInstance;setCurrentInstance(this);const _=doWatch(f,I.bind(n),l);return k?setCurrentInstance(k):unsetCurrentInstance(),_}function createPathGetter(e,t){const l=t.split(".");return()=>{let n=e;for(let f=0;f<l.length&&n;f++)n=n[l[f]];return n}}function traverse(e,t){if(!isObject(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),isRef(e))traverse(e.value,t);else if(isArray$1(e))for(let l=0;l<e.length;l++)traverse(e[l],t);else if(isSet(e)||isMap(e))e.forEach(l=>{traverse(l,t)});else if(isPlainObject(e))for(const l in e)traverse(e[l],t);return e}function invokeDirectiveHook(e,t,l,n){const f=e.dirs,I=t&&t.dirs;for(let k=0;k<f.length;k++){const _=f[k];I&&(_.oldValue=I[k].value);let m=_.dir[n];m&&(pauseTracking(),callWithAsyncErrorHandling(m,l,8,[e.el,_,e,t]),resetTracking())}}function defineComponent(e,t){return isFunction(e)?(()=>extend({name:e.name},t,{setup:e}))():e}const isAsyncWrapper=e=>!!e.type.__asyncLoader,isKeepAlive=e=>e.type.__isKeepAlive;function onActivated(e,t){registerKeepAliveHook(e,"a",t)}function onDeactivated(e,t){registerKeepAliveHook(e,"da",t)}function registerKeepAliveHook(e,t,l=currentInstance){const n=e.__wdc||(e.__wdc=()=>{let f=l;for(;f;){if(f.isDeactivated)return;f=f.parent}return e()});if(injectHook(t,n,l),l){let f=l.parent;for(;f&&f.parent;)isKeepAlive(f.parent.vnode)&&injectToKeepAliveRoot(n,t,l,f),f=f.parent}}function injectToKeepAliveRoot(e,t,l,n){const f=injectHook(t,e,n,!0);onUnmounted(()=>{remove(n[t],f)},l)}function injectHook(e,t,l=currentInstance,n=!1){if(l){const f=l[e]||(l[e]=[]),I=t.__weh||(t.__weh=(...k)=>{if(l.isUnmounted)return;pauseTracking(),setCurrentInstance(l);const _=callWithAsyncErrorHandling(t,l,e,k);return unsetCurrentInstance(),resetTracking(),_});return n?f.unshift(I):f.push(I),I}}const createHook=e=>(t,l=currentInstance)=>(!isInSSRComponentSetup||e==="sp")&&injectHook(e,(...n)=>t(...n),l),onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(e,t=currentInstance){injectHook("ec",e,t)}const NULL_DYNAMIC_COMPONENT=Symbol.for("v-ndc"),getPublicInstance=e=>e?isStatefulComponent(e)?getExposeProxy(e)||e.proxy:getPublicInstance(e.parent):null,publicPropertiesMap=extend(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>getPublicInstance(e.parent),$root:e=>getPublicInstance(e.root),$emit:e=>e.emit,$options:e=>resolveMergedOptions(e),$forceUpdate:e=>e.f||(e.f=()=>queueJob(e.update)),$nextTick:e=>e.n||(e.n=nextTick.bind(e.proxy)),$watch:e=>instanceWatch.bind(e)}),hasSetupBinding=(e,t)=>e!==EMPTY_OBJ&&!e.__isScriptSetup&&hasOwn(e,t),PublicInstanceProxyHandlers={get({_:e},t){const{ctx:l,setupState:n,data:f,props:I,accessCache:k,type:_,appContext:m}=e;let r;if(t[0]!=="$"){const C=k[t];if(C!==void 0)switch(C){case 1:return n[t];case 2:return f[t];case 4:return l[t];case 3:return I[t]}else{if(hasSetupBinding(n,t))return k[t]=1,n[t];if(f!==EMPTY_OBJ&&hasOwn(f,t))return k[t]=2,f[t];if((r=e.propsOptions[0])&&hasOwn(r,t))return k[t]=3,I[t];if(l!==EMPTY_OBJ&&hasOwn(l,t))return k[t]=4,l[t];shouldCacheAccess&&(k[t]=0)}}const a=publicPropertiesMap[t];let T,E;if(a)return t==="$attrs"&&track(e,"get",t),a(e);if((T=_.__cssModules)&&(T=T[t]))return T;if(l!==EMPTY_OBJ&&hasOwn(l,t))return k[t]=4,l[t];if(E=m.config.globalProperties,hasOwn(E,t))return E[t]},set({_:e},t,l){const{data:n,setupState:f,ctx:I}=e;return hasSetupBinding(f,t)?(f[t]=l,!0):n!==EMPTY_OBJ&&hasOwn(n,t)?(n[t]=l,!0):hasOwn(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(I[t]=l,!0)},has({_:{data:e,setupState:t,accessCache:l,ctx:n,appContext:f,propsOptions:I}},k){let _;return!!l[k]||e!==EMPTY_OBJ&&hasOwn(e,k)||hasSetupBinding(t,k)||(_=I[0])&&hasOwn(_,k)||hasOwn(n,k)||hasOwn(publicPropertiesMap,k)||hasOwn(f.config.globalProperties,k)},defineProperty(e,t,l){return l.get!=null?e._.accessCache[t]=0:hasOwn(l,"value")&&this.set(e,t,l.value,null),Reflect.defineProperty(e,t,l)}};function normalizePropsOrEmits(e){return isArray$1(e)?e.reduce((t,l)=>(t[l]=null,t),{}):e}let shouldCacheAccess=!0;function applyOptions(e){const t=resolveMergedOptions(e),l=e.proxy,n=e.ctx;shouldCacheAccess=!1,t.beforeCreate&&callHook(t.beforeCreate,e,"bc");const{data:f,computed:I,methods:k,watch:_,provide:m,inject:r,created:a,beforeMount:T,mounted:E,beforeUpdate:C,updated:s,activated:g,deactivated:b,beforeDestroy:P,beforeUnmount:x,destroyed:y,unmounted:A,render:o,renderTracked:c,renderTriggered:S,errorCaptured:w,serverPrefetch:v,expose:F,inheritAttrs:N,components:G,directives:le,filters:V}=t;if(r&&resolveInjections(r,n,null),k)for(const te in k){const K=k[te];isFunction(K)&&(n[te]=K.bind(l))}if(f){const te=f.call(l,l);isObject(te)&&(e.data=reactive(te))}if(shouldCacheAccess=!0,I)for(const te in I){const K=I[te],ue=isFunction(K)?K.bind(l,l):isFunction(K.get)?K.get.bind(l,l):NOOP,se=!isFunction(K)&&isFunction(K.set)?K.set.bind(l):NOOP,Ce=computed({get:ue,set:se});Object.defineProperty(n,te,{enumerable:!0,configurable:!0,get:()=>Ce.value,set:Me=>Ce.value=Me})}if(_)for(const te in _)createWatcher(_[te],n,l,te);if(m){const te=isFunction(m)?m.call(l):m;Reflect.ownKeys(te).forEach(K=>{provide(K,te[K])})}a&&callHook(a,e,"c");function re(te,K){isArray$1(K)?K.forEach(ue=>te(ue.bind(l))):K&&te(K.bind(l))}if(re(onBeforeMount,T),re(onMounted,E),re(onBeforeUpdate,C),re(onUpdated,s),re(onActivated,g),re(onDeactivated,b),re(onErrorCaptured,w),re(onRenderTracked,c),re(onRenderTriggered,S),re(onBeforeUnmount,x),re(onUnmounted,A),re(onServerPrefetch,v),isArray$1(F))if(F.length){const te=e.exposed||(e.exposed={});F.forEach(K=>{Object.defineProperty(te,K,{get:()=>l[K],set:ue=>l[K]=ue})})}else e.exposed||(e.exposed={});o&&e.render===NOOP&&(e.render=o),N!=null&&(e.inheritAttrs=N),G&&(e.components=G),le&&(e.directives=le)}function resolveInjections(e,t,l=NOOP){isArray$1(e)&&(e=normalizeInject(e));for(const n in e){const f=e[n];let I;isObject(f)?"default"in f?I=inject(f.from||n,f.default,!0):I=inject(f.from||n):I=inject(f),isRef(I)?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>I.value,set:k=>I.value=k}):t[n]=I}}function callHook(e,t,l){callWithAsyncErrorHandling(isArray$1(e)?e.map(n=>n.bind(t.proxy)):e.bind(t.proxy),t,l)}function createWatcher(e,t,l,n){const f=n.includes(".")?createPathGetter(l,n):()=>l[n];if(isString(e)){const I=t[e];isFunction(I)&&watch(f,I)}else if(isFunction(e))watch(f,e.bind(l));else if(isObject(e))if(isArray$1(e))e.forEach(I=>createWatcher(I,t,l,n));else{const I=isFunction(e.handler)?e.handler.bind(l):t[e.handler];isFunction(I)&&watch(f,I,e)}}function resolveMergedOptions(e){const t=e.type,{mixins:l,extends:n}=t,{mixins:f,optionsCache:I,config:{optionMergeStrategies:k}}=e.appContext,_=I.get(t);let m;return _?m=_:!f.length&&!l&&!n?m=t:(m={},f.length&&f.forEach(r=>mergeOptions$1(m,r,k,!0)),mergeOptions$1(m,t,k)),isObject(t)&&I.set(t,m),m}function mergeOptions$1(e,t,l,n=!1){const{mixins:f,extends:I}=t;I&&mergeOptions$1(e,I,l,!0),f&&f.forEach(k=>mergeOptions$1(e,k,l,!0));for(const k in t)if(!(n&&k==="expose")){const _=internalOptionMergeStrats[k]||l&&l[k];e[k]=_?_(e[k],t[k]):t[k]}return e}const internalOptionMergeStrats={data:mergeDataFn,props:mergeEmitsOrPropsOptions,emits:mergeEmitsOrPropsOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(e,t){return t?e?function(){return extend(isFunction(e)?e.call(this,this):e,isFunction(t)?t.call(this,this):t)}:t:e}function mergeInject(e,t){return mergeObjectOptions(normalizeInject(e),normalizeInject(t))}function normalizeInject(e){if(isArray$1(e)){const t={};for(let l=0;l<e.length;l++)t[e[l]]=e[l];return t}return e}function mergeAsArray(e,t){return e?[...new Set([].concat(e,t))]:t}function mergeObjectOptions(e,t){return e?extend(Object.create(null),e,t):t}function mergeEmitsOrPropsOptions(e,t){return e?isArray$1(e)&&isArray$1(t)?[...new Set([...e,...t])]:extend(Object.create(null),normalizePropsOrEmits(e),normalizePropsOrEmits(t??{})):t}function mergeWatchOptions(e,t){if(!e)return t;if(!t)return e;const l=extend(Object.create(null),e);for(const n in t)l[n]=mergeAsArray(e[n],t[n]);return l}function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid$1=0;function createAppAPI(e,t){return function(n,f=null){isFunction(n)||(n=extend({},n)),f!=null&&!isObject(f)&&(f=null);const I=createAppContext(),k=new Set;let _=!1;const m=I.app={_uid:uid$1++,_component:n,_props:f,_container:null,_context:I,_instance:null,version,get config(){return I.config},set config(r){},use(r,...a){return k.has(r)||(r&&isFunction(r.install)?(k.add(r),r.install(m,...a)):isFunction(r)&&(k.add(r),r(m,...a))),m},mixin(r){return I.mixins.includes(r)||I.mixins.push(r),m},component(r,a){return a?(I.components[r]=a,m):I.components[r]},directive(r,a){return a?(I.directives[r]=a,m):I.directives[r]},mount(r,a,T){if(!_){const E=createVNode(n,f);return E.appContext=I,a&&t?t(E,r):e(E,r,T),_=!0,m._container=r,r.__vue_app__=m,getExposeProxy(E.component)||E.component.proxy}},unmount(){_&&(e(null,m._container),delete m._container.__vue_app__)},provide(r,a){return I.provides[r]=a,m},runWithContext(r){currentApp=m;try{return r()}finally{currentApp=null}}};return m}}let currentApp=null;function provide(e,t){if(currentInstance){let l=currentInstance.provides;const n=currentInstance.parent&&currentInstance.parent.provides;n===l&&(l=currentInstance.provides=Object.create(n)),l[e]=t}}function inject(e,t,l=!1){const n=currentInstance||currentRenderingInstance;if(n||currentApp){const f=n?n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:currentApp._context.provides;if(f&&e in f)return f[e];if(arguments.length>1)return l&&isFunction(t)?t.call(n&&n.proxy):t}}function initProps(e,t,l,n=!1){const f={},I={};def(I,InternalObjectKey,1),e.propsDefaults=Object.create(null),setFullProps(e,t,f,I);for(const k in e.propsOptions[0])k in f||(f[k]=void 0);l?e.props=n?f:shallowReactive(f):e.type.props?e.props=f:e.props=I,e.attrs=I}function updateProps(e,t,l,n){const{props:f,attrs:I,vnode:{patchFlag:k}}=e,_=toRaw(f),[m]=e.propsOptions;let r=!1;if((n||k>0)&&!(k&16)){if(k&8){const a=e.vnode.dynamicProps;for(let T=0;T<a.length;T++){let E=a[T];if(isEmitListener(e.emitsOptions,E))continue;const C=t[E];if(m)if(hasOwn(I,E))C!==I[E]&&(I[E]=C,r=!0);else{const s=camelize(E);f[s]=resolvePropValue(m,_,s,C,e,!1)}else C!==I[E]&&(I[E]=C,r=!0)}}}else{setFullProps(e,t,f,I)&&(r=!0);let a;for(const T in _)(!t||!hasOwn(t,T)&&((a=hyphenate(T))===T||!hasOwn(t,a)))&&(m?l&&(l[T]!==void 0||l[a]!==void 0)&&(f[T]=resolvePropValue(m,_,T,void 0,e,!0)):delete f[T]);if(I!==_)for(const T in I)(!t||!hasOwn(t,T))&&(delete I[T],r=!0)}r&&trigger(e,"set","$attrs")}function setFullProps(e,t,l,n){const[f,I]=e.propsOptions;let k=!1,_;if(t)for(let m in t){if(isReservedProp(m))continue;const r=t[m];let a;f&&hasOwn(f,a=camelize(m))?!I||!I.includes(a)?l[a]=r:(_||(_={}))[a]=r:isEmitListener(e.emitsOptions,m)||(!(m in n)||r!==n[m])&&(n[m]=r,k=!0)}if(I){const m=toRaw(l),r=_||EMPTY_OBJ;for(let a=0;a<I.length;a++){const T=I[a];l[T]=resolvePropValue(f,m,T,r[T],e,!hasOwn(r,T))}}return k}function resolvePropValue(e,t,l,n,f,I){const k=e[l];if(k!=null){const _=hasOwn(k,"default");if(_&&n===void 0){const m=k.default;if(k.type!==Function&&!k.skipFactory&&isFunction(m)){const{propsDefaults:r}=f;l in r?n=r[l]:(setCurrentInstance(f),n=r[l]=m.call(null,t),unsetCurrentInstance())}else n=m}k[0]&&(I&&!_?n=!1:k[1]&&(n===""||n===hyphenate(l))&&(n=!0))}return n}function normalizePropsOptions(e,t,l=!1){const n=t.propsCache,f=n.get(e);if(f)return f;const I=e.props,k={},_=[];let m=!1;if(!isFunction(e)){const a=T=>{m=!0;const[E,C]=normalizePropsOptions(T,t,!0);extend(k,E),C&&_.push(...C)};!l&&t.mixins.length&&t.mixins.forEach(a),e.extends&&a(e.extends),e.mixins&&e.mixins.forEach(a)}if(!I&&!m)return isObject(e)&&n.set(e,EMPTY_ARR),EMPTY_ARR;if(isArray$1(I))for(let a=0;a<I.length;a++){const T=camelize(I[a]);validatePropName(T)&&(k[T]=EMPTY_OBJ)}else if(I)for(const a in I){const T=camelize(a);if(validatePropName(T)){const E=I[a],C=k[T]=isArray$1(E)||isFunction(E)?{type:E}:extend({},E);if(C){const s=getTypeIndex(Boolean,C.type),g=getTypeIndex(String,C.type);C[0]=s>-1,C[1]=g<0||s<g,(s>-1||hasOwn(C,"default"))&&_.push(T)}}}const r=[k,_];return isObject(e)&&n.set(e,r),r}function validatePropName(e){return e[0]!=="$"}function getType(e){const t=e&&e.toString().match(/^\s*(function|class) (\w+)/);return t?t[2]:e===null?"null":""}function isSameType(e,t){return getType(e)===getType(t)}function getTypeIndex(e,t){return isArray$1(t)?t.findIndex(l=>isSameType(l,e)):isFunction(t)&&isSameType(t,e)?0:-1}const isInternalKey=e=>e[0]==="_"||e==="$stable",normalizeSlotValue=e=>isArray$1(e)?e.map(normalizeVNode):[normalizeVNode(e)],normalizeSlot$1=(e,t,l)=>{if(t._n)return t;const n=withCtx((...f)=>normalizeSlotValue(t(...f)),l);return n._c=!1,n},normalizeObjectSlots=(e,t,l)=>{const n=e._ctx;for(const f in e){if(isInternalKey(f))continue;const I=e[f];if(isFunction(I))t[f]=normalizeSlot$1(f,I,n);else if(I!=null){const k=normalizeSlotValue(I);t[f]=()=>k}}},normalizeVNodeSlots=(e,t)=>{const l=normalizeSlotValue(t);e.slots.default=()=>l},initSlots=(e,t)=>{if(e.vnode.shapeFlag&32){const l=t._;l?(e.slots=toRaw(t),def(t,"_",l)):normalizeObjectSlots(t,e.slots={})}else e.slots={},t&&normalizeVNodeSlots(e,t);def(e.slots,InternalObjectKey,1)},updateSlots=(e,t,l)=>{const{vnode:n,slots:f}=e;let I=!0,k=EMPTY_OBJ;if(n.shapeFlag&32){const _=t._;_?l&&_===1?I=!1:(extend(f,t),!l&&_===1&&delete f._):(I=!t.$stable,normalizeObjectSlots(t,f)),k=t}else t&&(normalizeVNodeSlots(e,t),k={default:1});if(I)for(const _ in f)!isInternalKey(_)&&!(_ in k)&&delete f[_]};function setRef(e,t,l,n,f=!1){if(isArray$1(e)){e.forEach((E,C)=>setRef(E,t&&(isArray$1(t)?t[C]:t),l,n,f));return}if(isAsyncWrapper(n)&&!f)return;const I=n.shapeFlag&4?getExposeProxy(n.component)||n.component.proxy:n.el,k=f?null:I,{i:_,r:m}=e,r=t&&t.r,a=_.refs===EMPTY_OBJ?_.refs={}:_.refs,T=_.setupState;if(r!=null&&r!==m&&(isString(r)?(a[r]=null,hasOwn(T,r)&&(T[r]=null)):isRef(r)&&(r.value=null)),isFunction(m))callWithErrorHandling(m,_,12,[k,a]);else{const E=isString(m),C=isRef(m);if(E||C){const s=()=>{if(e.f){const g=E?hasOwn(T,m)?T[m]:a[m]:m.value;f?isArray$1(g)&&remove(g,I):isArray$1(g)?g.includes(I)||g.push(I):E?(a[m]=[I],hasOwn(T,m)&&(T[m]=a[m])):(m.value=[I],e.k&&(a[e.k]=m.value))}else E?(a[m]=k,hasOwn(T,m)&&(T[m]=k)):C&&(m.value=k,e.k&&(a[e.k]=k))};k?(s.id=-1,queuePostRenderEffect(s,l)):s()}}}const queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(e){return baseCreateRenderer(e)}function baseCreateRenderer(e,t){const l=getGlobalThis();l.__VUE__=!0;const{insert:n,remove:f,patchProp:I,createElement:k,createText:_,createComment:m,setText:r,setElementText:a,parentNode:T,nextSibling:E,setScopeId:C=NOOP,insertStaticContent:s}=e,g=(B,z,j,Y=null,ce=null,oe=null,Se=!1,Ee=null,ye=!!z.dynamicChildren)=>{if(B===z)return;B&&!isSameVNodeType(B,z)&&(Y=u(B),Me(B,ce,oe,!0),B=null),z.patchFlag===-2&&(ye=!1,z.dynamicChildren=null);const{type:ne,ref:fe,shapeFlag:ae}=z;switch(ne){case Text:b(B,z,j,Y);break;case Comment:P(B,z,j,Y);break;case Static:B==null&&x(z,j,Y,Se);break;case Fragment:G(B,z,j,Y,ce,oe,Se,Ee,ye);break;default:ae&1?o(B,z,j,Y,ce,oe,Se,Ee,ye):ae&6?le(B,z,j,Y,ce,oe,Se,Ee,ye):(ae&64||ae&128)&&ne.process(B,z,j,Y,ce,oe,Se,Ee,ye,D)}fe!=null&&ce&&setRef(fe,B&&B.ref,oe,z||B,!z)},b=(B,z,j,Y)=>{if(B==null)n(z.el=_(z.children),j,Y);else{const ce=z.el=B.el;z.children!==B.children&&r(ce,z.children)}},P=(B,z,j,Y)=>{B==null?n(z.el=m(z.children||""),j,Y):z.el=B.el},x=(B,z,j,Y)=>{[B.el,B.anchor]=s(B.children,z,j,Y,B.el,B.anchor)},y=({el:B,anchor:z},j,Y)=>{let ce;for(;B&&B!==z;)ce=E(B),n(B,j,Y),B=ce;n(z,j,Y)},A=({el:B,anchor:z})=>{let j;for(;B&&B!==z;)j=E(B),f(B),B=j;f(z)},o=(B,z,j,Y,ce,oe,Se,Ee,ye)=>{Se=Se||z.type==="svg",B==null?c(z,j,Y,ce,oe,Se,Ee,ye):v(B,z,ce,oe,Se,Ee,ye)},c=(B,z,j,Y,ce,oe,Se,Ee)=>{let ye,ne;const{type:fe,props:ae,shapeFlag:de,transition:be,dirs:Ie}=B;if(ye=B.el=k(B.type,oe,ae&&ae.is,ae),de&8?a(ye,B.children):de&16&&w(B.children,ye,null,Y,ce,oe&&fe!=="foreignObject",Se,Ee),Ie&&invokeDirectiveHook(B,null,Y,"created"),S(ye,B,B.scopeId,Se,Y),ae){for(const De in ae)De!=="value"&&!isReservedProp(De)&&I(ye,De,null,ae[De],oe,B.children,Y,ce,d);"value"in ae&&I(ye,"value",null,ae.value),(ne=ae.onVnodeBeforeMount)&&invokeVNodeHook(ne,Y,B)}Ie&&invokeDirectiveHook(B,null,Y,"beforeMount");const Le=(!ce||ce&&!ce.pendingBranch)&&be&&!be.persisted;Le&&be.beforeEnter(ye),n(ye,z,j),((ne=ae&&ae.onVnodeMounted)||Le||Ie)&&queuePostRenderEffect(()=>{ne&&invokeVNodeHook(ne,Y,B),Le&&be.enter(ye),Ie&&invokeDirectiveHook(B,null,Y,"mounted")},ce)},S=(B,z,j,Y,ce)=>{if(j&&C(B,j),Y)for(let oe=0;oe<Y.length;oe++)C(B,Y[oe]);if(ce){let oe=ce.subTree;if(z===oe){const Se=ce.vnode;S(B,Se,Se.scopeId,Se.slotScopeIds,ce.parent)}}},w=(B,z,j,Y,ce,oe,Se,Ee,ye=0)=>{for(let ne=ye;ne<B.length;ne++){const fe=B[ne]=Ee?cloneIfMounted(B[ne]):normalizeVNode(B[ne]);g(null,fe,z,j,Y,ce,oe,Se,Ee)}},v=(B,z,j,Y,ce,oe,Se)=>{const Ee=z.el=B.el;let{patchFlag:ye,dynamicChildren:ne,dirs:fe}=z;ye|=B.patchFlag&16;const ae=B.props||EMPTY_OBJ,de=z.props||EMPTY_OBJ;let be;j&&toggleRecurse(j,!1),(be=de.onVnodeBeforeUpdate)&&invokeVNodeHook(be,j,z,B),fe&&invokeDirectiveHook(z,B,j,"beforeUpdate"),j&&toggleRecurse(j,!0);const Ie=ce&&z.type!=="foreignObject";if(ne?F(B.dynamicChildren,ne,Ee,j,Y,Ie,oe):Se||K(B,z,Ee,null,j,Y,Ie,oe,!1),ye>0){if(ye&16)N(Ee,z,ae,de,j,Y,ce);else if(ye&2&&ae.class!==de.class&&I(Ee,"class",null,de.class,ce),ye&4&&I(Ee,"style",ae.style,de.style,ce),ye&8){const Le=z.dynamicProps;for(let De=0;De<Le.length;De++){const Be=Le[De],je=ae[Be],He=de[Be];(He!==je||Be==="value")&&I(Ee,Be,je,He,ce,B.children,j,Y,d)}}ye&1&&B.children!==z.children&&a(Ee,z.children)}else!Se&&ne==null&&N(Ee,z,ae,de,j,Y,ce);((be=de.onVnodeUpdated)||fe)&&queuePostRenderEffect(()=>{be&&invokeVNodeHook(be,j,z,B),fe&&invokeDirectiveHook(z,B,j,"updated")},Y)},F=(B,z,j,Y,ce,oe,Se)=>{for(let Ee=0;Ee<z.length;Ee++){const ye=B[Ee],ne=z[Ee],fe=ye.el&&(ye.type===Fragment||!isSameVNodeType(ye,ne)||ye.shapeFlag&70)?T(ye.el):j;g(ye,ne,fe,null,Y,ce,oe,Se,!0)}},N=(B,z,j,Y,ce,oe,Se)=>{if(j!==Y){if(j!==EMPTY_OBJ)for(const Ee in j)!isReservedProp(Ee)&&!(Ee in Y)&&I(B,Ee,j[Ee],null,Se,z.children,ce,oe,d);for(const Ee in Y){if(isReservedProp(Ee))continue;const ye=Y[Ee],ne=j[Ee];ye!==ne&&Ee!=="value"&&I(B,Ee,ne,ye,Se,z.children,ce,oe,d)}"value"in Y&&I(B,"value",j.value,Y.value)}},G=(B,z,j,Y,ce,oe,Se,Ee,ye)=>{const ne=z.el=B?B.el:_(""),fe=z.anchor=B?B.anchor:_("");let{patchFlag:ae,dynamicChildren:de,slotScopeIds:be}=z;be&&(Ee=Ee?Ee.concat(be):be),B==null?(n(ne,j,Y),n(fe,j,Y),w(z.children,j,fe,ce,oe,Se,Ee,ye)):ae>0&&ae&64&&de&&B.dynamicChildren?(F(B.dynamicChildren,de,j,ce,oe,Se,Ee),(z.key!=null||ce&&z===ce.subTree)&&traverseStaticChildren(B,z,!0)):K(B,z,j,fe,ce,oe,Se,Ee,ye)},le=(B,z,j,Y,ce,oe,Se,Ee,ye)=>{z.slotScopeIds=Ee,B==null?z.shapeFlag&512?ce.ctx.activate(z,j,Y,Se,ye):V(z,j,Y,ce,oe,Se,ye):Z(B,z,ye)},V=(B,z,j,Y,ce,oe,Se)=>{const Ee=B.component=createComponentInstance(B,Y,ce);if(isKeepAlive(B)&&(Ee.ctx.renderer=D),setupComponent(Ee),Ee.asyncDep){if(ce&&ce.registerDep(Ee,re),!B.el){const ye=Ee.subTree=createVNode(Comment);P(null,ye,z,j)}return}re(Ee,B,z,j,ce,oe,Se)},Z=(B,z,j)=>{const Y=z.component=B.component;if(shouldUpdateComponent(B,z,j))if(Y.asyncDep&&!Y.asyncResolved){te(Y,z,j);return}else Y.next=z,invalidateJob(Y.update),Y.update();else z.el=B.el,Y.vnode=z},re=(B,z,j,Y,ce,oe,Se)=>{const Ee=()=>{if(B.isMounted){let{next:fe,bu:ae,u:de,parent:be,vnode:Ie}=B,Le=fe,De;toggleRecurse(B,!1),fe?(fe.el=Ie.el,te(B,fe,Se)):fe=Ie,ae&&invokeArrayFns(ae),(De=fe.props&&fe.props.onVnodeBeforeUpdate)&&invokeVNodeHook(De,be,fe,Ie),toggleRecurse(B,!0);const Be=renderComponentRoot(B),je=B.subTree;B.subTree=Be,g(je,Be,T(je.el),u(je),B,ce,oe),fe.el=Be.el,Le===null&&updateHOCHostEl(B,Be.el),de&&queuePostRenderEffect(de,ce),(De=fe.props&&fe.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(De,be,fe,Ie),ce)}else{let fe;const{el:ae,props:de}=z,{bm:be,m:Ie,parent:Le}=B,De=isAsyncWrapper(z);if(toggleRecurse(B,!1),be&&invokeArrayFns(be),!De&&(fe=de&&de.onVnodeBeforeMount)&&invokeVNodeHook(fe,Le,z),toggleRecurse(B,!0),ae&&X){const Be=()=>{B.subTree=renderComponentRoot(B),X(ae,B.subTree,B,ce,null)};De?z.type.__asyncLoader().then(()=>!B.isUnmounted&&Be()):Be()}else{const Be=B.subTree=renderComponentRoot(B);g(null,Be,j,Y,B,ce,oe),z.el=Be.el}if(Ie&&queuePostRenderEffect(Ie,ce),!De&&(fe=de&&de.onVnodeMounted)){const Be=z;queuePostRenderEffect(()=>invokeVNodeHook(fe,Le,Be),ce)}(z.shapeFlag&256||Le&&isAsyncWrapper(Le.vnode)&&Le.vnode.shapeFlag&256)&&B.a&&queuePostRenderEffect(B.a,ce),B.isMounted=!0,z=j=Y=null}},ye=B.effect=new ReactiveEffect(Ee,()=>queueJob(ne),B.scope),ne=B.update=()=>ye.run();ne.id=B.uid,toggleRecurse(B,!0),ne()},te=(B,z,j)=>{z.component=B;const Y=B.vnode.props;B.vnode=z,B.next=null,updateProps(B,z.props,Y,j),updateSlots(B,z.children,j),pauseTracking(),flushPreFlushCbs(),resetTracking()},K=(B,z,j,Y,ce,oe,Se,Ee,ye=!1)=>{const ne=B&&B.children,fe=B?B.shapeFlag:0,ae=z.children,{patchFlag:de,shapeFlag:be}=z;if(de>0){if(de&128){se(ne,ae,j,Y,ce,oe,Se,Ee,ye);return}else if(de&256){ue(ne,ae,j,Y,ce,oe,Se,Ee,ye);return}}be&8?(fe&16&&d(ne,ce,oe),ae!==ne&&a(j,ae)):fe&16?be&16?se(ne,ae,j,Y,ce,oe,Se,Ee,ye):d(ne,ce,oe,!0):(fe&8&&a(j,""),be&16&&w(ae,j,Y,ce,oe,Se,Ee,ye))},ue=(B,z,j,Y,ce,oe,Se,Ee,ye)=>{B=B||EMPTY_ARR,z=z||EMPTY_ARR;const ne=B.length,fe=z.length,ae=Math.min(ne,fe);let de;for(de=0;de<ae;de++){const be=z[de]=ye?cloneIfMounted(z[de]):normalizeVNode(z[de]);g(B[de],be,j,null,ce,oe,Se,Ee,ye)}ne>fe?d(B,ce,oe,!0,!1,ae):w(z,j,Y,ce,oe,Se,Ee,ye,ae)},se=(B,z,j,Y,ce,oe,Se,Ee,ye)=>{let ne=0;const fe=z.length;let ae=B.length-1,de=fe-1;for(;ne<=ae&&ne<=de;){const be=B[ne],Ie=z[ne]=ye?cloneIfMounted(z[ne]):normalizeVNode(z[ne]);if(isSameVNodeType(be,Ie))g(be,Ie,j,null,ce,oe,Se,Ee,ye);else break;ne++}for(;ne<=ae&&ne<=de;){const be=B[ae],Ie=z[de]=ye?cloneIfMounted(z[de]):normalizeVNode(z[de]);if(isSameVNodeType(be,Ie))g(be,Ie,j,null,ce,oe,Se,Ee,ye);else break;ae--,de--}if(ne>ae){if(ne<=de){const be=de+1,Ie=be<fe?z[be].el:Y;for(;ne<=de;)g(null,z[ne]=ye?cloneIfMounted(z[ne]):normalizeVNode(z[ne]),j,Ie,ce,oe,Se,Ee,ye),ne++}}else if(ne>de)for(;ne<=ae;)Me(B[ne],ce,oe,!0),ne++;else{const be=ne,Ie=ne,Le=new Map;for(ne=Ie;ne<=de;ne++){const Te=z[ne]=ye?cloneIfMounted(z[ne]):normalizeVNode(z[ne]);Te.key!=null&&Le.set(Te.key,ne)}let De,Be=0;const je=de-Ie+1;let He=!1,qe=0;const Ge=new Array(je);for(ne=0;ne<je;ne++)Ge[ne]=0;for(ne=be;ne<=ae;ne++){const Te=B[ne];if(Be>=je){Me(Te,ce,oe,!0);continue}let U;if(Te.key!=null)U=Le.get(Te.key);else for(De=Ie;De<=de;De++)if(Ge[De-Ie]===0&&isSameVNodeType(Te,z[De])){U=De;break}U===void 0?Me(Te,ce,oe,!0):(Ge[U-Ie]=ne+1,U>=qe?qe=U:He=!0,g(Te,z[U],j,null,ce,oe,Se,Ee,ye),Be++)}const et=He?getSequence(Ge):EMPTY_ARR;for(De=et.length-1,ne=je-1;ne>=0;ne--){const Te=Ie+ne,U=z[Te],J=Te+1<fe?z[Te+1].el:Y;Ge[ne]===0?g(null,U,j,J,ce,oe,Se,Ee,ye):He&&(De<0||ne!==et[De]?Ce(U,j,J,2):De--)}}},Ce=(B,z,j,Y,ce=null)=>{const{el:oe,type:Se,transition:Ee,children:ye,shapeFlag:ne}=B;if(ne&6){Ce(B.component.subTree,z,j,Y);return}if(ne&128){B.suspense.move(z,j,Y);return}if(ne&64){Se.move(B,z,j,D);return}if(Se===Fragment){n(oe,z,j);for(let ae=0;ae<ye.length;ae++)Ce(ye[ae],z,j,Y);n(B.anchor,z,j);return}if(Se===Static){y(B,z,j);return}if(Y!==2&&ne&1&&Ee)if(Y===0)Ee.beforeEnter(oe),n(oe,z,j),queuePostRenderEffect(()=>Ee.enter(oe),ce);else{const{leave:ae,delayLeave:de,afterLeave:be}=Ee,Ie=()=>n(oe,z,j),Le=()=>{ae(oe,()=>{Ie(),be&&be()})};de?de(oe,Ie,Le):Le()}else n(oe,z,j)},Me=(B,z,j,Y=!1,ce=!1)=>{const{type:oe,props:Se,ref:Ee,children:ye,dynamicChildren:ne,shapeFlag:fe,patchFlag:ae,dirs:de}=B;if(Ee!=null&&setRef(Ee,null,j,B,!0),fe&256){z.ctx.deactivate(B);return}const be=fe&1&&de,Ie=!isAsyncWrapper(B);let Le;if(Ie&&(Le=Se&&Se.onVnodeBeforeUnmount)&&invokeVNodeHook(Le,z,B),fe&6)O(B.component,j,Y);else{if(fe&128){B.suspense.unmount(j,Y);return}be&&invokeDirectiveHook(B,null,z,"beforeUnmount"),fe&64?B.type.remove(B,z,j,ce,D,Y):ne&&(oe!==Fragment||ae>0&&ae&64)?d(ne,z,j,!1,!0):(oe===Fragment&&ae&384||!ce&&fe&16)&&d(ye,z,j),Y&&q(B)}(Ie&&(Le=Se&&Se.onVnodeUnmounted)||be)&&queuePostRenderEffect(()=>{Le&&invokeVNodeHook(Le,z,B),be&&invokeDirectiveHook(B,null,z,"unmounted")},j)},q=B=>{const{type:z,el:j,anchor:Y,transition:ce}=B;if(z===Fragment){R(j,Y);return}if(z===Static){A(B);return}const oe=()=>{f(j),ce&&!ce.persisted&&ce.afterLeave&&ce.afterLeave()};if(B.shapeFlag&1&&ce&&!ce.persisted){const{leave:Se,delayLeave:Ee}=ce,ye=()=>Se(j,oe);Ee?Ee(B.el,oe,ye):ye()}else oe()},R=(B,z)=>{let j;for(;B!==z;)j=E(B),f(B),B=j;f(z)},O=(B,z,j)=>{const{bum:Y,scope:ce,update:oe,subTree:Se,um:Ee}=B;Y&&invokeArrayFns(Y),ce.stop(),oe&&(oe.active=!1,Me(Se,B,z,j)),Ee&&queuePostRenderEffect(Ee,z),queuePostRenderEffect(()=>{B.isUnmounted=!0},z),z&&z.pendingBranch&&!z.isUnmounted&&B.asyncDep&&!B.asyncResolved&&B.suspenseId===z.pendingId&&(z.deps--,z.deps===0&&z.resolve())},d=(B,z,j,Y=!1,ce=!1,oe=0)=>{for(let Se=oe;Se<B.length;Se++)Me(B[Se],z,j,Y,ce)},u=B=>B.shapeFlag&6?u(B.component.subTree):B.shapeFlag&128?B.suspense.next():E(B.anchor||B.el),M=(B,z,j)=>{B==null?z._vnode&&Me(z._vnode,null,null,!0):g(z._vnode||null,B,z,null,null,null,j),flushPreFlushCbs(),flushPostFlushCbs(),z._vnode=B},D={p:g,um:Me,m:Ce,r:q,mt:V,mc:w,pc:K,pbc:F,n:u,o:e};let $,X;return t&&([$,X]=t(D)),{render:M,hydrate:$,createApp:createAppAPI(M,$)}}function toggleRecurse({effect:e,update:t},l){e.allowRecurse=t.allowRecurse=l}function traverseStaticChildren(e,t,l=!1){const n=e.children,f=t.children;if(isArray$1(n)&&isArray$1(f))for(let I=0;I<n.length;I++){const k=n[I];let _=f[I];_.shapeFlag&1&&!_.dynamicChildren&&((_.patchFlag<=0||_.patchFlag===32)&&(_=f[I]=cloneIfMounted(f[I]),_.el=k.el),l||traverseStaticChildren(k,_)),_.type===Text&&(_.el=k.el)}}function getSequence(e){const t=e.slice(),l=[0];let n,f,I,k,_;const m=e.length;for(n=0;n<m;n++){const r=e[n];if(r!==0){if(f=l[l.length-1],e[f]<r){t[n]=f,l.push(n);continue}for(I=0,k=l.length-1;I<k;)_=I+k>>1,e[l[_]]<r?I=_+1:k=_;r<e[l[I]]&&(I>0&&(t[n]=l[I-1]),l[I]=n)}}for(I=l.length,k=l[I-1];I-- >0;)l[I]=k,k=t[k];return l}const isTeleport=e=>e.__isTeleport,Fragment=Symbol.for("v-fgt"),Text=Symbol.for("v-txt"),Comment=Symbol.for("v-cmt"),Static=Symbol.for("v-stc"),blockStack=[];let currentBlock=null;function openBlock(e=!1){blockStack.push(currentBlock=e?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(e){isBlockTreeEnabled+=e}function setupBlock(e){return e.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(e),e}function createElementBlock(e,t,l,n,f,I){return setupBlock(createBaseVNode(e,t,l,n,f,I,!0))}function isVNode(e){return e?e.__v_isVNode===!0:!1}function isSameVNodeType(e,t){return e.type===t.type&&e.key===t.key}const InternalObjectKey="__vInternal",normalizeKey=({key:e})=>e??null,normalizeRef=({ref:e,ref_key:t,ref_for:l})=>(typeof e=="number"&&(e=""+e),e!=null?isString(e)||isRef(e)||isFunction(e)?{i:currentRenderingInstance,r:e,k:t,f:!!l}:e:null);function createBaseVNode(e,t=null,l=null,n=0,f=null,I=e===Fragment?0:1,k=!1,_=!1){const m={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&normalizeKey(t),ref:t&&normalizeRef(t),scopeId:currentScopeId,slotScopeIds:null,children:l,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:I,patchFlag:n,dynamicProps:f,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return _?(normalizeChildren(m,l),I&128&&e.normalize(m)):l&&(m.shapeFlag|=isString(l)?8:16),isBlockTreeEnabled>0&&!k&&currentBlock&&(m.patchFlag>0||I&6)&&m.patchFlag!==32&&currentBlock.push(m),m}const createVNode=_createVNode;function _createVNode(e,t=null,l=null,n=0,f=null,I=!1){if((!e||e===NULL_DYNAMIC_COMPONENT)&&(e=Comment),isVNode(e)){const _=cloneVNode(e,t,!0);return l&&normalizeChildren(_,l),isBlockTreeEnabled>0&&!I&&currentBlock&&(_.shapeFlag&6?currentBlock[currentBlock.indexOf(e)]=_:currentBlock.push(_)),_.patchFlag|=-2,_}if(isClassComponent(e)&&(e=e.__vccOpts),t){t=guardReactiveProps(t);let{class:_,style:m}=t;_&&!isString(_)&&(t.class=normalizeClass(_)),isObject(m)&&(isProxy(m)&&!isArray$1(m)&&(m=extend({},m)),t.style=normalizeStyle(m))}const k=isString(e)?1:isSuspense(e)?128:isTeleport(e)?64:isObject(e)?4:isFunction(e)?2:0;return createBaseVNode(e,t,l,n,f,k,I,!0)}function guardReactiveProps(e){return e?isProxy(e)||InternalObjectKey in e?extend({},e):e:null}function cloneVNode(e,t,l=!1){const{props:n,ref:f,patchFlag:I,children:k}=e,_=t?mergeProps(n||{},t):n;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:_,key:_&&normalizeKey(_),ref:t&&t.ref?l&&f?isArray$1(f)?f.concat(normalizeRef(t)):[f,normalizeRef(t)]:normalizeRef(t):f,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:k,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Fragment?I===-1?16:I|16:I,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&cloneVNode(e.ssContent),ssFallback:e.ssFallback&&cloneVNode(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function createTextVNode(e=" ",t=0){return createVNode(Text,null,e,t)}function normalizeVNode(e){return e==null||typeof e=="boolean"?createVNode(Comment):isArray$1(e)?createVNode(Fragment,null,e.slice()):typeof e=="object"?cloneIfMounted(e):createVNode(Text,null,String(e))}function cloneIfMounted(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:cloneVNode(e)}function normalizeChildren(e,t){let l=0;const{shapeFlag:n}=e;if(t==null)t=null;else if(isArray$1(t))l=16;else if(typeof t=="object")if(n&65){const f=t.default;f&&(f._c&&(f._d=!1),normalizeChildren(e,f()),f._c&&(f._d=!0));return}else{l=32;const f=t._;!f&&!(InternalObjectKey in t)?t._ctx=currentRenderingInstance:f===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else isFunction(t)?(t={default:t,_ctx:currentRenderingInstance},l=32):(t=String(t),n&64?(l=16,t=[createTextVNode(t)]):l=8);e.children=t,e.shapeFlag|=l}function mergeProps(...e){const t={};for(let l=0;l<e.length;l++){const n=e[l];for(const f in n)if(f==="class")t.class!==n.class&&(t.class=normalizeClass([t.class,n.class]));else if(f==="style")t.style=normalizeStyle([t.style,n.style]);else if(isOn(f)){const I=t[f],k=n[f];k&&I!==k&&!(isArray$1(I)&&I.includes(k))&&(t[f]=I?[].concat(I,k):k)}else f!==""&&(t[f]=n[f])}return t}function invokeVNodeHook(e,t,l,n=null){callWithAsyncErrorHandling(e,t,7,[l,n])}const emptyAppContext=createAppContext();let uid=0;function createComponentInstance(e,t,l){const n=e.type,f=(t?t.appContext:e.appContext)||emptyAppContext,I={uid:uid++,vnode:e,type:n,parent:t,appContext:f,root:null,next:null,subTree:null,effect:null,update:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(f.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(n,f),emitsOptions:normalizeEmitsOptions(n,f),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:n.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:l,suspenseId:l?l.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return I.ctx={_:I},I.root=t?t.root:I,I.emit=emit.bind(null,I),e.ce&&e.ce(I),I}let currentInstance=null,internalSetCurrentInstance,globalCurrentInstanceSetters,settersKey="__VUE_INSTANCE_SETTERS__";(globalCurrentInstanceSetters=getGlobalThis()[settersKey])||(globalCurrentInstanceSetters=getGlobalThis()[settersKey]=[]),globalCurrentInstanceSetters.push(e=>currentInstance=e),internalSetCurrentInstance=e=>{globalCurrentInstanceSetters.length>1?globalCurrentInstanceSetters.forEach(t=>t(e)):globalCurrentInstanceSetters[0](e)};const setCurrentInstance=e=>{internalSetCurrentInstance(e),e.scope.on()},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),internalSetCurrentInstance(null)};function isStatefulComponent(e){return e.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(e,t=!1){isInSSRComponentSetup=t;const{props:l,children:n}=e.vnode,f=isStatefulComponent(e);initProps(e,l,f,t),initSlots(e,n);const I=f?setupStatefulComponent(e,t):void 0;return isInSSRComponentSetup=!1,I}function setupStatefulComponent(e,t){const l=e.type;e.accessCache=Object.create(null),e.proxy=markRaw(new Proxy(e.ctx,PublicInstanceProxyHandlers));const{setup:n}=l;if(n){const f=e.setupContext=n.length>1?createSetupContext(e):null;setCurrentInstance(e),pauseTracking();const I=callWithErrorHandling(n,e,0,[e.props,f]);if(resetTracking(),unsetCurrentInstance(),isPromise(I)){if(I.then(unsetCurrentInstance,unsetCurrentInstance),t)return I.then(k=>{handleSetupResult(e,k,t)}).catch(k=>{handleError(k,e,0)});e.asyncDep=I}else handleSetupResult(e,I,t)}else finishComponentSetup(e,t)}function handleSetupResult(e,t,l){isFunction(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:isObject(t)&&(e.setupState=proxyRefs(t)),finishComponentSetup(e,l)}let compile;function finishComponentSetup(e,t,l){const n=e.type;if(!e.render){if(!t&&compile&&!n.render){const f=n.template||resolveMergedOptions(e).template;if(f){const{isCustomElement:I,compilerOptions:k}=e.appContext.config,{delimiters:_,compilerOptions:m}=n,r=extend(extend({isCustomElement:I,delimiters:_},k),m);n.render=compile(f,r)}}e.render=n.render||NOOP}setCurrentInstance(e),pauseTracking(),applyOptions(e),resetTracking(),unsetCurrentInstance()}function getAttrsProxy(e){return e.attrsProxy||(e.attrsProxy=new Proxy(e.attrs,{get(t,l){return track(e,"get","$attrs"),t[l]}}))}function createSetupContext(e){const t=l=>{e.exposed=l||{}};return{get attrs(){return getAttrsProxy(e)},slots:e.slots,emit:e.emit,expose:t}}function getExposeProxy(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(proxyRefs(markRaw(e.exposed)),{get(t,l){if(l in t)return t[l];if(l in publicPropertiesMap)return publicPropertiesMap[l](e)},has(t,l){return l in t||l in publicPropertiesMap}}))}function isClassComponent(e){return isFunction(e)&&"__vccOpts"in e}const computed=(e,t)=>computed$1(e,t,isInSSRComponentSetup);function h(e,t,l){const n=arguments.length;return n===2?isObject(t)&&!isArray$1(t)?isVNode(t)?createVNode(e,null,[t]):createVNode(e,t):createVNode(e,null,t):(n>3?l=Array.prototype.slice.call(arguments,2):n===3&&isVNode(l)&&(l=[l]),createVNode(e,t,l))}const ssrContextKey=Symbol.for("v-scx"),useSSRContext=()=>inject(ssrContextKey),version="3.3.4",svgNS="http://www.w3.org/2000/svg",doc=typeof document<"u"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(e,t,l)=>{t.insertBefore(e,l||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,l,n)=>{const f=t?doc.createElementNS(svgNS,e):doc.createElement(e,l?{is:l}:void 0);return e==="select"&&n&&n.multiple!=null&&f.setAttribute("multiple",n.multiple),f},createText:e=>doc.createTextNode(e),createComment:e=>doc.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>doc.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,l,n,f,I){const k=l?l.previousSibling:t.lastChild;if(f&&(f===I||f.nextSibling))for(;t.insertBefore(f.cloneNode(!0),l),!(f===I||!(f=f.nextSibling)););else{templateContainer.innerHTML=n?`<svg>${e}</svg>`:e;const _=templateContainer.content;if(n){const m=_.firstChild;for(;m.firstChild;)_.appendChild(m.firstChild);_.removeChild(m)}t.insertBefore(_,l)}return[k?k.nextSibling:t.firstChild,l?l.previousSibling:t.lastChild]}};function patchClass(e,t,l){const n=e._vtc;n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?e.removeAttribute("class"):l?e.setAttribute("class",t):e.className=t}function patchStyle(e,t,l){const n=e.style,f=isString(l);if(l&&!f){if(t&&!isString(t))for(const I in t)l[I]==null&&setStyle(n,I,"");for(const I in l)setStyle(n,I,l[I])}else{const I=n.display;f?t!==l&&(n.cssText=l):t&&e.removeAttribute("style"),"_vod"in e&&(n.display=I)}}const importantRE=/\s*!important$/;function setStyle(e,t,l){if(isArray$1(l))l.forEach(n=>setStyle(e,t,n));else if(l==null&&(l=""),t.startsWith("--"))e.setProperty(t,l);else{const n=autoPrefix(e,t);importantRE.test(l)?e.setProperty(hyphenate(n),l.replace(importantRE,""),"important"):e[n]=l}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(e,t){const l=prefixCache[t];if(l)return l;let n=camelize(t);if(n!=="filter"&&n in e)return prefixCache[t]=n;n=capitalize(n);for(let f=0;f<prefixes.length;f++){const I=prefixes[f]+n;if(I in e)return prefixCache[t]=I}return t}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(e,t,l,n,f){if(n&&t.startsWith("xlink:"))l==null?e.removeAttributeNS(xlinkNS,t.slice(6,t.length)):e.setAttributeNS(xlinkNS,t,l);else{const I=isSpecialBooleanAttr(t);l==null||I&&!includeBooleanAttr(l)?e.removeAttribute(t):e.setAttribute(t,I?"":l)}}function patchDOMProp(e,t,l,n,f,I,k){if(t==="innerHTML"||t==="textContent"){n&&k(n,f,I),e[t]=l??"";return}const _=e.tagName;if(t==="value"&&_!=="PROGRESS"&&!_.includes("-")){e._value=l;const r=_==="OPTION"?e.getAttribute("value"):e.value,a=l??"";r!==a&&(e.value=a),l==null&&e.removeAttribute(t);return}let m=!1;if(l===""||l==null){const r=typeof e[t];r==="boolean"?l=includeBooleanAttr(l):l==null&&r==="string"?(l="",m=!0):r==="number"&&(l=0,m=!0)}try{e[t]=l}catch{}m&&e.removeAttribute(t)}function addEventListener(e,t,l,n){e.addEventListener(t,l,n)}function removeEventListener(e,t,l,n){e.removeEventListener(t,l,n)}function patchEvent(e,t,l,n,f=null){const I=e._vei||(e._vei={}),k=I[t];if(n&&k)k.value=n;else{const[_,m]=parseName(t);if(n){const r=I[t]=createInvoker(n,f);addEventListener(e,_,r,m)}else k&&(removeEventListener(e,_,k,m),I[t]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(e){let t;if(optionsModifierRE.test(e)){t={};let n;for(;n=e.match(optionsModifierRE);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):hyphenate(e.slice(2)),t]}let cachedNow=0;const p=Promise.resolve(),getNow=()=>cachedNow||(p.then(()=>cachedNow=0),cachedNow=Date.now());function createInvoker(e,t){const l=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=l.attached)return;callWithAsyncErrorHandling(patchStopImmediatePropagation(n,l.value),t,5,[n])};return l.value=e,l.attached=getNow(),l}function patchStopImmediatePropagation(e,t){if(isArray$1(t)){const l=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{l.call(e),e._stopped=!0},t.map(n=>f=>!f._stopped&&n&&n(f))}else return t}const nativeOnRE=/^on[a-z]/,patchProp=(e,t,l,n,f=!1,I,k,_,m)=>{t==="class"?patchClass(e,n,f):t==="style"?patchStyle(e,l,n):isOn(t)?isModelListener(t)||patchEvent(e,t,l,n,k):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):shouldSetAsProp(e,t,n,f))?patchDOMProp(e,t,n,I,k,_,m):(t==="true-value"?e._trueValue=n:t==="false-value"&&(e._falseValue=n),patchAttr(e,t,n,f))};function shouldSetAsProp(e,t,l,n){return n?!!(t==="innerHTML"||t==="textContent"||t in e&&nativeOnRE.test(t)&&isFunction(l)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||nativeOnRE.test(t)&&isString(l)?!1:t in e}const rendererOptions=extend({patchProp},nodeOps);let renderer;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}const createApp=(...e)=>{const t=ensureRenderer().createApp(...e),{mount:l}=t;return t.mount=n=>{const f=normalizeContainer(n);if(!f)return;const I=t._component;!isFunction(I)&&!I.render&&!I.template&&(I.template=f.innerHTML),f.innerHTML="";const k=l(f,!1,f instanceof SVGElement);return f instanceof Element&&(f.removeAttribute("v-cloak"),f.setAttribute("data-v-app","")),k},t};function normalizeContainer(e){return isString(e)?document.querySelector(e):e}/*!
  * vue-router v4.2.4
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const isBrowser=typeof window<"u";function isESModule(e){return e.__esModule||e[Symbol.toStringTag]==="Module"}const assign=Object.assign;function applyToParams(e,t){const l={};for(const n in t){const f=t[n];l[n]=isArray(f)?f.map(e):e(f)}return l}const noop=()=>{},isArray=Array.isArray,TRAILING_SLASH_RE=/\/$/,removeTrailingSlash=e=>e.replace(TRAILING_SLASH_RE,"");function parseURL(e,t,l="/"){let n,f={},I="",k="";const _=t.indexOf("#");let m=t.indexOf("?");return _<m&&_>=0&&(m=-1),m>-1&&(n=t.slice(0,m),I=t.slice(m+1,_>-1?_:t.length),f=e(I)),_>-1&&(n=n||t.slice(0,_),k=t.slice(_,t.length)),n=resolveRelativePath(n??t,l),{fullPath:n+(I&&"?")+I+k,path:n,query:f,hash:k}}function stringifyURL(e,t){const l=t.query?e(t.query):"";return t.path+(l&&"?")+l+(t.hash||"")}function stripBase(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function isSameRouteLocation(e,t,l){const n=t.matched.length-1,f=l.matched.length-1;return n>-1&&n===f&&isSameRouteRecord(t.matched[n],l.matched[f])&&isSameRouteLocationParams(t.params,l.params)&&e(t.query)===e(l.query)&&t.hash===l.hash}function isSameRouteRecord(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function isSameRouteLocationParams(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const l in e)if(!isSameRouteLocationParamsValue(e[l],t[l]))return!1;return!0}function isSameRouteLocationParamsValue(e,t){return isArray(e)?isEquivalentArray(e,t):isArray(t)?isEquivalentArray(t,e):e===t}function isEquivalentArray(e,t){return isArray(t)?e.length===t.length&&e.every((l,n)=>l===t[n]):e.length===1&&e[0]===t}function resolveRelativePath(e,t){if(e.startsWith("/"))return e;if(!e)return t;const l=t.split("/"),n=e.split("/"),f=n[n.length-1];(f===".."||f===".")&&n.push("");let I=l.length-1,k,_;for(k=0;k<n.length;k++)if(_=n[k],_!==".")if(_==="..")I>1&&I--;else break;return l.slice(0,I).join("/")+"/"+n.slice(k-(k===n.length?1:0)).join("/")}var NavigationType;(function(e){e.pop="pop",e.push="push"})(NavigationType||(NavigationType={}));var NavigationDirection;(function(e){e.back="back",e.forward="forward",e.unknown=""})(NavigationDirection||(NavigationDirection={}));function normalizeBase(e){if(!e)if(isBrowser){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),removeTrailingSlash(e)}const BEFORE_HASH_RE=/^[^#]+#/;function createHref(e,t){return e.replace(BEFORE_HASH_RE,"#")+t}function getElementPosition(e,t){const l=document.documentElement.getBoundingClientRect(),n=e.getBoundingClientRect();return{behavior:t.behavior,left:n.left-l.left-(t.left||0),top:n.top-l.top-(t.top||0)}}const computeScrollPosition=()=>({left:window.pageXOffset,top:window.pageYOffset});function scrollToPosition(e){let t;if("el"in e){const l=e.el,n=typeof l=="string"&&l.startsWith("#"),f=typeof l=="string"?n?document.getElementById(l.slice(1)):document.querySelector(l):l;if(!f)return;t=getElementPosition(f,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.pageXOffset,t.top!=null?t.top:window.pageYOffset)}function getScrollKey(e,t){return(history.state?history.state.position-t:-1)+e}const scrollPositions=new Map;function saveScrollPosition(e,t){scrollPositions.set(e,t)}function getSavedScrollPosition(e){const t=scrollPositions.get(e);return scrollPositions.delete(e),t}let createBaseLocation=()=>location.protocol+"//"+location.host;function createCurrentLocation(e,t){const{pathname:l,search:n,hash:f}=t,I=e.indexOf("#");if(I>-1){let _=f.includes(e.slice(I))?e.slice(I).length:1,m=f.slice(_);return m[0]!=="/"&&(m="/"+m),stripBase(m,"")}return stripBase(l,e)+n+f}function useHistoryListeners(e,t,l,n){let f=[],I=[],k=null;const _=({state:E})=>{const C=createCurrentLocation(e,location),s=l.value,g=t.value;let b=0;if(E){if(l.value=C,t.value=E,k&&k===s){k=null;return}b=g?E.position-g.position:0}else n(C);f.forEach(P=>{P(l.value,s,{delta:b,type:NavigationType.pop,direction:b?b>0?NavigationDirection.forward:NavigationDirection.back:NavigationDirection.unknown})})};function m(){k=l.value}function r(E){f.push(E);const C=()=>{const s=f.indexOf(E);s>-1&&f.splice(s,1)};return I.push(C),C}function a(){const{history:E}=window;E.state&&E.replaceState(assign({},E.state,{scroll:computeScrollPosition()}),"")}function T(){for(const E of I)E();I=[],window.removeEventListener("popstate",_),window.removeEventListener("beforeunload",a)}return window.addEventListener("popstate",_),window.addEventListener("beforeunload",a,{passive:!0}),{pauseListeners:m,listen:r,destroy:T}}function buildState(e,t,l,n=!1,f=!1){return{back:e,current:t,forward:l,replaced:n,position:window.history.length,scroll:f?computeScrollPosition():null}}function useHistoryStateNavigation(e){const{history:t,location:l}=window,n={value:createCurrentLocation(e,l)},f={value:t.state};f.value||I(n.value,{back:null,current:n.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function I(m,r,a){const T=e.indexOf("#"),E=T>-1?(l.host&&document.querySelector("base")?e:e.slice(T))+m:createBaseLocation()+e+m;try{t[a?"replaceState":"pushState"](r,"",E),f.value=r}catch(C){console.error(C),l[a?"replace":"assign"](E)}}function k(m,r){const a=assign({},t.state,buildState(f.value.back,m,f.value.forward,!0),r,{position:f.value.position});I(m,a,!0),n.value=m}function _(m,r){const a=assign({},f.value,t.state,{forward:m,scroll:computeScrollPosition()});I(a.current,a,!0);const T=assign({},buildState(n.value,m,null),{position:a.position+1},r);I(m,T,!1),n.value=m}return{location:n,state:f,push:_,replace:k}}function createWebHistory(e){e=normalizeBase(e);const t=useHistoryStateNavigation(e),l=useHistoryListeners(e,t.state,t.location,t.replace);function n(I,k=!0){k||l.pauseListeners(),history.go(I)}const f=assign({location:"",base:e,go:n,createHref:createHref.bind(null,e)},t,l);return Object.defineProperty(f,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(f,"state",{enumerable:!0,get:()=>t.state.value}),f}function createWebHashHistory(e){return e=location.host?e||location.pathname+location.search:"",e.includes("#")||(e+="#"),createWebHistory(e)}function isRouteLocation(e){return typeof e=="string"||e&&typeof e=="object"}function isRouteName(e){return typeof e=="string"||typeof e=="symbol"}const START_LOCATION_NORMALIZED={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},NavigationFailureSymbol=Symbol("");var NavigationFailureType;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(NavigationFailureType||(NavigationFailureType={}));function createRouterError(e,t){return assign(new Error,{type:e,[NavigationFailureSymbol]:!0},t)}function isNavigationFailure(e,t){return e instanceof Error&&NavigationFailureSymbol in e&&(t==null||!!(e.type&t))}const BASE_PARAM_PATTERN="[^/]+?",BASE_PATH_PARSER_OPTIONS={sensitive:!1,strict:!1,start:!0,end:!0},REGEX_CHARS_RE=/[.+*?^${}()[\]/\\]/g;function tokensToParser(e,t){const l=assign({},BASE_PATH_PARSER_OPTIONS,t),n=[];let f=l.start?"^":"";const I=[];for(const r of e){const a=r.length?[]:[90];l.strict&&!r.length&&(f+="/");for(let T=0;T<r.length;T++){const E=r[T];let C=40+(l.sensitive?.25:0);if(E.type===0)T||(f+="/"),f+=E.value.replace(REGEX_CHARS_RE,"\\$&"),C+=40;else if(E.type===1){const{value:s,repeatable:g,optional:b,regexp:P}=E;I.push({name:s,repeatable:g,optional:b});const x=P||BASE_PARAM_PATTERN;if(x!==BASE_PARAM_PATTERN){C+=10;try{new RegExp(`(${x})`)}catch(A){throw new Error(`Invalid custom RegExp for param "${s}" (${x}): `+A.message)}}let y=g?`((?:${x})(?:/(?:${x}))*)`:`(${x})`;T||(y=b&&r.length<2?`(?:/${y})`:"/"+y),b&&(y+="?"),f+=y,C+=20,b&&(C+=-8),g&&(C+=-20),x===".*"&&(C+=-50)}a.push(C)}n.push(a)}if(l.strict&&l.end){const r=n.length-1;n[r][n[r].length-1]+=.7000000000000001}l.strict||(f+="/?"),l.end?f+="$":l.strict&&(f+="(?:/|$)");const k=new RegExp(f,l.sensitive?"":"i");function _(r){const a=r.match(k),T={};if(!a)return null;for(let E=1;E<a.length;E++){const C=a[E]||"",s=I[E-1];T[s.name]=C&&s.repeatable?C.split("/"):C}return T}function m(r){let a="",T=!1;for(const E of e){(!T||!a.endsWith("/"))&&(a+="/"),T=!1;for(const C of E)if(C.type===0)a+=C.value;else if(C.type===1){const{value:s,repeatable:g,optional:b}=C,P=s in r?r[s]:"";if(isArray(P)&&!g)throw new Error(`Provided param "${s}" is an array but it is not repeatable (* or + modifiers)`);const x=isArray(P)?P.join("/"):P;if(!x)if(b)E.length<2&&(a.endsWith("/")?a=a.slice(0,-1):T=!0);else throw new Error(`Missing required param "${s}"`);a+=x}}return a||"/"}return{re:k,score:n,keys:I,parse:_,stringify:m}}function compareScoreArray(e,t){let l=0;for(;l<e.length&&l<t.length;){const n=t[l]-e[l];if(n)return n;l++}return e.length<t.length?e.length===1&&e[0]===40+40?-1:1:e.length>t.length?t.length===1&&t[0]===40+40?1:-1:0}function comparePathParserScore(e,t){let l=0;const n=e.score,f=t.score;for(;l<n.length&&l<f.length;){const I=compareScoreArray(n[l],f[l]);if(I)return I;l++}if(Math.abs(f.length-n.length)===1){if(isLastScoreNegative(n))return 1;if(isLastScoreNegative(f))return-1}return f.length-n.length}function isLastScoreNegative(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const ROOT_TOKEN={type:0,value:""},VALID_PARAM_RE=/[a-zA-Z0-9_]/;function tokenizePath(e){if(!e)return[[]];if(e==="/")return[[ROOT_TOKEN]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(C){throw new Error(`ERR (${l})/"${r}": ${C}`)}let l=0,n=l;const f=[];let I;function k(){I&&f.push(I),I=[]}let _=0,m,r="",a="";function T(){r&&(l===0?I.push({type:0,value:r}):l===1||l===2||l===3?(I.length>1&&(m==="*"||m==="+")&&t(`A repeatable param (${r}) must be alone in its segment. eg: '/:ids+.`),I.push({type:1,value:r,regexp:a,repeatable:m==="*"||m==="+",optional:m==="*"||m==="?"})):t("Invalid state to consume buffer"),r="")}function E(){r+=m}for(;_<e.length;){if(m=e[_++],m==="\\"&&l!==2){n=l,l=4;continue}switch(l){case 0:m==="/"?(r&&T(),k()):m===":"?(T(),l=1):E();break;case 4:E(),l=n;break;case 1:m==="("?l=2:VALID_PARAM_RE.test(m)?E():(T(),l=0,m!=="*"&&m!=="?"&&m!=="+"&&_--);break;case 2:m===")"?a[a.length-1]=="\\"?a=a.slice(0,-1)+m:l=3:a+=m;break;case 3:T(),l=0,m!=="*"&&m!=="?"&&m!=="+"&&_--,a="";break;default:t("Unknown state");break}}return l===2&&t(`Unfinished custom RegExp for param "${r}"`),T(),k(),f}function createRouteRecordMatcher(e,t,l){const n=tokensToParser(tokenizePath(e.path),l),f=assign(n,{record:e,parent:t,children:[],alias:[]});return t&&!f.record.aliasOf==!t.record.aliasOf&&t.children.push(f),f}function createRouterMatcher(e,t){const l=[],n=new Map;t=mergeOptions({strict:!1,end:!0,sensitive:!1},t);function f(a){return n.get(a)}function I(a,T,E){const C=!E,s=normalizeRouteRecord(a);s.aliasOf=E&&E.record;const g=mergeOptions(t,a),b=[s];if("alias"in a){const y=typeof a.alias=="string"?[a.alias]:a.alias;for(const A of y)b.push(assign({},s,{components:E?E.record.components:s.components,path:A,aliasOf:E?E.record:s}))}let P,x;for(const y of b){const{path:A}=y;if(T&&A[0]!=="/"){const o=T.record.path,c=o[o.length-1]==="/"?"":"/";y.path=T.record.path+(A&&c+A)}if(P=createRouteRecordMatcher(y,T,g),E?E.alias.push(P):(x=x||P,x!==P&&x.alias.push(P),C&&a.name&&!isAliasRecord(P)&&k(a.name)),s.children){const o=s.children;for(let c=0;c<o.length;c++)I(o[c],P,E&&E.children[c])}E=E||P,(P.record.components&&Object.keys(P.record.components).length||P.record.name||P.record.redirect)&&m(P)}return x?()=>{k(x)}:noop}function k(a){if(isRouteName(a)){const T=n.get(a);T&&(n.delete(a),l.splice(l.indexOf(T),1),T.children.forEach(k),T.alias.forEach(k))}else{const T=l.indexOf(a);T>-1&&(l.splice(T,1),a.record.name&&n.delete(a.record.name),a.children.forEach(k),a.alias.forEach(k))}}function _(){return l}function m(a){let T=0;for(;T<l.length&&comparePathParserScore(a,l[T])>=0&&(a.record.path!==l[T].record.path||!isRecordChildOf(a,l[T]));)T++;l.splice(T,0,a),a.record.name&&!isAliasRecord(a)&&n.set(a.record.name,a)}function r(a,T){let E,C={},s,g;if("name"in a&&a.name){if(E=n.get(a.name),!E)throw createRouterError(1,{location:a});g=E.record.name,C=assign(paramsFromLocation(T.params,E.keys.filter(x=>!x.optional).map(x=>x.name)),a.params&&paramsFromLocation(a.params,E.keys.map(x=>x.name))),s=E.stringify(C)}else if("path"in a)s=a.path,E=l.find(x=>x.re.test(s)),E&&(C=E.parse(s),g=E.record.name);else{if(E=T.name?n.get(T.name):l.find(x=>x.re.test(T.path)),!E)throw createRouterError(1,{location:a,currentLocation:T});g=E.record.name,C=assign({},T.params,a.params),s=E.stringify(C)}const b=[];let P=E;for(;P;)b.unshift(P.record),P=P.parent;return{name:g,path:s,params:C,matched:b,meta:mergeMetaFields(b)}}return e.forEach(a=>I(a)),{addRoute:I,resolve:r,removeRoute:k,getRoutes:_,getRecordMatcher:f}}function paramsFromLocation(e,t){const l={};for(const n of t)n in e&&(l[n]=e[n]);return l}function normalizeRouteRecord(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:normalizeRecordProps(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function normalizeRecordProps(e){const t={},l=e.props||!1;if("component"in e)t.default=l;else for(const n in e.components)t[n]=typeof l=="object"?l[n]:l;return t}function isAliasRecord(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function mergeMetaFields(e){return e.reduce((t,l)=>assign(t,l.meta),{})}function mergeOptions(e,t){const l={};for(const n in e)l[n]=n in t?t[n]:e[n];return l}function isRecordChildOf(e,t){return t.children.some(l=>l===e||isRecordChildOf(e,l))}const HASH_RE=/#/g,AMPERSAND_RE=/&/g,SLASH_RE=/\//g,EQUAL_RE=/=/g,IM_RE=/\?/g,PLUS_RE=/\+/g,ENC_BRACKET_OPEN_RE=/%5B/g,ENC_BRACKET_CLOSE_RE=/%5D/g,ENC_CARET_RE=/%5E/g,ENC_BACKTICK_RE=/%60/g,ENC_CURLY_OPEN_RE=/%7B/g,ENC_PIPE_RE=/%7C/g,ENC_CURLY_CLOSE_RE=/%7D/g,ENC_SPACE_RE=/%20/g;function commonEncode(e){return encodeURI(""+e).replace(ENC_PIPE_RE,"|").replace(ENC_BRACKET_OPEN_RE,"[").replace(ENC_BRACKET_CLOSE_RE,"]")}function encodeHash(e){return commonEncode(e).replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryValue(e){return commonEncode(e).replace(PLUS_RE,"%2B").replace(ENC_SPACE_RE,"+").replace(HASH_RE,"%23").replace(AMPERSAND_RE,"%26").replace(ENC_BACKTICK_RE,"`").replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryKey(e){return encodeQueryValue(e).replace(EQUAL_RE,"%3D")}function encodePath(e){return commonEncode(e).replace(HASH_RE,"%23").replace(IM_RE,"%3F")}function encodeParam(e){return e==null?"":encodePath(e).replace(SLASH_RE,"%2F")}function decode(e){try{return decodeURIComponent(""+e)}catch{}return""+e}function parseQuery(e){const t={};if(e===""||e==="?")return t;const n=(e[0]==="?"?e.slice(1):e).split("&");for(let f=0;f<n.length;++f){const I=n[f].replace(PLUS_RE," "),k=I.indexOf("="),_=decode(k<0?I:I.slice(0,k)),m=k<0?null:decode(I.slice(k+1));if(_ in t){let r=t[_];isArray(r)||(r=t[_]=[r]),r.push(m)}else t[_]=m}return t}function stringifyQuery(e){let t="";for(let l in e){const n=e[l];if(l=encodeQueryKey(l),n==null){n!==void 0&&(t+=(t.length?"&":"")+l);continue}(isArray(n)?n.map(I=>I&&encodeQueryValue(I)):[n&&encodeQueryValue(n)]).forEach(I=>{I!==void 0&&(t+=(t.length?"&":"")+l,I!=null&&(t+="="+I))})}return t}function normalizeQuery(e){const t={};for(const l in e){const n=e[l];n!==void 0&&(t[l]=isArray(n)?n.map(f=>f==null?null:""+f):n==null?n:""+n)}return t}const matchedRouteKey=Symbol(""),viewDepthKey=Symbol(""),routerKey=Symbol(""),routeLocationKey=Symbol(""),routerViewLocationKey=Symbol("");function useCallbacks(){let e=[];function t(n){return e.push(n),()=>{const f=e.indexOf(n);f>-1&&e.splice(f,1)}}function l(){e=[]}return{add:t,list:()=>e.slice(),reset:l}}function guardToPromiseFn(e,t,l,n,f){const I=n&&(n.enterCallbacks[f]=n.enterCallbacks[f]||[]);return()=>new Promise((k,_)=>{const m=T=>{T===!1?_(createRouterError(4,{from:l,to:t})):T instanceof Error?_(T):isRouteLocation(T)?_(createRouterError(2,{from:t,to:T})):(I&&n.enterCallbacks[f]===I&&typeof T=="function"&&I.push(T),k())},r=e.call(n&&n.instances[f],t,l,m);let a=Promise.resolve(r);e.length<3&&(a=a.then(m)),a.catch(T=>_(T))})}function extractComponentsGuards(e,t,l,n){const f=[];for(const I of e)for(const k in I.components){let _=I.components[k];if(!(t!=="beforeRouteEnter"&&!I.instances[k]))if(isRouteComponent(_)){const r=(_.__vccOpts||_)[t];r&&f.push(guardToPromiseFn(r,l,n,I,k))}else{let m=_();f.push(()=>m.then(r=>{if(!r)return Promise.reject(new Error(`Couldn't resolve component "${k}" at "${I.path}"`));const a=isESModule(r)?r.default:r;I.components[k]=a;const E=(a.__vccOpts||a)[t];return E&&guardToPromiseFn(E,l,n,I,k)()}))}}return f}function isRouteComponent(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function useLink(e){const t=inject(routerKey),l=inject(routeLocationKey),n=computed(()=>t.resolve(unref(e.to))),f=computed(()=>{const{matched:m}=n.value,{length:r}=m,a=m[r-1],T=l.matched;if(!a||!T.length)return-1;const E=T.findIndex(isSameRouteRecord.bind(null,a));if(E>-1)return E;const C=getOriginalPath(m[r-2]);return r>1&&getOriginalPath(a)===C&&T[T.length-1].path!==C?T.findIndex(isSameRouteRecord.bind(null,m[r-2])):E}),I=computed(()=>f.value>-1&&includesParams(l.params,n.value.params)),k=computed(()=>f.value>-1&&f.value===l.matched.length-1&&isSameRouteLocationParams(l.params,n.value.params));function _(m={}){return guardEvent(m)?t[unref(e.replace)?"replace":"push"](unref(e.to)).catch(noop):Promise.resolve()}return{route:n,href:computed(()=>n.value.href),isActive:I,isExactActive:k,navigate:_}}const RouterLinkImpl=defineComponent({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink,setup(e,{slots:t}){const l=reactive(useLink(e)),{options:n}=inject(routerKey),f=computed(()=>({[getLinkClass(e.activeClass,n.linkActiveClass,"router-link-active")]:l.isActive,[getLinkClass(e.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:l.isExactActive}));return()=>{const I=t.default&&t.default(l);return e.custom?I:h("a",{"aria-current":l.isExactActive?e.ariaCurrentValue:null,href:l.href,onClick:l.navigate,class:f.value},I)}}}),RouterLink=RouterLinkImpl;function guardEvent(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function includesParams(e,t){for(const l in t){const n=t[l],f=e[l];if(typeof n=="string"){if(n!==f)return!1}else if(!isArray(f)||f.length!==n.length||n.some((I,k)=>I!==f[k]))return!1}return!0}function getOriginalPath(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const getLinkClass=(e,t,l)=>e??t??l,RouterViewImpl=defineComponent({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:l}){const n=inject(routerViewLocationKey),f=computed(()=>e.route||n.value),I=inject(viewDepthKey,0),k=computed(()=>{let r=unref(I);const{matched:a}=f.value;let T;for(;(T=a[r])&&!T.components;)r++;return r}),_=computed(()=>f.value.matched[k.value]);provide(viewDepthKey,computed(()=>k.value+1)),provide(matchedRouteKey,_),provide(routerViewLocationKey,f);const m=ref();return watch(()=>[m.value,_.value,e.name],([r,a,T],[E,C,s])=>{a&&(a.instances[T]=r,C&&C!==a&&r&&r===E&&(a.leaveGuards.size||(a.leaveGuards=C.leaveGuards),a.updateGuards.size||(a.updateGuards=C.updateGuards))),r&&a&&(!C||!isSameRouteRecord(a,C)||!E)&&(a.enterCallbacks[T]||[]).forEach(g=>g(r))},{flush:"post"}),()=>{const r=f.value,a=e.name,T=_.value,E=T&&T.components[a];if(!E)return normalizeSlot(l.default,{Component:E,route:r});const C=T.props[a],s=C?C===!0?r.params:typeof C=="function"?C(r):C:null,b=h(E,assign({},s,t,{onVnodeUnmounted:P=>{P.component.isUnmounted&&(T.instances[a]=null)},ref:m}));return normalizeSlot(l.default,{Component:b,route:r})||b}}});function normalizeSlot(e,t){if(!e)return null;const l=e(t);return l.length===1?l[0]:l}const RouterView=RouterViewImpl;function createRouter(e){const t=createRouterMatcher(e.routes,e),l=e.parseQuery||parseQuery,n=e.stringifyQuery||stringifyQuery,f=e.history,I=useCallbacks(),k=useCallbacks(),_=useCallbacks(),m=shallowRef(START_LOCATION_NORMALIZED);let r=START_LOCATION_NORMALIZED;isBrowser&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const a=applyToParams.bind(null,u=>""+u),T=applyToParams.bind(null,encodeParam),E=applyToParams.bind(null,decode);function C(u,M){let D,$;return isRouteName(u)?(D=t.getRecordMatcher(u),$=M):$=u,t.addRoute($,D)}function s(u){const M=t.getRecordMatcher(u);M&&t.removeRoute(M)}function g(){return t.getRoutes().map(u=>u.record)}function b(u){return!!t.getRecordMatcher(u)}function P(u,M){if(M=assign({},M||m.value),typeof u=="string"){const j=parseURL(l,u,M.path),Y=t.resolve({path:j.path},M),ce=f.createHref(j.fullPath);return assign(j,Y,{params:E(Y.params),hash:decode(j.hash),redirectedFrom:void 0,href:ce})}let D;if("path"in u)D=assign({},u,{path:parseURL(l,u.path,M.path).path});else{const j=assign({},u.params);for(const Y in j)j[Y]==null&&delete j[Y];D=assign({},u,{params:T(j)}),M.params=T(M.params)}const $=t.resolve(D,M),X=u.hash||"";$.params=a(E($.params));const B=stringifyURL(n,assign({},u,{hash:encodeHash(X),path:$.path})),z=f.createHref(B);return assign({fullPath:B,hash:X,query:n===stringifyQuery?normalizeQuery(u.query):u.query||{}},$,{redirectedFrom:void 0,href:z})}function x(u){return typeof u=="string"?parseURL(l,u,m.value.path):assign({},u)}function y(u,M){if(r!==u)return createRouterError(8,{from:M,to:u})}function A(u){return S(u)}function o(u){return A(assign(x(u),{replace:!0}))}function c(u){const M=u.matched[u.matched.length-1];if(M&&M.redirect){const{redirect:D}=M;let $=typeof D=="function"?D(u):D;return typeof $=="string"&&($=$.includes("?")||$.includes("#")?$=x($):{path:$},$.params={}),assign({query:u.query,hash:u.hash,params:"path"in $?{}:u.params},$)}}function S(u,M){const D=r=P(u),$=m.value,X=u.state,B=u.force,z=u.replace===!0,j=c(D);if(j)return S(assign(x(j),{state:typeof j=="object"?assign({},X,j.state):X,force:B,replace:z}),M||D);const Y=D;Y.redirectedFrom=M;let ce;return!B&&isSameRouteLocation(n,$,D)&&(ce=createRouterError(16,{to:Y,from:$}),Ce($,$,!0,!1)),(ce?Promise.resolve(ce):F(Y,$)).catch(oe=>isNavigationFailure(oe)?isNavigationFailure(oe,2)?oe:se(oe):K(oe,Y,$)).then(oe=>{if(oe){if(isNavigationFailure(oe,2))return S(assign({replace:z},x(oe.to),{state:typeof oe.to=="object"?assign({},X,oe.to.state):X,force:B}),M||Y)}else oe=G(Y,$,!0,z,X);return N(Y,$,oe),oe})}function w(u,M){const D=y(u,M);return D?Promise.reject(D):Promise.resolve()}function v(u){const M=R.values().next().value;return M&&typeof M.runWithContext=="function"?M.runWithContext(u):u()}function F(u,M){let D;const[$,X,B]=extractChangingRecords(u,M);D=extractComponentsGuards($.reverse(),"beforeRouteLeave",u,M);for(const j of $)j.leaveGuards.forEach(Y=>{D.push(guardToPromiseFn(Y,u,M))});const z=w.bind(null,u,M);return D.push(z),d(D).then(()=>{D=[];for(const j of I.list())D.push(guardToPromiseFn(j,u,M));return D.push(z),d(D)}).then(()=>{D=extractComponentsGuards(X,"beforeRouteUpdate",u,M);for(const j of X)j.updateGuards.forEach(Y=>{D.push(guardToPromiseFn(Y,u,M))});return D.push(z),d(D)}).then(()=>{D=[];for(const j of B)if(j.beforeEnter)if(isArray(j.beforeEnter))for(const Y of j.beforeEnter)D.push(guardToPromiseFn(Y,u,M));else D.push(guardToPromiseFn(j.beforeEnter,u,M));return D.push(z),d(D)}).then(()=>(u.matched.forEach(j=>j.enterCallbacks={}),D=extractComponentsGuards(B,"beforeRouteEnter",u,M),D.push(z),d(D))).then(()=>{D=[];for(const j of k.list())D.push(guardToPromiseFn(j,u,M));return D.push(z),d(D)}).catch(j=>isNavigationFailure(j,8)?j:Promise.reject(j))}function N(u,M,D){_.list().forEach($=>v(()=>$(u,M,D)))}function G(u,M,D,$,X){const B=y(u,M);if(B)return B;const z=M===START_LOCATION_NORMALIZED,j=isBrowser?history.state:{};D&&($||z?f.replace(u.fullPath,assign({scroll:z&&j&&j.scroll},X)):f.push(u.fullPath,X)),m.value=u,Ce(u,M,D,z),se()}let le;function V(){le||(le=f.listen((u,M,D)=>{if(!O.listening)return;const $=P(u),X=c($);if(X){S(assign(X,{replace:!0}),$).catch(noop);return}r=$;const B=m.value;isBrowser&&saveScrollPosition(getScrollKey(B.fullPath,D.delta),computeScrollPosition()),F($,B).catch(z=>isNavigationFailure(z,12)?z:isNavigationFailure(z,2)?(S(z.to,$).then(j=>{isNavigationFailure(j,20)&&!D.delta&&D.type===NavigationType.pop&&f.go(-1,!1)}).catch(noop),Promise.reject()):(D.delta&&f.go(-D.delta,!1),K(z,$,B))).then(z=>{z=z||G($,B,!1),z&&(D.delta&&!isNavigationFailure(z,8)?f.go(-D.delta,!1):D.type===NavigationType.pop&&isNavigationFailure(z,20)&&f.go(-1,!1)),N($,B,z)}).catch(noop)}))}let Z=useCallbacks(),re=useCallbacks(),te;function K(u,M,D){se(u);const $=re.list();return $.length?$.forEach(X=>X(u,M,D)):console.error(u),Promise.reject(u)}function ue(){return te&&m.value!==START_LOCATION_NORMALIZED?Promise.resolve():new Promise((u,M)=>{Z.add([u,M])})}function se(u){return te||(te=!u,V(),Z.list().forEach(([M,D])=>u?D(u):M()),Z.reset()),u}function Ce(u,M,D,$){const{scrollBehavior:X}=e;if(!isBrowser||!X)return Promise.resolve();const B=!D&&getSavedScrollPosition(getScrollKey(u.fullPath,0))||($||!D)&&history.state&&history.state.scroll||null;return nextTick().then(()=>X(u,M,B)).then(z=>z&&scrollToPosition(z)).catch(z=>K(z,u,M))}const Me=u=>f.go(u);let q;const R=new Set,O={currentRoute:m,listening:!0,addRoute:C,removeRoute:s,hasRoute:b,getRoutes:g,resolve:P,options:e,push:A,replace:o,go:Me,back:()=>Me(-1),forward:()=>Me(1),beforeEach:I.add,beforeResolve:k.add,afterEach:_.add,onError:re.add,isReady:ue,install(u){const M=this;u.component("RouterLink",RouterLink),u.component("RouterView",RouterView),u.config.globalProperties.$router=M,Object.defineProperty(u.config.globalProperties,"$route",{enumerable:!0,get:()=>unref(m)}),isBrowser&&!q&&m.value===START_LOCATION_NORMALIZED&&(q=!0,A(f.location).catch(X=>{}));const D={};for(const X in START_LOCATION_NORMALIZED)Object.defineProperty(D,X,{get:()=>m.value[X],enumerable:!0});u.provide(routerKey,M),u.provide(routeLocationKey,shallowReactive(D)),u.provide(routerViewLocationKey,m);const $=u.unmount;R.add(u),u.unmount=function(){R.delete(u),R.size<1&&(r=START_LOCATION_NORMALIZED,le&&le(),le=null,m.value=START_LOCATION_NORMALIZED,q=!1,te=!1),$()}}};function d(u){return u.reduce((M,D)=>M.then(()=>v(D)),Promise.resolve())}return O}function extractChangingRecords(e,t){const l=[],n=[],f=[],I=Math.max(t.matched.length,e.matched.length);for(let k=0;k<I;k++){const _=t.matched[k];_&&(e.matched.find(r=>isSameRouteRecord(r,_))?n.push(_):l.push(_));const m=e.matched[k];m&&(t.matched.find(r=>isSameRouteRecord(r,m))||f.push(m))}return[l,n,f]}function useRoute(){return inject(routeLocationKey)}const App_vue_vue_type_style_index_0_scoped_4fecbfb6_lang="",_export_sfc=(e,t)=>{const l=e.__vccOpts||e;for(const[n,f]of t)l[n]=f;return l},_sfc_main$2={__name:"App",setup(e){const t=useRoute();return console.log("route",t),(l,n)=>(openBlock(),createElementBlock(Fragment,null,[createBaseVNode("aside",null,[createBaseVNode("nav",null,[createVNode(unref(RouterLink),{class:normalizeClass(["nav-link",{active:unref(t).path==="/custom-toolbar"}]),to:"/custom-toolbar"},{default:withCtx(()=>[createTextVNode("Custom Toolbar")]),_:1},8,["class"]),createVNode(unref(RouterLink),{class:normalizeClass(["nav-link",{active:unref(t).path==="/multiple-pdf-files"}]),to:"/multiple-pdf-files"},{default:withCtx(()=>[createTextVNode("Multiple PDF")]),_:1},8,["class"])])]),createBaseVNode("main",null,[createVNode(unref(RouterView))])],64))}},App=_export_sfc(_sfc_main$2,[["__scopeId","data-v-4fecbfb6"]]);function getAugmentedNamespace(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var l=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};l.prototype=t.prototype}else l={};return Object.defineProperty(l,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var f=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(l,n,f.get?f:{enumerable:!0,get:function(){return e[n]}})}),l}var app$1={exports:{}};function commonjsRequire(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1),canvas=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),require$$1=getAugmentedNamespace(canvas);var hasRequiredPdf;function requirePdf(){return hasRequiredPdf||(hasRequiredPdf=1,function(module,exports){(function(t,l){module.exports=t.pdfjsLib=l()})(globalThis,()=>(()=>{var __webpack_modules__=[,(e,t)=>{var et;Object.defineProperty(t,"__esModule",{value:!0}),t.VerbosityLevel=t.Util=t.UnknownErrorException=t.UnexpectedResponseException=t.TextRenderingMode=t.RenderingIntentFlag=t.PromiseCapability=t.PermissionFlag=t.PasswordResponses=t.PasswordException=t.PageActionEventType=t.OPS=t.MissingPDFException=t.MAX_IMAGE_SIZE_TO_CACHE=t.LINE_FACTOR=t.LINE_DESCENT_FACTOR=t.InvalidPDFException=t.ImageKind=t.IDENTITY_MATRIX=t.FormatError=t.FeatureTest=t.FONT_IDENTITY_MATRIX=t.DocumentActionEventType=t.CMapCompressionType=t.BaseException=t.BASELINE_FACTOR=t.AnnotationType=t.AnnotationReplyType=t.AnnotationPrefix=t.AnnotationMode=t.AnnotationFlag=t.AnnotationFieldFlag=t.AnnotationEditorType=t.AnnotationEditorPrefix=t.AnnotationEditorParamsType=t.AnnotationBorderStyleType=t.AnnotationActionEventType=t.AbortException=void 0,t.assert=ue,t.bytesToString=X,t.createValidAbsoluteUrl=Ce,t.getModificationDate=Le,t.getUuid=qe,t.getVerbosityLevel=Z,t.info=re,t.isArrayBuffer=be,t.isArrayEqual=Ie,t.isNodeJS=void 0,t.normalizeUnicode=He,t.objectFromMap=Y,t.objectSize=j,t.setVerbosityLevel=V,t.shadow=Me,t.string32=z,t.stringToBytes=B,t.stringToPDFString=fe,t.stringToUTF8String=ae,t.unreachable=K,t.utf8StringToString=de,t.warn=te;const l=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");t.isNodeJS=l;const n=[1,0,0,1,0,0];t.IDENTITY_MATRIX=n;const f=[.001,0,0,.001,0,0];t.FONT_IDENTITY_MATRIX=f;const I=1e7;t.MAX_IMAGE_SIZE_TO_CACHE=I;const k=1.35;t.LINE_FACTOR=k;const _=.35;t.LINE_DESCENT_FACTOR=_;const m=_/k;t.BASELINE_FACTOR=m;const r={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};t.RenderingIntentFlag=r;const a={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};t.AnnotationMode=a;const T="pdfjs_internal_editor_";t.AnnotationEditorPrefix=T;const E={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};t.AnnotationEditorType=E;const C={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};t.AnnotationEditorParamsType=C;const s={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};t.PermissionFlag=s;const g={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};t.TextRenderingMode=g;const b={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};t.ImageKind=b;const P={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};t.AnnotationType=P;const x={GROUP:"Group",REPLY:"R"};t.AnnotationReplyType=x;const y={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};t.AnnotationFlag=y;const A={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};t.AnnotationFieldFlag=A;const o={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};t.AnnotationBorderStyleType=o;const c={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};t.AnnotationActionEventType=c;const S={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};t.DocumentActionEventType=S;const w={O:"PageOpen",C:"PageClose"};t.PageActionEventType=w;const v={ERRORS:0,WARNINGS:1,INFOS:5};t.VerbosityLevel=v;const F={NONE:0,BINARY:1};t.CMapCompressionType=F;const N={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};t.OPS=N;const G={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};t.PasswordResponses=G;let le=v.WARNINGS;function V(Te){Number.isInteger(Te)&&(le=Te)}function Z(){return le}function re(Te){le>=v.INFOS&&console.log(`Info: ${Te}`)}function te(Te){le>=v.WARNINGS&&console.log(`Warning: ${Te}`)}function K(Te){throw new Error(Te)}function ue(Te,U){Te||K(U)}function se(Te){switch(Te==null?void 0:Te.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Ce(Te,U=null,J=null){if(!Te)return null;try{if(J&&typeof Te=="string"){if(J.addDefaultProtocol&&Te.startsWith("www.")){const ee=Te.match(/\./g);(ee==null?void 0:ee.length)>=2&&(Te=`http://${Te}`)}if(J.tryConvertEncoding)try{Te=ae(Te)}catch{}}const Ae=U?new URL(Te,U):new URL(Te);if(se(Ae))return Ae}catch{}return null}function Me(Te,U,J,Ae=!1){return Object.defineProperty(Te,U,{value:J,enumerable:!Ae,configurable:!0,writable:!1}),J}const q=function(){function U(J,Ae){this.constructor===U&&K("Cannot initialize BaseException."),this.message=J,this.name=Ae}return U.prototype=new Error,U.constructor=U,U}();t.BaseException=q;class R extends q{constructor(U,J){super(U,"PasswordException"),this.code=J}}t.PasswordException=R;class O extends q{constructor(U,J){super(U,"UnknownErrorException"),this.details=J}}t.UnknownErrorException=O;class d extends q{constructor(U){super(U,"InvalidPDFException")}}t.InvalidPDFException=d;class u extends q{constructor(U){super(U,"MissingPDFException")}}t.MissingPDFException=u;class M extends q{constructor(U,J){super(U,"UnexpectedResponseException"),this.status=J}}t.UnexpectedResponseException=M;class D extends q{constructor(U){super(U,"FormatError")}}t.FormatError=D;class $ extends q{constructor(U){super(U,"AbortException")}}t.AbortException=$;function X(Te){(typeof Te!="object"||(Te==null?void 0:Te.length)===void 0)&&K("Invalid argument for bytesToString");const U=Te.length,J=8192;if(U<J)return String.fromCharCode.apply(null,Te);const Ae=[];for(let ee=0;ee<U;ee+=J){const ge=Math.min(ee+J,U),ve=Te.subarray(ee,ge);Ae.push(String.fromCharCode.apply(null,ve))}return Ae.join("")}function B(Te){typeof Te!="string"&&K("Invalid argument for stringToBytes");const U=Te.length,J=new Uint8Array(U);for(let Ae=0;Ae<U;++Ae)J[Ae]=Te.charCodeAt(Ae)&255;return J}function z(Te){return String.fromCharCode(Te>>24&255,Te>>16&255,Te>>8&255,Te&255)}function j(Te){return Object.keys(Te).length}function Y(Te){const U=Object.create(null);for(const[J,Ae]of Te)U[J]=Ae;return U}function ce(){const Te=new Uint8Array(4);return Te[0]=1,new Uint32Array(Te.buffer,0,1)[0]===1}function oe(){try{return new Function(""),!0}catch{return!1}}class Se{static get isLittleEndian(){return Me(this,"isLittleEndian",ce())}static get isEvalSupported(){return Me(this,"isEvalSupported",oe())}static get isOffscreenCanvasSupported(){return Me(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?Me(this,"platform",{isWin:!1,isMac:!1}):Me(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){var U,J;return Me(this,"isCSSRoundSupported",(J=(U=globalThis.CSS)==null?void 0:U.supports)==null?void 0:J.call(U,"width: round(1.5px, 1px)"))}}t.FeatureTest=Se;const Ee=[...Array(256).keys()].map(Te=>Te.toString(16).padStart(2,"0"));class ye{static makeHexColor(U,J,Ae){return`#${Ee[U]}${Ee[J]}${Ee[Ae]}`}static scaleMinMax(U,J){let Ae;U[0]?(U[0]<0&&(Ae=J[0],J[0]=J[1],J[1]=Ae),J[0]*=U[0],J[1]*=U[0],U[3]<0&&(Ae=J[2],J[2]=J[3],J[3]=Ae),J[2]*=U[3],J[3]*=U[3]):(Ae=J[0],J[0]=J[2],J[2]=Ae,Ae=J[1],J[1]=J[3],J[3]=Ae,U[1]<0&&(Ae=J[2],J[2]=J[3],J[3]=Ae),J[2]*=U[1],J[3]*=U[1],U[2]<0&&(Ae=J[0],J[0]=J[1],J[1]=Ae),J[0]*=U[2],J[1]*=U[2]),J[0]+=U[4],J[1]+=U[4],J[2]+=U[5],J[3]+=U[5]}static transform(U,J){return[U[0]*J[0]+U[2]*J[1],U[1]*J[0]+U[3]*J[1],U[0]*J[2]+U[2]*J[3],U[1]*J[2]+U[3]*J[3],U[0]*J[4]+U[2]*J[5]+U[4],U[1]*J[4]+U[3]*J[5]+U[5]]}static applyTransform(U,J){const Ae=U[0]*J[0]+U[1]*J[2]+J[4],ee=U[0]*J[1]+U[1]*J[3]+J[5];return[Ae,ee]}static applyInverseTransform(U,J){const Ae=J[0]*J[3]-J[1]*J[2],ee=(U[0]*J[3]-U[1]*J[2]+J[2]*J[5]-J[4]*J[3])/Ae,ge=(-U[0]*J[1]+U[1]*J[0]+J[4]*J[1]-J[5]*J[0])/Ae;return[ee,ge]}static getAxialAlignedBoundingBox(U,J){const Ae=this.applyTransform(U,J),ee=this.applyTransform(U.slice(2,4),J),ge=this.applyTransform([U[0],U[3]],J),ve=this.applyTransform([U[2],U[1]],J);return[Math.min(Ae[0],ee[0],ge[0],ve[0]),Math.min(Ae[1],ee[1],ge[1],ve[1]),Math.max(Ae[0],ee[0],ge[0],ve[0]),Math.max(Ae[1],ee[1],ge[1],ve[1])]}static inverseTransform(U){const J=U[0]*U[3]-U[1]*U[2];return[U[3]/J,-U[1]/J,-U[2]/J,U[0]/J,(U[2]*U[5]-U[4]*U[3])/J,(U[4]*U[1]-U[5]*U[0])/J]}static singularValueDecompose2dScale(U){const J=[U[0],U[2],U[1],U[3]],Ae=U[0]*J[0]+U[1]*J[2],ee=U[0]*J[1]+U[1]*J[3],ge=U[2]*J[0]+U[3]*J[2],ve=U[2]*J[1]+U[3]*J[3],ie=(Ae+ve)/2,_e=Math.sqrt((Ae+ve)**2-4*(Ae*ve-ge*ee))/2,ke=ie+_e||1,xe=ie-_e||1;return[Math.sqrt(ke),Math.sqrt(xe)]}static normalizeRect(U){const J=U.slice(0);return U[0]>U[2]&&(J[0]=U[2],J[2]=U[0]),U[1]>U[3]&&(J[1]=U[3],J[3]=U[1]),J}static intersect(U,J){const Ae=Math.max(Math.min(U[0],U[2]),Math.min(J[0],J[2])),ee=Math.min(Math.max(U[0],U[2]),Math.max(J[0],J[2]));if(Ae>ee)return null;const ge=Math.max(Math.min(U[1],U[3]),Math.min(J[1],J[3])),ve=Math.min(Math.max(U[1],U[3]),Math.max(J[1],J[3]));return ge>ve?null:[Ae,ge,ee,ve]}static bezierBoundingBox(U,J,Ae,ee,ge,ve,ie,_e){const ke=[],xe=[[],[]];let Fe,Ve,We,Oe,Ye,$e,me,L;for(let Pe=0;Pe<2;++Pe){if(Pe===0?(Ve=6*U-12*Ae+6*ge,Fe=-3*U+9*Ae-9*ge+3*ie,We=3*Ae-3*U):(Ve=6*J-12*ee+6*ve,Fe=-3*J+9*ee-9*ve+3*_e,We=3*ee-3*J),Math.abs(Fe)<1e-12){if(Math.abs(Ve)<1e-12)continue;Oe=-We/Ve,0<Oe&&Oe<1&&ke.push(Oe);continue}me=Ve*Ve-4*We*Fe,L=Math.sqrt(me),!(me<0)&&(Ye=(-Ve+L)/(2*Fe),0<Ye&&Ye<1&&ke.push(Ye),$e=(-Ve-L)/(2*Fe),0<$e&&$e<1&&ke.push($e))}let Q=ke.length,pe;const we=Q;for(;Q--;)Oe=ke[Q],pe=1-Oe,xe[0][Q]=pe*pe*pe*U+3*pe*pe*Oe*Ae+3*pe*Oe*Oe*ge+Oe*Oe*Oe*ie,xe[1][Q]=pe*pe*pe*J+3*pe*pe*Oe*ee+3*pe*Oe*Oe*ve+Oe*Oe*Oe*_e;return xe[0][we]=U,xe[1][we]=J,xe[0][we+1]=ie,xe[1][we+1]=_e,xe[0].length=xe[1].length=we+2,[Math.min(...xe[0]),Math.min(...xe[1]),Math.max(...xe[0]),Math.max(...xe[1])]}}t.Util=ye;const ne=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function fe(Te){if(Te[0]>="ï"){let J;if(Te[0]==="þ"&&Te[1]==="ÿ"?J="utf-16be":Te[0]==="ÿ"&&Te[1]==="þ"?J="utf-16le":Te[0]==="ï"&&Te[1]==="»"&&Te[2]==="¿"&&(J="utf-8"),J)try{const Ae=new TextDecoder(J,{fatal:!0}),ee=B(Te);return Ae.decode(ee)}catch(Ae){te(`stringToPDFString: "${Ae}".`)}}const U=[];for(let J=0,Ae=Te.length;J<Ae;J++){const ee=ne[Te.charCodeAt(J)];U.push(ee?String.fromCharCode(ee):Te.charAt(J))}return U.join("")}function ae(Te){return decodeURIComponent(escape(Te))}function de(Te){return unescape(encodeURIComponent(Te))}function be(Te){return typeof Te=="object"&&(Te==null?void 0:Te.byteLength)!==void 0}function Ie(Te,U){if(Te.length!==U.length)return!1;for(let J=0,Ae=Te.length;J<Ae;J++)if(Te[J]!==U[J])return!1;return!0}function Le(Te=new Date){return[Te.getUTCFullYear().toString(),(Te.getUTCMonth()+1).toString().padStart(2,"0"),Te.getUTCDate().toString().padStart(2,"0"),Te.getUTCHours().toString().padStart(2,"0"),Te.getUTCMinutes().toString().padStart(2,"0"),Te.getUTCSeconds().toString().padStart(2,"0")].join("")}class De{constructor(){H(this,et,!1);this.promise=new Promise((U,J)=>{this.resolve=Ae=>{he(this,et,!0),U(Ae)},this.reject=Ae=>{he(this,et,!0),J(Ae)}})}get settled(){return i(this,et)}}et=new WeakMap,t.PromiseCapability=De;let Be=null,je=null;function He(Te){return Be||(Be=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,je=new Map([["ﬅ","ſt"]])),Te.replaceAll(Be,(U,J,Ae)=>J?J.normalize("NFKC"):je.get(Ae))}function qe(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const Te=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(Te);else for(let U=0;U<32;U++)Te[U]=Math.floor(Math.random()*255);return X(Te)}const Ge="pdfjs_internal_id_";t.AnnotationPrefix=Ge},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var e,l,n,f,pt,k,Dt,m,r,a,T,E,C,s,g,b,Bt,x,y,oi,o,c;Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(w){if(typeof w=="string"||w instanceof URL?w={url:w}:(0,_util.isArrayBuffer)(w)&&(w={data:w}),typeof w!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!w.url&&!w.data&&!w.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const v=new PDFDocumentLoadingTask,{docId:F}=v,N=w.url?getUrlProp(w.url):null,G=w.data?getDataProp(w.data):null,le=w.httpHeaders||null,V=w.withCredentials===!0,Z=w.password??null,re=w.range instanceof PDFDataRangeTransport?w.range:null,te=Number.isInteger(w.rangeChunkSize)&&w.rangeChunkSize>0?w.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let K=w.worker instanceof PDFWorker?w.worker:null;const ue=w.verbosity,se=typeof w.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(w.docBaseUrl)?w.docBaseUrl:null,Ce=typeof w.cMapUrl=="string"?w.cMapUrl:null,Me=w.cMapPacked!==!1,q=w.CMapReaderFactory||DefaultCMapReaderFactory,R=typeof w.standardFontDataUrl=="string"?w.standardFontDataUrl:null,O=w.StandardFontDataFactory||DefaultStandardFontDataFactory,d=w.stopAtErrors!==!0,u=Number.isInteger(w.maxImageSize)&&w.maxImageSize>-1?w.maxImageSize:-1,M=w.isEvalSupported!==!1,D=typeof w.isOffscreenCanvasSupported=="boolean"?w.isOffscreenCanvasSupported:!_util.isNodeJS,$=Number.isInteger(w.canvasMaxAreaInBytes)?w.canvasMaxAreaInBytes:-1,X=typeof w.disableFontFace=="boolean"?w.disableFontFace:_util.isNodeJS,B=w.fontExtraProperties===!0,z=w.enableXfa===!0,j=w.ownerDocument||globalThis.document,Y=w.disableRange===!0,ce=w.disableStream===!0,oe=w.disableAutoFetch===!0,Se=w.pdfBug===!0,Ee=re?re.length:w.length??NaN,ye=typeof w.useSystemFonts=="boolean"?w.useSystemFonts:!_util.isNodeJS&&!X,ne=typeof w.useWorkerFetch=="boolean"?w.useWorkerFetch:q===_display_utils.DOMCMapReaderFactory&&O===_display_utils.DOMStandardFontDataFactory&&Ce&&R&&(0,_display_utils.isValidFetchUrl)(Ce,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(R,document.baseURI),fe=w.canvasFactory||new DefaultCanvasFactory({ownerDocument:j}),ae=w.filterFactory||new DefaultFilterFactory({docId:F,ownerDocument:j}),de=null;(0,_util.setVerbosityLevel)(ue);const be={canvasFactory:fe,filterFactory:ae};if(ne||(be.cMapReaderFactory=new q({baseUrl:Ce,isCompressed:Me}),be.standardFontDataFactory=new O({baseUrl:R})),!K){const De={verbosity:ue,port:_worker_options.GlobalWorkerOptions.workerPort};K=De.port?PDFWorker.fromPort(De):new PDFWorker(De),v._worker=K}const Ie={docId:F,apiVersion:"3.11.176",data:G,password:Z,disableAutoFetch:oe,rangeChunkSize:te,length:Ee,docBaseUrl:se,enableXfa:z,evaluatorOptions:{maxImageSize:u,disableFontFace:X,ignoreErrors:d,isEvalSupported:M,isOffscreenCanvasSupported:D,canvasMaxAreaInBytes:$,fontExtraProperties:B,useSystemFonts:ye,cMapUrl:ne?Ce:null,standardFontDataUrl:ne?R:null}},Le={ignoreErrors:d,isEvalSupported:M,disableFontFace:X,fontExtraProperties:B,enableXfa:z,ownerDocument:j,disableAutoFetch:oe,pdfBug:Se,styleElement:de};return K.promise.then(function(){if(v.destroyed)throw new Error("Loading aborted");const De=_fetchDocument(K,Ie),Be=new Promise(function(je){let He;re?He=new _transport_stream.PDFDataTransportStream({length:Ee,initialData:re.initialData,progressiveDone:re.progressiveDone,contentDispositionFilename:re.contentDispositionFilename,disableRange:Y,disableStream:ce},re):G||(He=(Ge=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(Ge):(0,_display_utils.isValidFetchUrl)(Ge.url)?new _displayFetch_stream.PDFFetchStream(Ge):new _displayNetwork.PDFNetworkStream(Ge))({url:N,length:Ee,httpHeaders:le,withCredentials:V,rangeChunkSize:te,disableRange:Y,disableStream:ce})),je(He)});return Promise.all([De,Be]).then(function([je,He]){if(v.destroyed)throw new Error("Loading aborted");const qe=new _message_handler.MessageHandler(F,je,K.port),Ge=new WorkerTransport(qe,v,He,Le,be);v._transport=Ge,qe.send("Ready",null)})}).catch(v._capability.reject),v}async function _fetchDocument(w,v){if(w.destroyed)throw new Error("Worker was destroyed");const F=await w.messageHandler.sendWithPromise("GetDocRequest",v,v.data?[v.data.buffer]:null);if(w.destroyed)throw new Error("Worker was destroyed");return F}function getUrlProp(w){if(w instanceof URL)return w.href;try{return new URL(w,window.location).href}catch{if(_util.isNodeJS&&typeof w=="string")return w}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(w){if(_util.isNodeJS&&typeof Buffer<"u"&&w instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(w instanceof Uint8Array&&w.byteLength===w.buffer.byteLength)return w;if(typeof w=="string")return(0,_util.stringToBytes)(w);if(typeof w=="object"&&!isNaN(w==null?void 0:w.length)||(0,_util.isArrayBuffer)(w))return new Uint8Array(w);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const t=class t{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${ft(t,e)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var v,F,N;this.destroyed=!0;try{(v=this._worker)!=null&&v.port&&(this._worker._pendingDestroy=!0),await((F=this._transport)==null?void 0:F.destroy())}catch(G){throw(N=this._worker)!=null&&N.port&&delete this._worker._pendingDestroy,G}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};e=new WeakMap,H(t,e,0);let PDFDocumentLoadingTask=t;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(v,F,N=!1,G=null){this.length=v,this.initialData=F,this.progressiveDone=N,this.contentDispositionFilename=G,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(v){this._rangeListeners.push(v)}addProgressListener(v){this._progressListeners.push(v)}addProgressiveReadListener(v){this._progressiveReadListeners.push(v)}addProgressiveDoneListener(v){this._progressiveDoneListeners.push(v)}onDataRange(v,F){for(const N of this._rangeListeners)N(v,F)}onDataProgress(v,F){this._readyCapability.promise.then(()=>{for(const N of this._progressListeners)N(v,F)})}onDataProgressiveRead(v){this._readyCapability.promise.then(()=>{for(const F of this._progressiveReadListeners)F(v)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const v of this._progressiveDoneListeners)v()})}transportReady(){this._readyCapability.resolve()}requestDataRange(v,F){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(v,F){this._pdfInfo=v,this._transport=F,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(N=>{if(!N)return N;const G=[];for(const le in N)G.push(...N[le]);return G}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(v){return this._transport.getPage(v)}getPageIndex(v){return this._transport.getPageIndex(v)}getDestinations(){return this._transport.getDestinations()}getDestination(v){return this._transport.getDestination(v)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(v=!1){return this._transport.startCleanup(v||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(v,F,N,G=!1){H(this,f);H(this,k);H(this,l,null);H(this,n,!1);this._pageIndex=v,this._pageInfo=F,this._transport=N,this._stats=G?new _display_utils.StatTimer:null,this._pdfBug=G,this.commonObjs=N.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:v,rotation:F=this.rotate,offsetX:N=0,offsetY:G=0,dontFlip:le=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:v,rotation:F,offsetX:N,offsetY:G,dontFlip:le})}getAnnotations({intent:v="display"}={}){const F=this._transport.getRenderingIntent(v);return this._transport.getAnnotations(this._pageIndex,F.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var v;return((v=this._transport._htmlForXfa)==null?void 0:v.children[this._pageIndex])||null}render({canvasContext:v,viewport:F,intent:N="display",annotationMode:G=_util.AnnotationMode.ENABLE,transform:le=null,background:V=null,optionalContentConfigPromise:Z=null,annotationCanvasMap:re=null,pageColors:te=null,printAnnotationStorage:K=null}){var O,d;(O=this._stats)==null||O.time("Overall");const ue=this._transport.getRenderingIntent(N,G,K);he(this,n,!1),W(this,k,Dt).call(this),Z||(Z=this._transport.getOptionalContentConfig());let se=this._intentStates.get(ue.cacheKey);se||(se=Object.create(null),this._intentStates.set(ue.cacheKey,se)),se.streamReaderCancelTimeout&&(clearTimeout(se.streamReaderCancelTimeout),se.streamReaderCancelTimeout=null);const Ce=!!(ue.renderingIntent&_util.RenderingIntentFlag.PRINT);se.displayReadyCapability||(se.displayReadyCapability=new _util.PromiseCapability,se.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(d=this._stats)==null||d.time("Page Request"),this._pumpOperatorList(ue));const Me=u=>{var M,D;se.renderTasks.delete(q),(this._maybeCleanupAfterRender||Ce)&&he(this,n,!0),W(this,f,pt).call(this,!Ce),u?(q.capability.reject(u),this._abortOperatorList({intentState:se,reason:u instanceof Error?u:new Error(u)})):q.capability.resolve(),(M=this._stats)==null||M.timeEnd("Rendering"),(D=this._stats)==null||D.timeEnd("Overall")},q=new InternalRenderTask({callback:Me,params:{canvasContext:v,viewport:F,transform:le,background:V},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:re,operatorList:se.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!Ce,pdfBug:this._pdfBug,pageColors:te});(se.renderTasks||(se.renderTasks=new Set)).add(q);const R=q.task;return Promise.all([se.displayReadyCapability.promise,Z]).then(([u,M])=>{var D;if(this.destroyed){Me();return}(D=this._stats)==null||D.time("Rendering"),q.initializeGraphics({transparency:u,optionalContentConfig:M}),q.operatorListChanged()}).catch(Me),R}getOperatorList({intent:v="display",annotationMode:F=_util.AnnotationMode.ENABLE,printAnnotationStorage:N=null}={}){var re;function G(){V.operatorList.lastChunk&&(V.opListReadCapability.resolve(V.operatorList),V.renderTasks.delete(Z))}const le=this._transport.getRenderingIntent(v,F,N,!0);let V=this._intentStates.get(le.cacheKey);V||(V=Object.create(null),this._intentStates.set(le.cacheKey,V));let Z;return V.opListReadCapability||(Z=Object.create(null),Z.operatorListChanged=G,V.opListReadCapability=new _util.PromiseCapability,(V.renderTasks||(V.renderTasks=new Set)).add(Z),V.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(re=this._stats)==null||re.time("Page Request"),this._pumpOperatorList(le)),V.opListReadCapability.promise}streamTextContent({includeMarkedContent:v=!1,disableNormalization:F=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:v===!0,disableNormalization:F===!0},{highWaterMark:100,size(G){return G.items.length}})}getTextContent(v={}){if(this._transport._htmlForXfa)return this.getXfa().then(N=>_xfa_text.XfaText.textContent(N));const F=this.streamTextContent(v);return new Promise(function(N,G){function le(){V.read().then(function({value:re,done:te}){if(te){N(Z);return}Object.assign(Z.styles,re.styles),Z.items.push(...re.items),le()},G)}const V=F.getReader(),Z={items:[],styles:Object.create(null)};le()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const v=[];for(const F of this._intentStates.values())if(this._abortOperatorList({intentState:F,reason:new Error("Page was destroyed."),force:!0}),!F.opListReadCapability)for(const N of F.renderTasks)v.push(N.completed),N.cancel();return this.objs.clear(),he(this,n,!1),W(this,k,Dt).call(this),Promise.all(v)}cleanup(v=!1){he(this,n,!0);const F=W(this,f,pt).call(this,!1);return v&&F&&this._stats&&(this._stats=new _display_utils.StatTimer),F}_startRenderPage(v,F){var G,le;const N=this._intentStates.get(F);N&&((G=this._stats)==null||G.timeEnd("Page Request"),(le=N.displayReadyCapability)==null||le.resolve(v))}_renderPageChunk(v,F){for(let N=0,G=v.length;N<G;N++)F.operatorList.fnArray.push(v.fnArray[N]),F.operatorList.argsArray.push(v.argsArray[N]);F.operatorList.lastChunk=v.lastChunk,F.operatorList.separateAnnots=v.separateAnnots;for(const N of F.renderTasks)N.operatorListChanged();v.lastChunk&&W(this,f,pt).call(this,!0)}_pumpOperatorList({renderingIntent:v,cacheKey:F,annotationStorageSerializable:N}){const{map:G,transfers:le}=N,Z=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:v,cacheKey:F,annotationStorage:G},le).getReader(),re=this._intentStates.get(F);re.streamReader=Z;const te=()=>{Z.read().then(({value:K,done:ue})=>{if(ue){re.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(K,re),te())},K=>{if(re.streamReader=null,!this._transport.destroyed){if(re.operatorList){re.operatorList.lastChunk=!0;for(const ue of re.renderTasks)ue.operatorListChanged();W(this,f,pt).call(this,!0)}if(re.displayReadyCapability)re.displayReadyCapability.reject(K);else if(re.opListReadCapability)re.opListReadCapability.reject(K);else throw K}})};te()}_abortOperatorList({intentState:v,reason:F,force:N=!1}){if(v.streamReader){if(v.streamReaderCancelTimeout&&(clearTimeout(v.streamReaderCancelTimeout),v.streamReaderCancelTimeout=null),!N){if(v.renderTasks.size>0)return;if(F instanceof _display_utils.RenderingCancelledException){let G=RENDERING_CANCELLED_TIMEOUT;F.extraDelay>0&&F.extraDelay<1e3&&(G+=F.extraDelay),v.streamReaderCancelTimeout=setTimeout(()=>{v.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:v,reason:F,force:!0})},G);return}}if(v.streamReader.cancel(new _util.AbortException(F.message)).catch(()=>{}),v.streamReader=null,!this._transport.destroyed){for(const[G,le]of this._intentStates)if(le===v){this._intentStates.delete(G);break}this.cleanup()}}}get stats(){return this._stats}}l=new WeakMap,n=new WeakMap,f=new WeakSet,pt=function(v=!1){if(W(this,k,Dt).call(this),!i(this,n)||this.destroyed)return!1;if(v)return he(this,l,setTimeout(()=>{he(this,l,null),W(this,f,pt).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:F,operatorList:N}of this._intentStates.values())if(F.size>0||!N.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),he(this,n,!1),!0},k=new WeakSet,Dt=function(){i(this,l)&&(clearTimeout(i(this,l)),he(this,l,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){H(this,m,new Set);H(this,r,Promise.resolve())}postMessage(v,F){const N={data:structuredClone(v,F?{transfer:F}:null)};i(this,r).then(()=>{for(const G of i(this,m))G.call(this,N)})}addEventListener(v,F){i(this,m).add(F)}removeEventListener(v,F){i(this,m).delete(F)}terminate(){i(this,m).clear()}}m=new WeakMap,r=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const w=(a=document==null?void 0:document.currentScript)==null?void 0:a.src;w&&(PDFWorkerUtil.fallbackWorkerSrc=w.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(w,v){let F;try{if(F=new URL(w),!F.origin||F.origin==="null")return!1}catch{return!1}const N=new URL(v,F);return F.origin===N.origin},PDFWorkerUtil.createCDNWrapper=function(w){const v=`importScripts("${w}");`;return URL.createObjectURL(new Blob([v]))}}const _PDFWorker=class _PDFWorker{constructor({name:w=null,port:v=null,verbosity:F=(0,_util.getVerbosityLevel)()}={}){var N;if(this.name=w,this.destroyed=!1,this.verbosity=F,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,v){if((N=i(_PDFWorker,T))!=null&&N.has(v))throw new Error("Cannot use more than one PDFWorker per port.");(i(_PDFWorker,T)||he(_PDFWorker,T,new WeakMap)).set(v,this),this._initializeFromPort(v);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(w){this._port=w,this._messageHandler=new _message_handler.MessageHandler("main","worker",w),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:w}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,w)||(w=PDFWorkerUtil.createCDNWrapper(new URL(w,window.location).href));const v=new Worker(w),F=new _message_handler.MessageHandler("main","worker",v),N=()=>{v.removeEventListener("error",G),F.destroy(),v.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},G=()=>{this._webWorker||N()};v.addEventListener("error",G),F.on("test",V=>{if(v.removeEventListener("error",G),this.destroyed){N();return}V?(this._messageHandler=F,this._port=v,this._webWorker=v,this._readyCapability.resolve(),F.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),F.destroy(),v.terminate())}),F.on("ready",V=>{if(v.removeEventListener("error",G),this.destroyed){N();return}try{le()}catch{this._setupFakeWorker()}});const le=()=>{const V=new Uint8Array;F.send("test",V,[V.buffer])};le();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(w=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const v=new LoopbackPort;this._port=v;const F=`fake${PDFWorkerUtil.fakeWorkerId++}`,N=new _message_handler.MessageHandler(F+"_worker",F,v);w.setup(N,v);const G=new _message_handler.MessageHandler(F,F+"_worker",v);this._messageHandler=G,this._readyCapability.resolve(),G.send("configure",{verbosity:this.verbosity})}).catch(w=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${w.message}".`))})}destroy(){var w;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(w=i(_PDFWorker,T))==null||w.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(w){var F;if(!(w!=null&&w.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const v=(F=i(this,T))==null?void 0:F.get(w.port);if(v){if(v._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return v}return new _PDFWorker(w)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var w;try{return((w=globalThis.pdfjsWorker)==null?void 0:w.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};T=new WeakMap,H(_PDFWorker,T,void 0);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(v,F,N,G,le){H(this,b);H(this,E,new Map);H(this,C,new Map);H(this,s,new Map);H(this,g,null);this.messageHandler=v,this.loadingTask=F,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:G.ownerDocument,styleElement:G.styleElement}),this._params=G,this.canvasFactory=le.canvasFactory,this.filterFactory=le.filterFactory,this.cMapReaderFactory=le.cMapReaderFactory,this.standardFontDataFactory=le.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=N,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(v,F=_util.AnnotationMode.ENABLE,N=null,G=!1){let le=_util.RenderingIntentFlag.DISPLAY,V=_annotation_storage.SerializableEmpty;switch(v){case"any":le=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":le=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${v}`)}switch(F){case _util.AnnotationMode.DISABLE:le+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:le+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:le+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,V=(le&_util.RenderingIntentFlag.PRINT&&N instanceof _annotation_storage.PrintAnnotationStorage?N:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${F}`)}return G&&(le+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:le,cacheKey:`${le}_${V.hash}`,annotationStorageSerializable:V}}destroy(){var N;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,(N=i(this,g))==null||N.reject(new Error("Worker was destroyed during onPassword callback"));const v=[];for(const G of i(this,C).values())v.push(G._destroy());i(this,C).clear(),i(this,s).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const F=this.messageHandler.sendWithPromise("Terminate",null);return v.push(F),Promise.all(v).then(()=>{var G;this.commonObjs.clear(),this.fontLoader.clear(),i(this,E).clear(),this.filterFactory.destroy(),(G=this._networkStream)==null||G.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:v,loadingTask:F}=this;v.on("GetReader",(N,G)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=le=>{this._lastProgress={loaded:le.loaded,total:le.total}},G.onPull=()=>{this._fullReader.read().then(function({value:le,done:V}){if(V){G.close();return}(0,_util.assert)(le instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),G.enqueue(new Uint8Array(le),1,[le])}).catch(le=>{G.error(le)})},G.onCancel=le=>{this._fullReader.cancel(le),G.ready.catch(V=>{if(!this.destroyed)throw V})}}),v.on("ReaderHeadersReady",N=>{const G=new _util.PromiseCapability,le=this._fullReader;return le.headersReady.then(()=>{var V;(!le.isStreamingSupported||!le.isRangeSupported)&&(this._lastProgress&&((V=F.onProgress)==null||V.call(F,this._lastProgress)),le.onProgress=Z=>{var re;(re=F.onProgress)==null||re.call(F,{loaded:Z.loaded,total:Z.total})}),G.resolve({isStreamingSupported:le.isStreamingSupported,isRangeSupported:le.isRangeSupported,contentLength:le.contentLength})},G.reject),G.promise}),v.on("GetRangeReader",(N,G)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const le=this._networkStream.getRangeReader(N.begin,N.end);if(!le){G.close();return}G.onPull=()=>{le.read().then(function({value:V,done:Z}){if(Z){G.close();return}(0,_util.assert)(V instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),G.enqueue(new Uint8Array(V),1,[V])}).catch(V=>{G.error(V)})},G.onCancel=V=>{le.cancel(V),G.ready.catch(Z=>{if(!this.destroyed)throw Z})}}),v.on("GetDoc",({pdfInfo:N})=>{this._numPages=N.numPages,this._htmlForXfa=N.htmlForXfa,delete N.htmlForXfa,F._capability.resolve(new PDFDocumentProxy(N,this))}),v.on("DocException",function(N){let G;switch(N.name){case"PasswordException":G=new _util.PasswordException(N.message,N.code);break;case"InvalidPDFException":G=new _util.InvalidPDFException(N.message);break;case"MissingPDFException":G=new _util.MissingPDFException(N.message);break;case"UnexpectedResponseException":G=new _util.UnexpectedResponseException(N.message,N.status);break;case"UnknownErrorException":G=new _util.UnknownErrorException(N.message,N.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}F._capability.reject(G)}),v.on("PasswordRequest",N=>{if(he(this,g,new _util.PromiseCapability),F.onPassword){const G=le=>{le instanceof Error?i(this,g).reject(le):i(this,g).resolve({password:le})};try{F.onPassword(G,N.code)}catch(le){i(this,g).reject(le)}}else i(this,g).reject(new _util.PasswordException(N.message,N.code));return i(this,g).promise}),v.on("DataLoaded",N=>{var G;(G=F.onProgress)==null||G.call(F,{loaded:N.length,total:N.length}),this.downloadInfoCapability.resolve(N)}),v.on("StartRenderPage",N=>{if(this.destroyed)return;i(this,C).get(N.pageIndex)._startRenderPage(N.transparency,N.cacheKey)}),v.on("commonobj",([N,G,le])=>{var V;if(!this.destroyed&&!this.commonObjs.has(N))switch(G){case"Font":const Z=this._params;if("error"in le){const K=le.error;(0,_util.warn)(`Error during font loading: ${K}`),this.commonObjs.resolve(N,K);break}const re=Z.pdfBug&&((V=globalThis.FontInspector)!=null&&V.enabled)?(K,ue)=>globalThis.FontInspector.fontAdded(K,ue):null,te=new _font_loader.FontFaceObject(le,{isEvalSupported:Z.isEvalSupported,disableFontFace:Z.disableFontFace,ignoreErrors:Z.ignoreErrors,inspectFont:re});this.fontLoader.bind(te).catch(K=>v.sendWithPromise("FontFallback",{id:N})).finally(()=>{!Z.fontExtraProperties&&te.data&&(te.data=null),this.commonObjs.resolve(N,te)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(N,le);break;default:throw new Error(`Got unknown common object type ${G}`)}}),v.on("obj",([N,G,le,V])=>{var re;if(this.destroyed)return;const Z=i(this,C).get(G);if(!Z.objs.has(N))switch(le){case"Image":if(Z.objs.resolve(N,V),V){let te;if(V.bitmap){const{width:K,height:ue}=V;te=K*ue*4}else te=((re=V.data)==null?void 0:re.length)||0;te>_util.MAX_IMAGE_SIZE_TO_CACHE&&(Z._maybeCleanupAfterRender=!0)}break;case"Pattern":Z.objs.resolve(N,V);break;default:throw new Error(`Got unknown object type ${le}`)}}),v.on("DocProgress",N=>{var G;this.destroyed||(G=F.onProgress)==null||G.call(F,{loaded:N.loaded,total:N.total})}),v.on("FetchBuiltInCMap",N=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(N):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),v.on("FetchStandardFontData",N=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(N):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var N;this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:v,transfers:F}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:v,filename:((N=this._fullReader)==null?void 0:N.filename)??null},F).finally(()=>{this.annotationStorage.resetModified()})}getPage(v){if(!Number.isInteger(v)||v<=0||v>this._numPages)return Promise.reject(new Error("Invalid page request."));const F=v-1,N=i(this,s).get(F);if(N)return N;const G=this.messageHandler.sendWithPromise("GetPage",{pageIndex:F}).then(le=>{if(this.destroyed)throw new Error("Transport destroyed");const V=new PDFPageProxy(F,le,this,this._params.pdfBug);return i(this,C).set(F,V),V});return i(this,s).set(F,G),G}getPageIndex(v){return typeof v!="object"||v===null||!Number.isInteger(v.num)||v.num<0||!Number.isInteger(v.gen)||v.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:v.num,gen:v.gen})}getAnnotations(v,F){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:v,intent:F})}getFieldObjects(){return W(this,b,Bt).call(this,"GetFieldObjects")}hasJSActions(){return W(this,b,Bt).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(v){return typeof v!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:v})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return W(this,b,Bt).call(this,"GetDocJSActions")}getPageJSActions(v){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:v})}getStructTree(v){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:v})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(v=>new _optional_content_config.OptionalContentConfig(v))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const v="GetMetadata",F=i(this,E).get(v);if(F)return F;const N=this.messageHandler.sendWithPromise(v,null).then(G=>{var le,V;return{info:G[0],metadata:G[1]?new _metadata.Metadata(G[1]):null,contentDispositionFilename:((le=this._fullReader)==null?void 0:le.filename)??null,contentLength:((V=this._fullReader)==null?void 0:V.contentLength)??null}});return i(this,E).set(v,N),N}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(v=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const F of i(this,C).values())if(!F.cleanup())throw new Error(`startCleanup: Page ${F.pageNumber} is currently rendering.`);this.commonObjs.clear(),v||this.fontLoader.clear(),i(this,E).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:v,enableXfa:F}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:v,enableXfa:F})}}E=new WeakMap,C=new WeakMap,s=new WeakMap,g=new WeakMap,b=new WeakSet,Bt=function(v,F=null){const N=i(this,E).get(v);if(N)return N;const G=this.messageHandler.sendWithPromise(v,F);return i(this,E).set(v,G),G};class PDFObjects{constructor(){H(this,y);H(this,x,Object.create(null))}get(v,F=null){if(F){const G=W(this,y,oi).call(this,v);return G.capability.promise.then(()=>F(G.data)),null}const N=i(this,x)[v];if(!(N!=null&&N.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${v}.`);return N.data}has(v){const F=i(this,x)[v];return(F==null?void 0:F.capability.settled)||!1}resolve(v,F=null){const N=W(this,y,oi).call(this,v);N.data=F,N.capability.resolve()}clear(){var v;for(const F in i(this,x)){const{data:N}=i(this,x)[F];(v=N==null?void 0:N.bitmap)==null||v.close()}he(this,x,Object.create(null))}}x=new WeakMap,y=new WeakSet,oi=function(v){var F;return(F=i(this,x))[v]||(F[v]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(v){H(this,o,null);he(this,o,v),this.onContinue=null}get promise(){return i(this,o).capability.promise}cancel(v=0){i(this,o).cancel(null,v)}get separateAnnots(){const{separateAnnots:v}=i(this,o).operatorList;if(!v)return!1;const{annotationCanvasMap:F}=i(this,o);return v.form||v.canvas&&(F==null?void 0:F.size)>0}}o=new WeakMap,exports.RenderTask=RenderTask;const S=class S{constructor({callback:v,params:F,objs:N,commonObjs:G,annotationCanvasMap:le,operatorList:V,pageIndex:Z,canvasFactory:re,filterFactory:te,useRequestAnimationFrame:K=!1,pdfBug:ue=!1,pageColors:se=null}){this.callback=v,this.params=F,this.objs=N,this.commonObjs=G,this.annotationCanvasMap=le,this.operatorListIdx=null,this.operatorList=V,this._pageIndex=Z,this.canvasFactory=re,this.filterFactory=te,this._pdfBug=ue,this.pageColors=se,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=K===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=F.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:v=!1,optionalContentConfig:F}){var Z,re;if(this.cancelled)return;if(this._canvas){if(i(S,c).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");i(S,c).add(this._canvas)}this._pdfBug&&((Z=globalThis.StepperManager)!=null&&Z.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:N,viewport:G,transform:le,background:V}=this.params;this.gfx=new _canvas.CanvasGraphics(N,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:F},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:le,viewport:G,transparency:v,background:V}),this.operatorListIdx=0,this.graphicsReady=!0,(re=this.graphicsReadyCallback)==null||re.call(this)}cancel(v=null,F=0){var N;this.running=!1,this.cancelled=!0,(N=this.gfx)==null||N.endDrawing(),i(S,c).delete(this._canvas),this.callback(v||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,F))}operatorListChanged(){var v;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(v=this.stepper)==null||v.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),i(S,c).delete(this._canvas),this.callback())))}};c=new WeakMap,H(S,c,new WeakSet);let InternalRenderTask=S;const version="3.11.176";exports.version=version;const build="57d196e34";exports.build=build},(e,t,l)=>{var r,a,T,Cn,C;Object.defineProperty(t,"__esModule",{value:!0}),t.SerializableEmpty=t.PrintAnnotationStorage=t.AnnotationStorage=void 0;var n=l(1),f=l(4),I=l(8);const k=Object.freeze({map:null,hash:"",transfers:void 0});t.SerializableEmpty=k;class _{constructor(){H(this,T);H(this,r,!1);H(this,a,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(g,b){const P=i(this,a).get(g);return P===void 0?b:Object.assign(b,P)}getRawValue(g){return i(this,a).get(g)}remove(g){if(i(this,a).delete(g),i(this,a).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const b of i(this,a).values())if(b instanceof f.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(g,b){const P=i(this,a).get(g);let x=!1;if(P!==void 0)for(const[y,A]of Object.entries(b))P[y]!==A&&(x=!0,P[y]=A);else x=!0,i(this,a).set(g,b);x&&W(this,T,Cn).call(this),b instanceof f.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(b.constructor._type)}has(g){return i(this,a).has(g)}getAll(){return i(this,a).size>0?(0,n.objectFromMap)(i(this,a)):null}setAll(g){for(const[b,P]of Object.entries(g))this.setValue(b,P)}get size(){return i(this,a).size}resetModified(){i(this,r)&&(he(this,r,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new m(this)}get serializable(){if(i(this,a).size===0)return k;const g=new Map,b=new I.MurmurHash3_64,P=[],x=Object.create(null);let y=!1;for(const[A,o]of i(this,a)){const c=o instanceof f.AnnotationEditor?o.serialize(!1,x):o;c&&(g.set(A,c),b.update(`${A}:${JSON.stringify(c)}`),y||(y=!!c.bitmap))}if(y)for(const A of g.values())A.bitmap&&P.push(A.bitmap);return g.size>0?{map:g,hash:b.hexdigest(),transfers:P}:k}}r=new WeakMap,a=new WeakMap,T=new WeakSet,Cn=function(){i(this,r)||(he(this,r,!0),typeof this.onSetModified=="function"&&this.onSetModified())},t.AnnotationStorage=_;class m extends _{constructor(b){super();H(this,C,void 0);const{map:P,hash:x,transfers:y}=b.serializable,A=structuredClone(P,y?{transfer:y}:null);he(this,C,{map:A,hash:x,transfers:y})}get print(){(0,n.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return i(this,C)}}C=new WeakMap,t.PrintAnnotationStorage=m},(e,t,l)=>{var m,r,a,T,E,C,s,g,b,P,x,y,A,o,c,li,w,ci,F,di,G,hi,V,Tn,re,xn,K,Mn,se,ui,Me,Rn;Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationEditor=void 0;var n=l(5),f=l(1),I=l(6);const R=class R{constructor(d){H(this,c);H(this,w);H(this,G);H(this,V);H(this,re);H(this,K);H(this,se);H(this,Me);H(this,m,"");H(this,r,!1);H(this,a,null);H(this,T,null);H(this,E,null);H(this,C,!1);H(this,s,null);H(this,g,this.focusin.bind(this));H(this,b,this.focusout.bind(this));H(this,P,!1);H(this,x,!1);H(this,y,!1);Je(this,"_initialOptions",Object.create(null));Je(this,"_uiManager",null);Je(this,"_focusEventsAllowed",!0);Je(this,"_l10nPromise",null);H(this,A,!1);H(this,o,R._zIndex++);this.constructor===R&&(0,f.unreachable)("Cannot initialize AnnotationEditor."),this.parent=d.parent,this.id=d.id,this.width=this.height=null,this.pageIndex=d.parent.pageIndex,this.name=d.name,this.div=null,this._uiManager=d.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=d.isCentered,this._structTreeParentId=null;const{rotation:u,rawDims:{pageWidth:M,pageHeight:D,pageX:$,pageY:X}}=this.parent.viewport;this.rotation=u,this.pageRotation=(360+u-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[M,D],this.pageTranslation=[$,X];const[B,z]=this.parentDimensions;this.x=d.x/B,this.y=d.y/z,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,f.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(d){const u=new _({id:d.parent.getNextId(),parent:d.parent,uiManager:d._uiManager});u.annotationElementId=d.annotationElementId,u.deleted=!0,u._uiManager.addToAnnotationStorage(u)}static initialize(d,u=null){if(R._l10nPromise||(R._l10nPromise=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(D=>[D,d.get(D)]))),u!=null&&u.strings)for(const D of u.strings)R._l10nPromise.set(D,d.get(D));if(R._borderLineWidth!==-1)return;const M=getComputedStyle(document.documentElement);R._borderLineWidth=parseFloat(M.getPropertyValue("--outline-width"))||0}static updateDefaultParams(d,u){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(d){return!1}static paste(d,u){(0,f.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return i(this,A)}set _isDraggable(d){var u;he(this,A,d),(u=this.div)==null||u.classList.toggle("draggable",d)}center(){const[d,u]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*u/(d*2),this.y+=this.width*d/(u*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*u/(d*2),this.y-=this.width*d/(u*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(d){this._uiManager.addCommands(d)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=i(this,o)}setParent(d){d!==null&&(this.pageIndex=d.pageIndex,this.pageDimensions=d.pageDimensions),this.parent=d}focusin(d){this._focusEventsAllowed&&(i(this,P)?he(this,P,!1):this.parent.setSelected(this))}focusout(d){var M;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const u=d.relatedTarget;u!=null&&u.closest(`#${this.id}`)||(d.preventDefault(),(M=this.parent)!=null&&M.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(d,u,M,D){const[$,X]=this.parentDimensions;[M,D]=this.screenToPageTranslation(M,D),this.x=(d+M)/$,this.y=(u+D)/X,this.fixAndSetPosition()}translate(d,u){W(this,c,li).call(this,this.parentDimensions,d,u)}translateInPage(d,u){W(this,c,li).call(this,this.pageDimensions,d,u),this.div.scrollIntoView({block:"nearest"})}drag(d,u){const[M,D]=this.parentDimensions;if(this.x+=d/M,this.y+=u/D,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:j,y:Y}=this.div.getBoundingClientRect();this.parent.findNewParent(this,j,Y)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:$,y:X}=this;const[B,z]=W(this,w,ci).call(this);$+=B,X+=z,this.div.style.left=`${(100*$).toFixed(2)}%`,this.div.style.top=`${(100*X).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(){const[d,u]=this.pageDimensions;let{x:M,y:D,width:$,height:X}=this;switch($*=d,X*=u,M*=d,D*=u,this.rotation){case 0:M=Math.max(0,Math.min(d-$,M)),D=Math.max(0,Math.min(u-X,D));break;case 90:M=Math.max(0,Math.min(d-X,M)),D=Math.min(u,Math.max($,D));break;case 180:M=Math.min(d,Math.max($,M)),D=Math.min(u,Math.max(X,D));break;case 270:M=Math.min(d,Math.max(X,M)),D=Math.max(0,Math.min(u-$,D));break}this.x=M/=d,this.y=D/=u;const[B,z]=W(this,w,ci).call(this);M+=B,D+=z;const{style:j}=this.div;j.left=`${(100*M).toFixed(2)}%`,j.top=`${(100*D).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(d,u){var M;return W(M=R,F,di).call(M,d,u,this.parentRotation)}pageTranslationToScreen(d,u){var M;return W(M=R,F,di).call(M,d,u,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:d,pageDimensions:[u,M]}=this,D=u*d,$=M*d;return f.FeatureTest.isCSSRoundSupported?[Math.round(D),Math.round($)]:[D,$]}setDims(d,u){var $;const[M,D]=this.parentDimensions;this.div.style.width=`${(100*d/M).toFixed(2)}%`,i(this,C)||(this.div.style.height=`${(100*u/D).toFixed(2)}%`),($=i(this,a))==null||$.classList.toggle("small",d<R.SMALL_EDITOR_SIZE||u<R.SMALL_EDITOR_SIZE)}fixDims(){const{style:d}=this.div,{height:u,width:M}=d,D=M.endsWith("%"),$=!i(this,C)&&u.endsWith("%");if(D&&$)return;const[X,B]=this.parentDimensions;D||(d.width=`${(100*parseFloat(M)/X).toFixed(2)}%`),!i(this,C)&&!$&&(d.height=`${(100*parseFloat(u)/B).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}async addAltTextButton(){if(i(this,a))return;const d=he(this,a,document.createElement("button"));d.className="altText";const u=await R._l10nPromise.get("editor_alt_text_button_label");d.textContent=u,d.setAttribute("aria-label",u),d.tabIndex="0",d.addEventListener("contextmenu",I.noContextMenu),d.addEventListener("pointerdown",M=>M.stopPropagation()),d.addEventListener("click",M=>{M.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),d.addEventListener("keydown",M=>{M.target===d&&M.key==="Enter"&&(M.preventDefault(),this._uiManager.editAltText(this))}),W(this,se,ui).call(this),this.div.append(d),R.SMALL_EDITOR_SIZE||(R.SMALL_EDITOR_SIZE=Math.min(128,Math.round(d.getBoundingClientRect().width*1.4)))}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:i(this,m),decorative:i(this,r)}}set altTextData({altText:d,decorative:u}){i(this,m)===d&&i(this,r)===u||(he(this,m,d),he(this,r,u),W(this,se,ui).call(this))}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",i(this,g)),this.div.addEventListener("focusout",i(this,b));const[d,u]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*u/d).toFixed(2)}%`,this.div.style.maxHeight=`${(100*d/u).toFixed(2)}%`);const[M,D]=this.getInitialTranslation();return this.translate(M,D),(0,n.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(d){const{isMac:u}=f.FeatureTest.platform;if(d.button!==0||d.ctrlKey&&u){d.preventDefault();return}he(this,P,!0),W(this,Me,Rn).call(this,d)}moveInDOM(){var d;(d=this.parent)==null||d.moveEditorInDOM(this)}_setParentAndPosition(d,u,M){d.changeParent(this),this.x=u,this.y=M,this.fixAndSetPosition()}getRect(d,u){const M=this.parentScale,[D,$]=this.pageDimensions,[X,B]=this.pageTranslation,z=d/M,j=u/M,Y=this.x*D,ce=this.y*$,oe=this.width*D,Se=this.height*$;switch(this.rotation){case 0:return[Y+z+X,$-ce-j-Se+B,Y+z+oe+X,$-ce-j+B];case 90:return[Y+j+X,$-ce+z+B,Y+j+Se+X,$-ce+z+oe+B];case 180:return[Y-z-oe+X,$-ce+j+B,Y-z+X,$-ce+j+Se+B];case 270:return[Y-j-Se+X,$-ce-z-oe+B,Y-j+X,$-ce-z+B];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(d,u){const[M,D,$,X]=d,B=$-M,z=X-D;switch(this.rotation){case 0:return[M,u-X,B,z];case 90:return[M,u-D,z,B];case 180:return[$,u-D,B,z];case 270:return[$,u-X,z,B];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){he(this,y,!0)}disableEditMode(){he(this,y,!1)}isInEditMode(){return i(this,y)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var d,u;(d=this.div)==null||d.addEventListener("focusin",i(this,g)),(u=this.div)==null||u.addEventListener("focusout",i(this,b))}serialize(d=!1,u=null){(0,f.unreachable)("An editor must be serializable")}static deserialize(d,u,M){const D=new this.prototype.constructor({parent:u,id:u.getNextId(),uiManager:M});D.rotation=d.rotation;const[$,X]=D.pageDimensions,[B,z,j,Y]=D.getRectInCurrentCoords(d.rect,X);return D.x=B/$,D.y=z/X,D.width=j/$,D.height=Y/X,D}remove(){var d;this.div.removeEventListener("focusin",i(this,g)),this.div.removeEventListener("focusout",i(this,b)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),(d=i(this,a))==null||d.remove(),he(this,a,null),he(this,T,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(W(this,V,Tn).call(this),i(this,s).classList.remove("hidden"))}select(){var d;this.makeResizable(),(d=this.div)==null||d.classList.add("selectedEditor")}unselect(){var d,u,M;(d=i(this,s))==null||d.classList.add("hidden"),(u=this.div)==null||u.classList.remove("selectedEditor"),(M=this.div)!=null&&M.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(d,u){}disableEditing(){i(this,a)&&(i(this,a).hidden=!0)}enableEditing(){i(this,a)&&(i(this,a).hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return i(this,x)}set isEditing(d){he(this,x,d),this.parent&&(d?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(d,u){he(this,C,!0);const M=d/u,{style:D}=this.div;D.aspectRatio=M,D.height="auto"}static get MIN_SIZE(){return 16}};m=new WeakMap,r=new WeakMap,a=new WeakMap,T=new WeakMap,E=new WeakMap,C=new WeakMap,s=new WeakMap,g=new WeakMap,b=new WeakMap,P=new WeakMap,x=new WeakMap,y=new WeakMap,A=new WeakMap,o=new WeakMap,c=new WeakSet,li=function([d,u],M,D){[M,D]=this.screenToPageTranslation(M,D),this.x+=M/d,this.y+=D/u,this.fixAndSetPosition()},w=new WeakSet,ci=function(){const[d,u]=this.parentDimensions,{_borderLineWidth:M}=R,D=M/d,$=M/u;switch(this.rotation){case 90:return[-D,$];case 180:return[D,$];case 270:return[D,-$];default:return[-D,-$]}},F=new WeakSet,di=function(d,u,M){switch(M){case 90:return[u,-d];case 180:return[-d,-u];case 270:return[-u,d];default:return[d,u]}},G=new WeakSet,hi=function(d){switch(d){case 90:{const[u,M]=this.pageDimensions;return[0,-u/M,M/u,0]}case 180:return[-1,0,0,-1];case 270:{const[u,M]=this.pageDimensions;return[0,u/M,-M/u,0]}default:return[1,0,0,1]}},V=new WeakSet,Tn=function(){if(i(this,s))return;he(this,s,document.createElement("div")),i(this,s).classList.add("resizers");const d=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||d.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const u of d){const M=document.createElement("div");i(this,s).append(M),M.classList.add("resizer",u),M.addEventListener("pointerdown",W(this,re,xn).bind(this,u)),M.addEventListener("contextmenu",I.noContextMenu)}this.div.prepend(i(this,s))},re=new WeakSet,xn=function(d,u){u.preventDefault();const{isMac:M}=f.FeatureTest.platform;if(u.button!==0||u.ctrlKey&&M)return;const D=W(this,K,Mn).bind(this,d),$=this._isDraggable;this._isDraggable=!1;const X={passive:!0,capture:!0};window.addEventListener("pointermove",D,X);const B=this.x,z=this.y,j=this.width,Y=this.height,ce=this.parent.div.style.cursor,oe=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(u.target).cursor;const Se=()=>{this._isDraggable=$,window.removeEventListener("pointerup",Se),window.removeEventListener("blur",Se),window.removeEventListener("pointermove",D,X),this.parent.div.style.cursor=ce,this.div.style.cursor=oe;const Ee=this.x,ye=this.y,ne=this.width,fe=this.height;Ee===B&&ye===z&&ne===j&&fe===Y||this.addCommands({cmd:()=>{this.width=ne,this.height=fe,this.x=Ee,this.y=ye;const[ae,de]=this.parentDimensions;this.setDims(ae*ne,de*fe),this.fixAndSetPosition()},undo:()=>{this.width=j,this.height=Y,this.x=B,this.y=z;const[ae,de]=this.parentDimensions;this.setDims(ae*j,de*Y),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",Se),window.addEventListener("blur",Se)},K=new WeakSet,Mn=function(d,u){const[M,D]=this.parentDimensions,$=this.x,X=this.y,B=this.width,z=this.height,j=R.MIN_SIZE/M,Y=R.MIN_SIZE/D,ce=Ae=>Math.round(Ae*1e4)/1e4,oe=W(this,G,hi).call(this,this.rotation),Se=(Ae,ee)=>[oe[0]*Ae+oe[2]*ee,oe[1]*Ae+oe[3]*ee],Ee=W(this,G,hi).call(this,360-this.rotation),ye=(Ae,ee)=>[Ee[0]*Ae+Ee[2]*ee,Ee[1]*Ae+Ee[3]*ee];let ne,fe,ae=!1,de=!1;switch(d){case"topLeft":ae=!0,ne=(Ae,ee)=>[0,0],fe=(Ae,ee)=>[Ae,ee];break;case"topMiddle":ne=(Ae,ee)=>[Ae/2,0],fe=(Ae,ee)=>[Ae/2,ee];break;case"topRight":ae=!0,ne=(Ae,ee)=>[Ae,0],fe=(Ae,ee)=>[0,ee];break;case"middleRight":de=!0,ne=(Ae,ee)=>[Ae,ee/2],fe=(Ae,ee)=>[0,ee/2];break;case"bottomRight":ae=!0,ne=(Ae,ee)=>[Ae,ee],fe=(Ae,ee)=>[0,0];break;case"bottomMiddle":ne=(Ae,ee)=>[Ae/2,ee],fe=(Ae,ee)=>[Ae/2,0];break;case"bottomLeft":ae=!0,ne=(Ae,ee)=>[0,ee],fe=(Ae,ee)=>[Ae,0];break;case"middleLeft":de=!0,ne=(Ae,ee)=>[0,ee/2],fe=(Ae,ee)=>[Ae,ee/2];break}const be=ne(B,z),Ie=fe(B,z);let Le=Se(...Ie);const De=ce($+Le[0]),Be=ce(X+Le[1]);let je=1,He=1,[qe,Ge]=this.screenToPageTranslation(u.movementX,u.movementY);if([qe,Ge]=ye(qe/M,Ge/D),ae){const Ae=Math.hypot(B,z);je=He=Math.max(Math.min(Math.hypot(Ie[0]-be[0]-qe,Ie[1]-be[1]-Ge)/Ae,1/B,1/z),j/B,Y/z)}else de?je=Math.max(j,Math.min(1,Math.abs(Ie[0]-be[0]-qe)))/B:He=Math.max(Y,Math.min(1,Math.abs(Ie[1]-be[1]-Ge)))/z;const et=ce(B*je),Te=ce(z*He);Le=Se(...fe(et,Te));const U=De-Le[0],J=Be-Le[1];this.width=et,this.height=Te,this.x=U,this.y=J,this.setDims(M*et,D*Te),this.fixAndSetPosition()},se=new WeakSet,ui=async function(){var M;const d=i(this,a);if(!d)return;if(!i(this,m)&&!i(this,r)){d.classList.remove("done"),(M=i(this,T))==null||M.remove();return}R._l10nPromise.get("editor_alt_text_edit_button_label").then(D=>{d.setAttribute("aria-label",D)});let u=i(this,T);if(!u){he(this,T,u=document.createElement("span")),u.className="tooltip",u.setAttribute("role","tooltip");const D=u.id=`alt-text-tooltip-${this.id}`;d.setAttribute("aria-describedby",D);const $=100;d.addEventListener("mouseenter",()=>{he(this,E,setTimeout(()=>{he(this,E,null),i(this,T).classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},$))}),d.addEventListener("mouseleave",()=>{var X;clearTimeout(i(this,E)),he(this,E,null),(X=i(this,T))==null||X.classList.remove("show")})}d.classList.add("done"),u.innerText=i(this,r)?await R._l10nPromise.get("editor_alt_text_decorative_tooltip"):i(this,m),u.parentNode||d.append(u)},Me=new WeakSet,Rn=function(d){if(!this._isDraggable)return;const u=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let M,D;u&&(M={passive:!0,capture:!0},D=X=>{const[B,z]=this.screenToPageTranslation(X.movementX,X.movementY);this._uiManager.dragSelectedEditors(B,z)},window.addEventListener("pointermove",D,M));const $=()=>{if(window.removeEventListener("pointerup",$),window.removeEventListener("blur",$),u&&window.removeEventListener("pointermove",D,M),he(this,P,!1),!this._uiManager.endDragSession()){const{isMac:X}=f.FeatureTest.platform;d.ctrlKey&&!X||d.shiftKey||d.metaKey&&X?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",$),window.addEventListener("blur",$)},H(R,F),Je(R,"_borderLineWidth",-1),Je(R,"_colorManager",new n.ColorManager),Je(R,"_zIndex",1),Je(R,"SMALL_EDITOR_SIZE",0);let k=R;t.AnnotationEditor=k;class _ extends k{constructor(d){super(d),this.annotationElementId=d.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(e,t,l)=>{var C,s,g,b,P,fi,A,o,c,S,w,Ln,N,G,le,V,Z,re,te,K,ue,se,Ce,Me,q,R,O,d,u,M,D,$,X,B,z,j,Y,ce,oe,Se,Ee,ye,ne,fe,ae,de,be,In,Le,pi,Be,gi,He,Vt,Ge,mi,Te,bi,J,ot,ee,St,ve,kn,_e,On,xe,_i,Ve,Et,Oe,vi;Object.defineProperty(t,"__esModule",{value:!0}),t.KeyboardManager=t.CommandManager=t.ColorManager=t.AnnotationEditorUIManager=void 0,t.bindEvents=I,t.opacityToHex=k;var n=l(1),f=l(6);function I(me,L,Q){for(const pe of Q)L.addEventListener(pe,me[pe].bind(me))}function k(me){return Math.round(Math.min(255,Math.max(1,255*me))).toString(16).padStart(2,"0")}class _{constructor(){H(this,C,0)}getId(){return`${n.AnnotationEditorPrefix}${ft(this,C)._++}`}}C=new WeakMap;const y=class y{constructor(){H(this,P);H(this,s,(0,n.getUuid)());H(this,g,0);H(this,b,null)}static get _isSVGFittingCanvas(){const L='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',pe=new OffscreenCanvas(1,3).getContext("2d"),we=new Image;we.src=L;const Pe=we.decode().then(()=>(pe.drawImage(we,0,0,1,1,0,0,1,3),new Uint32Array(pe.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,n.shadow)(this,"_isSVGFittingCanvas",Pe)}async getFromFile(L){const{lastModified:Q,name:pe,size:we,type:Pe}=L;return W(this,P,fi).call(this,`${Q}_${pe}_${we}_${Pe}`,L)}async getFromUrl(L){return W(this,P,fi).call(this,L,L)}async getFromId(L){i(this,b)||he(this,b,new Map);const Q=i(this,b).get(L);return Q?Q.bitmap?(Q.refCounter+=1,Q):Q.file?this.getFromFile(Q.file):this.getFromUrl(Q.url):null}getSvgUrl(L){const Q=i(this,b).get(L);return Q!=null&&Q.isSvg?Q.svgUrl:null}deleteId(L){i(this,b)||he(this,b,new Map);const Q=i(this,b).get(L);Q&&(Q.refCounter-=1,Q.refCounter===0&&(Q.bitmap=null))}isValidId(L){return L.startsWith(`image_${i(this,s)}_`)}};s=new WeakMap,g=new WeakMap,b=new WeakMap,P=new WeakSet,fi=async function(L,Q){i(this,b)||he(this,b,new Map);let pe=i(this,b).get(L);if(pe===null)return null;if(pe!=null&&pe.bitmap)return pe.refCounter+=1,pe;try{pe||(pe={bitmap:null,id:`image_${i(this,s)}_${ft(this,g)._++}`,refCounter:0,isSvg:!1});let we;if(typeof Q=="string"){pe.url=Q;const Pe=await fetch(Q);if(!Pe.ok)throw new Error(Pe.statusText);we=await Pe.blob()}else we=pe.file=Q;if(we.type==="image/svg+xml"){const Pe=y._isSVGFittingCanvas,Re=new FileReader,Ne=new Image,ze=new Promise((Ue,tt)=>{Ne.onload=()=>{pe.bitmap=Ne,pe.isSvg=!0,Ue()},Re.onload=async()=>{const Xe=pe.svgUrl=Re.result;Ne.src=await Pe?`${Xe}#svgView(preserveAspectRatio(none))`:Xe},Ne.onerror=Re.onerror=tt});Re.readAsDataURL(we),await ze}else pe.bitmap=await createImageBitmap(we);pe.refCounter=1}catch(we){console.error(we),pe=null}return i(this,b).set(L,pe),pe&&i(this,b).set(pe.id,pe),pe};let m=y;class r{constructor(L=128){H(this,A,[]);H(this,o,!1);H(this,c,void 0);H(this,S,-1);he(this,c,L)}add({cmd:L,undo:Q,mustExec:pe,type:we=NaN,overwriteIfSameType:Pe=!1,keepUndo:Re=!1}){if(pe&&L(),i(this,o))return;const Ne={cmd:L,undo:Q,type:we};if(i(this,S)===-1){i(this,A).length>0&&(i(this,A).length=0),he(this,S,0),i(this,A).push(Ne);return}if(Pe&&i(this,A)[i(this,S)].type===we){Re&&(Ne.undo=i(this,A)[i(this,S)].undo),i(this,A)[i(this,S)]=Ne;return}const ze=i(this,S)+1;ze===i(this,c)?i(this,A).splice(0,1):(he(this,S,ze),ze<i(this,A).length&&i(this,A).splice(ze)),i(this,A).push(Ne)}undo(){i(this,S)!==-1&&(he(this,o,!0),i(this,A)[i(this,S)].undo(),he(this,o,!1),he(this,S,i(this,S)-1))}redo(){i(this,S)<i(this,A).length-1&&(he(this,S,i(this,S)+1),he(this,o,!0),i(this,A)[i(this,S)].cmd(),he(this,o,!1))}hasSomethingToUndo(){return i(this,S)!==-1}hasSomethingToRedo(){return i(this,S)<i(this,A).length-1}destroy(){he(this,A,null)}}A=new WeakMap,o=new WeakMap,c=new WeakMap,S=new WeakMap,t.CommandManager=r;class a{constructor(L){H(this,w);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:Q}=n.FeatureTest.platform;for(const[pe,we,Pe={}]of L)for(const Re of pe){const Ne=Re.startsWith("mac+");Q&&Ne?(this.callbacks.set(Re.slice(4),{callback:we,options:Pe}),this.allKeys.add(Re.split("+").at(-1))):!Q&&!Ne&&(this.callbacks.set(Re,{callback:we,options:Pe}),this.allKeys.add(Re.split("+").at(-1)))}}exec(L,Q){if(!this.allKeys.has(Q.key))return;const pe=this.callbacks.get(W(this,w,Ln).call(this,Q));if(!pe)return;const{callback:we,options:{bubbles:Pe=!1,args:Re=[],checker:Ne=null}}=pe;Ne&&!Ne(L,Q)||(we.bind(L,...Re)(),Pe||(Q.stopPropagation(),Q.preventDefault()))}}w=new WeakSet,Ln=function(L){L.altKey&&this.buffer.push("alt"),L.ctrlKey&&this.buffer.push("ctrl"),L.metaKey&&this.buffer.push("meta"),L.shiftKey&&this.buffer.push("shift"),this.buffer.push(L.key);const Q=this.buffer.join("+");return this.buffer.length=0,Q},t.KeyboardManager=a;const F=class F{get _colors(){const L=new Map([["CanvasText",null],["Canvas",null]]);return(0,f.getColorValues)(L),(0,n.shadow)(this,"_colors",L)}convert(L){const Q=(0,f.getRGB)(L);if(!window.matchMedia("(forced-colors: active)").matches)return Q;for(const[pe,we]of this._colors)if(we.every((Pe,Re)=>Pe===Q[Re]))return F._colorsMapping.get(pe);return Q}getHexCode(L){const Q=this._colors.get(L);return Q?n.Util.makeHexColor(...Q):L}};Je(F,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let T=F;t.ColorManager=T;const $e=class $e{constructor(L,Q,pe,we,Pe,Re){H(this,be);H(this,Le);H(this,Be);H(this,He);H(this,Ge);H(this,Te);H(this,J);H(this,ee);H(this,ve);H(this,_e);H(this,xe);H(this,Ve);H(this,Oe);H(this,N,null);H(this,G,new Map);H(this,le,new Map);H(this,V,null);H(this,Z,null);H(this,re,new r);H(this,te,0);H(this,K,new Set);H(this,ue,null);H(this,se,null);H(this,Ce,new Set);H(this,Me,null);H(this,q,new _);H(this,R,!1);H(this,O,!1);H(this,d,null);H(this,u,n.AnnotationEditorType.NONE);H(this,M,new Set);H(this,D,null);H(this,$,this.blur.bind(this));H(this,X,this.focus.bind(this));H(this,B,this.copy.bind(this));H(this,z,this.cut.bind(this));H(this,j,this.paste.bind(this));H(this,Y,this.keydown.bind(this));H(this,ce,this.onEditingAction.bind(this));H(this,oe,this.onPageChanging.bind(this));H(this,Se,this.onScaleChanging.bind(this));H(this,Ee,this.onRotationChanging.bind(this));H(this,ye,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});H(this,ne,[0,0]);H(this,fe,null);H(this,ae,null);H(this,de,null);he(this,ae,L),he(this,de,Q),he(this,V,pe),this._eventBus=we,this._eventBus._on("editingaction",i(this,ce)),this._eventBus._on("pagechanging",i(this,oe)),this._eventBus._on("scalechanging",i(this,Se)),this._eventBus._on("rotationchanging",i(this,Ee)),he(this,Z,Pe.annotationStorage),he(this,Me,Pe.filterFactory),he(this,D,Re),this.viewParameters={realScale:f.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}static get _keyboardManager(){const L=$e.prototype,Q=Pe=>{const{activeElement:Re}=document;return Re&&i(Pe,ae).contains(Re)&&Pe.hasSomethingToControl()},pe=this.TRANSLATE_SMALL,we=this.TRANSLATE_BIG;return(0,n.shadow)(this,"_keyboardManager",new a([[["ctrl+a","mac+meta+a"],L.selectAll],[["ctrl+z","mac+meta+z"],L.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],L.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],L.delete],[["Escape","mac+Escape"],L.unselectAll],[["ArrowLeft","mac+ArrowLeft"],L.translateSelectedEditors,{args:[-pe,0],checker:Q}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],L.translateSelectedEditors,{args:[-we,0],checker:Q}],[["ArrowRight","mac+ArrowRight"],L.translateSelectedEditors,{args:[pe,0],checker:Q}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],L.translateSelectedEditors,{args:[we,0],checker:Q}],[["ArrowUp","mac+ArrowUp"],L.translateSelectedEditors,{args:[0,-pe],checker:Q}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],L.translateSelectedEditors,{args:[0,-we],checker:Q}],[["ArrowDown","mac+ArrowDown"],L.translateSelectedEditors,{args:[0,pe],checker:Q}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],L.translateSelectedEditors,{args:[0,we],checker:Q}]]))}destroy(){W(this,He,Vt).call(this),W(this,Le,pi).call(this),this._eventBus._off("editingaction",i(this,ce)),this._eventBus._off("pagechanging",i(this,oe)),this._eventBus._off("scalechanging",i(this,Se)),this._eventBus._off("rotationchanging",i(this,Ee));for(const L of i(this,le).values())L.destroy();i(this,le).clear(),i(this,G).clear(),i(this,Ce).clear(),he(this,N,null),i(this,M).clear(),i(this,re).destroy(),i(this,V).destroy()}get hcmFilter(){return(0,n.shadow)(this,"hcmFilter",i(this,D)?i(this,Me).addHCMFilter(i(this,D).foreground,i(this,D).background):"none")}get direction(){return(0,n.shadow)(this,"direction",getComputedStyle(i(this,ae)).direction)}editAltText(L){var Q;(Q=i(this,V))==null||Q.editAltText(this,L)}onPageChanging({pageNumber:L}){he(this,te,L-1)}focusMainContainer(){i(this,ae).focus()}findParent(L,Q){for(const pe of i(this,le).values()){const{x:we,y:Pe,width:Re,height:Ne}=pe.div.getBoundingClientRect();if(L>=we&&L<=we+Re&&Q>=Pe&&Q<=Pe+Ne)return pe}return null}disableUserSelect(L=!1){i(this,de).classList.toggle("noUserSelect",L)}addShouldRescale(L){i(this,Ce).add(L)}removeShouldRescale(L){i(this,Ce).delete(L)}onScaleChanging({scale:L}){this.commitOrRemove(),this.viewParameters.realScale=L*f.PixelsPerInch.PDF_TO_CSS_UNITS;for(const Q of i(this,Ce))Q.onScaleChanging()}onRotationChanging({pagesRotation:L}){this.commitOrRemove(),this.viewParameters.rotation=L}addToAnnotationStorage(L){!L.isEmpty()&&i(this,Z)&&!i(this,Z).has(L.id)&&i(this,Z).setValue(L.id,L)}blur(){if(!this.hasSelection)return;const{activeElement:L}=document;for(const Q of i(this,M))if(Q.div.contains(L)){he(this,d,[Q,L]),Q._focusEventsAllowed=!1;break}}focus(){if(!i(this,d))return;const[L,Q]=i(this,d);he(this,d,null),Q.addEventListener("focusin",()=>{L._focusEventsAllowed=!0},{once:!0}),Q.focus()}addEditListeners(){W(this,Be,gi).call(this),W(this,Ge,mi).call(this)}removeEditListeners(){W(this,He,Vt).call(this),W(this,Te,bi).call(this)}copy(L){var pe;if(L.preventDefault(),(pe=i(this,N))==null||pe.commitOrRemove(),!this.hasSelection)return;const Q=[];for(const we of i(this,M)){const Pe=we.serialize(!0);Pe&&Q.push(Pe)}Q.length!==0&&L.clipboardData.setData("application/pdfjs",JSON.stringify(Q))}cut(L){this.copy(L),this.delete()}paste(L){L.preventDefault();const{clipboardData:Q}=L;for(const Pe of Q.items)for(const Re of i(this,se))if(Re.isHandlingMimeForPasting(Pe.type)){Re.paste(Pe,this.currentLayer);return}let pe=Q.getData("application/pdfjs");if(!pe)return;try{pe=JSON.parse(pe)}catch(Pe){(0,n.warn)(`paste: "${Pe.message}".`);return}if(!Array.isArray(pe))return;this.unselectAll();const we=this.currentLayer;try{const Pe=[];for(const ze of pe){const Ue=we.deserialize(ze);if(!Ue)return;Pe.push(Ue)}const Re=()=>{for(const ze of Pe)W(this,xe,_i).call(this,ze);W(this,Oe,vi).call(this,Pe)},Ne=()=>{for(const ze of Pe)ze.remove()};this.addCommands({cmd:Re,undo:Ne,mustExec:!0})}catch(Pe){(0,n.warn)(`paste: "${Pe.message}".`)}}keydown(L){var Q;(Q=this.getActive())!=null&&Q.shouldGetKeyboardEvents()||$e._keyboardManager.exec(this,L)}onEditingAction(L){["undo","redo","delete","selectAll"].includes(L.name)&&this[L.name]()}setEditingState(L){L?(W(this,be,In).call(this),W(this,Be,gi).call(this),W(this,Ge,mi).call(this),W(this,J,ot).call(this,{isEditing:i(this,u)!==n.AnnotationEditorType.NONE,isEmpty:W(this,Ve,Et).call(this),hasSomethingToUndo:i(this,re).hasSomethingToUndo(),hasSomethingToRedo:i(this,re).hasSomethingToRedo(),hasSelectedEditor:!1})):(W(this,Le,pi).call(this),W(this,He,Vt).call(this),W(this,Te,bi).call(this),W(this,J,ot).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(L){if(!i(this,se)){he(this,se,L);for(const Q of i(this,se))W(this,ee,St).call(this,Q.defaultPropertiesToUpdate)}}getId(){return i(this,q).getId()}get currentLayer(){return i(this,le).get(i(this,te))}getLayer(L){return i(this,le).get(L)}get currentPageIndex(){return i(this,te)}addLayer(L){i(this,le).set(L.pageIndex,L),i(this,R)?L.enable():L.disable()}removeLayer(L){i(this,le).delete(L.pageIndex)}updateMode(L,Q=null){if(i(this,u)!==L){if(he(this,u,L),L===n.AnnotationEditorType.NONE){this.setEditingState(!1),W(this,_e,On).call(this);return}this.setEditingState(!0),W(this,ve,kn).call(this),this.unselectAll();for(const pe of i(this,le).values())pe.updateMode(L);if(Q){for(const pe of i(this,G).values())if(pe.annotationElementId===Q){this.setSelected(pe),pe.enterInEditMode();break}}}}updateToolbar(L){L!==i(this,u)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:L})}updateParams(L,Q){if(i(this,se)){if(L===n.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(L);return}for(const pe of i(this,M))pe.updateParams(L,Q);for(const pe of i(this,se))pe.updateDefaultParams(L,Q)}}enableWaiting(L=!1){if(i(this,O)!==L){he(this,O,L);for(const Q of i(this,le).values())L?Q.disableClick():Q.enableClick(),Q.div.classList.toggle("waiting",L)}}getEditors(L){const Q=[];for(const pe of i(this,G).values())pe.pageIndex===L&&Q.push(pe);return Q}getEditor(L){return i(this,G).get(L)}addEditor(L){i(this,G).set(L.id,L)}removeEditor(L){var Q;i(this,G).delete(L.id),this.unselect(L),(!L.annotationElementId||!i(this,K).has(L.annotationElementId))&&((Q=i(this,Z))==null||Q.remove(L.id))}addDeletedAnnotationElement(L){i(this,K).add(L.annotationElementId),L.deleted=!0}isDeletedAnnotationElement(L){return i(this,K).has(L)}removeDeletedAnnotationElement(L){i(this,K).delete(L.annotationElementId),L.deleted=!1}setActiveEditor(L){i(this,N)!==L&&(he(this,N,L),L&&W(this,ee,St).call(this,L.propertiesToUpdate))}toggleSelected(L){if(i(this,M).has(L)){i(this,M).delete(L),L.unselect(),W(this,J,ot).call(this,{hasSelectedEditor:this.hasSelection});return}i(this,M).add(L),L.select(),W(this,ee,St).call(this,L.propertiesToUpdate),W(this,J,ot).call(this,{hasSelectedEditor:!0})}setSelected(L){for(const Q of i(this,M))Q!==L&&Q.unselect();i(this,M).clear(),i(this,M).add(L),L.select(),W(this,ee,St).call(this,L.propertiesToUpdate),W(this,J,ot).call(this,{hasSelectedEditor:!0})}isSelected(L){return i(this,M).has(L)}unselect(L){L.unselect(),i(this,M).delete(L),W(this,J,ot).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return i(this,M).size!==0}undo(){i(this,re).undo(),W(this,J,ot).call(this,{hasSomethingToUndo:i(this,re).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:W(this,Ve,Et).call(this)})}redo(){i(this,re).redo(),W(this,J,ot).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:i(this,re).hasSomethingToRedo(),isEmpty:W(this,Ve,Et).call(this)})}addCommands(L){i(this,re).add(L),W(this,J,ot).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:W(this,Ve,Et).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const L=[...i(this,M)],Q=()=>{for(const we of L)we.remove()},pe=()=>{for(const we of L)W(this,xe,_i).call(this,we)};this.addCommands({cmd:Q,undo:pe,mustExec:!0})}commitOrRemove(){var L;(L=i(this,N))==null||L.commitOrRemove()}hasSomethingToControl(){return i(this,N)||this.hasSelection}selectAll(){for(const L of i(this,M))L.commit();W(this,Oe,vi).call(this,i(this,G).values())}unselectAll(){if(i(this,N)){i(this,N).commitOrRemove();return}if(this.hasSelection){for(const L of i(this,M))L.unselect();i(this,M).clear(),W(this,J,ot).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(L,Q,pe=!1){if(pe||this.commitOrRemove(),!this.hasSelection)return;i(this,ne)[0]+=L,i(this,ne)[1]+=Q;const[we,Pe]=i(this,ne),Re=[...i(this,M)],Ne=1e3;i(this,fe)&&clearTimeout(i(this,fe)),he(this,fe,setTimeout(()=>{he(this,fe,null),i(this,ne)[0]=i(this,ne)[1]=0,this.addCommands({cmd:()=>{for(const ze of Re)i(this,G).has(ze.id)&&ze.translateInPage(we,Pe)},undo:()=>{for(const ze of Re)i(this,G).has(ze.id)&&ze.translateInPage(-we,-Pe)},mustExec:!1})},Ne));for(const ze of Re)ze.translateInPage(L,Q)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),he(this,ue,new Map);for(const L of i(this,M))i(this,ue).set(L,{savedX:L.x,savedY:L.y,savedPageIndex:L.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!i(this,ue))return!1;this.disableUserSelect(!1);const L=i(this,ue);he(this,ue,null);let Q=!1;for(const[{x:we,y:Pe,pageIndex:Re},Ne]of L)Ne.newX=we,Ne.newY=Pe,Ne.newPageIndex=Re,Q||(Q=we!==Ne.savedX||Pe!==Ne.savedY||Re!==Ne.savedPageIndex);if(!Q)return!1;const pe=(we,Pe,Re,Ne)=>{if(i(this,G).has(we.id)){const ze=i(this,le).get(Ne);ze?we._setParentAndPosition(ze,Pe,Re):(we.pageIndex=Ne,we.x=Pe,we.y=Re)}};return this.addCommands({cmd:()=>{for(const[we,{newX:Pe,newY:Re,newPageIndex:Ne}]of L)pe(we,Pe,Re,Ne)},undo:()=>{for(const[we,{savedX:Pe,savedY:Re,savedPageIndex:Ne}]of L)pe(we,Pe,Re,Ne)},mustExec:!0}),!0}dragSelectedEditors(L,Q){if(i(this,ue))for(const pe of i(this,ue).keys())pe.drag(L,Q)}rebuild(L){if(L.parent===null){const Q=this.getLayer(L.pageIndex);Q?(Q.changeParent(L),Q.addOrRebuild(L)):(this.addEditor(L),this.addToAnnotationStorage(L),L.rebuild())}else L.parent.addOrRebuild(L)}isActive(L){return i(this,N)===L}getActive(){return i(this,N)}getMode(){return i(this,u)}get imageManager(){return(0,n.shadow)(this,"imageManager",new m)}};N=new WeakMap,G=new WeakMap,le=new WeakMap,V=new WeakMap,Z=new WeakMap,re=new WeakMap,te=new WeakMap,K=new WeakMap,ue=new WeakMap,se=new WeakMap,Ce=new WeakMap,Me=new WeakMap,q=new WeakMap,R=new WeakMap,O=new WeakMap,d=new WeakMap,u=new WeakMap,M=new WeakMap,D=new WeakMap,$=new WeakMap,X=new WeakMap,B=new WeakMap,z=new WeakMap,j=new WeakMap,Y=new WeakMap,ce=new WeakMap,oe=new WeakMap,Se=new WeakMap,Ee=new WeakMap,ye=new WeakMap,ne=new WeakMap,fe=new WeakMap,ae=new WeakMap,de=new WeakMap,be=new WeakSet,In=function(){window.addEventListener("focus",i(this,X)),window.addEventListener("blur",i(this,$))},Le=new WeakSet,pi=function(){window.removeEventListener("focus",i(this,X)),window.removeEventListener("blur",i(this,$))},Be=new WeakSet,gi=function(){window.addEventListener("keydown",i(this,Y),{capture:!0})},He=new WeakSet,Vt=function(){window.removeEventListener("keydown",i(this,Y),{capture:!0})},Ge=new WeakSet,mi=function(){document.addEventListener("copy",i(this,B)),document.addEventListener("cut",i(this,z)),document.addEventListener("paste",i(this,j))},Te=new WeakSet,bi=function(){document.removeEventListener("copy",i(this,B)),document.removeEventListener("cut",i(this,z)),document.removeEventListener("paste",i(this,j))},J=new WeakSet,ot=function(L){Object.entries(L).some(([pe,we])=>i(this,ye)[pe]!==we)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(i(this,ye),L)})},ee=new WeakSet,St=function(L){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:L})},ve=new WeakSet,kn=function(){if(!i(this,R)){he(this,R,!0);for(const L of i(this,le).values())L.enable()}},_e=new WeakSet,On=function(){if(this.unselectAll(),i(this,R)){he(this,R,!1);for(const L of i(this,le).values())L.disable()}},xe=new WeakSet,_i=function(L){const Q=i(this,le).get(L.pageIndex);Q?Q.addOrRebuild(L):this.addEditor(L)},Ve=new WeakSet,Et=function(){if(i(this,G).size===0)return!0;if(i(this,G).size===1)for(const L of i(this,G).values())return L.isEmpty();return!1},Oe=new WeakSet,vi=function(L){i(this,M).clear();for(const Q of L)Q.isEmpty()||(i(this,M).add(Q),Q.select());W(this,J,ot).call(this,{hasSelectedEditor:!0})},Je($e,"TRANSLATE_SMALL",1),Je($e,"TRANSLATE_BIG",10);let E=$e;t.AnnotationEditorUIManager=E},(e,t,l)=>{var te,K,ue,se,Ce,Me,q,R,O,d,u,M,gt,$,mt,B,wi,j,Ut,ce,Ht,Se,At,ye,Pt;Object.defineProperty(t,"__esModule",{value:!0}),t.StatTimer=t.RenderingCancelledException=t.PixelsPerInch=t.PageViewport=t.PDFDateString=t.DOMStandardFontDataFactory=t.DOMSVGFactory=t.DOMFilterFactory=t.DOMCanvasFactory=t.DOMCMapReaderFactory=void 0,t.deprecated=S,t.getColorValues=G,t.getCurrentTransform=le,t.getCurrentTransformInverse=V,t.getFilenameFromUrl=P,t.getPdfFilenameFromUrl=x,t.getRGB=N,t.getXfaPageViewport=F,t.isDataScheme=g,t.isPdfFile=b,t.isValidFetchUrl=A,t.loadScript=c,t.noContextMenu=o,t.setLayerDimensions=Z;var n=l(7),f=l(1);const I="http://www.w3.org/2000/svg",re=class re{};Je(re,"CSS",96),Je(re,"PDF",72),Je(re,"PDF_TO_CSS_UNITS",re.CSS/re.PDF);let k=re;t.PixelsPerInch=k;class _ extends n.BaseFilterFactory{constructor({docId:de,ownerDocument:be=globalThis.document}={}){super();H(this,M);H(this,$);H(this,B);H(this,j);H(this,ce);H(this,Se);H(this,ye);H(this,te,void 0);H(this,K,void 0);H(this,ue,void 0);H(this,se,void 0);H(this,Ce,void 0);H(this,Me,void 0);H(this,q,void 0);H(this,R,void 0);H(this,O,void 0);H(this,d,void 0);H(this,u,0);he(this,ue,de),he(this,se,be)}addFilter(de){if(!de)return"none";let be=i(this,M,gt).get(de);if(be)return be;let Ie,Le,De,Be;if(de.length===1){const Ge=de[0],et=new Array(256);for(let Te=0;Te<256;Te++)et[Te]=Ge[Te]/255;Be=Ie=Le=De=et.join(",")}else{const[Ge,et,Te]=de,U=new Array(256),J=new Array(256),Ae=new Array(256);for(let ee=0;ee<256;ee++)U[ee]=Ge[ee]/255,J[ee]=et[ee]/255,Ae[ee]=Te[ee]/255;Ie=U.join(","),Le=J.join(","),De=Ae.join(","),Be=`${Ie}${Le}${De}`}if(be=i(this,M,gt).get(Be),be)return i(this,M,gt).set(de,be),be;const je=`g_${i(this,ue)}_transfer_map_${ft(this,u)._++}`,He=`url(#${je})`;i(this,M,gt).set(de,He),i(this,M,gt).set(Be,He);const qe=W(this,j,Ut).call(this,je);return W(this,Se,At).call(this,Ie,Le,De,qe),He}addHCMFilter(de,be){var et;const Ie=`${de}-${be}`;if(i(this,Me)===Ie)return i(this,q);if(he(this,Me,Ie),he(this,q,"none"),(et=i(this,Ce))==null||et.remove(),!de||!be)return i(this,q);const Le=W(this,ye,Pt).call(this,de);de=f.Util.makeHexColor(...Le);const De=W(this,ye,Pt).call(this,be);if(be=f.Util.makeHexColor(...De),i(this,$,mt).style.color="",de==="#000000"&&be==="#ffffff"||de===be)return i(this,q);const Be=new Array(256);for(let Te=0;Te<=255;Te++){const U=Te/255;Be[Te]=U<=.03928?U/12.92:((U+.055)/1.055)**2.4}const je=Be.join(","),He=`g_${i(this,ue)}_hcm_filter`,qe=he(this,R,W(this,j,Ut).call(this,He));W(this,Se,At).call(this,je,je,je,qe),W(this,B,wi).call(this,qe);const Ge=(Te,U)=>{const J=Le[Te]/255,Ae=De[Te]/255,ee=new Array(U+1);for(let ge=0;ge<=U;ge++)ee[ge]=J+ge/U*(Ae-J);return ee.join(",")};return W(this,Se,At).call(this,Ge(0,5),Ge(1,5),Ge(2,5),qe),he(this,q,`url(#${He})`),i(this,q)}addHighlightHCMFilter(de,be,Ie,Le){var Ae;const De=`${de}-${be}-${Ie}-${Le}`;if(i(this,O)===De)return i(this,d);if(he(this,O,De),he(this,d,"none"),(Ae=i(this,R))==null||Ae.remove(),!de||!be)return i(this,d);const[Be,je]=[de,be].map(W(this,ye,Pt).bind(this));let He=Math.round(.2126*Be[0]+.7152*Be[1]+.0722*Be[2]),qe=Math.round(.2126*je[0]+.7152*je[1]+.0722*je[2]),[Ge,et]=[Ie,Le].map(W(this,ye,Pt).bind(this));qe<He&&([He,qe,Ge,et]=[qe,He,et,Ge]),i(this,$,mt).style.color="";const Te=(ee,ge,ve)=>{const ie=new Array(256),_e=(qe-He)/ve,ke=ee/255,xe=(ge-ee)/(255*ve);let Fe=0;for(let Ve=0;Ve<=ve;Ve++){const We=Math.round(He+Ve*_e),Oe=ke+Ve*xe;for(let Ye=Fe;Ye<=We;Ye++)ie[Ye]=Oe;Fe=We+1}for(let Ve=Fe;Ve<256;Ve++)ie[Ve]=ie[Fe-1];return ie.join(",")},U=`g_${i(this,ue)}_hcm_highlight_filter`,J=he(this,R,W(this,j,Ut).call(this,U));return W(this,B,wi).call(this,J),W(this,Se,At).call(this,Te(Ge[0],et[0],5),Te(Ge[1],et[1],5),Te(Ge[2],et[2],5),J),he(this,d,`url(#${U})`),i(this,d)}destroy(de=!1){de&&(i(this,q)||i(this,d))||(i(this,K)&&(i(this,K).parentNode.parentNode.remove(),he(this,K,null)),i(this,te)&&(i(this,te).clear(),he(this,te,null)),he(this,u,0))}}te=new WeakMap,K=new WeakMap,ue=new WeakMap,se=new WeakMap,Ce=new WeakMap,Me=new WeakMap,q=new WeakMap,R=new WeakMap,O=new WeakMap,d=new WeakMap,u=new WeakMap,M=new WeakSet,gt=function(){return i(this,te)||he(this,te,new Map)},$=new WeakSet,mt=function(){if(!i(this,K)){const de=i(this,se).createElement("div"),{style:be}=de;be.visibility="hidden",be.contain="strict",be.width=be.height=0,be.position="absolute",be.top=be.left=0,be.zIndex=-1;const Ie=i(this,se).createElementNS(I,"svg");Ie.setAttribute("width",0),Ie.setAttribute("height",0),he(this,K,i(this,se).createElementNS(I,"defs")),de.append(Ie),Ie.append(i(this,K)),i(this,se).body.append(de)}return i(this,K)},B=new WeakSet,wi=function(de){const be=i(this,se).createElementNS(I,"feColorMatrix");be.setAttribute("type","matrix"),be.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),de.append(be)},j=new WeakSet,Ut=function(de){const be=i(this,se).createElementNS(I,"filter");return be.setAttribute("color-interpolation-filters","sRGB"),be.setAttribute("id",de),i(this,$,mt).append(be),be},ce=new WeakSet,Ht=function(de,be,Ie){const Le=i(this,se).createElementNS(I,be);Le.setAttribute("type","discrete"),Le.setAttribute("tableValues",Ie),de.append(Le)},Se=new WeakSet,At=function(de,be,Ie,Le){const De=i(this,se).createElementNS(I,"feComponentTransfer");Le.append(De),W(this,ce,Ht).call(this,De,"feFuncR",de),W(this,ce,Ht).call(this,De,"feFuncG",be),W(this,ce,Ht).call(this,De,"feFuncB",Ie)},ye=new WeakSet,Pt=function(de){return i(this,$,mt).style.color=de,N(getComputedStyle(i(this,$,mt)).getPropertyValue("color"))},t.DOMFilterFactory=_;class m extends n.BaseCanvasFactory{constructor({ownerDocument:ae=globalThis.document}={}){super(),this._document=ae}_createCanvas(ae,de){const be=this._document.createElement("canvas");return be.width=ae,be.height=de,be}}t.DOMCanvasFactory=m;async function r(fe,ae=!1){if(A(fe,document.baseURI)){const de=await fetch(fe);if(!de.ok)throw new Error(de.statusText);return ae?new Uint8Array(await de.arrayBuffer()):(0,f.stringToBytes)(await de.text())}return new Promise((de,be)=>{const Ie=new XMLHttpRequest;Ie.open("GET",fe,!0),ae&&(Ie.responseType="arraybuffer"),Ie.onreadystatechange=()=>{if(Ie.readyState===XMLHttpRequest.DONE){if(Ie.status===200||Ie.status===0){let Le;if(ae&&Ie.response?Le=new Uint8Array(Ie.response):!ae&&Ie.responseText&&(Le=(0,f.stringToBytes)(Ie.responseText)),Le){de(Le);return}}be(new Error(Ie.statusText))}},Ie.send(null)})}class a extends n.BaseCMapReaderFactory{_fetchData(ae,de){return r(ae,this.isCompressed).then(be=>({cMapData:be,compressionType:de}))}}t.DOMCMapReaderFactory=a;class T extends n.BaseStandardFontDataFactory{_fetchData(ae){return r(ae,!0)}}t.DOMStandardFontDataFactory=T;class E extends n.BaseSVGFactory{_createSVG(ae){return document.createElementNS(I,ae)}}t.DOMSVGFactory=E;class C{constructor({viewBox:ae,scale:de,rotation:be,offsetX:Ie=0,offsetY:Le=0,dontFlip:De=!1}){this.viewBox=ae,this.scale=de,this.rotation=be,this.offsetX=Ie,this.offsetY=Le;const Be=(ae[2]+ae[0])/2,je=(ae[3]+ae[1])/2;let He,qe,Ge,et;switch(be%=360,be<0&&(be+=360),be){case 180:He=-1,qe=0,Ge=0,et=1;break;case 90:He=0,qe=1,Ge=1,et=0;break;case 270:He=0,qe=-1,Ge=-1,et=0;break;case 0:He=1,qe=0,Ge=0,et=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}De&&(Ge=-Ge,et=-et);let Te,U,J,Ae;He===0?(Te=Math.abs(je-ae[1])*de+Ie,U=Math.abs(Be-ae[0])*de+Le,J=(ae[3]-ae[1])*de,Ae=(ae[2]-ae[0])*de):(Te=Math.abs(Be-ae[0])*de+Ie,U=Math.abs(je-ae[1])*de+Le,J=(ae[2]-ae[0])*de,Ae=(ae[3]-ae[1])*de),this.transform=[He*de,qe*de,Ge*de,et*de,Te-He*de*Be-Ge*de*je,U-qe*de*Be-et*de*je],this.width=J,this.height=Ae}get rawDims(){const{viewBox:ae}=this;return(0,f.shadow)(this,"rawDims",{pageWidth:ae[2]-ae[0],pageHeight:ae[3]-ae[1],pageX:ae[0],pageY:ae[1]})}clone({scale:ae=this.scale,rotation:de=this.rotation,offsetX:be=this.offsetX,offsetY:Ie=this.offsetY,dontFlip:Le=!1}={}){return new C({viewBox:this.viewBox.slice(),scale:ae,rotation:de,offsetX:be,offsetY:Ie,dontFlip:Le})}convertToViewportPoint(ae,de){return f.Util.applyTransform([ae,de],this.transform)}convertToViewportRectangle(ae){const de=f.Util.applyTransform([ae[0],ae[1]],this.transform),be=f.Util.applyTransform([ae[2],ae[3]],this.transform);return[de[0],de[1],be[0],be[1]]}convertToPdfPoint(ae,de){return f.Util.applyInverseTransform([ae,de],this.transform)}}t.PageViewport=C;class s extends f.BaseException{constructor(ae,de=0){super(ae,"RenderingCancelledException"),this.extraDelay=de}}t.RenderingCancelledException=s;function g(fe){const ae=fe.length;let de=0;for(;de<ae&&fe[de].trim()==="";)de++;return fe.substring(de,de+5).toLowerCase()==="data:"}function b(fe){return typeof fe=="string"&&/\.pdf$/i.test(fe)}function P(fe,ae=!1){return ae||([fe]=fe.split(/[#?]/,1)),fe.substring(fe.lastIndexOf("/")+1)}function x(fe,ae="document.pdf"){if(typeof fe!="string")return ae;if(g(fe))return(0,f.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),ae;const de=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,be=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,Ie=de.exec(fe);let Le=be.exec(Ie[1])||be.exec(Ie[2])||be.exec(Ie[3]);if(Le&&(Le=Le[0],Le.includes("%")))try{Le=be.exec(decodeURIComponent(Le))[0]}catch{}return Le||ae}class y{constructor(){Je(this,"started",Object.create(null));Je(this,"times",[])}time(ae){ae in this.started&&(0,f.warn)(`Timer is already running for ${ae}`),this.started[ae]=Date.now()}timeEnd(ae){ae in this.started||(0,f.warn)(`Timer has not been started for ${ae}`),this.times.push({name:ae,start:this.started[ae],end:Date.now()}),delete this.started[ae]}toString(){const ae=[];let de=0;for(const{name:be}of this.times)de=Math.max(be.length,de);for(const{name:be,start:Ie,end:Le}of this.times)ae.push(`${be.padEnd(de)} ${Le-Ie}ms
`);return ae.join("")}}t.StatTimer=y;function A(fe,ae){try{const{protocol:de}=ae?new URL(fe,ae):new URL(fe);return de==="http:"||de==="https:"}catch{return!1}}function o(fe){fe.preventDefault()}function c(fe,ae=!1){return new Promise((de,be)=>{const Ie=document.createElement("script");Ie.src=fe,Ie.onload=function(Le){ae&&Ie.remove(),de(Le)},Ie.onerror=function(){be(new Error(`Cannot load script at: ${Ie.src}`))},(document.head||document.documentElement).append(Ie)})}function S(fe){console.log("Deprecated API usage: "+fe)}let w;class v{static toDateObject(ae){if(!ae||typeof ae!="string")return null;w||(w=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const de=w.exec(ae);if(!de)return null;const be=parseInt(de[1],10);let Ie=parseInt(de[2],10);Ie=Ie>=1&&Ie<=12?Ie-1:0;let Le=parseInt(de[3],10);Le=Le>=1&&Le<=31?Le:1;let De=parseInt(de[4],10);De=De>=0&&De<=23?De:0;let Be=parseInt(de[5],10);Be=Be>=0&&Be<=59?Be:0;let je=parseInt(de[6],10);je=je>=0&&je<=59?je:0;const He=de[7]||"Z";let qe=parseInt(de[8],10);qe=qe>=0&&qe<=23?qe:0;let Ge=parseInt(de[9],10)||0;return Ge=Ge>=0&&Ge<=59?Ge:0,He==="-"?(De+=qe,Be+=Ge):He==="+"&&(De-=qe,Be-=Ge),new Date(Date.UTC(be,Ie,Le,De,Be,je))}}t.PDFDateString=v;function F(fe,{scale:ae=1,rotation:de=0}){const{width:be,height:Ie}=fe.attributes.style,Le=[0,0,parseInt(be),parseInt(Ie)];return new C({viewBox:Le,scale:ae,rotation:de})}function N(fe){if(fe.startsWith("#")){const ae=parseInt(fe.slice(1),16);return[(ae&16711680)>>16,(ae&65280)>>8,ae&255]}return fe.startsWith("rgb(")?fe.slice(4,-1).split(",").map(ae=>parseInt(ae)):fe.startsWith("rgba(")?fe.slice(5,-1).split(",").map(ae=>parseInt(ae)).slice(0,3):((0,f.warn)(`Not a valid color format: "${fe}"`),[0,0,0])}function G(fe){const ae=document.createElement("span");ae.style.visibility="hidden",document.body.append(ae);for(const de of fe.keys()){ae.style.color=de;const be=window.getComputedStyle(ae).color;fe.set(de,N(be))}ae.remove()}function le(fe){const{a:ae,b:de,c:be,d:Ie,e:Le,f:De}=fe.getTransform();return[ae,de,be,Ie,Le,De]}function V(fe){const{a:ae,b:de,c:be,d:Ie,e:Le,f:De}=fe.getTransform().invertSelf();return[ae,de,be,Ie,Le,De]}function Z(fe,ae,de=!1,be=!0){if(ae instanceof C){const{pageWidth:Ie,pageHeight:Le}=ae.rawDims,{style:De}=fe,Be=f.FeatureTest.isCSSRoundSupported,je=`var(--scale-factor) * ${Ie}px`,He=`var(--scale-factor) * ${Le}px`,qe=Be?`round(${je}, 1px)`:`calc(${je})`,Ge=Be?`round(${He}, 1px)`:`calc(${He})`;!de||ae.rotation%180===0?(De.width=qe,De.height=Ge):(De.width=Ge,De.height=qe)}be&&fe.setAttribute("data-main-rotation",ae.rotation)}},(e,t,l)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseStandardFontDataFactory=t.BaseSVGFactory=t.BaseFilterFactory=t.BaseCanvasFactory=t.BaseCMapReaderFactory=void 0;var n=l(1);class f{constructor(){this.constructor===f&&(0,n.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(a){return"none"}addHCMFilter(a,T){return"none"}addHighlightHCMFilter(a,T,E,C){return"none"}destroy(a=!1){}}t.BaseFilterFactory=f;class I{constructor(){this.constructor===I&&(0,n.unreachable)("Cannot initialize BaseCanvasFactory.")}create(a,T){if(a<=0||T<=0)throw new Error("Invalid canvas size");const E=this._createCanvas(a,T);return{canvas:E,context:E.getContext("2d")}}reset(a,T,E){if(!a.canvas)throw new Error("Canvas is not specified");if(T<=0||E<=0)throw new Error("Invalid canvas size");a.canvas.width=T,a.canvas.height=E}destroy(a){if(!a.canvas)throw new Error("Canvas is not specified");a.canvas.width=0,a.canvas.height=0,a.canvas=null,a.context=null}_createCanvas(a,T){(0,n.unreachable)("Abstract method `_createCanvas` called.")}}t.BaseCanvasFactory=I;class k{constructor({baseUrl:a=null,isCompressed:T=!0}){this.constructor===k&&(0,n.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=a,this.isCompressed=T}async fetch({name:a}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!a)throw new Error("CMap name must be specified.");const T=this.baseUrl+a+(this.isCompressed?".bcmap":""),E=this.isCompressed?n.CMapCompressionType.BINARY:n.CMapCompressionType.NONE;return this._fetchData(T,E).catch(C=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${T}`)})}_fetchData(a,T){(0,n.unreachable)("Abstract method `_fetchData` called.")}}t.BaseCMapReaderFactory=k;class _{constructor({baseUrl:a=null}){this.constructor===_&&(0,n.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=a}async fetch({filename:a}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!a)throw new Error("Font filename must be specified.");const T=`${this.baseUrl}${a}`;return this._fetchData(T).catch(E=>{throw new Error(`Unable to load font data at: ${T}`)})}_fetchData(a){(0,n.unreachable)("Abstract method `_fetchData` called.")}}t.BaseStandardFontDataFactory=_;class m{constructor(){this.constructor===m&&(0,n.unreachable)("Cannot initialize BaseSVGFactory.")}create(a,T,E=!1){if(a<=0||T<=0)throw new Error("Invalid SVG dimensions");const C=this._createSVG("svg:svg");return C.setAttribute("version","1.1"),E||(C.setAttribute("width",`${a}px`),C.setAttribute("height",`${T}px`)),C.setAttribute("preserveAspectRatio","none"),C.setAttribute("viewBox",`0 0 ${a} ${T}`),C}createElement(a){if(typeof a!="string")throw new Error("Invalid SVG element type");return this._createSVG(a)}_createSVG(a){(0,n.unreachable)("Abstract method `_createSVG` called.")}}t.BaseSVGFactory=m},(e,t,l)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MurmurHash3_64=void 0;var n=l(1);const f=3285377520,I=4294901760,k=65535;class _{constructor(r){this.h1=r?r&4294967295:f,this.h2=r?r&4294967295:f}update(r){let a,T;if(typeof r=="string"){a=new Uint8Array(r.length*2),T=0;for(let S=0,w=r.length;S<w;S++){const v=r.charCodeAt(S);v<=255?a[T++]=v:(a[T++]=v>>>8,a[T++]=v&255)}}else if((0,n.isArrayBuffer)(r))a=r.slice(),T=a.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const E=T>>2,C=T-E*4,s=new Uint32Array(a.buffer,0,E);let g=0,b=0,P=this.h1,x=this.h2;const y=3432918353,A=461845907,o=y&k,c=A&k;for(let S=0;S<E;S++)S&1?(g=s[S],g=g*y&I|g*o&k,g=g<<15|g>>>17,g=g*A&I|g*c&k,P^=g,P=P<<13|P>>>19,P=P*5+3864292196):(b=s[S],b=b*y&I|b*o&k,b=b<<15|b>>>17,b=b*A&I|b*c&k,x^=b,x=x<<13|x>>>19,x=x*5+3864292196);switch(g=0,C){case 3:g^=a[E*4+2]<<16;case 2:g^=a[E*4+1]<<8;case 1:g^=a[E*4],g=g*y&I|g*o&k,g=g<<15|g>>>17,g=g*A&I|g*c&k,E&1?P^=g:x^=g}this.h1=P,this.h2=x}hexdigest(){let r=this.h1,a=this.h2;return r^=a>>>1,r=r*3981806797&I|r*36045&k,a=a*4283543511&I|((a<<16|r>>>16)*2950163797&I)>>>16,r^=a>>>1,r=r*444984403&I|r*60499&k,a=a*3301882366&I|((a<<16|r>>>16)*3120437893&I)>>>16,r^=a>>>1,(r>>>0).toString(16).padStart(8,"0")+(a>>>0).toString(16).padStart(8,"0")}}t.MurmurHash3_64=_},(e,t,l)=>{var k;Object.defineProperty(t,"__esModule",{value:!0}),t.FontLoader=t.FontFaceObject=void 0;var n=l(1);class f{constructor({ownerDocument:m=globalThis.document,styleElement:r=null}){H(this,k,new Set);this._document=m,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(m){this.nativeFontFaces.add(m),this._document.fonts.add(m)}removeNativeFontFace(m){this.nativeFontFaces.delete(m),this._document.fonts.delete(m)}insertRule(m){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const r=this.styleElement.sheet;r.insertRule(m,r.cssRules.length)}clear(){for(const m of this.nativeFontFaces)this._document.fonts.delete(m);this.nativeFontFaces.clear(),i(this,k).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(m){if(!(!m||i(this,k).has(m.loadedName))){if((0,n.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:r,src:a,style:T}=m,E=new FontFace(r,a,T);this.addNativeFontFace(E);try{await E.load(),i(this,k).add(r)}catch{(0,n.warn)(`Cannot load system font: ${m.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(E)}return}(0,n.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(m){if(m.attached||m.missingFile&&!m.systemFontInfo)return;if(m.attached=!0,m.systemFontInfo){await this.loadSystemFont(m.systemFontInfo);return}if(this.isFontLoadingAPISupported){const a=m.createNativeFontFace();if(a){this.addNativeFontFace(a);try{await a.loaded}catch(T){throw(0,n.warn)(`Failed to load font '${a.family}': '${T}'.`),m.disableFontFace=!0,T}}return}const r=m.createFontFaceRule();if(r){if(this.insertRule(r),this.isSyncFontLoadingSupported)return;await new Promise(a=>{const T=this._queueLoadingCallback(a);this._prepareFontLoadEvent(m,T)})}}get isFontLoadingAPISupported(){var r;const m=!!((r=this._document)!=null&&r.fonts);return(0,n.shadow)(this,"isFontLoadingAPISupported",m)}get isSyncFontLoadingSupported(){let m=!1;return(n.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(m=!0),(0,n.shadow)(this,"isSyncFontLoadingSupported",m)}_queueLoadingCallback(m){function r(){for((0,n.assert)(!T.done,"completeRequest() cannot be called twice."),T.done=!0;a.length>0&&a[0].done;){const E=a.shift();setTimeout(E.callback,0)}}const{loadingRequests:a}=this,T={done:!1,complete:r,callback:m};return a.push(T),T}get _loadTestFont(){const m=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,n.shadow)(this,"_loadTestFont",m)}_prepareFontLoadEvent(m,r){function a(N,G){return N.charCodeAt(G)<<24|N.charCodeAt(G+1)<<16|N.charCodeAt(G+2)<<8|N.charCodeAt(G+3)&255}function T(N,G,le,V){const Z=N.substring(0,G),re=N.substring(G+le);return Z+V+re}let E,C;const s=this._document.createElement("canvas");s.width=1,s.height=1;const g=s.getContext("2d");let b=0;function P(N,G){if(++b>30){(0,n.warn)("Load test font never loaded."),G();return}if(g.font="30px "+N,g.fillText(".",0,20),g.getImageData(0,0,1,1).data[3]>0){G();return}setTimeout(P.bind(null,N,G))}const x=`lt${Date.now()}${this.loadTestFontId++}`;let y=this._loadTestFont;y=T(y,976,x.length,x);const o=16,c=1482184792;let S=a(y,o);for(E=0,C=x.length-3;E<C;E+=4)S=S-c+a(x,E)|0;E<x.length&&(S=S-c+a(x+"XXX",E)|0),y=T(y,o,4,(0,n.string32)(S));const w=`url(data:font/opentype;base64,${btoa(y)});`,v=`@font-face {font-family:"${x}";src:${w}}`;this.insertRule(v);const F=this._document.createElement("div");F.style.visibility="hidden",F.style.width=F.style.height="10px",F.style.position="absolute",F.style.top=F.style.left="0px";for(const N of[m.loadedName,x]){const G=this._document.createElement("span");G.textContent="Hi",G.style.fontFamily=N,F.append(G)}this._document.body.append(F),P(x,()=>{F.remove(),r.complete()})}}k=new WeakMap,t.FontLoader=f;class I{constructor(m,{isEvalSupported:r=!0,disableFontFace:a=!1,ignoreErrors:T=!1,inspectFont:E=null}){this.compiledGlyphs=Object.create(null);for(const C in m)this[C]=m[C];this.isEvalSupported=r!==!1,this.disableFontFace=a===!0,this.ignoreErrors=T===!0,this._inspectFont=E}createNativeFontFace(){var r;if(!this.data||this.disableFontFace)return null;let m;if(!this.cssFontInfo)m=new FontFace(this.loadedName,this.data,{});else{const a={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(a.style=`oblique ${this.cssFontInfo.italicAngle}deg`),m=new FontFace(this.cssFontInfo.fontFamily,this.data,a)}return(r=this._inspectFont)==null||r.call(this,this),m}createFontFaceRule(){var T;if(!this.data||this.disableFontFace)return null;const m=(0,n.bytesToString)(this.data),r=`url(data:${this.mimetype};base64,${btoa(m)});`;let a;if(!this.cssFontInfo)a=`@font-face {font-family:"${this.loadedName}";src:${r}}`;else{let E=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(E+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),a=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${E}src:${r}}`}return(T=this._inspectFont)==null||T.call(this,this,r),a}getPathGenerator(m,r){if(this.compiledGlyphs[r]!==void 0)return this.compiledGlyphs[r];let a;try{a=m.get(this.loadedName+"_path_"+r)}catch(T){if(!this.ignoreErrors)throw T;return(0,n.warn)(`getPathGenerator - ignoring character: "${T}".`),this.compiledGlyphs[r]=function(E,C){}}if(this.isEvalSupported&&n.FeatureTest.isEvalSupported){const T=[];for(const E of a){const C=E.args!==void 0?E.args.join(","):"";T.push("c.",E.cmd,"(",C,`);
`)}return this.compiledGlyphs[r]=new Function("c","size",T.join(""))}return this.compiledGlyphs[r]=function(T,E){for(const C of a)C.cmd==="scale"&&(C.args=[E,-E]),T[C.cmd].apply(T,C.args)}}}t.FontFaceObject=I},(e,t,l)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NodeStandardFontDataFactory=t.NodeFilterFactory=t.NodeCanvasFactory=t.NodeCMapReaderFactory=void 0;var n=l(7);l(1);const f=function(r){return new Promise((a,T)=>{require$$5.readFile(r,(C,s)=>{if(C||!s){T(new Error(C));return}a(new Uint8Array(s))})})};class I extends n.BaseFilterFactory{}t.NodeFilterFactory=I;class k extends n.BaseCanvasFactory{_createCanvas(a,T){return require$$1.createCanvas(a,T)}}t.NodeCanvasFactory=k;class _ extends n.BaseCMapReaderFactory{_fetchData(a,T){return f(a).then(E=>({cMapData:E,compressionType:T}))}}t.NodeCMapReaderFactory=_;class m extends n.BaseStandardFontDataFactory{_fetchData(a){return f(a)}}t.NodeStandardFontDataFactory=m},(e,t,l)=>{var K,yi,se,Si;Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasGraphics=void 0;var n=l(1),f=l(6),I=l(12),k=l(13);const _=16,m=100,r=4096,a=15,T=10,E=1e3,C=16;function s(q,R){if(q._removeMirroring)throw new Error("Context is already forwarding operations.");q.__originalSave=q.save,q.__originalRestore=q.restore,q.__originalRotate=q.rotate,q.__originalScale=q.scale,q.__originalTranslate=q.translate,q.__originalTransform=q.transform,q.__originalSetTransform=q.setTransform,q.__originalResetTransform=q.resetTransform,q.__originalClip=q.clip,q.__originalMoveTo=q.moveTo,q.__originalLineTo=q.lineTo,q.__originalBezierCurveTo=q.bezierCurveTo,q.__originalRect=q.rect,q.__originalClosePath=q.closePath,q.__originalBeginPath=q.beginPath,q._removeMirroring=()=>{q.save=q.__originalSave,q.restore=q.__originalRestore,q.rotate=q.__originalRotate,q.scale=q.__originalScale,q.translate=q.__originalTranslate,q.transform=q.__originalTransform,q.setTransform=q.__originalSetTransform,q.resetTransform=q.__originalResetTransform,q.clip=q.__originalClip,q.moveTo=q.__originalMoveTo,q.lineTo=q.__originalLineTo,q.bezierCurveTo=q.__originalBezierCurveTo,q.rect=q.__originalRect,q.closePath=q.__originalClosePath,q.beginPath=q.__originalBeginPath,delete q._removeMirroring},q.save=function(){R.save(),this.__originalSave()},q.restore=function(){R.restore(),this.__originalRestore()},q.translate=function(d,u){R.translate(d,u),this.__originalTranslate(d,u)},q.scale=function(d,u){R.scale(d,u),this.__originalScale(d,u)},q.transform=function(d,u,M,D,$,X){R.transform(d,u,M,D,$,X),this.__originalTransform(d,u,M,D,$,X)},q.setTransform=function(d,u,M,D,$,X){R.setTransform(d,u,M,D,$,X),this.__originalSetTransform(d,u,M,D,$,X)},q.resetTransform=function(){R.resetTransform(),this.__originalResetTransform()},q.rotate=function(d){R.rotate(d),this.__originalRotate(d)},q.clip=function(d){R.clip(d),this.__originalClip(d)},q.moveTo=function(O,d){R.moveTo(O,d),this.__originalMoveTo(O,d)},q.lineTo=function(O,d){R.lineTo(O,d),this.__originalLineTo(O,d)},q.bezierCurveTo=function(O,d,u,M,D,$){R.bezierCurveTo(O,d,u,M,D,$),this.__originalBezierCurveTo(O,d,u,M,D,$)},q.rect=function(O,d,u,M){R.rect(O,d,u,M),this.__originalRect(O,d,u,M)},q.closePath=function(){R.closePath(),this.__originalClosePath()},q.beginPath=function(){R.beginPath(),this.__originalBeginPath()}}class g{constructor(R){this.canvasFactory=R,this.cache=Object.create(null)}getCanvas(R,O,d){let u;return this.cache[R]!==void 0?(u=this.cache[R],this.canvasFactory.reset(u,O,d)):(u=this.canvasFactory.create(O,d),this.cache[R]=u),u}delete(R){delete this.cache[R]}clear(){for(const R in this.cache){const O=this.cache[R];this.canvasFactory.destroy(O),delete this.cache[R]}}}function b(q,R,O,d,u,M,D,$,X,B){const[z,j,Y,ce,oe,Se]=(0,f.getCurrentTransform)(q);if(j===0&&Y===0){const ne=D*z+oe,fe=Math.round(ne),ae=$*ce+Se,de=Math.round(ae),be=(D+X)*z+oe,Ie=Math.abs(Math.round(be)-fe)||1,Le=($+B)*ce+Se,De=Math.abs(Math.round(Le)-de)||1;return q.setTransform(Math.sign(z),0,0,Math.sign(ce),fe,de),q.drawImage(R,O,d,u,M,0,0,Ie,De),q.setTransform(z,j,Y,ce,oe,Se),[Ie,De]}if(z===0&&ce===0){const ne=$*Y+oe,fe=Math.round(ne),ae=D*j+Se,de=Math.round(ae),be=($+B)*Y+oe,Ie=Math.abs(Math.round(be)-fe)||1,Le=(D+X)*j+Se,De=Math.abs(Math.round(Le)-de)||1;return q.setTransform(0,Math.sign(j),Math.sign(Y),0,fe,de),q.drawImage(R,O,d,u,M,0,0,De,Ie),q.setTransform(z,j,Y,ce,oe,Se),[De,Ie]}q.drawImage(R,O,d,u,M,D,$,X,B);const Ee=Math.hypot(z,j),ye=Math.hypot(Y,ce);return[Ee*X,ye*B]}function P(q){const{width:R,height:O}=q;if(R>E||O>E)return null;const d=1e3,u=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),M=R+1;let D=new Uint8Array(M*(O+1)),$,X,B;const z=R+7&-8;let j=new Uint8Array(z*O),Y=0;for(const ye of q.data){let ne=128;for(;ne>0;)j[Y++]=ye&ne?0:255,ne>>=1}let ce=0;for(Y=0,j[Y]!==0&&(D[0]=1,++ce),X=1;X<R;X++)j[Y]!==j[Y+1]&&(D[X]=j[Y]?2:1,++ce),Y++;for(j[Y]!==0&&(D[X]=2,++ce),$=1;$<O;$++){Y=$*z,B=$*M,j[Y-z]!==j[Y]&&(D[B]=j[Y]?1:8,++ce);let ye=(j[Y]?4:0)+(j[Y-z]?8:0);for(X=1;X<R;X++)ye=(ye>>2)+(j[Y+1]?4:0)+(j[Y-z+1]?8:0),u[ye]&&(D[B+X]=u[ye],++ce),Y++;if(j[Y-z]!==j[Y]&&(D[B+X]=j[Y]?2:4,++ce),ce>d)return null}for(Y=z*(O-1),B=$*M,j[Y]!==0&&(D[B]=8,++ce),X=1;X<R;X++)j[Y]!==j[Y+1]&&(D[B+X]=j[Y]?4:8,++ce),Y++;if(j[Y]!==0&&(D[B+X]=4,++ce),ce>d)return null;const oe=new Int32Array([0,M,-1,0,-M,0,0,0,1]),Se=new Path2D;for($=0;ce&&$<=O;$++){let ye=$*M;const ne=ye+R;for(;ye<ne&&!D[ye];)ye++;if(ye===ne)continue;Se.moveTo(ye%M,$);const fe=ye;let ae=D[ye];do{const de=oe[ae];do ye+=de;while(!D[ye]);const be=D[ye];be!==5&&be!==10?(ae=be,D[ye]=0):(ae=be&51*ae>>4,D[ye]&=ae>>2|ae<<2),Se.lineTo(ye%M,ye/M|0),D[ye]||--ce}while(fe!==ye);--$}return j=null,D=null,function(ye){ye.save(),ye.scale(1/R,-1/O),ye.translate(0,-O),ye.fill(Se),ye.beginPath(),ye.restore()}}class x{constructor(R,O){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=n.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=n.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=n.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,R,O])}clone(){const R=Object.create(this);return R.clipBox=this.clipBox.slice(),R}setCurrentPoint(R,O){this.x=R,this.y=O}updatePathMinMax(R,O,d){[O,d]=n.Util.applyTransform([O,d],R),this.minX=Math.min(this.minX,O),this.minY=Math.min(this.minY,d),this.maxX=Math.max(this.maxX,O),this.maxY=Math.max(this.maxY,d)}updateRectMinMax(R,O){const d=n.Util.applyTransform(O,R),u=n.Util.applyTransform(O.slice(2),R);this.minX=Math.min(this.minX,d[0],u[0]),this.minY=Math.min(this.minY,d[1],u[1]),this.maxX=Math.max(this.maxX,d[0],u[0]),this.maxY=Math.max(this.maxY,d[1],u[1])}updateScalingPathMinMax(R,O){n.Util.scaleMinMax(R,O),this.minX=Math.min(this.minX,O[0]),this.maxX=Math.max(this.maxX,O[1]),this.minY=Math.min(this.minY,O[2]),this.maxY=Math.max(this.maxY,O[3])}updateCurvePathMinMax(R,O,d,u,M,D,$,X,B,z){const j=n.Util.bezierBoundingBox(O,d,u,M,D,$,X,B);if(z){z[0]=Math.min(z[0],j[0],j[2]),z[1]=Math.max(z[1],j[0],j[2]),z[2]=Math.min(z[2],j[1],j[3]),z[3]=Math.max(z[3],j[1],j[3]);return}this.updateRectMinMax(R,j)}getPathBoundingBox(R=I.PathType.FILL,O=null){const d=[this.minX,this.minY,this.maxX,this.maxY];if(R===I.PathType.STROKE){O||(0,n.unreachable)("Stroke bounding box must include transform.");const u=n.Util.singularValueDecompose2dScale(O),M=u[0]*this.lineWidth/2,D=u[1]*this.lineWidth/2;d[0]-=M,d[1]-=D,d[2]+=M,d[3]+=D}return d}updateClipFromPath(){const R=n.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(R||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(R){this.clipBox=R,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(R=I.PathType.FILL,O=null){return n.Util.intersect(this.clipBox,this.getPathBoundingBox(R,O))}}function y(q,R){if(typeof ImageData<"u"&&R instanceof ImageData){q.putImageData(R,0,0);return}const O=R.height,d=R.width,u=O%C,M=(O-u)/C,D=u===0?M:M+1,$=q.createImageData(d,C);let X=0,B;const z=R.data,j=$.data;let Y,ce,oe,Se;if(R.kind===n.ImageKind.GRAYSCALE_1BPP){const Ee=z.byteLength,ye=new Uint32Array(j.buffer,0,j.byteLength>>2),ne=ye.length,fe=d+7>>3,ae=4294967295,de=n.FeatureTest.isLittleEndian?4278190080:255;for(Y=0;Y<D;Y++){for(oe=Y<M?C:u,B=0,ce=0;ce<oe;ce++){const be=Ee-X;let Ie=0;const Le=be>fe?d:be*8-7,De=Le&-8;let Be=0,je=0;for(;Ie<De;Ie+=8)je=z[X++],ye[B++]=je&128?ae:de,ye[B++]=je&64?ae:de,ye[B++]=je&32?ae:de,ye[B++]=je&16?ae:de,ye[B++]=je&8?ae:de,ye[B++]=je&4?ae:de,ye[B++]=je&2?ae:de,ye[B++]=je&1?ae:de;for(;Ie<Le;Ie++)Be===0&&(je=z[X++],Be=128),ye[B++]=je&Be?ae:de,Be>>=1}for(;B<ne;)ye[B++]=0;q.putImageData($,0,Y*C)}}else if(R.kind===n.ImageKind.RGBA_32BPP){for(ce=0,Se=d*C*4,Y=0;Y<M;Y++)j.set(z.subarray(X,X+Se)),X+=Se,q.putImageData($,0,ce),ce+=C;Y<D&&(Se=d*u*4,j.set(z.subarray(X,X+Se)),q.putImageData($,0,ce))}else if(R.kind===n.ImageKind.RGB_24BPP)for(oe=C,Se=d*oe,Y=0;Y<D;Y++){for(Y>=M&&(oe=u,Se=d*oe),B=0,ce=Se;ce--;)j[B++]=z[X++],j[B++]=z[X++],j[B++]=z[X++],j[B++]=255;q.putImageData($,0,Y*C)}else throw new Error(`bad image kind: ${R.kind}`)}function A(q,R){if(R.bitmap){q.drawImage(R.bitmap,0,0);return}const O=R.height,d=R.width,u=O%C,M=(O-u)/C,D=u===0?M:M+1,$=q.createImageData(d,C);let X=0;const B=R.data,z=$.data;for(let j=0;j<D;j++){const Y=j<M?C:u;({srcPos:X}=(0,k.convertBlackAndWhiteToRGBA)({src:B,srcPos:X,dest:z,width:d,height:Y,nonBlackColor:0})),q.putImageData($,0,j*C)}}function o(q,R){const O=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const d of O)q[d]!==void 0&&(R[d]=q[d]);q.setLineDash!==void 0&&(R.setLineDash(q.getLineDash()),R.lineDashOffset=q.lineDashOffset)}function c(q){if(q.strokeStyle=q.fillStyle="#000000",q.fillRule="nonzero",q.globalAlpha=1,q.lineWidth=1,q.lineCap="butt",q.lineJoin="miter",q.miterLimit=10,q.globalCompositeOperation="source-over",q.font="10px sans-serif",q.setLineDash!==void 0&&(q.setLineDash([]),q.lineDashOffset=0),!n.isNodeJS){const{filter:R}=q;R!=="none"&&R!==""&&(q.filter="none")}}function S(q,R,O,d){const u=q.length;for(let M=3;M<u;M+=4){const D=q[M];if(D===0)q[M-3]=R,q[M-2]=O,q[M-1]=d;else if(D<255){const $=255-D;q[M-3]=q[M-3]*D+R*$>>8,q[M-2]=q[M-2]*D+O*$>>8,q[M-1]=q[M-1]*D+d*$>>8}}}function w(q,R,O){const d=q.length,u=1/255;for(let M=3;M<d;M+=4){const D=O?O[q[M]]:q[M];R[M]=R[M]*D*u|0}}function v(q,R,O){const d=q.length;for(let u=3;u<d;u+=4){const M=q[u-3]*77+q[u-2]*152+q[u-1]*28;R[u]=O?R[u]*O[M>>8]>>8:R[u]*M>>16}}function F(q,R,O,d,u,M,D,$,X,B,z){const j=!!M,Y=j?M[0]:0,ce=j?M[1]:0,oe=j?M[2]:0,Se=u==="Luminosity"?v:w,ye=Math.min(d,Math.ceil(1048576/O));for(let ne=0;ne<d;ne+=ye){const fe=Math.min(ye,d-ne),ae=q.getImageData($-B,ne+(X-z),O,fe),de=R.getImageData($,ne+X,O,fe);j&&S(ae.data,Y,ce,oe),Se(ae.data,de.data,D),R.putImageData(de,$,ne+X)}}function N(q,R,O,d){const u=d[0],M=d[1],D=d[2]-u,$=d[3]-M;D===0||$===0||(F(R.context,O,D,$,R.subtype,R.backdrop,R.transferMap,u,M,R.offsetX,R.offsetY),q.save(),q.globalAlpha=1,q.globalCompositeOperation="source-over",q.setTransform(1,0,0,1,0,0),q.drawImage(O.canvas,0,0),q.restore())}function G(q,R){const O=n.Util.singularValueDecompose2dScale(q);O[0]=Math.fround(O[0]),O[1]=Math.fround(O[1]);const d=Math.fround((globalThis.devicePixelRatio||1)*f.PixelsPerInch.PDF_TO_CSS_UNITS);return R!==void 0?R:O[0]<=d||O[1]<=d}const le=["butt","round","square"],V=["miter","round","bevel"],Z={},re={},Me=class Me{constructor(R,O,d,u,M,{optionalContentConfig:D,markedContentStack:$=null},X,B){H(this,K);H(this,se);this.ctx=R,this.current=new x(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=O,this.objs=d,this.canvasFactory=u,this.filterFactory=M,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=$||[],this.optionalContentConfig=D,this.cachedCanvases=new g(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=X,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=B,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(R,O=null){return typeof R=="string"?R.startsWith("g_")?this.commonObjs.get(R):this.objs.get(R):O}beginDrawing({transform:R,viewport:O,transparency:d=!1,background:u=null}){const M=this.ctx.canvas.width,D=this.ctx.canvas.height,$=this.ctx.fillStyle;if(this.ctx.fillStyle=u||"#ffffff",this.ctx.fillRect(0,0,M,D),this.ctx.fillStyle=$,d){const X=this.cachedCanvases.getCanvas("transparent",M,D);this.compositeCtx=this.ctx,this.transparentCanvas=X.canvas,this.ctx=X.context,this.ctx.save(),this.ctx.transform(...(0,f.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),c(this.ctx),R&&(this.ctx.transform(...R),this.outputScaleX=R[0],this.outputScaleY=R[0]),this.ctx.transform(...O.transform),this.viewportScale=O.scale,this.baseTransform=(0,f.getCurrentTransform)(this.ctx)}executeOperatorList(R,O,d,u){const M=R.argsArray,D=R.fnArray;let $=O||0;const X=M.length;if(X===$)return $;const B=X-$>T&&typeof d=="function",z=B?Date.now()+a:0;let j=0;const Y=this.commonObjs,ce=this.objs;let oe;for(;;){if(u!==void 0&&$===u.nextBreakPoint)return u.breakIt($,d),$;if(oe=D[$],oe!==n.OPS.dependency)this[oe].apply(this,M[$]);else for(const Se of M[$]){const Ee=Se.startsWith("g_")?Y:ce;if(!Ee.has(Se))return Ee.get(Se,d),$}if($++,$===X)return $;if(B&&++j>T){if(Date.now()>z)return d(),$;j=0}}}endDrawing(){W(this,K,yi).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const R of this._cachedBitmapsMap.values()){for(const O of R.values())typeof HTMLCanvasElement<"u"&&O instanceof HTMLCanvasElement&&(O.width=O.height=0);R.clear()}this._cachedBitmapsMap.clear(),W(this,se,Si).call(this)}_scaleImage(R,O){const d=R.width,u=R.height;let M=Math.max(Math.hypot(O[0],O[1]),1),D=Math.max(Math.hypot(O[2],O[3]),1),$=d,X=u,B="prescale1",z,j;for(;M>2&&$>1||D>2&&X>1;){let Y=$,ce=X;M>2&&$>1&&(Y=$>=16384?Math.floor($/2)-1||1:Math.ceil($/2),M/=$/Y),D>2&&X>1&&(ce=X>=16384?Math.floor(X/2)-1||1:Math.ceil(X)/2,D/=X/ce),z=this.cachedCanvases.getCanvas(B,Y,ce),j=z.context,j.clearRect(0,0,Y,ce),j.drawImage(R,0,0,$,X,0,0,Y,ce),R=z.canvas,$=Y,X=ce,B=B==="prescale1"?"prescale2":"prescale1"}return{img:R,paintWidth:$,paintHeight:X}}_createMaskCanvas(R){const O=this.ctx,{width:d,height:u}=R,M=this.current.fillColor,D=this.current.patternFill,$=(0,f.getCurrentTransform)(O);let X,B,z,j;if((R.bitmap||R.data)&&R.count>1){const Ie=R.bitmap||R.data.buffer;B=JSON.stringify(D?$:[$.slice(0,4),M]),X=this._cachedBitmapsMap.get(Ie),X||(X=new Map,this._cachedBitmapsMap.set(Ie,X));const Le=X.get(B);if(Le&&!D){const De=Math.round(Math.min($[0],$[2])+$[4]),Be=Math.round(Math.min($[1],$[3])+$[5]);return{canvas:Le,offsetX:De,offsetY:Be}}z=Le}z||(j=this.cachedCanvases.getCanvas("maskCanvas",d,u),A(j.context,R));let Y=n.Util.transform($,[1/d,0,0,-1/u,0,0]);Y=n.Util.transform(Y,[1,0,0,1,0,-u]);const ce=n.Util.applyTransform([0,0],Y),oe=n.Util.applyTransform([d,u],Y),Se=n.Util.normalizeRect([ce[0],ce[1],oe[0],oe[1]]),Ee=Math.round(Se[2]-Se[0])||1,ye=Math.round(Se[3]-Se[1])||1,ne=this.cachedCanvases.getCanvas("fillCanvas",Ee,ye),fe=ne.context,ae=Math.min(ce[0],oe[0]),de=Math.min(ce[1],oe[1]);fe.translate(-ae,-de),fe.transform(...Y),z||(z=this._scaleImage(j.canvas,(0,f.getCurrentTransformInverse)(fe)),z=z.img,X&&D&&X.set(B,z)),fe.imageSmoothingEnabled=G((0,f.getCurrentTransform)(fe),R.interpolate),b(fe,z,0,0,z.width,z.height,0,0,d,u),fe.globalCompositeOperation="source-in";const be=n.Util.transform((0,f.getCurrentTransformInverse)(fe),[1,0,0,1,-ae,-de]);return fe.fillStyle=D?M.getPattern(O,this,be,I.PathType.FILL):M,fe.fillRect(0,0,d,u),X&&!D&&(this.cachedCanvases.delete("fillCanvas"),X.set(B,ne.canvas)),{canvas:ne.canvas,offsetX:Math.round(ae),offsetY:Math.round(de)}}setLineWidth(R){R!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=R,this.ctx.lineWidth=R}setLineCap(R){this.ctx.lineCap=le[R]}setLineJoin(R){this.ctx.lineJoin=V[R]}setMiterLimit(R){this.ctx.miterLimit=R}setDash(R,O){const d=this.ctx;d.setLineDash!==void 0&&(d.setLineDash(R),d.lineDashOffset=O)}setRenderingIntent(R){}setFlatness(R){}setGState(R){for(const[O,d]of R)switch(O){case"LW":this.setLineWidth(d);break;case"LC":this.setLineCap(d);break;case"LJ":this.setLineJoin(d);break;case"ML":this.setMiterLimit(d);break;case"D":this.setDash(d[0],d[1]);break;case"RI":this.setRenderingIntent(d);break;case"FL":this.setFlatness(d);break;case"Font":this.setFont(d[0],d[1]);break;case"CA":this.current.strokeAlpha=d;break;case"ca":this.current.fillAlpha=d,this.ctx.globalAlpha=d;break;case"BM":this.ctx.globalCompositeOperation=d;break;case"SMask":this.current.activeSMask=d?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(d);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const R=this.inSMaskMode;this.current.activeSMask&&!R?this.beginSMaskMode():!this.current.activeSMask&&R&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const R=this.ctx.canvas.width,O=this.ctx.canvas.height,d="smaskGroupAt"+this.groupLevel,u=this.cachedCanvases.getCanvas(d,R,O);this.suspendedCtx=this.ctx,this.ctx=u.context;const M=this.ctx;M.setTransform(...(0,f.getCurrentTransform)(this.suspendedCtx)),o(this.suspendedCtx,M),s(M,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),o(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(R){if(!this.current.activeSMask)return;R?(R[0]=Math.floor(R[0]),R[1]=Math.floor(R[1]),R[2]=Math.ceil(R[2]),R[3]=Math.ceil(R[3])):R=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const O=this.current.activeSMask,d=this.suspendedCtx;N(d,O,this.ctx,R),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(o(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const R=this.current;this.stateStack.push(R),this.current=R.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),o(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(R,O,d,u,M,D){this.ctx.transform(R,O,d,u,M,D),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(R,O,d){const u=this.ctx,M=this.current;let D=M.x,$=M.y,X,B;const z=(0,f.getCurrentTransform)(u),j=z[0]===0&&z[3]===0||z[1]===0&&z[2]===0,Y=j?d.slice(0):null;for(let ce=0,oe=0,Se=R.length;ce<Se;ce++)switch(R[ce]|0){case n.OPS.rectangle:D=O[oe++],$=O[oe++];const Ee=O[oe++],ye=O[oe++],ne=D+Ee,fe=$+ye;u.moveTo(D,$),Ee===0||ye===0?u.lineTo(ne,fe):(u.lineTo(ne,$),u.lineTo(ne,fe),u.lineTo(D,fe)),j||M.updateRectMinMax(z,[D,$,ne,fe]),u.closePath();break;case n.OPS.moveTo:D=O[oe++],$=O[oe++],u.moveTo(D,$),j||M.updatePathMinMax(z,D,$);break;case n.OPS.lineTo:D=O[oe++],$=O[oe++],u.lineTo(D,$),j||M.updatePathMinMax(z,D,$);break;case n.OPS.curveTo:X=D,B=$,D=O[oe+4],$=O[oe+5],u.bezierCurveTo(O[oe],O[oe+1],O[oe+2],O[oe+3],D,$),M.updateCurvePathMinMax(z,X,B,O[oe],O[oe+1],O[oe+2],O[oe+3],D,$,Y),oe+=6;break;case n.OPS.curveTo2:X=D,B=$,u.bezierCurveTo(D,$,O[oe],O[oe+1],O[oe+2],O[oe+3]),M.updateCurvePathMinMax(z,X,B,D,$,O[oe],O[oe+1],O[oe+2],O[oe+3],Y),D=O[oe+2],$=O[oe+3],oe+=4;break;case n.OPS.curveTo3:X=D,B=$,D=O[oe+2],$=O[oe+3],u.bezierCurveTo(O[oe],O[oe+1],D,$,D,$),M.updateCurvePathMinMax(z,X,B,O[oe],O[oe+1],D,$,D,$,Y),oe+=4;break;case n.OPS.closePath:u.closePath();break}j&&M.updateScalingPathMinMax(z,Y),M.setCurrentPoint(D,$)}closePath(){this.ctx.closePath()}stroke(R=!0){const O=this.ctx,d=this.current.strokeColor;O.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof d=="object"&&(d!=null&&d.getPattern)?(O.save(),O.strokeStyle=d.getPattern(O,this,(0,f.getCurrentTransformInverse)(O),I.PathType.STROKE),this.rescaleAndStroke(!1),O.restore()):this.rescaleAndStroke(!0)),R&&this.consumePath(this.current.getClippedPathBoundingBox()),O.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(R=!0){const O=this.ctx,d=this.current.fillColor,u=this.current.patternFill;let M=!1;u&&(O.save(),O.fillStyle=d.getPattern(O,this,(0,f.getCurrentTransformInverse)(O),I.PathType.FILL),M=!0);const D=this.current.getClippedPathBoundingBox();this.contentVisible&&D!==null&&(this.pendingEOFill?(O.fill("evenodd"),this.pendingEOFill=!1):O.fill()),M&&O.restore(),R&&this.consumePath(D)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=Z}eoClip(){this.pendingClip=re}beginText(){this.current.textMatrix=n.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const R=this.pendingTextPaths,O=this.ctx;if(R===void 0){O.beginPath();return}O.save(),O.beginPath();for(const d of R)O.setTransform(...d.transform),O.translate(d.x,d.y),d.addToPath(O,d.fontSize);O.restore(),O.clip(),O.beginPath(),delete this.pendingTextPaths}setCharSpacing(R){this.current.charSpacing=R}setWordSpacing(R){this.current.wordSpacing=R}setHScale(R){this.current.textHScale=R/100}setLeading(R){this.current.leading=-R}setFont(R,O){var z;const d=this.commonObjs.get(R),u=this.current;if(!d)throw new Error(`Can't find font for ${R}`);if(u.fontMatrix=d.fontMatrix||n.FONT_IDENTITY_MATRIX,(u.fontMatrix[0]===0||u.fontMatrix[3]===0)&&(0,n.warn)("Invalid font matrix for font "+R),O<0?(O=-O,u.fontDirection=-1):u.fontDirection=1,this.current.font=d,this.current.fontSize=O,d.isType3Font)return;const M=d.loadedName||"sans-serif",D=((z=d.systemFontInfo)==null?void 0:z.css)||`"${M}", ${d.fallbackName}`;let $="normal";d.black?$="900":d.bold&&($="bold");const X=d.italic?"italic":"normal";let B=O;O<_?B=_:O>m&&(B=m),this.current.fontSizeScale=O/B,this.ctx.font=`${X} ${$} ${B}px ${D}`}setTextRenderingMode(R){this.current.textRenderingMode=R}setTextRise(R){this.current.textRise=R}moveText(R,O){this.current.x=this.current.lineX+=R,this.current.y=this.current.lineY+=O}setLeadingMoveText(R,O){this.setLeading(-O),this.moveText(R,O)}setTextMatrix(R,O,d,u,M,D){this.current.textMatrix=[R,O,d,u,M,D],this.current.textMatrixScale=Math.hypot(R,O),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(R,O,d,u){const M=this.ctx,D=this.current,$=D.font,X=D.textRenderingMode,B=D.fontSize/D.fontSizeScale,z=X&n.TextRenderingMode.FILL_STROKE_MASK,j=!!(X&n.TextRenderingMode.ADD_TO_PATH_FLAG),Y=D.patternFill&&!$.missingFile;let ce;($.disableFontFace||j||Y)&&(ce=$.getPathGenerator(this.commonObjs,R)),$.disableFontFace||Y?(M.save(),M.translate(O,d),M.beginPath(),ce(M,B),u&&M.setTransform(...u),(z===n.TextRenderingMode.FILL||z===n.TextRenderingMode.FILL_STROKE)&&M.fill(),(z===n.TextRenderingMode.STROKE||z===n.TextRenderingMode.FILL_STROKE)&&M.stroke(),M.restore()):((z===n.TextRenderingMode.FILL||z===n.TextRenderingMode.FILL_STROKE)&&M.fillText(R,O,d),(z===n.TextRenderingMode.STROKE||z===n.TextRenderingMode.FILL_STROKE)&&M.strokeText(R,O,d)),j&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,f.getCurrentTransform)(M),x:O,y:d,fontSize:B,addToPath:ce})}get isFontSubpixelAAEnabled(){const{context:R}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);R.scale(1.5,1),R.fillText("I",0,10);const O=R.getImageData(0,0,10,10).data;let d=!1;for(let u=3;u<O.length;u+=4)if(O[u]>0&&O[u]<255){d=!0;break}return(0,n.shadow)(this,"isFontSubpixelAAEnabled",d)}showText(R){const O=this.current,d=O.font;if(d.isType3Font)return this.showType3Text(R);const u=O.fontSize;if(u===0)return;const M=this.ctx,D=O.fontSizeScale,$=O.charSpacing,X=O.wordSpacing,B=O.fontDirection,z=O.textHScale*B,j=R.length,Y=d.vertical,ce=Y?1:-1,oe=d.defaultVMetrics,Se=u*O.fontMatrix[0],Ee=O.textRenderingMode===n.TextRenderingMode.FILL&&!d.disableFontFace&&!O.patternFill;M.save(),M.transform(...O.textMatrix),M.translate(O.x,O.y+O.textRise),B>0?M.scale(z,-1):M.scale(z,1);let ye;if(O.patternFill){M.save();const be=O.fillColor.getPattern(M,this,(0,f.getCurrentTransformInverse)(M),I.PathType.FILL);ye=(0,f.getCurrentTransform)(M),M.restore(),M.fillStyle=be}let ne=O.lineWidth;const fe=O.textMatrixScale;if(fe===0||ne===0){const be=O.textRenderingMode&n.TextRenderingMode.FILL_STROKE_MASK;(be===n.TextRenderingMode.STROKE||be===n.TextRenderingMode.FILL_STROKE)&&(ne=this.getSinglePixelWidth())}else ne/=fe;if(D!==1&&(M.scale(D,D),ne/=D),M.lineWidth=ne,d.isInvalidPDFjsFont){const be=[];let Ie=0;for(const Le of R)be.push(Le.unicode),Ie+=Le.width;M.fillText(be.join(""),0,0),O.x+=Ie*Se*z,M.restore(),this.compose();return}let ae=0,de;for(de=0;de<j;++de){const be=R[de];if(typeof be=="number"){ae+=ce*be*u/1e3;continue}let Ie=!1;const Le=(be.isSpace?X:0)+$,De=be.fontChar,Be=be.accent;let je,He,qe=be.width;if(Y){const et=be.vmetric||oe,Te=-(be.vmetric?et[1]:qe*.5)*Se,U=et[2]*Se;qe=et?-et[0]:qe,je=Te/D,He=(ae+U)/D}else je=ae/D,He=0;if(d.remeasure&&qe>0){const et=M.measureText(De).width*1e3/u*D;if(qe<et&&this.isFontSubpixelAAEnabled){const Te=qe/et;Ie=!0,M.save(),M.scale(Te,1),je/=Te}else qe!==et&&(je+=(qe-et)/2e3*u/D)}if(this.contentVisible&&(be.isInFont||d.missingFile)){if(Ee&&!Be)M.fillText(De,je,He);else if(this.paintChar(De,je,He,ye),Be){const et=je+u*Be.offset.x/D,Te=He-u*Be.offset.y/D;this.paintChar(Be.fontChar,et,Te,ye)}}const Ge=Y?qe*Se-Le*B:qe*Se+Le*B;ae+=Ge,Ie&&M.restore()}Y?O.y-=ae:O.x+=ae*z,M.restore(),this.compose()}showType3Text(R){const O=this.ctx,d=this.current,u=d.font,M=d.fontSize,D=d.fontDirection,$=u.vertical?1:-1,X=d.charSpacing,B=d.wordSpacing,z=d.textHScale*D,j=d.fontMatrix||n.FONT_IDENTITY_MATRIX,Y=R.length,ce=d.textRenderingMode===n.TextRenderingMode.INVISIBLE;let oe,Se,Ee,ye;if(!(ce||M===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,O.save(),O.transform(...d.textMatrix),O.translate(d.x,d.y),O.scale(z,D),oe=0;oe<Y;++oe){if(Se=R[oe],typeof Se=="number"){ye=$*Se*M/1e3,this.ctx.translate(ye,0),d.x+=ye*z;continue}const ne=(Se.isSpace?B:0)+X,fe=u.charProcOperatorList[Se.operatorListId];if(!fe){(0,n.warn)(`Type3 character "${Se.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=Se,this.save(),O.scale(M,M),O.transform(...j),this.executeOperatorList(fe),this.restore()),Ee=n.Util.applyTransform([Se.width,0],j)[0]*M+ne,O.translate(Ee,0),d.x+=Ee*z}O.restore(),this.processingType3=null}}setCharWidth(R,O){}setCharWidthAndBounds(R,O,d,u,M,D){this.ctx.rect(d,u,M-d,D-u),this.ctx.clip(),this.endPath()}getColorN_Pattern(R){let O;if(R[0]==="TilingPattern"){const d=R[1],u=this.baseTransform||(0,f.getCurrentTransform)(this.ctx),M={createCanvasGraphics:D=>new Me(D,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};O=new I.TilingPattern(R,d,this.ctx,M,u)}else O=this._getPattern(R[1],R[2]);return O}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(R,O,d){const u=n.Util.makeHexColor(R,O,d);this.ctx.strokeStyle=u,this.current.strokeColor=u}setFillRGBColor(R,O,d){const u=n.Util.makeHexColor(R,O,d);this.ctx.fillStyle=u,this.current.fillColor=u,this.current.patternFill=!1}_getPattern(R,O=null){let d;return this.cachedPatterns.has(R)?d=this.cachedPatterns.get(R):(d=(0,I.getShadingPattern)(this.getObject(R)),this.cachedPatterns.set(R,d)),O&&(d.matrix=O),d}shadingFill(R){if(!this.contentVisible)return;const O=this.ctx;this.save();const d=this._getPattern(R);O.fillStyle=d.getPattern(O,this,(0,f.getCurrentTransformInverse)(O),I.PathType.SHADING);const u=(0,f.getCurrentTransformInverse)(O);if(u){const{width:M,height:D}=O.canvas,[$,X,B,z]=n.Util.getAxialAlignedBoundingBox([0,0,M,D],u);this.ctx.fillRect($,X,B-$,z-X)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,n.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,n.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(R,O){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(R)&&R.length===6&&this.transform(...R),this.baseTransform=(0,f.getCurrentTransform)(this.ctx),O)){const d=O[2]-O[0],u=O[3]-O[1];this.ctx.rect(O[0],O[1],d,u),this.current.updateRectMinMax((0,f.getCurrentTransform)(this.ctx),O),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(R){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const O=this.ctx;R.isolated||(0,n.info)("TODO: Support non-isolated groups."),R.knockout&&(0,n.warn)("Knockout groups not supported.");const d=(0,f.getCurrentTransform)(O);if(R.matrix&&O.transform(...R.matrix),!R.bbox)throw new Error("Bounding box is required.");let u=n.Util.getAxialAlignedBoundingBox(R.bbox,(0,f.getCurrentTransform)(O));const M=[0,0,O.canvas.width,O.canvas.height];u=n.Util.intersect(u,M)||[0,0,0,0];const D=Math.floor(u[0]),$=Math.floor(u[1]);let X=Math.max(Math.ceil(u[2])-D,1),B=Math.max(Math.ceil(u[3])-$,1),z=1,j=1;X>r&&(z=X/r,X=r),B>r&&(j=B/r,B=r),this.current.startNewPathAndClipBox([0,0,X,B]);let Y="groupAt"+this.groupLevel;R.smask&&(Y+="_smask_"+this.smaskCounter++%2);const ce=this.cachedCanvases.getCanvas(Y,X,B),oe=ce.context;oe.scale(1/z,1/j),oe.translate(-D,-$),oe.transform(...d),R.smask?this.smaskStack.push({canvas:ce.canvas,context:oe,offsetX:D,offsetY:$,scaleX:z,scaleY:j,subtype:R.smask.subtype,backdrop:R.smask.backdrop,transferMap:R.smask.transferMap||null,startTransformInverse:null}):(O.setTransform(1,0,0,1,0,0),O.translate(D,$),O.scale(z,j),O.save()),o(O,oe),this.ctx=oe,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(O),this.groupLevel++}endGroup(R){if(!this.contentVisible)return;this.groupLevel--;const O=this.ctx,d=this.groupStack.pop();if(this.ctx=d,this.ctx.imageSmoothingEnabled=!1,R.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const u=(0,f.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...u);const M=n.Util.getAxialAlignedBoundingBox([0,0,O.canvas.width,O.canvas.height],u);this.ctx.drawImage(O.canvas,0,0),this.ctx.restore(),this.compose(M)}}beginAnnotation(R,O,d,u,M){if(W(this,K,yi).call(this),c(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(O)&&O.length===4){const D=O[2]-O[0],$=O[3]-O[1];if(M&&this.annotationCanvasMap){d=d.slice(),d[4]-=O[0],d[5]-=O[1],O=O.slice(),O[0]=O[1]=0,O[2]=D,O[3]=$;const[X,B]=n.Util.singularValueDecompose2dScale((0,f.getCurrentTransform)(this.ctx)),{viewportScale:z}=this,j=Math.ceil(D*this.outputScaleX*z),Y=Math.ceil($*this.outputScaleY*z);this.annotationCanvas=this.canvasFactory.create(j,Y);const{canvas:ce,context:oe}=this.annotationCanvas;this.annotationCanvasMap.set(R,ce),this.annotationCanvas.savedCtx=this.ctx,this.ctx=oe,this.ctx.save(),this.ctx.setTransform(X,0,0,-B,0,$*B),c(this.ctx)}else c(this.ctx),this.ctx.rect(O[0],O[1],D,$),this.ctx.clip(),this.endPath()}this.current=new x(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...d),this.transform(...u)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),W(this,se,Si).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(R){if(!this.contentVisible)return;const O=R.count;R=this.getObject(R.data,R),R.count=O;const d=this.ctx,u=this.processingType3;if(u&&(u.compiled===void 0&&(u.compiled=P(R)),u.compiled)){u.compiled(d);return}const M=this._createMaskCanvas(R),D=M.canvas;d.save(),d.setTransform(1,0,0,1,0,0),d.drawImage(D,M.offsetX,M.offsetY),d.restore(),this.compose()}paintImageMaskXObjectRepeat(R,O,d=0,u=0,M,D){if(!this.contentVisible)return;R=this.getObject(R.data,R);const $=this.ctx;$.save();const X=(0,f.getCurrentTransform)($);$.transform(O,d,u,M,0,0);const B=this._createMaskCanvas(R);$.setTransform(1,0,0,1,B.offsetX-X[4],B.offsetY-X[5]);for(let z=0,j=D.length;z<j;z+=2){const Y=n.Util.transform(X,[O,d,u,M,D[z],D[z+1]]),[ce,oe]=n.Util.applyTransform([0,0],Y);$.drawImage(B.canvas,ce,oe)}$.restore(),this.compose()}paintImageMaskXObjectGroup(R){if(!this.contentVisible)return;const O=this.ctx,d=this.current.fillColor,u=this.current.patternFill;for(const M of R){const{data:D,width:$,height:X,transform:B}=M,z=this.cachedCanvases.getCanvas("maskCanvas",$,X),j=z.context;j.save();const Y=this.getObject(D,M);A(j,Y),j.globalCompositeOperation="source-in",j.fillStyle=u?d.getPattern(j,this,(0,f.getCurrentTransformInverse)(O),I.PathType.FILL):d,j.fillRect(0,0,$,X),j.restore(),O.save(),O.transform(...B),O.scale(1,-1),b(O,z.canvas,0,0,$,X,0,-1,1,1),O.restore()}this.compose()}paintImageXObject(R){if(!this.contentVisible)return;const O=this.getObject(R);if(!O){(0,n.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(O)}paintImageXObjectRepeat(R,O,d,u){if(!this.contentVisible)return;const M=this.getObject(R);if(!M){(0,n.warn)("Dependent image isn't ready yet");return}const D=M.width,$=M.height,X=[];for(let B=0,z=u.length;B<z;B+=2)X.push({transform:[O,0,0,d,u[B],u[B+1]],x:0,y:0,w:D,h:$});this.paintInlineImageXObjectGroup(M,X)}applyTransferMapsToCanvas(R){return this.current.transferMaps!=="none"&&(R.filter=this.current.transferMaps,R.drawImage(R.canvas,0,0),R.filter="none"),R.canvas}applyTransferMapsToBitmap(R){if(this.current.transferMaps==="none")return R.bitmap;const{bitmap:O,width:d,height:u}=R,M=this.cachedCanvases.getCanvas("inlineImage",d,u),D=M.context;return D.filter=this.current.transferMaps,D.drawImage(O,0,0),D.filter="none",M.canvas}paintInlineImageXObject(R){if(!this.contentVisible)return;const O=R.width,d=R.height,u=this.ctx;if(this.save(),!n.isNodeJS){const{filter:$}=u;$!=="none"&&$!==""&&(u.filter="none")}u.scale(1/O,-1/d);let M;if(R.bitmap)M=this.applyTransferMapsToBitmap(R);else if(typeof HTMLElement=="function"&&R instanceof HTMLElement||!R.data)M=R;else{const X=this.cachedCanvases.getCanvas("inlineImage",O,d).context;y(X,R),M=this.applyTransferMapsToCanvas(X)}const D=this._scaleImage(M,(0,f.getCurrentTransformInverse)(u));u.imageSmoothingEnabled=G((0,f.getCurrentTransform)(u),R.interpolate),b(u,D.img,0,0,D.paintWidth,D.paintHeight,0,-d,O,d),this.compose(),this.restore()}paintInlineImageXObjectGroup(R,O){if(!this.contentVisible)return;const d=this.ctx;let u;if(R.bitmap)u=R.bitmap;else{const M=R.width,D=R.height,X=this.cachedCanvases.getCanvas("inlineImage",M,D).context;y(X,R),u=this.applyTransferMapsToCanvas(X)}for(const M of O)d.save(),d.transform(...M.transform),d.scale(1,-1),b(d,u,M.x,M.y,M.w,M.h,0,-1,1,1),d.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(R){}markPointProps(R,O){}beginMarkedContent(R){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(R,O){R==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(O)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(R){const O=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(R);const d=this.ctx;this.pendingClip&&(O||(this.pendingClip===re?d.clip("evenodd"):d.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),d.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const R=(0,f.getCurrentTransform)(this.ctx);if(R[1]===0&&R[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(R[0]),Math.abs(R[3]));else{const O=Math.abs(R[0]*R[3]-R[2]*R[1]),d=Math.hypot(R[0],R[2]),u=Math.hypot(R[1],R[3]);this._cachedGetSinglePixelWidth=Math.max(d,u)/O}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:R}=this.current,{a:O,b:d,c:u,d:M}=this.ctx.getTransform();let D,$;if(d===0&&u===0){const X=Math.abs(O),B=Math.abs(M);if(X===B)if(R===0)D=$=1/X;else{const z=X*R;D=$=z<1?1/z:1}else if(R===0)D=1/X,$=1/B;else{const z=X*R,j=B*R;D=z<1?1/z:1,$=j<1?1/j:1}}else{const X=Math.abs(O*M-d*u),B=Math.hypot(O,d),z=Math.hypot(u,M);if(R===0)D=z/X,$=B/X;else{const j=R*X;D=z>j?z/j:1,$=B>j?B/j:1}}this._cachedScaleForStroking[0]=D,this._cachedScaleForStroking[1]=$}return this._cachedScaleForStroking}rescaleAndStroke(R){const{ctx:O}=this,{lineWidth:d}=this.current,[u,M]=this.getScaleForStroking();if(O.lineWidth=d||1,u===1&&M===1){O.stroke();return}const D=O.getLineDash();if(R&&O.save(),O.scale(u,M),D.length>0){const $=Math.max(u,M);O.setLineDash(D.map(X=>X/$)),O.lineDashOffset/=$}O.stroke(),R&&O.restore()}isContentVisible(){for(let R=this.markedContentStack.length-1;R>=0;R--)if(!this.markedContentStack[R].visible)return!1;return!0}};K=new WeakSet,yi=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},se=new WeakSet,Si=function(){if(this.pageColors){const R=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(R!=="none"){const O=this.ctx.filter;this.ctx.filter=R,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=O}}};let te=Me;t.CanvasGraphics=te;for(const q in n.OPS)te.prototype[q]!==void 0&&(te.prototype[n.OPS[q]]=te.prototype[q])},(e,t,l)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TilingPattern=t.PathType=void 0,t.getShadingPattern=C;var n=l(1),f=l(6);const I={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};t.PathType=I;function k(P,x){if(!x)return;const y=x[2]-x[0],A=x[3]-x[1],o=new Path2D;o.rect(x[0],x[1],y,A),P.clip(o)}class _{constructor(){this.constructor===_&&(0,n.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,n.unreachable)("Abstract method `getPattern` called.")}}class m extends _{constructor(x){super(),this._type=x[1],this._bbox=x[2],this._colorStops=x[3],this._p0=x[4],this._p1=x[5],this._r0=x[6],this._r1=x[7],this.matrix=null}_createGradient(x){let y;this._type==="axial"?y=x.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(y=x.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const A of this._colorStops)y.addColorStop(A[0],A[1]);return y}getPattern(x,y,A,o){let c;if(o===I.STROKE||o===I.FILL){const S=y.current.getClippedPathBoundingBox(o,(0,f.getCurrentTransform)(x))||[0,0,0,0],w=Math.ceil(S[2]-S[0])||1,v=Math.ceil(S[3]-S[1])||1,F=y.cachedCanvases.getCanvas("pattern",w,v,!0),N=F.context;N.clearRect(0,0,N.canvas.width,N.canvas.height),N.beginPath(),N.rect(0,0,N.canvas.width,N.canvas.height),N.translate(-S[0],-S[1]),A=n.Util.transform(A,[1,0,0,1,S[0],S[1]]),N.transform(...y.baseTransform),this.matrix&&N.transform(...this.matrix),k(N,this._bbox),N.fillStyle=this._createGradient(N),N.fill(),c=x.createPattern(F.canvas,"no-repeat");const G=new DOMMatrix(A);c.setTransform(G)}else k(x,this._bbox),c=this._createGradient(x);return c}}function r(P,x,y,A,o,c,S,w){const v=x.coords,F=x.colors,N=P.data,G=P.width*4;let le;v[y+1]>v[A+1]&&(le=y,y=A,A=le,le=c,c=S,S=le),v[A+1]>v[o+1]&&(le=A,A=o,o=le,le=S,S=w,w=le),v[y+1]>v[A+1]&&(le=y,y=A,A=le,le=c,c=S,S=le);const V=(v[y]+x.offsetX)*x.scaleX,Z=(v[y+1]+x.offsetY)*x.scaleY,re=(v[A]+x.offsetX)*x.scaleX,te=(v[A+1]+x.offsetY)*x.scaleY,K=(v[o]+x.offsetX)*x.scaleX,ue=(v[o+1]+x.offsetY)*x.scaleY;if(Z>=ue)return;const se=F[c],Ce=F[c+1],Me=F[c+2],q=F[S],R=F[S+1],O=F[S+2],d=F[w],u=F[w+1],M=F[w+2],D=Math.round(Z),$=Math.round(ue);let X,B,z,j,Y,ce,oe,Se;for(let Ee=D;Ee<=$;Ee++){if(Ee<te){const de=Ee<Z?0:(Z-Ee)/(Z-te);X=V-(V-re)*de,B=se-(se-q)*de,z=Ce-(Ce-R)*de,j=Me-(Me-O)*de}else{let de;Ee>ue?de=1:te===ue?de=0:de=(te-Ee)/(te-ue),X=re-(re-K)*de,B=q-(q-d)*de,z=R-(R-u)*de,j=O-(O-M)*de}let ye;Ee<Z?ye=0:Ee>ue?ye=1:ye=(Z-Ee)/(Z-ue),Y=V-(V-K)*ye,ce=se-(se-d)*ye,oe=Ce-(Ce-u)*ye,Se=Me-(Me-M)*ye;const ne=Math.round(Math.min(X,Y)),fe=Math.round(Math.max(X,Y));let ae=G*Ee+ne*4;for(let de=ne;de<=fe;de++)ye=(X-de)/(X-Y),ye<0?ye=0:ye>1&&(ye=1),N[ae++]=B-(B-ce)*ye|0,N[ae++]=z-(z-oe)*ye|0,N[ae++]=j-(j-Se)*ye|0,N[ae++]=255}}function a(P,x,y){const A=x.coords,o=x.colors;let c,S;switch(x.type){case"lattice":const w=x.verticesPerRow,v=Math.floor(A.length/w)-1,F=w-1;for(c=0;c<v;c++){let N=c*w;for(let G=0;G<F;G++,N++)r(P,y,A[N],A[N+1],A[N+w],o[N],o[N+1],o[N+w]),r(P,y,A[N+w+1],A[N+1],A[N+w],o[N+w+1],o[N+1],o[N+w])}break;case"triangles":for(c=0,S=A.length;c<S;c+=3)r(P,y,A[c],A[c+1],A[c+2],o[c],o[c+1],o[c+2]);break;default:throw new Error("illegal figure")}}class T extends _{constructor(x){super(),this._coords=x[2],this._colors=x[3],this._figures=x[4],this._bounds=x[5],this._bbox=x[7],this._background=x[8],this.matrix=null}_createMeshCanvas(x,y,A){const w=Math.floor(this._bounds[0]),v=Math.floor(this._bounds[1]),F=Math.ceil(this._bounds[2])-w,N=Math.ceil(this._bounds[3])-v,G=Math.min(Math.ceil(Math.abs(F*x[0]*1.1)),3e3),le=Math.min(Math.ceil(Math.abs(N*x[1]*1.1)),3e3),V=F/G,Z=N/le,re={coords:this._coords,colors:this._colors,offsetX:-w,offsetY:-v,scaleX:1/V,scaleY:1/Z},te=G+2*2,K=le+2*2,ue=A.getCanvas("mesh",te,K,!1),se=ue.context,Ce=se.createImageData(G,le);if(y){const q=Ce.data;for(let R=0,O=q.length;R<O;R+=4)q[R]=y[0],q[R+1]=y[1],q[R+2]=y[2],q[R+3]=255}for(const q of this._figures)a(Ce,q,re);return se.putImageData(Ce,2,2),{canvas:ue.canvas,offsetX:w-2*V,offsetY:v-2*Z,scaleX:V,scaleY:Z}}getPattern(x,y,A,o){k(x,this._bbox);let c;if(o===I.SHADING)c=n.Util.singularValueDecompose2dScale((0,f.getCurrentTransform)(x));else if(c=n.Util.singularValueDecompose2dScale(y.baseTransform),this.matrix){const w=n.Util.singularValueDecompose2dScale(this.matrix);c=[c[0]*w[0],c[1]*w[1]]}const S=this._createMeshCanvas(c,o===I.SHADING?null:this._background,y.cachedCanvases);return o!==I.SHADING&&(x.setTransform(...y.baseTransform),this.matrix&&x.transform(...this.matrix)),x.translate(S.offsetX,S.offsetY),x.scale(S.scaleX,S.scaleY),x.createPattern(S.canvas,"no-repeat")}}class E extends _{getPattern(){return"hotpink"}}function C(P){switch(P[0]){case"RadialAxial":return new m(P);case"Mesh":return new T(P);case"Dummy":return new E}throw new Error(`Unknown IR type: ${P[0]}`)}const s={COLORED:1,UNCOLORED:2},b=class b{constructor(x,y,A,o,c){this.operatorList=x[2],this.matrix=x[3]||[1,0,0,1,0,0],this.bbox=x[4],this.xstep=x[5],this.ystep=x[6],this.paintType=x[7],this.tilingType=x[8],this.color=y,this.ctx=A,this.canvasGraphicsFactory=o,this.baseTransform=c}createPatternCanvas(x){const y=this.operatorList,A=this.bbox,o=this.xstep,c=this.ystep,S=this.paintType,w=this.tilingType,v=this.color,F=this.canvasGraphicsFactory;(0,n.info)("TilingType: "+w);const N=A[0],G=A[1],le=A[2],V=A[3],Z=n.Util.singularValueDecompose2dScale(this.matrix),re=n.Util.singularValueDecompose2dScale(this.baseTransform),te=[Z[0]*re[0],Z[1]*re[1]],K=this.getSizeAndScale(o,this.ctx.canvas.width,te[0]),ue=this.getSizeAndScale(c,this.ctx.canvas.height,te[1]),se=x.cachedCanvases.getCanvas("pattern",K.size,ue.size,!0),Ce=se.context,Me=F.createCanvasGraphics(Ce);Me.groupLevel=x.groupLevel,this.setFillAndStrokeStyleToContext(Me,S,v);let q=N,R=G,O=le,d=V;return N<0&&(q=0,O+=Math.abs(N)),G<0&&(R=0,d+=Math.abs(G)),Ce.translate(-(K.scale*q),-(ue.scale*R)),Me.transform(K.scale,0,0,ue.scale,0,0),Ce.save(),this.clipBbox(Me,q,R,O,d),Me.baseTransform=(0,f.getCurrentTransform)(Me.ctx),Me.executeOperatorList(y),Me.endDrawing(),{canvas:se.canvas,scaleX:K.scale,scaleY:ue.scale,offsetX:q,offsetY:R}}getSizeAndScale(x,y,A){x=Math.abs(x);const o=Math.max(b.MAX_PATTERN_SIZE,y);let c=Math.ceil(x*A);return c>=o?c=o:A=c/x,{scale:A,size:c}}clipBbox(x,y,A,o,c){const S=o-y,w=c-A;x.ctx.rect(y,A,S,w),x.current.updateRectMinMax((0,f.getCurrentTransform)(x.ctx),[y,A,o,c]),x.clip(),x.endPath()}setFillAndStrokeStyleToContext(x,y,A){const o=x.ctx,c=x.current;switch(y){case s.COLORED:const S=this.ctx;o.fillStyle=S.fillStyle,o.strokeStyle=S.strokeStyle,c.fillColor=S.fillStyle,c.strokeColor=S.strokeStyle;break;case s.UNCOLORED:const w=n.Util.makeHexColor(A[0],A[1],A[2]);o.fillStyle=w,o.strokeStyle=w,c.fillColor=w,c.strokeColor=w;break;default:throw new n.FormatError(`Unsupported paint type: ${y}`)}}getPattern(x,y,A,o){let c=A;o!==I.SHADING&&(c=n.Util.transform(c,y.baseTransform),this.matrix&&(c=n.Util.transform(c,this.matrix)));const S=this.createPatternCanvas(y);let w=new DOMMatrix(c);w=w.translate(S.offsetX,S.offsetY),w=w.scale(1/S.scaleX,1/S.scaleY);const v=x.createPattern(S.canvas,"repeat");return v.setTransform(w),v}};Je(b,"MAX_PATTERN_SIZE",3e3);let g=b;t.TilingPattern=g},(e,t,l)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.convertBlackAndWhiteToRGBA=I,t.convertToRGBA=f,t.grayToRGBA=_;var n=l(1);function f(m){switch(m.kind){case n.ImageKind.GRAYSCALE_1BPP:return I(m);case n.ImageKind.RGB_24BPP:return k(m)}return null}function I({src:m,srcPos:r=0,dest:a,width:T,height:E,nonBlackColor:C=4294967295,inverseDecode:s=!1}){const g=n.FeatureTest.isLittleEndian?4278190080:255,[b,P]=s?[C,g]:[g,C],x=T>>3,y=T&7,A=m.length;a=new Uint32Array(a.buffer);let o=0;for(let c=0;c<E;c++){for(const w=r+x;r<w;r++){const v=r<A?m[r]:255;a[o++]=v&128?P:b,a[o++]=v&64?P:b,a[o++]=v&32?P:b,a[o++]=v&16?P:b,a[o++]=v&8?P:b,a[o++]=v&4?P:b,a[o++]=v&2?P:b,a[o++]=v&1?P:b}if(y===0)continue;const S=r<A?m[r++]:255;for(let w=0;w<y;w++)a[o++]=S&1<<7-w?P:b}return{srcPos:r,destPos:o}}function k({src:m,srcPos:r=0,dest:a,destPos:T=0,width:E,height:C}){let s=0;const g=m.length>>2,b=new Uint32Array(m.buffer,r,g);if(n.FeatureTest.isLittleEndian){for(;s<g-2;s+=3,T+=4){const P=b[s],x=b[s+1],y=b[s+2];a[T]=P|4278190080,a[T+1]=P>>>24|x<<8|4278190080,a[T+2]=x>>>16|y<<16|4278190080,a[T+3]=y>>>8|4278190080}for(let P=s*4,x=m.length;P<x;P+=3)a[T++]=m[P]|m[P+1]<<8|m[P+2]<<16|4278190080}else{for(;s<g-2;s+=3,T+=4){const P=b[s],x=b[s+1],y=b[s+2];a[T]=P|255,a[T+1]=P<<24|x>>>8|255,a[T+2]=x<<16|y>>>16|255,a[T+3]=y<<8|255}for(let P=s*4,x=m.length;P<x;P+=3)a[T++]=m[P]<<24|m[P+1]<<16|m[P+2]<<8|255}return{srcPos:r,destPos:T}}function _(m,r){if(n.FeatureTest.isLittleEndian)for(let a=0,T=m.length;a<T;a++)r[a]=m[a]*65793|4278190080;else for(let a=0,T=m.length;a<T;a++)r[a]=m[a]*16843008|255}},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GlobalWorkerOptions=void 0;const l=Object.create(null);t.GlobalWorkerOptions=l,l.workerPort=null,l.workerSrc=""},(e,t,l)=>{var m,Fn,a,Nn,E,zt;Object.defineProperty(t,"__esModule",{value:!0}),t.MessageHandler=void 0;var n=l(1);const f={UNKNOWN:0,DATA:1,ERROR:2},I={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function k(s){switch(s instanceof Error||typeof s=="object"&&s!==null||(0,n.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),s.name){case"AbortException":return new n.AbortException(s.message);case"MissingPDFException":return new n.MissingPDFException(s.message);case"PasswordException":return new n.PasswordException(s.message,s.code);case"UnexpectedResponseException":return new n.UnexpectedResponseException(s.message,s.status);case"UnknownErrorException":return new n.UnknownErrorException(s.message,s.details);default:return new n.UnknownErrorException(s.message,s.toString())}}class _{constructor(g,b,P){H(this,m);H(this,a);H(this,E);this.sourceName=g,this.targetName=b,this.comObj=P,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=x=>{const y=x.data;if(y.targetName!==this.sourceName)return;if(y.stream){W(this,a,Nn).call(this,y);return}if(y.callback){const o=y.callbackId,c=this.callbackCapabilities[o];if(!c)throw new Error(`Cannot resolve callback ${o}`);if(delete this.callbackCapabilities[o],y.callback===f.DATA)c.resolve(y.data);else if(y.callback===f.ERROR)c.reject(k(y.reason));else throw new Error("Unexpected callback case");return}const A=this.actionHandler[y.action];if(!A)throw new Error(`Unknown action from worker: ${y.action}`);if(y.callbackId){const o=this.sourceName,c=y.sourceName;new Promise(function(S){S(A(y.data))}).then(function(S){P.postMessage({sourceName:o,targetName:c,callback:f.DATA,callbackId:y.callbackId,data:S})},function(S){P.postMessage({sourceName:o,targetName:c,callback:f.ERROR,callbackId:y.callbackId,reason:k(S)})});return}if(y.streamId){W(this,m,Fn).call(this,y);return}A(y.data)},P.addEventListener("message",this._onComObjOnMessage)}on(g,b){const P=this.actionHandler;if(P[g])throw new Error(`There is already an actionName called "${g}"`);P[g]=b}send(g,b,P){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:g,data:b},P)}sendWithPromise(g,b,P){const x=this.callbackId++,y=new n.PromiseCapability;this.callbackCapabilities[x]=y;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:g,callbackId:x,data:b},P)}catch(A){y.reject(A)}return y.promise}sendWithStream(g,b,P,x){const y=this.streamId++,A=this.sourceName,o=this.targetName,c=this.comObj;return new ReadableStream({start:S=>{const w=new n.PromiseCapability;return this.streamControllers[y]={controller:S,startCall:w,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:A,targetName:o,action:g,streamId:y,data:b,desiredSize:S.desiredSize},x),w.promise},pull:S=>{const w=new n.PromiseCapability;return this.streamControllers[y].pullCall=w,c.postMessage({sourceName:A,targetName:o,stream:I.PULL,streamId:y,desiredSize:S.desiredSize}),w.promise},cancel:S=>{(0,n.assert)(S instanceof Error,"cancel must have a valid reason");const w=new n.PromiseCapability;return this.streamControllers[y].cancelCall=w,this.streamControllers[y].isClosed=!0,c.postMessage({sourceName:A,targetName:o,stream:I.CANCEL,streamId:y,reason:k(S)}),w.promise}},P)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}m=new WeakSet,Fn=function(g){const b=g.streamId,P=this.sourceName,x=g.sourceName,y=this.comObj,A=this,o=this.actionHandler[g.action],c={enqueue(S,w=1,v){if(this.isCancelled)return;const F=this.desiredSize;this.desiredSize-=w,F>0&&this.desiredSize<=0&&(this.sinkCapability=new n.PromiseCapability,this.ready=this.sinkCapability.promise),y.postMessage({sourceName:P,targetName:x,stream:I.ENQUEUE,streamId:b,chunk:S},v)},close(){this.isCancelled||(this.isCancelled=!0,y.postMessage({sourceName:P,targetName:x,stream:I.CLOSE,streamId:b}),delete A.streamSinks[b])},error(S){(0,n.assert)(S instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,y.postMessage({sourceName:P,targetName:x,stream:I.ERROR,streamId:b,reason:k(S)}))},sinkCapability:new n.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:g.desiredSize,ready:null};c.sinkCapability.resolve(),c.ready=c.sinkCapability.promise,this.streamSinks[b]=c,new Promise(function(S){S(o(g.data,c))}).then(function(){y.postMessage({sourceName:P,targetName:x,stream:I.START_COMPLETE,streamId:b,success:!0})},function(S){y.postMessage({sourceName:P,targetName:x,stream:I.START_COMPLETE,streamId:b,reason:k(S)})})},a=new WeakSet,Nn=function(g){const b=g.streamId,P=this.sourceName,x=g.sourceName,y=this.comObj,A=this.streamControllers[b],o=this.streamSinks[b];switch(g.stream){case I.START_COMPLETE:g.success?A.startCall.resolve():A.startCall.reject(k(g.reason));break;case I.PULL_COMPLETE:g.success?A.pullCall.resolve():A.pullCall.reject(k(g.reason));break;case I.PULL:if(!o){y.postMessage({sourceName:P,targetName:x,stream:I.PULL_COMPLETE,streamId:b,success:!0});break}o.desiredSize<=0&&g.desiredSize>0&&o.sinkCapability.resolve(),o.desiredSize=g.desiredSize,new Promise(function(c){var S;c((S=o.onPull)==null?void 0:S.call(o))}).then(function(){y.postMessage({sourceName:P,targetName:x,stream:I.PULL_COMPLETE,streamId:b,success:!0})},function(c){y.postMessage({sourceName:P,targetName:x,stream:I.PULL_COMPLETE,streamId:b,reason:k(c)})});break;case I.ENQUEUE:if((0,n.assert)(A,"enqueue should have stream controller"),A.isClosed)break;A.controller.enqueue(g.chunk);break;case I.CLOSE:if((0,n.assert)(A,"close should have stream controller"),A.isClosed)break;A.isClosed=!0,A.controller.close(),W(this,E,zt).call(this,A,b);break;case I.ERROR:(0,n.assert)(A,"error should have stream controller"),A.controller.error(k(g.reason)),W(this,E,zt).call(this,A,b);break;case I.CANCEL_COMPLETE:g.success?A.cancelCall.resolve():A.cancelCall.reject(k(g.reason)),W(this,E,zt).call(this,A,b);break;case I.CANCEL:if(!o)break;new Promise(function(c){var S;c((S=o.onCancel)==null?void 0:S.call(o,k(g.reason)))}).then(function(){y.postMessage({sourceName:P,targetName:x,stream:I.CANCEL_COMPLETE,streamId:b,success:!0})},function(c){y.postMessage({sourceName:P,targetName:x,stream:I.CANCEL_COMPLETE,streamId:b,reason:k(c)})}),o.sinkCapability.reject(k(g.reason)),o.isCancelled=!0,delete this.streamSinks[b];break;default:throw new Error("Unexpected stream case")}},E=new WeakSet,zt=async function(g,b){var P,x,y;await Promise.allSettled([(P=g.startCall)==null?void 0:P.promise,(x=g.pullCall)==null?void 0:x.promise,(y=g.cancelCall)==null?void 0:y.promise]),delete this.streamControllers[b]},t.MessageHandler=_},(e,t,l)=>{var I,k;Object.defineProperty(t,"__esModule",{value:!0}),t.Metadata=void 0;var n=l(1);class f{constructor({parsedData:m,rawData:r}){H(this,I,void 0);H(this,k,void 0);he(this,I,m),he(this,k,r)}getRaw(){return i(this,k)}get(m){return i(this,I).get(m)??null}getAll(){return(0,n.objectFromMap)(i(this,I))}has(m){return i(this,I).has(m)}}I=new WeakMap,k=new WeakMap,t.Metadata=f},(e,t,l)=>{var m,r,a,T,E,C,Ei;Object.defineProperty(t,"__esModule",{value:!0}),t.OptionalContentConfig=void 0;var n=l(1),f=l(8);const I=Symbol("INTERNAL");class k{constructor(b,P){H(this,m,!0);this.name=b,this.intent=P}get visible(){return i(this,m)}_setVisible(b,P){b!==I&&(0,n.unreachable)("Internal method `_setVisible` called."),he(this,m,P)}}m=new WeakMap;class _{constructor(b){H(this,C);H(this,r,null);H(this,a,new Map);H(this,T,null);H(this,E,null);if(this.name=null,this.creator=null,b!==null){this.name=b.name,this.creator=b.creator,he(this,E,b.order);for(const P of b.groups)i(this,a).set(P.id,new k(P.name,P.intent));if(b.baseState==="OFF")for(const P of i(this,a).values())P._setVisible(I,!1);for(const P of b.on)i(this,a).get(P)._setVisible(I,!0);for(const P of b.off)i(this,a).get(P)._setVisible(I,!1);he(this,T,this.getHash())}}isVisible(b){if(i(this,a).size===0)return!0;if(!b)return(0,n.warn)("Optional content group not defined."),!0;if(b.type==="OCG")return i(this,a).has(b.id)?i(this,a).get(b.id).visible:((0,n.warn)(`Optional content group not found: ${b.id}`),!0);if(b.type==="OCMD"){if(b.expression)return W(this,C,Ei).call(this,b.expression);if(!b.policy||b.policy==="AnyOn"){for(const P of b.ids){if(!i(this,a).has(P))return(0,n.warn)(`Optional content group not found: ${P}`),!0;if(i(this,a).get(P).visible)return!0}return!1}else if(b.policy==="AllOn"){for(const P of b.ids){if(!i(this,a).has(P))return(0,n.warn)(`Optional content group not found: ${P}`),!0;if(!i(this,a).get(P).visible)return!1}return!0}else if(b.policy==="AnyOff"){for(const P of b.ids){if(!i(this,a).has(P))return(0,n.warn)(`Optional content group not found: ${P}`),!0;if(!i(this,a).get(P).visible)return!0}return!1}else if(b.policy==="AllOff"){for(const P of b.ids){if(!i(this,a).has(P))return(0,n.warn)(`Optional content group not found: ${P}`),!0;if(i(this,a).get(P).visible)return!1}return!0}return(0,n.warn)(`Unknown optional content policy ${b.policy}.`),!0}return(0,n.warn)(`Unknown group type ${b.type}.`),!0}setVisibility(b,P=!0){if(!i(this,a).has(b)){(0,n.warn)(`Optional content group not found: ${b}`);return}i(this,a).get(b)._setVisible(I,!!P),he(this,r,null)}get hasInitialVisibility(){return i(this,T)===null||this.getHash()===i(this,T)}getOrder(){return i(this,a).size?i(this,E)?i(this,E).slice():[...i(this,a).keys()]:null}getGroups(){return i(this,a).size>0?(0,n.objectFromMap)(i(this,a)):null}getGroup(b){return i(this,a).get(b)||null}getHash(){if(i(this,r)!==null)return i(this,r);const b=new f.MurmurHash3_64;for(const[P,x]of i(this,a))b.update(`${P}:${x.visible}`);return he(this,r,b.hexdigest())}}r=new WeakMap,a=new WeakMap,T=new WeakMap,E=new WeakMap,C=new WeakSet,Ei=function(b){const P=b.length;if(P<2)return!0;const x=b[0];for(let y=1;y<P;y++){const A=b[y];let o;if(Array.isArray(A))o=W(this,C,Ei).call(this,A);else if(i(this,a).has(A))o=i(this,a).get(A).visible;else return(0,n.warn)(`Optional content group not found: ${A}`),!0;switch(x){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return x==="And"},t.OptionalContentConfig=_},(e,t,l)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFDataTransportStream=void 0;var n=l(1),f=l(6);class I{constructor({length:r,initialData:a,progressiveDone:T=!1,contentDispositionFilename:E=null,disableRange:C=!1,disableStream:s=!1},g){if((0,n.assert)(g,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=T,this._contentDispositionFilename=E,(a==null?void 0:a.length)>0){const b=a instanceof Uint8Array&&a.byteLength===a.buffer.byteLength?a.buffer:new Uint8Array(a).buffer;this._queuedChunks.push(b)}this._pdfDataRangeTransport=g,this._isStreamingSupported=!s,this._isRangeSupported=!C,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((b,P)=>{this._onReceiveData({begin:b,chunk:P})}),this._pdfDataRangeTransport.addProgressListener((b,P)=>{this._onProgress({loaded:b,total:P})}),this._pdfDataRangeTransport.addProgressiveReadListener(b=>{this._onReceiveData({chunk:b})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:r,chunk:a}){const T=a instanceof Uint8Array&&a.byteLength===a.buffer.byteLength?a.buffer:new Uint8Array(a).buffer;if(r===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(T):this._queuedChunks.push(T);else{const E=this._rangeReaders.some(function(C){return C._begin!==r?!1:(C._enqueue(T),!0)});(0,n.assert)(E,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var r;return((r=this._fullRequestReader)==null?void 0:r._loaded)??0}_onProgress(r){var a,T,E,C;r.total===void 0?(T=(a=this._rangeReaders[0])==null?void 0:a.onProgress)==null||T.call(a,{loaded:r.loaded}):(C=(E=this._fullRequestReader)==null?void 0:E.onProgress)==null||C.call(E,{loaded:r.loaded,total:r.total})}_onProgressiveDone(){var r;(r=this._fullRequestReader)==null||r.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(r){const a=this._rangeReaders.indexOf(r);a>=0&&this._rangeReaders.splice(a,1)}getFullReader(){(0,n.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const r=this._queuedChunks;return this._queuedChunks=null,new k(this,r,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(r,a){if(a<=this._progressiveDataLength)return null;const T=new _(this,r,a);return this._pdfDataRangeTransport.requestDataRange(r,a),this._rangeReaders.push(T),T}cancelAllRequests(r){var a;(a=this._fullRequestReader)==null||a.cancel(r);for(const T of this._rangeReaders.slice(0))T.cancel(r);this._pdfDataRangeTransport.abort()}}t.PDFDataTransportStream=I;class k{constructor(r,a,T=!1,E=null){this._stream=r,this._done=T||!1,this._filename=(0,f.isPdfFile)(E)?E:null,this._queuedChunks=a||[],this._loaded=0;for(const C of this._queuedChunks)this._loaded+=C.byteLength;this._requests=[],this._headersReady=Promise.resolve(),r._fullRequestReader=this,this.onProgress=null}_enqueue(r){this._done||(this._requests.length>0?this._requests.shift().resolve({value:r,done:!1}):this._queuedChunks.push(r),this._loaded+=r.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const r=new n.PromiseCapability;return this._requests.push(r),r.promise}cancel(r){this._done=!0;for(const a of this._requests)a.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class _{constructor(r,a,T){this._stream=r,this._begin=a,this._end=T,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(r){if(!this._done){if(this._requests.length===0)this._queuedChunk=r;else{this._requests.shift().resolve({value:r,done:!1});for(const T of this._requests)T.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const a=this._queuedChunk;return this._queuedChunk=null,{value:a,done:!1}}if(this._done)return{value:void 0,done:!0};const r=new n.PromiseCapability;return this._requests.push(r),r.promise}cancel(r){this._done=!0;for(const a of this._requests)a.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(e,t,l)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFFetchStream=void 0;var n=l(1),f=l(20);function I(T,E,C){return{method:"GET",headers:T,signal:C.signal,mode:"cors",credentials:E?"include":"same-origin",redirect:"follow"}}function k(T){const E=new Headers;for(const C in T){const s=T[C];s!==void 0&&E.append(C,s)}return E}function _(T){return T instanceof Uint8Array?T.buffer:T instanceof ArrayBuffer?T:((0,n.warn)(`getArrayBuffer - unexpected data format: ${T}`),new Uint8Array(T).buffer)}class m{constructor(E){this.source=E,this.isHttp=/^https?:/i.test(E.url),this.httpHeaders=this.isHttp&&E.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var E;return((E=this._fullRequestReader)==null?void 0:E._loaded)??0}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new r(this),this._fullRequestReader}getRangeReader(E,C){if(C<=this._progressiveDataLength)return null;const s=new a(this,E,C);return this._rangeRequestReaders.push(s),s}cancelAllRequests(E){var C;(C=this._fullRequestReader)==null||C.cancel(E);for(const s of this._rangeRequestReaders.slice(0))s.cancel(E)}}t.PDFFetchStream=m;class r{constructor(E){this._stream=E,this._reader=null,this._loaded=0,this._filename=null;const C=E.source;this._withCredentials=C.withCredentials||!1,this._contentLength=C.length,this._headersCapability=new n.PromiseCapability,this._disableRange=C.disableRange||!1,this._rangeChunkSize=C.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!C.disableStream,this._isRangeSupported=!C.disableRange,this._headers=k(this._stream.httpHeaders);const s=C.url;fetch(s,I(this._headers,this._withCredentials,this._abortController)).then(g=>{if(!(0,f.validateResponseStatus)(g.status))throw(0,f.createResponseStatusError)(g.status,s);this._reader=g.body.getReader(),this._headersCapability.resolve();const b=y=>g.headers.get(y),{allowRangeRequests:P,suggestedLength:x}=(0,f.validateRangeRequestCapabilities)({getResponseHeader:b,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=P,this._contentLength=x||this._contentLength,this._filename=(0,f.extractFilenameFromHeader)(b),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new n.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;await this._headersCapability.promise;const{value:E,done:C}=await this._reader.read();return C?{value:E,done:C}:(this._loaded+=E.byteLength,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:_(E),done:!1})}cancel(E){var C;(C=this._reader)==null||C.cancel(E),this._abortController.abort()}}class a{constructor(E,C,s){this._stream=E,this._reader=null,this._loaded=0;const g=E.source;this._withCredentials=g.withCredentials||!1,this._readCapability=new n.PromiseCapability,this._isStreamingSupported=!g.disableStream,this._abortController=new AbortController,this._headers=k(this._stream.httpHeaders),this._headers.append("Range",`bytes=${C}-${s-1}`);const b=g.url;fetch(b,I(this._headers,this._withCredentials,this._abortController)).then(P=>{if(!(0,f.validateResponseStatus)(P.status))throw(0,f.createResponseStatusError)(P.status,b);this._readCapability.resolve(),this._reader=P.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;await this._readCapability.promise;const{value:E,done:C}=await this._reader.read();return C?{value:E,done:C}:(this._loaded+=E.byteLength,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:_(E),done:!1})}cancel(E){var C;(C=this._reader)==null||C.cancel(E),this._abortController.abort()}}},(e,t,l)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createResponseStatusError=m,t.extractFilenameFromHeader=_,t.validateRangeRequestCapabilities=k,t.validateResponseStatus=r;var n=l(1),f=l(21),I=l(6);function k({getResponseHeader:a,isHttp:T,rangeChunkSize:E,disableRange:C}){const s={allowRangeRequests:!1,suggestedLength:void 0},g=parseInt(a("Content-Length"),10);return!Number.isInteger(g)||(s.suggestedLength=g,g<=2*E)||C||!T||a("Accept-Ranges")!=="bytes"||(a("Content-Encoding")||"identity")!=="identity"||(s.allowRangeRequests=!0),s}function _(a){const T=a("Content-Disposition");if(T){let E=(0,f.getFilenameFromContentDispositionHeader)(T);if(E.includes("%"))try{E=decodeURIComponent(E)}catch{}if((0,I.isPdfFile)(E))return E}return null}function m(a,T){return a===404||a===0&&T.startsWith("file:")?new n.MissingPDFException('Missing PDF "'+T+'".'):new n.UnexpectedResponseException(`Unexpected server response (${a}) while retrieving PDF "${T}".`,a)}function r(a){return a===200||a===206}},(e,t,l)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getFilenameFromContentDispositionHeader=f;var n=l(1);function f(I){let k=!0,_=m("filename\\*","i").exec(I);if(_){_=_[1];let g=E(_);return g=unescape(g),g=C(g),g=s(g),a(g)}if(_=T(I),_){const g=s(_);return a(g)}if(_=m("filename","i").exec(I),_){_=_[1];let g=E(_);return g=s(g),a(g)}function m(g,b){return new RegExp("(?:^|;)\\s*"+g+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',b)}function r(g,b){if(g){if(!/^[\x00-\xFF]+$/.test(b))return b;try{const P=new TextDecoder(g,{fatal:!0}),x=(0,n.stringToBytes)(b);b=P.decode(x),k=!1}catch{}}return b}function a(g){return k&&/[\x80-\xff]/.test(g)&&(g=r("utf-8",g),k&&(g=r("iso-8859-1",g))),g}function T(g){const b=[];let P;const x=m("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(P=x.exec(g))!==null;){let[,A,o,c]=P;if(A=parseInt(A,10),A in b){if(A===0)break;continue}b[A]=[o,c]}const y=[];for(let A=0;A<b.length&&A in b;++A){let[o,c]=b[A];c=E(c),o&&(c=unescape(c),A===0&&(c=C(c))),y.push(c)}return y.join("")}function E(g){if(g.startsWith('"')){const b=g.slice(1).split('\\"');for(let P=0;P<b.length;++P){const x=b[P].indexOf('"');x!==-1&&(b[P]=b[P].slice(0,x),b.length=P+1),b[P]=b[P].replaceAll(/\\(.)/g,"$1")}g=b.join('"')}return g}function C(g){const b=g.indexOf("'");if(b===-1)return g;const P=g.slice(0,b),y=g.slice(b+1).replace(/^[^']*'/,"");return r(P,y)}function s(g){return!g.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(g)?g:g.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(b,P,x,y){if(x==="q"||x==="Q")return y=y.replaceAll("_"," "),y=y.replaceAll(/=([0-9a-fA-F]{2})/g,function(A,o){return String.fromCharCode(parseInt(o,16))}),r(P,y);try{y=atob(y)}catch{}return r(P,y)})}return""}},(e,t,l)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNetworkStream=void 0;var n=l(1),f=l(20);const I=200,k=206;function _(E){const C=E.response;return typeof C!="string"?C:(0,n.stringToBytes)(C).buffer}class m{constructor(C,s={}){this.url=C,this.isHttp=/^https?:/i.test(C),this.httpHeaders=this.isHttp&&s.httpHeaders||Object.create(null),this.withCredentials=s.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(C,s,g){const b={begin:C,end:s};for(const P in g)b[P]=g[P];return this.request(b)}requestFull(C){return this.request(C)}request(C){const s=new XMLHttpRequest,g=this.currXhrId++,b=this.pendingRequests[g]={xhr:s};s.open("GET",this.url),s.withCredentials=this.withCredentials;for(const P in this.httpHeaders){const x=this.httpHeaders[P];x!==void 0&&s.setRequestHeader(P,x)}return this.isHttp&&"begin"in C&&"end"in C?(s.setRequestHeader("Range",`bytes=${C.begin}-${C.end-1}`),b.expectedStatus=k):b.expectedStatus=I,s.responseType="arraybuffer",C.onError&&(s.onerror=function(P){C.onError(s.status)}),s.onreadystatechange=this.onStateChange.bind(this,g),s.onprogress=this.onProgress.bind(this,g),b.onHeadersReceived=C.onHeadersReceived,b.onDone=C.onDone,b.onError=C.onError,b.onProgress=C.onProgress,s.send(null),g}onProgress(C,s){var b;const g=this.pendingRequests[C];g&&((b=g.onProgress)==null||b.call(g,s))}onStateChange(C,s){var A,o,c;const g=this.pendingRequests[C];if(!g)return;const b=g.xhr;if(b.readyState>=2&&g.onHeadersReceived&&(g.onHeadersReceived(),delete g.onHeadersReceived),b.readyState!==4||!(C in this.pendingRequests))return;if(delete this.pendingRequests[C],b.status===0&&this.isHttp){(A=g.onError)==null||A.call(g,b.status);return}const P=b.status||I;if(!(P===I&&g.expectedStatus===k)&&P!==g.expectedStatus){(o=g.onError)==null||o.call(g,b.status);return}const y=_(b);if(P===k){const S=b.getResponseHeader("Content-Range"),w=/bytes (\d+)-(\d+)\/(\d+)/.exec(S);g.onDone({begin:parseInt(w[1],10),chunk:y})}else y?g.onDone({begin:0,chunk:y}):(c=g.onError)==null||c.call(g,b.status)}getRequestXhr(C){return this.pendingRequests[C].xhr}isPendingRequest(C){return C in this.pendingRequests}abortRequest(C){const s=this.pendingRequests[C].xhr;delete this.pendingRequests[C],s.abort()}}class r{constructor(C){this._source=C,this._manager=new m(C.url,{httpHeaders:C.httpHeaders,withCredentials:C.withCredentials}),this._rangeChunkSize=C.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(C){const s=this._rangeRequestReaders.indexOf(C);s>=0&&this._rangeRequestReaders.splice(s,1)}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new a(this._manager,this._source),this._fullRequestReader}getRangeReader(C,s){const g=new T(this._manager,C,s);return g.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(g),g}cancelAllRequests(C){var s;(s=this._fullRequestReader)==null||s.cancel(C);for(const g of this._rangeRequestReaders.slice(0))g.cancel(C)}}t.PDFNetworkStream=r;class a{constructor(C,s){this._manager=C;const g={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=s.url,this._fullRequestId=C.requestFull(g),this._headersReceivedCapability=new n.PromiseCapability,this._disableRange=s.disableRange||!1,this._contentLength=s.length,this._rangeChunkSize=s.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const C=this._fullRequestId,s=this._manager.getRequestXhr(C),g=x=>s.getResponseHeader(x),{allowRangeRequests:b,suggestedLength:P}=(0,f.validateRangeRequestCapabilities)({getResponseHeader:g,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});b&&(this._isRangeSupported=!0),this._contentLength=P||this._contentLength,this._filename=(0,f.extractFilenameFromHeader)(g),this._isRangeSupported&&this._manager.abortRequest(C),this._headersReceivedCapability.resolve()}_onDone(C){if(C&&(this._requests.length>0?this._requests.shift().resolve({value:C.chunk,done:!1}):this._cachedChunks.push(C.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(C){this._storedError=(0,f.createResponseStatusError)(C,this._url),this._headersReceivedCapability.reject(this._storedError);for(const s of this._requests)s.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(C){var s;(s=this.onProgress)==null||s.call(this,{loaded:C.loaded,total:C.lengthComputable?C.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const C=new n.PromiseCapability;return this._requests.push(C),C.promise}cancel(C){this._done=!0,this._headersReceivedCapability.reject(C);for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class T{constructor(C,s,g){this._manager=C;const b={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=C.url,this._requestId=C.requestRange(s,g,b),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var C;(C=this.onClosed)==null||C.call(this,this)}_onDone(C){const s=C.chunk;this._requests.length>0?this._requests.shift().resolve({value:s,done:!1}):this._queuedChunk=s,this._done=!0;for(const g of this._requests)g.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(C){this._storedError=(0,f.createResponseStatusError)(C,this._url);for(const s of this._requests)s.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(C){var s;this.isStreamingSupported||(s=this.onProgress)==null||s.call(this,{loaded:C.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const s=this._queuedChunk;return this._queuedChunk=null,{value:s,done:!1}}if(this._done)return{value:void 0,done:!0};const C=new n.PromiseCapability;return this._requests.push(C),C.promise}cancel(C){this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(e,t,l)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNodeStream=void 0;var n=l(1),f=l(20);const I=/^file:\/\/\/[a-zA-Z]:\//;function k(g){const b=require$$5,P=b.parse(g);return P.protocol==="file:"||P.host?P:/^[a-z]:[/\\]/i.test(g)?b.parse(`file:///${g}`):(P.host||(P.protocol="file:"),P)}class _{constructor(b){this.source=b,this.url=k(b.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&b.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var b;return((b=this._fullRequestReader)==null?void 0:b._loaded)??0}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new C(this):new T(this),this._fullRequestReader}getRangeReader(b,P){if(P<=this._progressiveDataLength)return null;const x=this.isFsUrl?new s(this,b,P):new E(this,b,P);return this._rangeRequestReaders.push(x),x}cancelAllRequests(b){var P;(P=this._fullRequestReader)==null||P.cancel(b);for(const x of this._rangeRequestReaders.slice(0))x.cancel(b)}}t.PDFNodeStream=_;class m{constructor(b){this._url=b.url,this._done=!1,this._storedError=null,this.onProgress=null;const P=b.source;this._contentLength=P.length,this._loaded=0,this._filename=null,this._disableRange=P.disableRange||!1,this._rangeChunkSize=P.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!P.disableStream,this._isRangeSupported=!P.disableRange,this._readableStream=null,this._readCapability=new n.PromiseCapability,this._headersCapability=new n.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var x;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const b=this._readableStream.read();return b===null?(this._readCapability=new n.PromiseCapability,this.read()):(this._loaded+=b.length,(x=this.onProgress)==null||x.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(b).buffer,done:!1})}cancel(b){if(!this._readableStream){this._error(b);return}this._readableStream.destroy(b)}_error(b){this._storedError=b,this._readCapability.resolve()}_setReadableStream(b){this._readableStream=b,b.on("readable",()=>{this._readCapability.resolve()}),b.on("end",()=>{b.destroy(),this._done=!0,this._readCapability.resolve()}),b.on("error",P=>{this._error(P)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new n.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class r{constructor(b){this._url=b.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new n.PromiseCapability;const P=b.source;this._isStreamingSupported=!P.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var x;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const b=this._readableStream.read();return b===null?(this._readCapability=new n.PromiseCapability,this.read()):(this._loaded+=b.length,(x=this.onProgress)==null||x.call(this,{loaded:this._loaded}),{value:new Uint8Array(b).buffer,done:!1})}cancel(b){if(!this._readableStream){this._error(b);return}this._readableStream.destroy(b)}_error(b){this._storedError=b,this._readCapability.resolve()}_setReadableStream(b){this._readableStream=b,b.on("readable",()=>{this._readCapability.resolve()}),b.on("end",()=>{b.destroy(),this._done=!0,this._readCapability.resolve()}),b.on("error",P=>{this._error(P)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function a(g,b){return{protocol:g.protocol,auth:g.auth,host:g.hostname,port:g.port,path:g.path,method:"GET",headers:b}}class T extends m{constructor(b){super(b);const P=x=>{if(x.statusCode===404){const c=new n.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=c,this._headersCapability.reject(c);return}this._headersCapability.resolve(),this._setReadableStream(x);const y=c=>this._readableStream.headers[c.toLowerCase()],{allowRangeRequests:A,suggestedLength:o}=(0,f.validateRangeRequestCapabilities)({getResponseHeader:y,isHttp:b.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=A,this._contentLength=o||this._contentLength,this._filename=(0,f.extractFilenameFromHeader)(y)};if(this._request=null,this._url.protocol==="http:"){const x=require$$5;this._request=x.request(a(this._url,b.httpHeaders),P)}else{const x=require$$5;this._request=x.request(a(this._url,b.httpHeaders),P)}this._request.on("error",x=>{this._storedError=x,this._headersCapability.reject(x)}),this._request.end()}}class E extends r{constructor(b,P,x){super(b),this._httpHeaders={};for(const A in b.httpHeaders){const o=b.httpHeaders[A];o!==void 0&&(this._httpHeaders[A]=o)}this._httpHeaders.Range=`bytes=${P}-${x-1}`;const y=A=>{if(A.statusCode===404){const o=new n.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=o;return}this._setReadableStream(A)};if(this._request=null,this._url.protocol==="http:"){const A=require$$5;this._request=A.request(a(this._url,this._httpHeaders),y)}else{const A=require$$5;this._request=A.request(a(this._url,this._httpHeaders),y)}this._request.on("error",A=>{this._storedError=A}),this._request.end()}}class C extends m{constructor(b){super(b);let P=decodeURIComponent(this._url.path);I.test(this._url.href)&&(P=P.replace(/^\//,""));const x=require$$5;x.lstat(P,(y,A)=>{if(y){y.code==="ENOENT"&&(y=new n.MissingPDFException(`Missing PDF "${P}".`)),this._storedError=y,this._headersCapability.reject(y);return}this._contentLength=A.size,this._setReadableStream(x.createReadStream(P)),this._headersCapability.resolve()})}}class s extends r{constructor(b,P,x){super(b);let y=decodeURIComponent(this._url.path);I.test(this._url.href)&&(y=y.replace(/^\//,""));const A=require$$5;this._setReadableStream(A.createReadStream(y,{start:P,end:x-1}))}}},(e,t,l)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SVGGraphics=void 0;var n=l(6),f=l(1);const I={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},k="http://www.w3.org/XML/1998/namespace",_="http://www.w3.org/1999/xlink",m=["butt","round","square"],r=["miter","round","bevel"],a=function(A,o="",c=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!c)return URL.createObjectURL(new Blob([A],{type:o}));const S="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let w=`data:${o};base64,`;for(let v=0,F=A.length;v<F;v+=3){const N=A[v]&255,G=A[v+1]&255,le=A[v+2]&255,V=N>>2,Z=(N&3)<<4|G>>4,re=v+1<F?(G&15)<<2|le>>6:64,te=v+2<F?le&63:64;w+=S[V]+S[Z]+S[re]+S[te]}return w},T=function(){const A=new Uint8Array([137,80,78,71,13,10,26,10]),o=12,c=new Int32Array(256);for(let le=0;le<256;le++){let V=le;for(let Z=0;Z<8;Z++)V=V&1?3988292384^V>>1&2147483647:V>>1&2147483647;c[le]=V}function S(le,V,Z){let re=-1;for(let te=V;te<Z;te++){const K=(re^le[te])&255,ue=c[K];re=re>>>8^ue}return re^-1}function w(le,V,Z,re){let te=re;const K=V.length;Z[te]=K>>24&255,Z[te+1]=K>>16&255,Z[te+2]=K>>8&255,Z[te+3]=K&255,te+=4,Z[te]=le.charCodeAt(0)&255,Z[te+1]=le.charCodeAt(1)&255,Z[te+2]=le.charCodeAt(2)&255,Z[te+3]=le.charCodeAt(3)&255,te+=4,Z.set(V,te),te+=V.length;const ue=S(Z,re+4,te);Z[te]=ue>>24&255,Z[te+1]=ue>>16&255,Z[te+2]=ue>>8&255,Z[te+3]=ue&255}function v(le,V,Z){let re=1,te=0;for(let K=V;K<Z;++K)re=(re+(le[K]&255))%65521,te=(te+re)%65521;return te<<16|re}function F(le){if(!f.isNodeJS)return N(le);try{const V=parseInt(process.versions.node)>=8?le:Buffer.from(le),Z=require$$5.deflateSync(V,{level:9});return Z instanceof Uint8Array?Z:new Uint8Array(Z)}catch(V){(0,f.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+V)}return N(le)}function N(le){let V=le.length;const Z=65535,re=Math.ceil(V/Z),te=new Uint8Array(2+V+re*5+4);let K=0;te[K++]=120,te[K++]=156;let ue=0;for(;V>Z;)te[K++]=0,te[K++]=255,te[K++]=255,te[K++]=0,te[K++]=0,te.set(le.subarray(ue,ue+Z),K),K+=Z,ue+=Z,V-=Z;te[K++]=1,te[K++]=V&255,te[K++]=V>>8&255,te[K++]=~V&65535&255,te[K++]=(~V&65535)>>8&255,te.set(le.subarray(ue),K),K+=le.length-ue;const se=v(le,0,le.length);return te[K++]=se>>24&255,te[K++]=se>>16&255,te[K++]=se>>8&255,te[K++]=se&255,te}function G(le,V,Z,re){const te=le.width,K=le.height;let ue,se,Ce;const Me=le.data;switch(V){case f.ImageKind.GRAYSCALE_1BPP:se=0,ue=1,Ce=te+7>>3;break;case f.ImageKind.RGB_24BPP:se=2,ue=8,Ce=te*3;break;case f.ImageKind.RGBA_32BPP:se=6,ue=8,Ce=te*4;break;default:throw new Error("invalid format")}const q=new Uint8Array((1+Ce)*K);let R=0,O=0;for(let X=0;X<K;++X)q[R++]=0,q.set(Me.subarray(O,O+Ce),R),O+=Ce,R+=Ce;if(V===f.ImageKind.GRAYSCALE_1BPP&&re){R=0;for(let X=0;X<K;X++){R++;for(let B=0;B<Ce;B++)q[R++]^=255}}const d=new Uint8Array([te>>24&255,te>>16&255,te>>8&255,te&255,K>>24&255,K>>16&255,K>>8&255,K&255,ue,se,0,0,0]),u=F(q),M=A.length+o*3+d.length+u.length,D=new Uint8Array(M);let $=0;return D.set(A,$),$+=A.length,w("IHDR",d,D,$),$+=o+d.length,w("IDATA",u,D,$),$+=o+u.length,w("IEND",new Uint8Array(0),D,$),a(D,"image/png",Z)}return function(V,Z,re){const te=V.kind===void 0?f.ImageKind.GRAYSCALE_1BPP:V.kind;return G(V,te,Z,re)}}();class E{constructor(){this.fontSizeScale=1,this.fontWeight=I.fontWeight,this.fontSize=0,this.textMatrix=f.IDENTITY_MATRIX,this.fontMatrix=f.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=f.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=I.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(o,c){this.x=o,this.y=c}}function C(A){let o=[];const c=[];for(const S of A){if(S.fn==="save"){o.push({fnId:92,fn:"group",items:[]}),c.push(o),o=o.at(-1).items;continue}S.fn==="restore"?o=c.pop():o.push(S)}return o}function s(A){if(Number.isInteger(A))return A.toString();const o=A.toFixed(10);let c=o.length-1;if(o[c]!=="0")return o;do c--;while(o[c]==="0");return o.substring(0,o[c]==="."?c:c+1)}function g(A){if(A[4]===0&&A[5]===0){if(A[1]===0&&A[2]===0)return A[0]===1&&A[3]===1?"":`scale(${s(A[0])} ${s(A[3])})`;if(A[0]===A[3]&&A[1]===-A[2]){const o=Math.acos(A[0])*180/Math.PI;return`rotate(${s(o)})`}}else if(A[0]===1&&A[1]===0&&A[2]===0&&A[3]===1)return`translate(${s(A[4])} ${s(A[5])})`;return`matrix(${s(A[0])} ${s(A[1])} ${s(A[2])} ${s(A[3])} ${s(A[4])} ${s(A[5])})`}let b=0,P=0,x=0;class y{constructor(o,c,S=!1){(0,n.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new n.DOMSVGFactory,this.current=new E,this.transformMatrix=f.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=o,this.objs=c,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!S,this._operatorIdMapping=[];for(const w in f.OPS)this._operatorIdMapping[f.OPS[w]]=w}getObject(o,c=null){return typeof o=="string"?o.startsWith("g_")?this.commonObjs.get(o):this.objs.get(o):c}save(){this.transformStack.push(this.transformMatrix);const o=this.current;this.extraStack.push(o),this.current=o.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(o){this.save(),this.executeOpTree(o),this.restore()}loadDependencies(o){const c=o.fnArray,S=o.argsArray;for(let w=0,v=c.length;w<v;w++)if(c[w]===f.OPS.dependency)for(const F of S[w]){const N=F.startsWith("g_")?this.commonObjs:this.objs,G=new Promise(le=>{N.get(F,le)});this.current.dependencies.push(G)}return Promise.all(this.current.dependencies)}transform(o,c,S,w,v,F){const N=[o,c,S,w,v,F];this.transformMatrix=f.Util.transform(this.transformMatrix,N),this.tgrp=null}getSVG(o,c){this.viewport=c;const S=this._initialize(c);return this.loadDependencies(o).then(()=>(this.transformMatrix=f.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(o)),S))}convertOpList(o){const c=this._operatorIdMapping,S=o.argsArray,w=o.fnArray,v=[];for(let F=0,N=w.length;F<N;F++){const G=w[F];v.push({fnId:G,fn:c[G],args:S[F]})}return C(v)}executeOpTree(o){for(const c of o){const S=c.fn,w=c.fnId,v=c.args;switch(w|0){case f.OPS.beginText:this.beginText();break;case f.OPS.dependency:break;case f.OPS.setLeading:this.setLeading(v);break;case f.OPS.setLeadingMoveText:this.setLeadingMoveText(v[0],v[1]);break;case f.OPS.setFont:this.setFont(v);break;case f.OPS.showText:this.showText(v[0]);break;case f.OPS.showSpacedText:this.showText(v[0]);break;case f.OPS.endText:this.endText();break;case f.OPS.moveText:this.moveText(v[0],v[1]);break;case f.OPS.setCharSpacing:this.setCharSpacing(v[0]);break;case f.OPS.setWordSpacing:this.setWordSpacing(v[0]);break;case f.OPS.setHScale:this.setHScale(v[0]);break;case f.OPS.setTextMatrix:this.setTextMatrix(v[0],v[1],v[2],v[3],v[4],v[5]);break;case f.OPS.setTextRise:this.setTextRise(v[0]);break;case f.OPS.setTextRenderingMode:this.setTextRenderingMode(v[0]);break;case f.OPS.setLineWidth:this.setLineWidth(v[0]);break;case f.OPS.setLineJoin:this.setLineJoin(v[0]);break;case f.OPS.setLineCap:this.setLineCap(v[0]);break;case f.OPS.setMiterLimit:this.setMiterLimit(v[0]);break;case f.OPS.setFillRGBColor:this.setFillRGBColor(v[0],v[1],v[2]);break;case f.OPS.setStrokeRGBColor:this.setStrokeRGBColor(v[0],v[1],v[2]);break;case f.OPS.setStrokeColorN:this.setStrokeColorN(v);break;case f.OPS.setFillColorN:this.setFillColorN(v);break;case f.OPS.shadingFill:this.shadingFill(v[0]);break;case f.OPS.setDash:this.setDash(v[0],v[1]);break;case f.OPS.setRenderingIntent:this.setRenderingIntent(v[0]);break;case f.OPS.setFlatness:this.setFlatness(v[0]);break;case f.OPS.setGState:this.setGState(v[0]);break;case f.OPS.fill:this.fill();break;case f.OPS.eoFill:this.eoFill();break;case f.OPS.stroke:this.stroke();break;case f.OPS.fillStroke:this.fillStroke();break;case f.OPS.eoFillStroke:this.eoFillStroke();break;case f.OPS.clip:this.clip("nonzero");break;case f.OPS.eoClip:this.clip("evenodd");break;case f.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case f.OPS.paintImageXObject:this.paintImageXObject(v[0]);break;case f.OPS.paintInlineImageXObject:this.paintInlineImageXObject(v[0]);break;case f.OPS.paintImageMaskXObject:this.paintImageMaskXObject(v[0]);break;case f.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(v[0],v[1]);break;case f.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case f.OPS.closePath:this.closePath();break;case f.OPS.closeStroke:this.closeStroke();break;case f.OPS.closeFillStroke:this.closeFillStroke();break;case f.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case f.OPS.nextLine:this.nextLine();break;case f.OPS.transform:this.transform(v[0],v[1],v[2],v[3],v[4],v[5]);break;case f.OPS.constructPath:this.constructPath(v[0],v[1]);break;case f.OPS.endPath:this.endPath();break;case 92:this.group(c.items);break;default:(0,f.warn)(`Unimplemented operator ${S}`);break}}}setWordSpacing(o){this.current.wordSpacing=o}setCharSpacing(o){this.current.charSpacing=o}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(o,c,S,w,v,F){const N=this.current;N.textMatrix=N.lineMatrix=[o,c,S,w,v,F],N.textMatrixScale=Math.hypot(o,c),N.x=N.lineX=0,N.y=N.lineY=0,N.xcoords=[],N.ycoords=[],N.tspan=this.svgFactory.createElement("svg:tspan"),N.tspan.setAttributeNS(null,"font-family",N.fontFamily),N.tspan.setAttributeNS(null,"font-size",`${s(N.fontSize)}px`),N.tspan.setAttributeNS(null,"y",s(-N.y)),N.txtElement=this.svgFactory.createElement("svg:text"),N.txtElement.append(N.tspan)}beginText(){const o=this.current;o.x=o.lineX=0,o.y=o.lineY=0,o.textMatrix=f.IDENTITY_MATRIX,o.lineMatrix=f.IDENTITY_MATRIX,o.textMatrixScale=1,o.tspan=this.svgFactory.createElement("svg:tspan"),o.txtElement=this.svgFactory.createElement("svg:text"),o.txtgrp=this.svgFactory.createElement("svg:g"),o.xcoords=[],o.ycoords=[]}moveText(o,c){const S=this.current;S.x=S.lineX+=o,S.y=S.lineY+=c,S.xcoords=[],S.ycoords=[],S.tspan=this.svgFactory.createElement("svg:tspan"),S.tspan.setAttributeNS(null,"font-family",S.fontFamily),S.tspan.setAttributeNS(null,"font-size",`${s(S.fontSize)}px`),S.tspan.setAttributeNS(null,"y",s(-S.y))}showText(o){const c=this.current,S=c.font,w=c.fontSize;if(w===0)return;const v=c.fontSizeScale,F=c.charSpacing,N=c.wordSpacing,G=c.fontDirection,le=c.textHScale*G,V=S.vertical,Z=V?1:-1,re=S.defaultVMetrics,te=w*c.fontMatrix[0];let K=0;for(const Ce of o){if(Ce===null){K+=G*N;continue}else if(typeof Ce=="number"){K+=Z*Ce*w/1e3;continue}const Me=(Ce.isSpace?N:0)+F,q=Ce.fontChar;let R,O,d=Ce.width;if(V){let M;const D=Ce.vmetric||re;M=Ce.vmetric?D[1]:d*.5,M=-M*te;const $=D[2]*te;d=D?-D[0]:d,R=M/v,O=(K+$)/v}else R=K/v,O=0;(Ce.isInFont||S.missingFile)&&(c.xcoords.push(c.x+R),V&&c.ycoords.push(-c.y+O),c.tspan.textContent+=q);const u=V?d*te-Me*G:d*te+Me*G;K+=u}c.tspan.setAttributeNS(null,"x",c.xcoords.map(s).join(" ")),V?c.tspan.setAttributeNS(null,"y",c.ycoords.map(s).join(" ")):c.tspan.setAttributeNS(null,"y",s(-c.y)),V?c.y-=K:c.x+=K*le,c.tspan.setAttributeNS(null,"font-family",c.fontFamily),c.tspan.setAttributeNS(null,"font-size",`${s(c.fontSize)}px`),c.fontStyle!==I.fontStyle&&c.tspan.setAttributeNS(null,"font-style",c.fontStyle),c.fontWeight!==I.fontWeight&&c.tspan.setAttributeNS(null,"font-weight",c.fontWeight);const ue=c.textRenderingMode&f.TextRenderingMode.FILL_STROKE_MASK;if(ue===f.TextRenderingMode.FILL||ue===f.TextRenderingMode.FILL_STROKE?(c.fillColor!==I.fillColor&&c.tspan.setAttributeNS(null,"fill",c.fillColor),c.fillAlpha<1&&c.tspan.setAttributeNS(null,"fill-opacity",c.fillAlpha)):c.textRenderingMode===f.TextRenderingMode.ADD_TO_PATH?c.tspan.setAttributeNS(null,"fill","transparent"):c.tspan.setAttributeNS(null,"fill","none"),ue===f.TextRenderingMode.STROKE||ue===f.TextRenderingMode.FILL_STROKE){const Ce=1/(c.textMatrixScale||1);this._setStrokeAttributes(c.tspan,Ce)}let se=c.textMatrix;c.textRise!==0&&(se=se.slice(),se[5]+=c.textRise),c.txtElement.setAttributeNS(null,"transform",`${g(se)} scale(${s(le)}, -1)`),c.txtElement.setAttributeNS(k,"xml:space","preserve"),c.txtElement.append(c.tspan),c.txtgrp.append(c.txtElement),this._ensureTransformGroup().append(c.txtElement)}setLeadingMoveText(o,c){this.setLeading(-c),this.moveText(o,c)}addFontStyle(o){if(!o.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const c=a(o.data,o.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${o.loadedName}"; src: url(${c}); }
`}setFont(o){const c=this.current,S=this.commonObjs.get(o[0]);let w=o[1];c.font=S,this.embedFonts&&!S.missingFile&&!this.embeddedFonts[S.loadedName]&&(this.addFontStyle(S),this.embeddedFonts[S.loadedName]=S),c.fontMatrix=S.fontMatrix||f.FONT_IDENTITY_MATRIX;let v="normal";S.black?v="900":S.bold&&(v="bold");const F=S.italic?"italic":"normal";w<0?(w=-w,c.fontDirection=-1):c.fontDirection=1,c.fontSize=w,c.fontFamily=S.loadedName,c.fontWeight=v,c.fontStyle=F,c.tspan=this.svgFactory.createElement("svg:tspan"),c.tspan.setAttributeNS(null,"y",s(-c.y)),c.xcoords=[],c.ycoords=[]}endText(){var c;const o=this.current;o.textRenderingMode&f.TextRenderingMode.ADD_TO_PATH_FLAG&&((c=o.txtElement)!=null&&c.hasChildNodes())&&(o.element=o.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(o){o>0&&(this.current.lineWidth=o)}setLineCap(o){this.current.lineCap=m[o]}setLineJoin(o){this.current.lineJoin=r[o]}setMiterLimit(o){this.current.miterLimit=o}setStrokeAlpha(o){this.current.strokeAlpha=o}setStrokeRGBColor(o,c,S){this.current.strokeColor=f.Util.makeHexColor(o,c,S)}setFillAlpha(o){this.current.fillAlpha=o}setFillRGBColor(o,c,S){this.current.fillColor=f.Util.makeHexColor(o,c,S),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(o){this.current.strokeColor=this._makeColorN_Pattern(o)}setFillColorN(o){this.current.fillColor=this._makeColorN_Pattern(o)}shadingFill(o){const{width:c,height:S}=this.viewport,w=f.Util.inverseTransform(this.transformMatrix),[v,F,N,G]=f.Util.getAxialAlignedBoundingBox([0,0,c,S],w),le=this.svgFactory.createElement("svg:rect");le.setAttributeNS(null,"x",v),le.setAttributeNS(null,"y",F),le.setAttributeNS(null,"width",N-v),le.setAttributeNS(null,"height",G-F),le.setAttributeNS(null,"fill",this._makeShadingPattern(o)),this.current.fillAlpha<1&&le.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(le)}_makeColorN_Pattern(o){return o[0]==="TilingPattern"?this._makeTilingPattern(o):this._makeShadingPattern(o)}_makeTilingPattern(o){const c=o[1],S=o[2],w=o[3]||f.IDENTITY_MATRIX,[v,F,N,G]=o[4],le=o[5],V=o[6],Z=o[7],re=`shading${x++}`,[te,K,ue,se]=f.Util.normalizeRect([...f.Util.applyTransform([v,F],w),...f.Util.applyTransform([N,G],w)]),[Ce,Me]=f.Util.singularValueDecompose2dScale(w),q=le*Ce,R=V*Me,O=this.svgFactory.createElement("svg:pattern");O.setAttributeNS(null,"id",re),O.setAttributeNS(null,"patternUnits","userSpaceOnUse"),O.setAttributeNS(null,"width",q),O.setAttributeNS(null,"height",R),O.setAttributeNS(null,"x",`${te}`),O.setAttributeNS(null,"y",`${K}`);const d=this.svg,u=this.transformMatrix,M=this.current.fillColor,D=this.current.strokeColor,$=this.svgFactory.create(ue-te,se-K);if(this.svg=$,this.transformMatrix=w,Z===2){const X=f.Util.makeHexColor(...c);this.current.fillColor=X,this.current.strokeColor=X}return this.executeOpTree(this.convertOpList(S)),this.svg=d,this.transformMatrix=u,this.current.fillColor=M,this.current.strokeColor=D,O.append($.childNodes[0]),this.defs.append(O),`url(#${re})`}_makeShadingPattern(o){switch(typeof o=="string"&&(o=this.objs.get(o)),o[0]){case"RadialAxial":const c=`shading${x++}`,S=o[3];let w;switch(o[1]){case"axial":const v=o[4],F=o[5];w=this.svgFactory.createElement("svg:linearGradient"),w.setAttributeNS(null,"id",c),w.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),w.setAttributeNS(null,"x1",v[0]),w.setAttributeNS(null,"y1",v[1]),w.setAttributeNS(null,"x2",F[0]),w.setAttributeNS(null,"y2",F[1]);break;case"radial":const N=o[4],G=o[5],le=o[6],V=o[7];w=this.svgFactory.createElement("svg:radialGradient"),w.setAttributeNS(null,"id",c),w.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),w.setAttributeNS(null,"cx",G[0]),w.setAttributeNS(null,"cy",G[1]),w.setAttributeNS(null,"r",V),w.setAttributeNS(null,"fx",N[0]),w.setAttributeNS(null,"fy",N[1]),w.setAttributeNS(null,"fr",le);break;default:throw new Error(`Unknown RadialAxial type: ${o[1]}`)}for(const v of S){const F=this.svgFactory.createElement("svg:stop");F.setAttributeNS(null,"offset",v[0]),F.setAttributeNS(null,"stop-color",v[1]),w.append(F)}return this.defs.append(w),`url(#${c})`;case"Mesh":return(0,f.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${o[0]}`)}}setDash(o,c){this.current.dashArray=o,this.current.dashPhase=c}constructPath(o,c){const S=this.current;let w=S.x,v=S.y,F=[],N=0;for(const G of o)switch(G|0){case f.OPS.rectangle:w=c[N++],v=c[N++];const le=c[N++],V=c[N++],Z=w+le,re=v+V;F.push("M",s(w),s(v),"L",s(Z),s(v),"L",s(Z),s(re),"L",s(w),s(re),"Z");break;case f.OPS.moveTo:w=c[N++],v=c[N++],F.push("M",s(w),s(v));break;case f.OPS.lineTo:w=c[N++],v=c[N++],F.push("L",s(w),s(v));break;case f.OPS.curveTo:w=c[N+4],v=c[N+5],F.push("C",s(c[N]),s(c[N+1]),s(c[N+2]),s(c[N+3]),s(w),s(v)),N+=6;break;case f.OPS.curveTo2:F.push("C",s(w),s(v),s(c[N]),s(c[N+1]),s(c[N+2]),s(c[N+3])),w=c[N+2],v=c[N+3],N+=4;break;case f.OPS.curveTo3:w=c[N+2],v=c[N+3],F.push("C",s(c[N]),s(c[N+1]),s(w),s(v),s(w),s(v)),N+=4;break;case f.OPS.closePath:F.push("Z");break}F=F.join(" "),S.path&&o.length>0&&o[0]!==f.OPS.rectangle&&o[0]!==f.OPS.moveTo?F=S.path.getAttributeNS(null,"d")+F:(S.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(S.path)),S.path.setAttributeNS(null,"d",F),S.path.setAttributeNS(null,"fill","none"),S.element=S.path,S.setCurrentPoint(w,v)}endPath(){const o=this.current;if(o.path=null,!this.pendingClip)return;if(!o.element){this.pendingClip=null;return}const c=`clippath${b++}`,S=this.svgFactory.createElement("svg:clipPath");S.setAttributeNS(null,"id",c),S.setAttributeNS(null,"transform",g(this.transformMatrix));const w=o.element.cloneNode(!0);if(this.pendingClip==="evenodd"?w.setAttributeNS(null,"clip-rule","evenodd"):w.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,S.append(w),this.defs.append(S),o.activeClipUrl){o.clipGroup=null;for(const v of this.extraStack)v.clipGroup=null;S.setAttributeNS(null,"clip-path",o.activeClipUrl)}o.activeClipUrl=`url(#${c})`,this.tgrp=null}clip(o){this.pendingClip=o}closePath(){const o=this.current;if(o.path){const c=`${o.path.getAttributeNS(null,"d")}Z`;o.path.setAttributeNS(null,"d",c)}}setLeading(o){this.current.leading=-o}setTextRise(o){this.current.textRise=o}setTextRenderingMode(o){this.current.textRenderingMode=o}setHScale(o){this.current.textHScale=o/100}setRenderingIntent(o){}setFlatness(o){}setGState(o){for(const[c,S]of o)switch(c){case"LW":this.setLineWidth(S);break;case"LC":this.setLineCap(S);break;case"LJ":this.setLineJoin(S);break;case"ML":this.setMiterLimit(S);break;case"D":this.setDash(S[0],S[1]);break;case"RI":this.setRenderingIntent(S);break;case"FL":this.setFlatness(S);break;case"Font":this.setFont(S);break;case"CA":this.setStrokeAlpha(S);break;case"ca":this.setFillAlpha(S);break;default:(0,f.warn)(`Unimplemented graphic state operator ${c}`);break}}fill(){const o=this.current;o.element&&(o.element.setAttributeNS(null,"fill",o.fillColor),o.element.setAttributeNS(null,"fill-opacity",o.fillAlpha),this.endPath())}stroke(){const o=this.current;o.element&&(this._setStrokeAttributes(o.element),o.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(o,c=1){const S=this.current;let w=S.dashArray;c!==1&&w.length>0&&(w=w.map(function(v){return c*v})),o.setAttributeNS(null,"stroke",S.strokeColor),o.setAttributeNS(null,"stroke-opacity",S.strokeAlpha),o.setAttributeNS(null,"stroke-miterlimit",s(S.miterLimit)),o.setAttributeNS(null,"stroke-linecap",S.lineCap),o.setAttributeNS(null,"stroke-linejoin",S.lineJoin),o.setAttributeNS(null,"stroke-width",s(c*S.lineWidth)+"px"),o.setAttributeNS(null,"stroke-dasharray",w.map(s).join(" ")),o.setAttributeNS(null,"stroke-dashoffset",s(c*S.dashPhase)+"px")}eoFill(){var o;(o=this.current.element)==null||o.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var o;(o=this.current.element)==null||o.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const o=this.svgFactory.createElement("svg:rect");o.setAttributeNS(null,"x","0"),o.setAttributeNS(null,"y","0"),o.setAttributeNS(null,"width","1px"),o.setAttributeNS(null,"height","1px"),o.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(o)}paintImageXObject(o){const c=this.getObject(o);if(!c){(0,f.warn)(`Dependent image with object ID ${o} is not ready yet`);return}this.paintInlineImageXObject(c)}paintInlineImageXObject(o,c){const S=o.width,w=o.height,v=T(o,this.forceDataSchema,!!c),F=this.svgFactory.createElement("svg:rect");F.setAttributeNS(null,"x","0"),F.setAttributeNS(null,"y","0"),F.setAttributeNS(null,"width",s(S)),F.setAttributeNS(null,"height",s(w)),this.current.element=F,this.clip("nonzero");const N=this.svgFactory.createElement("svg:image");N.setAttributeNS(_,"xlink:href",v),N.setAttributeNS(null,"x","0"),N.setAttributeNS(null,"y",s(-w)),N.setAttributeNS(null,"width",s(S)+"px"),N.setAttributeNS(null,"height",s(w)+"px"),N.setAttributeNS(null,"transform",`scale(${s(1/S)} ${s(-1/w)})`),c?c.append(N):this._ensureTransformGroup().append(N)}paintImageMaskXObject(o){const c=this.getObject(o.data,o);if(c.bitmap){(0,f.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const S=this.current,w=c.width,v=c.height,F=S.fillColor;S.maskId=`mask${P++}`;const N=this.svgFactory.createElement("svg:mask");N.setAttributeNS(null,"id",S.maskId);const G=this.svgFactory.createElement("svg:rect");G.setAttributeNS(null,"x","0"),G.setAttributeNS(null,"y","0"),G.setAttributeNS(null,"width",s(w)),G.setAttributeNS(null,"height",s(v)),G.setAttributeNS(null,"fill",F),G.setAttributeNS(null,"mask",`url(#${S.maskId})`),this.defs.append(N),this._ensureTransformGroup().append(G),this.paintInlineImageXObject(c,N)}paintFormXObjectBegin(o,c){if(Array.isArray(o)&&o.length===6&&this.transform(o[0],o[1],o[2],o[3],o[4],o[5]),c){const S=c[2]-c[0],w=c[3]-c[1],v=this.svgFactory.createElement("svg:rect");v.setAttributeNS(null,"x",c[0]),v.setAttributeNS(null,"y",c[1]),v.setAttributeNS(null,"width",s(S)),v.setAttributeNS(null,"height",s(w)),this.current.element=v,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(o){const c=this.svgFactory.create(o.width,o.height),S=this.svgFactory.createElement("svg:defs");c.append(S),this.defs=S;const w=this.svgFactory.createElement("svg:g");return w.setAttributeNS(null,"transform",g(o.transform)),c.append(w),this.svg=w,c}_ensureClipGroup(){if(!this.current.clipGroup){const o=this.svgFactory.createElement("svg:g");o.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(o),this.current.clipGroup=o}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",g(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}t.SVGGraphics=y},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.XfaText=void 0;class l{static textContent(f){const I=[],k={items:I,styles:Object.create(null)};function _(m){var T;if(!m)return;let r=null;const a=m.name;if(a==="#text")r=m.value;else if(l.shouldBuildText(a))(T=m==null?void 0:m.attributes)!=null&&T.textContent?r=m.attributes.textContent:m.value&&(r=m.value);else return;if(r!==null&&I.push({str:r}),!!m.children)for(const E of m.children)_(E)}return _(f),k}static shouldBuildText(f){return!(f==="textarea"||f==="input"||f==="option"||f==="select")}}t.XfaText=l},(e,t,l)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TextLayerRenderTask=void 0,t.renderTextLayer=g,t.updateTextLayer=b;var n=l(1),f=l(6);const I=1e5,k=30,_=.8,m=new Map;function r(P,x){let y;if(x&&n.FeatureTest.isOffscreenCanvasSupported)y=new OffscreenCanvas(P,P).getContext("2d",{alpha:!1});else{const A=document.createElement("canvas");A.width=A.height=P,y=A.getContext("2d",{alpha:!1})}return y}function a(P,x){const y=m.get(P);if(y)return y;const A=r(k,x);A.font=`${k}px ${P}`;const o=A.measureText("");let c=o.fontBoundingBoxAscent,S=Math.abs(o.fontBoundingBoxDescent);if(c){const v=c/(c+S);return m.set(P,v),A.canvas.width=A.canvas.height=0,v}A.strokeStyle="red",A.clearRect(0,0,k,k),A.strokeText("g",0,0);let w=A.getImageData(0,0,k,k).data;S=0;for(let v=w.length-1-3;v>=0;v-=4)if(w[v]>0){S=Math.ceil(v/4/k);break}A.clearRect(0,0,k,k),A.strokeText("A",0,k),w=A.getImageData(0,0,k,k).data,c=0;for(let v=0,F=w.length;v<F;v+=4)if(w[v]>0){c=k-Math.floor(v/4/k);break}if(A.canvas.width=A.canvas.height=0,c){const v=c/(c+S);return m.set(P,v),v}return m.set(P,_),_}function T(P,x,y){const A=document.createElement("span"),o={angle:0,canvasWidth:0,hasText:x.str!=="",hasEOL:x.hasEOL,fontSize:0};P._textDivs.push(A);const c=n.Util.transform(P._transform,x.transform);let S=Math.atan2(c[1],c[0]);const w=y[x.fontName];w.vertical&&(S+=Math.PI/2);const v=Math.hypot(c[2],c[3]),F=v*a(w.fontFamily,P._isOffscreenCanvasSupported);let N,G;S===0?(N=c[4],G=c[5]-F):(N=c[4]+F*Math.sin(S),G=c[5]-F*Math.cos(S));const le="calc(var(--scale-factor)*",V=A.style;P._container===P._rootContainer?(V.left=`${(100*N/P._pageWidth).toFixed(2)}%`,V.top=`${(100*G/P._pageHeight).toFixed(2)}%`):(V.left=`${le}${N.toFixed(2)}px)`,V.top=`${le}${G.toFixed(2)}px)`),V.fontSize=`${le}${v.toFixed(2)}px)`,V.fontFamily=w.fontFamily,o.fontSize=v,A.setAttribute("role","presentation"),A.textContent=x.str,A.dir=x.dir,P._fontInspectorEnabled&&(A.dataset.fontName=x.fontName),S!==0&&(o.angle=S*(180/Math.PI));let Z=!1;if(x.str.length>1)Z=!0;else if(x.str!==" "&&x.transform[0]!==x.transform[3]){const re=Math.abs(x.transform[0]),te=Math.abs(x.transform[3]);re!==te&&Math.max(re,te)/Math.min(re,te)>1.5&&(Z=!0)}Z&&(o.canvasWidth=w.vertical?x.height:x.width),P._textDivProperties.set(A,o),P._isReadableStream&&P._layoutText(A)}function E(P){const{div:x,scale:y,properties:A,ctx:o,prevFontSize:c,prevFontFamily:S}=P,{style:w}=x;let v="";if(A.canvasWidth!==0&&A.hasText){const{fontFamily:F}=w,{canvasWidth:N,fontSize:G}=A;(c!==G||S!==F)&&(o.font=`${G*y}px ${F}`,P.prevFontSize=G,P.prevFontFamily=F);const{width:le}=o.measureText(x.textContent);le>0&&(v=`scaleX(${N*y/le})`)}A.angle!==0&&(v=`rotate(${A.angle}deg) ${v}`),v.length>0&&(w.transform=v)}function C(P){if(P._canceled)return;const x=P._textDivs,y=P._capability;if(x.length>I){y.resolve();return}if(!P._isReadableStream)for(const o of x)P._layoutText(o);y.resolve()}class s{constructor({textContentSource:x,container:y,viewport:A,textDivs:o,textDivProperties:c,textContentItemsStr:S,isOffscreenCanvasSupported:w}){var le;this._textContentSource=x,this._isReadableStream=x instanceof ReadableStream,this._container=this._rootContainer=y,this._textDivs=o||[],this._textContentItemsStr=S||[],this._isOffscreenCanvasSupported=w,this._fontInspectorEnabled=!!((le=globalThis.FontInspector)!=null&&le.enabled),this._reader=null,this._textDivProperties=c||new WeakMap,this._canceled=!1,this._capability=new n.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:A.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:r(0,w)};const{pageWidth:v,pageHeight:F,pageX:N,pageY:G}=A.rawDims;this._transform=[1,0,0,-1,-N,G+F],this._pageWidth=v,this._pageHeight=F,(0,f.setLayerDimensions)(y,A),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new n.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new n.AbortException("TextLayer task cancelled."))}_processItems(x,y){for(const A of x){if(A.str===void 0){if(A.type==="beginMarkedContentProps"||A.type==="beginMarkedContent"){const o=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),A.id!==null&&this._container.setAttribute("id",`${A.id}`),o.append(this._container)}else A.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(A.str),T(this,A,y)}}_layoutText(x){const y=this._layoutTextParams.properties=this._textDivProperties.get(x);if(this._layoutTextParams.div=x,E(this._layoutTextParams),y.hasText&&this._container.append(x),y.hasEOL){const A=document.createElement("br");A.setAttribute("role","presentation"),this._container.append(A)}}_render(){const x=new n.PromiseCapability;let y=Object.create(null);if(this._isReadableStream){const A=()=>{this._reader.read().then(({value:o,done:c})=>{if(c){x.resolve();return}Object.assign(y,o.styles),this._processItems(o.items,y),A()},x.reject)};this._reader=this._textContentSource.getReader(),A()}else if(this._textContentSource){const{items:A,styles:o}=this._textContentSource;this._processItems(A,o),x.resolve()}else throw new Error('No "textContentSource" parameter specified.');x.promise.then(()=>{y=null,C(this)},this._capability.reject)}}t.TextLayerRenderTask=s;function g(P){!P.textContentSource&&(P.textContent||P.textContentStream)&&((0,f.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),P.textContentSource=P.textContent||P.textContentStream);const{container:x,viewport:y}=P,A=getComputedStyle(x),o=A.getPropertyValue("visibility"),c=parseFloat(A.getPropertyValue("--scale-factor"));o==="visible"&&(!c||Math.abs(c-y.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const S=new s(P);return S._render(),S}function b({container:P,viewport:x,textDivs:y,textDivProperties:A,isOffscreenCanvasSupported:o,mustRotate:c=!0,mustRescale:S=!0}){if(c&&(0,f.setLayerDimensions)(P,{rotation:x.rotation}),S){const w=r(0,o),F={prevFontSize:null,prevFontFamily:null,div:null,scale:x.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:w};for(const N of y)F.properties=A.get(N),F.div=N,E(F)}}},(e,t,l)=>{var a,T,E,C,s,g,b,P,x,y,A,Ai,c,jt,w,Pi,F,Ci;Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationEditorLayer=void 0;var n=l(1),f=l(4),I=l(28),k=l(33),_=l(6),m=l(34);const G=class G{constructor({uiManager:V,pageIndex:Z,div:re,accessibilityManager:te,annotationLayer:K,viewport:ue,l10n:se}){H(this,A);H(this,c);H(this,w);H(this,F);H(this,a,void 0);H(this,T,!1);H(this,E,null);H(this,C,this.pointerup.bind(this));H(this,s,this.pointerdown.bind(this));H(this,g,new Map);H(this,b,!1);H(this,P,!1);H(this,x,!1);H(this,y,void 0);const Ce=[I.FreeTextEditor,k.InkEditor,m.StampEditor];if(!G._initialized){G._initialized=!0;for(const Me of Ce)Me.initialize(se)}V.registerEditorTypes(Ce),he(this,y,V),this.pageIndex=Z,this.div=re,he(this,a,te),he(this,E,K),this.viewport=ue,i(this,y).addLayer(this)}get isEmpty(){return i(this,g).size===0}updateToolbar(V){i(this,y).updateToolbar(V)}updateMode(V=i(this,y).getMode()){W(this,F,Ci).call(this),V===n.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),V!==n.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",V===n.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",V===n.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",V===n.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(V){if(!V&&i(this,y).getMode()!==n.AnnotationEditorType.INK)return;if(!V){for(const re of i(this,g).values())if(re.isEmpty()){re.setInBackground();return}}W(this,c,jt).call(this,{offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(V){i(this,y).setEditingState(V)}addCommands(V){i(this,y).addCommands(V)}enable(){this.div.style.pointerEvents="auto";const V=new Set;for(const re of i(this,g).values())re.enableEditing(),re.annotationElementId&&V.add(re.annotationElementId);if(!i(this,E))return;const Z=i(this,E).getEditableAnnotations();for(const re of Z){if(re.hide(),i(this,y).isDeletedAnnotationElement(re.data.id)||V.has(re.data.id))continue;const te=this.deserialize(re);te&&(this.addOrRebuild(te),te.enableEditing())}}disable(){var Z;he(this,x,!0),this.div.style.pointerEvents="none";const V=new Set;for(const re of i(this,g).values()){if(re.disableEditing(),!re.annotationElementId||re.serialize()!==null){V.add(re.annotationElementId);continue}(Z=this.getEditableAnnotation(re.annotationElementId))==null||Z.show(),re.remove()}if(i(this,E)){const re=i(this,E).getEditableAnnotations();for(const te of re){const{id:K}=te.data;V.has(K)||i(this,y).isDeletedAnnotationElement(K)||te.show()}}W(this,F,Ci).call(this),this.isEmpty&&(this.div.hidden=!0),he(this,x,!1)}getEditableAnnotation(V){var Z;return((Z=i(this,E))==null?void 0:Z.getEditableAnnotation(V))||null}setActiveEditor(V){i(this,y).getActive()!==V&&i(this,y).setActiveEditor(V)}enableClick(){this.div.addEventListener("pointerdown",i(this,s)),this.div.addEventListener("pointerup",i(this,C))}disableClick(){this.div.removeEventListener("pointerdown",i(this,s)),this.div.removeEventListener("pointerup",i(this,C))}attach(V){i(this,g).set(V.id,V);const{annotationElementId:Z}=V;Z&&i(this,y).isDeletedAnnotationElement(Z)&&i(this,y).removeDeletedAnnotationElement(V)}detach(V){var Z;i(this,g).delete(V.id),(Z=i(this,a))==null||Z.removePointerInTextLayer(V.contentDiv),!i(this,x)&&V.annotationElementId&&i(this,y).addDeletedAnnotationElement(V)}remove(V){this.detach(V),i(this,y).removeEditor(V),V.div.contains(document.activeElement)&&setTimeout(()=>{i(this,y).focusMainContainer()},0),V.div.remove(),V.isAttachedToDOM=!1,i(this,P)||this.addInkEditorIfNeeded(!1)}changeParent(V){var Z;V.parent!==this&&(V.annotationElementId&&(i(this,y).addDeletedAnnotationElement(V.annotationElementId),f.AnnotationEditor.deleteAnnotationElement(V),V.annotationElementId=null),this.attach(V),(Z=V.parent)==null||Z.detach(V),V.setParent(this),V.div&&V.isAttachedToDOM&&(V.div.remove(),this.div.append(V.div)))}add(V){if(this.changeParent(V),i(this,y).addEditor(V),this.attach(V),!V.isAttachedToDOM){const Z=V.render();this.div.append(Z),V.isAttachedToDOM=!0}V.fixAndSetPosition(),V.onceAdded(),i(this,y).addToAnnotationStorage(V)}moveEditorInDOM(V){var re;if(!V.isAttachedToDOM)return;const{activeElement:Z}=document;V.div.contains(Z)&&(V._focusEventsAllowed=!1,setTimeout(()=>{V.div.contains(document.activeElement)?V._focusEventsAllowed=!0:(V.div.addEventListener("focusin",()=>{V._focusEventsAllowed=!0},{once:!0}),Z.focus())},0)),V._structTreeParentId=(re=i(this,a))==null?void 0:re.moveElementInDOM(this.div,V.div,V.contentDiv,!0)}addOrRebuild(V){V.needsToBeRebuilt()?V.rebuild():this.add(V)}addUndoableEditor(V){const Z=()=>V._uiManager.rebuild(V),re=()=>{V.remove()};this.addCommands({cmd:Z,undo:re,mustExec:!1})}getNextId(){return i(this,y).getId()}pasteEditor(V,Z){i(this,y).updateToolbar(V),i(this,y).updateMode(V);const{offsetX:re,offsetY:te}=W(this,w,Pi).call(this),K=this.getNextId(),ue=W(this,A,Ai).call(this,{parent:this,id:K,x:re,y:te,uiManager:i(this,y),isCentered:!0,...Z});ue&&this.add(ue)}deserialize(V){switch(V.annotationType??V.annotationEditorType){case n.AnnotationEditorType.FREETEXT:return I.FreeTextEditor.deserialize(V,this,i(this,y));case n.AnnotationEditorType.INK:return k.InkEditor.deserialize(V,this,i(this,y));case n.AnnotationEditorType.STAMP:return m.StampEditor.deserialize(V,this,i(this,y))}return null}addNewEditor(){W(this,c,jt).call(this,W(this,w,Pi).call(this),!0)}setSelected(V){i(this,y).setSelected(V)}toggleSelected(V){i(this,y).toggleSelected(V)}isSelected(V){return i(this,y).isSelected(V)}unselect(V){i(this,y).unselect(V)}pointerup(V){const{isMac:Z}=n.FeatureTest.platform;if(!(V.button!==0||V.ctrlKey&&Z)&&V.target===this.div&&i(this,b)){if(he(this,b,!1),!i(this,T)){he(this,T,!0);return}if(i(this,y).getMode()===n.AnnotationEditorType.STAMP){i(this,y).unselectAll();return}W(this,c,jt).call(this,V,!1)}}pointerdown(V){if(i(this,b)){he(this,b,!1);return}const{isMac:Z}=n.FeatureTest.platform;if(V.button!==0||V.ctrlKey&&Z||V.target!==this.div)return;he(this,b,!0);const re=i(this,y).getActive();he(this,T,!re||re.isEmpty())}findNewParent(V,Z,re){const te=i(this,y).findParent(Z,re);return te===null||te===this?!1:(te.changeParent(V),!0)}destroy(){var V,Z;((V=i(this,y).getActive())==null?void 0:V.parent)===this&&(i(this,y).commitOrRemove(),i(this,y).setActiveEditor(null));for(const re of i(this,g).values())(Z=i(this,a))==null||Z.removePointerInTextLayer(re.contentDiv),re.setParent(null),re.isAttachedToDOM=!1,re.div.remove();this.div=null,i(this,g).clear(),i(this,y).removeLayer(this)}render({viewport:V}){this.viewport=V,(0,_.setLayerDimensions)(this.div,V);for(const Z of i(this,y).getEditors(this.pageIndex))this.add(Z);this.updateMode()}update({viewport:V}){i(this,y).commitOrRemove(),this.viewport=V,(0,_.setLayerDimensions)(this.div,{rotation:V.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:V,pageHeight:Z}=this.viewport.rawDims;return[V,Z]}};a=new WeakMap,T=new WeakMap,E=new WeakMap,C=new WeakMap,s=new WeakMap,g=new WeakMap,b=new WeakMap,P=new WeakMap,x=new WeakMap,y=new WeakMap,A=new WeakSet,Ai=function(V){switch(i(this,y).getMode()){case n.AnnotationEditorType.FREETEXT:return new I.FreeTextEditor(V);case n.AnnotationEditorType.INK:return new k.InkEditor(V);case n.AnnotationEditorType.STAMP:return new m.StampEditor(V)}return null},c=new WeakSet,jt=function(V,Z){const re=this.getNextId(),te=W(this,A,Ai).call(this,{parent:this,id:re,x:V.offsetX,y:V.offsetY,uiManager:i(this,y),isCentered:Z});return te&&this.add(te),te},w=new WeakSet,Pi=function(){const{x:V,y:Z,width:re,height:te}=this.div.getBoundingClientRect(),K=Math.max(0,V),ue=Math.max(0,Z),se=Math.min(window.innerWidth,V+re),Ce=Math.min(window.innerHeight,Z+te),Me=(K+se)/2-V,q=(ue+Ce)/2-Z,[R,O]=this.viewport.rotation%180===0?[Me,q]:[q,Me];return{offsetX:R,offsetY:O}},F=new WeakSet,Ci=function(){he(this,P,!0);for(const V of i(this,g).values())V.isEmpty()&&V.remove();he(this,P,!1)},Je(G,"_initialized",!1);let r=G;t.AnnotationEditorLayer=r},(e,t,l)=>{var m,r,a,T,E,C,s,g,b,P,Dn,y,Bn,o,Vn,S,Ct,v,Ti,N,Un,le,xi;Object.defineProperty(t,"__esModule",{value:!0}),t.FreeTextEditor=void 0;var n=l(1),f=l(5),I=l(4),k=l(29);const Z=class Z extends I.AnnotationEditor{constructor(K){super({...K,name:"freeTextEditor"});H(this,P);H(this,y);H(this,o);H(this,S);H(this,v);H(this,N);H(this,le);H(this,m,this.editorDivBlur.bind(this));H(this,r,this.editorDivFocus.bind(this));H(this,a,this.editorDivInput.bind(this));H(this,T,this.editorDivKeydown.bind(this));H(this,E,void 0);H(this,C,"");H(this,s,`${this.id}-editor`);H(this,g,void 0);H(this,b,null);he(this,E,K.color||Z._defaultColor||I.AnnotationEditor._defaultLineColor),he(this,g,K.fontSize||Z._defaultFontSize)}static get _keyboardManager(){const K=Z.prototype,ue=Me=>Me.isEmpty(),se=f.AnnotationEditorUIManager.TRANSLATE_SMALL,Ce=f.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,n.shadow)(this,"_keyboardManager",new f.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],K.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],K.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],K._translateEmpty,{args:[-se,0],checker:ue}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],K._translateEmpty,{args:[-Ce,0],checker:ue}],[["ArrowRight","mac+ArrowRight"],K._translateEmpty,{args:[se,0],checker:ue}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],K._translateEmpty,{args:[Ce,0],checker:ue}],[["ArrowUp","mac+ArrowUp"],K._translateEmpty,{args:[0,-se],checker:ue}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],K._translateEmpty,{args:[0,-Ce],checker:ue}],[["ArrowDown","mac+ArrowDown"],K._translateEmpty,{args:[0,se],checker:ue}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],K._translateEmpty,{args:[0,Ce],checker:ue}]]))}static initialize(K){I.AnnotationEditor.initialize(K,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const ue=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(ue.getPropertyValue("--freetext-padding"))}static updateDefaultParams(K,ue){switch(K){case n.AnnotationEditorParamsType.FREETEXT_SIZE:Z._defaultFontSize=ue;break;case n.AnnotationEditorParamsType.FREETEXT_COLOR:Z._defaultColor=ue;break}}updateParams(K,ue){switch(K){case n.AnnotationEditorParamsType.FREETEXT_SIZE:W(this,P,Dn).call(this,ue);break;case n.AnnotationEditorParamsType.FREETEXT_COLOR:W(this,y,Bn).call(this,ue);break}}static get defaultPropertiesToUpdate(){return[[n.AnnotationEditorParamsType.FREETEXT_SIZE,Z._defaultFontSize],[n.AnnotationEditorParamsType.FREETEXT_COLOR,Z._defaultColor||I.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[n.AnnotationEditorParamsType.FREETEXT_SIZE,i(this,g)],[n.AnnotationEditorParamsType.FREETEXT_COLOR,i(this,E)]]}_translateEmpty(K,ue){this._uiManager.translateSelectedEditors(K,ue,!0)}getInitialTranslation(){const K=this.parentScale;return[-Z._internalPadding*K,-(Z._internalPadding+i(this,g))*K]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(n.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",i(this,T)),this.editorDiv.addEventListener("focus",i(this,r)),this.editorDiv.addEventListener("blur",i(this,m)),this.editorDiv.addEventListener("input",i(this,a)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",i(this,s)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",i(this,T)),this.editorDiv.removeEventListener("focus",i(this,r)),this.editorDiv.removeEventListener("blur",i(this,m)),this.editorDiv.removeEventListener("input",i(this,a)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(K){this._focusEventsAllowed&&(super.focusin(K),K.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var K;if(this.width){W(this,le,xi).call(this);return}this.enableEditMode(),this.editorDiv.focus(),(K=this._initialOptions)!=null&&K.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const K=i(this,C),ue=he(this,C,W(this,o,Vn).call(this).trimEnd());if(K===ue)return;const se=Ce=>{if(he(this,C,Ce),!Ce){this.remove();return}W(this,v,Ti).call(this),this._uiManager.rebuild(this),W(this,S,Ct).call(this)};this.addCommands({cmd:()=>{se(ue)},undo:()=>{se(K)},mustExec:!1}),W(this,S,Ct).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(K){this.enterInEditMode()}keydown(K){K.target===this.div&&K.key==="Enter"&&(this.enterInEditMode(),K.preventDefault())}editorDivKeydown(K){Z._keyboardManager.exec(this,K)}editorDivFocus(K){this.isEditing=!0}editorDivBlur(K){this.isEditing=!1}editorDivInput(K){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let K,ue;this.width&&(K=this.x,ue=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",i(this,s)),this.enableEditing(),I.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(Ce=>{var Me;return(Me=this.editorDiv)==null?void 0:Me.setAttribute("aria-label",Ce)}),I.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(Ce=>{var Me;return(Me=this.editorDiv)==null?void 0:Me.setAttribute("default-content",Ce)}),this.editorDiv.contentEditable=!0;const{style:se}=this.editorDiv;if(se.fontSize=`calc(${i(this,g)}px * var(--scale-factor))`,se.color=i(this,E),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,f.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[Ce,Me]=this.parentDimensions;if(this.annotationElementId){const{position:q}=i(this,b);let[R,O]=this.getInitialTranslation();[R,O]=this.pageTranslationToScreen(R,O);const[d,u]=this.pageDimensions,[M,D]=this.pageTranslation;let $,X;switch(this.rotation){case 0:$=K+(q[0]-M)/d,X=ue+this.height-(q[1]-D)/u;break;case 90:$=K+(q[0]-M)/d,X=ue-(q[1]-D)/u,[R,O]=[O,-R];break;case 180:$=K-this.width+(q[0]-M)/d,X=ue-(q[1]-D)/u,[R,O]=[-R,-O];break;case 270:$=K+(q[0]-M-this.height*u)/d,X=ue+(q[1]-D-this.width*d)/u,[R,O]=[-O,R];break}this.setAt($*Ce,X*Me,R,O)}else this.setAt(K*Ce,ue*Me,this.width*Ce,this.height*Me);W(this,v,Ti).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(K,ue,se){let Ce=null;if(K instanceof k.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:q,fontColor:R},rect:O,rotation:d,id:u},textContent:M,textPosition:D,parent:{page:{pageNumber:$}}}=K;if(!M||M.length===0)return null;Ce=K={annotationType:n.AnnotationEditorType.FREETEXT,color:Array.from(R),fontSize:q,value:M.join(`
`),position:D,pageIndex:$-1,rect:O,rotation:d,id:u,deleted:!1}}const Me=super.deserialize(K,ue,se);return he(Me,g,K.fontSize),he(Me,E,n.Util.makeHexColor(...K.color)),he(Me,C,K.value),Me.annotationElementId=K.id||null,he(Me,b,Ce),Me}serialize(K=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const ue=Z._internalPadding*this.parentScale,se=this.getRect(ue,ue),Ce=I.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:i(this,E)),Me={annotationType:n.AnnotationEditorType.FREETEXT,color:Ce,fontSize:i(this,g),value:i(this,C),pageIndex:this.pageIndex,rect:se,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return K?Me:this.annotationElementId&&!W(this,N,Un).call(this,Me)?null:(Me.id=this.annotationElementId,Me)}};m=new WeakMap,r=new WeakMap,a=new WeakMap,T=new WeakMap,E=new WeakMap,C=new WeakMap,s=new WeakMap,g=new WeakMap,b=new WeakMap,P=new WeakSet,Dn=function(K){const ue=Ce=>{this.editorDiv.style.fontSize=`calc(${Ce}px * var(--scale-factor))`,this.translate(0,-(Ce-i(this,g))*this.parentScale),he(this,g,Ce),W(this,S,Ct).call(this)},se=i(this,g);this.addCommands({cmd:()=>{ue(K)},undo:()=>{ue(se)},mustExec:!0,type:n.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},y=new WeakSet,Bn=function(K){const ue=i(this,E);this.addCommands({cmd:()=>{he(this,E,this.editorDiv.style.color=K)},undo:()=>{he(this,E,this.editorDiv.style.color=ue)},mustExec:!0,type:n.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},o=new WeakSet,Vn=function(){const K=this.editorDiv.getElementsByTagName("div");if(K.length===0)return this.editorDiv.innerText;const ue=[];for(const se of K)ue.push(se.innerText.replace(/\r\n?|\n/,""));return ue.join(`
`)},S=new WeakSet,Ct=function(){const[K,ue]=this.parentDimensions;let se;if(this.isAttachedToDOM)se=this.div.getBoundingClientRect();else{const{currentLayer:Ce,div:Me}=this,q=Me.style.display;Me.style.display="hidden",Ce.div.append(this.div),se=Me.getBoundingClientRect(),Me.remove(),Me.style.display=q}this.rotation%180===this.parentRotation%180?(this.width=se.width/K,this.height=se.height/ue):(this.width=se.height/K,this.height=se.width/ue),this.fixAndSetPosition()},v=new WeakSet,Ti=function(){if(this.editorDiv.replaceChildren(),!!i(this,C))for(const K of i(this,C).split(`
`)){const ue=document.createElement("div");ue.append(K?document.createTextNode(K):document.createElement("br")),this.editorDiv.append(ue)}},N=new WeakSet,Un=function(K){const{value:ue,fontSize:se,color:Ce,rect:Me,pageIndex:q}=i(this,b);return K.value!==ue||K.fontSize!==se||K.rect.some((R,O)=>Math.abs(R-Me[O])>=1)||K.color.some((R,O)=>R!==Ce[O])||K.pageIndex!==q},le=new WeakSet,xi=function(K=!1){if(!this.annotationElementId)return;if(W(this,S,Ct).call(this),!K&&(this.width===0||this.height===0)){setTimeout(()=>W(this,le,xi).call(this,!0),0);return}const ue=Z._internalPadding*this.parentScale;i(this,b).rect=this.getRect(ue,ue)},Je(Z,"_freeTextDefaultContent",""),Je(Z,"_internalPadding",0),Je(Z,"_defaultColor",null),Je(Z,"_defaultFontSize",10),Je(Z,"_type","freetext");let _=Z;t.FreeTextEditor=_},(e,t,l)=>{var O,u,ut,D,Hn,X,B,z,j,Y,ce,oe,Se,Ee,ye,ne,fe,ae,de,be,Ie,Le,De,zn,je,Wt,qe,Mi,et,Ri,U,J,Ae,ee,ge,ve,ie,Li,ke,xe,Fe,Ve,jn,Oe,Ii;Object.defineProperty(t,"__esModule",{value:!0}),t.StampAnnotationElement=t.InkAnnotationElement=t.FreeTextAnnotationElement=t.AnnotationLayer=void 0;var n=l(1),f=l(6),I=l(3),k=l(30),_=l(31),m=l(32);const r=1e3,a=9,T=new WeakSet;function E($e){return{width:$e[2]-$e[0],height:$e[3]-$e[1]}}class C{static create(me){switch(me.data.annotationType){case n.AnnotationType.LINK:return new g(me);case n.AnnotationType.TEXT:return new b(me);case n.AnnotationType.WIDGET:switch(me.data.fieldType){case"Tx":return new x(me);case"Btn":return me.data.radioButton?new o(me):me.data.checkBox?new A(me):new c(me);case"Ch":return new S(me);case"Sig":return new y(me)}return new P(me);case n.AnnotationType.POPUP:return new w(me);case n.AnnotationType.FREETEXT:return new F(me);case n.AnnotationType.LINE:return new N(me);case n.AnnotationType.SQUARE:return new G(me);case n.AnnotationType.CIRCLE:return new le(me);case n.AnnotationType.POLYLINE:return new V(me);case n.AnnotationType.CARET:return new re(me);case n.AnnotationType.INK:return new te(me);case n.AnnotationType.POLYGON:return new Z(me);case n.AnnotationType.HIGHLIGHT:return new K(me);case n.AnnotationType.UNDERLINE:return new ue(me);case n.AnnotationType.SQUIGGLY:return new se(me);case n.AnnotationType.STRIKEOUT:return new Ce(me);case n.AnnotationType.STAMP:return new Me(me);case n.AnnotationType.FILEATTACHMENT:return new q(me);default:return new s(me)}}}const d=class d{constructor(me,{isRenderable:L=!1,ignoreBorder:Q=!1,createQuadrilaterals:pe=!1}={}){H(this,O,!1);this.isRenderable=L,this.data=me.data,this.layer=me.layer,this.linkService=me.linkService,this.downloadManager=me.downloadManager,this.imageResourcesPath=me.imageResourcesPath,this.renderForms=me.renderForms,this.svgFactory=me.svgFactory,this.annotationStorage=me.annotationStorage,this.enableScripting=me.enableScripting,this.hasJSActions=me.hasJSActions,this._fieldObjects=me.fieldObjects,this.parent=me.parent,L&&(this.container=this._createContainer(Q)),pe&&this._createQuadrilaterals()}static _hasPopupData({titleObj:me,contentsObj:L,richText:Q}){return!!(me!=null&&me.str||L!=null&&L.str||Q!=null&&Q.str)}get hasPopupData(){return d._hasPopupData(this.data)}_createContainer(me){const{data:L,parent:{page:Q,viewport:pe}}=this,we=document.createElement("section");we.setAttribute("data-annotation-id",L.id),this instanceof P||(we.tabIndex=r),we.style.zIndex=this.parent.zIndex++,this.data.popupRef&&we.setAttribute("aria-haspopup","dialog"),L.noRotate&&we.classList.add("norotate");const{pageWidth:Pe,pageHeight:Re,pageX:Ne,pageY:ze}=pe.rawDims;if(!L.rect||this instanceof w){const{rotation:Ze}=L;return!L.hasOwnCanvas&&Ze!==0&&this.setRotation(Ze,we),we}const{width:Ue,height:tt}=E(L.rect),Xe=n.Util.normalizeRect([L.rect[0],Q.view[3]-L.rect[1]+Q.view[1],L.rect[2],Q.view[3]-L.rect[3]+Q.view[1]]);if(!me&&L.borderStyle.width>0){we.style.borderWidth=`${L.borderStyle.width}px`;const Ze=L.borderStyle.horizontalCornerRadius,Qe=L.borderStyle.verticalCornerRadius;if(Ze>0||Qe>0){const nt=`calc(${Ze}px * var(--scale-factor)) / calc(${Qe}px * var(--scale-factor))`;we.style.borderRadius=nt}else if(this instanceof o){const nt=`calc(${Ue}px * var(--scale-factor)) / calc(${tt}px * var(--scale-factor))`;we.style.borderRadius=nt}switch(L.borderStyle.style){case n.AnnotationBorderStyleType.SOLID:we.style.borderStyle="solid";break;case n.AnnotationBorderStyleType.DASHED:we.style.borderStyle="dashed";break;case n.AnnotationBorderStyleType.BEVELED:(0,n.warn)("Unimplemented border style: beveled");break;case n.AnnotationBorderStyleType.INSET:(0,n.warn)("Unimplemented border style: inset");break;case n.AnnotationBorderStyleType.UNDERLINE:we.style.borderBottomStyle="solid";break}const it=L.borderColor||null;it?(he(this,O,!0),we.style.borderColor=n.Util.makeHexColor(it[0]|0,it[1]|0,it[2]|0)):we.style.borderWidth=0}we.style.left=`${100*(Xe[0]-Ne)/Pe}%`,we.style.top=`${100*(Xe[1]-ze)/Re}%`;const{rotation:Ke}=L;return L.hasOwnCanvas||Ke===0?(we.style.width=`${100*Ue/Pe}%`,we.style.height=`${100*tt/Re}%`):this.setRotation(Ke,we),we}setRotation(me,L=this.container){if(!this.data.rect)return;const{pageWidth:Q,pageHeight:pe}=this.parent.viewport.rawDims,{width:we,height:Pe}=E(this.data.rect);let Re,Ne;me%180===0?(Re=100*we/Q,Ne=100*Pe/pe):(Re=100*Pe/Q,Ne=100*we/pe),L.style.width=`${Re}%`,L.style.height=`${Ne}%`,L.setAttribute("data-main-rotation",(360-me)%360)}get _commonActions(){const me=(L,Q,pe)=>{const we=pe.detail[L],Pe=we[0],Re=we.slice(1);pe.target.style[Q]=k.ColorConverters[`${Pe}_HTML`](Re),this.annotationStorage.setValue(this.data.id,{[Q]:k.ColorConverters[`${Pe}_rgb`](Re)})};return(0,n.shadow)(this,"_commonActions",{display:L=>{const{display:Q}=L.detail,pe=Q%2===1;this.container.style.visibility=pe?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:pe,noPrint:Q===1||Q===2})},print:L=>{this.annotationStorage.setValue(this.data.id,{noPrint:!L.detail.print})},hidden:L=>{const{hidden:Q}=L.detail;this.container.style.visibility=Q?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:Q,noView:Q})},focus:L=>{setTimeout(()=>L.target.focus({preventScroll:!1}),0)},userName:L=>{L.target.title=L.detail.userName},readonly:L=>{L.target.disabled=L.detail.readonly},required:L=>{this._setRequired(L.target,L.detail.required)},bgColor:L=>{me("bgColor","backgroundColor",L)},fillColor:L=>{me("fillColor","backgroundColor",L)},fgColor:L=>{me("fgColor","color",L)},textColor:L=>{me("textColor","color",L)},borderColor:L=>{me("borderColor","borderColor",L)},strokeColor:L=>{me("strokeColor","borderColor",L)},rotation:L=>{const Q=L.detail.rotation;this.setRotation(Q),this.annotationStorage.setValue(this.data.id,{rotation:Q})}})}_dispatchEventFromSandbox(me,L){const Q=this._commonActions;for(const pe of Object.keys(L.detail)){const we=me[pe]||Q[pe];we==null||we(L)}}_setDefaultPropertiesFromJS(me){if(!this.enableScripting)return;const L=this.annotationStorage.getRawValue(this.data.id);if(!L)return;const Q=this._commonActions;for(const[pe,we]of Object.entries(L)){const Pe=Q[pe];if(Pe){const Re={detail:{[pe]:we},target:me};Pe(Re),delete L[pe]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:me}=this.data;if(!me)return;const[L,Q,pe,we]=this.data.rect;if(me.length===1){const[,{x:Qe,y:it},{x:nt,y:rt}]=me[0];if(pe===Qe&&we===it&&L===nt&&Q===rt)return}const{style:Pe}=this.container;let Re;if(i(this,O)){const{borderColor:Qe,borderWidth:it}=Pe;Pe.borderWidth=0,Re=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${Qe}" stroke-width="${it}">`],this.container.classList.add("hasBorder")}const Ne=pe-L,ze=we-Q,{svgFactory:Ue}=this,tt=Ue.createElement("svg");tt.classList.add("quadrilateralsContainer"),tt.setAttribute("width",0),tt.setAttribute("height",0);const Xe=Ue.createElement("defs");tt.append(Xe);const Ke=Ue.createElement("clipPath"),Ze=`clippath_${this.data.id}`;Ke.setAttribute("id",Ze),Ke.setAttribute("clipPathUnits","objectBoundingBox"),Xe.append(Ke);for(const[,{x:Qe,y:it},{x:nt,y:rt}]of me){const st=Ue.createElement("rect"),at=(nt-L)/Ne,dt=(we-it)/ze,ht=(Qe-nt)/Ne,Pn=(it-rt)/ze;st.setAttribute("x",at),st.setAttribute("y",dt),st.setAttribute("width",ht),st.setAttribute("height",Pn),Ke.append(st),Re==null||Re.push(`<rect vector-effect="non-scaling-stroke" x="${at}" y="${dt}" width="${ht}" height="${Pn}"/>`)}i(this,O)&&(Re.push("</g></svg>')"),Pe.backgroundImage=Re.join("")),this.container.append(tt),this.container.style.clipPath=`url(#${Ze})`}_createPopup(){const{container:me,data:L}=this;me.setAttribute("aria-haspopup","dialog");const Q=new w({data:{color:L.color,titleObj:L.titleObj,modificationDate:L.modificationDate,contentsObj:L.contentsObj,richText:L.richText,parentRect:L.rect,borderStyle:0,id:`popup_${L.id}`,rotation:L.rotation},parent:this.parent,elements:[this]});this.parent.div.append(Q.render())}render(){(0,n.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(me,L=null){const Q=[];if(this._fieldObjects){const pe=this._fieldObjects[me];if(pe)for(const{page:we,id:Pe,exportValues:Re}of pe){if(we===-1||Pe===L)continue;const Ne=typeof Re=="string"?Re:null,ze=document.querySelector(`[data-element-id="${Pe}"]`);if(ze&&!T.has(ze)){(0,n.warn)(`_getElementsByName - element not allowed: ${Pe}`);continue}Q.push({id:Pe,exportValue:Ne,domElement:ze})}return Q}for(const pe of document.getElementsByName(me)){const{exportValue:we}=pe,Pe=pe.getAttribute("data-element-id");Pe!==L&&T.has(pe)&&Q.push({id:Pe,exportValue:we,domElement:pe})}return Q}show(){var me;this.container&&(this.container.hidden=!1),(me=this.popup)==null||me.maybeShow()}hide(){var me;this.container&&(this.container.hidden=!0),(me=this.popup)==null||me.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const me=this.getElementsToTriggerPopup();if(Array.isArray(me))for(const L of me)L.classList.add("highlightArea");else me.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:me,data:{id:L}}=this;this.container.addEventListener("dblclick",()=>{var Q;(Q=this.linkService.eventBus)==null||Q.dispatch("switchannotationeditormode",{source:this,mode:me,editId:L})})}};O=new WeakMap;let s=d;class g extends s{constructor(L,Q=null){super(L,{isRenderable:!0,ignoreBorder:!!(Q!=null&&Q.ignoreBorder),createQuadrilaterals:!0});H(this,u);H(this,D);this.isTooltipOnly=L.data.isTooltipOnly}render(){const{data:L,linkService:Q}=this,pe=document.createElement("a");pe.setAttribute("data-element-id",L.id);let we=!1;return L.url?(Q.addLinkAttributes(pe,L.url,L.newWindow),we=!0):L.action?(this._bindNamedAction(pe,L.action),we=!0):L.attachment?(this._bindAttachment(pe,L.attachment),we=!0):L.setOCGState?(W(this,D,Hn).call(this,pe,L.setOCGState),we=!0):L.dest?(this._bindLink(pe,L.dest),we=!0):(L.actions&&(L.actions.Action||L.actions["Mouse Up"]||L.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(pe,L),we=!0),L.resetForm?(this._bindResetFormAction(pe,L.resetForm),we=!0):this.isTooltipOnly&&!we&&(this._bindLink(pe,""),we=!0)),this.container.classList.add("linkAnnotation"),we&&this.container.append(pe),this.container}_bindLink(L,Q){L.href=this.linkService.getDestinationHash(Q),L.onclick=()=>(Q&&this.linkService.goToDestination(Q),!1),(Q||Q==="")&&W(this,u,ut).call(this)}_bindNamedAction(L,Q){L.href=this.linkService.getAnchorUrl(""),L.onclick=()=>(this.linkService.executeNamedAction(Q),!1),W(this,u,ut).call(this)}_bindAttachment(L,Q){L.href=this.linkService.getAnchorUrl(""),L.onclick=()=>{var pe;return(pe=this.downloadManager)==null||pe.openOrDownloadData(this.container,Q.content,Q.filename),!1},W(this,u,ut).call(this)}_bindJSAction(L,Q){L.href=this.linkService.getAnchorUrl("");const pe=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const we of Object.keys(Q.actions)){const Pe=pe.get(we);Pe&&(L[Pe]=()=>{var Re;return(Re=this.linkService.eventBus)==null||Re.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Q.id,name:we}}),!1})}L.onclick||(L.onclick=()=>!1),W(this,u,ut).call(this)}_bindResetFormAction(L,Q){const pe=L.onclick;if(pe||(L.href=this.linkService.getAnchorUrl("")),W(this,u,ut).call(this),!this._fieldObjects){(0,n.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),pe||(L.onclick=()=>!1);return}L.onclick=()=>{var tt;pe==null||pe();const{fields:we,refs:Pe,include:Re}=Q,Ne=[];if(we.length!==0||Pe.length!==0){const Xe=new Set(Pe);for(const Ke of we){const Ze=this._fieldObjects[Ke]||[];for(const{id:Qe}of Ze)Xe.add(Qe)}for(const Ke of Object.values(this._fieldObjects))for(const Ze of Ke)Xe.has(Ze.id)===Re&&Ne.push(Ze)}else for(const Xe of Object.values(this._fieldObjects))Ne.push(...Xe);const ze=this.annotationStorage,Ue=[];for(const Xe of Ne){const{id:Ke}=Xe;switch(Ue.push(Ke),Xe.type){case"text":{const Qe=Xe.defaultValue||"";ze.setValue(Ke,{value:Qe});break}case"checkbox":case"radiobutton":{const Qe=Xe.defaultValue===Xe.exportValues;ze.setValue(Ke,{value:Qe});break}case"combobox":case"listbox":{const Qe=Xe.defaultValue||"";ze.setValue(Ke,{value:Qe});break}default:continue}const Ze=document.querySelector(`[data-element-id="${Ke}"]`);if(Ze){if(!T.has(Ze)){(0,n.warn)(`_bindResetFormAction - element not allowed: ${Ke}`);continue}}else continue;Ze.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((tt=this.linkService.eventBus)==null||tt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:Ue,name:"ResetForm"}})),!1}}}u=new WeakSet,ut=function(){this.container.setAttribute("data-internal-link","")},D=new WeakSet,Hn=function(L,Q){L.href=this.linkService.getAnchorUrl(""),L.onclick=()=>(this.linkService.executeSetOCGState(Q),!1),W(this,u,ut).call(this)};class b extends s{constructor(me){super(me,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const me=document.createElement("img");return me.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",me.alt="[{{type}} Annotation]",me.dataset.l10nId="text_annotation_type",me.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(me),this.container}}class P extends s{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(me){var L;this.data.hasOwnCanvas&&(((L=me.previousSibling)==null?void 0:L.nodeName)==="CANVAS"&&(me.previousSibling.hidden=!0),me.hidden=!1)}_getKeyModifier(me){const{isWin:L,isMac:Q}=n.FeatureTest.platform;return L&&me.ctrlKey||Q&&me.metaKey}_setEventListener(me,L,Q,pe,we){Q.includes("mouse")?me.addEventListener(Q,Pe=>{var Re;(Re=this.linkService.eventBus)==null||Re.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:pe,value:we(Pe),shift:Pe.shiftKey,modifier:this._getKeyModifier(Pe)}})}):me.addEventListener(Q,Pe=>{var Re;if(Q==="blur"){if(!L.focused||!Pe.relatedTarget)return;L.focused=!1}else if(Q==="focus"){if(L.focused)return;L.focused=!0}we&&((Re=this.linkService.eventBus)==null||Re.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:pe,value:we(Pe)}}))})}_setEventListeners(me,L,Q,pe){var we,Pe,Re;for(const[Ne,ze]of Q)(ze==="Action"||(we=this.data.actions)!=null&&we[ze])&&((ze==="Focus"||ze==="Blur")&&(L||(L={focused:!1})),this._setEventListener(me,L,Ne,ze,pe),ze==="Focus"&&!((Pe=this.data.actions)!=null&&Pe.Blur)?this._setEventListener(me,L,"blur","Blur",null):ze==="Blur"&&!((Re=this.data.actions)!=null&&Re.Focus)&&this._setEventListener(me,L,"focus","Focus",null))}_setBackgroundColor(me){const L=this.data.backgroundColor||null;me.style.backgroundColor=L===null?"transparent":n.Util.makeHexColor(L[0],L[1],L[2])}_setTextStyle(me){const L=["left","center","right"],{fontColor:Q}=this.data.defaultAppearanceData,pe=this.data.defaultAppearanceData.fontSize||a,we=me.style;let Pe;const Re=2,Ne=ze=>Math.round(10*ze)/10;if(this.data.multiLine){const ze=Math.abs(this.data.rect[3]-this.data.rect[1]-Re),Ue=Math.round(ze/(n.LINE_FACTOR*pe))||1,tt=ze/Ue;Pe=Math.min(pe,Ne(tt/n.LINE_FACTOR))}else{const ze=Math.abs(this.data.rect[3]-this.data.rect[1]-Re);Pe=Math.min(pe,Ne(ze/n.LINE_FACTOR))}we.fontSize=`calc(${Pe}px * var(--scale-factor))`,we.color=n.Util.makeHexColor(Q[0],Q[1],Q[2]),this.data.textAlignment!==null&&(we.textAlign=L[this.data.textAlignment])}_setRequired(me,L){L?me.setAttribute("required",!0):me.removeAttribute("required"),me.setAttribute("aria-required",L)}}class x extends P{constructor(me){const L=me.renderForms||!me.data.hasAppearance&&!!me.data.fieldValue;super(me,{isRenderable:L})}setPropertyOnSiblings(me,L,Q,pe){const we=this.annotationStorage;for(const Pe of this._getElementsByName(me.name,me.id))Pe.domElement&&(Pe.domElement[L]=Q),we.setValue(Pe.id,{[pe]:Q})}render(){var pe,we;const me=this.annotationStorage,L=this.data.id;this.container.classList.add("textWidgetAnnotation");let Q=null;if(this.renderForms){const Pe=me.getValue(L,{value:this.data.fieldValue});let Re=Pe.value||"";const Ne=me.getValue(L,{charLimit:this.data.maxLen}).charLimit;Ne&&Re.length>Ne&&(Re=Re.slice(0,Ne));let ze=Pe.formattedValue||((pe=this.data.textContent)==null?void 0:pe.join(`
`))||null;ze&&this.data.comb&&(ze=ze.replaceAll(/\s+/g,""));const Ue={userValue:Re,formattedValue:ze,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(Q=document.createElement("textarea"),Q.textContent=ze??Re,this.data.doNotScroll&&(Q.style.overflowY="hidden")):(Q=document.createElement("input"),Q.type="text",Q.setAttribute("value",ze??Re),this.data.doNotScroll&&(Q.style.overflowX="hidden")),this.data.hasOwnCanvas&&(Q.hidden=!0),T.add(Q),Q.setAttribute("data-element-id",L),Q.disabled=this.data.readOnly,Q.name=this.data.fieldName,Q.tabIndex=r,this._setRequired(Q,this.data.required),Ne&&(Q.maxLength=Ne),Q.addEventListener("input",Xe=>{me.setValue(L,{value:Xe.target.value}),this.setPropertyOnSiblings(Q,"value",Xe.target.value,"value"),Ue.formattedValue=null}),Q.addEventListener("resetform",Xe=>{const Ke=this.data.defaultFieldValue??"";Q.value=Ue.userValue=Ke,Ue.formattedValue=null});let tt=Xe=>{const{formattedValue:Ke}=Ue;Ke!=null&&(Xe.target.value=Ke),Xe.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){Q.addEventListener("focus",Ke=>{if(Ue.focused)return;const{target:Ze}=Ke;Ue.userValue&&(Ze.value=Ue.userValue),Ue.lastCommittedValue=Ze.value,Ue.commitKey=1,Ue.focused=!0}),Q.addEventListener("updatefromsandbox",Ke=>{this.showElementAndHideCanvas(Ke.target);const Ze={value(Qe){Ue.userValue=Qe.detail.value??"",me.setValue(L,{value:Ue.userValue.toString()}),Qe.target.value=Ue.userValue},formattedValue(Qe){const{formattedValue:it}=Qe.detail;Ue.formattedValue=it,it!=null&&Qe.target!==document.activeElement&&(Qe.target.value=it),me.setValue(L,{formattedValue:it})},selRange(Qe){Qe.target.setSelectionRange(...Qe.detail.selRange)},charLimit:Qe=>{var st;const{charLimit:it}=Qe.detail,{target:nt}=Qe;if(it===0){nt.removeAttribute("maxLength");return}nt.setAttribute("maxLength",it);let rt=Ue.userValue;!rt||rt.length<=it||(rt=rt.slice(0,it),nt.value=Ue.userValue=rt,me.setValue(L,{value:rt}),(st=this.linkService.eventBus)==null||st.dispatch("dispatcheventinsandbox",{source:this,detail:{id:L,name:"Keystroke",value:rt,willCommit:!0,commitKey:1,selStart:nt.selectionStart,selEnd:nt.selectionEnd}}))}};this._dispatchEventFromSandbox(Ze,Ke)}),Q.addEventListener("keydown",Ke=>{var it;Ue.commitKey=1;let Ze=-1;if(Ke.key==="Escape"?Ze=0:Ke.key==="Enter"&&!this.data.multiLine?Ze=2:Ke.key==="Tab"&&(Ue.commitKey=3),Ze===-1)return;const{value:Qe}=Ke.target;Ue.lastCommittedValue!==Qe&&(Ue.lastCommittedValue=Qe,Ue.userValue=Qe,(it=this.linkService.eventBus)==null||it.dispatch("dispatcheventinsandbox",{source:this,detail:{id:L,name:"Keystroke",value:Qe,willCommit:!0,commitKey:Ze,selStart:Ke.target.selectionStart,selEnd:Ke.target.selectionEnd}}))});const Xe=tt;tt=null,Q.addEventListener("blur",Ke=>{var Qe;if(!Ue.focused||!Ke.relatedTarget)return;Ue.focused=!1;const{value:Ze}=Ke.target;Ue.userValue=Ze,Ue.lastCommittedValue!==Ze&&((Qe=this.linkService.eventBus)==null||Qe.dispatch("dispatcheventinsandbox",{source:this,detail:{id:L,name:"Keystroke",value:Ze,willCommit:!0,commitKey:Ue.commitKey,selStart:Ke.target.selectionStart,selEnd:Ke.target.selectionEnd}})),Xe(Ke)}),(we=this.data.actions)!=null&&we.Keystroke&&Q.addEventListener("beforeinput",Ke=>{var dt;Ue.lastCommittedValue=null;const{data:Ze,target:Qe}=Ke,{value:it,selectionStart:nt,selectionEnd:rt}=Qe;let st=nt,at=rt;switch(Ke.inputType){case"deleteWordBackward":{const ht=it.substring(0,nt).match(/\w*[^\w]*$/);ht&&(st-=ht[0].length);break}case"deleteWordForward":{const ht=it.substring(nt).match(/^[^\w]*\w*/);ht&&(at+=ht[0].length);break}case"deleteContentBackward":nt===rt&&(st-=1);break;case"deleteContentForward":nt===rt&&(at+=1);break}Ke.preventDefault(),(dt=this.linkService.eventBus)==null||dt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:L,name:"Keystroke",value:it,change:Ze||"",willCommit:!1,selStart:st,selEnd:at}})}),this._setEventListeners(Q,Ue,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Ke=>Ke.target.value)}if(tt&&Q.addEventListener("blur",tt),this.data.comb){const Ke=(this.data.rect[2]-this.data.rect[0])/Ne;Q.classList.add("comb"),Q.style.letterSpacing=`calc(${Ke}px * var(--scale-factor) - 1ch)`}}else Q=document.createElement("div"),Q.textContent=this.data.fieldValue,Q.style.verticalAlign="middle",Q.style.display="table-cell";return this._setTextStyle(Q),this._setBackgroundColor(Q),this._setDefaultPropertiesFromJS(Q),this.container.append(Q),this.container}}class y extends P{constructor(me){super(me,{isRenderable:!!me.data.hasOwnCanvas})}}class A extends P{constructor(me){super(me,{isRenderable:me.renderForms})}render(){const me=this.annotationStorage,L=this.data,Q=L.id;let pe=me.getValue(Q,{value:L.exportValue===L.fieldValue}).value;typeof pe=="string"&&(pe=pe!=="Off",me.setValue(Q,{value:pe})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const we=document.createElement("input");return T.add(we),we.setAttribute("data-element-id",Q),we.disabled=L.readOnly,this._setRequired(we,this.data.required),we.type="checkbox",we.name=L.fieldName,pe&&we.setAttribute("checked",!0),we.setAttribute("exportValue",L.exportValue),we.tabIndex=r,we.addEventListener("change",Pe=>{const{name:Re,checked:Ne}=Pe.target;for(const ze of this._getElementsByName(Re,Q)){const Ue=Ne&&ze.exportValue===L.exportValue;ze.domElement&&(ze.domElement.checked=Ue),me.setValue(ze.id,{value:Ue})}me.setValue(Q,{value:Ne})}),we.addEventListener("resetform",Pe=>{const Re=L.defaultFieldValue||"Off";Pe.target.checked=Re===L.exportValue}),this.enableScripting&&this.hasJSActions&&(we.addEventListener("updatefromsandbox",Pe=>{const Re={value(Ne){Ne.target.checked=Ne.detail.value!=="Off",me.setValue(Q,{value:Ne.target.checked})}};this._dispatchEventFromSandbox(Re,Pe)}),this._setEventListeners(we,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Pe=>Pe.target.checked)),this._setBackgroundColor(we),this._setDefaultPropertiesFromJS(we),this.container.append(we),this.container}}class o extends P{constructor(me){super(me,{isRenderable:me.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const me=this.annotationStorage,L=this.data,Q=L.id;let pe=me.getValue(Q,{value:L.fieldValue===L.buttonValue}).value;typeof pe=="string"&&(pe=pe!==L.buttonValue,me.setValue(Q,{value:pe}));const we=document.createElement("input");if(T.add(we),we.setAttribute("data-element-id",Q),we.disabled=L.readOnly,this._setRequired(we,this.data.required),we.type="radio",we.name=L.fieldName,pe&&we.setAttribute("checked",!0),we.tabIndex=r,we.addEventListener("change",Pe=>{const{name:Re,checked:Ne}=Pe.target;for(const ze of this._getElementsByName(Re,Q))me.setValue(ze.id,{value:!1});me.setValue(Q,{value:Ne})}),we.addEventListener("resetform",Pe=>{const Re=L.defaultFieldValue;Pe.target.checked=Re!=null&&Re===L.buttonValue}),this.enableScripting&&this.hasJSActions){const Pe=L.buttonValue;we.addEventListener("updatefromsandbox",Re=>{const Ne={value:ze=>{const Ue=Pe===ze.detail.value;for(const tt of this._getElementsByName(ze.target.name)){const Xe=Ue&&tt.id===Q;tt.domElement&&(tt.domElement.checked=Xe),me.setValue(tt.id,{value:Xe})}}};this._dispatchEventFromSandbox(Ne,Re)}),this._setEventListeners(we,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Re=>Re.target.checked)}return this._setBackgroundColor(we),this._setDefaultPropertiesFromJS(we),this.container.append(we),this.container}}class c extends g{constructor(me){super(me,{ignoreBorder:me.data.hasAppearance})}render(){const me=super.render();me.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(me.title=this.data.alternativeText);const L=me.lastChild;return this.enableScripting&&this.hasJSActions&&L&&(this._setDefaultPropertiesFromJS(L),L.addEventListener("updatefromsandbox",Q=>{this._dispatchEventFromSandbox({},Q)})),me}}class S extends P{constructor(me){super(me,{isRenderable:me.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const me=this.annotationStorage,L=this.data.id,Q=me.getValue(L,{value:this.data.fieldValue}),pe=document.createElement("select");T.add(pe),pe.setAttribute("data-element-id",L),pe.disabled=this.data.readOnly,this._setRequired(pe,this.data.required),pe.name=this.data.fieldName,pe.tabIndex=r;let we=this.data.combo&&this.data.options.length>0;this.data.combo||(pe.size=this.data.options.length,this.data.multiSelect&&(pe.multiple=!0)),pe.addEventListener("resetform",Ue=>{const tt=this.data.defaultFieldValue;for(const Xe of pe.options)Xe.selected=Xe.value===tt});for(const Ue of this.data.options){const tt=document.createElement("option");tt.textContent=Ue.displayValue,tt.value=Ue.exportValue,Q.value.includes(Ue.exportValue)&&(tt.setAttribute("selected",!0),we=!1),pe.append(tt)}let Pe=null;if(we){const Ue=document.createElement("option");Ue.value=" ",Ue.setAttribute("hidden",!0),Ue.setAttribute("selected",!0),pe.prepend(Ue),Pe=()=>{Ue.remove(),pe.removeEventListener("input",Pe),Pe=null},pe.addEventListener("input",Pe)}const Re=Ue=>{const tt=Ue?"value":"textContent",{options:Xe,multiple:Ke}=pe;return Ke?Array.prototype.filter.call(Xe,Ze=>Ze.selected).map(Ze=>Ze[tt]):Xe.selectedIndex===-1?null:Xe[Xe.selectedIndex][tt]};let Ne=Re(!1);const ze=Ue=>{const tt=Ue.target.options;return Array.prototype.map.call(tt,Xe=>({displayValue:Xe.textContent,exportValue:Xe.value}))};return this.enableScripting&&this.hasJSActions?(pe.addEventListener("updatefromsandbox",Ue=>{const tt={value(Xe){Pe==null||Pe();const Ke=Xe.detail.value,Ze=new Set(Array.isArray(Ke)?Ke:[Ke]);for(const Qe of pe.options)Qe.selected=Ze.has(Qe.value);me.setValue(L,{value:Re(!0)}),Ne=Re(!1)},multipleSelection(Xe){pe.multiple=!0},remove(Xe){const Ke=pe.options,Ze=Xe.detail.remove;Ke[Ze].selected=!1,pe.remove(Ze),Ke.length>0&&Array.prototype.findIndex.call(Ke,it=>it.selected)===-1&&(Ke[0].selected=!0),me.setValue(L,{value:Re(!0),items:ze(Xe)}),Ne=Re(!1)},clear(Xe){for(;pe.length!==0;)pe.remove(0);me.setValue(L,{value:null,items:[]}),Ne=Re(!1)},insert(Xe){const{index:Ke,displayValue:Ze,exportValue:Qe}=Xe.detail.insert,it=pe.children[Ke],nt=document.createElement("option");nt.textContent=Ze,nt.value=Qe,it?it.before(nt):pe.append(nt),me.setValue(L,{value:Re(!0),items:ze(Xe)}),Ne=Re(!1)},items(Xe){const{items:Ke}=Xe.detail;for(;pe.length!==0;)pe.remove(0);for(const Ze of Ke){const{displayValue:Qe,exportValue:it}=Ze,nt=document.createElement("option");nt.textContent=Qe,nt.value=it,pe.append(nt)}pe.options.length>0&&(pe.options[0].selected=!0),me.setValue(L,{value:Re(!0),items:ze(Xe)}),Ne=Re(!1)},indices(Xe){const Ke=new Set(Xe.detail.indices);for(const Ze of Xe.target.options)Ze.selected=Ke.has(Ze.index);me.setValue(L,{value:Re(!0)}),Ne=Re(!1)},editable(Xe){Xe.target.disabled=!Xe.detail.editable}};this._dispatchEventFromSandbox(tt,Ue)}),pe.addEventListener("input",Ue=>{var Xe;const tt=Re(!0);me.setValue(L,{value:tt}),Ue.preventDefault(),(Xe=this.linkService.eventBus)==null||Xe.dispatch("dispatcheventinsandbox",{source:this,detail:{id:L,name:"Keystroke",value:Ne,changeEx:tt,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(pe,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],Ue=>Ue.target.value)):pe.addEventListener("input",function(Ue){me.setValue(L,{value:Re(!0)})}),this.data.combo&&this._setTextStyle(pe),this._setBackgroundColor(pe),this._setDefaultPropertiesFromJS(pe),this.container.append(pe),this.container}}class w extends s{constructor(me){const{data:L,elements:Q}=me;super(me,{isRenderable:s._hasPopupData(L)}),this.elements=Q}render(){this.container.classList.add("popupAnnotation");const me=new v({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),L=[];for(const Q of this.elements)Q.popup=me,L.push(Q.data.id),Q.addHighlightArea();return this.container.setAttribute("aria-controls",L.map(Q=>`${n.AnnotationPrefix}${Q}`).join(",")),this.container}}class v{constructor({container:me,color:L,elements:Q,titleObj:pe,modificationDate:we,contentsObj:Pe,richText:Re,parent:Ne,rect:ze,parentRect:Ue,open:tt}){H(this,De);H(this,je);H(this,qe);H(this,et);H(this,X,null);H(this,B,W(this,De,zn).bind(this));H(this,z,W(this,et,Ri).bind(this));H(this,j,W(this,qe,Mi).bind(this));H(this,Y,W(this,je,Wt).bind(this));H(this,ce,null);H(this,oe,null);H(this,Se,null);H(this,Ee,null);H(this,ye,null);H(this,ne,null);H(this,fe,!1);H(this,ae,null);H(this,de,null);H(this,be,null);H(this,Ie,null);H(this,Le,!1);var Ke;he(this,oe,me),he(this,Ie,pe),he(this,Se,Pe),he(this,be,Re),he(this,ye,Ne),he(this,ce,L),he(this,de,ze),he(this,ne,Ue),he(this,Ee,Q);const Xe=f.PDFDateString.toDateObject(we);Xe&&he(this,X,Ne.l10n.get("annotation_date_string",{date:Xe.toLocaleDateString(),time:Xe.toLocaleTimeString()})),this.trigger=Q.flatMap(Ze=>Ze.getElementsToTriggerPopup());for(const Ze of this.trigger)Ze.addEventListener("click",i(this,Y)),Ze.addEventListener("mouseenter",i(this,j)),Ze.addEventListener("mouseleave",i(this,z)),Ze.classList.add("popupTriggerArea");for(const Ze of Q)(Ke=Ze.container)==null||Ke.addEventListener("keydown",i(this,B));i(this,oe).hidden=!0,tt&&W(this,je,Wt).call(this)}render(){if(i(this,ae))return;const{page:{view:me},viewport:{rawDims:{pageWidth:L,pageHeight:Q,pageX:pe,pageY:we}}}=i(this,ye),Pe=he(this,ae,document.createElement("div"));if(Pe.className="popup",i(this,ce)){const st=Pe.style.outlineColor=n.Util.makeHexColor(...i(this,ce));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?Pe.style.backgroundColor=`color-mix(in srgb, ${st} 30%, white)`:Pe.style.backgroundColor=n.Util.makeHexColor(...i(this,ce).map(dt=>Math.floor(.7*(255-dt)+dt)))}const Re=document.createElement("span");Re.className="header";const Ne=document.createElement("h1");if(Re.append(Ne),{dir:Ne.dir,str:Ne.textContent}=i(this,Ie),Pe.append(Re),i(this,X)){const st=document.createElement("span");st.classList.add("popupDate"),i(this,X).then(at=>{st.textContent=at}),Re.append(st)}const ze=i(this,Se),Ue=i(this,be);if(Ue!=null&&Ue.str&&(!(ze!=null&&ze.str)||ze.str===Ue.str))m.XfaLayer.render({xfaHtml:Ue.html,intent:"richText",div:Pe}),Pe.lastChild.classList.add("richText","popupContent");else{const st=this._formatContents(ze);Pe.append(st)}let tt=!!i(this,ne),Xe=tt?i(this,ne):i(this,de);for(const st of i(this,Ee))if(!Xe||n.Util.intersect(st.data.rect,Xe)!==null){Xe=st.data.rect,tt=!0;break}const Ke=n.Util.normalizeRect([Xe[0],me[3]-Xe[1]+me[1],Xe[2],me[3]-Xe[3]+me[1]]),Ze=5,Qe=tt?Xe[2]-Xe[0]+Ze:0,it=Ke[0]+Qe,nt=Ke[1],{style:rt}=i(this,oe);rt.left=`${100*(it-pe)/L}%`,rt.top=`${100*(nt-we)/Q}%`,i(this,oe).append(Pe)}_formatContents({str:me,dir:L}){const Q=document.createElement("p");Q.classList.add("popupContent"),Q.dir=L;const pe=me.split(/(?:\r\n?|\n)/);for(let we=0,Pe=pe.length;we<Pe;++we){const Re=pe[we];Q.append(document.createTextNode(Re)),we<Pe-1&&Q.append(document.createElement("br"))}return Q}forceHide(){he(this,Le,this.isVisible),i(this,Le)&&(i(this,oe).hidden=!0)}maybeShow(){i(this,Le)&&(he(this,Le,!1),i(this,oe).hidden=!1)}get isVisible(){return i(this,oe).hidden===!1}}X=new WeakMap,B=new WeakMap,z=new WeakMap,j=new WeakMap,Y=new WeakMap,ce=new WeakMap,oe=new WeakMap,Se=new WeakMap,Ee=new WeakMap,ye=new WeakMap,ne=new WeakMap,fe=new WeakMap,ae=new WeakMap,de=new WeakMap,be=new WeakMap,Ie=new WeakMap,Le=new WeakMap,De=new WeakSet,zn=function(me){me.altKey||me.shiftKey||me.ctrlKey||me.metaKey||(me.key==="Enter"||me.key==="Escape"&&i(this,fe))&&W(this,je,Wt).call(this)},je=new WeakSet,Wt=function(){he(this,fe,!i(this,fe)),i(this,fe)?(W(this,qe,Mi).call(this),i(this,oe).addEventListener("click",i(this,Y)),i(this,oe).addEventListener("keydown",i(this,B))):(W(this,et,Ri).call(this),i(this,oe).removeEventListener("click",i(this,Y)),i(this,oe).removeEventListener("keydown",i(this,B)))},qe=new WeakSet,Mi=function(){i(this,ae)||this.render(),this.isVisible?i(this,fe)&&i(this,oe).classList.add("focused"):(i(this,oe).hidden=!1,i(this,oe).style.zIndex=parseInt(i(this,oe).style.zIndex)+1e3)},et=new WeakSet,Ri=function(){i(this,oe).classList.remove("focused"),!(i(this,fe)||!this.isVisible)&&(i(this,oe).hidden=!0,i(this,oe).style.zIndex=parseInt(i(this,oe).style.zIndex)-1e3)};class F extends s{constructor(me){super(me,{isRenderable:!0,ignoreBorder:!0}),this.textContent=me.data.textContent,this.textPosition=me.data.textPosition,this.annotationEditorType=n.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const me=document.createElement("div");me.classList.add("annotationTextContent"),me.setAttribute("role","comment");for(const L of this.textContent){const Q=document.createElement("span");Q.textContent=L,me.append(Q)}this.container.append(me)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}t.FreeTextAnnotationElement=F;class N extends s{constructor(L){super(L,{isRenderable:!0,ignoreBorder:!0});H(this,U,null)}render(){this.container.classList.add("lineAnnotation");const L=this.data,{width:Q,height:pe}=E(L.rect),we=this.svgFactory.create(Q,pe,!0),Pe=he(this,U,this.svgFactory.createElement("svg:line"));return Pe.setAttribute("x1",L.rect[2]-L.lineCoordinates[0]),Pe.setAttribute("y1",L.rect[3]-L.lineCoordinates[1]),Pe.setAttribute("x2",L.rect[2]-L.lineCoordinates[2]),Pe.setAttribute("y2",L.rect[3]-L.lineCoordinates[3]),Pe.setAttribute("stroke-width",L.borderStyle.width||1),Pe.setAttribute("stroke","transparent"),Pe.setAttribute("fill","transparent"),we.append(Pe),this.container.append(we),!L.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return i(this,U)}addHighlightArea(){this.container.classList.add("highlightArea")}}U=new WeakMap;class G extends s{constructor(L){super(L,{isRenderable:!0,ignoreBorder:!0});H(this,J,null)}render(){this.container.classList.add("squareAnnotation");const L=this.data,{width:Q,height:pe}=E(L.rect),we=this.svgFactory.create(Q,pe,!0),Pe=L.borderStyle.width,Re=he(this,J,this.svgFactory.createElement("svg:rect"));return Re.setAttribute("x",Pe/2),Re.setAttribute("y",Pe/2),Re.setAttribute("width",Q-Pe),Re.setAttribute("height",pe-Pe),Re.setAttribute("stroke-width",Pe||1),Re.setAttribute("stroke","transparent"),Re.setAttribute("fill","transparent"),we.append(Re),this.container.append(we),!L.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return i(this,J)}addHighlightArea(){this.container.classList.add("highlightArea")}}J=new WeakMap;class le extends s{constructor(L){super(L,{isRenderable:!0,ignoreBorder:!0});H(this,Ae,null)}render(){this.container.classList.add("circleAnnotation");const L=this.data,{width:Q,height:pe}=E(L.rect),we=this.svgFactory.create(Q,pe,!0),Pe=L.borderStyle.width,Re=he(this,Ae,this.svgFactory.createElement("svg:ellipse"));return Re.setAttribute("cx",Q/2),Re.setAttribute("cy",pe/2),Re.setAttribute("rx",Q/2-Pe/2),Re.setAttribute("ry",pe/2-Pe/2),Re.setAttribute("stroke-width",Pe||1),Re.setAttribute("stroke","transparent"),Re.setAttribute("fill","transparent"),we.append(Re),this.container.append(we),!L.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return i(this,Ae)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ae=new WeakMap;class V extends s{constructor(L){super(L,{isRenderable:!0,ignoreBorder:!0});H(this,ee,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const L=this.data,{width:Q,height:pe}=E(L.rect),we=this.svgFactory.create(Q,pe,!0);let Pe=[];for(const Ne of L.vertices){const ze=Ne.x-L.rect[0],Ue=L.rect[3]-Ne.y;Pe.push(ze+","+Ue)}Pe=Pe.join(" ");const Re=he(this,ee,this.svgFactory.createElement(this.svgElementName));return Re.setAttribute("points",Pe),Re.setAttribute("stroke-width",L.borderStyle.width||1),Re.setAttribute("stroke","transparent"),Re.setAttribute("fill","transparent"),we.append(Re),this.container.append(we),!L.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return i(this,ee)}addHighlightArea(){this.container.classList.add("highlightArea")}}ee=new WeakMap;class Z extends V{constructor(me){super(me),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class re extends s{constructor(me){super(me,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class te extends s{constructor(L){super(L,{isRenderable:!0,ignoreBorder:!0});H(this,ge,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=n.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const L=this.data,{width:Q,height:pe}=E(L.rect),we=this.svgFactory.create(Q,pe,!0);for(const Pe of L.inkLists){let Re=[];for(const ze of Pe){const Ue=ze.x-L.rect[0],tt=L.rect[3]-ze.y;Re.push(`${Ue},${tt}`)}Re=Re.join(" ");const Ne=this.svgFactory.createElement(this.svgElementName);i(this,ge).push(Ne),Ne.setAttribute("points",Re),Ne.setAttribute("stroke-width",L.borderStyle.width||1),Ne.setAttribute("stroke","transparent"),Ne.setAttribute("fill","transparent"),!L.popupRef&&this.hasPopupData&&this._createPopup(),we.append(Ne)}return this.container.append(we),this.container}getElementsToTriggerPopup(){return i(this,ge)}addHighlightArea(){this.container.classList.add("highlightArea")}}ge=new WeakMap,t.InkAnnotationElement=te;class K extends s{constructor(me){super(me,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class ue extends s{constructor(me){super(me,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class se extends s{constructor(me){super(me,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class Ce extends s{constructor(me){super(me,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class Me extends s{constructor(me){super(me,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}t.StampAnnotationElement=Me;class q extends s{constructor(L){var we;super(L,{isRenderable:!0});H(this,ie);H(this,ve,null);const{filename:Q,content:pe}=this.data.file;this.filename=(0,f.getFilenameFromUrl)(Q,!0),this.content=pe,(we=this.linkService.eventBus)==null||we.dispatch("fileattachmentannotation",{source:this,filename:Q,content:pe})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:L,data:Q}=this;let pe;Q.hasAppearance||Q.fillAlpha===0?pe=document.createElement("div"):(pe=document.createElement("img"),pe.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(Q.name)?"paperclip":"pushpin"}.svg`,Q.fillAlpha&&Q.fillAlpha<1&&(pe.style=`filter: opacity(${Math.round(Q.fillAlpha*100)}%);`)),pe.addEventListener("dblclick",W(this,ie,Li).bind(this)),he(this,ve,pe);const{isMac:we}=n.FeatureTest.platform;return L.addEventListener("keydown",Pe=>{Pe.key==="Enter"&&(we?Pe.metaKey:Pe.ctrlKey)&&W(this,ie,Li).call(this)}),!Q.popupRef&&this.hasPopupData?this._createPopup():pe.classList.add("popupTriggerArea"),L.append(pe),L}getElementsToTriggerPopup(){return i(this,ve)}addHighlightArea(){this.container.classList.add("highlightArea")}}ve=new WeakMap,ie=new WeakSet,Li=function(){var L;(L=this.downloadManager)==null||L.openOrDownloadData(this.container,this.content,this.filename)};class R{constructor({div:me,accessibilityManager:L,annotationCanvasMap:Q,l10n:pe,page:we,viewport:Pe}){H(this,Ve);H(this,Oe);H(this,ke,null);H(this,xe,null);H(this,Fe,new Map);this.div=me,he(this,ke,L),he(this,xe,Q),this.l10n=pe,this.page=we,this.viewport=Pe,this.zIndex=0,this.l10n||(this.l10n=_.NullL10n)}async render(me){const{annotations:L}=me,Q=this.div;(0,f.setLayerDimensions)(Q,this.viewport);const pe=new Map,we={data:null,layer:Q,linkService:me.linkService,downloadManager:me.downloadManager,imageResourcesPath:me.imageResourcesPath||"",renderForms:me.renderForms!==!1,svgFactory:new f.DOMSVGFactory,annotationStorage:me.annotationStorage||new I.AnnotationStorage,enableScripting:me.enableScripting===!0,hasJSActions:me.hasJSActions,fieldObjects:me.fieldObjects,parent:this,elements:null};for(const Pe of L){if(Pe.noHTML)continue;const Re=Pe.annotationType===n.AnnotationType.POPUP;if(Re){const Ue=pe.get(Pe.id);if(!Ue)continue;we.elements=Ue}else{const{width:Ue,height:tt}=E(Pe.rect);if(Ue<=0||tt<=0)continue}we.data=Pe;const Ne=C.create(we);if(!Ne.isRenderable)continue;if(!Re&&Pe.popupRef){const Ue=pe.get(Pe.popupRef);Ue?Ue.push(Ne):pe.set(Pe.popupRef,[Ne])}Ne.annotationEditorType>0&&i(this,Fe).set(Ne.data.id,Ne);const ze=Ne.render();Pe.hidden&&(ze.style.visibility="hidden"),W(this,Ve,jn).call(this,ze,Pe.id)}W(this,Oe,Ii).call(this),await this.l10n.translate(Q)}update({viewport:me}){const L=this.div;this.viewport=me,(0,f.setLayerDimensions)(L,{rotation:me.rotation}),W(this,Oe,Ii).call(this),L.hidden=!1}getEditableAnnotations(){return Array.from(i(this,Fe).values())}getEditableAnnotation(me){return i(this,Fe).get(me)}}ke=new WeakMap,xe=new WeakMap,Fe=new WeakMap,Ve=new WeakSet,jn=function(me,L){var pe;const Q=me.firstChild||me;Q.id=`${n.AnnotationPrefix}${L}`,this.div.append(me),(pe=i(this,ke))==null||pe.moveElementInDOM(this.div,me,Q,!1)},Oe=new WeakSet,Ii=function(){if(!i(this,xe))return;const me=this.div;for(const[L,Q]of i(this,xe)){const pe=me.querySelector(`[data-annotation-id="${L}"]`);if(!pe)continue;const{firstChild:we}=pe;we?we.nodeName==="CANVAS"?we.replaceWith(Q):we.before(Q):pe.append(Q)}i(this,xe).clear()},t.AnnotationLayer=R},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ColorConverters=void 0;function l(I){return Math.floor(Math.max(0,Math.min(1,I))*255).toString(16).padStart(2,"0")}function n(I){return Math.max(0,Math.min(255,255*I))}class f{static CMYK_G([k,_,m,r]){return["G",1-Math.min(1,.3*k+.59*m+.11*_+r)]}static G_CMYK([k]){return["CMYK",0,0,0,1-k]}static G_RGB([k]){return["RGB",k,k,k]}static G_rgb([k]){return k=n(k),[k,k,k]}static G_HTML([k]){const _=l(k);return`#${_}${_}${_}`}static RGB_G([k,_,m]){return["G",.3*k+.59*_+.11*m]}static RGB_rgb(k){return k.map(n)}static RGB_HTML(k){return`#${k.map(l).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([k,_,m,r]){return["RGB",1-Math.min(1,k+r),1-Math.min(1,m+r),1-Math.min(1,_+r)]}static CMYK_rgb([k,_,m,r]){return[n(1-Math.min(1,k+r)),n(1-Math.min(1,m+r)),n(1-Math.min(1,_+r))]}static CMYK_HTML(k){const _=this.CMYK_RGB(k).slice(1);return this.RGB_HTML(_)}static RGB_CMYK([k,_,m]){const r=1-k,a=1-_,T=1-m,E=Math.min(r,a,T);return["CMYK",r,a,T,E]}}t.ColorConverters=f},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NullL10n=void 0,t.getL10nFallback=n;const l={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} × {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} × {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing…",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};l.print_progress_percent="{{progress}}%";function n(k,_){switch(k){case"find_match_count":k=`find_match_count[${_.total===1?"one":"other"}]`;break;case"find_match_count_limit":k=`find_match_count_limit[${_.limit===1?"one":"other"}]`;break}return l[k]||""}function f(k,_){return _?k.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(m,r)=>r in _?_[r]:"{{"+r+"}}"):k}const I={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(k,_=null,m=n(k,_)){return f(m,_)},async translate(k){}};t.NullL10n=I},(e,t,l)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.XfaLayer=void 0;var n=l(25);class f{static setupStorage(k,_,m,r,a){const T=r.getValue(_,{value:null});switch(m.name){case"textarea":if(T.value!==null&&(k.textContent=T.value),a==="print")break;k.addEventListener("input",E=>{r.setValue(_,{value:E.target.value})});break;case"input":if(m.attributes.type==="radio"||m.attributes.type==="checkbox"){if(T.value===m.attributes.xfaOn?k.setAttribute("checked",!0):T.value===m.attributes.xfaOff&&k.removeAttribute("checked"),a==="print")break;k.addEventListener("change",E=>{r.setValue(_,{value:E.target.checked?E.target.getAttribute("xfaOn"):E.target.getAttribute("xfaOff")})})}else{if(T.value!==null&&k.setAttribute("value",T.value),a==="print")break;k.addEventListener("input",E=>{r.setValue(_,{value:E.target.value})})}break;case"select":if(T.value!==null){k.setAttribute("value",T.value);for(const E of m.children)E.attributes.value===T.value?E.attributes.selected=!0:E.attributes.hasOwnProperty("selected")&&delete E.attributes.selected}k.addEventListener("input",E=>{const C=E.target.options,s=C.selectedIndex===-1?"":C[C.selectedIndex].value;r.setValue(_,{value:s})});break}}static setAttributes({html:k,element:_,storage:m=null,intent:r,linkService:a}){const{attributes:T}=_,E=k instanceof HTMLAnchorElement;T.type==="radio"&&(T.name=`${T.name}-${r}`);for(const[C,s]of Object.entries(T))if(s!=null)switch(C){case"class":s.length&&k.setAttribute(C,s.join(" "));break;case"dataId":break;case"id":k.setAttribute("data-element-id",s);break;case"style":Object.assign(k.style,s);break;case"textContent":k.textContent=s;break;default:(!E||C!=="href"&&C!=="newWindow")&&k.setAttribute(C,s)}E&&a.addLinkAttributes(k,T.href,T.newWindow),m&&T.dataId&&this.setupStorage(k,T.dataId,_,m)}static render(k){var g;const _=k.annotationStorage,m=k.linkService,r=k.xfaHtml,a=k.intent||"display",T=document.createElement(r.name);r.attributes&&this.setAttributes({html:T,element:r,intent:a,linkService:m});const E=[[r,-1,T]],C=k.div;if(C.append(T),k.viewport){const b=`matrix(${k.viewport.transform.join(",")})`;C.style.transform=b}a!=="richText"&&C.setAttribute("class","xfaLayer xfaFont");const s=[];for(;E.length>0;){const[b,P,x]=E.at(-1);if(P+1===b.children.length){E.pop();continue}const y=b.children[++E.at(-1)[1]];if(y===null)continue;const{name:A}=y;if(A==="#text"){const c=document.createTextNode(y.value);s.push(c),x.append(c);continue}const o=(g=y==null?void 0:y.attributes)!=null&&g.xmlns?document.createElementNS(y.attributes.xmlns,A):document.createElement(A);if(x.append(o),y.attributes&&this.setAttributes({html:o,element:y,storage:_,intent:a,linkService:m}),y.children&&y.children.length>0)E.push([y,-1,o]);else if(y.value){const c=document.createTextNode(y.value);n.XfaText.shouldBuildText(A)&&s.push(c),o.append(c)}}for(const b of C.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))b.setAttribute("readOnly",!0);return{textDivs:s}}static update(k){const _=`matrix(${k.viewport.transform.join(",")})`;k.div.style.transform=_,k.div.hidden=!1}}t.XfaLayer=f},(e,t,l)=>{var r,a,T,E,C,s,g,b,P,x,y,A,o,c,S,Wn,v,$n,N,Gn,le,qn,Z,ki,te,Xn,ue,Oi,Ce,Kn,q,Yn,O,Zn,u,Jn,D,Qn,X,lt,z,Fi,Y,$t,oe,Gt,Ee,bt,ne,Ni,ae,qt,be,es,Le,Di,Be,ts,He,is,Ge,Bi,Te,Xt,J,_t;Object.defineProperty(t,"__esModule",{value:!0}),t.InkEditor=void 0;var n=l(1),f=l(4),I=l(29),k=l(6),_=l(5);const ee=class ee extends f.AnnotationEditor{constructor(ie){super({...ie,name:"inkEditor"});H(this,S);H(this,v);H(this,N);H(this,le);H(this,Z);H(this,te);H(this,ue);H(this,Ce);H(this,q);H(this,O);H(this,u);H(this,D);H(this,X);H(this,z);H(this,Y);H(this,oe);H(this,Ee);H(this,ne);H(this,ae);H(this,He);H(this,Ge);H(this,Te);H(this,J);H(this,r,0);H(this,a,0);H(this,T,this.canvasPointermove.bind(this));H(this,E,this.canvasPointerleave.bind(this));H(this,C,this.canvasPointerup.bind(this));H(this,s,this.canvasPointerdown.bind(this));H(this,g,new Path2D);H(this,b,!1);H(this,P,!1);H(this,x,!1);H(this,y,null);H(this,A,0);H(this,o,0);H(this,c,null);this.color=ie.color||null,this.thickness=ie.thickness||null,this.opacity=ie.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(ie){f.AnnotationEditor.initialize(ie,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(ie,_e){switch(ie){case n.AnnotationEditorParamsType.INK_THICKNESS:ee._defaultThickness=_e;break;case n.AnnotationEditorParamsType.INK_COLOR:ee._defaultColor=_e;break;case n.AnnotationEditorParamsType.INK_OPACITY:ee._defaultOpacity=_e/100;break}}updateParams(ie,_e){switch(ie){case n.AnnotationEditorParamsType.INK_THICKNESS:W(this,S,Wn).call(this,_e);break;case n.AnnotationEditorParamsType.INK_COLOR:W(this,v,$n).call(this,_e);break;case n.AnnotationEditorParamsType.INK_OPACITY:W(this,N,Gn).call(this,_e);break}}static get defaultPropertiesToUpdate(){return[[n.AnnotationEditorParamsType.INK_THICKNESS,ee._defaultThickness],[n.AnnotationEditorParamsType.INK_COLOR,ee._defaultColor||f.AnnotationEditor._defaultLineColor],[n.AnnotationEditorParamsType.INK_OPACITY,Math.round(ee._defaultOpacity*100)]]}get propertiesToUpdate(){return[[n.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||ee._defaultThickness],[n.AnnotationEditorParamsType.INK_COLOR,this.color||ee._defaultColor||f.AnnotationEditor._defaultLineColor],[n.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??ee._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(W(this,Y,$t).call(this),W(this,oe,Gt).call(this)),this.isAttachedToDOM||(this.parent.add(this),W(this,Ee,bt).call(this)),W(this,J,_t).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,i(this,y).disconnect(),he(this,y,null),super.remove())}setParent(ie){!this.parent&&ie?this._uiManager.removeShouldRescale(this):this.parent&&ie===null&&this._uiManager.addShouldRescale(this),super.setParent(ie)}onScaleChanging(){const[ie,_e]=this.parentDimensions,ke=this.width*ie,xe=this.height*_e;this.setDimensions(ke,xe)}enableEditMode(){i(this,b)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",i(this,s)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",i(this,s)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){i(this,b)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),he(this,b,!0),this.div.classList.add("disabled"),W(this,J,_t).call(this,!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(ie){this._focusEventsAllowed&&(super.focusin(ie),this.enableEditMode())}canvasPointerdown(ie){ie.button!==0||!this.isInEditMode()||i(this,b)||(this.setInForeground(),ie.preventDefault(),ie.type!=="mouse"&&this.div.focus(),W(this,te,Xn).call(this,ie.offsetX,ie.offsetY))}canvasPointermove(ie){ie.preventDefault(),W(this,ue,Oi).call(this,ie.offsetX,ie.offsetY)}canvasPointerup(ie){ie.preventDefault(),W(this,z,Fi).call(this,ie)}canvasPointerleave(ie){W(this,z,Fi).call(this,ie)}get isResizable(){return!this.isEmpty()&&i(this,b)}render(){if(this.div)return this.div;let ie,_e;this.width&&(ie=this.x,_e=this.y),super.render(),f.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(We=>{var Oe;return(Oe=this.div)==null?void 0:Oe.setAttribute("aria-label",We)});const[ke,xe,Fe,Ve]=W(this,le,qn).call(this);if(this.setAt(ke,xe,0,0),this.setDims(Fe,Ve),W(this,Y,$t).call(this),this.width){const[We,Oe]=this.parentDimensions;this.setAspectRatio(this.width*We,this.height*Oe),this.setAt(ie*We,_e*Oe,this.width*We,this.height*Oe),he(this,x,!0),W(this,Ee,bt).call(this),this.setDims(this.width*We,this.height*Oe),W(this,X,lt).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return W(this,oe,Gt).call(this),this.div}setDimensions(ie,_e){const ke=Math.round(ie),xe=Math.round(_e);if(i(this,A)===ke&&i(this,o)===xe)return;he(this,A,ke),he(this,o,xe),this.canvas.style.visibility="hidden";const[Fe,Ve]=this.parentDimensions;this.width=ie/Fe,this.height=_e/Ve,this.fixAndSetPosition(),i(this,b)&&W(this,ne,Ni).call(this,ie,_e),W(this,Ee,bt).call(this),W(this,X,lt).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(ie,_e,ke){var we,Pe,Re;if(ie instanceof I.InkAnnotationElement)return null;const xe=super.deserialize(ie,_e,ke);xe.thickness=ie.thickness,xe.color=n.Util.makeHexColor(...ie.color),xe.opacity=ie.opacity;const[Fe,Ve]=xe.pageDimensions,We=xe.width*Fe,Oe=xe.height*Ve,Ye=xe.parentScale,$e=ie.thickness/2;he(xe,b,!0),he(xe,A,Math.round(We)),he(xe,o,Math.round(Oe));const{paths:me,rect:L,rotation:Q}=ie;for(let{bezier:Ne}of me){Ne=W(we=ee,Be,ts).call(we,Ne,L,Q);const ze=[];xe.paths.push(ze);let Ue=Ye*(Ne[0]-$e),tt=Ye*(Ne[1]-$e);for(let Ke=2,Ze=Ne.length;Ke<Ze;Ke+=6){const Qe=Ye*(Ne[Ke]-$e),it=Ye*(Ne[Ke+1]-$e),nt=Ye*(Ne[Ke+2]-$e),rt=Ye*(Ne[Ke+3]-$e),st=Ye*(Ne[Ke+4]-$e),at=Ye*(Ne[Ke+5]-$e);ze.push([[Ue,tt],[Qe,it],[nt,rt],[st,at]]),Ue=st,tt=at}const Xe=W(this,be,es).call(this,ze);xe.bezierPath2D.push(Xe)}const pe=W(Pe=xe,Ge,Bi).call(Pe);return he(xe,a,Math.max(f.AnnotationEditor.MIN_SIZE,pe[2]-pe[0])),he(xe,r,Math.max(f.AnnotationEditor.MIN_SIZE,pe[3]-pe[1])),W(Re=xe,ne,Ni).call(Re,We,Oe),xe}serialize(){if(this.isEmpty())return null;const ie=this.getRect(0,0),_e=f.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:n.AnnotationEditorType.INK,color:_e,thickness:this.thickness,opacity:this.opacity,paths:W(this,He,is).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,ie),pageIndex:this.pageIndex,rect:ie,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};r=new WeakMap,a=new WeakMap,T=new WeakMap,E=new WeakMap,C=new WeakMap,s=new WeakMap,g=new WeakMap,b=new WeakMap,P=new WeakMap,x=new WeakMap,y=new WeakMap,A=new WeakMap,o=new WeakMap,c=new WeakMap,S=new WeakSet,Wn=function(ie){const _e=this.thickness;this.addCommands({cmd:()=>{this.thickness=ie,W(this,J,_t).call(this)},undo:()=>{this.thickness=_e,W(this,J,_t).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},v=new WeakSet,$n=function(ie){const _e=this.color;this.addCommands({cmd:()=>{this.color=ie,W(this,X,lt).call(this)},undo:()=>{this.color=_e,W(this,X,lt).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},N=new WeakSet,Gn=function(ie){ie/=100;const _e=this.opacity;this.addCommands({cmd:()=>{this.opacity=ie,W(this,X,lt).call(this)},undo:()=>{this.opacity=_e,W(this,X,lt).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},le=new WeakSet,qn=function(){const{parentRotation:ie,parentDimensions:[_e,ke]}=this;switch(ie){case 90:return[0,ke,ke,_e];case 180:return[_e,ke,_e,ke];case 270:return[_e,0,ke,_e];default:return[0,0,_e,ke]}},Z=new WeakSet,ki=function(){const{ctx:ie,color:_e,opacity:ke,thickness:xe,parentScale:Fe,scaleFactor:Ve}=this;ie.lineWidth=xe*Fe/Ve,ie.lineCap="round",ie.lineJoin="round",ie.miterLimit=10,ie.strokeStyle=`${_e}${(0,_.opacityToHex)(ke)}`},te=new WeakSet,Xn=function(ie,_e){this.canvas.addEventListener("contextmenu",k.noContextMenu),this.canvas.addEventListener("pointerleave",i(this,E)),this.canvas.addEventListener("pointermove",i(this,T)),this.canvas.addEventListener("pointerup",i(this,C)),this.canvas.removeEventListener("pointerdown",i(this,s)),this.isEditing=!0,i(this,x)||(he(this,x,!0),W(this,Ee,bt).call(this),this.thickness||(this.thickness=ee._defaultThickness),this.color||(this.color=ee._defaultColor||f.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=ee._defaultOpacity)),this.currentPath.push([ie,_e]),he(this,P,!1),W(this,Z,ki).call(this),he(this,c,()=>{W(this,O,Zn).call(this),i(this,c)&&window.requestAnimationFrame(i(this,c))}),window.requestAnimationFrame(i(this,c))},ue=new WeakSet,Oi=function(ie,_e){const[ke,xe]=this.currentPath.at(-1);if(this.currentPath.length>1&&ie===ke&&_e===xe)return;const Fe=this.currentPath;let Ve=i(this,g);if(Fe.push([ie,_e]),he(this,P,!0),Fe.length<=2){Ve.moveTo(...Fe[0]),Ve.lineTo(ie,_e);return}Fe.length===3&&(he(this,g,Ve=new Path2D),Ve.moveTo(...Fe[0])),W(this,u,Jn).call(this,Ve,...Fe.at(-3),...Fe.at(-2),ie,_e)},Ce=new WeakSet,Kn=function(){if(this.currentPath.length===0)return;const ie=this.currentPath.at(-1);i(this,g).lineTo(...ie)},q=new WeakSet,Yn=function(ie,_e){he(this,c,null),ie=Math.min(Math.max(ie,0),this.canvas.width),_e=Math.min(Math.max(_e,0),this.canvas.height),W(this,ue,Oi).call(this,ie,_e),W(this,Ce,Kn).call(this);let ke;if(this.currentPath.length!==1)ke=W(this,D,Qn).call(this);else{const Oe=[ie,_e];ke=[[Oe,Oe.slice(),Oe.slice(),Oe]]}const xe=i(this,g),Fe=this.currentPath;this.currentPath=[],he(this,g,new Path2D);const Ve=()=>{this.allRawPaths.push(Fe),this.paths.push(ke),this.bezierPath2D.push(xe),this.rebuild()},We=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(W(this,Y,$t).call(this),W(this,oe,Gt).call(this)),W(this,J,_t).call(this))};this.addCommands({cmd:Ve,undo:We,mustExec:!0})},O=new WeakSet,Zn=function(){if(!i(this,P))return;he(this,P,!1);const ie=Math.ceil(this.thickness*this.parentScale),_e=this.currentPath.slice(-3),ke=_e.map(Ve=>Ve[0]),xe=_e.map(Ve=>Ve[1]);Math.min(...ke)-ie,Math.max(...ke)+ie,Math.min(...xe)-ie,Math.max(...xe)+ie;const{ctx:Fe}=this;Fe.save(),Fe.clearRect(0,0,this.canvas.width,this.canvas.height);for(const Ve of this.bezierPath2D)Fe.stroke(Ve);Fe.stroke(i(this,g)),Fe.restore()},u=new WeakSet,Jn=function(ie,_e,ke,xe,Fe,Ve,We){const Oe=(_e+xe)/2,Ye=(ke+Fe)/2,$e=(xe+Ve)/2,me=(Fe+We)/2;ie.bezierCurveTo(Oe+2*(xe-Oe)/3,Ye+2*(Fe-Ye)/3,$e+2*(xe-$e)/3,me+2*(Fe-me)/3,$e,me)},D=new WeakSet,Qn=function(){const ie=this.currentPath;if(ie.length<=2)return[[ie[0],ie[0],ie.at(-1),ie.at(-1)]];const _e=[];let ke,[xe,Fe]=ie[0];for(ke=1;ke<ie.length-2;ke++){const[L,Q]=ie[ke],[pe,we]=ie[ke+1],Pe=(L+pe)/2,Re=(Q+we)/2,Ne=[xe+2*(L-xe)/3,Fe+2*(Q-Fe)/3],ze=[Pe+2*(L-Pe)/3,Re+2*(Q-Re)/3];_e.push([[xe,Fe],Ne,ze,[Pe,Re]]),[xe,Fe]=[Pe,Re]}const[Ve,We]=ie[ke],[Oe,Ye]=ie[ke+1],$e=[xe+2*(Ve-xe)/3,Fe+2*(We-Fe)/3],me=[Oe+2*(Ve-Oe)/3,Ye+2*(We-Ye)/3];return _e.push([[xe,Fe],$e,me,[Oe,Ye]]),_e},X=new WeakSet,lt=function(){if(this.isEmpty()){W(this,ae,qt).call(this);return}W(this,Z,ki).call(this);const{canvas:ie,ctx:_e}=this;_e.setTransform(1,0,0,1,0,0),_e.clearRect(0,0,ie.width,ie.height),W(this,ae,qt).call(this);for(const ke of this.bezierPath2D)_e.stroke(ke)},z=new WeakSet,Fi=function(ie){this.canvas.removeEventListener("pointerleave",i(this,E)),this.canvas.removeEventListener("pointermove",i(this,T)),this.canvas.removeEventListener("pointerup",i(this,C)),this.canvas.addEventListener("pointerdown",i(this,s)),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",k.noContextMenu)},10),W(this,q,Yn).call(this,ie.offsetX,ie.offsetY),this.addToAnnotationStorage(),this.setInBackground()},Y=new WeakSet,$t=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",f.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(ie=>{var _e;return(_e=this.canvas)==null?void 0:_e.setAttribute("aria-label",ie)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},oe=new WeakSet,Gt=function(){he(this,y,new ResizeObserver(ie=>{const _e=ie[0].contentRect;_e.width&&_e.height&&this.setDimensions(_e.width,_e.height)})),i(this,y).observe(this.div)},Ee=new WeakSet,bt=function(){if(!i(this,x))return;const[ie,_e]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*ie),this.canvas.height=Math.ceil(this.height*_e),W(this,ae,qt).call(this)},ne=new WeakSet,Ni=function(ie,_e){const ke=W(this,Te,Xt).call(this),xe=(ie-ke)/i(this,a),Fe=(_e-ke)/i(this,r);this.scaleFactor=Math.min(xe,Fe)},ae=new WeakSet,qt=function(){const ie=W(this,Te,Xt).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+ie,this.translationY*this.scaleFactor+ie)},be=new WeakSet,es=function(ie){const _e=new Path2D;for(let ke=0,xe=ie.length;ke<xe;ke++){const[Fe,Ve,We,Oe]=ie[ke];ke===0&&_e.moveTo(...Fe),_e.bezierCurveTo(Ve[0],Ve[1],We[0],We[1],Oe[0],Oe[1])}return _e},Le=new WeakSet,Di=function(ie,_e,ke){const[xe,Fe,Ve,We]=_e;switch(ke){case 0:for(let Oe=0,Ye=ie.length;Oe<Ye;Oe+=2)ie[Oe]+=xe,ie[Oe+1]=We-ie[Oe+1];break;case 90:for(let Oe=0,Ye=ie.length;Oe<Ye;Oe+=2){const $e=ie[Oe];ie[Oe]=ie[Oe+1]+xe,ie[Oe+1]=$e+Fe}break;case 180:for(let Oe=0,Ye=ie.length;Oe<Ye;Oe+=2)ie[Oe]=Ve-ie[Oe],ie[Oe+1]+=Fe;break;case 270:for(let Oe=0,Ye=ie.length;Oe<Ye;Oe+=2){const $e=ie[Oe];ie[Oe]=Ve-ie[Oe+1],ie[Oe+1]=We-$e}break;default:throw new Error("Invalid rotation")}return ie},Be=new WeakSet,ts=function(ie,_e,ke){const[xe,Fe,Ve,We]=_e;switch(ke){case 0:for(let Oe=0,Ye=ie.length;Oe<Ye;Oe+=2)ie[Oe]-=xe,ie[Oe+1]=We-ie[Oe+1];break;case 90:for(let Oe=0,Ye=ie.length;Oe<Ye;Oe+=2){const $e=ie[Oe];ie[Oe]=ie[Oe+1]-Fe,ie[Oe+1]=$e-xe}break;case 180:for(let Oe=0,Ye=ie.length;Oe<Ye;Oe+=2)ie[Oe]=Ve-ie[Oe],ie[Oe+1]-=Fe;break;case 270:for(let Oe=0,Ye=ie.length;Oe<Ye;Oe+=2){const $e=ie[Oe];ie[Oe]=We-ie[Oe+1],ie[Oe+1]=Ve-$e}break;default:throw new Error("Invalid rotation")}return ie},He=new WeakSet,is=function(ie,_e,ke,xe){var Ye,$e;const Fe=[],Ve=this.thickness/2,We=ie*_e+Ve,Oe=ie*ke+Ve;for(const me of this.paths){const L=[],Q=[];for(let pe=0,we=me.length;pe<we;pe++){const[Pe,Re,Ne,ze]=me[pe],Ue=ie*Pe[0]+We,tt=ie*Pe[1]+Oe,Xe=ie*Re[0]+We,Ke=ie*Re[1]+Oe,Ze=ie*Ne[0]+We,Qe=ie*Ne[1]+Oe,it=ie*ze[0]+We,nt=ie*ze[1]+Oe;pe===0&&(L.push(Ue,tt),Q.push(Ue,tt)),L.push(Xe,Ke,Ze,Qe,it,nt),Q.push(Xe,Ke),pe===we-1&&Q.push(it,nt)}Fe.push({bezier:W(Ye=ee,Le,Di).call(Ye,L,xe,this.rotation),points:W($e=ee,Le,Di).call($e,Q,xe,this.rotation)})}return Fe},Ge=new WeakSet,Bi=function(){let ie=1/0,_e=-1/0,ke=1/0,xe=-1/0;for(const Fe of this.paths)for(const[Ve,We,Oe,Ye]of Fe){const $e=n.Util.bezierBoundingBox(...Ve,...We,...Oe,...Ye);ie=Math.min(ie,$e[0]),ke=Math.min(ke,$e[1]),_e=Math.max(_e,$e[2]),xe=Math.max(xe,$e[3])}return[ie,ke,_e,xe]},Te=new WeakSet,Xt=function(){return i(this,b)?Math.ceil(this.thickness*this.parentScale):0},J=new WeakSet,_t=function(ie=!1){if(this.isEmpty())return;if(!i(this,b)){W(this,X,lt).call(this);return}const _e=W(this,Ge,Bi).call(this),ke=W(this,Te,Xt).call(this);he(this,a,Math.max(f.AnnotationEditor.MIN_SIZE,_e[2]-_e[0])),he(this,r,Math.max(f.AnnotationEditor.MIN_SIZE,_e[3]-_e[1]));const xe=Math.ceil(ke+i(this,a)*this.scaleFactor),Fe=Math.ceil(ke+i(this,r)*this.scaleFactor),[Ve,We]=this.parentDimensions;this.width=xe/Ve,this.height=Fe/We,this.setAspectRatio(xe,Fe);const Oe=this.translationX,Ye=this.translationY;this.translationX=-_e[0],this.translationY=-_e[1],W(this,Ee,bt).call(this),W(this,X,lt).call(this),he(this,A,xe),he(this,o,Fe),this.setDims(xe,Fe);const $e=ie?ke/this.scaleFactor/2:0;this.translate(Oe-this.translationX-$e,Ye-this.translationY-$e)},H(ee,be),H(ee,Le),H(ee,Be),Je(ee,"_defaultColor",null),Je(ee,"_defaultOpacity",1),Je(ee,"_defaultThickness",1),Je(ee,"_type","ink");let m=ee;t.InkEditor=m},(e,t,l)=>{var m,r,a,T,E,C,s,g,b,P,x,Tt,A,xt,c,Kt,w,Vi,F,ns,G,ss,V,Ui,re,Yt,K,rs;Object.defineProperty(t,"__esModule",{value:!0}),t.StampEditor=void 0;var n=l(1),f=l(4),I=l(6),k=l(29);const se=class se extends f.AnnotationEditor{constructor(q){super({...q,name:"stampEditor"});H(this,x);H(this,A);H(this,c);H(this,w);H(this,F);H(this,G);H(this,V);H(this,re);H(this,K);H(this,m,null);H(this,r,null);H(this,a,null);H(this,T,null);H(this,E,null);H(this,C,null);H(this,s,null);H(this,g,null);H(this,b,!1);H(this,P,!1);he(this,T,q.bitmapUrl),he(this,E,q.bitmapFile)}static initialize(q){f.AnnotationEditor.initialize(q)}static get supportedTypes(){const q=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,n.shadow)(this,"supportedTypes",q.map(R=>`image/${R}`))}static get supportedTypesStr(){return(0,n.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(q){return this.supportedTypes.includes(q)}static paste(q,R){R.pasteEditor(n.AnnotationEditorType.STAMP,{bitmapFile:q.getAsFile()})}remove(){var q,R;i(this,r)&&(he(this,m,null),this._uiManager.imageManager.deleteId(i(this,r)),(q=i(this,C))==null||q.remove(),he(this,C,null),(R=i(this,s))==null||R.disconnect(),he(this,s,null)),super.remove()}rebuild(){if(!this.parent){i(this,r)&&W(this,c,Kt).call(this);return}super.rebuild(),this.div!==null&&(i(this,r)&&W(this,c,Kt).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(i(this,a)||i(this,m)||i(this,T)||i(this,E))}get isResizable(){return!0}render(){if(this.div)return this.div;let q,R;if(this.width&&(q=this.x,R=this.y),super.render(),this.div.hidden=!0,i(this,m)?W(this,w,Vi).call(this):W(this,c,Kt).call(this),this.width){const[O,d]=this.parentDimensions;this.setAt(q*O,R*d,this.width*O,this.height*d)}return this.div}static deserialize(q,R,O){if(q instanceof k.StampAnnotationElement)return null;const d=super.deserialize(q,R,O),{rect:u,bitmapUrl:M,bitmapId:D,isSvg:$,accessibilityData:X}=q;D&&O.imageManager.isValidId(D)?he(d,r,D):he(d,T,M),he(d,b,$);const[B,z]=d.pageDimensions;return d.width=(u[2]-u[0])/B,d.height=(u[3]-u[1])/z,X&&(d.altTextData=X),d}serialize(q=!1,R=null){if(this.isEmpty())return null;const O={annotationType:n.AnnotationEditorType.STAMP,bitmapId:i(this,r),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:i(this,b),structTreeParentId:this._structTreeParentId};if(q)return O.bitmapUrl=W(this,re,Yt).call(this,!0),O.accessibilityData=this.altTextData,O;const{decorative:d,altText:u}=this.altTextData;if(!d&&u&&(O.accessibilityData={type:"Figure",alt:u}),R===null)return O;R.stamps||(R.stamps=new Map);const M=i(this,b)?(O.rect[2]-O.rect[0])*(O.rect[3]-O.rect[1]):null;if(!R.stamps.has(i(this,r)))R.stamps.set(i(this,r),{area:M,serialized:O}),O.bitmap=W(this,re,Yt).call(this,!1);else if(i(this,b)){const D=R.stamps.get(i(this,r));M>D.area&&(D.area=M,D.serialized.bitmap.close(),D.serialized.bitmap=W(this,re,Yt).call(this,!1))}return O}};m=new WeakMap,r=new WeakMap,a=new WeakMap,T=new WeakMap,E=new WeakMap,C=new WeakMap,s=new WeakMap,g=new WeakMap,b=new WeakMap,P=new WeakMap,x=new WeakSet,Tt=function(q,R=!1){if(!q){this.remove();return}he(this,m,q.bitmap),R||(he(this,r,q.id),he(this,b,q.isSvg)),W(this,w,Vi).call(this)},A=new WeakSet,xt=function(){he(this,a,null),this._uiManager.enableWaiting(!1),i(this,C)&&this.div.focus()},c=new WeakSet,Kt=function(){if(i(this,r)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(i(this,r)).then(R=>W(this,x,Tt).call(this,R,!0)).finally(()=>W(this,A,xt).call(this));return}if(i(this,T)){const R=i(this,T);he(this,T,null),this._uiManager.enableWaiting(!0),he(this,a,this._uiManager.imageManager.getFromUrl(R).then(O=>W(this,x,Tt).call(this,O)).finally(()=>W(this,A,xt).call(this)));return}if(i(this,E)){const R=i(this,E);he(this,E,null),this._uiManager.enableWaiting(!0),he(this,a,this._uiManager.imageManager.getFromFile(R).then(O=>W(this,x,Tt).call(this,O)).finally(()=>W(this,A,xt).call(this)));return}const q=document.createElement("input");q.type="file",q.accept=se.supportedTypesStr,he(this,a,new Promise(R=>{q.addEventListener("change",async()=>{if(!q.files||q.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const O=await this._uiManager.imageManager.getFromFile(q.files[0]);W(this,x,Tt).call(this,O)}R()}),q.addEventListener("cancel",()=>{this.remove(),R()})}).finally(()=>W(this,A,xt).call(this))),q.click()},w=new WeakSet,Vi=function(){const{div:q}=this;let{width:R,height:O}=i(this,m);const[d,u]=this.pageDimensions,M=.75;if(this.width)R=this.width*d,O=this.height*u;else if(R>M*d||O>M*u){const B=Math.min(M*d/R,M*u/O);R*=B,O*=B}const[D,$]=this.parentDimensions;this.setDims(R*D/d,O*$/u),this._uiManager.enableWaiting(!1);const X=he(this,C,document.createElement("canvas"));q.append(X),q.hidden=!1,W(this,V,Ui).call(this,R,O),W(this,K,rs).call(this),i(this,P)||(this.parent.addUndoableEditor(this),he(this,P,!0)),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()},F=new WeakSet,ns=function(q,R){var M;const[O,d]=this.parentDimensions;this.width=q/O,this.height=R/d,this.setDims(q,R),(M=this._initialOptions)!=null&&M.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,i(this,g)!==null&&clearTimeout(i(this,g)),he(this,g,setTimeout(()=>{he(this,g,null),W(this,V,Ui).call(this,q,R)},200))},G=new WeakSet,ss=function(q,R){const{width:O,height:d}=i(this,m);let u=O,M=d,D=i(this,m);for(;u>2*q||M>2*R;){const $=u,X=M;u>2*q&&(u=u>=16384?Math.floor(u/2)-1:Math.ceil(u/2)),M>2*R&&(M=M>=16384?Math.floor(M/2)-1:Math.ceil(M/2));const B=new OffscreenCanvas(u,M);B.getContext("2d").drawImage(D,0,0,$,X,0,0,u,M),D=B.transferToImageBitmap()}return D},V=new WeakSet,Ui=function(q,R){q=Math.ceil(q),R=Math.ceil(R);const O=i(this,C);if(!O||O.width===q&&O.height===R)return;O.width=q,O.height=R;const d=i(this,b)?i(this,m):W(this,G,ss).call(this,q,R),u=O.getContext("2d");u.filter=this._uiManager.hcmFilter,u.drawImage(d,0,0,d.width,d.height,0,0,q,R)},re=new WeakSet,Yt=function(q){if(q){if(i(this,b)){const d=this._uiManager.imageManager.getSvgUrl(i(this,r));if(d)return d}const R=document.createElement("canvas");return{width:R.width,height:R.height}=i(this,m),R.getContext("2d").drawImage(i(this,m),0,0),R.toDataURL()}if(i(this,b)){const[R,O]=this.pageDimensions,d=Math.round(this.width*R*I.PixelsPerInch.PDF_TO_CSS_UNITS),u=Math.round(this.height*O*I.PixelsPerInch.PDF_TO_CSS_UNITS),M=new OffscreenCanvas(d,u);return M.getContext("2d").drawImage(i(this,m),0,0,i(this,m).width,i(this,m).height,0,0,d,u),M.transferToImageBitmap()}return structuredClone(i(this,m))},K=new WeakSet,rs=function(){he(this,s,new ResizeObserver(q=>{const R=q[0].contentRect;R.width&&R.height&&W(this,F,ns).call(this,R.width,R.height)})),i(this,s).observe(this.div)},Je(se,"_type","stamp");let _=se;t.StampEditor=_}],__webpack_module_cache__={};function __w_pdfjs_require__(e){var t=__webpack_module_cache__[e];if(t!==void 0)return t.exports;var l=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](l,l.exports,__w_pdfjs_require__),l.exports}var __webpack_exports__={};return(()=>{var e=__webpack_exports__;Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"AbortException",{enumerable:!0,get:function(){return t.AbortException}}),Object.defineProperty(e,"AnnotationEditorLayer",{enumerable:!0,get:function(){return I.AnnotationEditorLayer}}),Object.defineProperty(e,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return t.AnnotationEditorParamsType}}),Object.defineProperty(e,"AnnotationEditorType",{enumerable:!0,get:function(){return t.AnnotationEditorType}}),Object.defineProperty(e,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return k.AnnotationEditorUIManager}}),Object.defineProperty(e,"AnnotationLayer",{enumerable:!0,get:function(){return _.AnnotationLayer}}),Object.defineProperty(e,"AnnotationMode",{enumerable:!0,get:function(){return t.AnnotationMode}}),Object.defineProperty(e,"CMapCompressionType",{enumerable:!0,get:function(){return t.CMapCompressionType}}),Object.defineProperty(e,"DOMSVGFactory",{enumerable:!0,get:function(){return n.DOMSVGFactory}}),Object.defineProperty(e,"FeatureTest",{enumerable:!0,get:function(){return t.FeatureTest}}),Object.defineProperty(e,"GlobalWorkerOptions",{enumerable:!0,get:function(){return m.GlobalWorkerOptions}}),Object.defineProperty(e,"ImageKind",{enumerable:!0,get:function(){return t.ImageKind}}),Object.defineProperty(e,"InvalidPDFException",{enumerable:!0,get:function(){return t.InvalidPDFException}}),Object.defineProperty(e,"MissingPDFException",{enumerable:!0,get:function(){return t.MissingPDFException}}),Object.defineProperty(e,"OPS",{enumerable:!0,get:function(){return t.OPS}}),Object.defineProperty(e,"PDFDataRangeTransport",{enumerable:!0,get:function(){return l.PDFDataRangeTransport}}),Object.defineProperty(e,"PDFDateString",{enumerable:!0,get:function(){return n.PDFDateString}}),Object.defineProperty(e,"PDFWorker",{enumerable:!0,get:function(){return l.PDFWorker}}),Object.defineProperty(e,"PasswordResponses",{enumerable:!0,get:function(){return t.PasswordResponses}}),Object.defineProperty(e,"PermissionFlag",{enumerable:!0,get:function(){return t.PermissionFlag}}),Object.defineProperty(e,"PixelsPerInch",{enumerable:!0,get:function(){return n.PixelsPerInch}}),Object.defineProperty(e,"PromiseCapability",{enumerable:!0,get:function(){return t.PromiseCapability}}),Object.defineProperty(e,"RenderingCancelledException",{enumerable:!0,get:function(){return n.RenderingCancelledException}}),Object.defineProperty(e,"SVGGraphics",{enumerable:!0,get:function(){return l.SVGGraphics}}),Object.defineProperty(e,"UnexpectedResponseException",{enumerable:!0,get:function(){return t.UnexpectedResponseException}}),Object.defineProperty(e,"Util",{enumerable:!0,get:function(){return t.Util}}),Object.defineProperty(e,"VerbosityLevel",{enumerable:!0,get:function(){return t.VerbosityLevel}}),Object.defineProperty(e,"XfaLayer",{enumerable:!0,get:function(){return r.XfaLayer}}),Object.defineProperty(e,"build",{enumerable:!0,get:function(){return l.build}}),Object.defineProperty(e,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return t.createValidAbsoluteUrl}}),Object.defineProperty(e,"getDocument",{enumerable:!0,get:function(){return l.getDocument}}),Object.defineProperty(e,"getFilenameFromUrl",{enumerable:!0,get:function(){return n.getFilenameFromUrl}}),Object.defineProperty(e,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return n.getPdfFilenameFromUrl}}),Object.defineProperty(e,"getXfaPageViewport",{enumerable:!0,get:function(){return n.getXfaPageViewport}}),Object.defineProperty(e,"isDataScheme",{enumerable:!0,get:function(){return n.isDataScheme}}),Object.defineProperty(e,"isPdfFile",{enumerable:!0,get:function(){return n.isPdfFile}}),Object.defineProperty(e,"loadScript",{enumerable:!0,get:function(){return n.loadScript}}),Object.defineProperty(e,"noContextMenu",{enumerable:!0,get:function(){return n.noContextMenu}}),Object.defineProperty(e,"normalizeUnicode",{enumerable:!0,get:function(){return t.normalizeUnicode}}),Object.defineProperty(e,"renderTextLayer",{enumerable:!0,get:function(){return f.renderTextLayer}}),Object.defineProperty(e,"setLayerDimensions",{enumerable:!0,get:function(){return n.setLayerDimensions}}),Object.defineProperty(e,"shadow",{enumerable:!0,get:function(){return t.shadow}}),Object.defineProperty(e,"updateTextLayer",{enumerable:!0,get:function(){return f.updateTextLayer}}),Object.defineProperty(e,"version",{enumerable:!0,get:function(){return l.version}});var t=__w_pdfjs_require__(1),l=__w_pdfjs_require__(2),n=__w_pdfjs_require__(6),f=__w_pdfjs_require__(26),I=__w_pdfjs_require__(27),k=__w_pdfjs_require__(5),_=__w_pdfjs_require__(29),m=__w_pdfjs_require__(14),r=__w_pdfjs_require__(32)})(),__webpack_exports__})())}(pdf)),pdf.exports}(function(e,t){(function(n,f){e.exports=f()})(globalThis,()=>(()=>{var l=[,(k,_,m)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.createViewerApp=A,_.getActiveApp=y,_.getViewerConfiguration=b,_.initManager=x;var r=m(2),a=m(9),T=m(54),E=C(m(55));function C(o){return o&&o.__esModule?o:{default:o}}let s,g=null;function b(o){return{appContainer:o,mainContainer:o.querySelector("[data-dom-id='viewerContainer']"),viewerContainer:o.querySelector("[data-dom-id='viewer']"),toolbar:{container:o.querySelector("[data-dom-id='toolbarViewer']"),numPages:o.querySelector("[data-dom-id='numPages']"),pageNumber:o.querySelector("[data-dom-id='pageNumber']"),scaleSelect:o.querySelector("[data-dom-id='scaleSelect']"),customScaleOption:o.querySelector("[data-dom-id='customScaleOption']"),previous:o.querySelector("[data-dom-id='previous']"),next:o.querySelector("[data-dom-id='next']"),zoomIn:o.querySelector("[data-dom-id='zoomIn']"),zoomOut:o.querySelector("[data-dom-id='zoomOut']"),viewFind:o.querySelector("[data-dom-id='viewFind']"),openFile:o.querySelector("[data-dom-id='openFile']"),print:o.querySelector("[data-dom-id='print']"),editorFreeTextButton:o.querySelector("[data-dom-id='editorFreeText']"),editorFreeTextParamsToolbar:o.querySelector("[data-dom-id='editorFreeTextParamsToolbar']"),editorInkButton:o.querySelector("[data-dom-id='editorInk']"),editorInkParamsToolbar:o.querySelector("[data-dom-id='editorInkParamsToolbar']"),editorStampButton:o.querySelector("[data-dom-id='editorStamp']"),editorStampParamsToolbar:o.querySelector("[data-dom-id='editorStampParamsToolbar']"),download:o.querySelector("[data-dom-id='download']")},secondaryToolbar:{toolbar:o.querySelector("[data-dom-id='secondaryToolbar']"),toggleButton:o.querySelector("[data-dom-id='secondaryToolbarToggle']"),presentationModeButton:o.querySelector("[data-dom-id='presentationMode']"),openFileButton:o.querySelector("[data-dom-id='secondaryOpenFile']"),printButton:o.querySelector("[data-dom-id='secondaryPrint']"),downloadButton:o.querySelector("[data-dom-id='secondaryDownload']"),viewBookmarkButton:o.querySelector("[data-dom-id='viewBookmark']"),firstPageButton:o.querySelector("[data-dom-id='firstPage']"),lastPageButton:o.querySelector("[data-dom-id='lastPage']"),pageRotateCwButton:o.querySelector("[data-dom-id='pageRotateCw']"),pageRotateCcwButton:o.querySelector("[data-dom-id='pageRotateCcw']"),cursorSelectToolButton:o.querySelector("[data-dom-id='cursorSelectTool']"),cursorHandToolButton:o.querySelector("[data-dom-id='cursorHandTool']"),scrollPageButton:o.querySelector("[data-dom-id='scrollPage']"),scrollVerticalButton:o.querySelector("[data-dom-id='scrollVertical']"),scrollHorizontalButton:o.querySelector("[data-dom-id='scrollHorizontal']"),scrollWrappedButton:o.querySelector("[data-dom-id='scrollWrapped']"),spreadNoneButton:o.querySelector("[data-dom-id='spreadNone']"),spreadOddButton:o.querySelector("[data-dom-id='spreadOdd']"),spreadEvenButton:o.querySelector("[data-dom-id='spreadEven']"),documentPropertiesButton:o.querySelector("[data-dom-id='documentProperties']")},sidebar:{outerContainer:o.querySelector("[data-dom-id='outerContainer']"),sidebarContainer:o.querySelector("[data-dom-id='sidebarContainer']"),toggleButton:o.querySelector("[data-dom-id='sidebarToggle']"),resizer:o.querySelector("[data-dom-id='sidebarResizer']"),thumbnailButton:o.querySelector("[data-dom-id='viewThumbnail']"),outlineButton:o.querySelector("[data-dom-id='viewOutline']"),attachmentsButton:o.querySelector("[data-dom-id='viewAttachments']"),layersButton:o.querySelector("[data-dom-id='viewLayers']"),thumbnailView:o.querySelector("[data-dom-id='thumbnailView']"),outlineView:o.querySelector("[data-dom-id='outlineView']"),attachmentsView:o.querySelector("[data-dom-id='attachmentsView']"),layersView:o.querySelector("[data-dom-id='layersView']"),outlineOptionsContainer:o.querySelector("[data-dom-id='outlineOptionsContainer']"),currentOutlineItemButton:o.querySelector("[data-dom-id='currentOutlineItem']")},findBar:{bar:o.querySelector("[data-dom-id='findbar']"),toggleButton:o.querySelector("[data-dom-id='viewFind']"),findField:o.querySelector("[data-dom-id='findInput']"),highlightAllCheckbox:o.querySelector("[data-dom-id='findHighlightAll']"),caseSensitiveCheckbox:o.querySelector("[data-dom-id='findMatchCase']"),matchDiacriticsCheckbox:o.querySelector("[data-dom-id='findMatchDiacritics']"),entireWordCheckbox:o.querySelector("[data-dom-id='findEntireWord']"),findMsg:o.querySelector("[data-dom-id='findMsg']"),findResultsCount:o.querySelector("[data-dom-id='findResultsCount']"),findPreviousButton:o.querySelector("[data-dom-id='findPrevious']"),findNextButton:o.querySelector("[data-dom-id='findNext']")},passwordOverlay:{dialog:o.querySelector("[data-dom-id='passwordDialog']"),label:o.querySelector("[data-dom-id='passwordText']"),input:o.querySelector("[data-dom-id='password']"),submitButton:o.querySelector("[data-dom-id='passwordSubmit']"),cancelButton:o.querySelector("[data-dom-id='passwordCancel']")},documentProperties:{dialog:o.querySelector("[data-dom-id='documentPropertiesDialog']"),closeButton:o.querySelector("[data-dom-id='documentPropertiesClose']"),fields:{fileName:o.querySelector("[data-dom-id='fileNameField']"),fileSize:o.querySelector("[data-dom-id='fileSizeField']"),title:o.querySelector("[data-dom-id='titleField']"),author:o.querySelector("[data-dom-id='authorField']"),subject:o.querySelector("[data-dom-id='subjectField']"),keywords:o.querySelector("[data-dom-id='keywordsField']"),creationDate:o.querySelector("[data-dom-id='creationDateField']"),modificationDate:o.querySelector("[data-dom-id='modificationDateField']"),creator:o.querySelector("[data-dom-id='creatorField']"),producer:o.querySelector("[data-dom-id='producerField']"),version:o.querySelector("[data-dom-id='versionField']"),pageCount:o.querySelector("[data-dom-id='pageCountField']"),pageSize:o.querySelector("[data-dom-id='pageSizeField']"),linearized:o.querySelector("[data-dom-id='linearizedField']")}},altTextDialog:{dialog:o.querySelector("[data-dom-id='altTextDialog']"),optionDescription:o.querySelector("[data-dom-id='descriptionButton']"),optionDecorative:o.querySelector("[data-dom-id='decorativeButton']"),textarea:o.querySelector("[data-dom-id='descriptionTextarea']"),cancelButton:o.querySelector("[data-dom-id='altTextCancel']"),saveButton:o.querySelector("[data-dom-id='altTextSave']")},annotationEditorParams:{editorFreeTextFontSize:o.querySelector("[data-dom-id='editorFreeTextFontSize']"),editorFreeTextColor:o.querySelector("[data-dom-id='editorFreeTextColor']"),editorInkColor:o.querySelector("[data-dom-id='editorInkColor']"),editorInkThickness:o.querySelector("[data-dom-id='editorInkThickness']"),editorInkOpacity:o.querySelector("[data-dom-id='editorInkOpacity']"),editorStampAddImage:o.querySelector("[data-dom-id='editorStampAddImage']")},printContainer:o.querySelector("[data-dom-id='printContainer']"),openFileInput:o.querySelector("[data-dom-id='fileInput']"),debuggerScriptPath:"../pdf.js/web/debugger.js"}}function P(o){const{parent:c=null,resourcePath:S,src:w,disableCORSCheck:v=!1,disableAutoSetTitle:F=!1,appOptions:N={}}=o,G=`${S}/build/pdf.worker.js`,le=a.AppOptions;Object.keys(N).forEach(function(re){le.set(re,N[re])}),le.set("workerSrc",G),le.set("sandboxBundleSrc",`${S}/build/pdf.sandbox.js`),le.set("defaultUrl",w),le.set("disableCORSCheck",v),le.set("disableAutoSetTitle",F),le.set("disablePreferences",!0);const V=`${S}/web/locale/locale.properties`;(0,T.injectLocaleResource)(V);const Z=new r.PDFViewerApplication(le);if(s=Z,c){const re=(0,E.default)();c.appendChild(re);const te=b(c);Z.run(te)}return Z}function x(o){return g||(g={createApp(c){const S=P(c);return this._register(S),S},_register(c){let S=null;const w=function(v){S||(S=window.requestAnimationFrame(()=>{S=null,g.activateApp(v)}))};c.initializedPromise.then(()=>{o.forEach(v=>{c.appConfig.sidebar.outerContainer.addEventListener(v,()=>{w(c)})})})},activateApp(c){s!==c&&(s&&window.removeEventListener("keydown",s.helper.webViewerKeyDown),s=c,window.addEventListener("keydown",s.helper.webViewerKeyDown))}},g)}function y(){return s}function A(o){return x(["mousemove","click","mousedown","touchstart"]).createApp(o)}},(k,_,m)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.PDFViewerApplication=void 0;var r=m(3),a=m(8),T=m(45);class E extends a.ViewerApplication{constructor(s){super(),this.appOptions=s,this.helper=(0,r.createHelper)(this),this.bindServices()}bindServices(){(0,T.bindExternalService)(this),(0,T.bindPrintServiceFactory)(a.PDFPrintServiceFactory)}run(s){const{validateFileURL:g}=this.helper;return super.run(s,g)}bindEvents(){const s=this.appOptions,{eventBus:g,_boundEvents:b}=this;b.beforePrint=this.beforePrint.bind(this),b.afterPrint=this.afterPrint.bind(this);const{webViewerResize:P,webViewerHashchange:x,webViewerPageRendered:y,webViewerUpdateViewarea:A,webViewerPageChanging:o,webViewerScaleChanging:c,webViewerRotationChanging:S,webViewerSidebarViewChanged:w,webViewerPageMode:v,webViewerNamedAction:F,webViewerPresentationModeChanged:N,webViewerPresentationMode:G,webViewerPrint:le,webViewerDownload:V,webViewerSave:Z,webViewerFirstPage:re,webViewerLastPage:te,webViewerNextPage:K,webViewerPreviousPage:ue,webViewerZoomIn:se,webViewerZoomOut:Ce,webViewerZoomReset:Me,webViewerPageNumberChanged:q,webViewerScaleChanged:R,webViewerRotateCw:O,webViewerRotateCcw:d,webViewerOptionalContentConfig:u,webViewerSwitchScrollMode:M,webViewerScrollModeChanged:D,webViewerSwitchSpreadMode:$,webViewerSpreadModeChanged:X,webViewerDocumentProperties:B,webViewerFindFromUrlHash:z,webViewerUpdateFindMatchesCount:j,webViewerUpdateFindControlState:Y,reportPageStatsPDFBug:ce,webViewerFileInputChange:oe,webViewerOpenFile:Se,webViewerSwitchAnnotationEditorMode:Ee,webViewerSwitchAnnotationEditorParams:ye,webViewerAnnotationEditorStatesChanged:ne,webViewerPageRender:fe,webViewerOpenInExternalApp:ae}=this.helper;g._on("resize",P),g._on("hashchange",x),g._on("beforeprint",b.beforePrint),g._on("afterprint",b.afterPrint),g._on("pagerender",fe),g._on("pagerendered",y),g._on("updateviewarea",A),g._on("pagechanging",o),g._on("scalechanging",c),g._on("rotationchanging",S),g._on("sidebarviewchanged",w),g._on("pagemode",v),g._on("namedaction",F),g._on("presentationmodechanged",N),g._on("presentationmode",G),g._on("switchannotationeditormode",Ee),g._on("switchannotationeditorparams",ye),g._on("print",le),g._on("download",V),g._on("openinexternalapp",ae),g._on("firstpage",re),g._on("lastpage",te),g._on("nextpage",K),g._on("previouspage",ue),g._on("zoomin",se),g._on("zoomout",Ce),g._on("zoomreset",Me),g._on("pagenumberchanged",q),g._on("scalechanged",R),g._on("rotatecw",O),g._on("rotateccw",d),g._on("optionalcontentconfig",u),g._on("switchscrollmode",M),g._on("scrollmodechanged",D),g._on("switchspreadmode",$),g._on("spreadmodechanged",X),g._on("documentproperties",B),g._on("findfromurlhash",z),g._on("updatefindmatchescount",j),g._on("updatefindcontrolstate",Y),s.get("pdfBug")&&(b.reportPageStatsPDFBug=ce,g._on("pagerendered",b.reportPageStatsPDFBug),g._on("pagechanging",b.reportPageStatsPDFBug)),g._on("fileinputchange",oe),g._on("openfile",Se)}setTitle(s=this._title){if(this._title=s,this.isViewerEmbedded||this.appOptions.get("disableAutoSetTitle"))return;const g=this._hasAnnotationEditors&&!this.pdfRenderingQueue.printing;document.title=`${g?"* ":""}${s}`}bindWindowEvents(){const{eventBus:s,_boundEvents:g}=this,{webViewerVisibilityChange:b,webViewerWheel:P,webViewerTouchStart:x,webViewerTouchMove:y,webViewerTouchEnd:A,webViewerClick:o,webViewerKeyDown:c,webViewerKeyUp:S,webViewerResolutionChange:w}=this.helper;function v(F=null){F&&w(F);const N=window.matchMedia(`(resolution: ${window.devicePixelRatio||1}dppx)`);N.addEventListener("change",v,{once:!0}),g.removeWindowResolutionChange||(g.removeWindowResolutionChange=function(){N.removeEventListener("change",v),g.removeWindowResolutionChange=null})}v(),g.windowResize=()=>{s.dispatch("resize",{source:window})},g.windowHashChange=()=>{s.dispatch("hashchange",{source:window,hash:document.location.hash.substring(1)})},g.windowBeforePrint=()=>{s.dispatch("beforeprint",{source:window})},g.windowAfterPrint=()=>{s.dispatch("afterprint",{source:window})},g.windowUpdateFromSandbox=F=>{s.dispatch("updatefromsandbox",{source:window,detail:F.detail})},window.addEventListener("visibilitychange",b),window.addEventListener("wheel",P,{passive:!1}),window.addEventListener("touchstart",x,{passive:!1}),window.addEventListener("touchmove",y,{passive:!1}),window.addEventListener("touchend",A,{passive:!1}),window.addEventListener("click",o),window.addEventListener("keydown",c),window.addEventListener("keyup",S),window.addEventListener("resize",g.windowResize),window.addEventListener("hashchange",g.windowHashChange),window.addEventListener("beforeprint",g.windowBeforePrint),window.addEventListener("afterprint",g.windowAfterPrint),window.addEventListener("updatefromsandbox",g.windowUpdateFromSandbox)}unbindEvents(){const{eventBus:s,_boundEvents:g}=this,{webViewerResize:b,webViewerHashchange:P,webViewerPageRendered:x,webViewerUpdateViewarea:y,webViewerPageChanging:A,webViewerScaleChanging:o,webViewerRotationChanging:c,webViewerSidebarViewChanged:S,webViewerPageMode:w,webViewerNamedAction:v,webViewerPresentationModeChanged:F,webViewerPresentationMode:N,webViewerPrint:G,webViewerDownload:le,webViewerSave:V,webViewerFirstPage:Z,webViewerLastPage:re,webViewerNextPage:te,webViewerPreviousPage:K,webViewerZoomIn:ue,webViewerZoomOut:se,webViewerZoomReset:Ce,webViewerPageNumberChanged:Me,webViewerScaleChanged:q,webViewerRotateCw:R,webViewerRotateCcw:O,webViewerOptionalContentConfig:d,webViewerSwitchScrollMode:u,webViewerScrollModeChanged:M,webViewerSwitchSpreadMode:D,webViewerSpreadModeChanged:$,webViewerDocumentProperties:X,webViewerFindFromUrlHash:B,webViewerUpdateFindMatchesCount:z,webViewerUpdateFindControlState:j,reportPageStatsPDFBug:Y,webViewerFileInputChange:ce,webViewerOpenFile:oe,webViewerPageRender:Se,webViewerOpenInExternalApp:Ee}=this.helper;s._off("resize",b),s._off("hashchange",P),s._off("beforeprint",g.beforePrint),s._off("afterprint",g.afterPrint),s._on("pagerender",Se),s._off("pagerendered",x),s._off("updateviewarea",y),s._off("pagechanging",A),s._off("scalechanging",o),s._off("rotationchanging",c),s._off("sidebarviewchanged",S),s._off("pagemode",w),s._off("namedaction",v),s._off("presentationmodechanged",F),s._off("presentationmode",N),s._off("print",G),s._off("download",le),s._off("openinexternalapp",Ee),s._off("firstpage",Z),s._off("lastpage",re),s._off("nextpage",te),s._off("previouspage",K),s._off("zoomin",ue),s._off("zoomout",se),s._off("zoomreset",Ce),s._off("pagenumberchanged",Me),s._off("scalechanged",q),s._off("rotatecw",R),s._off("rotateccw",O),s._off("optionalcontentconfig",d),s._off("switchscrollmode",u),s._off("scrollmodechanged",M),s._off("switchspreadmode",D),s._off("spreadmodechanged",$),s._off("documentproperties",X),s._off("findfromurlhash",B),s._off("updatefindmatchescount",z),s._off("updatefindcontrolstate",j),g.reportPageStatsPDFBug&&(s._off("pagerendered",g.reportPageStatsPDFBug),s._off("pagechanging",g.reportPageStatsPDFBug),g.reportPageStatsPDFBug=null),s._off("fileinputchange",ce),s._off("openfile",oe),g.beforePrint=null,g.afterPrint=null}unbindWindowEvents(){var S;const{_boundEvents:s}=this,{webViewerVisibilityChange:g,webViewerWheel:b,webViewerTouchStart:P,webViewerTouchMove:x,webViewerTouchEnd:y,webViewerClick:A,webViewerKeyDown:o,webViewerKeyUp:c}=this.helper;window.removeEventListener("visibilitychange",g),window.removeEventListener("wheel",b,{passive:!1}),window.removeEventListener("touchstart",P,{passive:!1}),window.removeEventListener("touchmove",x,{passive:!1}),window.removeEventListener("touchend",y,{passive:!1}),window.removeEventListener("click",A),window.removeEventListener("keydown",o),window.removeEventListener("keyup",c),window.removeEventListener("resize",s.windowResize),window.removeEventListener("hashchange",s.windowHashChange),window.removeEventListener("beforeprint",s.windowBeforePrint),window.removeEventListener("afterprint",s.windowAfterPrint),window.removeEventListener("updatefromsandbox",s.windowUpdateFromSandbox),(S=s.removeWindowResolutionChange)==null||S.call(s),s.windowResize=null,s.windowHashChange=null,s.windowBeforePrint=null,s.windowAfterPrint=null,s.windowUpdateFromSandbox=null}_initializeAnnotationStorageCallbacks(s){if(s!==this.pdfDocument)return;const{annotationStorage:g}=s;g.onSetModified=()=>{window.addEventListener("beforeunload",this.helper.beforeUnload),this._annotationStorageModified=!0},g.onResetModified=()=>{window.removeEventListener("beforeunload",this.helper.beforeUnload),delete this._annotationStorageModified},g.onAnnotationEditor=b=>{this._hasAnnotationEditors=!!b,this.setTitle(),b&&this.externalServices.reportTelemetry({type:"editing",data:{type:b}})}}}_.PDFViewerApplication=E},(k,_,m)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.createHelper=C;var r=m(4),a=m(5),T=m(6);const E=1e3;function C(s){const g=s.appOptions,b=["null","http://mozilla.github.io","https://mozilla.github.io"];var P=function(ee){if(ee)try{const ge=new URL(window.location.href).origin||"null";if(b.includes(ge)||g.get("disableCORSCheck"))return;if(new URL(ee,window.location.href).origin!==ge)throw new Error("file origin does not match viewer's")}catch(ge){throw s.l10n.get("loading_error").then(ve=>{s._documentError(ve,{message:ge==null?void 0:ge.message})}),ge}};async function x(){var ee;(ee=a.GlobalWorkerOptions).workerSrc||(ee.workerSrc=g.get("workerSrc")),await(0,a.loadScript)(a.PDFWorker.workerSrc)}async function y(ee){const{debuggerScriptPath:ge}=ee.appConfig,{PDFBug:ve}=await __non_webpack_import__(ge);ee._PDFBug=ve}function A({pageNumber:ee}){var ve,ie;if(!((ve=globalThis.Stats)!=null&&ve.enabled))return;const ge=s.pdfViewer.getPageView(ee-1);globalThis.Stats.add(ee,(ie=ge==null?void 0:ge.pdfPage)==null?void 0:ie.stats)}function o({pageNumber:ee}){var ge;ee===s.page&&((ge=s.toolbar)==null||ge.updateLoadingIndicatorState(!0))}function c({pageNumber:ee,error:ge}){var ve,ie,_e;if(ee===s.page&&((ve=s.toolbar)==null||ve.updateLoadingIndicatorState(!1)),((ie=s.pdfSidebar)==null?void 0:ie.visibleView)===r.SidebarView.THUMBS){const ke=s.pdfViewer.getPageView(ee-1),xe=(_e=s.pdfThumbnailViewer)==null?void 0:_e.getThumbnail(ee-1);ke&&(xe==null||xe.setImage(ke))}ge&&s.l10n.get("rendering_error").then(ke=>{s._otherError(ke,ge)})}function S({mode:ee}){var ve;let ge;switch(ee){case"thumbs":ge=r.SidebarView.THUMBS;break;case"bookmarks":case"outline":ge=r.SidebarView.OUTLINE;break;case"attachments":ge=r.SidebarView.ATTACHMENTS;break;case"layers":ge=r.SidebarView.LAYERS;break;case"none":ge=r.SidebarView.NONE;break;default:console.error('Invalid "pagemode" hash parameter: '+ee);return}(ve=s.pdfSidebar)==null||ve.switchView(ge,!0)}function w(ee){var ge;switch(ee.action){case"GoToPage":(ge=s.appConfig.toolbar)==null||ge.pageNumber.select();break;case"Find":s.supportsIntegratedFind||s==null||s.findBar.toggle();break;case"Print":s.triggerPrinting();break;case"SaveAs":s.downloadOrSave();break}}function v(ee){s.pdfViewer.presentationModeState=ee.state}function F({view:ee}){var ge;s.pdfRenderingQueue.isThumbnailViewEnabled=ee===r.SidebarView.THUMBS,s.isInitialViewSet&&((ge=s.store)==null||ge.set("sidebarView",ee).catch(()=>{}))}function N({location:ee}){var ge;if(s.isInitialViewSet&&((ge=s.store)==null||ge.setMultiple({page:ee.pageNumber,zoom:ee.scale,scrollLeft:ee.left,scrollTop:ee.top,rotation:ee.rotation}).catch(()=>{})),s.appConfig.secondaryToolbar){const ve=s.pdfLinkService.getAnchorUrl(ee.pdfOpenParams);s.appConfig.secondaryToolbar.viewBookmarkButton.href=ve}}function G(ee){var ge;s.isInitialViewSet&&!s.pdfViewer.isInPresentationMode&&((ge=s.store)==null||ge.set("scrollMode",ee.mode).catch(()=>{}))}function le(ee){var ge;s.isInitialViewSet&&!s.pdfViewer.isInPresentationMode&&((ge=s.store)==null||ge.set("spreadMode",ee.mode).catch(()=>{}))}function V(){const{pdfDocument:ee,pdfViewer:ge,pdfRenderingQueue:ve}=s;if(ve.printing&&window.matchMedia("print").matches||!ee)return;const ie=ge.currentScaleValue;(ie==="auto"||ie==="page-fit"||ie==="page-width")&&(ge.currentScaleValue=ie),ge.update()}function Z(ee){var ve;const ge=ee.hash;ge&&(s.isInitialViewSet?(ve=s.pdfHistory)!=null&&ve.popStateInProgress||s.pdfLinkService.setHash(ge):s.initialBookmark=ge)}var re=function(ee){var ve;if((ve=s.pdfViewer)!=null&&ve.isInPresentationMode)return;const ge=ee.fileInput.files[0];s.open({url:URL.createObjectURL(ge),originalUrl:ge.name})},te=function(ee){s.appConfig.openFileInput.click()};function K(){s.requestPresentationMode()}function ue(ee){s.pdfViewer.annotationEditorMode=ee}function se(ee){s.pdfViewer.annotationEditorParams=ee}function Ce(){s.triggerPrinting()}function Me(){s.downloadOrSave()}function q(){s.openInExternalApp()}function R(){s.page=1}function O(){s.page=s.pagesCount}function d(){s.pdfViewer.nextPage()}function u(){s.pdfViewer.previousPage()}function M(){s.zoomIn()}function D(){s.zoomOut()}function $(){s.zoomReset()}function X(ee){var ve;const ge=s.pdfViewer;ee.value!==""&&s.pdfLinkService.goToPage(ee.value),ee.value!==ge.currentPageNumber.toString()&&ee.value!==ge.currentPageLabel&&((ve=s.toolbar)==null||ve.setPageNumber(ge.currentPageNumber,ge.currentPageLabel))}function B(ee){s.pdfViewer.currentScaleValue=ee.value}function z(){s.rotatePages(90)}function j(){s.rotatePages(-90)}function Y(ee){s.pdfViewer.optionalContentConfigPromise=ee.promise}function ce(ee){s.pdfViewer.scrollMode=ee.mode}function oe(ee){s.pdfViewer.spreadMode=ee.mode}function Se(){var ee;(ee=s.pdfDocumentProperties)==null||ee.open()}function Ee(ee){s.eventBus.dispatch("find",{source:ee.source,type:"",query:ee.query,caseSensitive:!1,entireWord:!1,highlightAll:!0,findPrevious:!1,matchDiacritics:!0})}function ye({matchesCount:ee}){s.supportsIntegratedFind?s.externalServices.updateFindMatchesCount(ee):s.findBar.updateResultsCount(ee)}function ne({state:ee,previous:ge,matchesCount:ve,rawQuery:ie}){var _e;s.supportsIntegratedFind?s.externalServices.updateFindControlState({result:ee,findPrevious:ge,matchesCount:ve,rawQuery:ie}):(_e=s.findBar)==null||_e.updateUIState(ee,ge,ve)}function fe(ee){var ge;(ge=s.toolbar)==null||ge.setPageScale(ee.presetValue,ee.scale),s.pdfViewer.update()}function ae(ee){s.pdfThumbnailViewer&&(s.pdfThumbnailViewer.pagesRotation=ee.pagesRotation),s.forceRendering(),s.pdfViewer.currentPageNumber=ee.pageNumber}function de({pageNumber:ee,pageLabel:ge}){var ie,_e,ke,xe,Fe;(ie=s.toolbar)==null||ie.setPageNumber(ee,ge),(_e=s.secondaryToolbar)==null||_e.setPageNumber(ee),((ke=s.pdfSidebar)==null?void 0:ke.visibleView)===r.SidebarView.THUMBS&&((xe=s.pdfThumbnailViewer)==null||xe.scrollThumbnailIntoView(ee));const ve=s.pdfViewer.getPageView(ee-1);(Fe=s.toolbar)==null||Fe.updateLoadingIndicatorState((ve==null?void 0:ve.renderingState)===r.RenderingStates.RUNNING)}function be(ee){s.pdfViewer.refresh()}function Ie(ee){document.visibilityState==="visible"&&De()}let Le=null;function De(){Le&&clearTimeout(Le),Le=setTimeout(function(){Le=null},E)}function Be(ee){const{pdfViewer:ge,supportedMouseWheelZoomModifierKeys:ve,supportsPinchToZoom:ie}=s;if(ge.isInPresentationMode)return;const _e=ee.deltaMode;let ke=Math.exp(-ee.deltaY/100);const xe=!1,Fe=ee.ctrlKey&&!s._isCtrlKeyDown&&_e===WheelEvent.DOM_DELTA_PIXEL&&ee.deltaX===0&&(Math.abs(ke-1)<.05||xe)&&ee.deltaZ===0;if(Fe||ee.ctrlKey&&ve.ctrlKey||ee.metaKey&&ve.metaKey){if(ee.preventDefault(),Le||document.visibilityState==="hidden"||s.overlayManager.active)return;const Ve=ge.currentScale;if(Fe&&ie)if(ke=s._accumulateFactor(Ve,ke,"_wheelUnusedFactor"),ke<1)s.zoomOut(null,ke);else if(ke>1)s.zoomIn(null,ke);else return;else{const We=(0,r.normalizeWheelEventDirection)(ee);let Oe=0;if(_e===WheelEvent.DOM_DELTA_LINE||_e===WheelEvent.DOM_DELTA_PAGE?Math.abs(We)>=1?Oe=Math.sign(We):Oe=s._accumulateTicks(We,"_wheelUnusedTicks"):Oe=s._accumulateTicks(We/30,"_wheelUnusedTicks"),Oe<0)s.zoomOut(-Oe);else if(Oe>0)s.zoomIn(Oe);else return}s._centerAtPos(Ve,ee.clientX,ee.clientY)}else De()}function je(ee){if(s.pdfViewer.isInPresentationMode||ee.touches.length<2)return;if(ee.preventDefault(),ee.touches.length!==2||s.overlayManager.active){s._touchInfo=null;return}let[ge,ve]=ee.touches;ge.identifier>ve.identifier&&([ge,ve]=[ve,ge]),s._touchInfo={touch0X:ge.pageX,touch0Y:ge.pageY,touch1X:ve.pageX,touch1Y:ve.pageY}}function He(ee){if(!s._touchInfo||ee.touches.length!==2)return;const{pdfViewer:ge,_touchInfo:ve,supportsPinchToZoom:ie}=s;let[_e,ke]=ee.touches;_e.identifier>ke.identifier&&([_e,ke]=[ke,_e]);const{pageX:xe,pageY:Fe}=_e,{pageX:Ve,pageY:We}=ke,{touch0X:Oe,touch0Y:Ye,touch1X:$e,touch1Y:me}=ve;if(Math.abs(Oe-xe)<=1&&Math.abs(Ye-Fe)<=1&&Math.abs($e-Ve)<=1&&Math.abs(me-We)<=1)return;if(ve.touch0X=xe,ve.touch0Y=Fe,ve.touch1X=Ve,ve.touch1Y=We,Oe===xe&&Ye===Fe){const we=$e-xe,Pe=me-Fe,Re=Ve-xe,Ne=We-Fe,ze=we*Ne-Pe*Re;if(Math.abs(ze)>.02*Math.hypot(we,Pe)*Math.hypot(Re,Ne))return}else if($e===Ve&&me===We){const we=Oe-Ve,Pe=Ye-We,Re=xe-Ve,Ne=Fe-We,ze=we*Ne-Pe*Re;if(Math.abs(ze)>.02*Math.hypot(we,Pe)*Math.hypot(Re,Ne))return}else{const we=xe-Oe,Pe=Ve-$e,Re=Fe-Ye,Ne=We-me;if(we*Pe+Re*Ne>=0)return}ee.preventDefault();const L=Math.hypot(xe-Ve,Fe-We)||1,Q=Math.hypot(Oe-$e,Ye-me)||1,pe=ge.currentScale;if(ie){const we=s._accumulateFactor(pe,L/Q,"_touchUnusedFactor");if(we<1)s.zoomOut(null,we);else if(we>1)s.zoomIn(null,we);else return}else{const Pe=s._accumulateTicks((L-Q)/30,"_touchUnusedTicks");if(Pe<0)s.zoomOut(-Pe);else if(Pe>0)s.zoomIn(Pe);else return}s._centerAtPos(pe,(xe+Ve)/2,(Fe+We)/2)}function qe(ee){s._touchInfo&&(ee.preventDefault(),s._touchInfo=null,s._touchUnusedTicks=0,s._touchUnusedFactor=1)}function Ge(ee){var ve,ie,_e;if(!((ve=s.secondaryToolbar)!=null&&ve.isOpen))return;const ge=s.appConfig;(s.pdfViewer.containsElement(ee.target)||(ie=ge.toolbar)!=null&&ie.container.contains(ee.target)&&ee.target!==((_e=ge.secondaryToolbar)==null?void 0:_e.toggleButton))&&s.secondaryToolbar.close()}function et(ee){ee.key==="Control"&&(s._isCtrlKeyDown=!1)}function Te(ee){var We,Oe,Ye,$e,me,L;if(s._isCtrlKeyDown=ee.key==="Control",s.overlayManager.active)return;const{eventBus:ge,pdfViewer:ve}=s,ie=ve.isInPresentationMode;let _e=!1,ke=!1;const xe=(ee.ctrlKey?1:0)|(ee.altKey?2:0)|(ee.shiftKey?4:0)|(ee.metaKey?8:0);if(xe===1||xe===8||xe===5||xe===12)switch(ee.keyCode){case 70:!s.supportsIntegratedFind&&!ee.shiftKey&&((We=s.findBar)==null||We.open(),_e=!0);break;case 71:if(!s.supportsIntegratedFind){const{state:Q}=s.findController;if(Q){const pe={source:window,type:"again",findPrevious:xe===5||xe===12};ge.dispatch("find",{...Q,...pe})}_e=!0}break;case 61:case 107:case 187:case 171:s.zoomIn(),_e=!0;break;case 173:case 109:case 189:s.zoomOut(),_e=!0;break;case 48:case 96:ie||(setTimeout(function(){s.zoomReset()}),_e=!1);break;case 38:(ie||s.page>1)&&(s.page=1,_e=!0,ke=!0);break;case 40:(ie||s.page<s.pagesCount)&&(s.page=s.pagesCount,_e=!0,ke=!0);break}if(xe===1||xe===8)switch(ee.keyCode){case 83:ge.dispatch("download",{source:window}),_e=!0;break;case 79:ge.dispatch("openfile",{source:window}),_e=!0;break}if(xe===3||xe===10)switch(ee.keyCode){case 80:s.requestPresentationMode(),_e=!0,s.externalServices.reportTelemetry({type:"buttons",data:{id:"presentationModeKeyboard"}});break;case 71:s.appConfig.toolbar&&(s.appConfig.toolbar.pageNumber.select(),_e=!0);break}if(_e){ke&&!ie&&ve.focus(),ee.preventDefault();return}const Fe=(0,r.getActiveOrFocusedElement)(),Ve=Fe==null?void 0:Fe.tagName.toUpperCase();if(!((Ve==="INPUT"||Ve==="TEXTAREA"||Ve==="SELECT"||Fe!=null&&Fe.isContentEditable)&&ee.keyCode!==27)){if(xe===0){let Q=0,pe=!1;switch(ee.keyCode){case 38:case 33:ve.isVerticalScrollbarEnabled&&(pe=!0),Q=-1;break;case 8:ie||(pe=!0),Q=-1;break;case 37:ve.isHorizontalScrollbarEnabled&&(pe=!0);case 75:case 80:Q=-1;break;case 27:(Oe=s.secondaryToolbar)!=null&&Oe.isOpen&&(s.secondaryToolbar.close(),_e=!0),!s.supportsIntegratedFind&&((Ye=s.findBar)!=null&&Ye.opened)&&(s.findBar.close(),_e=!0);break;case 40:case 34:ve.isVerticalScrollbarEnabled&&(pe=!0),Q=1;break;case 13:case 32:ie||(pe=!0),Q=1;break;case 39:ve.isHorizontalScrollbarEnabled&&(pe=!0);case 74:case 78:Q=1;break;case 36:(ie||s.page>1)&&(s.page=1,_e=!0,ke=!0);break;case 35:(ie||s.page<s.pagesCount)&&(s.page=s.pagesCount,_e=!0,ke=!0);break;case 83:($e=s.pdfCursorTools)==null||$e.switchTool(T.CursorTool.SELECT);break;case 72:(me=s.pdfCursorTools)==null||me.switchTool(T.CursorTool.HAND);break;case 82:s.rotatePages(90);break;case 115:(L=s.pdfSidebar)==null||L.toggle();break}Q!==0&&(!pe||ve.currentScaleValue==="page-fit")&&(Q>0?ve.nextPage():ve.previousPage(),_e=!0)}if(xe===4)switch(ee.keyCode){case 13:case 32:if(!ie&&ve.currentScaleValue!=="page-fit")break;ve.previousPage(),_e=!0;break;case 82:s.rotatePages(-90);break}!_e&&!ie&&(ee.keyCode>=33&&ee.keyCode<=40||ee.keyCode===32&&Ve!=="BUTTON")&&(ke=!0),ke&&!ve.containsElement(Fe)&&ve.focus(),_e&&ee.preventDefault()}}function U(ee){return ee.preventDefault(),ee.returnValue="",!1}function J(ee){s.externalServices.updateEditorStates(ee)}function Ae({details:ee}){s.externalServices.reportTelemetry(ee)}return{validateFileURL:P,loadFakeWorker:x,loadPDFBug:y,reportPageStatsPDFBug:A,webViewerPageRender:o,webViewerPageRendered:c,webViewerPageMode:S,webViewerNamedAction:w,webViewerPresentationModeChanged:v,webViewerSidebarViewChanged:F,webViewerUpdateViewarea:N,webViewerScrollModeChanged:G,webViewerSpreadModeChanged:le,webViewerResize:V,webViewerHashchange:Z,webViewerFileInputChange:re,webViewerOpenFile:te,webViewerPresentationMode:K,webViewerSwitchAnnotationEditorMode:ue,webViewerSwitchAnnotationEditorParams:se,webViewerPrint:Ce,webViewerDownload:Me,webViewerOpenInExternalApp:q,webViewerFirstPage:R,webViewerLastPage:O,webViewerNextPage:d,webViewerPreviousPage:u,webViewerZoomIn:M,webViewerZoomOut:D,webViewerZoomReset:$,webViewerPageNumberChanged:X,webViewerScaleChanged:B,webViewerRotateCw:z,webViewerRotateCcw:j,webViewerOptionalContentConfig:Y,webViewerSwitchScrollMode:ce,webViewerSwitchSpreadMode:oe,webViewerDocumentProperties:Se,webViewerFindFromUrlHash:Ee,webViewerUpdateFindMatchesCount:ye,webViewerUpdateFindControlState:ne,webViewerScaleChanging:fe,webViewerRotationChanging:ae,webViewerPageChanging:de,webViewerResolutionChange:be,webViewerVisibilityChange:Ie,setZoomDisabledTimeout:De,webViewerWheel:Be,webViewerTouchStart:je,webViewerTouchMove:He,webViewerTouchEnd:qe,webViewerClick:Ge,webViewerKeyUp:et,webViewerKeyDown:Te,beforeUnload:U,webViewerAnnotationEditorStatesChanged:J,webViewerReportTelemetry:Ae}}},(k,_)=>{var ce,oe,Se,Ee,ye;Object.defineProperty(_,"__esModule",{value:!0}),_.animationStarted=_.VERTICAL_PADDING=_.UNKNOWN_SCALE=_.TextLayerMode=_.SpreadMode=_.SidebarView=_.ScrollMode=_.SCROLLBAR_PADDING=_.RenderingStates=_.ProgressBar=_.PresentationModeState=_.OutputScale=_.MIN_SCALE=_.MAX_SCALE=_.MAX_AUTO_SCALE=_.DEFAULT_SCALE_VALUE=_.DEFAULT_SCALE_DELTA=_.DEFAULT_SCALE=_.CursorTool=_.AutoPrintRegExp=void 0,_.apiPageLayoutToViewerModes=B,_.apiPageModeToSidebarView=z,_.approximateFraction=re,_.backtrackBeforeAllVisibleElements=ue,_.binarySearchFirstItem=Z,_.docStyle=void 0,_.getActiveOrFocusedElement=X,_.getPageSizeInches=K,_.getVisibleElements=se,_.isPortraitOrientation=d,_.isValidRotation=q,_.isValidScrollMode=R,_.isValidSpreadMode=O,_.normalizeWheelEventDelta=Me,_.normalizeWheelEventDirection=Ce,_.parseQueryString=G,_.removeNullCharacters=V,_.roundToDivide=te,_.scrollIntoView=F,_.toggleCheckedBtn=j,_.toggleExpandedBtn=Y,_.watchScroll=N;const m="auto";_.DEFAULT_SCALE_VALUE=m;const r=1;_.DEFAULT_SCALE=r;const a=1.1;_.DEFAULT_SCALE_DELTA=a;const T=.1;_.MIN_SCALE=T;const E=10;_.MAX_SCALE=E;const C=0;_.UNKNOWN_SCALE=C;const s=1.25;_.MAX_AUTO_SCALE=s;const g=40;_.SCROLLBAR_PADDING=g;const b=5;_.VERTICAL_PADDING=b;const P={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3};_.RenderingStates=P;const x={UNKNOWN:0,NORMAL:1,CHANGING:2,FULLSCREEN:3};_.PresentationModeState=x;const y={UNKNOWN:-1,NONE:0,THUMBS:1,OUTLINE:2,ATTACHMENTS:3,LAYERS:4};_.SidebarView=y;const A={DISABLE:0,ENABLE:1,ENABLE_PERMISSIONS:2};_.TextLayerMode=A;const o={UNKNOWN:-1,VERTICAL:0,HORIZONTAL:1,WRAPPED:2,PAGE:3};_.ScrollMode=o;const c={UNKNOWN:-1,NONE:0,ODD:1,EVEN:2};_.SpreadMode=c;const S={SELECT:0,HAND:1,ZOOM:2};_.CursorTool=S;const w=/\bprint\s*\(/;_.AutoPrintRegExp=w;class v{constructor(){const fe=window.devicePixelRatio||1;this.sx=fe,this.sy=fe}get scaled(){return this.sx!==1||this.sy!==1}}_.OutputScale=v;function F(ne,fe,ae=!1){let de=ne.offsetParent;if(!de){console.error("offsetParent is not set -- cannot scroll");return}let be=ne.offsetTop+ne.clientTop,Ie=ne.offsetLeft+ne.clientLeft;for(;de.clientHeight===de.scrollHeight&&de.clientWidth===de.scrollWidth||ae&&(de.classList.contains("markedContent")||getComputedStyle(de).overflow==="hidden");)if(be+=de.offsetTop,Ie+=de.offsetLeft,de=de.offsetParent,!de)return;fe&&(fe.top!==void 0&&(be+=fe.top),fe.left!==void 0&&(Ie+=fe.left,de.scrollLeft=Ie)),de.scrollTop=be}function N(ne,fe){const ae=function(Ie){be||(be=window.requestAnimationFrame(function(){be=null;const De=ne.scrollLeft,Be=de.lastX;De!==Be&&(de.right=De>Be),de.lastX=De;const je=ne.scrollTop,He=de.lastY;je!==He&&(de.down=je>He),de.lastY=je,fe(de)}))},de={right:!0,down:!0,lastX:ne.scrollLeft,lastY:ne.scrollTop,_eventHandler:ae};let be=null;return ne.addEventListener("scroll",ae,!0),de}function G(ne){const fe=new Map;for(const[ae,de]of new URLSearchParams(ne))fe.set(ae.toLowerCase(),de);return fe}const le=/[\x01-\x1F]/g;function V(ne,fe=!1){return typeof ne!="string"?(console.error("The argument must be a string."),ne):(fe&&(ne=ne.replaceAll(le," ")),ne.replaceAll("\0",""))}function Z(ne,fe,ae=0){let de=ae,be=ne.length-1;if(be<0||!fe(ne[be]))return ne.length;if(fe(ne[de]))return de;for(;de<be;){const Ie=de+be>>1,Le=ne[Ie];fe(Le)?be=Ie:de=Ie+1}return de}function re(ne){if(Math.floor(ne)===ne)return[ne,1];const fe=1/ne,ae=8;if(fe>ae)return[1,ae];if(Math.floor(fe)===fe)return[1,fe];const de=ne>1?fe:ne;let be=0,Ie=1,Le=1,De=1;for(;;){const je=be+Le,He=Ie+De;if(He>ae)break;de<=je/He?(Le=je,De=He):(be=je,Ie=He)}let Be;return de-be/Ie<Le/De-de?Be=de===ne?[be,Ie]:[Ie,be]:Be=de===ne?[Le,De]:[De,Le],Be}function te(ne,fe){const ae=ne%fe;return ae===0?ne:Math.round(ne-ae+fe)}function K({view:ne,userUnit:fe,rotate:ae}){const[de,be,Ie,Le]=ne,De=ae%180!==0,Be=(Ie-de)/72*fe,je=(Le-be)/72*fe;return{width:De?je:Be,height:De?Be:je}}function ue(ne,fe,ae){if(ne<2)return ne;let de=fe[ne].div,be=de.offsetTop+de.clientTop;be>=ae&&(de=fe[ne-1].div,be=de.offsetTop+de.clientTop);for(let Ie=ne-2;Ie>=0&&(de=fe[Ie].div,!(de.offsetTop+de.clientTop+de.clientHeight<=be));--Ie)ne=Ie;return ne}function se({scrollEl:ne,views:fe,sortByVisibility:ae=!1,horizontal:de=!1,rtl:be=!1}){const Ie=ne.scrollTop,Le=Ie+ne.clientHeight,De=ne.scrollLeft,Be=De+ne.clientWidth;function je(ee){const ge=ee.div;return ge.offsetTop+ge.clientTop+ge.clientHeight>Ie}function He(ee){const ge=ee.div,ve=ge.offsetLeft+ge.clientLeft,ie=ve+ge.clientWidth;return be?ve<Be:ie>De}const qe=[],Ge=new Set,et=fe.length;let Te=Z(fe,de?He:je);Te>0&&Te<et&&!de&&(Te=ue(Te,fe,Ie));let U=de?Be:-1;for(let ee=Te;ee<et;ee++){const ge=fe[ee],ve=ge.div,ie=ve.offsetLeft+ve.clientLeft,_e=ve.offsetTop+ve.clientTop,ke=ve.clientWidth,xe=ve.clientHeight,Fe=ie+ke,Ve=_e+xe;if(U===-1)Ve>=Le&&(U=Ve);else if((de?ie:_e)>U)break;if(Ve<=Ie||_e>=Le||Fe<=De||ie>=Be)continue;const We=Math.max(0,Ie-_e)+Math.max(0,Ve-Le),Oe=Math.max(0,De-ie)+Math.max(0,Fe-Be),Ye=(xe-We)/xe,$e=(ke-Oe)/ke,me=Ye*$e*100|0;qe.push({id:ge.id,x:ie,y:_e,view:ge,percent:me,widthPercent:$e*100|0}),Ge.add(ge.id)}const J=qe[0],Ae=qe.at(-1);return ae&&qe.sort(function(ee,ge){const ve=ee.percent-ge.percent;return Math.abs(ve)>.001?-ve:ee.id-ge.id}),{first:J,last:Ae,views:qe,ids:Ge}}function Ce(ne){let fe=Math.hypot(ne.deltaX,ne.deltaY);const ae=Math.atan2(ne.deltaY,ne.deltaX);return-.25*Math.PI<ae&&ae<.75*Math.PI&&(fe=-fe),fe}function Me(ne){const fe=ne.deltaMode;let ae=Ce(ne);const de=30,be=30;return fe===WheelEvent.DOM_DELTA_PIXEL?ae/=de*be:fe===WheelEvent.DOM_DELTA_LINE&&(ae/=be),ae}function q(ne){return Number.isInteger(ne)&&ne%90===0}function R(ne){return Number.isInteger(ne)&&Object.values(o).includes(ne)&&ne!==o.UNKNOWN}function O(ne){return Number.isInteger(ne)&&Object.values(c).includes(ne)&&ne!==c.UNKNOWN}function d(ne){return ne.width<=ne.height}const u=new Promise(function(ne){window.requestAnimationFrame(ne)});_.animationStarted=u;const M=document.documentElement.style;_.docStyle=M;function D(ne,fe,ae){return Math.min(Math.max(ne,fe),ae)}class ${constructor(fe){H(this,ce,null);H(this,oe,null);H(this,Se,0);H(this,Ee,null);H(this,ye,!0);he(this,ce,fe.classList),he(this,Ee,fe.style)}get percent(){return i(this,Se)}set percent(fe){if(he(this,Se,D(fe,0,100)),isNaN(fe)){i(this,ce).add("indeterminate");return}i(this,ce).remove("indeterminate"),i(this,Ee).setProperty("--progressBar-percent",`${i(this,Se)}%`)}setWidth(fe){if(!fe)return;const de=fe.parentNode.offsetWidth-fe.offsetWidth;de>0&&i(this,Ee).setProperty("--progressBar-end-offset",`${de}px`)}setDisableAutoFetch(fe=5e3){isNaN(i(this,Se))||(i(this,oe)&&clearTimeout(i(this,oe)),this.show(),he(this,oe,setTimeout(()=>{he(this,oe,null),this.hide()},fe)))}hide(){i(this,ye)&&(he(this,ye,!1),i(this,ce).add("hidden"))}show(){i(this,ye)||(he(this,ye,!0),i(this,ce).remove("hidden"))}}ce=new WeakMap,oe=new WeakMap,Se=new WeakMap,Ee=new WeakMap,ye=new WeakMap,_.ProgressBar=$;function X(){let ne=document,fe=ne.activeElement||ne.querySelector(":focus");for(;fe!=null&&fe.shadowRoot;)ne=fe.shadowRoot,fe=ne.activeElement||ne.querySelector(":focus");return fe}function B(ne){let fe=o.VERTICAL,ae=c.NONE;switch(ne){case"SinglePage":fe=o.PAGE;break;case"OneColumn":break;case"TwoPageLeft":fe=o.PAGE;case"TwoColumnLeft":ae=c.ODD;break;case"TwoPageRight":fe=o.PAGE;case"TwoColumnRight":ae=c.EVEN;break}return{scrollMode:fe,spreadMode:ae}}function z(ne){switch(ne){case"UseNone":return y.NONE;case"UseThumbs":return y.THUMBS;case"UseOutlines":return y.OUTLINE;case"UseAttachments":return y.ATTACHMENTS;case"UseOC":return y.LAYERS}return y.NONE}function j(ne,fe,ae=null){ne.classList.toggle("toggled",fe),ne.setAttribute("aria-checked",fe),ae==null||ae.classList.toggle("hidden",!fe)}function Y(ne,fe,ae=null){ne.classList.toggle("toggled",fe),ne.setAttribute("aria-expanded",fe),ae==null||ae.classList.toggle("hidden",!fe)}},k=>{let _;typeof window<"u"&&window["pdfjs-dist/build/pdf"]?_=window["pdfjs-dist/build/pdf"]:_=requirePdf(),k.exports=_},(k,_,m)=>{var C,s,g,as;Object.defineProperty(_,"__esModule",{value:!0}),_.PDFCursorTools=void 0;var r=m(5),a=m(4),T=m(7);class E{constructor({container:x,eventBus:y,cursorToolOnLoad:A=a.CursorTool.SELECT}){H(this,g);H(this,C,a.CursorTool.SELECT);H(this,s,null);this.container=x,this.eventBus=y,W(this,g,as).call(this),Promise.resolve().then(()=>{this.switchTool(A)})}get activeTool(){return i(this,C)}switchTool(x){if(i(this,s)!==null||x===i(this,C))return;const y=()=>{switch(i(this,C)){case a.CursorTool.SELECT:break;case a.CursorTool.HAND:this._handTool.deactivate();break;case a.CursorTool.ZOOM:}};switch(x){case a.CursorTool.SELECT:y();break;case a.CursorTool.HAND:y(),this._handTool.activate();break;case a.CursorTool.ZOOM:default:console.error(`switchTool: "${x}" is an unsupported value.`);return}he(this,C,x),this.eventBus.dispatch("cursortoolchanged",{source:this,tool:x})}get _handTool(){return(0,r.shadow)(this,"_handTool",new T.GrabToPan({element:this.container}))}}C=new WeakMap,s=new WeakMap,g=new WeakSet,as=function(){this.eventBus._on("switchcursortool",c=>{this.switchTool(c.tool)});let x=r.AnnotationEditorType.NONE,y=a.PresentationModeState.NORMAL;const A=()=>{const c=i(this,C);this.switchTool(a.CursorTool.SELECT),i(this,s)??he(this,s,c)},o=()=>{const c=i(this,s);c!==null&&x===r.AnnotationEditorType.NONE&&y===a.PresentationModeState.NORMAL&&(he(this,s,null),this.switchTool(c))};this.eventBus._on("secondarytoolbarreset",c=>{i(this,s)!==null&&(x=r.AnnotationEditorType.NONE,y=a.PresentationModeState.NORMAL,o())}),this.eventBus._on("annotationeditormodechanged",({mode:c})=>{x=c,c===r.AnnotationEditorType.NONE?o():A()}),this.eventBus._on("presentationmodechanged",({state:c})=>{y=c,c===a.PresentationModeState.NORMAL?o():c===a.PresentationModeState.FULLSCREEN&&A()})},_.PDFCursorTools=E},(k,_)=>{var a,os,E,ls,s,cs;Object.defineProperty(_,"__esModule",{value:!0}),_.GrabToPan=void 0;const m="grab-to-pan-grab";class r{constructor({element:P}){H(this,a);H(this,E);H(this,s);this.element=P,this.document=P.ownerDocument,this.activate=this.activate.bind(this),this.deactivate=this.deactivate.bind(this),this.toggle=this.toggle.bind(this),this._onMouseDown=W(this,a,os).bind(this),this._onMouseMove=W(this,E,ls).bind(this),this._endPan=W(this,s,cs).bind(this);const x=this.overlay=document.createElement("div");x.className="grab-to-pan-grabbing"}activate(){this.active||(this.active=!0,this.element.addEventListener("mousedown",this._onMouseDown,!0),this.element.classList.add(m))}deactivate(){this.active&&(this.active=!1,this.element.removeEventListener("mousedown",this._onMouseDown,!0),this._endPan(),this.element.classList.remove(m))}toggle(){this.active?this.deactivate():this.activate()}ignoreTarget(P){return P.matches("a[href], a[href] *, input, textarea, button, button *, select, option")}}a=new WeakSet,os=function(P){if(P.button!==0||this.ignoreTarget(P.target))return;if(P.originalTarget)try{P.originalTarget.tagName}catch{return}this.scrollLeftStart=this.element.scrollLeft,this.scrollTopStart=this.element.scrollTop,this.clientXStart=P.clientX,this.clientYStart=P.clientY,this.document.addEventListener("mousemove",this._onMouseMove,!0),this.document.addEventListener("mouseup",this._endPan,!0),this.element.addEventListener("scroll",this._endPan,!0),P.preventDefault(),P.stopPropagation();const x=document.activeElement;x&&!x.contains(P.target)&&x.blur()},E=new WeakSet,ls=function(P){if(this.element.removeEventListener("scroll",this._endPan,!0),!(P.buttons&1)){this._endPan();return}const x=P.clientX-this.clientXStart,y=P.clientY-this.clientYStart;this.element.scrollTo({top:this.scrollTopStart-y,left:this.scrollLeftStart-x,behavior:"instant"}),this.overlay.parentNode||document.body.append(this.overlay)},s=new WeakSet,cs=function(){this.element.removeEventListener("scroll",this._endPan,!0),this.document.removeEventListener("mousemove",this._onMouseMove,!0),this.document.removeEventListener("mouseup",this._endPan,!0),this.overlay.remove()},_.GrabToPan=r},(k,_,m)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.ViewerApplication=_.PDFPrintServiceFactory=void 0;var r=m(4),a=m(5),T=m(9),E=m(10),C=m(11),s=m(12),g=m(13),b=m(14),P=m(15),x=m(16),y=m(6),A=m(18),o=m(19),c=m(20),S=m(22),w=m(23),v=m(24),F=m(25),N=m(26),G=m(27),le=m(28),V=m(29),Z=m(31),re=m(41),te=m(42),K=m(43),ue=m(44);const se=1e4,Ce={UNKNOWN:-1,PREVIOUS:0,INITIAL:1},Me={AUTOMATIC:0,LIGHT:1,DARK:2},q={instance:{supportsPrinting:!1,createPrintService(){throw new Error("Not implemented: createPrintService")}}};_.PDFPrintServiceFactory=q;class R{constructor(){Je(this,"initialBookmark",document.location.hash.substring(1));Je(this,"_initializedCapability",new a.PromiseCapability);Je(this,"appConfig",null);Je(this,"pdfDocument",null);Je(this,"pdfLoadingTask",null);Je(this,"printService",null);Je(this,"pdfViewer",null);Je(this,"pdfThumbnailViewer",null);Je(this,"pdfRenderingQueue",null);Je(this,"pdfPresentationMode",null);Je(this,"pdfDocumentProperties",null);Je(this,"pdfLinkService",null);Je(this,"pdfHistory",null);Je(this,"pdfSidebar",null);Je(this,"pdfOutlineViewer",null);Je(this,"pdfAttachmentViewer",null);Je(this,"pdfLayerViewer",null);Je(this,"pdfCursorTools",null);Je(this,"pdfScriptingManager",null);Je(this,"store",null);Je(this,"downloadManager",null);Je(this,"overlayManager",null);Je(this,"preferences",null);Je(this,"toolbar",null);Je(this,"secondaryToolbar",null);Je(this,"eventBus",null);Je(this,"l10n",null);Je(this,"annotationEditorParams",null);Je(this,"isInitialViewSet",!1);Je(this,"downloadComplete",!1);Je(this,"isViewerEmbedded",window.parent!==window);Je(this,"url","");Je(this,"baseUrl","");Je(this,"_downloadUrl","");Je(this,"externalServices",ue.DefaultExternalServices);Je(this,"_boundEvents",Object.create(null));Je(this,"documentInfo",null);Je(this,"metadata",null);Je(this,"_contentDispositionFilename",null);Je(this,"_contentLength",null);Je(this,"_saveInProgress",!1);Je(this,"_wheelUnusedTicks",0);Je(this,"_wheelUnusedFactor",1);Je(this,"_touchUnusedTicks",0);Je(this,"_touchUnusedFactor",1);Je(this,"_PDFBug",null);Je(this,"_hasAnnotationEditors",!1);Je(this,"_title",document.title);Je(this,"_printAnnotationStoragePromise",null);Je(this,"_touchInfo",null);Je(this,"_isCtrlKeyDown",!1);Je(this,"_nimbusDataPromise",null)}async initialize(d){const{appOptions:u}=this;this.preferences=this.externalServices.createPreferences(),this.appConfig=d,await this._initializeOptions(),this._forceCssTheme(),await this._initializeL10n(),this.isViewerEmbedded&&u.get("externalLinkTarget")===C.LinkTarget.NONE&&u.set("externalLinkTarget",C.LinkTarget.TOP),await this._initializeViewerComponents(),this.bindEvents(),this.bindWindowEvents();const M=d.appContainer||document.documentElement;this.l10n.translate(M).then(()=>{this.eventBus.dispatch("localized",{source:this})}),this._initializedCapability.resolve()}async _initializeOptions(){const{appOptions:d}=this;if(d.get("disablePreferences")){d.get("pdfBugEnabled")&&await this._parseHashParams();return}d._hasUserOptions()&&console.warn('_initializeOptions: The Preferences may override manually set AppOptions; please use the "disablePreferences"-option in order to prevent that.');try{d.setAll(await this.preferences.getAll())}catch(u){console.error(`_initializeOptions: "${u.message}".`)}d.get("pdfBugEnabled")&&await this._parseHashParams()}async _parseHashParams(){const{appOptions:d}=this,u=document.location.hash.substring(1);if(!u)return;const{mainContainer:M,viewerContainer:D}=this.appConfig,$=(0,r.parseQueryString)(u);if($.get("disableworker")==="true")try{await loadFakeWorker()}catch(X){console.error(`_parseHashParams: "${X.message}".`)}if($.has("disablerange")&&d.set("disableRange",$.get("disablerange")==="true"),$.has("disablestream")&&d.set("disableStream",$.get("disablestream")==="true"),$.has("disableautofetch")&&d.set("disableAutoFetch",$.get("disableautofetch")==="true"),$.has("disablefontface")&&d.set("disableFontFace",$.get("disablefontface")==="true"),$.has("disablehistory")&&d.set("disableHistory",$.get("disablehistory")==="true"),$.has("verbosity")&&d.set("verbosity",$.get("verbosity")|0),$.has("textlayer"))switch($.get("textlayer")){case"off":d.set("textLayerMode",r.TextLayerMode.DISABLE);break;case"visible":case"shadow":case"hover":D.classList.add(`textLayer-${$.get("textlayer")}`);try{await loadPDFBug(this),this._PDFBug.loadCSS()}catch(X){console.error(`_parseHashParams: "${X.message}".`)}break}if($.has("pdfbug")){d.set("pdfBug",!0),d.set("fontExtraProperties",!0);const X=$.get("pdfbug").split(",");try{await loadPDFBug(this),this._PDFBug.init(M,X)}catch(B){console.error(`_parseHashParams: "${B.message}".`)}}$.has("locale")&&d.set("locale",$.get("locale"))}async _initializeL10n(){const{appOptions:d}=this;this.l10n=this.externalServices.createL10n({locale:d.get("locale")});const u=await this.l10n.getDirection();document.getElementsByTagName("html")[0].dir=u}_forceCssTheme(){var M;const{appOptions:d}=this,u=d.get("viewerCssTheme");if(!(u===Me.AUTOMATIC||!Object.values(Me).includes(u)))try{const D=document.styleSheets[0],$=(D==null?void 0:D.cssRules)||[];for(let X=0,B=$.length;X<B;X++){const z=$[X];if(z instanceof CSSMediaRule&&((M=z.media)==null?void 0:M[0])==="(prefers-color-scheme: dark)"){if(u===Me.LIGHT){D.deleteRule(X);return}const j=/^@media \(prefers-color-scheme: dark\) {\n\s*([\w\s-.,:;/\\{}()]+)\n}$/.exec(z.cssText);j!=null&&j[1]&&(D.deleteRule(X),D.insertRule(j[1],X));return}}}catch(D){console.error(`_forceCssTheme: "${D==null?void 0:D.message}".`)}}async _initializeViewerComponents(){var ae,de,be,Ie,Le,De,Be,je,He;const{appOptions:d}=this,{appConfig:u,externalServices:M,l10n:D}=this,$=M.isInAutomation?new E.AutomationEventBus:new E.EventBus;this.eventBus=$,this.overlayManager=new b.OverlayManager;const X=new N.PDFRenderingQueue;X.onIdle=this._cleanup.bind(this),this.pdfRenderingQueue=X;const B=new C.PDFLinkService({eventBus:$,externalLinkTarget:d.get("externalLinkTarget"),externalLinkRel:d.get("externalLinkRel"),ignoreDestinationZoom:d.get("ignoreDestinationZoom")});this.pdfLinkService=B;const z=M.createDownloadManager();this.downloadManager=z;const j=new c.PDFFindController({linkService:B,eventBus:$,updateMatchesCountOnProgress:!0});this.findController=j;const Y=new G.PDFScriptingManager({eventBus:$,sandboxBundleSrc:d.get("sandboxBundleSrc"),externalServices:M,docProperties:this._scriptingDocProperties.bind(this)});this.pdfScriptingManager=Y;const ce=u.mainContainer,oe=u.viewerContainer,Se=d.get("annotationEditorMode"),Ee=d.get("isOffscreenCanvasSupported")&&a.FeatureTest.isOffscreenCanvasSupported,ye=d.get("forcePageColors")||window.matchMedia("(forced-colors: active)").matches?{background:d.get("pageColorsBackground"),foreground:d.get("pageColorsForeground")}:null,ne=u.altTextDialog?new s.AltTextManager(u.altTextDialog,ce,this.overlayManager,$):null,fe=new Z.PDFViewer({container:ce,viewer:oe,eventBus:$,renderingQueue:X,linkService:B,downloadManager:z,altTextManager:ne,findController:j,scriptingManager:d.get("enableScripting")&&Y,l10n:D,textLayerMode:d.get("textLayerMode"),annotationMode:d.get("annotationMode"),annotationEditorMode:Se,imageResourcesPath:d.get("imageResourcesPath"),enablePrintAutoRotate:d.get("enablePrintAutoRotate"),isOffscreenCanvasSupported:Ee,maxCanvasPixels:d.get("maxCanvasPixels"),enablePermissions:d.get("enablePermissions"),pageColors:ye});if(this.pdfViewer=fe,X.setViewer(fe),B.setViewer(fe),Y.setViewer(fe),(ae=u.sidebar)!=null&&ae.thumbnailView&&(this.pdfThumbnailViewer=new V.PDFThumbnailViewer({container:u.sidebar.thumbnailView,eventBus:$,renderingQueue:X,linkService:B,l10n:D,pageColors:ye}),X.setThumbnailViewer(this.pdfThumbnailViewer)),!this.isViewerEmbedded&&!d.get("disableHistory")&&(this.pdfHistory=new S.PDFHistory({linkService:B,eventBus:$}),B.setHistory(this.pdfHistory)),!this.supportsIntegratedFind&&u.findBar&&(this.findBar=new o.PDFFindBar(u.findBar,$,D)),u.annotationEditorParams)if(Se!==a.AnnotationEditorType.DISABLE)d.get("enableStampEditor")&&Ee&&((be=(de=u.toolbar)==null?void 0:de.editorStampButton)==null||be.classList.remove("hidden")),this.annotationEditorParams=new g.AnnotationEditorParams(u.annotationEditorParams,$);else for(const qe of["editorModeButtons","editorModeSeparator"])(Ie=document.getElementById(qe))==null||Ie.classList.add("hidden");u.documentProperties&&(this.pdfDocumentProperties=new A.PDFDocumentProperties(u.documentProperties,this.overlayManager,$,D,()=>this._docFilename)),(Le=u.secondaryToolbar)!=null&&Le.cursorHandToolButton&&(this.pdfCursorTools=new y.PDFCursorTools({container:ce,eventBus:$,cursorToolOnLoad:d.get("cursorToolOnLoad")})),u.toolbar&&(this.toolbar=new te.Toolbar(u.toolbar,$,D)),u.secondaryToolbar&&(this.secondaryToolbar=new re.SecondaryToolbar(u.secondaryToolbar,$)),this.supportsFullscreen&&((De=u.secondaryToolbar)!=null&&De.presentationModeButton)&&(this.pdfPresentationMode=new F.PDFPresentationMode({container:ce,pdfViewer:fe,eventBus:$})),u.passwordOverlay&&(this.passwordPrompt=new P.PasswordPrompt(u.passwordOverlay,this.overlayManager,D,this.isViewerEmbedded)),(Be=u.sidebar)!=null&&Be.outlineView&&(this.pdfOutlineViewer=new v.PDFOutlineViewer({container:u.sidebar.outlineView,eventBus:$,linkService:B,downloadManager:z})),(je=u.sidebar)!=null&&je.attachmentsView&&(this.pdfAttachmentViewer=new x.PDFAttachmentViewer({container:u.sidebar.attachmentsView,eventBus:$,downloadManager:z})),(He=u.sidebar)!=null&&He.layersView&&(this.pdfLayerViewer=new w.PDFLayerViewer({container:u.sidebar.layersView,eventBus:$,l10n:D})),u.sidebar&&(this.pdfSidebar=new le.PDFSidebar({elements:u.sidebar,eventBus:$,l10n:D}),this.pdfSidebar.onToggled=this.forceRendering.bind(this),this.pdfSidebar.onUpdateThumbnails=()=>{var qe;for(const Ge of fe.getCachedPageViews())Ge.renderingState===r.RenderingStates.FINISHED&&((qe=this.pdfThumbnailViewer.getThumbnail(Ge.id-1))==null||qe.setImage(Ge));this.pdfThumbnailViewer.scrollThumbnailIntoView(fe.currentPageNumber)})}async run(d,u){var Y,ce,oe,Se,Ee,ye;const{appOptions:M}=this;await this.initialize(d);const{appConfig:D,eventBus:$}=this;let X;const B=document.location.search.substring(1);X=(0,r.parseQueryString)(B).get("file")??M.get("defaultUrl"),u(X);const j=D.openFileInput;j.value=null,j.addEventListener("change",function(ne){const{files:fe}=ne.target;!fe||fe.length===0||$.dispatch("fileinputchange",{source:this,fileInput:ne.target})}),D.mainContainer.addEventListener("dragover",function(ne){ne.preventDefault(),ne.dataTransfer.dropEffect=ne.dataTransfer.effectAllowed==="copy"?"copy":"move"}),D.mainContainer.addEventListener("drop",function(ne){ne.preventDefault();const{files:fe}=ne.dataTransfer;!fe||fe.length===0||$.dispatch("fileinputchange",{source:this,fileInput:ne.dataTransfer})}),this.supportsDocumentFonts||(M.set("disableFontFace",!0),this.l10n.get("web_fonts_disabled").then(ne=>{console.warn(ne)})),this.supportsPrinting||((ce=(Y=D.toolbar)==null?void 0:Y.print)==null||ce.classList.add("hidden"),(oe=D.secondaryToolbar)==null||oe.printButton.classList.add("hidden")),this.supportsFullscreen||(Se=D.secondaryToolbar)==null||Se.presentationModeButton.classList.add("hidden"),this.supportsIntegratedFind&&((ye=(Ee=D.toolbar)==null?void 0:Ee.viewFind)==null||ye.classList.add("hidden")),D.mainContainer.addEventListener("transitionend",function(ne){ne.target===this&&$.dispatch("resize",{source:this})},!0),X?this.open({url:X}):this._hideViewBookmark()}get initialized(){return this._initializedCapability.settled}get initializedPromise(){return this._initializedCapability.promise}zoomIn(d,u){const{appOptions:M}=this;this.pdfViewer.isInPresentationMode||this.pdfViewer.increaseScale({drawingDelay:M.get("defaultZoomDelay"),steps:d,scaleFactor:u})}zoomOut(d,u){const{appOptions:M}=this;this.pdfViewer.isInPresentationMode||this.pdfViewer.decreaseScale({drawingDelay:M.get("defaultZoomDelay"),steps:d,scaleFactor:u})}zoomReset(){this.pdfViewer.isInPresentationMode||(this.pdfViewer.currentScaleValue=r.DEFAULT_SCALE_VALUE)}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return this.pdfViewer.currentPageNumber}set page(d){this.pdfViewer.currentPageNumber=d}get supportsPrinting(){return q.instance.supportsPrinting}get supportsFullscreen(){return(0,a.shadow)(this,"supportsFullscreen",document.fullscreenEnabled)}get supportsPinchToZoom(){return this.externalServices.supportsPinchToZoom}get supportsIntegratedFind(){return this.externalServices.supportsIntegratedFind}get supportsDocumentFonts(){return this.externalServices.supportsDocumentFonts}get loadingBar(){const d=document.getElementById("loadingBar"),u=d?new r.ProgressBar(d):null;return(0,a.shadow)(this,"loadingBar",u)}get supportedMouseWheelZoomModifierKeys(){return this.externalServices.supportedMouseWheelZoomModifierKeys}initPassiveLoading(d){throw new Error("Not implemented: initPassiveLoading")}setTitleUsingUrl(d="",u=null){this.url=d,this.baseUrl=d.split("#")[0],u&&(this._downloadUrl=u===d?this.baseUrl:u.split("#")[0]),(0,a.isDataScheme)(d)&&this._hideViewBookmark();let M=(0,a.getPdfFilenameFromUrl)(d,"");if(!M)try{M=decodeURIComponent((0,a.getFilenameFromUrl)(d))||d}catch{M=d}this.setTitle(M)}setTitle(d=this._title){if(this._title=d,this.isViewerEmbedded)return;const u=this._hasAnnotationEditors&&!this.pdfRenderingQueue.printing;document.title=`${u?"* ":""}${d}`}get _docFilename(){return this._contentDispositionFilename||(0,a.getPdfFilenameFromUrl)(this.url)}_hideViewBookmark(){var u;const{secondaryToolbar:d}=this.appConfig;d==null||d.viewBookmarkButton.classList.add("hidden"),d!=null&&d.presentationModeButton.classList.contains("hidden")&&((u=document.getElementById("viewBookmarkSeparator"))==null||u.classList.add("hidden"))}async close(){var u,M,D,$,X,B,z,j,Y,ce,oe,Se;if(this._unblockDocumentLoadEvent(),this._hideViewBookmark(),!this.pdfLoadingTask)return;if(((u=this.pdfDocument)==null?void 0:u.annotationStorage.size)>0&&this._annotationStorageModified)try{await this.save()}catch{}const d=[];d.push(this.pdfLoadingTask.destroy()),this.pdfLoadingTask=null,this.pdfDocument&&(this.pdfDocument=null,(M=this.pdfThumbnailViewer)==null||M.setDocument(null),this.pdfViewer.setDocument(null),this.pdfLinkService.setDocument(null),(D=this.pdfDocumentProperties)==null||D.setDocument(null)),this.pdfLinkService.externalLinkEnabled=!0,this.store=null,this.isInitialViewSet=!1,this.downloadComplete=!1,this.url="",this.baseUrl="",this._downloadUrl="",this.documentInfo=null,this.metadata=null,this._contentDispositionFilename=null,this._contentLength=null,this._saveInProgress=!1,this._hasAnnotationEditors=!1,d.push(this.pdfScriptingManager.destroyPromise,this.passwordPrompt.close()),this.setTitle(),($=this.pdfSidebar)==null||$.reset(),(X=this.pdfOutlineViewer)==null||X.reset(),(B=this.pdfAttachmentViewer)==null||B.reset(),(z=this.pdfLayerViewer)==null||z.reset(),(j=this.pdfHistory)==null||j.reset(),(Y=this.findBar)==null||Y.reset(),(ce=this.toolbar)==null||ce.reset(),(oe=this.secondaryToolbar)==null||oe.reset(),(Se=this._PDFBug)==null||Se.cleanup(),await Promise.all(d)}async open(d){const{appOptions:u}=this;let M=!1;typeof d=="string"?(d={url:d},M=!0):d!=null&&d.byteLength&&(d={data:d},M=!0),M&&console.error("The `PDFViewerApplication.open` signature was updated, please use an object instead."),this.pdfLoadingTask&&await this.close();const D=u.getAll(T.OptionKind.WORKER);Object.assign(a.GlobalWorkerOptions,D),d.url&&this.setTitleUsingUrl(d.originalUrl||d.url,d.url);const $=u.getAll(T.OptionKind.API),X={canvasMaxAreaInBytes:this.externalServices.canvasMaxAreaInBytes,...$,...d},B=(0,a.getDocument)(X);return this.pdfLoadingTask=B,B.onPassword=(z,j)=>{this.isViewerEmbedded&&this._unblockDocumentLoadEvent(),this.pdfLinkService.externalLinkEnabled=!1,this.passwordPrompt.setUpdateCallback(z,j),this.passwordPrompt.open()},B.onProgress=({loaded:z,total:j})=>{this.progress(z/j)},B.promise.then(z=>{this.load(z)},z=>{if(B!==this.pdfLoadingTask)return;let j="loading_error";return z instanceof a.InvalidPDFException?j="invalid_file_error":z instanceof a.MissingPDFException?j="missing_file_error":z instanceof a.UnexpectedResponseException&&(j="unexpected_response_error"),this.l10n.get(j).then(Y=>{throw this._documentError(Y,{message:z==null?void 0:z.message}),z})})}_ensureDownloadComplete(){if(!(this.pdfDocument&&this.downloadComplete))throw new Error("PDF document not downloaded.")}async download(d={}){const u=this._downloadUrl,M=this._docFilename;try{this._ensureDownloadComplete();const D=await this.pdfDocument.getData(),$=new Blob([D],{type:"application/pdf"});await this.downloadManager.download($,u,M,d)}catch{await this.downloadManager.downloadUrl(u,M,d)}}async save(d={}){if(this._saveInProgress)return;this._saveInProgress=!0,await this.pdfScriptingManager.dispatchWillSave();const u=this._downloadUrl,M=this._docFilename;try{this._ensureDownloadComplete();const D=await this.pdfDocument.saveDocument(),$=new Blob([D],{type:"application/pdf"});await this.downloadManager.download($,u,M,d)}catch(D){console.error(`Error when saving the document: ${D.message}`),await this.download(d)}finally{await this.pdfScriptingManager.dispatchDidSave(),this._saveInProgress=!1}this._hasAnnotationEditors&&this.externalServices.reportTelemetry({type:"editing",data:{type:"save"}})}downloadOrSave(d={}){var u;((u=this.pdfDocument)==null?void 0:u.annotationStorage.size)>0?this.save(d):this.download(d)}openInExternalApp(){this.downloadOrSave({openInExternalApp:!0})}_documentError(d,u=null){this._unblockDocumentLoadEvent(),this._otherError(d,u),this.eventBus.dispatch("documenterror",{source:this,message:d,reason:(u==null?void 0:u.message)??null})}_otherError(d,u=null){const M=[`PDF.js v${a.version||"?"} (build: ${a.build||"?"})`];u&&(M.push(`Message: ${u.message}`),u.stack?M.push(`Stack: ${u.stack}`):(u.filename&&M.push(`File: ${u.filename}`),u.lineNumber&&M.push(`Line: ${u.lineNumber}`))),console.error(`${d}

${M.join(`
`)}`)}progress(d){var D;const{appOptions:u}=this;if(!this.loadingBar||this.downloadComplete)return;const M=Math.round(d*100);M<=this.loadingBar.percent||(this.loadingBar.percent=M,(((D=this.pdfDocument)==null?void 0:D.loadingParams.disableAutoFetch)??u.get("disableAutoFetch"))&&this.loadingBar.setDisableAutoFetch())}load(d){var ce,oe,Se,Ee;const{appOptions:u}=this;this.pdfDocument=d,d.getDownloadInfo().then(({length:ye})=>{var ne;this._contentLength=ye,this.downloadComplete=!0,(ne=this.loadingBar)==null||ne.hide(),B.then(()=>{this.eventBus.dispatch("documentloaded",{source:this})})});const M=d.getPageLayout().catch(()=>{}),D=d.getPageMode().catch(()=>{}),$=d.getOpenAction().catch(()=>{});(ce=this.toolbar)==null||ce.setPagesCount(d.numPages,!1),(oe=this.secondaryToolbar)==null||oe.setPagesCount(d.numPages),this.pdfLinkService.setDocument(d),(Se=this.pdfDocumentProperties)==null||Se.setDocument(d);const X=this.pdfViewer;X.setDocument(d);const{firstPagePromise:B,onePageRendered:z,pagesPromise:j}=X;(Ee=this.pdfThumbnailViewer)==null||Ee.setDocument(d);const Y=(this.store=new K.ViewHistory(d.fingerprints[0])).getMultiple({page:null,zoom:r.DEFAULT_SCALE_VALUE,scrollLeft:"0",scrollTop:"0",rotation:null,sidebarView:r.SidebarView.UNKNOWN,scrollMode:r.ScrollMode.UNKNOWN,spreadMode:r.SpreadMode.UNKNOWN}).catch(()=>{});B.then(ye=>{var ne;(ne=this.loadingBar)==null||ne.setWidth(this.appConfig.viewerContainer),this._initializeAnnotationStorageCallbacks(d),Promise.all([r.animationStarted,Y,M,D,$]).then(async([fe,ae,de,be,Ie])=>{const Le=u.get("viewOnLoad");this._initializePdfHistory({fingerprint:d.fingerprints[0],viewOnLoad:Le,initialDest:Ie==null?void 0:Ie.dest});const De=this.initialBookmark,Be=u.get("defaultZoomValue");let je=Be?`zoom=${Be}`:null,He=null,qe=u.get("sidebarViewOnLoad"),Ge=u.get("scrollModeOnLoad"),et=u.get("spreadModeOnLoad");ae!=null&&ae.page&&Le!==Ce.INITIAL&&(je=`page=${ae.page}&zoom=${Be||ae.zoom},${ae.scrollLeft},${ae.scrollTop}`,He=parseInt(ae.rotation,10),qe===r.SidebarView.UNKNOWN&&(qe=ae.sidebarView|0),Ge===r.ScrollMode.UNKNOWN&&(Ge=ae.scrollMode|0),et===r.SpreadMode.UNKNOWN&&(et=ae.spreadMode|0)),be&&qe===r.SidebarView.UNKNOWN&&(qe=(0,r.apiPageModeToSidebarView)(be)),de&&Ge===r.ScrollMode.UNKNOWN&&et===r.SpreadMode.UNKNOWN&&(et=(0,r.apiPageLayoutToViewerModes)(de).spreadMode),this.setInitialView(je,{rotation:He,sidebarView:qe,scrollMode:Ge,spreadMode:et}),this.eventBus.dispatch("documentinit",{source:this}),this.isViewerEmbedded||X.focus(),await Promise.race([j,new Promise(Te=>{setTimeout(Te,se)})]),!(!De&&!je)&&(X.hasEqualPageSizes||(this.initialBookmark=De,X.currentScaleValue=X.currentScaleValue,this.setInitialView(je)))}).catch(()=>{this.setInitialView()}).then(function(){X.update()})}),j.then(()=>{this._unblockDocumentLoadEvent(),this._initializeAutoPrint(d,$)},ye=>{this.l10n.get("loading_error").then(ne=>{this._documentError(ne,{message:ye==null?void 0:ye.message})})}),z.then(ye=>{this.externalServices.reportTelemetry({type:"pageInfo",timestamp:ye.timestamp}),this.pdfOutlineViewer&&d.getOutline().then(ne=>{d===this.pdfDocument&&this.pdfOutlineViewer.render({outline:ne,pdfDocument:d})}),this.pdfAttachmentViewer&&d.getAttachments().then(ne=>{d===this.pdfDocument&&this.pdfAttachmentViewer.render({attachments:ne})}),this.pdfLayerViewer&&X.optionalContentConfigPromise.then(ne=>{d===this.pdfDocument&&this.pdfLayerViewer.render({optionalContentConfig:ne,pdfDocument:d})})}),this._initializePageLabels(d),this._initializeMetadata(d)}async _scriptingDocProperties(d){var u,M;return!this.documentInfo&&(await new Promise(D=>{this.eventBus._on("metadataloaded",D,{once:!0})}),d!==this.pdfDocument)||!this._contentLength&&(await new Promise(D=>{this.eventBus._on("documentloaded",D,{once:!0})}),d!==this.pdfDocument)?null:{...this.documentInfo,baseURL:this.baseUrl,filesize:this._contentLength,filename:this._docFilename,metadata:(u=this.metadata)==null?void 0:u.getRaw(),authors:(M=this.metadata)==null?void 0:M.get("dc:creator"),numPages:this.pagesCount,URL:this.url}}async _initializeAutoPrint(d,u){const[M,D]=await Promise.all([u,this.pdfViewer.enableScripting?null:d.getJSActions()]);if(d!==this.pdfDocument)return;let $=(M==null?void 0:M.action)==="Print";if(D){console.warn("Warning: JavaScript support is not enabled");for(const X in D){if($)break;switch(X){case"WillClose":case"WillSave":case"DidSave":case"WillPrint":case"DidPrint":continue}$=D[X].some(B=>r.AutoPrintRegExp.test(B))}}$&&this.triggerPrinting()}async _initializeMetadata(d){const{info:u,metadata:M,contentDispositionFilename:D,contentLength:$}=await d.getMetadata();if(d!==this.pdfDocument)return;this.documentInfo=u,this.metadata=M,this._contentDispositionFilename??(this._contentDispositionFilename=D),this._contentLength??(this._contentLength=$),console.log(`PDF ${d.fingerprints[0]} [${u.PDFFormatVersion} ${(u.Producer||"-").trim()} / ${(u.Creator||"-").trim()}] (PDF.js: ${a.version||"?"} [${a.build||"?"}])`);let X=u.Title;const B=M==null?void 0:M.get("dc:title");B&&B!=="Untitled"&&!/[\uFFF0-\uFFFF]/g.test(B)&&(X=B),X?this.setTitle(`${X} - ${this._contentDispositionFilename||this._title}`):this._contentDispositionFilename&&this.setTitle(this._contentDispositionFilename),u.IsXFAPresent&&!u.IsAcroFormPresent&&!d.isPureXfa?d.loadingParams.enableXfa?console.warn("Warning: XFA Foreground documents are not supported"):console.warn("Warning: XFA support is not enabled"):(u.IsAcroFormPresent||u.IsXFAPresent)&&!this.pdfViewer.renderForms&&console.warn("Warning: Interactive form support is not enabled"),u.IsSignaturesPresent&&console.warn("Warning: Digital signatures validation is not supported"),this.eventBus.dispatch("metadataloaded",{source:this})}async _initializePageLabels(d){const{appOptions:u}=this,M=await d.getPageLabels();if(d!==this.pdfDocument||!M||u.get("disablePageLabels"))return;const D=M.length;let $=0,X=0;for(let Y=0;Y<D;Y++){const ce=M[Y];if(ce===(Y+1).toString())$++;else if(ce==="")X++;else break}if($>=D||X>=D)return;const{pdfViewer:B,pdfThumbnailViewer:z,toolbar:j}=this;B.setPageLabels(M),z==null||z.setPageLabels(M),j==null||j.setPagesCount(D,!0),j==null||j.setPageNumber(B.currentPageNumber,B.currentPageLabel)}_initializePdfHistory({fingerprint:d,viewOnLoad:u,initialDest:M=null}){const{appOptions:D}=this;this.pdfHistory&&(this.pdfHistory.initialize({fingerprint:d,resetHistory:u===Ce.INITIAL,updateUrl:D.get("historyUpdateUrl")}),this.pdfHistory.initialBookmark&&(this.initialBookmark=this.pdfHistory.initialBookmark,this.initialRotation=this.pdfHistory.initialRotation),M&&!this.initialBookmark&&u===Ce.UNKNOWN&&(this.initialBookmark=JSON.stringify(M),this.pdfHistory.push({explicitDest:M,pageNumber:null})))}_initializeAnnotationStorageCallbacks(d){if(d!==this.pdfDocument)return;const{annotationStorage:u}=d;u.onSetModified=()=>{window.addEventListener("beforeunload",beforeUnload),this._annotationStorageModified=!0},u.onResetModified=()=>{window.removeEventListener("beforeunload",beforeUnload),delete this._annotationStorageModified},u.onAnnotationEditor=M=>{this._hasAnnotationEditors=!!M,this.setTitle(),M&&this.externalServices.reportTelemetry({type:"editing",data:{type:M}})}}setInitialView(d,{rotation:u,sidebarView:M,scrollMode:D,spreadMode:$}={}){var z,j,Y;const X=ce=>{(0,r.isValidRotation)(ce)&&(this.pdfViewer.pagesRotation=ce)},B=(ce,oe)=>{(0,r.isValidScrollMode)(ce)&&(this.pdfViewer.scrollMode=ce),(0,r.isValidSpreadMode)(oe)&&(this.pdfViewer.spreadMode=oe)};this.isInitialViewSet=!0,(z=this.pdfSidebar)==null||z.setInitialView(M),B(D,$),this.initialBookmark?(X(this.initialRotation),delete this.initialRotation,this.pdfLinkService.setHash(this.initialBookmark),this.initialBookmark=null):d&&(X(u),this.pdfLinkService.setHash(d)),(j=this.toolbar)==null||j.setPageNumber(this.pdfViewer.currentPageNumber,this.pdfViewer.currentPageLabel),(Y=this.secondaryToolbar)==null||Y.setPageNumber(this.pdfViewer.currentPageNumber),this.pdfViewer.currentScaleValue||(this.pdfViewer.currentScaleValue=r.DEFAULT_SCALE_VALUE)}_cleanup(){var d;this.pdfDocument&&(this.pdfViewer.cleanup(),(d=this.pdfThumbnailViewer)==null||d.cleanup(),this.pdfDocument.cleanup())}forceRendering(){var d;this.pdfRenderingQueue.printing=!!this.printService,this.pdfRenderingQueue.isThumbnailViewEnabled=((d=this.pdfSidebar)==null?void 0:d.visibleView)===r.SidebarView.THUMBS,this.pdfRenderingQueue.renderHighestPriority()}beforePrint(){const{appOptions:d}=this;if(this._printAnnotationStoragePromise=this.pdfScriptingManager.dispatchWillPrint().catch(()=>{}).then(()=>{var B;return(B=this.pdfDocument)==null?void 0:B.annotationStorage.print}),this.printService)return;if(!this.supportsPrinting){this.l10n.get("printing_not_supported").then(B=>{this._otherError(B)});return}if(!this.pdfViewer.pageViewsReady){this.l10n.get("printing_not_ready").then(B=>{window.alert(B)});return}const u=this.pdfViewer.getPagesOverview(),M=this.appConfig.printContainer,D=d.get("printResolution"),$=this.pdfViewer.optionalContentConfigPromise,X=q.instance.createPrintService(this.pdfDocument,u,M,D,$,this._printAnnotationStoragePromise,this.l10n);this.printService=X,this.forceRendering(),this.setTitle(),X.layout(),this._hasAnnotationEditors&&this.externalServices.reportTelemetry({type:"editing",data:{type:"print"}})}afterPrint(){var d;this._printAnnotationStoragePromise&&(this._printAnnotationStoragePromise.then(()=>{this.pdfScriptingManager.dispatchDidPrint()}),this._printAnnotationStoragePromise=null),this.printService&&(this.printService.destroy(),this.printService=null,(d=this.pdfDocument)==null||d.annotationStorage.resetModified()),this.forceRendering(),this.setTitle()}rotatePages(d){this.pdfViewer.pagesRotation+=d}requestPresentationMode(){var d;(d=this.pdfPresentationMode)==null||d.request()}triggerPrinting(){this.supportsPrinting&&window.print()}bindEvents(){const{appOptions:d}=this,{eventBus:u,_boundEvents:M}=this;M.beforePrint=this.beforePrint.bind(this),M.afterPrint=this.afterPrint.bind(this),u._on("resize",webViewerResize),u._on("hashchange",webViewerHashchange),u._on("beforeprint",M.beforePrint),u._on("afterprint",M.afterPrint),u._on("pagerender",webViewerPageRender),u._on("pagerendered",webViewerPageRendered),u._on("updateviewarea",webViewerUpdateViewarea),u._on("pagechanging",webViewerPageChanging),u._on("scalechanging",webViewerScaleChanging),u._on("rotationchanging",webViewerRotationChanging),u._on("sidebarviewchanged",webViewerSidebarViewChanged),u._on("pagemode",webViewerPageMode),u._on("namedaction",webViewerNamedAction),u._on("presentationmodechanged",webViewerPresentationModeChanged),u._on("presentationmode",webViewerPresentationMode),u._on("switchannotationeditormode",webViewerSwitchAnnotationEditorMode),u._on("switchannotationeditorparams",webViewerSwitchAnnotationEditorParams),u._on("print",webViewerPrint),u._on("download",webViewerDownload),u._on("openinexternalapp",webViewerOpenInExternalApp),u._on("firstpage",webViewerFirstPage),u._on("lastpage",webViewerLastPage),u._on("nextpage",webViewerNextPage),u._on("previouspage",webViewerPreviousPage),u._on("zoomin",webViewerZoomIn),u._on("zoomout",webViewerZoomOut),u._on("zoomreset",webViewerZoomReset),u._on("pagenumberchanged",webViewerPageNumberChanged),u._on("scalechanged",webViewerScaleChanged),u._on("rotatecw",webViewerRotateCw),u._on("rotateccw",webViewerRotateCcw),u._on("optionalcontentconfig",webViewerOptionalContentConfig),u._on("switchscrollmode",webViewerSwitchScrollMode),u._on("scrollmodechanged",webViewerScrollModeChanged),u._on("switchspreadmode",webViewerSwitchSpreadMode),u._on("spreadmodechanged",webViewerSpreadModeChanged),u._on("documentproperties",webViewerDocumentProperties),u._on("findfromurlhash",webViewerFindFromUrlHash),u._on("updatefindmatchescount",webViewerUpdateFindMatchesCount),u._on("updatefindcontrolstate",webViewerUpdateFindControlState),d.get("pdfBug")&&(M.reportPageStatsPDFBug=reportPageStatsPDFBug,u._on("pagerendered",M.reportPageStatsPDFBug),u._on("pagechanging",M.reportPageStatsPDFBug)),u._on("fileinputchange",webViewerFileInputChange),u._on("openfile",webViewerOpenFile)}bindWindowEvents(){const{eventBus:d,_boundEvents:u}=this;function M(D=null){D&&webViewerResolutionChange(D);const $=window.matchMedia(`(resolution: ${window.devicePixelRatio||1}dppx)`);$.addEventListener("change",M,{once:!0}),u.removeWindowResolutionChange||(u.removeWindowResolutionChange=function(){$.removeEventListener("change",M),u.removeWindowResolutionChange=null})}M(),u.windowResize=()=>{d.dispatch("resize",{source:window})},u.windowHashChange=()=>{d.dispatch("hashchange",{source:window,hash:document.location.hash.substring(1)})},u.windowBeforePrint=()=>{d.dispatch("beforeprint",{source:window})},u.windowAfterPrint=()=>{d.dispatch("afterprint",{source:window})},u.windowUpdateFromSandbox=D=>{d.dispatch("updatefromsandbox",{source:window,detail:D.detail})},window.addEventListener("visibilitychange",webViewerVisibilityChange),window.addEventListener("wheel",webViewerWheel,{passive:!1}),window.addEventListener("touchstart",webViewerTouchStart,{passive:!1}),window.addEventListener("touchmove",webViewerTouchMove,{passive:!1}),window.addEventListener("touchend",webViewerTouchEnd,{passive:!1}),window.addEventListener("click",webViewerClick),window.addEventListener("keydown",webViewerKeyDown),window.addEventListener("keyup",webViewerKeyUp),window.addEventListener("resize",u.windowResize),window.addEventListener("hashchange",u.windowHashChange),window.addEventListener("beforeprint",u.windowBeforePrint),window.addEventListener("afterprint",u.windowAfterPrint),window.addEventListener("updatefromsandbox",u.windowUpdateFromSandbox)}unbindEvents(){const{eventBus:d,_boundEvents:u}=this;d._off("resize",webViewerResize),d._off("hashchange",webViewerHashchange),d._off("beforeprint",u.beforePrint),d._off("afterprint",u.afterPrint),d._off("pagerender",webViewerPageRender),d._off("pagerendered",webViewerPageRendered),d._off("updateviewarea",webViewerUpdateViewarea),d._off("pagechanging",webViewerPageChanging),d._off("scalechanging",webViewerScaleChanging),d._off("rotationchanging",webViewerRotationChanging),d._off("sidebarviewchanged",webViewerSidebarViewChanged),d._off("pagemode",webViewerPageMode),d._off("namedaction",webViewerNamedAction),d._off("presentationmodechanged",webViewerPresentationModeChanged),d._off("presentationmode",webViewerPresentationMode),d._off("print",webViewerPrint),d._off("download",webViewerDownload),d._off("openinexternalapp",webViewerOpenInExternalApp),d._off("firstpage",webViewerFirstPage),d._off("lastpage",webViewerLastPage),d._off("nextpage",webViewerNextPage),d._off("previouspage",webViewerPreviousPage),d._off("zoomin",webViewerZoomIn),d._off("zoomout",webViewerZoomOut),d._off("zoomreset",webViewerZoomReset),d._off("pagenumberchanged",webViewerPageNumberChanged),d._off("scalechanged",webViewerScaleChanged),d._off("rotatecw",webViewerRotateCw),d._off("rotateccw",webViewerRotateCcw),d._off("optionalcontentconfig",webViewerOptionalContentConfig),d._off("switchscrollmode",webViewerSwitchScrollMode),d._off("scrollmodechanged",webViewerScrollModeChanged),d._off("switchspreadmode",webViewerSwitchSpreadMode),d._off("spreadmodechanged",webViewerSpreadModeChanged),d._off("documentproperties",webViewerDocumentProperties),d._off("findfromurlhash",webViewerFindFromUrlHash),d._off("updatefindmatchescount",webViewerUpdateFindMatchesCount),d._off("updatefindcontrolstate",webViewerUpdateFindControlState),u.reportPageStatsPDFBug&&(d._off("pagerendered",u.reportPageStatsPDFBug),d._off("pagechanging",u.reportPageStatsPDFBug),u.reportPageStatsPDFBug=null),d._off("fileinputchange",webViewerFileInputChange),d._off("openfile",webViewerOpenFile),u.beforePrint=null,u.afterPrint=null}unbindWindowEvents(){var u;const{_boundEvents:d}=this;window.removeEventListener("visibilitychange",webViewerVisibilityChange),window.removeEventListener("wheel",webViewerWheel,{passive:!1}),window.removeEventListener("touchstart",webViewerTouchStart,{passive:!1}),window.removeEventListener("touchmove",webViewerTouchMove,{passive:!1}),window.removeEventListener("touchend",webViewerTouchEnd,{passive:!1}),window.removeEventListener("click",webViewerClick),window.removeEventListener("keydown",webViewerKeyDown),window.removeEventListener("keyup",webViewerKeyUp),window.removeEventListener("resize",d.windowResize),window.removeEventListener("hashchange",d.windowHashChange),window.removeEventListener("beforeprint",d.windowBeforePrint),window.removeEventListener("afterprint",d.windowAfterPrint),window.removeEventListener("updatefromsandbox",d.windowUpdateFromSandbox),(u=d.removeWindowResolutionChange)==null||u.call(d),d.windowResize=null,d.windowHashChange=null,d.windowBeforePrint=null,d.windowAfterPrint=null,d.windowUpdateFromSandbox=null}_accumulateTicks(d,u){(this[u]>0&&d<0||this[u]<0&&d>0)&&(this[u]=0),this[u]+=d;const M=Math.trunc(this[u]);return this[u]-=M,M}_accumulateFactor(d,u,M){if(u===1)return 1;(this[M]>1&&u<1||this[M]<1&&u>1)&&(this[M]=1);const D=Math.floor(d*u*this[M]*100)/(100*d);return this[M]=u/D,D}_centerAtPos(d,u,M){const{pdfViewer:D}=this,$=D.currentScale/d-1;if($!==0){const[X,B]=D.containerTopLeft;D.container.scrollLeft+=(u-B)*$,D.container.scrollTop+=(M-X)*$}}_unblockDocumentLoadEvent(){var d;(d=document.blockUnblockOnload)==null||d.call(document,!1),this._unblockDocumentLoadEvent=()=>{}}get scriptingReady(){return this.pdfScriptingManager.ready}}_.ViewerApplication=R},(k,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.compatibilityParams=_.OptionKind=_.AppOptions=void 0;const m=Object.create(null);_.compatibilityParams=m;{const C=navigator.userAgent||"",s=navigator.platform||"",g=navigator.maxTouchPoints||1,b=/Android/.test(C),P=/\b(iPad|iPhone|iPod)(?=;)/.test(C)||s==="MacIntel"&&g>1;(function(){(P||b)&&(m.maxCanvasPixels=5242880)})()}const r={VIEWER:2,API:4,WORKER:8,PREFERENCE:128};_.OptionKind=r;const a={annotationEditorMode:{value:0,kind:r.VIEWER+r.PREFERENCE},annotationMode:{value:2,kind:r.VIEWER+r.PREFERENCE},cursorToolOnLoad:{value:0,kind:r.VIEWER+r.PREFERENCE},defaultZoomDelay:{value:400,kind:r.VIEWER+r.PREFERENCE},defaultZoomValue:{value:"",kind:r.VIEWER+r.PREFERENCE},disableHistory:{value:!1,kind:r.VIEWER},disablePageLabels:{value:!1,kind:r.VIEWER+r.PREFERENCE},enablePermissions:{value:!1,kind:r.VIEWER+r.PREFERENCE},enablePrintAutoRotate:{value:!0,kind:r.VIEWER+r.PREFERENCE},enableScripting:{value:!0,kind:r.VIEWER+r.PREFERENCE},enableStampEditor:{value:!0,kind:r.VIEWER+r.PREFERENCE},externalLinkRel:{value:"noopener noreferrer nofollow",kind:r.VIEWER},externalLinkTarget:{value:0,kind:r.VIEWER+r.PREFERENCE},historyUpdateUrl:{value:!1,kind:r.VIEWER+r.PREFERENCE},ignoreDestinationZoom:{value:!1,kind:r.VIEWER+r.PREFERENCE},imageResourcesPath:{value:"./images/",kind:r.VIEWER},maxCanvasPixels:{value:16777216,kind:r.VIEWER},forcePageColors:{value:!1,kind:r.VIEWER+r.PREFERENCE},pageColorsBackground:{value:"Canvas",kind:r.VIEWER+r.PREFERENCE},pageColorsForeground:{value:"CanvasText",kind:r.VIEWER+r.PREFERENCE},pdfBugEnabled:{value:!1,kind:r.VIEWER+r.PREFERENCE},printResolution:{value:150,kind:r.VIEWER},sidebarViewOnLoad:{value:-1,kind:r.VIEWER+r.PREFERENCE},scrollModeOnLoad:{value:-1,kind:r.VIEWER+r.PREFERENCE},spreadModeOnLoad:{value:-1,kind:r.VIEWER+r.PREFERENCE},textLayerMode:{value:1,kind:r.VIEWER+r.PREFERENCE},viewerCssTheme:{value:0,kind:r.VIEWER+r.PREFERENCE},viewOnLoad:{value:0,kind:r.VIEWER+r.PREFERENCE},cMapPacked:{value:!0,kind:r.API},cMapUrl:{value:"../web/cmaps/",kind:r.API},disableAutoFetch:{value:!1,kind:r.API+r.PREFERENCE},disableFontFace:{value:!1,kind:r.API+r.PREFERENCE},disableRange:{value:!1,kind:r.API+r.PREFERENCE},disableStream:{value:!1,kind:r.API+r.PREFERENCE},docBaseUrl:{value:"",kind:r.API},enableXfa:{value:!0,kind:r.API+r.PREFERENCE},fontExtraProperties:{value:!1,kind:r.API},isEvalSupported:{value:!0,kind:r.API},isOffscreenCanvasSupported:{value:!0,kind:r.API},maxImageSize:{value:-1,kind:r.API},pdfBug:{value:!1,kind:r.API},standardFontDataUrl:{value:"../web/standard_fonts/",kind:r.API},verbosity:{value:1,kind:r.API},workerPort:{value:null,kind:r.WORKER},workerSrc:{value:"../build/pdf.worker.js",kind:r.WORKER}};a.defaultUrl={value:"compressed.tracemonkey-pldi-09.pdf",kind:r.VIEWER},a.disablePreferences={value:!1,kind:r.VIEWER},a.locale={value:navigator.language||"en-US",kind:r.VIEWER},a.sandboxBundleSrc={value:"../build/pdf.sandbox.js",kind:r.VIEWER};const T=Object.create(null);class E{constructor(){throw new Error("Cannot initialize AppOptions.")}static get(s){const g=T[s];if(g!==void 0)return g;const b=a[s];if(b!==void 0)return m[s]??b.value}static getAll(s=null){const g=Object.create(null);for(const b in a){const P=a[b];if(s){if(!(s&P.kind))continue;if(s===r.PREFERENCE){const y=P.value,A=typeof y;if(A==="boolean"||A==="string"||A==="number"&&Number.isInteger(y)){g[b]=y;continue}throw new Error(`Invalid type for preference: ${b}`)}}const x=T[b];g[b]=x!==void 0?x:m[b]??P.value}return g}static set(s,g){T[s]=g}static setAll(s){for(const g in s)T[g]=s[g]}static remove(s){delete T[s]}}_.AppOptions=E,E._hasUserOptions=function(){return Object.keys(T).length>0}},(k,_)=>{var E;Object.defineProperty(_,"__esModule",{value:!0}),_.WaitOnType=_.EventBus=_.AutomationEventBus=void 0,_.waitOnEventOrTimeout=r;const m={EVENT:"event",TIMEOUT:"timeout"};_.WaitOnType=m;function r({target:C,name:s,delay:g=0}){return new Promise(function(b,P){if(typeof C!="object"||!(s&&typeof s=="string")||!(Number.isInteger(g)&&g>=0))throw new Error("waitOnEventOrTimeout - invalid parameters.");function x(c){C instanceof a?C._off(s,y):C.removeEventListener(s,y),o&&clearTimeout(o),b(c)}const y=x.bind(null,m.EVENT);C instanceof a?C._on(s,y):C.addEventListener(s,y);const A=x.bind(null,m.TIMEOUT),o=setTimeout(A,g)})}class a{constructor(){H(this,E,Object.create(null))}on(s,g,b=null){this._on(s,g,{external:!0,once:b==null?void 0:b.once})}off(s,g,b=null){this._off(s,g,{external:!0,once:b==null?void 0:b.once})}dispatch(s,g){const b=i(this,E)[s];if(!b||b.length===0)return;let P;for(const{listener:x,external:y,once:A}of b.slice(0)){if(A&&this._off(s,x),y){(P||(P=[])).push(x);continue}x(g)}if(P){for(const x of P)x(g);P=null}}_on(s,g,b=null){var x;((x=i(this,E))[s]||(x[s]=[])).push({listener:g,external:(b==null?void 0:b.external)===!0,once:(b==null?void 0:b.once)===!0})}_off(s,g,b=null){const P=i(this,E)[s];if(P){for(let x=0,y=P.length;x<y;x++)if(P[x].listener===g){P.splice(x,1);return}}}}E=new WeakMap,_.EventBus=a;class T extends a{dispatch(s,g){throw new Error("Not implemented: AutomationEventBus.dispatch")}}_.AutomationEventBus=T},(k,_,m)=>{var g,b,Hi,x,ds;Object.defineProperty(_,"__esModule",{value:!0}),_.SimpleLinkService=_.PDFLinkService=_.LinkTarget=void 0;var r=m(4);const a="noopener noreferrer nofollow",T={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4};_.LinkTarget=T;function E(o,{url:c,target:S,rel:w,enabled:v=!0}={}){if(!c||typeof c!="string")throw new Error('A valid "url" parameter must provided.');v?o.href=o.title=c:(o.href="",o.title=`Disabled: ${c}`,o.onclick=()=>!1);let F="";switch(S){case T.NONE:break;case T.SELF:F="_self";break;case T.BLANK:F="_blank";break;case T.PARENT:F="_parent";break;case T.TOP:F="_top";break}o.target=F,o.rel=typeof w=="string"?w:a}const A=class A{constructor({eventBus:c,externalLinkTarget:S=null,externalLinkRel:w=null,ignoreDestinationZoom:v=!1}={}){H(this,b);H(this,g,new Map);this.eventBus=c,this.externalLinkTarget=S,this.externalLinkRel=w,this.externalLinkEnabled=!0,this._ignoreDestinationZoom=v,this.baseUrl=null,this.pdfDocument=null,this.pdfViewer=null,this.pdfHistory=null}setDocument(c,S=null){this.baseUrl=S,this.pdfDocument=c,i(this,g).clear()}setViewer(c){this.pdfViewer=c}setHistory(c){this.pdfHistory=c}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return this.pdfViewer.currentPageNumber}set page(c){this.pdfViewer.currentPageNumber=c}get rotation(){return this.pdfViewer.pagesRotation}set rotation(c){this.pdfViewer.pagesRotation=c}get isInPresentationMode(){return this.pdfViewer.isInPresentationMode}async goToDestination(c){if(!this.pdfDocument)return;let S,w;if(typeof c=="string"?(S=c,w=await this.pdfDocument.getDestination(c)):(S=null,w=await c),!Array.isArray(w)){console.error(`PDFLinkService.goToDestination: "${w}" is not a valid destination array, for dest="${c}".`);return}W(this,b,Hi).call(this,c,S,w)}goToPage(c){if(!this.pdfDocument)return;const S=typeof c=="string"&&this.pdfViewer.pageLabelToPageNumber(c)||c|0;if(!(Number.isInteger(S)&&S>0&&S<=this.pagesCount)){console.error(`PDFLinkService.goToPage: "${c}" is not a valid page.`);return}this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.pushPage(S)),this.pdfViewer.scrollPageIntoView({pageNumber:S})}addLinkAttributes(c,S,w=!1){E(c,{url:S,target:w?T.BLANK:this.externalLinkTarget,rel:this.externalLinkRel,enabled:this.externalLinkEnabled})}getDestinationHash(c){if(typeof c=="string"){if(c.length>0)return this.getAnchorUrl("#"+escape(c))}else if(Array.isArray(c)){const S=JSON.stringify(c);if(S.length>0)return this.getAnchorUrl("#"+escape(S))}return this.getAnchorUrl("")}getAnchorUrl(c){return this.baseUrl?this.baseUrl+c:c}setHash(c){var v;if(!this.pdfDocument)return;let S,w;if(c.includes("=")){const F=(0,r.parseQueryString)(c);if(F.has("search")){const N=F.get("search").replaceAll('"',""),G=F.get("phrase")==="true";this.eventBus.dispatch("findfromurlhash",{source:this,query:G?N:N.match(/\S+/g)})}if(F.has("page")&&(S=F.get("page")|0||1),F.has("zoom")){const N=F.get("zoom").split(","),G=N[0],le=parseFloat(G);G.includes("Fit")?G==="Fit"||G==="FitB"?w=[null,{name:G}]:G==="FitH"||G==="FitBH"||G==="FitV"||G==="FitBV"?w=[null,{name:G},N.length>1?N[1]|0:null]:G==="FitR"?N.length!==5?console.error('PDFLinkService.setHash: Not enough parameters for "FitR".'):w=[null,{name:G},N[1]|0,N[2]|0,N[3]|0,N[4]|0]:console.error(`PDFLinkService.setHash: "${G}" is not a valid zoom value.`):w=[null,{name:"XYZ"},N.length>1?N[1]|0:null,N.length>2?N[2]|0:null,le?le/100:G]}w?this.pdfViewer.scrollPageIntoView({pageNumber:S||this.page,destArray:w,allowNegativeOffset:!0}):S&&(this.page=S),F.has("pagemode")&&this.eventBus.dispatch("pagemode",{source:this,mode:F.get("pagemode")}),F.has("nameddest")&&this.goToDestination(F.get("nameddest"))}else{w=unescape(c);try{w=JSON.parse(w),Array.isArray(w)||(w=w.toString())}catch{}if(typeof w=="string"||W(v=A,x,ds).call(v,w)){this.goToDestination(w);return}console.error(`PDFLinkService.setHash: "${unescape(c)}" is not a valid destination.`)}}executeNamedAction(c){var S,w;switch(c){case"GoBack":(S=this.pdfHistory)==null||S.back();break;case"GoForward":(w=this.pdfHistory)==null||w.forward();break;case"NextPage":this.pdfViewer.nextPage();break;case"PrevPage":this.pdfViewer.previousPage();break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1;break}this.eventBus.dispatch("namedaction",{source:this,action:c})}async executeSetOCGState(c){const S=this.pdfDocument,w=await this.pdfViewer.optionalContentConfigPromise;if(S!==this.pdfDocument)return;let v;for(const F of c.state){switch(F){case"ON":case"OFF":case"Toggle":v=F;continue}switch(v){case"ON":w.setVisibility(F,!0);break;case"OFF":w.setVisibility(F,!1);break;case"Toggle":const N=w.getGroup(F);N&&w.setVisibility(F,!N.visible);break}}this.pdfViewer.optionalContentConfigPromise=Promise.resolve(w)}cachePageRef(c,S){if(!S)return;const w=S.gen===0?`${S.num}R`:`${S.num}R${S.gen}`;i(this,g).set(w,c)}_cachedPageNumber(c){if(!c)return null;const S=c.gen===0?`${c.num}R`:`${c.num}R${c.gen}`;return i(this,g).get(S)||null}};g=new WeakMap,b=new WeakSet,Hi=function(c,S=null,w){const v=w[0];let F;if(typeof v=="object"&&v!==null){if(F=this._cachedPageNumber(v),!F){this.pdfDocument.getPageIndex(v).then(N=>{this.cachePageRef(N+1,v),W(this,b,Hi).call(this,c,S,w)}).catch(()=>{console.error(`PDFLinkService.#goToDestinationHelper: "${v}" is not a valid page reference, for dest="${c}".`)});return}}else if(Number.isInteger(v))F=v+1;else{console.error(`PDFLinkService.#goToDestinationHelper: "${v}" is not a valid destination reference, for dest="${c}".`);return}if(!F||F<1||F>this.pagesCount){console.error(`PDFLinkService.#goToDestinationHelper: "${F}" is not a valid page number, for dest="${c}".`);return}this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.push({namedDest:S,explicitDest:w,pageNumber:F})),this.pdfViewer.scrollPageIntoView({pageNumber:F,destArray:w,ignoreDestinationZoom:this._ignoreDestinationZoom})},x=new WeakSet,ds=function(c){if(!Array.isArray(c))return!1;const S=c.length;if(S<2)return!1;const w=c[0];if(!(typeof w=="object"&&Number.isInteger(w.num)&&Number.isInteger(w.gen))&&!(Number.isInteger(w)&&w>=0))return!1;const v=c[1];if(!(typeof v=="object"&&typeof v.name=="string"))return!1;let F=!0;switch(v.name){case"XYZ":if(S!==5)return!1;break;case"Fit":case"FitB":return S===2;case"FitH":case"FitBH":case"FitV":case"FitBV":if(S!==3)return!1;break;case"FitR":if(S!==6)return!1;F=!1;break;default:return!1}for(let N=2;N<S;N++){const G=c[N];if(!(typeof G=="number"||F&&G===null))return!1}return!0},H(A,x);let C=A;_.PDFLinkService=C;class s{constructor(){this.externalLinkEnabled=!0}get pagesCount(){return 0}get page(){return 0}set page(c){}get rotation(){return 0}set rotation(c){}get isInPresentationMode(){return!1}async goToDestination(c){}goToPage(c){}addLinkAttributes(c,S,w=!1){E(c,{url:S,enabled:this.externalLinkEnabled})}getDestinationHash(c){return"#"}getAnchorUrl(c){return"#"}setHash(c){}executeNamedAction(c){}executeSetOCGState(c){}cachePageRef(c,S){}}_.SimpleLinkService=s},(k,_,m)=>{var T,E,C,s,g,b,P,x,y,A,o,c,S,w,v,F,N,G,le,V,hs,re,zi,K,Zt,se,ji,Me,Wi,R,us,d,fs,M,$i;Object.defineProperty(_,"__esModule",{value:!0}),_.AltTextManager=void 0;var r=m(5);class a{constructor({dialog:X,optionDescription:B,optionDecorative:z,textarea:j,cancelButton:Y,saveButton:ce},oe,Se,Ee){H(this,V);H(this,re);H(this,K);H(this,se);H(this,Me);H(this,R);H(this,d);H(this,M);H(this,T,W(this,Me,Wi).bind(this));H(this,E,W(this,re,zi).bind(this));H(this,C,W(this,d,fs).bind(this));H(this,s,null);H(this,g,void 0);H(this,b,void 0);H(this,P,void 0);H(this,x,!1);H(this,y,void 0);H(this,A,void 0);H(this,o,void 0);H(this,c,void 0);H(this,S,void 0);H(this,w,void 0);H(this,v,null);H(this,F,null);H(this,N,null);H(this,G,void 0);H(this,le,null);he(this,b,X),he(this,y,B),he(this,A,z),he(this,S,j),he(this,g,Y),he(this,c,ce),he(this,o,Se),he(this,P,Ee),he(this,G,oe),X.addEventListener("close",W(this,se,ji).bind(this)),X.addEventListener("contextmenu",ye=>{ye.target!==i(this,S)&&ye.preventDefault()}),Y.addEventListener("click",W(this,K,Zt).bind(this)),ce.addEventListener("click",W(this,R,us).bind(this)),B.addEventListener("change",i(this,T)),z.addEventListener("change",i(this,T)),i(this,o).register(X)}get _elements(){return(0,r.shadow)(this,"_elements",[i(this,y),i(this,A),i(this,S),i(this,c),i(this,g)])}async editAltText(X,B){if(i(this,s)||!B)return;W(this,V,hs).call(this),he(this,x,!1);for(const Y of this._elements)Y.addEventListener("click",i(this,C));const{altText:z,decorative:j}=B.altTextData;j===!0?(i(this,A).checked=!0,i(this,y).checked=!1):(i(this,A).checked=!1,i(this,y).checked=!0),he(this,v,i(this,S).value=(z==null?void 0:z.trim())||""),W(this,Me,Wi).call(this),he(this,s,B),he(this,w,X),i(this,w).removeEditListeners(),i(this,P)._on("resize",i(this,E));try{await i(this,o).open(i(this,b)),W(this,re,zi).call(this)}catch(Y){throw W(this,se,ji).call(this),Y}}destroy(){var X;he(this,w,null),W(this,K,Zt).call(this),(X=i(this,F))==null||X.remove(),he(this,F,he(this,N,null))}}T=new WeakMap,E=new WeakMap,C=new WeakMap,s=new WeakMap,g=new WeakMap,b=new WeakMap,P=new WeakMap,x=new WeakMap,y=new WeakMap,A=new WeakMap,o=new WeakMap,c=new WeakMap,S=new WeakMap,w=new WeakMap,v=new WeakMap,F=new WeakMap,N=new WeakMap,G=new WeakMap,le=new WeakMap,V=new WeakSet,hs=function(){if(i(this,F))return;const X=new r.DOMSVGFactory,B=he(this,F,X.createElement("svg"));B.setAttribute("width","0"),B.setAttribute("height","0");const z=X.createElement("defs");B.append(z);const j=X.createElement("mask");z.append(j),j.setAttribute("id","alttext-manager-mask"),j.setAttribute("maskContentUnits","objectBoundingBox");let Y=X.createElement("rect");j.append(Y),Y.setAttribute("fill","white"),Y.setAttribute("width","1"),Y.setAttribute("height","1"),Y.setAttribute("x","0"),Y.setAttribute("y","0"),Y=he(this,N,X.createElement("rect")),j.append(Y),Y.setAttribute("fill","black"),i(this,b).append(B)},re=new WeakSet,zi=function(){if(!i(this,s))return;const X=i(this,b),{style:B}=X,{x:z,y:j,width:Y,height:ce}=i(this,G).getBoundingClientRect(),{innerWidth:oe,innerHeight:Se}=window,{width:Ee,height:ye}=X.getBoundingClientRect(),{x:ne,y:fe,width:ae,height:de}=i(this,s).getClientDimensions(),be=10,Ie=i(this,w).direction==="ltr",Le=Math.max(ne,z),De=Math.min(ne+ae,z+Y),Be=Math.max(fe,j),je=Math.min(fe+de,j+ce);i(this,N).setAttribute("width",`${(De-Le)/oe}`),i(this,N).setAttribute("height",`${(je-Be)/Se}`),i(this,N).setAttribute("x",`${Le/oe}`),i(this,N).setAttribute("y",`${Be/Se}`);let He=null,qe=Math.max(fe,0);qe+=Math.min(Se-(qe+ye),0),Ie?ne+ae+be+Ee<oe?He=ne+ae+be:ne>Ee+be&&(He=ne-Ee-be):ne>Ee+be?He=ne-Ee-be:ne+ae+be+Ee<oe&&(He=ne+ae+be),He===null&&(qe=null,He=Math.max(ne,0),He+=Math.min(oe-(He+Ee),0),fe>ye+be?qe=fe-ye-be:fe+de+be+ye<Se&&(qe=fe+de+be)),qe!==null?(X.classList.add("positioned"),Ie?B.left=`${He}px`:B.right=`${oe-He-Ee}px`,B.top=`${qe}px`):(X.classList.remove("positioned"),B.left="",B.top="")},K=new WeakSet,Zt=function(){i(this,o).active===i(this,b)&&i(this,o).close(i(this,b))},se=new WeakSet,ji=function(){var X;i(this,P).dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:i(this,s).editorType,data:i(this,le)||{action:"alt_text_cancel",alt_text_keyboard:!i(this,x)}}}),he(this,le,null),W(this,M,$i).call(this),(X=i(this,w))==null||X.addEditListeners(),i(this,P)._off("resize",i(this,E)),he(this,s,null),he(this,w,null)},Me=new WeakSet,Wi=function(){i(this,S).disabled=i(this,A).checked},R=new WeakSet,us=function(){const X=i(this,S).value.trim(),B=i(this,A).checked;i(this,s).altTextData={altText:X,decorative:B},he(this,le,{action:"alt_text_save",alt_text_description:!!X,alt_text_edit:!!i(this,v)&&i(this,v)!==X,alt_text_decorative:B,alt_text_keyboard:!i(this,x)}),W(this,K,Zt).call(this)},d=new WeakSet,fs=function(X){X.detail!==0&&(he(this,x,!0),W(this,M,$i).call(this))},M=new WeakSet,$i=function(){for(const X of this._elements)X.removeEventListener("click",i(this,C))},_.AltTextManager=a},(k,_,m)=>{var T,ps;Object.defineProperty(_,"__esModule",{value:!0}),_.AnnotationEditorParams=void 0;var r=m(5);class a{constructor(s,g){H(this,T);this.eventBus=g,W(this,T,ps).call(this,s)}}T=new WeakSet,ps=function({editorFreeTextFontSize:s,editorFreeTextColor:g,editorInkColor:b,editorInkThickness:P,editorInkOpacity:x,editorStampAddImage:y}){const A=(o,c)=>{this.eventBus.dispatch("switchannotationeditorparams",{source:this,type:r.AnnotationEditorParamsType[o],value:c})};s.addEventListener("input",function(){A("FREETEXT_SIZE",this.valueAsNumber)}),g.addEventListener("input",function(){A("FREETEXT_COLOR",this.value)}),b.addEventListener("input",function(){A("INK_COLOR",this.value)}),P.addEventListener("input",function(){A("INK_THICKNESS",this.valueAsNumber)}),x.addEventListener("input",function(){A("INK_OPACITY",this.valueAsNumber)}),y.addEventListener("click",()=>{A("CREATE")}),this.eventBus._on("annotationeditorparamschanged",o=>{for(const[c,S]of o.details)switch(c){case r.AnnotationEditorParamsType.FREETEXT_SIZE:s.value=S;break;case r.AnnotationEditorParamsType.FREETEXT_COLOR:g.value=S;break;case r.AnnotationEditorParamsType.INK_COLOR:b.value=S;break;case r.AnnotationEditorParamsType.INK_THICKNESS:P.value=S;break;case r.AnnotationEditorParamsType.INK_OPACITY:x.value=S;break}})},_.AnnotationEditorParams=a},(k,_)=>{var r,a;Object.defineProperty(_,"__esModule",{value:!0}),_.OverlayManager=void 0;class m{constructor(){H(this,r,new WeakMap);H(this,a,null)}get active(){return i(this,a)}async register(E,C=!1){if(typeof E!="object")throw new Error("Not enough parameters.");if(i(this,r).has(E))throw new Error("The overlay is already registered.");i(this,r).set(E,{canForceClose:C}),E.addEventListener("cancel",s=>{he(this,a,null)})}async open(E){if(i(this,r).has(E)){if(i(this,a)){if(i(this,a)===E)throw new Error("The overlay is already active.");if(i(this,r).get(E).canForceClose)await this.close();else throw new Error("Another overlay is currently active.")}}else throw new Error("The overlay does not exist.");he(this,a,E),E.showModal()}async close(E=i(this,a)){if(i(this,r).has(E))if(i(this,a)){if(i(this,a)!==E)throw new Error("Another overlay is currently active.")}else throw new Error("The overlay is currently not active.");else throw new Error("The overlay does not exist.");E.close(),he(this,a,null)}}r=new WeakMap,a=new WeakMap,_.OverlayManager=m},(k,_,m)=>{var T,E,C,s,Gi,b,gs,x,qi;Object.defineProperty(_,"__esModule",{value:!0}),_.PasswordPrompt=void 0;var r=m(5);class a{constructor(o,c,S,w=!1){H(this,s);H(this,b);H(this,x);H(this,T,null);H(this,E,null);H(this,C,null);this.dialog=o.dialog,this.label=o.label,this.input=o.input,this.submitButton=o.submitButton,this.cancelButton=o.cancelButton,this.overlayManager=c,this.l10n=S,this._isViewerEmbedded=w,this.submitButton.addEventListener("click",W(this,s,Gi).bind(this)),this.cancelButton.addEventListener("click",this.close.bind(this)),this.input.addEventListener("keydown",v=>{v.keyCode===13&&W(this,s,Gi).call(this)}),this.overlayManager.register(this.dialog,!0),this.dialog.addEventListener("close",W(this,b,gs).bind(this))}async open(){i(this,T)&&await i(this,T).promise,he(this,T,new r.PromiseCapability);try{await this.overlayManager.open(this.dialog)}catch(c){throw i(this,T).resolve(),c}const o=i(this,C)===r.PasswordResponses.INCORRECT_PASSWORD;(!this._isViewerEmbedded||o)&&this.input.focus(),this.label.textContent=await this.l10n.get(`password_${o?"invalid":"label"}`)}async close(){this.overlayManager.active===this.dialog&&this.overlayManager.close(this.dialog)}async setUpdateCallback(o,c){i(this,T)&&await i(this,T).promise,he(this,E,o),he(this,C,c)}}T=new WeakMap,E=new WeakMap,C=new WeakMap,s=new WeakSet,Gi=function(){const o=this.input.value;(o==null?void 0:o.length)>0&&W(this,x,qi).call(this,o)},b=new WeakSet,gs=function(){W(this,x,qi).call(this,new Error("PasswordPrompt cancelled.")),i(this,T).resolve()},x=new WeakSet,qi=function(o){i(this,E)&&(this.close(),this.input.value="",i(this,E).call(this,o),he(this,E,null))},_.PasswordPrompt=a},(k,_,m)=>{var C,ms;Object.defineProperty(_,"__esModule",{value:!0}),_.PDFAttachmentViewer=void 0;var r=m(5),a=m(17),T=m(10);class E extends a.BaseTreeViewer{constructor(P){super(P);H(this,C);this.downloadManager=P.downloadManager,this.eventBus._on("fileattachmentannotation",W(this,C,ms).bind(this))}reset(P=!1){super.reset(),this._attachments=null,P||(this._renderedCapability=new r.PromiseCapability),this._pendingDispatchEvent=!1}async _dispatchEvent(P){this._renderedCapability.resolve(),!(P===0&&!this._pendingDispatchEvent&&(this._pendingDispatchEvent=!0,await(0,T.waitOnEventOrTimeout)({target:this.eventBus,name:"annotationlayerrendered",delay:1e3}),!this._pendingDispatchEvent))&&(this._pendingDispatchEvent=!1,this.eventBus.dispatch("attachmentsloaded",{source:this,attachmentsCount:P}))}_bindLink(P,{content:x,filename:y}){P.onclick=()=>(this.downloadManager.openOrDownloadData(P,x,y),!1)}render({attachments:P,keepRenderedCapability:x=!1}){if(this._attachments&&this.reset(x),this._attachments=P||null,!P){this._dispatchEvent(0);return}const y=document.createDocumentFragment();let A=0;for(const o in P){const c=P[o],S=c.content,w=(0,r.getFilenameFromUrl)(c.filename,!0),v=document.createElement("div");v.className="treeItem";const F=document.createElement("a");this._bindLink(F,{content:S,filename:w}),F.textContent=this._normalizeTextContent(w),v.append(F),y.append(v),A++}this._finishRendering(y,A)}}C=new WeakSet,ms=function({filename:P,content:x}){const y=this._renderedCapability.promise;y.then(()=>{if(y!==this._renderedCapability.promise)return;const A=this._attachments||Object.create(null);for(const o in A)if(P===o)return;A[P]={filename:P,content:x},this.render({attachments:A,keepRenderedCapability:!0})})},_.PDFAttachmentViewer=E},(k,_,m)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.BaseTreeViewer=void 0;var r=m(4);const a=-100,T="selected";class E{constructor(s){if(this.constructor===E)throw new Error("Cannot initialize BaseTreeViewer.");this.container=s.container,this.eventBus=s.eventBus,this.reset()}reset(){this._pdfDocument=null,this._lastToggleIsShow=!0,this._currentTreeItem=null,this.container.textContent="",this.container.classList.remove("treeWithDeepNesting")}_dispatchEvent(s){throw new Error("Not implemented: _dispatchEvent")}_bindLink(s,g){throw new Error("Not implemented: _bindLink")}_normalizeTextContent(s){return(0,r.removeNullCharacters)(s,!0)||"–"}_addToggleButton(s,g=!1){const b=document.createElement("div");b.className="treeItemToggler",g&&b.classList.add("treeItemsHidden"),b.onclick=P=>{if(P.stopPropagation(),b.classList.toggle("treeItemsHidden"),P.shiftKey){const x=!b.classList.contains("treeItemsHidden");this._toggleTreeItem(s,x)}},s.prepend(b)}_toggleTreeItem(s,g=!1){this._lastToggleIsShow=g;for(const b of s.querySelectorAll(".treeItemToggler"))b.classList.toggle("treeItemsHidden",!g)}_toggleAllTreeItems(){this._toggleTreeItem(this.container,!this._lastToggleIsShow)}_finishRendering(s,g,b=!1){b&&(this.container.classList.add("treeWithDeepNesting"),this._lastToggleIsShow=!s.querySelector(".treeItemsHidden")),this.container.append(s),this._dispatchEvent(g)}render(s){throw new Error("Not implemented: render")}_updateCurrentTreeItem(s=null){this._currentTreeItem&&(this._currentTreeItem.classList.remove(T),this._currentTreeItem=null),s&&(s.classList.add(T),this._currentTreeItem=s)}_scrollToCurrentTreeItem(s){if(!s)return;let g=s.parentNode;for(;g&&g!==this.container;){if(g.classList.contains("treeItem")){const b=g.firstElementChild;b==null||b.classList.remove("treeItemsHidden")}g=g.parentNode}this._updateCurrentTreeItem(s),this.container.scrollTo(s.offsetLeft,s.offsetTop+a)}}_.BaseTreeViewer=E},(k,_,m)=>{var P,x,Xi,A,Mt,c,Ki,w,bs,F,Yi,G,_s;Object.defineProperty(_,"__esModule",{value:!0}),_.PDFDocumentProperties=void 0;var r=m(4),a=m(5);const T="-",E=["en-us","en-lr","my"],C={"8.5x11":"Letter","8.5x14":"Legal"},s={"297x420":"A3","210x297":"A4"};function g(V,Z,re){const te=Z?V.width:V.height,K=Z?V.height:V.width;return re[`${te}x${K}`]}class b{constructor({dialog:Z,fields:re,closeButton:te},K,ue,se,Ce){H(this,x);H(this,A);H(this,c);H(this,w);H(this,F);H(this,G);H(this,P,null);this.dialog=Z,this.fields=re,this.overlayManager=K,this.l10n=se,this._fileNameLookup=Ce,W(this,x,Xi).call(this),te.addEventListener("click",this.close.bind(this)),this.overlayManager.register(this.dialog),ue._on("pagechanging",Me=>{this._currentPageNumber=Me.pageNumber}),ue._on("rotationchanging",Me=>{this._pagesRotation=Me.pagesRotation}),this._isNonMetricLocale=!0,se.getLanguage().then(Me=>{this._isNonMetricLocale=E.includes(Me)})}async open(){await Promise.all([this.overlayManager.open(this.dialog),this._dataAvailableCapability.promise]);const Z=this._currentPageNumber,re=this._pagesRotation;if(i(this,P)&&Z===i(this,P)._currentPageNumber&&re===i(this,P)._pagesRotation){W(this,A,Mt).call(this);return}const{info:te,contentLength:K}=await this.pdfDocument.getMetadata(),[ue,se,Ce,Me,q,R]=await Promise.all([this._fileNameLookup(),W(this,c,Ki).call(this,K),W(this,F,Yi).call(this,te.CreationDate),W(this,F,Yi).call(this,te.ModDate),this.pdfDocument.getPage(Z).then(u=>W(this,w,bs).call(this,(0,r.getPageSizeInches)(u),re)),W(this,G,_s).call(this,te.IsLinearized)]);he(this,P,Object.freeze({fileName:ue,fileSize:se,title:te.Title,author:te.Author,subject:te.Subject,keywords:te.Keywords,creationDate:Ce,modificationDate:Me,creator:te.Creator,producer:te.Producer,version:te.PDFFormatVersion,pageCount:this.pdfDocument.numPages,pageSize:q,linearized:R,_currentPageNumber:Z,_pagesRotation:re})),W(this,A,Mt).call(this);const{length:O}=await this.pdfDocument.getDownloadInfo();if(K===O)return;const d=Object.assign(Object.create(null),i(this,P));d.fileSize=await W(this,c,Ki).call(this,O),he(this,P,Object.freeze(d)),W(this,A,Mt).call(this)}async close(){this.overlayManager.close(this.dialog)}setDocument(Z){this.pdfDocument&&(W(this,x,Xi).call(this),W(this,A,Mt).call(this,!0)),Z&&(this.pdfDocument=Z,this._dataAvailableCapability.resolve())}}P=new WeakMap,x=new WeakSet,Xi=function(){this.pdfDocument=null,he(this,P,null),this._dataAvailableCapability=new a.PromiseCapability,this._currentPageNumber=1,this._pagesRotation=0},A=new WeakSet,Mt=function(Z=!1){if(Z||!i(this,P)){for(const re in this.fields)this.fields[re].textContent=T;return}if(this.overlayManager.active===this.dialog)for(const re in this.fields){const te=i(this,P)[re];this.fields[re].textContent=te||te===0?te:T}},c=new WeakSet,Ki=async function(Z=0){const re=Z/1024,te=re/1024;if(re)return this.l10n.get(`document_properties_${te>=1?"mb":"kb"}`,{size_mb:te>=1&&(+te.toPrecision(3)).toLocaleString(),size_kb:te<1&&(+re.toPrecision(3)).toLocaleString(),size_b:Z.toLocaleString()})},w=new WeakSet,bs=async function(Z,re){if(!Z)return;re%180!==0&&(Z={width:Z.height,height:Z.width});const te=(0,r.isPortraitOrientation)(Z);let K={width:Math.round(Z.width*100)/100,height:Math.round(Z.height*100)/100},ue={width:Math.round(Z.width*25.4*10)/10,height:Math.round(Z.height*25.4*10)/10},se=g(K,te,C)||g(ue,te,s);if(!se&&!(Number.isInteger(ue.width)&&Number.isInteger(ue.height))){const d={width:Z.width*25.4,height:Z.height*25.4},u={width:Math.round(ue.width),height:Math.round(ue.height)};Math.abs(d.width-u.width)<.1&&Math.abs(d.height-u.height)<.1&&(se=g(u,te,s),se&&(K={width:Math.round(u.width/25.4*100)/100,height:Math.round(u.height/25.4*100)/100},ue=u))}const[{width:Ce,height:Me},q,R,O]=await Promise.all([this._isNonMetricLocale?K:ue,this.l10n.get(`document_properties_page_size_unit_${this._isNonMetricLocale?"inches":"millimeters"}`),se&&this.l10n.get(`document_properties_page_size_name_${se.toLowerCase()}`),this.l10n.get(`document_properties_page_size_orientation_${te?"portrait":"landscape"}`)]);return this.l10n.get(`document_properties_page_size_dimension_${R?"name_":""}string`,{width:Ce.toLocaleString(),height:Me.toLocaleString(),unit:q,name:R,orientation:O})},F=new WeakSet,Yi=async function(Z){const re=a.PDFDateString.toDateObject(Z);if(re)return this.l10n.get("document_properties_date_string",{date:re.toLocaleDateString(),time:re.toLocaleTimeString()})},G=new WeakSet,_s=function(Z){return this.l10n.get(`document_properties_linearized_${Z?"yes":"no"}`)},_.PDFDocumentProperties=b},(k,_,m)=>{var C,Rt;Object.defineProperty(_,"__esModule",{value:!0}),_.PDFFindBar=void 0;var r=m(20),a=m(4);const T=1e3;class E{constructor(b,P,x){H(this,C);this.opened=!1,this.bar=b.bar,this.toggleButton=b.toggleButton,this.findField=b.findField,this.highlightAll=b.highlightAllCheckbox,this.caseSensitive=b.caseSensitiveCheckbox,this.matchDiacritics=b.matchDiacriticsCheckbox,this.entireWord=b.entireWordCheckbox,this.findMsg=b.findMsg,this.findResultsCount=b.findResultsCount,this.findPreviousButton=b.findPreviousButton,this.findNextButton=b.findNextButton,this.eventBus=P,this.l10n=x,this.toggleButton.addEventListener("click",()=>{this.toggle()}),this.findField.addEventListener("input",()=>{this.dispatchEvent("")}),this.bar.addEventListener("keydown",y=>{switch(y.keyCode){case 13:y.target===this.findField&&this.dispatchEvent("again",y.shiftKey);break;case 27:this.close();break}}),this.findPreviousButton.addEventListener("click",()=>{this.dispatchEvent("again",!0)}),this.findNextButton.addEventListener("click",()=>{this.dispatchEvent("again",!1)}),this.highlightAll.addEventListener("click",()=>{this.dispatchEvent("highlightallchange")}),this.caseSensitive.addEventListener("click",()=>{this.dispatchEvent("casesensitivitychange")}),this.entireWord.addEventListener("click",()=>{this.dispatchEvent("entirewordchange")}),this.matchDiacritics.addEventListener("click",()=>{this.dispatchEvent("diacriticmatchingchange")}),this.eventBus._on("resize",W(this,C,Rt).bind(this))}reset(){this.updateUIState()}dispatchEvent(b,P=!1){this.eventBus.dispatch("find",{source:this,type:b,query:this.findField.value,caseSensitive:this.caseSensitive.checked,entireWord:this.entireWord.checked,highlightAll:this.highlightAll.checked,findPrevious:P,matchDiacritics:this.matchDiacritics.checked})}updateUIState(b,P,x){let y=Promise.resolve(""),A="";switch(b){case r.FindState.FOUND:break;case r.FindState.PENDING:A="pending";break;case r.FindState.NOT_FOUND:y=this.l10n.get("find_not_found"),A="notFound";break;case r.FindState.WRAPPED:y=this.l10n.get(`find_reached_${P?"top":"bottom"}`);break}this.findField.setAttribute("data-status",A),this.findField.setAttribute("aria-invalid",b===r.FindState.NOT_FOUND),y.then(o=>{this.findMsg.setAttribute("data-status",A),this.findMsg.textContent=o,W(this,C,Rt).call(this)}),this.updateResultsCount(x)}updateResultsCount({current:b=0,total:P=0}={}){const x=T;let y=Promise.resolve("");if(P>0)if(P>x){let A="find_match_count_limit";y=this.l10n.get(A,{limit:x})}else{let A="find_match_count";y=this.l10n.get(A,{current:b,total:P})}y.then(A=>{this.findResultsCount.textContent=A,W(this,C,Rt).call(this)})}open(){this.opened||(this.opened=!0,(0,a.toggleExpandedBtn)(this.toggleButton,!0,this.bar)),this.findField.select(),this.findField.focus(),W(this,C,Rt).call(this)}close(){this.opened&&(this.opened=!1,(0,a.toggleExpandedBtn)(this.toggleButton,!1,this.bar),this.eventBus.dispatch("findbarclose",{source:this}))}toggle(){this.opened?this.close():this.open()}}C=new WeakSet,Rt=function(){if(!this.opened)return;this.bar.classList.remove("wrapContainers");const b=this.bar.clientHeight,P=this.bar.firstElementChild.clientHeight;b>P&&this.bar.classList.add("wrapContainers")},_.PDFFindBar=E},(k,_,m)=>{var re,te,K,ue,vs,Ce,Zi,q,Ji,O,ws,u,ys,D,Ss,X,Qi,z,Es,Y,As,oe,Jt,Ee,Lt,ne,vt,ae,Ps,be,en,Le,tn,Be,Qt,He,Cs,Ge,nn,Te,sn,J,It;Object.defineProperty(_,"__esModule",{value:!0}),_.PDFFindController=_.FindState=void 0;var r=m(4),a=m(21),T=m(5);const E={FOUND:0,NOT_FOUND:1,WRAPPED:2,PENDING:3};_.FindState=E;const C=250,s=-50,g=-400,b={"‐":"-","‘":"'","’":"'","‚":"'","‛":"'","“":'"',"”":'"',"„":'"',"‟":'"',"¼":"1/4","½":"1/2","¾":"3/4"},P=new Set([12441,12442,2381,2509,2637,2765,2893,3021,3149,3277,3387,3388,3405,3530,3642,3770,3972,4153,4154,5908,5940,6098,6752,6980,7082,7083,7154,7155,11647,43014,43052,43204,43347,43456,43766,44013,3158,3953,3954,3962,3963,3964,3965,3968,3956]);let x;const y=/\p{M}+/gu,A=/([.*+?^${}()|[\]\\])|(\p{P})|(\s+)|(\p{M})|(\p{L})/gu,o=/([^\p{M}])\p{M}*$/u,c=/^\p{M}*([^\p{M}])/u,S=/[\uAC00-\uD7AF\uFA6C\uFACF-\uFAD1\uFAD5-\uFAD7]+/g,w=new Map,v="[\\u1100-\\u1112\\ud7a4-\\ud7af\\ud84a\\ud84c\\ud850\\ud854\\ud857\\ud85f]",F=new Map;let N=null,G=null;function le(ee){const ge=[];let ve;for(;(ve=S.exec(ee))!==null;){let{index:me}=ve;for(const L of ve[0]){let Q=w.get(L);Q||(Q=L.normalize("NFD").length,w.set(L,Q)),ge.push([Q,me++])}}let ie;if(ge.length===0&&N)ie=N;else if(ge.length>0&&G)ie=G;else{const me=Object.keys(b).join(""),L=(0,a.getNormalizeWithNFKC)(),we=`([${me}])|([${L}])|((?:゙|゚)\\n)|(\\p{M}+(?:-\\n)?)|(\\S-\\n)|((?:\\p{Ideographic}|[぀-ヿ])\\n)|(\\n)`;ge.length===0?ie=N=new RegExp(we+"|(\\u0000)","gum"):ie=G=new RegExp(we+`|(${v})`,"gum")}const _e=[];for(;(ve=y.exec(ee))!==null;)_e.push([ve[0].length,ve.index]);let ke=ee.normalize("NFD");const xe=[[0,0]];let Fe=0,Ve=0,We=0,Oe=0,Ye=0,$e=!1;return ke=ke.replace(ie,(me,L,Q,pe,we,Pe,Re,Ne,ze,Ue)=>{var tt,Xe,Ke;if(Ue-=Oe,L){const Ze=b[L],Qe=Ze.length;for(let it=1;it<Qe;it++)xe.push([Ue-We+it,We-it]);return We-=Qe-1,Ze}if(Q){let Ze=F.get(Q);Ze||(Ze=Q.normalize("NFKC"),F.set(Q,Ze));const Qe=Ze.length;for(let it=1;it<Qe;it++)xe.push([Ue-We+it,We-it]);return We-=Qe-1,Ze}if(pe)return $e=!0,Ue+Ye===((tt=_e[Fe])==null?void 0:tt[1])?++Fe:(xe.push([Ue-1-We+1,We-1]),We-=1,Oe+=1),xe.push([Ue-We+1,We]),Oe+=1,Ye+=1,pe.charAt(0);if(we){const Ze=we.endsWith(`
`),Qe=Ze?we.length-2:we.length;$e=!0;let it=Qe;Ue+Ye===((Xe=_e[Fe])==null?void 0:Xe[1])&&(it-=_e[Fe][0],++Fe);for(let nt=1;nt<=it;nt++)xe.push([Ue-1-We+nt,We-nt]);return We-=it,Oe+=it,Ze?(Ue+=Qe-1,xe.push([Ue-We+1,1+We]),We+=1,Oe+=1,Ye+=1,we.slice(0,Qe)):we}if(Pe){const Ze=Pe.length-2;return xe.push([Ue-We+Ze,1+We]),We+=1,Oe+=1,Ye+=1,Pe.slice(0,-2)}if(Re){const Ze=Re.length-1;return xe.push([Ue-We+Ze,We]),Oe+=1,Ye+=1,Re.slice(0,-1)}if(Ne)return xe.push([Ue-We+1,We-1]),We-=1,Oe+=1,Ye+=1," ";if(Ue+Ye===((Ke=ge[Ve])==null?void 0:Ke[1])){const Ze=ge[Ve][0]-1;++Ve;for(let Qe=1;Qe<=Ze;Qe++)xe.push([Ue-(We-Qe),We-Qe]);We-=Ze,Oe+=Ze}return ze}),xe.push([ke.length,We]),[ke,xe,$e]}function V(ee,ge,ve){if(!ee)return[ge,ve];const ie=ge,_e=ge+ve-1;let ke=(0,r.binarySearchFirstItem)(ee,Oe=>Oe[0]>=ie);ee[ke][0]>ie&&--ke;let xe=(0,r.binarySearchFirstItem)(ee,Oe=>Oe[0]>=_e,ke);ee[xe][0]>_e&&--xe;const Fe=ie+ee[ke][1],We=_e+ee[xe][1]+1-Fe;return[Fe,We]}class Z{constructor({linkService:ge,eventBus:ve,updateMatchesCountOnProgress:ie=!0}){H(this,ue);H(this,Ce);H(this,q);H(this,O);H(this,u);H(this,D);H(this,X);H(this,z);H(this,Y);H(this,oe);H(this,Ee);H(this,ne);H(this,ae);H(this,be);H(this,Le);H(this,Be);H(this,He);H(this,Ge);H(this,Te);H(this,J);H(this,re,null);H(this,te,!0);H(this,K,0);this._linkService=ge,this._eventBus=ve,he(this,te,ie),this.onIsPageVisible=null,W(this,Ce,Zi).call(this),ve._on("find",W(this,ue,vs).bind(this)),ve._on("findbarclose",W(this,He,Cs).bind(this))}get highlightMatches(){return this._highlightMatches}get pageMatches(){return this._pageMatches}get pageMatchesLength(){return this._pageMatchesLength}get selected(){return this._selected}get state(){return i(this,re)}setDocument(ge){this._pdfDocument&&W(this,Ce,Zi).call(this),ge&&(this._pdfDocument=ge,this._firstPageCapability.resolve())}scrollMatchIntoView({element:ge=null,selectedLeft:ve=0,pageIndex:ie=-1,matchIndex:_e=-1}){if(!this._scrollMatches||!ge)return;if(_e===-1||_e!==this._selected.matchIdx)return;if(ie===-1||ie!==this._selected.pageIdx)return;this._scrollMatches=!1;const ke={top:s,left:ve+g};(0,r.scrollIntoView)(ge,ke,!0)}}re=new WeakMap,te=new WeakMap,K=new WeakMap,ue=new WeakSet,vs=function(ge){if(!ge)return;ge.phraseSearch===!1&&(console.error("The `phraseSearch`-parameter was removed, please provide an Array of strings in the `query`-parameter instead."),typeof ge.query=="string"&&(ge.query=ge.query.match(/\S+/g)));const ve=this._pdfDocument,{type:ie}=ge;(i(this,re)===null||W(this,O,ws).call(this,ge))&&(this._dirtyMatch=!0),he(this,re,ge),ie!=="highlightallchange"&&W(this,J,It).call(this,E.PENDING),this._firstPageCapability.promise.then(()=>{if(!this._pdfDocument||ve&&this._pdfDocument!==ve)return;W(this,Y,As).call(this);const _e=!this._highlightMatches,ke=!!this._findTimeout;this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),ie?this._dirtyMatch?W(this,ne,vt).call(this):ie==="again"?(W(this,ne,vt).call(this),_e&&i(this,re).highlightAll&&W(this,Ee,Lt).call(this)):ie==="highlightallchange"?(ke?W(this,ne,vt).call(this):this._highlightMatches=!0,W(this,Ee,Lt).call(this)):W(this,ne,vt).call(this):this._findTimeout=setTimeout(()=>{W(this,ne,vt).call(this),this._findTimeout=null},C)})},Ce=new WeakSet,Zi=function(){this._highlightMatches=!1,this._scrollMatches=!1,this._pdfDocument=null,this._pageMatches=[],this._pageMatchesLength=[],he(this,K,0),he(this,re,null),this._selected={pageIdx:-1,matchIdx:-1},this._offset={pageIdx:null,matchIdx:null,wrapped:!1},this._extractTextPromises=[],this._pageContents=[],this._pageDiffs=[],this._hasDiacritics=[],this._matchesCountTotal=0,this._pagesToSearch=null,this._pendingFindMatches=new Set,this._resumePageIdx=null,this._dirtyMatch=!1,clearTimeout(this._findTimeout),this._findTimeout=null,this._firstPageCapability=new T.PromiseCapability},q=new WeakSet,Ji=function(){const{query:ge}=i(this,re);return typeof ge=="string"?(ge!==this._rawQuery&&(this._rawQuery=ge,[this._normalizedQuery]=le(ge)),this._normalizedQuery):(ge||[]).filter(ve=>!!ve).map(ve=>le(ve)[0])},O=new WeakSet,ws=function(ge){var xe;const ve=ge.query,ie=i(this,re).query,_e=typeof ve;if(_e!==typeof ie)return!0;if(_e==="string"){if(ve!==ie)return!0}else if(JSON.stringify(ve)!==JSON.stringify(ie))return!0;switch(ge.type){case"again":const Fe=this._selected.pageIdx+1,Ve=this._linkService;return Fe>=1&&Fe<=Ve.pagesCount&&Fe!==Ve.page&&!(((xe=this.onIsPageVisible)==null?void 0:xe.call(this,Fe))??!0);case"highlightallchange":return!1}return!0},u=new WeakSet,ys=function(ge,ve,ie){let _e=ge.slice(0,ve).match(o);if(_e){const ke=ge.charCodeAt(ve),xe=_e[1].charCodeAt(0);if((0,a.getCharacterType)(ke)===(0,a.getCharacterType)(xe))return!1}if(_e=ge.slice(ve+ie).match(c),_e){const ke=ge.charCodeAt(ve+ie-1),xe=_e[1].charCodeAt(0);if((0,a.getCharacterType)(ke)===(0,a.getCharacterType)(xe))return!1}return!0},D=new WeakSet,Ss=function(ge,ve,ie,_e){const ke=this._pageMatches[ie]=[],xe=this._pageMatchesLength[ie]=[];if(!ge)return;const Fe=this._pageDiffs[ie];let Ve;for(;(Ve=ge.exec(_e))!==null;){if(ve&&!W(this,u,ys).call(this,_e,Ve.index,Ve[0].length))continue;const[We,Oe]=V(Fe,Ve.index,Ve[0].length);Oe&&(ke.push(We),xe.push(Oe))}},X=new WeakSet,Qi=function(ge,ve){const{matchDiacritics:ie}=i(this,re);let _e=!1;ge=ge.replaceAll(A,(xe,Fe,Ve,We,Oe,Ye)=>Fe?`[ ]*\\${Fe}[ ]*`:Ve?`[ ]*${Ve}[ ]*`:We?"[ ]+":ie?Oe||Ye:Oe?P.has(Oe.charCodeAt(0))?Oe:"":ve?(_e=!0,`${Ye}\\p{M}*`):Ye);const ke="[ ]*";return ge.endsWith(ke)&&(ge=ge.slice(0,ge.length-ke.length)),ie&&ve&&(x||(x=String.fromCharCode(...P)),_e=!0,ge=`${ge}(?=[${x}]|[^\\p{M}]|$)`),[_e,ge]},z=new WeakSet,Es=function(ge){let ve=i(this,q,Ji);if(ve.length===0)return;const{caseSensitive:ie,entireWord:_e}=i(this,re),ke=this._pageContents[ge],xe=this._hasDiacritics[ge];let Fe=!1;typeof ve=="string"?[Fe,ve]=W(this,X,Qi).call(this,ve,xe):ve=ve.sort().reverse().map(Oe=>{const[Ye,$e]=W(this,X,Qi).call(this,Oe,xe);return Fe||(Fe=Ye),`(${$e})`}).join("|");const Ve=`g${Fe?"u":""}${ie?"":"i"}`;ve=ve?new RegExp(ve,Ve):null,W(this,D,Ss).call(this,ve,_e,ge,ke),i(this,re).highlightAll&&W(this,oe,Jt).call(this,ge),this._resumePageIdx===ge&&(this._resumePageIdx=null,W(this,be,en).call(this));const We=this._pageMatches[ge].length;this._matchesCountTotal+=We,i(this,te)?We>0&&W(this,Te,sn).call(this):++ft(this,K)._===this._linkService.pagesCount&&W(this,Te,sn).call(this)},Y=new WeakSet,As=function(){if(this._extractTextPromises.length>0)return;let ge=Promise.resolve();const ve={disableNormalization:!0};for(let ie=0,_e=this._linkService.pagesCount;ie<_e;ie++){const ke=new T.PromiseCapability;this._extractTextPromises[ie]=ke.promise,ge=ge.then(()=>this._pdfDocument.getPage(ie+1).then(xe=>xe.getTextContent(ve)).then(xe=>{const Fe=[];for(const Ve of xe.items)Fe.push(Ve.str),Ve.hasEOL&&Fe.push(`
`);[this._pageContents[ie],this._pageDiffs[ie],this._hasDiacritics[ie]]=le(Fe.join("")),ke.resolve()},xe=>{console.error(`Unable to get text content for page ${ie+1}`,xe),this._pageContents[ie]="",this._pageDiffs[ie]=null,this._hasDiacritics[ie]=!1,ke.resolve()}))}},oe=new WeakSet,Jt=function(ge){this._scrollMatches&&this._selected.pageIdx===ge&&(this._linkService.page=ge+1),this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:ge})},Ee=new WeakSet,Lt=function(){this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:-1})},ne=new WeakSet,vt=function(){const ge=i(this,re).findPrevious,ve=this._linkService.page-1,ie=this._linkService.pagesCount;if(this._highlightMatches=!0,this._dirtyMatch){this._dirtyMatch=!1,this._selected.pageIdx=this._selected.matchIdx=-1,this._offset.pageIdx=ve,this._offset.matchIdx=null,this._offset.wrapped=!1,this._resumePageIdx=null,this._pageMatches.length=0,this._pageMatchesLength.length=0,he(this,K,0),this._matchesCountTotal=0,W(this,Ee,Lt).call(this);for(let xe=0;xe<ie;xe++)this._pendingFindMatches.has(xe)||(this._pendingFindMatches.add(xe),this._extractTextPromises[xe].then(()=>{this._pendingFindMatches.delete(xe),W(this,z,Es).call(this,xe)}))}if(i(this,q,Ji).length===0){W(this,J,It).call(this,E.FOUND);return}if(this._resumePageIdx)return;const ke=this._offset;if(this._pagesToSearch=ie,ke.matchIdx!==null){const xe=this._pageMatches[ke.pageIdx].length;if(!ge&&ke.matchIdx+1<xe||ge&&ke.matchIdx>0){ke.matchIdx=ge?ke.matchIdx-1:ke.matchIdx+1,W(this,Be,Qt).call(this,!0);return}W(this,Le,tn).call(this,ge)}W(this,be,en).call(this)},ae=new WeakSet,Ps=function(ge){const ve=this._offset,ie=ge.length,_e=i(this,re).findPrevious;return ie?(ve.matchIdx=_e?ie-1:0,W(this,Be,Qt).call(this,!0),!0):(W(this,Le,tn).call(this,_e),ve.wrapped&&(ve.matchIdx=null,this._pagesToSearch<0)?(W(this,Be,Qt).call(this,!1),!0):!1)},be=new WeakSet,en=function(){this._resumePageIdx!==null&&console.error("There can only be one pending page.");let ge=null;do{const ve=this._offset.pageIdx;if(ge=this._pageMatches[ve],!ge){this._resumePageIdx=ve;break}}while(!W(this,ae,Ps).call(this,ge))},Le=new WeakSet,tn=function(ge){const ve=this._offset,ie=this._linkService.pagesCount;ve.pageIdx=ge?ve.pageIdx-1:ve.pageIdx+1,ve.matchIdx=null,this._pagesToSearch--,(ve.pageIdx>=ie||ve.pageIdx<0)&&(ve.pageIdx=ge?ie-1:0,ve.wrapped=!0)},Be=new WeakSet,Qt=function(ge=!1){let ve=E.NOT_FOUND;const ie=this._offset.wrapped;if(this._offset.wrapped=!1,ge){const _e=this._selected.pageIdx;this._selected.pageIdx=this._offset.pageIdx,this._selected.matchIdx=this._offset.matchIdx,ve=ie?E.WRAPPED:E.FOUND,_e!==-1&&_e!==this._selected.pageIdx&&W(this,oe,Jt).call(this,_e)}W(this,J,It).call(this,ve,i(this,re).findPrevious),this._selected.pageIdx!==-1&&(this._scrollMatches=!0,W(this,oe,Jt).call(this,this._selected.pageIdx))},He=new WeakSet,Cs=function(ge){const ve=this._pdfDocument;this._firstPageCapability.promise.then(()=>{!this._pdfDocument||ve&&this._pdfDocument!==ve||(this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),this._resumePageIdx&&(this._resumePageIdx=null,this._dirtyMatch=!0),W(this,J,It).call(this,E.FOUND),this._highlightMatches=!1,W(this,Ee,Lt).call(this))})},Ge=new WeakSet,nn=function(){var ke;const{pageIdx:ge,matchIdx:ve}=this._selected;let ie=0,_e=this._matchesCountTotal;if(ve!==-1){for(let xe=0;xe<ge;xe++)ie+=((ke=this._pageMatches[xe])==null?void 0:ke.length)||0;ie+=ve+1}return(ie<1||ie>_e)&&(ie=_e=0),{current:ie,total:_e}},Te=new WeakSet,sn=function(){this._eventBus.dispatch("updatefindmatchescount",{source:this,matchesCount:W(this,Ge,nn).call(this)})},J=new WeakSet,It=function(ge,ve=!1){var ie;!i(this,te)&&(i(this,K)!==this._linkService.pagesCount||ge===E.PENDING)||this._eventBus.dispatch("updatefindcontrolstate",{source:this,state:ge,previous:ve,matchesCount:W(this,Ge,nn).call(this),rawQuery:((ie=i(this,re))==null?void 0:ie.query)??null})},_.PDFFindController=Z},(k,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.CharacterType=void 0,_.getCharacterType=y,_.getNormalizeWithNFKC=o;const m={SPACE:0,ALPHA_LETTER:1,PUNCT:2,HAN_LETTER:3,KATAKANA_LETTER:4,HIRAGANA_LETTER:5,HALFWIDTH_KATAKANA_LETTER:6,THAI_LETTER:7};_.CharacterType=m;function r(c){return c<11904}function a(c){return(c&65408)===0}function T(c){return c>=97&&c<=122||c>=65&&c<=90}function E(c){return c>=48&&c<=57}function C(c){return c===32||c===9||c===13||c===10}function s(c){return c>=13312&&c<=40959||c>=63744&&c<=64255}function g(c){return c>=12448&&c<=12543}function b(c){return c>=12352&&c<=12447}function P(c){return c>=65376&&c<=65439}function x(c){return(c&65408)===3584}function y(c){return r(c)?a(c)?C(c)?m.SPACE:T(c)||E(c)||c===95?m.ALPHA_LETTER:m.PUNCT:x(c)?m.THAI_LETTER:c===160?m.SPACE:m.ALPHA_LETTER:s(c)?m.HAN_LETTER:g(c)?m.KATAKANA_LETTER:b(c)?m.HIRAGANA_LETTER:P(c)?m.HALFWIDTH_KATAKANA_LETTER:m.ALPHA_LETTER}let A;function o(){return A||(A=" ¨ª¯²-µ¸-º¼-¾Ĳ-ĳĿ-ŀŉſǄ-ǌǱ-ǳʰ-ʸ˘-˝ˠ-ˤʹͺ;΄-΅·ϐ-ϖϰ-ϲϴ-ϵϹևٵ-ٸक़-य़ড়-ঢ়য়ਲ਼ਸ਼ਖ਼-ਜ਼ਫ਼ଡ଼-ଢ଼ำຳໜ-ໝ༌གྷཌྷདྷབྷཛྷཀྵჼᴬ-ᴮᴰ-ᴺᴼ-ᵍᵏ-ᵪᵸᶛ-ᶿẚ-ẛάέήίόύώΆ᾽-῁ΈΉ῍-῏ΐΊ῝-῟ΰΎ῭-`ΌΏ´-῾ - ‑‗․-… ″-‴‶-‷‼‾⁇-⁉⁗ ⁰-ⁱ⁴-₎ₐ-ₜ₨℀-℃℅-ℇ℉-ℓℕ-№ℙ-ℝ℠-™ℤΩℨK-ℭℯ-ℱℳ-ℹ℻-⅀ⅅ-ⅉ⅐-ⅿ↉∬-∭∯-∰〈-〉①-⓪⨌⩴-⩶⫝̸ⱼ-ⱽⵯ⺟⻳⼀-⿕　〶〸-〺゛-゜ゟヿㄱ-ㆎ㆒-㆟㈀-㈞㈠-㉇㉐-㉾㊀-㏿ꚜ-ꚝꝰꟲ-ꟴꟸ-ꟹꭜ-ꭟꭩ豈-嗀塚晴凞-羽蘒諸逸-都飯-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-זּטּ-לּמּנּ-סּףּ-פּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-﷼︐-︙︰-﹄﹇-﹒﹔-﹦﹨-﹫ﹰ-ﹲﹴﹶ-ﻼ！-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ￠-￦"),A}},(k,_,m)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.PDFHistory=void 0,_.isDestArraysEqual=P,_.isDestHashesEqual=b;var r=m(4),a=m(10);const T=1e3,E=50,C=1e3;function s(){return document.location.hash}class g{constructor({linkService:y,eventBus:A}){this.linkService=y,this.eventBus=A,this._initialized=!1,this._fingerprint="",this.reset(),this._boundEvents=null,this.eventBus._on("pagesinit",()=>{this._isPagesLoaded=!1,this.eventBus._on("pagesloaded",o=>{this._isPagesLoaded=!!o.pagesCount},{once:!0})})}initialize({fingerprint:y,resetHistory:A=!1,updateUrl:o=!1}){if(!y||typeof y!="string"){console.error('PDFHistory.initialize: The "fingerprint" must be a non-empty string.');return}this._initialized&&this.reset();const c=this._fingerprint!==""&&this._fingerprint!==y;this._fingerprint=y,this._updateUrl=o===!0,this._initialized=!0,this._bindEvents();const S=window.history.state;if(this._popStateInProgress=!1,this._blockHashChange=0,this._currentHash=s(),this._numPositionUpdates=0,this._uid=this._maxUid=0,this._destination=null,this._position=null,!this._isValidState(S,!0)||A){const{hash:v,page:F,rotation:N}=this._parseCurrentHash(!0);if(!v||c||A){this._pushOrReplaceState(null,!0);return}this._pushOrReplaceState({hash:v,page:F,rotation:N},!0);return}const w=S.destination;this._updateInternalState(w,S.uid,!0),w.rotation!==void 0&&(this._initialRotation=w.rotation),w.dest?(this._initialBookmark=JSON.stringify(w.dest),this._destination.page=null):w.hash?this._initialBookmark=w.hash:w.page&&(this._initialBookmark=`page=${w.page}`)}reset(){this._initialized&&(this._pageHide(),this._initialized=!1,this._unbindEvents()),this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._initialBookmark=null,this._initialRotation=null}push({namedDest:y=null,explicitDest:A,pageNumber:o}){if(!this._initialized)return;if(y&&typeof y!="string"){console.error(`PDFHistory.push: "${y}" is not a valid namedDest parameter.`);return}else if(Array.isArray(A)){if(!this._isValidPage(o)&&(o!==null||this._destination)){console.error(`PDFHistory.push: "${o}" is not a valid pageNumber parameter.`);return}}else{console.error(`PDFHistory.push: "${A}" is not a valid explicitDest parameter.`);return}const c=y||JSON.stringify(A);if(!c)return;let S=!1;if(this._destination&&(b(this._destination.hash,c)||P(this._destination.dest,A))){if(this._destination.page)return;S=!0}this._popStateInProgress&&!S||(this._pushOrReplaceState({dest:A,hash:c,page:o,rotation:this.linkService.rotation},S),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1})))}pushPage(y){var A;if(this._initialized){if(!this._isValidPage(y)){console.error(`PDFHistory.pushPage: "${y}" is not a valid page number.`);return}((A=this._destination)==null?void 0:A.page)!==y&&(this._popStateInProgress||(this._pushOrReplaceState({dest:null,hash:`page=${y}`,page:y,rotation:this.linkService.rotation}),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1}))))}}pushCurrentPosition(){!this._initialized||this._popStateInProgress||this._tryPushCurrentPosition()}back(){if(!this._initialized||this._popStateInProgress)return;const y=window.history.state;this._isValidState(y)&&y.uid>0&&window.history.back()}forward(){if(!this._initialized||this._popStateInProgress)return;const y=window.history.state;this._isValidState(y)&&y.uid<this._maxUid&&window.history.forward()}get popStateInProgress(){return this._initialized&&(this._popStateInProgress||this._blockHashChange>0)}get initialBookmark(){return this._initialized?this._initialBookmark:null}get initialRotation(){return this._initialized?this._initialRotation:null}_pushOrReplaceState(y,A=!1){const o=A||!this._destination,c={fingerprint:this._fingerprint,uid:o?this._uid:this._uid+1,destination:y};this._updateInternalState(y,c.uid);let S;if(this._updateUrl&&(y!=null&&y.hash)){const w=document.location.href.split("#")[0];w.startsWith("file://")||(S=`${w}#${y.hash}`)}o?window.history.replaceState(c,"",S):window.history.pushState(c,"",S)}_tryPushCurrentPosition(y=!1){if(!this._position)return;let A=this._position;if(y&&(A=Object.assign(Object.create(null),this._position),A.temporary=!0),!this._destination){this._pushOrReplaceState(A);return}if(this._destination.temporary){this._pushOrReplaceState(A,!0);return}if(this._destination.hash===A.hash||!this._destination.page&&this._numPositionUpdates<=E)return;let o=!1;if(this._destination.page>=A.first&&this._destination.page<=A.page){if(this._destination.dest!==void 0||!this._destination.first)return;o=!0}this._pushOrReplaceState(A,o)}_isValidPage(y){return Number.isInteger(y)&&y>0&&y<=this.linkService.pagesCount}_isValidState(y,A=!1){if(!y)return!1;if(y.fingerprint!==this._fingerprint)if(A){if(typeof y.fingerprint!="string"||y.fingerprint.length!==this._fingerprint.length)return!1;const[o]=performance.getEntriesByType("navigation");if((o==null?void 0:o.type)!=="reload")return!1}else return!1;return!(!Number.isInteger(y.uid)||y.uid<0||y.destination===null||typeof y.destination!="object")}_updateInternalState(y,A,o=!1){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),o&&(y!=null&&y.temporary)&&delete y.temporary,this._destination=y,this._uid=A,this._maxUid=Math.max(this._maxUid,A),this._numPositionUpdates=0}_parseCurrentHash(y=!1){const A=unescape(s()).substring(1),o=(0,r.parseQueryString)(A),c=o.get("nameddest")||"";let S=o.get("page")|0;return(!this._isValidPage(S)||y&&c.length>0)&&(S=null),{hash:A,page:S,rotation:this.linkService.rotation}}_updateViewarea({location:y}){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._position={hash:y.pdfOpenParams.substring(1),page:this.linkService.page,first:y.pageNumber,rotation:y.rotation},!this._popStateInProgress&&(this._isPagesLoaded&&this._destination&&!this._destination.page&&this._numPositionUpdates++,this._updateViewareaTimeout=setTimeout(()=>{this._popStateInProgress||this._tryPushCurrentPosition(!0),this._updateViewareaTimeout=null},C))}_popState({state:y}){const A=s(),o=this._currentHash!==A;if(this._currentHash=A,!y){this._uid++;const{hash:S,page:w,rotation:v}=this._parseCurrentHash();this._pushOrReplaceState({hash:S,page:w,rotation:v},!0);return}if(!this._isValidState(y))return;this._popStateInProgress=!0,o&&(this._blockHashChange++,(0,a.waitOnEventOrTimeout)({target:window,name:"hashchange",delay:T}).then(()=>{this._blockHashChange--}));const c=y.destination;this._updateInternalState(c,y.uid,!0),(0,r.isValidRotation)(c.rotation)&&(this.linkService.rotation=c.rotation),c.dest?this.linkService.goToDestination(c.dest):c.hash?this.linkService.setHash(c.hash):c.page&&(this.linkService.page=c.page),Promise.resolve().then(()=>{this._popStateInProgress=!1})}_pageHide(){(!this._destination||this._destination.temporary)&&this._tryPushCurrentPosition()}_bindEvents(){this._boundEvents||(this._boundEvents={updateViewarea:this._updateViewarea.bind(this),popState:this._popState.bind(this),pageHide:this._pageHide.bind(this)},this.eventBus._on("updateviewarea",this._boundEvents.updateViewarea),window.addEventListener("popstate",this._boundEvents.popState),window.addEventListener("pagehide",this._boundEvents.pageHide))}_unbindEvents(){this._boundEvents&&(this.eventBus._off("updateviewarea",this._boundEvents.updateViewarea),window.removeEventListener("popstate",this._boundEvents.popState),window.removeEventListener("pagehide",this._boundEvents.pageHide),this._boundEvents=null)}}_.PDFHistory=g;function b(x,y){return typeof x!="string"||typeof y!="string"?!1:x===y||(0,r.parseQueryString)(x).get("nameddest")===y}function P(x,y){function A(o,c){if(typeof o!=typeof c||Array.isArray(o)||Array.isArray(c))return!1;if(o!==null&&typeof o=="object"&&c!==null){if(Object.keys(o).length!==Object.keys(c).length)return!1;for(const S in o)if(!A(o[S],c[S]))return!1;return!0}return o===c||Number.isNaN(o)&&Number.isNaN(c)}if(!(Array.isArray(x)&&Array.isArray(y))||x.length!==y.length)return!1;for(let o=0,c=x.length;o<c;o++)if(!A(x[o],y[o]))return!1;return!0}},(k,_,m)=>{var T,rn;Object.defineProperty(_,"__esModule",{value:!0}),_.PDFLayerViewer=void 0;var r=m(17);class a extends r.BaseTreeViewer{constructor(g){super(g);H(this,T);this.l10n=g.l10n,this.eventBus._on("optionalcontentconfigchanged",b=>{W(this,T,rn).call(this,b.promise)}),this.eventBus._on("resetlayers",()=>{W(this,T,rn).call(this)}),this.eventBus._on("togglelayerstree",this._toggleAllTreeItems.bind(this))}reset(){super.reset(),this._optionalContentConfig=null,this._optionalContentHash=null}_dispatchEvent(g){this.eventBus.dispatch("layersloaded",{source:this,layersCount:g})}_bindLink(g,{groupId:b,input:P}){const x=()=>{this._optionalContentConfig.setVisibility(b,P.checked),this._optionalContentHash=this._optionalContentConfig.getHash(),this.eventBus.dispatch("optionalcontentconfig",{source:this,promise:Promise.resolve(this._optionalContentConfig)})};g.onclick=y=>y.target===P?(x(),!0):y.target!==g?!0:(P.checked=!P.checked,x(),!1)}async _setNestedName(g,{name:b=null}){if(typeof b=="string"){g.textContent=this._normalizeTextContent(b);return}g.textContent=await this.l10n.get("additional_layers"),g.style.fontStyle="italic"}_addToggleButton(g,{name:b=null}){super._addToggleButton(g,b===null)}_toggleAllTreeItems(){this._optionalContentConfig&&super._toggleAllTreeItems()}render({optionalContentConfig:g,pdfDocument:b}){this._optionalContentConfig&&this.reset(),this._optionalContentConfig=g||null,this._pdfDocument=b||null;const P=g==null?void 0:g.getOrder();if(!P){this._dispatchEvent(0);return}this._optionalContentHash=g.getHash();const x=document.createDocumentFragment(),y=[{parent:x,groups:P}];let A=0,o=!1;for(;y.length>0;){const c=y.shift();for(const S of c.groups){const w=document.createElement("div");w.className="treeItem";const v=document.createElement("a");if(w.append(v),typeof S=="object"){o=!0,this._addToggleButton(w,S),this._setNestedName(v,S);const F=document.createElement("div");F.className="treeItems",w.append(F),y.push({parent:F,groups:S.order})}else{const F=g.getGroup(S),N=document.createElement("input");this._bindLink(v,{groupId:S,input:N}),N.type="checkbox",N.checked=F.visible;const G=document.createElement("label");G.textContent=this._normalizeTextContent(F.name),G.append(N),v.append(G),A++}c.parent.append(w)}}this._finishRendering(x,A,o)}}T=new WeakSet,rn=async function(g=null){if(!this._optionalContentConfig)return;const b=this._pdfDocument,P=await(g||b.getOptionalContentConfig());if(b===this._pdfDocument){if(g){if(P.getHash()===this._optionalContentHash)return}else this.eventBus.dispatch("optionalcontentconfig",{source:this,promise:Promise.resolve(P)});this.render({optionalContentConfig:P,pdfDocument:this._pdfDocument})}},_.PDFLayerViewer=a},(k,_,m)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.PDFOutlineViewer=void 0;var r=m(17),a=m(5),T=m(4);class E extends r.BaseTreeViewer{constructor(s){super(s),this.linkService=s.linkService,this.downloadManager=s.downloadManager,this.eventBus._on("toggleoutlinetree",this._toggleAllTreeItems.bind(this)),this.eventBus._on("currentoutlineitem",this._currentOutlineItem.bind(this)),this.eventBus._on("pagechanging",g=>{this._currentPageNumber=g.pageNumber}),this.eventBus._on("pagesloaded",g=>{this._isPagesLoaded=!!g.pagesCount,this._currentOutlineItemCapability&&!this._currentOutlineItemCapability.settled&&this._currentOutlineItemCapability.resolve(this._isPagesLoaded)}),this.eventBus._on("sidebarviewchanged",g=>{this._sidebarView=g.view})}reset(){super.reset(),this._outline=null,this._pageNumberToDestHashCapability=null,this._currentPageNumber=1,this._isPagesLoaded=null,this._currentOutlineItemCapability&&!this._currentOutlineItemCapability.settled&&this._currentOutlineItemCapability.resolve(!1),this._currentOutlineItemCapability=null}_dispatchEvent(s){var g;this._currentOutlineItemCapability=new a.PromiseCapability,s===0||(g=this._pdfDocument)!=null&&g.loadingParams.disableAutoFetch?this._currentOutlineItemCapability.resolve(!1):this._isPagesLoaded!==null&&this._currentOutlineItemCapability.resolve(this._isPagesLoaded),this.eventBus.dispatch("outlineloaded",{source:this,outlineCount:s,currentOutlineItemPromise:this._currentOutlineItemCapability.promise})}_bindLink(s,{url:g,newWindow:b,action:P,attachment:x,dest:y,setOCGState:A}){const{linkService:o}=this;if(g){o.addLinkAttributes(s,g,b);return}if(P){s.href=o.getAnchorUrl(""),s.onclick=()=>(o.executeNamedAction(P),!1);return}if(x){s.href=o.getAnchorUrl(""),s.onclick=()=>(this.downloadManager.openOrDownloadData(s,x.content,x.filename),!1);return}if(A){s.href=o.getAnchorUrl(""),s.onclick=()=>(o.executeSetOCGState(A),!1);return}s.href=o.getDestinationHash(y),s.onclick=c=>(this._updateCurrentTreeItem(c.target.parentNode),y&&o.goToDestination(y),!1)}_setStyles(s,{bold:g,italic:b}){g&&(s.style.fontWeight="bold"),b&&(s.style.fontStyle="italic")}_addToggleButton(s,{count:g,items:b}){let P=!1;if(g<0){let x=b.length;if(x>0){const y=[...b];for(;y.length>0;){const{count:A,items:o}=y.shift();A>0&&o.length>0&&(x+=o.length,y.push(...o))}}Math.abs(g)===x&&(P=!0)}super._addToggleButton(s,P)}_toggleAllTreeItems(){this._outline&&super._toggleAllTreeItems()}render({outline:s,pdfDocument:g}){if(this._outline&&this.reset(),this._outline=s||null,this._pdfDocument=g||null,!s){this._dispatchEvent(0);return}const b=document.createDocumentFragment(),P=[{parent:b,items:s}];let x=0,y=!1;for(;P.length>0;){const A=P.shift();for(const o of A.items){const c=document.createElement("div");c.className="treeItem";const S=document.createElement("a");if(this._bindLink(S,o),this._setStyles(S,o),S.textContent=this._normalizeTextContent(o.title),c.append(S),o.items.length>0){y=!0,this._addToggleButton(c,o);const w=document.createElement("div");w.className="treeItems",c.append(w),P.push({parent:w,items:o.items})}A.parent.append(c),x++}}this._finishRendering(b,x,y)}async _currentOutlineItem(){if(!this._isPagesLoaded)throw new Error("_currentOutlineItem: All pages have not been loaded.");if(!this._outline||!this._pdfDocument)return;const s=await this._getPageNumberToDestHash(this._pdfDocument);if(s&&(this._updateCurrentTreeItem(null),this._sidebarView===T.SidebarView.OUTLINE))for(let g=this._currentPageNumber;g>0;g--){const b=s.get(g);if(!b)continue;const P=this.container.querySelector(`a[href="${b}"]`);if(P){this._scrollToCurrentTreeItem(P.parentNode);break}}}async _getPageNumberToDestHash(s){if(this._pageNumberToDestHashCapability)return this._pageNumberToDestHashCapability.promise;this._pageNumberToDestHashCapability=new a.PromiseCapability;const g=new Map,b=new Map,P=[{nesting:0,items:this._outline}];for(;P.length>0;){const x=P.shift(),y=x.nesting;for(const{dest:A,items:o}of x.items){let c,S;if(typeof A=="string"){if(c=await s.getDestination(A),s!==this._pdfDocument)return null}else c=A;if(Array.isArray(c)){const[w]=c;if(typeof w=="object"&&w!==null){if(S=this.linkService._cachedPageNumber(w),!S)try{if(S=await s.getPageIndex(w)+1,s!==this._pdfDocument)return null;this.linkService.cachePageRef(S,w)}catch{}}else Number.isInteger(w)&&(S=w+1);if(Number.isInteger(S)&&(!g.has(S)||y>b.get(S))){const v=this.linkService.getDestinationHash(A);g.set(S,v),b.set(S,y)}}o.length>0&&P.push({nesting:y+1,items:o})}}return this._pageNumberToDestHashCapability.resolve(g.size>0?g:null),this._pageNumberToDestHashCapability.promise}}_.PDFOutlineViewer=E},(k,_,m)=>{var y,A,o,Ts,S,kt,v,xs,N,Ms,le,Rs,Z,Ls,te,an,ue,Is,Ce,Ot,q,ks,O,Os,u,Fs,D,Ns,X,Ds,z,on;Object.defineProperty(_,"__esModule",{value:!0}),_.PDFPresentationMode=void 0;var r=m(4),a=m(5);const T=3e3,E="pdfPresentationMode",C="pdfPresentationModeControls",s=50,g=.1,b=50,P=Math.PI/6;class x{constructor({container:ce,pdfViewer:oe,eventBus:Se}){H(this,o);H(this,S);H(this,v);H(this,N);H(this,le);H(this,Z);H(this,te);H(this,ue);H(this,Ce);H(this,q);H(this,O);H(this,u);H(this,D);H(this,X);H(this,z);H(this,y,r.PresentationModeState.UNKNOWN);H(this,A,null);this.container=ce,this.pdfViewer=oe,this.eventBus=Se,this.contextMenuOpen=!1,this.mouseScrollTimeStamp=0,this.mouseScrollDelta=0,this.touchSwipeState=null}async request(){const{container:ce,pdfViewer:oe}=this;if(this.active||!oe.pagesCount||!ce.requestFullscreen)return!1;W(this,X,Ds).call(this),W(this,S,kt).call(this,r.PresentationModeState.CHANGING);const Se=ce.requestFullscreen();he(this,A,{pageNumber:oe.currentPageNumber,scaleValue:oe.currentScaleValue,scrollMode:oe.scrollMode,spreadMode:null,annotationEditorMode:null}),oe.spreadMode!==r.SpreadMode.NONE&&!(oe.pageViewsReady&&oe.hasEqualPageSizes)&&(console.warn("Ignoring Spread modes when entering PresentationMode, since the document may contain varying page sizes."),i(this,A).spreadMode=oe.spreadMode),oe.annotationEditorMode!==a.AnnotationEditorType.DISABLE&&(i(this,A).annotationEditorMode=oe.annotationEditorMode);try{return await Se,oe.focus(),!0}catch{W(this,z,on).call(this),W(this,S,kt).call(this,r.PresentationModeState.NORMAL)}return!1}get active(){return i(this,y)===r.PresentationModeState.CHANGING||i(this,y)===r.PresentationModeState.FULLSCREEN}}y=new WeakMap,A=new WeakMap,o=new WeakSet,Ts=function(ce){if(!this.active)return;ce.preventDefault();const oe=(0,r.normalizeWheelEventDelta)(ce),Se=Date.now(),Ee=this.mouseScrollTimeStamp;if(!(Se>Ee&&Se-Ee<s)&&((this.mouseScrollDelta>0&&oe<0||this.mouseScrollDelta<0&&oe>0)&&W(this,Ce,Ot).call(this),this.mouseScrollDelta+=oe,Math.abs(this.mouseScrollDelta)>=g)){const ye=this.mouseScrollDelta;W(this,Ce,Ot).call(this),(ye>0?this.pdfViewer.previousPage():this.pdfViewer.nextPage())&&(this.mouseScrollTimeStamp=Se)}},S=new WeakSet,kt=function(ce){he(this,y,ce),this.eventBus.dispatch("presentationmodechanged",{source:this,state:ce})},v=new WeakSet,xs=function(){W(this,S,kt).call(this,r.PresentationModeState.FULLSCREEN),this.container.classList.add(E),setTimeout(()=>{this.pdfViewer.scrollMode=r.ScrollMode.PAGE,i(this,A).spreadMode!==null&&(this.pdfViewer.spreadMode=r.SpreadMode.NONE),this.pdfViewer.currentPageNumber=i(this,A).pageNumber,this.pdfViewer.currentScaleValue="page-fit",i(this,A).annotationEditorMode!==null&&(this.pdfViewer.annotationEditorMode={mode:a.AnnotationEditorType.NONE})},0),W(this,O,Os).call(this),W(this,te,an).call(this),this.contextMenuOpen=!1,window.getSelection().removeAllRanges()},N=new WeakSet,Ms=function(){const ce=this.pdfViewer.currentPageNumber;this.container.classList.remove(E),setTimeout(()=>{W(this,z,on).call(this),W(this,S,kt).call(this,r.PresentationModeState.NORMAL),this.pdfViewer.scrollMode=i(this,A).scrollMode,i(this,A).spreadMode!==null&&(this.pdfViewer.spreadMode=i(this,A).spreadMode),this.pdfViewer.currentScaleValue=i(this,A).scaleValue,this.pdfViewer.currentPageNumber=ce,i(this,A).annotationEditorMode!==null&&(this.pdfViewer.annotationEditorMode={mode:i(this,A).annotationEditorMode}),he(this,A,null)},0),W(this,u,Fs).call(this),W(this,ue,Is).call(this),W(this,Ce,Ot).call(this),this.contextMenuOpen=!1},le=new WeakSet,Rs=function(ce){var oe;if(this.contextMenuOpen){this.contextMenuOpen=!1,ce.preventDefault();return}ce.button===0&&(ce.target.href&&((oe=ce.target.parentNode)!=null&&oe.hasAttribute("data-internal-link"))||(ce.preventDefault(),ce.shiftKey?this.pdfViewer.previousPage():this.pdfViewer.nextPage()))},Z=new WeakSet,Ls=function(){this.contextMenuOpen=!0},te=new WeakSet,an=function(){this.controlsTimeout?clearTimeout(this.controlsTimeout):this.container.classList.add(C),this.controlsTimeout=setTimeout(()=>{this.container.classList.remove(C),delete this.controlsTimeout},T)},ue=new WeakSet,Is=function(){this.controlsTimeout&&(clearTimeout(this.controlsTimeout),this.container.classList.remove(C),delete this.controlsTimeout)},Ce=new WeakSet,Ot=function(){this.mouseScrollTimeStamp=0,this.mouseScrollDelta=0},q=new WeakSet,ks=function(ce){if(this.active){if(ce.touches.length>1){this.touchSwipeState=null;return}switch(ce.type){case"touchstart":this.touchSwipeState={startX:ce.touches[0].pageX,startY:ce.touches[0].pageY,endX:ce.touches[0].pageX,endY:ce.touches[0].pageY};break;case"touchmove":if(this.touchSwipeState===null)return;this.touchSwipeState.endX=ce.touches[0].pageX,this.touchSwipeState.endY=ce.touches[0].pageY,ce.preventDefault();break;case"touchend":if(this.touchSwipeState===null)return;let oe=0;const Se=this.touchSwipeState.endX-this.touchSwipeState.startX,Ee=this.touchSwipeState.endY-this.touchSwipeState.startY,ye=Math.abs(Math.atan2(Ee,Se));Math.abs(Se)>b&&(ye<=P||ye>=Math.PI-P)?oe=Se:Math.abs(Ee)>b&&Math.abs(ye-Math.PI/2)<=P&&(oe=Ee),oe>0?this.pdfViewer.previousPage():oe<0&&this.pdfViewer.nextPage();break}}},O=new WeakSet,Os=function(){this.showControlsBind=W(this,te,an).bind(this),this.mouseDownBind=W(this,le,Rs).bind(this),this.mouseWheelBind=W(this,o,Ts).bind(this),this.resetMouseScrollStateBind=W(this,Ce,Ot).bind(this),this.contextMenuBind=W(this,Z,Ls).bind(this),this.touchSwipeBind=W(this,q,ks).bind(this),window.addEventListener("mousemove",this.showControlsBind),window.addEventListener("mousedown",this.mouseDownBind),window.addEventListener("wheel",this.mouseWheelBind,{passive:!1}),window.addEventListener("keydown",this.resetMouseScrollStateBind),window.addEventListener("contextmenu",this.contextMenuBind),window.addEventListener("touchstart",this.touchSwipeBind),window.addEventListener("touchmove",this.touchSwipeBind),window.addEventListener("touchend",this.touchSwipeBind)},u=new WeakSet,Fs=function(){window.removeEventListener("mousemove",this.showControlsBind),window.removeEventListener("mousedown",this.mouseDownBind),window.removeEventListener("wheel",this.mouseWheelBind,{passive:!1}),window.removeEventListener("keydown",this.resetMouseScrollStateBind),window.removeEventListener("contextmenu",this.contextMenuBind),window.removeEventListener("touchstart",this.touchSwipeBind),window.removeEventListener("touchmove",this.touchSwipeBind),window.removeEventListener("touchend",this.touchSwipeBind),delete this.showControlsBind,delete this.mouseDownBind,delete this.mouseWheelBind,delete this.resetMouseScrollStateBind,delete this.contextMenuBind,delete this.touchSwipeBind},D=new WeakSet,Ns=function(){document.fullscreenElement?W(this,v,xs).call(this):W(this,N,Ms).call(this)},X=new WeakSet,Ds=function(){this.fullscreenChangeBind=W(this,D,Ns).bind(this),window.addEventListener("fullscreenchange",this.fullscreenChangeBind)},z=new WeakSet,on=function(){window.removeEventListener("fullscreenchange",this.fullscreenChangeBind),delete this.fullscreenChangeBind},_.PDFPresentationMode=x},(k,_,m)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.PDFRenderingQueue=void 0;var r=m(5),a=m(4);const T=3e4;class E{constructor(){this.pdfViewer=null,this.pdfThumbnailViewer=null,this.onIdle=null,this.highestPriorityPage=null,this.idleTimeout=null,this.printing=!1,this.isThumbnailViewEnabled=!1,Object.defineProperty(this,"hasViewer",{value:()=>!!this.pdfViewer})}setViewer(s){this.pdfViewer=s}setThumbnailViewer(s){this.pdfThumbnailViewer=s}isHighestPriority(s){return this.highestPriorityPage===s.renderingId}renderHighestPriority(s){var g;this.idleTimeout&&(clearTimeout(this.idleTimeout),this.idleTimeout=null),!this.pdfViewer.forceRendering(s)&&(this.isThumbnailViewEnabled&&((g=this.pdfThumbnailViewer)!=null&&g.forceRendering())||this.printing||this.onIdle&&(this.idleTimeout=setTimeout(this.onIdle.bind(this),T)))}getHighestPriority(s,g,b,P=!1){const x=s.views,y=x.length;if(y===0)return null;for(let w=0;w<y;w++){const v=x[w].view;if(!this.isViewFinished(v))return v}const A=s.first.id,o=s.last.id;if(o-A+1>y){const w=s.ids;for(let v=1,F=o-A;v<F;v++){const N=b?A+v:o-v;if(w.has(N))continue;const G=g[N-1];if(!this.isViewFinished(G))return G}}let c=b?o:A-2,S=g[c];return S&&!this.isViewFinished(S)||P&&(c+=b?1:-1,S=g[c],S&&!this.isViewFinished(S))?S:null}isViewFinished(s){return s.renderingState===a.RenderingStates.FINISHED}renderView(s){switch(s.renderingState){case a.RenderingStates.FINISHED:return!1;case a.RenderingStates.PAUSED:this.highestPriorityPage=s.renderingId,s.resume();break;case a.RenderingStates.RUNNING:this.highestPriorityPage=s.renderingId;break;case a.RenderingStates.INITIAL:this.highestPriorityPage=s.renderingId,s.draw().finally(()=>{this.renderHighestPriority()}).catch(g=>{g instanceof r.RenderingCancelledException||console.error(`renderView: "${g}"`)});break}return!0}}_.PDFRenderingQueue=E},(k,_,m)=>{var E,C,s,g,b,P,x,y,A,o,c,S,Bs,v,ei,N,ln,le,Vs,Z,Ft;Object.defineProperty(_,"__esModule",{value:!0}),_.PDFScriptingManager=void 0;var r=m(4),a=m(5);class T{constructor({eventBus:K,sandboxBundleSrc:ue=null,externalServices:se=null,docProperties:Ce=null}){H(this,S);H(this,v);H(this,N);H(this,le);H(this,Z);H(this,E,null);H(this,C,null);H(this,s,null);H(this,g,null);H(this,b,null);H(this,P,null);H(this,x,null);H(this,y,!1);H(this,A,null);H(this,o,null);H(this,c,null);he(this,g,K),he(this,A,ue),he(this,b,se),he(this,s,Ce)}setViewer(K){he(this,x,K)}async setDocument(K){var Me;if(i(this,P)&&await W(this,Z,Ft).call(this),he(this,P,K),!K)return;const[ue,se,Ce]=await Promise.all([K.getFieldObjects(),K.getCalculationOrderIds(),K.getJSActions()]);if(!ue&&!Ce){await W(this,Z,Ft).call(this);return}if(K===i(this,P)){try{he(this,o,W(this,le,Vs).call(this))}catch(q){console.error(`setDocument: "${q.message}".`),await W(this,Z,Ft).call(this);return}this._internalEvents.set("updatefromsandbox",q=>{(q==null?void 0:q.source)===window&&W(this,S,Bs).call(this,q.detail)}),this._internalEvents.set("dispatcheventinsandbox",q=>{var R;(R=i(this,o))==null||R.dispatchEventInSandbox(q.detail)}),this._internalEvents.set("pagechanging",({pageNumber:q,previous:R})=>{q!==R&&(W(this,N,ln).call(this,R),W(this,v,ei).call(this,q))}),this._internalEvents.set("pagerendered",({pageNumber:q})=>{this._pageOpenPending.has(q)&&q===i(this,x).currentPageNumber&&W(this,v,ei).call(this,q)}),this._internalEvents.set("pagesdestroy",async()=>{var q,R;await W(this,N,ln).call(this,i(this,x).currentPageNumber),await((q=i(this,o))==null?void 0:q.dispatchEventInSandbox({id:"doc",name:"WillClose"})),(R=i(this,E))==null||R.resolve()});for(const[q,R]of this._internalEvents)i(this,g)._on(q,R);try{const q=await i(this,s).call(this,K);if(K!==i(this,P))return;await i(this,o).createSandbox({objects:ue,calculationOrder:se,appInfo:{platform:navigator.platform,language:navigator.language},docInfo:{...q,actions:Ce}}),i(this,g).dispatch("sandboxcreated",{source:this})}catch(q){console.error(`setDocument: "${q.message}".`),await W(this,Z,Ft).call(this);return}await((Me=i(this,o))==null?void 0:Me.dispatchEventInSandbox({id:"doc",name:"Open"})),await W(this,v,ei).call(this,i(this,x).currentPageNumber,!0),Promise.resolve().then(()=>{K===i(this,P)&&he(this,y,!0)})}}async dispatchWillSave(){var K;return(K=i(this,o))==null?void 0:K.dispatchEventInSandbox({id:"doc",name:"WillSave"})}async dispatchDidSave(){var K;return(K=i(this,o))==null?void 0:K.dispatchEventInSandbox({id:"doc",name:"DidSave"})}async dispatchWillPrint(){var K;if(i(this,o)){await((K=i(this,c))==null?void 0:K.promise),he(this,c,new a.PromiseCapability);try{await i(this,o).dispatchEventInSandbox({id:"doc",name:"WillPrint"})}catch(ue){throw i(this,c).resolve(),he(this,c,null),ue}await i(this,c).promise}}async dispatchDidPrint(){var K;return(K=i(this,o))==null?void 0:K.dispatchEventInSandbox({id:"doc",name:"DidPrint"})}get destroyPromise(){var K;return((K=i(this,C))==null?void 0:K.promise)||null}get ready(){return i(this,y)}get _internalEvents(){return(0,a.shadow)(this,"_internalEvents",new Map)}get _pageOpenPending(){return(0,a.shadow)(this,"_pageOpenPending",new Set)}get _visitedPages(){return(0,a.shadow)(this,"_visitedPages",new Map)}}E=new WeakMap,C=new WeakMap,s=new WeakMap,g=new WeakMap,b=new WeakMap,P=new WeakMap,x=new WeakMap,y=new WeakMap,A=new WeakMap,o=new WeakMap,c=new WeakMap,S=new WeakSet,Bs=async function(K){var d,u;const ue=i(this,x),se=ue.isInPresentationMode||ue.isChangingPresentationMode,{id:Ce,siblings:Me,command:q,value:R}=K;if(!Ce){switch(q){case"clear":console.clear();break;case"error":console.error(R);break;case"layout":if(!se){const M=(0,r.apiPageLayoutToViewerModes)(R);ue.spreadMode=M.spreadMode}break;case"page-num":ue.currentPageNumber=R+1;break;case"print":await ue.pagesPromise,i(this,g).dispatch("print",{source:this});break;case"println":console.log(R);break;case"zoom":se||(ue.currentScaleValue=R);break;case"SaveAs":i(this,g).dispatch("download",{source:this});break;case"FirstPage":ue.currentPageNumber=1;break;case"LastPage":ue.currentPageNumber=ue.pagesCount;break;case"NextPage":ue.nextPage();break;case"PrevPage":ue.previousPage();break;case"ZoomViewIn":se||ue.increaseScale();break;case"ZoomViewOut":se||ue.decreaseScale();break;case"WillPrintFinished":(d=i(this,c))==null||d.resolve(),he(this,c,null);break}return}if(se&&K.focus)return;delete K.id,delete K.siblings;const O=Me?[Ce,...Me]:[Ce];for(const M of O){const D=document.querySelector(`[data-element-id="${M}"]`);D?D.dispatchEvent(new CustomEvent("updatefromsandbox",{detail:K})):(u=i(this,P))==null||u.annotationStorage.setValue(M,K)}},v=new WeakSet,ei=async function(K,ue=!1){const se=i(this,P),Ce=this._visitedPages;if(ue&&he(this,E,new a.PromiseCapability),!i(this,E))return;const Me=i(this,x).getPageView(K-1);if((Me==null?void 0:Me.renderingState)!==r.RenderingStates.FINISHED){this._pageOpenPending.add(K);return}this._pageOpenPending.delete(K);const q=(async()=>{var O,d;const R=await(Ce.has(K)?null:(O=Me.pdfPage)==null?void 0:O.getJSActions());se===i(this,P)&&await((d=i(this,o))==null?void 0:d.dispatchEventInSandbox({id:"page",name:"PageOpen",pageNumber:K,actions:R}))})();Ce.set(K,q)},N=new WeakSet,ln=async function(K){var Me;const ue=i(this,P),se=this._visitedPages;if(!i(this,E)||this._pageOpenPending.has(K))return;const Ce=se.get(K);Ce&&(se.set(K,null),await Ce,ue===i(this,P)&&await((Me=i(this,o))==null?void 0:Me.dispatchEventInSandbox({id:"page",name:"PageClose",pageNumber:K})))},le=new WeakSet,Vs=function(){if(he(this,C,new a.PromiseCapability),i(this,o))throw new Error("#initScripting: Scripting already exists.");return i(this,b).createScripting({sandboxBundleSrc:i(this,A)})},Z=new WeakSet,Ft=async function(){var K,ue,se;if(!i(this,o)){he(this,P,null),(K=i(this,C))==null||K.resolve();return}i(this,E)&&(await Promise.race([i(this,E).promise,new Promise(Ce=>{setTimeout(Ce,1e3)})]).catch(()=>{}),he(this,E,null)),he(this,P,null);try{await i(this,o).destroySandbox()}catch{}(ue=i(this,c))==null||ue.reject(new Error("Scripting destroyed.")),he(this,c,null);for(const[Ce,Me]of this._internalEvents)i(this,g)._off(Ce,Me);this._internalEvents.clear(),this._pageOpenPending.clear(),this._visitedPages.clear(),he(this,o,null),he(this,y,!1),(se=i(this,C))==null||se.resolve()},_.PDFScriptingManager=T},(k,_,m)=>{var g,b,P,x,y,A,wt,c,Us,w,cn,F,Hs,G,ti,V,zs,re,js;Object.defineProperty(_,"__esModule",{value:!0}),_.PDFSidebar=void 0;var r=m(4);const a="--sidebar-width",T=200,E="sidebarResizing",C="pdfSidebarNotification";class s{constructor({elements:ue,eventBus:se,l10n:Ce}){H(this,A);H(this,c);H(this,w);H(this,F);H(this,G);H(this,V);H(this,re);H(this,g,!1);H(this,b,W(this,V,zs).bind(this));H(this,P,W(this,re,js).bind(this));H(this,x,null);H(this,y,null);this.isOpen=!1,this.active=r.SidebarView.THUMBS,this.isInitialViewSet=!1,this.isInitialEventDispatched=!1,this.onToggled=null,this.onUpdateThumbnails=null,this.outerContainer=ue.outerContainer,this.sidebarContainer=ue.sidebarContainer,this.toggleButton=ue.toggleButton,this.resizer=ue.resizer,this.thumbnailButton=ue.thumbnailButton,this.outlineButton=ue.outlineButton,this.attachmentsButton=ue.attachmentsButton,this.layersButton=ue.layersButton,this.thumbnailView=ue.thumbnailView,this.outlineView=ue.outlineView,this.attachmentsView=ue.attachmentsView,this.layersView=ue.layersView,this._outlineOptionsContainer=ue.outlineOptionsContainer,this._currentOutlineItemButton=ue.currentOutlineItemButton,this.eventBus=se,this.l10n=Ce,Ce.getDirection().then(Me=>{he(this,g,Me==="rtl")}),W(this,F,Hs).call(this)}reset(){this.isInitialViewSet=!1,this.isInitialEventDispatched=!1,W(this,w,cn).call(this,!0),this.switchView(r.SidebarView.THUMBS),this.outlineButton.disabled=!1,this.attachmentsButton.disabled=!1,this.layersButton.disabled=!1,this._currentOutlineItemButton.disabled=!0}get visibleView(){return this.isOpen?this.active:r.SidebarView.NONE}setInitialView(ue=r.SidebarView.NONE){if(!this.isInitialViewSet){if(this.isInitialViewSet=!0,ue===r.SidebarView.NONE||ue===r.SidebarView.UNKNOWN){W(this,A,wt).call(this);return}this.switchView(ue,!0),this.isInitialEventDispatched||W(this,A,wt).call(this)}}switchView(ue,se=!1){const Ce=ue!==this.active;let Me=!1;switch(ue){case r.SidebarView.NONE:this.isOpen&&this.close();return;case r.SidebarView.THUMBS:this.isOpen&&Ce&&(Me=!0);break;case r.SidebarView.OUTLINE:if(this.outlineButton.disabled)return;break;case r.SidebarView.ATTACHMENTS:if(this.attachmentsButton.disabled)return;break;case r.SidebarView.LAYERS:if(this.layersButton.disabled)return;break;default:console.error(`PDFSidebar.switchView: "${ue}" is not a valid view.`);return}if(this.active=ue,(0,r.toggleCheckedBtn)(this.thumbnailButton,ue===r.SidebarView.THUMBS,this.thumbnailView),(0,r.toggleCheckedBtn)(this.outlineButton,ue===r.SidebarView.OUTLINE,this.outlineView),(0,r.toggleCheckedBtn)(this.attachmentsButton,ue===r.SidebarView.ATTACHMENTS,this.attachmentsView),(0,r.toggleCheckedBtn)(this.layersButton,ue===r.SidebarView.LAYERS,this.layersView),this._outlineOptionsContainer.classList.toggle("hidden",ue!==r.SidebarView.OUTLINE),se&&!this.isOpen){this.open();return}Me&&(this.onUpdateThumbnails(),this.onToggled()),Ce&&W(this,A,wt).call(this)}open(){this.isOpen||(this.isOpen=!0,(0,r.toggleExpandedBtn)(this.toggleButton,!0),this.outerContainer.classList.add("sidebarMoving","sidebarOpen"),this.active===r.SidebarView.THUMBS&&this.onUpdateThumbnails(),this.onToggled(),W(this,A,wt).call(this),W(this,w,cn).call(this))}close(){this.isOpen&&(this.isOpen=!1,(0,r.toggleExpandedBtn)(this.toggleButton,!1),this.outerContainer.classList.add("sidebarMoving"),this.outerContainer.classList.remove("sidebarOpen"),this.onToggled(),W(this,A,wt).call(this))}toggle(){this.isOpen?this.close():this.open()}get outerContainerWidth(){return i(this,x)||he(this,x,this.outerContainer.clientWidth)}}g=new WeakMap,b=new WeakMap,P=new WeakMap,x=new WeakMap,y=new WeakMap,A=new WeakSet,wt=function(){this.isInitialViewSet&&(this.isInitialEventDispatched||(this.isInitialEventDispatched=!0)),this.eventBus.dispatch("sidebarviewchanged",{source:this,view:this.visibleView})},c=new WeakSet,Us=function(){this.toggleButton.setAttribute("data-l10n-id","toggle_sidebar_notification2"),this.l10n.translate(this.toggleButton),this.isOpen||this.toggleButton.classList.add(C)},w=new WeakSet,cn=function(ue=!1){(this.isOpen||ue)&&this.toggleButton.classList.remove(C),ue&&(this.toggleButton.setAttribute("data-l10n-id","toggle_sidebar"),this.l10n.translate(this.toggleButton))},F=new WeakSet,Hs=function(){this.sidebarContainer.addEventListener("transitionend",se=>{se.target===this.sidebarContainer&&this.outerContainer.classList.remove("sidebarMoving")}),this.toggleButton.addEventListener("click",()=>{this.toggle()}),this.thumbnailButton.addEventListener("click",()=>{this.switchView(r.SidebarView.THUMBS)}),this.outlineButton.addEventListener("click",()=>{this.switchView(r.SidebarView.OUTLINE)}),this.outlineButton.addEventListener("dblclick",()=>{this.eventBus.dispatch("toggleoutlinetree",{source:this})}),this.attachmentsButton.addEventListener("click",()=>{this.switchView(r.SidebarView.ATTACHMENTS)}),this.layersButton.addEventListener("click",()=>{this.switchView(r.SidebarView.LAYERS)}),this.layersButton.addEventListener("dblclick",()=>{this.eventBus.dispatch("resetlayers",{source:this})}),this._currentOutlineItemButton.addEventListener("click",()=>{this.eventBus.dispatch("currentoutlineitem",{source:this})});const ue=(se,Ce,Me)=>{Ce.disabled=!se,se?W(this,c,Us).call(this):this.active===Me&&this.switchView(r.SidebarView.THUMBS)};this.eventBus._on("outlineloaded",se=>{ue(se.outlineCount,this.outlineButton,r.SidebarView.OUTLINE),se.currentOutlineItemPromise.then(Ce=>{this.isInitialViewSet&&(this._currentOutlineItemButton.disabled=!Ce)})}),this.eventBus._on("attachmentsloaded",se=>{ue(se.attachmentsCount,this.attachmentsButton,r.SidebarView.ATTACHMENTS)}),this.eventBus._on("layersloaded",se=>{ue(se.layersCount,this.layersButton,r.SidebarView.LAYERS)}),this.eventBus._on("presentationmodechanged",se=>{se.state===r.PresentationModeState.NORMAL&&this.visibleView===r.SidebarView.THUMBS&&this.onUpdateThumbnails()}),this.resizer.addEventListener("mousedown",se=>{se.button===0&&(this.outerContainer.classList.add(E),window.addEventListener("mousemove",i(this,b)),window.addEventListener("mouseup",i(this,P)))}),this.eventBus._on("resize",se=>{if(se.source!==window||(he(this,x,null),!i(this,y)))return;if(!this.isOpen){W(this,G,ti).call(this,i(this,y));return}this.outerContainer.classList.add(E);const Ce=W(this,G,ti).call(this,i(this,y));Promise.resolve().then(()=>{this.outerContainer.classList.remove(E),Ce&&this.eventBus.dispatch("resize",{source:this})})})},G=new WeakSet,ti=function(ue=0){const se=Math.floor(this.outerContainerWidth/2);return ue>se&&(ue=se),ue<T&&(ue=T),ue===i(this,y)?!1:(he(this,y,ue),r.docStyle.setProperty(a,`${ue}px`),!0)},V=new WeakSet,zs=function(ue){let se=ue.clientX;i(this,g)&&(se=this.outerContainerWidth-se),W(this,G,ti).call(this,se)},re=new WeakSet,js=function(ue){this.outerContainer.classList.remove(E),this.eventBus.dispatch("resize",{source:this}),window.removeEventListener("mousemove",i(this,b)),window.removeEventListener("mouseup",i(this,P))},_.PDFSidebar=s},(k,_,m)=>{var s,Ws,b,$s;Object.defineProperty(_,"__esModule",{value:!0}),_.PDFThumbnailViewer=void 0;var r=m(4),a=m(30);const T=-19,E="selected";class C{constructor({container:y,eventBus:A,linkService:o,renderingQueue:c,l10n:S,pageColors:w}){H(this,s);H(this,b);this.container=y,this.eventBus=A,this.linkService=o,this.renderingQueue=c,this.l10n=S,this.pageColors=w||null,this.scroll=(0,r.watchScroll)(this.container,this._scrollUpdated.bind(this)),this._resetView()}_scrollUpdated(){this.renderingQueue.renderHighestPriority()}getThumbnail(y){return this._thumbnails[y]}_getVisibleThumbs(){return(0,r.getVisibleElements)({scrollEl:this.container,views:this._thumbnails})}scrollThumbnailIntoView(y){if(!this.pdfDocument)return;const A=this._thumbnails[y-1];if(!A){console.error('scrollThumbnailIntoView: Invalid "pageNumber" parameter.');return}y!==this._currentPageNumber&&(this._thumbnails[this._currentPageNumber-1].div.classList.remove(E),A.div.classList.add(E));const{first:o,last:c,views:S}=this._getVisibleThumbs();if(S.length>0){let w=!1;if(y<=o.id||y>=c.id)w=!0;else for(const{id:v,percent:F}of S)if(v===y){w=F<100;break}w&&(0,r.scrollIntoView)(A.div,{top:T})}this._currentPageNumber=y}get pagesRotation(){return this._pagesRotation}set pagesRotation(y){if(!(0,r.isValidRotation)(y))throw new Error("Invalid thumbnails rotation angle.");if(!this.pdfDocument||this._pagesRotation===y)return;this._pagesRotation=y;const A={rotation:y};for(const o of this._thumbnails)o.update(A)}cleanup(){for(const y of this._thumbnails)y.renderingState!==r.RenderingStates.FINISHED&&y.reset();a.TempImageFactory.destroyCanvas()}_resetView(){this._thumbnails=[],this._currentPageNumber=1,this._pageLabels=null,this._pagesRotation=0,this.container.textContent=""}setDocument(y){if(this.pdfDocument&&(this._cancelRendering(),this._resetView()),this.pdfDocument=y,!y)return;const A=y.getPage(1),o=y.getOptionalContentConfig();A.then(c=>{var F;const S=y.numPages,w=c.getViewport({scale:1});for(let N=1;N<=S;++N){const G=new a.PDFThumbnailView({container:this.container,eventBus:this.eventBus,id:N,defaultViewport:w.clone(),optionalContentConfigPromise:o,linkService:this.linkService,renderingQueue:this.renderingQueue,l10n:this.l10n,pageColors:this.pageColors});this._thumbnails.push(G)}(F=this._thumbnails[0])==null||F.setPdfPage(c),this._thumbnails[this._currentPageNumber-1].div.classList.add(E)}).catch(c=>{console.error("Unable to initialize thumbnail viewer",c)})}_cancelRendering(){for(const y of this._thumbnails)y.cancelRendering()}setPageLabels(y){var A;if(this.pdfDocument){y?Array.isArray(y)&&this.pdfDocument.numPages===y.length?this._pageLabels=y:(this._pageLabels=null,console.error("PDFThumbnailViewer_setPageLabels: Invalid page labels.")):this._pageLabels=null;for(let o=0,c=this._thumbnails.length;o<c;o++)this._thumbnails[o].setPageLabel(((A=this._pageLabels)==null?void 0:A[o])??null)}}forceRendering(){const y=this._getVisibleThumbs(),A=W(this,b,$s).call(this,y),o=this.renderingQueue.getHighestPriority(y,this._thumbnails,A);return o?(W(this,s,Ws).call(this,o).then(()=>{this.renderingQueue.renderView(o)}),!0):!1}}s=new WeakSet,Ws=async function(y){if(y.pdfPage)return y.pdfPage;try{const A=await this.pdfDocument.getPage(y.id);return y.pdfPage||y.setPdfPage(A),A}catch(A){return console.error("Unable to get page for thumb view",A),null}},b=new WeakSet,$s=function(y){var A,o;return((A=y.first)==null?void 0:A.id)===1?!0:((o=y.last)==null?void 0:o.id)===this._thumbnails.length?!1:this.scroll.down},_.PDFThumbnailViewer=C},(k,_,m)=>{var b,P,dn,y,hn;Object.defineProperty(_,"__esModule",{value:!0}),_.TempImageFactory=_.PDFThumbnailView=void 0;var r=m(4),a=m(5);const T=2,E=3,C=98;class s{static getCanvas(c,S){const w=i(this,b)||he(this,b,document.createElement("canvas"));w.width=c,w.height=S;const v=w.getContext("2d",{alpha:!1});return v.save(),v.fillStyle="rgb(255, 255, 255)",v.fillRect(0,0,c,S),v.restore(),[w,w.getContext("2d")]}static destroyCanvas(){const c=i(this,b);c&&(c.width=0,c.height=0),he(this,b,null)}}b=new WeakMap,H(s,b,null),_.TempImageFactory=s;class g{constructor({container:c,eventBus:S,id:w,defaultViewport:v,optionalContentConfigPromise:F,linkService:N,renderingQueue:G,l10n:le,pageColors:V}){H(this,P);H(this,y);this.id=w,this.renderingId="thumbnail"+w,this.pageLabel=null,this.pdfPage=null,this.rotation=0,this.viewport=v,this.pdfPageRotate=v.rotation,this._optionalContentConfigPromise=F||null,this.pageColors=V||null,this.eventBus=S,this.linkService=N,this.renderingQueue=G,this.renderTask=null,this.renderingState=r.RenderingStates.INITIAL,this.resume=null,this.l10n=le;const Z=document.createElement("a");Z.href=N.getAnchorUrl("#page="+w),this._thumbPageTitle.then(K=>{Z.title=K}),Z.onclick=function(){return N.goToPage(w),!1},this.anchor=Z;const re=document.createElement("div");re.className="thumbnail",re.setAttribute("data-page-number",this.id),this.div=re,W(this,P,dn).call(this);const te=document.createElement("div");te.className="thumbnailImage",this._placeholderImg=te,re.append(te),Z.append(re),c.append(Z)}setPdfPage(c){this.pdfPage=c,this.pdfPageRotate=c.rotate;const S=(this.rotation+this.pdfPageRotate)%360;this.viewport=c.getViewport({scale:1,rotation:S}),this.reset()}reset(){var c;this.cancelRendering(),this.renderingState=r.RenderingStates.INITIAL,this.div.removeAttribute("data-loaded"),(c=this.image)==null||c.replaceWith(this._placeholderImg),W(this,P,dn).call(this),this.image&&(this.image.removeAttribute("src"),delete this.image)}update({rotation:c=null}){typeof c=="number"&&(this.rotation=c);const S=(this.rotation+this.pdfPageRotate)%360;this.viewport=this.viewport.clone({scale:1,rotation:S}),this.reset()}cancelRendering(){this.renderTask&&(this.renderTask.cancel(),this.renderTask=null),this.resume=null}_getPageDrawContext(c=1){const S=document.createElement("canvas"),w=S.getContext("2d",{alpha:!1}),v=new r.OutputScale;S.width=c*this.canvasWidth*v.sx|0,S.height=c*this.canvasHeight*v.sy|0;const F=v.scaled?[v.sx,0,0,v.sy,0,0]:null;return{ctx:w,canvas:S,transform:F}}_convertCanvasToImage(c){if(this.renderingState!==r.RenderingStates.FINISHED)throw new Error("_convertCanvasToImage: Rendering has not finished.");const S=this._reduceImage(c),w=document.createElement("img");w.className="thumbnailImage",this._thumbPageCanvas.then(v=>{w.setAttribute("aria-label",v)}),w.src=S.toDataURL(),this.image=w,this.div.setAttribute("data-loaded",!0),this._placeholderImg.replaceWith(w),S.width=0,S.height=0}async draw(){if(this.renderingState!==r.RenderingStates.INITIAL){console.error("Must be in new state before drawing");return}const{pdfPage:c}=this;if(!c)throw this.renderingState=r.RenderingStates.FINISHED,new Error("pdfPage is not loaded");this.renderingState=r.RenderingStates.RUNNING;const{ctx:S,canvas:w,transform:v}=this._getPageDrawContext(T),F=this.viewport.clone({scale:T*this.scale}),N=Z=>{if(!this.renderingQueue.isHighestPriority(this)){this.renderingState=r.RenderingStates.PAUSED,this.resume=()=>{this.renderingState=r.RenderingStates.RUNNING,Z()};return}Z()},G={canvasContext:S,transform:v,viewport:F,optionalContentConfigPromise:this._optionalContentConfigPromise,pageColors:this.pageColors},le=this.renderTask=c.render(G);le.onContinue=N;const V=le.promise.then(()=>W(this,y,hn).call(this,le,w),Z=>W(this,y,hn).call(this,le,w,Z));return V.finally(()=>{w.width=0,w.height=0,this.eventBus.dispatch("thumbnailrendered",{source:this,pageNumber:this.id,pdfPage:this.pdfPage})}),V}setImage(c){if(this.renderingState!==r.RenderingStates.INITIAL)return;const{thumbnailCanvas:S,pdfPage:w,scale:v}=c;S&&(this.pdfPage||this.setPdfPage(w),!(v<this.scale)&&(this.renderingState=r.RenderingStates.FINISHED,this._convertCanvasToImage(S)))}_reduceImage(c){const{ctx:S,canvas:w}=this._getPageDrawContext();if(c.width<=2*w.width)return S.drawImage(c,0,0,c.width,c.height,0,0,w.width,w.height),w;let v=w.width<<E,F=w.height<<E;const[N,G]=s.getCanvas(v,F);for(;v>c.width||F>c.height;)v>>=1,F>>=1;for(G.drawImage(c,0,0,c.width,c.height,0,0,v,F);v>2*w.width;)G.drawImage(N,0,0,v,F,0,0,v>>1,F>>1),v>>=1,F>>=1;return S.drawImage(N,0,0,v,F,0,0,w.width,w.height),w}get _thumbPageTitle(){return this.l10n.get("thumb_page_title",{page:this.pageLabel??this.id})}get _thumbPageCanvas(){return this.l10n.get("thumb_page_canvas",{page:this.pageLabel??this.id})}setPageLabel(c){this.pageLabel=typeof c=="string"?c:null,this._thumbPageTitle.then(S=>{this.anchor.title=S}),this.renderingState===r.RenderingStates.FINISHED&&this._thumbPageCanvas.then(S=>{var w;(w=this.image)==null||w.setAttribute("aria-label",S)})}}P=new WeakSet,dn=function(){const{width:c,height:S}=this.viewport,w=c/S;this.canvasWidth=C,this.canvasHeight=this.canvasWidth/w|0,this.scale=this.canvasWidth/c;const{style:v}=this.div;v.setProperty("--thumbnail-width",`${this.canvasWidth}px`),v.setProperty("--thumbnail-height",`${this.canvasHeight}px`)},y=new WeakSet,hn=async function(c,S,w=null){if(c===this.renderTask&&(this.renderTask=null),!(w instanceof a.RenderingCancelledException)&&(this.renderingState=r.RenderingStates.FINISHED,this._convertCanvasToImage(S),w))throw w},_.PDFThumbnailView=g},(k,_,m)=>{var A,o,c,un,w,v,F,N,G,le,V,Z,re,te,K,ue,se,Ce,Me,q,R,O,Gs,u,qs,D,Xs,X,Ks,z,Nt,Y,ii,oe,Ys,Ee,fn,ne,Zs,ae,ct,be,pn,Le,Js,Be,Qs,He,gn,Ge,er;Object.defineProperty(_,"__esModule",{value:!0}),_.PagesCountLimit=_.PDFViewer=_.PDFPageViewBuffer=void 0;var r=m(5),a=m(4),T=m(32),E=m(33),C=m(26),s=m(11);const g=10,b={FORCE_SCROLL_MODE_PAGE:15e3,FORCE_LAZY_PAGE_INIT:7500,PAUSE_EAGER_PAGE_INIT:250};_.PagesCountLimit=b;function P(Te){return Object.values(r.AnnotationEditorType).includes(Te)&&Te!==r.AnnotationEditorType.DISABLE}class x{constructor(U){H(this,c);H(this,A,new Set);H(this,o,0);he(this,o,U)}push(U){const J=i(this,A);J.has(U)&&J.delete(U),J.add(U),J.size>i(this,o)&&W(this,c,un).call(this)}resize(U,J=null){he(this,o,U);const Ae=i(this,A);if(J){const ee=Ae.size;let ge=1;for(const ve of Ae)if(J.has(ve.id)&&(Ae.delete(ve),Ae.add(ve)),++ge>ee)break}for(;Ae.size>i(this,o);)W(this,c,un).call(this)}has(U){return i(this,A).has(U)}[Symbol.iterator](){return i(this,A).keys()}}A=new WeakMap,o=new WeakMap,c=new WeakSet,un=function(){const U=i(this,A).keys().next().value;U==null||U.destroy(),i(this,A).delete(U)},_.PDFPageViewBuffer=x;class y{constructor(U){H(this,O);H(this,u);H(this,D);H(this,X);H(this,z);H(this,Y);H(this,oe);H(this,Ee);H(this,ne);H(this,ae);H(this,be);H(this,Le);H(this,Be);H(this,He);H(this,Ge);H(this,w,null);H(this,v,null);H(this,F,r.AnnotationEditorType.NONE);H(this,N,null);H(this,G,r.AnnotationMode.ENABLE_FORMS);H(this,le,null);H(this,V,null);H(this,Z,!1);H(this,re,!1);H(this,te,null);H(this,K,!1);H(this,ue,0);H(this,se,new ResizeObserver(W(this,Ge,er).bind(this)));H(this,Ce,null);H(this,Me,null);H(this,q,null);H(this,R,a.TextLayerMode.ENABLE);var Ae,ee;const J="3.11.176";if(r.version!==J)throw new Error(`The API version "${r.version}" does not match the Viewer version "${J}".`);if(this.container=U.container,this.viewer=U.viewer||U.container.firstElementChild,((Ae=this.container)==null?void 0:Ae.tagName)!=="DIV"||((ee=this.viewer)==null?void 0:ee.tagName)!=="DIV")throw new Error("Invalid `container` and/or `viewer` option.");if(this.container.offsetParent&&getComputedStyle(this.container).position!=="absolute")throw new Error("The `container` must be absolutely positioned.");i(this,se).observe(this.container),this.eventBus=U.eventBus,this.linkService=U.linkService||new s.SimpleLinkService,this.downloadManager=U.downloadManager||null,this.findController=U.findController||null,he(this,v,U.altTextManager||null),this.findController&&(this.findController.onIsPageVisible=ge=>this._getVisiblePages().ids.has(ge)),this._scriptingManager=U.scriptingManager||null,he(this,R,U.textLayerMode??a.TextLayerMode.ENABLE),he(this,G,U.annotationMode??r.AnnotationMode.ENABLE_FORMS),he(this,F,U.annotationEditorMode??r.AnnotationEditorType.NONE),this.imageResourcesPath=U.imageResourcesPath||"",this.enablePrintAutoRotate=U.enablePrintAutoRotate||!1,this.removePageBorders=U.removePageBorders||!1,U.useOnlyCssZoom&&(console.error("useOnlyCssZoom was removed, please use `maxCanvasPixels = 0` instead."),U.maxCanvasPixels=0),this.isOffscreenCanvasSupported=U.isOffscreenCanvasSupported??!0,this.maxCanvasPixels=U.maxCanvasPixels,this.l10n=U.l10n||T.NullL10n,he(this,Z,U.enablePermissions||!1),this.pageColors=U.pageColors||null,this.defaultRenderingQueue=!U.renderingQueue,this.defaultRenderingQueue?(this.renderingQueue=new C.PDFRenderingQueue,this.renderingQueue.setViewer(this)):this.renderingQueue=U.renderingQueue,this.scroll=(0,a.watchScroll)(this.container,this._scrollUpdate.bind(this)),this.presentationModeState=a.PresentationModeState.UNKNOWN,this._onBeforeDraw=this._onAfterDraw=null,this._resetView(),this.removePageBorders&&this.viewer.classList.add("removePageBorders"),W(this,He,gn).call(this),this.eventBus._on("thumbnailrendered",({pageNumber:ge,pdfPage:ve})=>{const ie=this._pages[ge-1];i(this,w).has(ie)||ve==null||ve.cleanup()})}get pagesCount(){return this._pages.length}getPageView(U){return this._pages[U]}getCachedPageViews(){return new Set(i(this,w))}get pageViewsReady(){return this._pagesCapability.settled&&this._pages.every(U=>U==null?void 0:U.pdfPage)}get renderForms(){return i(this,G)===r.AnnotationMode.ENABLE_FORMS}get enableScripting(){return!!this._scriptingManager}get currentPageNumber(){return this._currentPageNumber}set currentPageNumber(U){if(!Number.isInteger(U))throw new Error("Invalid page number.");this.pdfDocument&&(this._setCurrentPageNumber(U,!0)||console.error(`currentPageNumber: "${U}" is not a valid page.`))}_setCurrentPageNumber(U,J=!1){var ee;if(this._currentPageNumber===U)return J&&W(this,be,pn).call(this),!0;if(!(0<U&&U<=this.pagesCount))return!1;const Ae=this._currentPageNumber;return this._currentPageNumber=U,this.eventBus.dispatch("pagechanging",{source:this,pageNumber:U,pageLabel:((ee=this._pageLabels)==null?void 0:ee[U-1])??null,previous:Ae}),J&&W(this,be,pn).call(this),!0}get currentPageLabel(){var U;return((U=this._pageLabels)==null?void 0:U[this._currentPageNumber-1])??null}set currentPageLabel(U){if(!this.pdfDocument)return;let J=U|0;if(this._pageLabels){const Ae=this._pageLabels.indexOf(U);Ae>=0&&(J=Ae+1)}this._setCurrentPageNumber(J,!0)||console.error(`currentPageLabel: "${U}" is not a valid page.`)}get currentScale(){return this._currentScale!==a.UNKNOWN_SCALE?this._currentScale:a.DEFAULT_SCALE}set currentScale(U){if(isNaN(U))throw new Error("Invalid numeric scale.");this.pdfDocument&&W(this,ae,ct).call(this,U,{noScroll:!1})}get currentScaleValue(){return this._currentScaleValue}set currentScaleValue(U){this.pdfDocument&&W(this,ae,ct).call(this,U,{noScroll:!1})}get pagesRotation(){return this._pagesRotation}set pagesRotation(U){if(!(0,a.isValidRotation)(U))throw new Error("Invalid pages rotation angle.");if(!this.pdfDocument||(U%=360,U<0&&(U+=360),this._pagesRotation===U))return;this._pagesRotation=U;const J=this._currentPageNumber;this.refresh(!0,{rotation:U}),this._currentScaleValue&&W(this,ae,ct).call(this,this._currentScaleValue,{noScroll:!0}),this.eventBus.dispatch("rotationchanging",{source:this,pagesRotation:U,pageNumber:J}),this.defaultRenderingQueue&&this.update()}get firstPagePromise(){return this.pdfDocument?this._firstPageCapability.promise:null}get onePageRendered(){return this.pdfDocument?this._onePageRenderedCapability.promise:null}get pagesPromise(){return this.pdfDocument?this._pagesCapability.promise:null}async getAllText(){const U=[],J=[];for(let Ae=1,ee=this.pdfDocument.numPages;Ae<=ee;++Ae){if(i(this,K))return null;J.length=0;const ge=await this.pdfDocument.getPage(Ae),{items:ve}=await ge.getTextContent();for(const ie of ve)ie.str&&J.push(ie.str),ie.hasEOL&&J.push(`
`);U.push((0,a.removeNullCharacters)(J.join("")))}return U.join(`
`)}setDocument(U){var ve,ie;if(this.pdfDocument&&(this.eventBus.dispatch("pagesdestroy",{source:this}),this._cancelRendering(),this._resetView(),(ve=this.findController)==null||ve.setDocument(null),(ie=this._scriptingManager)==null||ie.setDocument(null),i(this,N)&&(i(this,N).destroy(),he(this,N,null))),this.pdfDocument=U,!U)return;const J=U.numPages,Ae=U.getPage(1),ee=U.getOptionalContentConfig(),ge=i(this,Z)?U.getPermissions():Promise.resolve();if(J>b.FORCE_SCROLL_MODE_PAGE){console.warn("Forcing PAGE-scrolling for performance reasons, given the length of the document.");const _e=this._scrollMode=a.ScrollMode.PAGE;this.eventBus.dispatch("scrollmodechanged",{source:this,mode:_e})}this._pagesCapability.promise.then(()=>{this.eventBus.dispatch("pagesloaded",{source:this,pagesCount:J})},()=>{}),this._onBeforeDraw=_e=>{const ke=this._pages[_e.pageNumber-1];ke&&i(this,w).push(ke)},this.eventBus._on("pagerender",this._onBeforeDraw),this._onAfterDraw=_e=>{_e.cssTransform||this._onePageRenderedCapability.settled||(this._onePageRenderedCapability.resolve({timestamp:_e.timestamp}),this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null,i(this,Me)&&(document.removeEventListener("visibilitychange",i(this,Me)),he(this,Me,null)))},this.eventBus._on("pagerendered",this._onAfterDraw),Promise.all([Ae,ge]).then(([_e,ke])=>{var L,Q;if(U!==this.pdfDocument)return;this._firstPageCapability.resolve(_e),this._optionalContentConfigPromise=ee;const{annotationEditorMode:xe,annotationMode:Fe,textLayerMode:Ve}=W(this,u,qs).call(this,ke);if(Ve!==a.TextLayerMode.DISABLE){const pe=he(this,te,document.createElement("div"));pe.id="hiddenCopyElement",this.viewer.before(pe)}if(xe!==r.AnnotationEditorType.DISABLE){const pe=xe;U.isPureXfa?console.warn("Warning: XFA-editing is not implemented."):P(pe)?(he(this,N,new r.AnnotationEditorUIManager(this.container,this.viewer,i(this,v),this.eventBus,U,this.pageColors)),pe!==r.AnnotationEditorType.NONE&&i(this,N).updateMode(pe)):console.error(`Invalid AnnotationEditor mode: ${pe}`)}const We=W(this,O,Gs).bind(this),Oe=this._scrollMode===a.ScrollMode.PAGE?null:this.viewer,Ye=this.currentScale,$e=_e.getViewport({scale:Ye*r.PixelsPerInch.PDF_TO_CSS_UNITS});this.viewer.style.setProperty("--scale-factor",$e.scale),(((L=this.pageColors)==null?void 0:L.foreground)==="CanvasText"||((Q=this.pageColors)==null?void 0:Q.background)==="Canvas")&&this.viewer.style.setProperty("--hcm-highligh-filter",U.filterFactory.addHighlightHCMFilter("CanvasText","Canvas","HighlightText","Highlight"));for(let pe=1;pe<=J;++pe){const we=new E.PDFPageView({container:Oe,eventBus:this.eventBus,id:pe,scale:Ye,defaultViewport:$e.clone(),optionalContentConfigPromise:ee,renderingQueue:this.renderingQueue,textLayerMode:Ve,annotationMode:Fe,imageResourcesPath:this.imageResourcesPath,isOffscreenCanvasSupported:this.isOffscreenCanvasSupported,maxCanvasPixels:this.maxCanvasPixels,pageColors:this.pageColors,l10n:this.l10n,layerProperties:We});this._pages.push(we)}const me=this._pages[0];me&&(me.setPdfPage(_e),this.linkService.cachePageRef(1,_e.ref)),this._scrollMode===a.ScrollMode.PAGE?W(this,z,Nt).call(this):this._spreadMode!==a.SpreadMode.NONE&&this._updateSpreadMode(),W(this,D,Xs).call(this).then(async()=>{var we,Pe;if((we=this.findController)==null||we.setDocument(U),(Pe=this._scriptingManager)==null||Pe.setDocument(U),i(this,te)&&(he(this,V,W(this,X,Ks).bind(this,Ve)),document.addEventListener("copy",i(this,V))),i(this,N)&&this.eventBus.dispatch("annotationeditormodechanged",{source:this,mode:i(this,F)}),U.loadingParams.disableAutoFetch||J>b.FORCE_LAZY_PAGE_INIT){this._pagesCapability.resolve();return}let pe=J-1;if(pe<=0){this._pagesCapability.resolve();return}for(let Re=2;Re<=J;++Re){const Ne=U.getPage(Re).then(ze=>{const Ue=this._pages[Re-1];Ue.pdfPage||Ue.setPdfPage(ze),this.linkService.cachePageRef(Re,ze.ref),--pe===0&&this._pagesCapability.resolve()},ze=>{console.error(`Unable to get page ${Re} to initialize viewer`,ze),--pe===0&&this._pagesCapability.resolve()});Re%b.PAUSE_EAGER_PAGE_INIT===0&&await Ne}}),this.eventBus.dispatch("pagesinit",{source:this}),U.getMetadata().then(({info:pe})=>{U===this.pdfDocument&&pe.Language&&(this.viewer.lang=pe.Language)}),this.defaultRenderingQueue&&this.update()}).catch(_e=>{console.error("Unable to initialize viewer",_e),this._pagesCapability.reject(_e)})}setPageLabels(U){var J;if(this.pdfDocument){U?Array.isArray(U)&&this.pdfDocument.numPages===U.length?this._pageLabels=U:(this._pageLabels=null,console.error("setPageLabels: Invalid page labels.")):this._pageLabels=null;for(let Ae=0,ee=this._pages.length;Ae<ee;Ae++)this._pages[Ae].setPageLabel(((J=this._pageLabels)==null?void 0:J[Ae])??null)}}_resetView(){this._pages=[],this._currentPageNumber=1,this._currentScale=a.UNKNOWN_SCALE,this._currentScaleValue=null,this._pageLabels=null,he(this,w,new x(g)),this._location=null,this._pagesRotation=0,this._optionalContentConfigPromise=null,this._firstPageCapability=new r.PromiseCapability,this._onePageRenderedCapability=new r.PromiseCapability,this._pagesCapability=new r.PromiseCapability,this._scrollMode=a.ScrollMode.VERTICAL,this._previousScrollMode=a.ScrollMode.UNKNOWN,this._spreadMode=a.SpreadMode.NONE,he(this,Ce,{previousPageNumber:1,scrollDown:!0,pages:[]}),this._onBeforeDraw&&(this.eventBus._off("pagerender",this._onBeforeDraw),this._onBeforeDraw=null),this._onAfterDraw&&(this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null),i(this,Me)&&(document.removeEventListener("visibilitychange",i(this,Me)),he(this,Me,null)),this.viewer.textContent="",this._updateScrollMode(),this.viewer.removeAttribute("lang"),i(this,te)&&(document.removeEventListener("copy",i(this,V)),he(this,V,null),i(this,te).remove(),he(this,te,null))}_scrollUpdate(){this.pagesCount!==0&&this.update()}pageLabelToPageNumber(U){if(!this._pageLabels)return null;const J=this._pageLabels.indexOf(U);return J<0?null:J+1}scrollPageIntoView({pageNumber:U,destArray:J=null,allowNegativeOffset:Ae=!1,ignoreDestinationZoom:ee=!1}){if(!this.pdfDocument)return;const ge=Number.isInteger(U)&&this._pages[U-1];if(!ge){console.error(`scrollPageIntoView: "${U}" is not a valid pageNumber parameter.`);return}if(this.isInPresentationMode||!J){this._setCurrentPageNumber(U,!0);return}let ve=0,ie=0,_e=0,ke=0,xe,Fe;const Ve=ge.rotation%180!==0,We=(Ve?ge.height:ge.width)/ge.scale/r.PixelsPerInch.PDF_TO_CSS_UNITS,Oe=(Ve?ge.width:ge.height)/ge.scale/r.PixelsPerInch.PDF_TO_CSS_UNITS;let Ye=0;switch(J[1].name){case"XYZ":ve=J[2],ie=J[3],Ye=J[4],ve=ve!==null?ve:0,ie=ie!==null?ie:Oe;break;case"Fit":case"FitB":Ye="page-fit";break;case"FitH":case"FitBH":ie=J[2],Ye="page-width",ie===null&&this._location?(ve=this._location.left,ie=this._location.top):(typeof ie!="number"||ie<0)&&(ie=Oe);break;case"FitV":case"FitBV":ve=J[2],_e=We,ke=Oe,Ye="page-height";break;case"FitR":ve=J[2],ie=J[3],_e=J[4]-ve,ke=J[5]-ie;let Q=a.SCROLLBAR_PADDING,pe=a.VERTICAL_PADDING;this.removePageBorders&&(Q=pe=0),xe=(this.container.clientWidth-Q)/_e/r.PixelsPerInch.PDF_TO_CSS_UNITS,Fe=(this.container.clientHeight-pe)/ke/r.PixelsPerInch.PDF_TO_CSS_UNITS,Ye=Math.min(Math.abs(xe),Math.abs(Fe));break;default:console.error(`scrollPageIntoView: "${J[1].name}" is not a valid destination type.`);return}if(ee||(Ye&&Ye!==this._currentScale?this.currentScaleValue=Ye:this._currentScale===a.UNKNOWN_SCALE&&(this.currentScaleValue=a.DEFAULT_SCALE_VALUE)),Ye==="page-fit"&&!J[4]){W(this,Y,ii).call(this,ge);return}const $e=[ge.viewport.convertToViewportPoint(ve,ie),ge.viewport.convertToViewportPoint(ve+_e,ie+ke)];let me=Math.min($e[0][0],$e[1][0]),L=Math.min($e[0][1],$e[1][1]);Ae||(me=Math.max(me,0),L=Math.max(L,0)),W(this,Y,ii).call(this,ge,{left:me,top:L})}_updateLocation(U){const J=this._currentScale,Ae=this._currentScaleValue,ee=parseFloat(Ae)===J?Math.round(J*1e4)/100:Ae,ge=U.id,ve=this._pages[ge-1],ie=this.container,_e=ve.getPagePoint(ie.scrollLeft-U.x,ie.scrollTop-U.y),ke=Math.round(_e[0]),xe=Math.round(_e[1]);let Fe=`#page=${ge}`;this.isInPresentationMode||(Fe+=`&zoom=${ee},${ke},${xe}`),this._location={pageNumber:ge,scale:ee,top:xe,left:ke,rotation:this._pagesRotation,pdfOpenParams:Fe}}update(){const U=this._getVisiblePages(),J=U.views,Ae=J.length;if(Ae===0)return;const ee=Math.max(g,2*Ae+1);i(this,w).resize(ee,U.ids),this.renderingQueue.renderHighestPriority(U);const ge=this._spreadMode===a.SpreadMode.NONE&&(this._scrollMode===a.ScrollMode.PAGE||this._scrollMode===a.ScrollMode.VERTICAL),ve=this._currentPageNumber;let ie=!1;for(const _e of J){if(_e.percent<100)break;if(_e.id===ve&&ge){ie=!0;break}}this._setCurrentPageNumber(ie?ve:J[0].id),this._updateLocation(U.first),this.eventBus.dispatch("updateviewarea",{source:this,location:this._location})}containsElement(U){return this.container.contains(U)}focus(){this.container.focus()}get _isContainerRtl(){return getComputedStyle(this.container).direction==="rtl"}get isInPresentationMode(){return this.presentationModeState===a.PresentationModeState.FULLSCREEN}get isChangingPresentationMode(){return this.presentationModeState===a.PresentationModeState.CHANGING}get isHorizontalScrollbarEnabled(){return this.isInPresentationMode?!1:this.container.scrollWidth>this.container.clientWidth}get isVerticalScrollbarEnabled(){return this.isInPresentationMode?!1:this.container.scrollHeight>this.container.clientHeight}_getVisiblePages(){const U=this._scrollMode===a.ScrollMode.PAGE?i(this,Ce).pages:this._pages,J=this._scrollMode===a.ScrollMode.HORIZONTAL,Ae=J&&this._isContainerRtl;return(0,a.getVisibleElements)({scrollEl:this.container,views:U,sortByVisibility:!0,horizontal:J,rtl:Ae})}cleanup(){for(const U of this._pages)U.renderingState!==a.RenderingStates.FINISHED&&U.reset()}_cancelRendering(){for(const U of this._pages)U.cancelRendering()}forceRendering(U){const J=U||this._getVisiblePages(),Ae=W(this,Be,Qs).call(this,J),ee=this._spreadMode!==a.SpreadMode.NONE&&this._scrollMode!==a.ScrollMode.HORIZONTAL,ge=this.renderingQueue.getHighestPriority(J,this._pages,Ae,ee);return ge?(W(this,Le,Js).call(this,ge).then(()=>{this.renderingQueue.renderView(ge)}),!0):!1}get hasEqualPageSizes(){const U=this._pages[0];for(let J=1,Ae=this._pages.length;J<Ae;++J){const ee=this._pages[J];if(ee.width!==U.width||ee.height!==U.height)return!1}return!0}getPagesOverview(){let U;return this._pages.map(J=>{const Ae=J.pdfPage.getViewport({scale:1}),ee=(0,a.isPortraitOrientation)(Ae);if(U===void 0)U=ee;else if(this.enablePrintAutoRotate&&ee!==U)return{width:Ae.height,height:Ae.width,rotation:(Ae.rotation-90)%360};return{width:Ae.width,height:Ae.height,rotation:Ae.rotation}})}get optionalContentConfigPromise(){return this.pdfDocument?this._optionalContentConfigPromise?this._optionalContentConfigPromise:(console.error("optionalContentConfigPromise: Not initialized yet."),this.pdfDocument.getOptionalContentConfig()):Promise.resolve(null)}set optionalContentConfigPromise(U){if(!(U instanceof Promise))throw new Error(`Invalid optionalContentConfigPromise: ${U}`);this.pdfDocument&&this._optionalContentConfigPromise&&(this._optionalContentConfigPromise=U,this.refresh(!1,{optionalContentConfigPromise:U}),this.eventBus.dispatch("optionalcontentconfigchanged",{source:this,promise:U}))}get scrollMode(){return this._scrollMode}set scrollMode(U){if(this._scrollMode!==U){if(!(0,a.isValidScrollMode)(U))throw new Error(`Invalid scroll mode: ${U}`);this.pagesCount>b.FORCE_SCROLL_MODE_PAGE||(this._previousScrollMode=this._scrollMode,this._scrollMode=U,this.eventBus.dispatch("scrollmodechanged",{source:this,mode:U}),this._updateScrollMode(this._currentPageNumber))}}_updateScrollMode(U=null){const J=this._scrollMode,Ae=this.viewer;Ae.classList.toggle("scrollHorizontal",J===a.ScrollMode.HORIZONTAL),Ae.classList.toggle("scrollWrapped",J===a.ScrollMode.WRAPPED),!(!this.pdfDocument||!U)&&(J===a.ScrollMode.PAGE?W(this,z,Nt).call(this):this._previousScrollMode===a.ScrollMode.PAGE&&this._updateSpreadMode(),this._currentScaleValue&&isNaN(this._currentScaleValue)&&W(this,ae,ct).call(this,this._currentScaleValue,{noScroll:!0}),this._setCurrentPageNumber(U,!0),this.update())}get spreadMode(){return this._spreadMode}set spreadMode(U){if(this._spreadMode!==U){if(!(0,a.isValidSpreadMode)(U))throw new Error(`Invalid spread mode: ${U}`);this._spreadMode=U,this.eventBus.dispatch("spreadmodechanged",{source:this,mode:U}),this._updateSpreadMode(this._currentPageNumber)}}_updateSpreadMode(U=null){if(!this.pdfDocument)return;const J=this.viewer,Ae=this._pages;if(this._scrollMode===a.ScrollMode.PAGE)W(this,z,Nt).call(this);else if(J.textContent="",this._spreadMode===a.SpreadMode.NONE)for(const ee of this._pages)J.append(ee.div);else{const ee=this._spreadMode-1;let ge=null;for(let ve=0,ie=Ae.length;ve<ie;++ve)ge===null?(ge=document.createElement("div"),ge.className="spread",J.append(ge)):ve%2===ee&&(ge=ge.cloneNode(!1),J.append(ge)),ge.append(Ae[ve].div)}U&&(this._currentScaleValue&&isNaN(this._currentScaleValue)&&W(this,ae,ct).call(this,this._currentScaleValue,{noScroll:!0}),this._setCurrentPageNumber(U,!0),this.update())}_getPageAdvance(U,J=!1){switch(this._scrollMode){case a.ScrollMode.WRAPPED:{const{views:Ae}=this._getVisiblePages(),ee=new Map;for(const{id:ge,y:ve,percent:ie,widthPercent:_e}of Ae){if(ie===0||_e<100)continue;let ke=ee.get(ve);ke||ee.set(ve,ke||(ke=[])),ke.push(ge)}for(const ge of ee.values()){const ve=ge.indexOf(U);if(ve===-1)continue;const ie=ge.length;if(ie===1)break;if(J)for(let _e=ve-1,ke=0;_e>=ke;_e--){const xe=ge[_e],Fe=ge[_e+1]-1;if(xe<Fe)return U-Fe}else for(let _e=ve+1,ke=ie;_e<ke;_e++){const xe=ge[_e],Fe=ge[_e-1]+1;if(xe>Fe)return Fe-U}if(J){const _e=ge[0];if(_e<U)return U-_e+1}else{const _e=ge[ie-1];if(_e>U)return _e-U+1}break}break}case a.ScrollMode.HORIZONTAL:break;case a.ScrollMode.PAGE:case a.ScrollMode.VERTICAL:{if(this._spreadMode===a.SpreadMode.NONE)break;const Ae=this._spreadMode-1;if(J&&U%2!==Ae)break;if(!J&&U%2===Ae)break;const{views:ee}=this._getVisiblePages(),ge=J?U-1:U+1;for(const{id:ve,percent:ie,widthPercent:_e}of ee)if(ve===ge){if(ie>0&&_e===100)return 2;break}break}}return 1}nextPage(){const U=this._currentPageNumber,J=this.pagesCount;if(U>=J)return!1;const Ae=this._getPageAdvance(U,!1)||1;return this.currentPageNumber=Math.min(U+Ae,J),!0}previousPage(){const U=this._currentPageNumber;if(U<=1)return!1;const J=this._getPageAdvance(U,!0)||1;return this.currentPageNumber=Math.max(U-J,1),!0}increaseScale({drawingDelay:U,scaleFactor:J,steps:Ae}={}){if(!this.pdfDocument)return;let ee=this._currentScale;if(J>1)ee=Math.round(ee*J*100)/100;else{Ae??(Ae=1);do ee=Math.ceil((ee*a.DEFAULT_SCALE_DELTA).toFixed(2)*10)/10;while(--Ae>0&&ee<a.MAX_SCALE)}W(this,ae,ct).call(this,Math.min(a.MAX_SCALE,ee),{noScroll:!1,drawingDelay:U})}decreaseScale({drawingDelay:U,scaleFactor:J,steps:Ae}={}){if(!this.pdfDocument)return;let ee=this._currentScale;if(J>0&&J<1)ee=Math.round(ee*J*100)/100;else{Ae??(Ae=1);do ee=Math.floor((ee/a.DEFAULT_SCALE_DELTA).toFixed(2)*10)/10;while(--Ae>0&&ee>a.MIN_SCALE)}W(this,ae,ct).call(this,Math.max(a.MIN_SCALE,ee),{noScroll:!1,drawingDelay:U})}get containerTopLeft(){return i(this,le)||he(this,le,[this.container.offsetTop,this.container.offsetLeft])}get annotationEditorMode(){return i(this,N)?i(this,F):r.AnnotationEditorType.DISABLE}set annotationEditorMode({mode:U,editId:J=null}){if(!i(this,N))throw new Error("The AnnotationEditor is not enabled.");if(i(this,F)!==U){if(!P(U))throw new Error(`Invalid AnnotationEditor mode: ${U}`);this.pdfDocument&&(he(this,F,U),this.eventBus.dispatch("annotationeditormodechanged",{source:this,mode:U}),i(this,N).updateMode(U,J))}}set annotationEditorParams({type:U,value:J}){if(!i(this,N))throw new Error("The AnnotationEditor is not enabled.");i(this,N).updateParams(U,J)}refresh(U=!1,J=Object.create(null)){if(this.pdfDocument){for(const Ae of this._pages)Ae.update(J);i(this,q)!==null&&(clearTimeout(i(this,q)),he(this,q,null)),U||this.update()}}}w=new WeakMap,v=new WeakMap,F=new WeakMap,N=new WeakMap,G=new WeakMap,le=new WeakMap,V=new WeakMap,Z=new WeakMap,re=new WeakMap,te=new WeakMap,K=new WeakMap,ue=new WeakMap,se=new WeakMap,Ce=new WeakMap,Me=new WeakMap,q=new WeakMap,R=new WeakMap,O=new WeakSet,Gs=function(){const U=this;return{get annotationEditorUIManager(){return i(U,N)},get annotationStorage(){var J;return(J=U.pdfDocument)==null?void 0:J.annotationStorage},get downloadManager(){return U.downloadManager},get enableScripting(){return!!U._scriptingManager},get fieldObjectsPromise(){var J;return(J=U.pdfDocument)==null?void 0:J.getFieldObjects()},get findController(){return U.findController},get hasJSActionsPromise(){var J;return(J=U.pdfDocument)==null?void 0:J.hasJSActions()},get linkService(){return U.linkService}}},u=new WeakSet,qs=function(U){const J={annotationEditorMode:i(this,F),annotationMode:i(this,G),textLayerMode:i(this,R)};return U&&(!U.includes(r.PermissionFlag.COPY)&&i(this,R)===a.TextLayerMode.ENABLE&&(J.textLayerMode=a.TextLayerMode.ENABLE_PERMISSIONS),U.includes(r.PermissionFlag.MODIFY_CONTENTS)||(J.annotationEditorMode=r.AnnotationEditorType.DISABLE),!U.includes(r.PermissionFlag.MODIFY_ANNOTATIONS)&&!U.includes(r.PermissionFlag.FILL_INTERACTIVE_FORMS)&&i(this,G)===r.AnnotationMode.ENABLE_FORMS&&(J.annotationMode=r.AnnotationMode.ENABLE)),J},D=new WeakSet,Xs=function(){if(document.visibilityState==="hidden"||!this.container.offsetParent||this._getVisiblePages().views.length===0)return Promise.resolve();const U=new Promise(J=>{he(this,Me,()=>{document.visibilityState==="hidden"&&(J(),document.removeEventListener("visibilitychange",i(this,Me)),he(this,Me,null))}),document.addEventListener("visibilitychange",i(this,Me))});return Promise.race([this._onePageRenderedCapability.promise,U])},X=new WeakSet,Ks=function(U,J){const Ae=document.getSelection(),{focusNode:ee,anchorNode:ge}=Ae;if(ge&&ee&&Ae.containsNode(i(this,te))){if(i(this,re)||U===a.TextLayerMode.ENABLE_PERMISSIONS){J.preventDefault(),J.stopPropagation();return}he(this,re,!0);const ve=this.container.style.cursor;this.container.style.cursor="wait";const ie=_e=>he(this,K,_e.key==="Escape");window.addEventListener("keydown",ie),this.getAllText().then(async _e=>{_e!==null&&await navigator.clipboard.writeText(_e)}).catch(_e=>{console.warn(`Something goes wrong when extracting the text: ${_e.message}`)}).finally(()=>{he(this,re,!1),he(this,K,!1),window.removeEventListener("keydown",ie),this.container.style.cursor=ve}),J.preventDefault(),J.stopPropagation()}},z=new WeakSet,Nt=function(){if(this._scrollMode!==a.ScrollMode.PAGE)throw new Error("#ensurePageViewVisible: Invalid scrollMode value.");const U=this._currentPageNumber,J=i(this,Ce),Ae=this.viewer;if(Ae.textContent="",J.pages.length=0,this._spreadMode===a.SpreadMode.NONE&&!this.isInPresentationMode){const ee=this._pages[U-1];Ae.append(ee.div),J.pages.push(ee)}else{const ee=new Set,ge=this._spreadMode-1;ge===-1?ee.add(U-1):U%2!==ge?(ee.add(U-1),ee.add(U)):(ee.add(U-2),ee.add(U-1));const ve=document.createElement("div");if(ve.className="spread",this.isInPresentationMode){const ie=document.createElement("div");ie.className="dummyPage",ve.append(ie)}for(const ie of ee){const _e=this._pages[ie];_e&&(ve.append(_e.div),J.pages.push(_e))}Ae.append(ve)}J.scrollDown=U>=J.previousPageNumber,J.previousPageNumber=U},Y=new WeakSet,ii=function(U,J=null){const{div:Ae,id:ee}=U;if(this._currentPageNumber!==ee&&this._setCurrentPageNumber(ee),this._scrollMode===a.ScrollMode.PAGE&&(W(this,z,Nt).call(this),this.update()),!J&&!this.isInPresentationMode){const ge=Ae.offsetLeft+Ae.clientLeft,ve=ge+Ae.clientWidth,{scrollLeft:ie,clientWidth:_e}=this.container;(this._scrollMode===a.ScrollMode.HORIZONTAL||ge<ie||ve>ie+_e)&&(J={left:0,top:0})}(0,a.scrollIntoView)(Ae,J),!this._currentScaleValue&&this._location&&(this._location=null)},oe=new WeakSet,Ys=function(U){return U===this._currentScale||Math.abs(U-this._currentScale)<1e-15},Ee=new WeakSet,fn=function(U,J,{noScroll:Ae=!1,preset:ee=!1,drawingDelay:ge=-1}){if(this._currentScaleValue=J.toString(),W(this,oe,Ys).call(this,U)){ee&&this.eventBus.dispatch("scalechanging",{source:this,scale:U,presetValue:J});return}this.viewer.style.setProperty("--scale-factor",U*r.PixelsPerInch.PDF_TO_CSS_UNITS);const ve=ge>=0&&ge<1e3;if(this.refresh(!0,{scale:U,drawingDelay:ve?ge:-1}),ve&&he(this,q,setTimeout(()=>{he(this,q,null),this.refresh()},ge)),this._currentScale=U,!Ae){let ie=this._currentPageNumber,_e;this._location&&!(this.isInPresentationMode||this.isChangingPresentationMode)&&(ie=this._location.pageNumber,_e=[null,{name:"XYZ"},this._location.left,this._location.top,null]),this.scrollPageIntoView({pageNumber:ie,destArray:_e,allowNegativeOffset:!0})}this.eventBus.dispatch("scalechanging",{source:this,scale:U,presetValue:ee?J:void 0}),this.defaultRenderingQueue&&this.update()},ne=new WeakSet,Zs=function(){return this._spreadMode!==a.SpreadMode.NONE&&this._scrollMode!==a.ScrollMode.HORIZONTAL?2:1},ae=new WeakSet,ct=function(U,J){let Ae=parseFloat(U);if(Ae>0)J.preset=!1,W(this,Ee,fn).call(this,Ae,U,J);else{const ee=this._pages[this._currentPageNumber-1];if(!ee)return;let ge=a.SCROLLBAR_PADDING,ve=a.VERTICAL_PADDING;this.isInPresentationMode?(ge=ve=4,this._spreadMode!==a.SpreadMode.NONE&&(ge*=2)):this.removePageBorders?ge=ve=0:this._scrollMode===a.ScrollMode.HORIZONTAL&&([ge,ve]=[ve,ge]);const ie=(this.container.clientWidth-ge)/ee.width*ee.scale/i(this,ne,Zs),_e=(this.container.clientHeight-ve)/ee.height*ee.scale;switch(U){case"page-actual":Ae=1;break;case"page-width":Ae=ie;break;case"page-height":Ae=_e;break;case"page-fit":Ae=Math.min(ie,_e);break;case"auto":const ke=(0,a.isPortraitOrientation)(ee)?ie:Math.min(_e,ie);Ae=Math.min(a.MAX_AUTO_SCALE,ke);break;default:console.error(`#setScale: "${U}" is an unknown zoom value.`);return}J.preset=!0,W(this,Ee,fn).call(this,Ae,U,J)}},be=new WeakSet,pn=function(){const U=this._pages[this._currentPageNumber-1];this.isInPresentationMode&&W(this,ae,ct).call(this,this._currentScaleValue,{noScroll:!0}),W(this,Y,ii).call(this,U)},Le=new WeakSet,Js=async function(U){var J,Ae;if(U.pdfPage)return U.pdfPage;try{const ee=await this.pdfDocument.getPage(U.id);return U.pdfPage||U.setPdfPage(ee),(Ae=(J=this.linkService)._cachedPageNumber)!=null&&Ae.call(J,ee.ref)||this.linkService.cachePageRef(U.id,ee.ref),ee}catch(ee){return console.error("Unable to get page for page view",ee),null}},Be=new WeakSet,Qs=function(U){var J,Ae;if(((J=U.first)==null?void 0:J.id)===1)return!0;if(((Ae=U.last)==null?void 0:Ae.id)===this.pagesCount)return!1;switch(this._scrollMode){case a.ScrollMode.PAGE:return i(this,Ce).scrollDown;case a.ScrollMode.HORIZONTAL:return this.scroll.right}return this.scroll.down},He=new WeakSet,gn=function(U=this.container.clientHeight){U!==i(this,ue)&&(he(this,ue,U),a.docStyle.setProperty("--viewer-container-height",`${U}px`))},Ge=new WeakSet,er=function(U){for(const J of U)if(J.target===this.container){W(this,He,gn).call(this,Math.floor(J.borderBoxSize[0].blockSize)),he(this,le,null);break}},_.PDFViewer=y},(k,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.NullL10n=void 0,_.getL10nFallback=r;const m={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} × {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} × {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing…",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};m.print_progress_percent="{{progress}}%";function r(E,C){switch(E){case"find_match_count":E=`find_match_count[${C.total===1?"one":"other"}]`;break;case"find_match_count_limit":E=`find_match_count_limit[${C.limit===1?"one":"other"}]`;break}return m[E]||""}function a(E,C){return C?E.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(s,g)=>g in C?C[g]:"{{"+g+"}}"):E}const T={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(E,C=null,s=r(E,C)){return a(s,C)},async translate(E){}};_.NullL10n=T},(k,_,m)=>{var S,w,v,F,N,G,le,V,Z,re,te,ni,ue,mn,Ce,bn,q,_n,O,vn,u,tr,D,ir,X,wn;Object.defineProperty(_,"__esModule",{value:!0}),_.PDFPageView=void 0;var r=m(5),a=m(4),T=m(34),E=m(35),C=m(9),s=m(32);m(11);var g=m(36),b=m(37),P=m(38),x=m(39),y=m(40);const A=C.compatibilityParams.maxCanvasPixels||16777216,o=()=>null;class c{constructor(j){H(this,te);H(this,ue);H(this,Ce);H(this,q);H(this,O);H(this,u);H(this,D);H(this,X);H(this,S,r.AnnotationMode.ENABLE_FORMS);H(this,w,!1);H(this,v,null);H(this,F,null);H(this,N,null);H(this,G,null);H(this,le,a.RenderingStates.INITIAL);H(this,V,a.TextLayerMode.ENABLE);H(this,Z,{directDrawing:!0,initialOptionalContent:!0,regularAnnotations:!0});H(this,re,new WeakMap);var Se;const Y=j.container,ce=j.defaultViewport;this.id=j.id,this.renderingId="page"+this.id,he(this,v,j.layerProperties||o),this.pdfPage=null,this.pageLabel=null,this.rotation=0,this.scale=j.scale||a.DEFAULT_SCALE,this.viewport=ce,this.pdfPageRotate=ce.rotation,this._optionalContentConfigPromise=j.optionalContentConfigPromise||null,he(this,V,j.textLayerMode??a.TextLayerMode.ENABLE),he(this,S,j.annotationMode??r.AnnotationMode.ENABLE_FORMS),this.imageResourcesPath=j.imageResourcesPath||"",this.isOffscreenCanvasSupported=j.isOffscreenCanvasSupported??!0,this.maxCanvasPixels=j.maxCanvasPixels??A,this.pageColors=j.pageColors||null,this.eventBus=j.eventBus,this.renderingQueue=j.renderingQueue,this.l10n=j.l10n||s.NullL10n,this.renderTask=null,this.resume=null,this._isStandalone=!((Se=this.renderingQueue)!=null&&Se.hasViewer()),this._container=Y,j.useOnlyCssZoom&&(console.error("useOnlyCssZoom was removed, please use `maxCanvasPixels = 0` instead."),this.maxCanvasPixels=0),this._annotationCanvasMap=null,this.annotationLayer=null,this.annotationEditorLayer=null,this.textLayer=null,this.zoomLayer=null,this.xfaLayer=null,this.structTreeLayer=null;const oe=document.createElement("div");if(oe.className="page",oe.setAttribute("data-page-number",this.id),oe.setAttribute("role","region"),this.l10n.get("page_landmark",{page:this.id}).then(Ee=>{oe.setAttribute("aria-label",Ee)}),this.div=oe,W(this,te,ni).call(this),Y==null||Y.append(oe),this._isStandalone){Y==null||Y.style.setProperty("--scale-factor",this.scale*r.PixelsPerInch.PDF_TO_CSS_UNITS);const{optionalContentConfigPromise:Ee}=j;Ee&&Ee.then(ye=>{Ee===this._optionalContentConfigPromise&&(i(this,Z).initialOptionalContent=ye.hasInitialVisibility)})}}get renderingState(){return i(this,le)}set renderingState(j){if(j!==i(this,le))switch(he(this,le,j),i(this,F)&&(clearTimeout(i(this,F)),he(this,F,null)),j){case a.RenderingStates.PAUSED:this.div.classList.remove("loading");break;case a.RenderingStates.RUNNING:this.div.classList.add("loadingIcon"),he(this,F,setTimeout(()=>{this.div.classList.add("loading"),he(this,F,null)},0));break;case a.RenderingStates.INITIAL:case a.RenderingStates.FINISHED:this.div.classList.remove("loadingIcon","loading");break}}setPdfPage(j){var ce,oe,Se;this._isStandalone&&(((ce=this.pageColors)==null?void 0:ce.foreground)==="CanvasText"||((oe=this.pageColors)==null?void 0:oe.background)==="Canvas")&&((Se=this._container)==null||Se.style.setProperty("--hcm-highligh-filter",j.filterFactory.addHighlightHCMFilter("CanvasText","Canvas","HighlightText","Highlight"))),this.pdfPage=j,this.pdfPageRotate=j.rotate;const Y=(this.rotation+this.pdfPageRotate)%360;this.viewport=j.getViewport({scale:this.scale*r.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:Y}),W(this,te,ni).call(this),this.reset()}destroy(){var j;this.reset(),(j=this.pdfPage)==null||j.cleanup()}get _textHighlighter(){return(0,r.shadow)(this,"_textHighlighter",new P.TextHighlighter({pageIndex:this.id-1,eventBus:this.eventBus,findController:i(this,v).call(this).findController}))}_resetZoomLayer(j=!1){if(!this.zoomLayer)return;const Y=this.zoomLayer.firstChild;i(this,re).delete(Y),Y.width=0,Y.height=0,j&&this.zoomLayer.remove(),this.zoomLayer=null}reset({keepZoomLayer:j=!1,keepAnnotationLayer:Y=!1,keepAnnotationEditorLayer:ce=!1,keepXfaLayer:oe=!1,keepTextLayer:Se=!1}={}){var Ie,Le,De,Be,je;this.cancelRendering({keepAnnotationLayer:Y,keepAnnotationEditorLayer:ce,keepXfaLayer:oe,keepTextLayer:Se}),this.renderingState=a.RenderingStates.INITIAL;const Ee=this.div,ye=Ee.childNodes,ne=j&&this.zoomLayer||null,fe=Y&&((Ie=this.annotationLayer)==null?void 0:Ie.div)||null,ae=ce&&((Le=this.annotationEditorLayer)==null?void 0:Le.div)||null,de=oe&&((De=this.xfaLayer)==null?void 0:De.div)||null,be=Se&&((Be=this.textLayer)==null?void 0:Be.div)||null;for(let He=ye.length-1;He>=0;He--){const qe=ye[He];switch(qe){case ne:case fe:case ae:case de:case be:continue}qe.remove()}Ee.removeAttribute("data-loaded"),fe&&this.annotationLayer.hide(),ae&&this.annotationEditorLayer.hide(),de&&this.xfaLayer.hide(),be&&this.textLayer.hide(),(je=this.structTreeLayer)==null||je.hide(),ne||(this.canvas&&(i(this,re).delete(this.canvas),this.canvas.width=0,this.canvas.height=0,delete this.canvas),this._resetZoomLayer())}update({scale:j=0,rotation:Y=null,optionalContentConfigPromise:ce=null,drawingDelay:oe=-1}){var Ee;this.scale=j||this.scale,typeof Y=="number"&&(this.rotation=Y),ce instanceof Promise&&(this._optionalContentConfigPromise=ce,ce.then(ye=>{ce===this._optionalContentConfigPromise&&(i(this,Z).initialOptionalContent=ye.hasInitialVisibility)})),i(this,Z).directDrawing=!0;const Se=(this.rotation+this.pdfPageRotate)%360;if(this.viewport=this.viewport.clone({scale:this.scale*r.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:Se}),W(this,te,ni).call(this),this._isStandalone&&((Ee=this._container)==null||Ee.style.setProperty("--scale-factor",this.viewport.scale)),this.canvas){let ye=!1;if(i(this,w)){if(this.maxCanvasPixels===0)ye=!0;else if(this.maxCanvasPixels>0){const{width:fe,height:ae}=this.viewport,{sx:de,sy:be}=this.outputScale;ye=(Math.floor(fe)*de|0)*(Math.floor(ae)*be|0)>this.maxCanvasPixels}}const ne=!ye&&oe>=0&&oe<1e3;if(ne||ye){if(ne&&this.renderingState!==a.RenderingStates.FINISHED&&(this.cancelRendering({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0,cancelExtraDelay:oe}),this.renderingState=a.RenderingStates.FINISHED,i(this,Z).directDrawing=!1),this.cssTransform({target:this.canvas,redrawAnnotationLayer:!0,redrawAnnotationEditorLayer:!0,redrawXfaLayer:!0,redrawTextLayer:!ne,hideTextLayer:ne}),ne)return;this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:i(this,G)});return}!this.zoomLayer&&!this.canvas.hidden&&(this.zoomLayer=this.canvas.parentNode,this.zoomLayer.style.position="absolute")}this.zoomLayer&&this.cssTransform({target:this.zoomLayer.firstChild}),this.reset({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0})}cancelRendering({keepAnnotationLayer:j=!1,keepAnnotationEditorLayer:Y=!1,keepXfaLayer:ce=!1,keepTextLayer:oe=!1,cancelExtraDelay:Se=0}={}){var Ee;this.renderTask&&(this.renderTask.cancel(Se),this.renderTask=null),this.resume=null,this.textLayer&&(!oe||!this.textLayer.div)&&(this.textLayer.cancel(),this.textLayer=null),this.structTreeLayer&&!this.textLayer&&(this.structTreeLayer=null),this.annotationLayer&&(!j||!this.annotationLayer.div)&&(this.annotationLayer.cancel(),this.annotationLayer=null,this._annotationCanvasMap=null),this.annotationEditorLayer&&(!Y||!this.annotationEditorLayer.div)&&(this.annotationEditorLayer.cancel(),this.annotationEditorLayer=null),this.xfaLayer&&(!ce||!this.xfaLayer.div)&&(this.xfaLayer.cancel(),this.xfaLayer=null,(Ee=this._textHighlighter)==null||Ee.disable())}cssTransform({target:j,redrawAnnotationLayer:Y=!1,redrawAnnotationEditorLayer:ce=!1,redrawXfaLayer:oe=!1,redrawTextLayer:Se=!1,hideTextLayer:Ee=!1}){var ne;if(!j.hasAttribute("zooming")){j.setAttribute("zooming",!0);const{style:fe}=j;fe.width=fe.height=""}const ye=i(this,re).get(j);if(this.viewport!==ye){const fe=this.viewport.rotation-ye.rotation,ae=Math.abs(fe);let de=1,be=1;if(ae===90||ae===270){const{width:Ie,height:Le}=this.viewport;de=Le/Ie,be=Ie/Le}j.style.transform=`rotate(${fe}deg) scale(${de}, ${be})`}Y&&this.annotationLayer&&W(this,ue,mn).call(this),ce&&this.annotationEditorLayer&&W(this,Ce,bn).call(this),oe&&this.xfaLayer&&W(this,q,_n).call(this),this.textLayer&&(Ee?(this.textLayer.hide(),(ne=this.structTreeLayer)==null||ne.hide()):Se&&W(this,O,vn).call(this))}get width(){return this.viewport.width}get height(){return this.viewport.height}getPagePoint(j,Y){return this.viewport.convertToPdfPoint(j,Y)}async draw(){this.renderingState!==a.RenderingStates.INITIAL&&(console.error("Must be in new state before drawing"),this.reset());const{div:j,l10n:Y,pageColors:ce,pdfPage:oe,viewport:Se}=this;if(!oe)throw this.renderingState=a.RenderingStates.FINISHED,new Error("pdfPage is not loaded");this.renderingState=a.RenderingStates.RUNNING;const Ee=document.createElement("div");if(Ee.classList.add("canvasWrapper"),j.append(Ee),!this.textLayer&&i(this,V)!==a.TextLayerMode.DISABLE&&!oe.isPureXfa&&(this._accessibilityManager||(this._accessibilityManager=new b.TextAccessibilityManager),this.textLayer=new x.TextLayerBuilder({highlighter:this._textHighlighter,accessibilityManager:this._accessibilityManager,isOffscreenCanvasSupported:this.isOffscreenCanvasSupported,enablePermissions:i(this,V)===a.TextLayerMode.ENABLE_PERMISSIONS}),j.append(this.textLayer.div)),!this.annotationLayer&&i(this,S)!==r.AnnotationMode.DISABLE){const{annotationStorage:Te,downloadManager:U,enableScripting:J,fieldObjectsPromise:Ae,hasJSActionsPromise:ee,linkService:ge}=i(this,v).call(this);this._annotationCanvasMap||(this._annotationCanvasMap=new Map),this.annotationLayer=new E.AnnotationLayerBuilder({pageDiv:j,pdfPage:oe,annotationStorage:Te,imageResourcesPath:this.imageResourcesPath,renderForms:i(this,S)===r.AnnotationMode.ENABLE_FORMS,linkService:ge,downloadManager:U,l10n:Y,enableScripting:J,hasJSActionsPromise:ee,fieldObjectsPromise:Ae,annotationCanvasMap:this._annotationCanvasMap,accessibilityManager:this._accessibilityManager})}const ye=Te=>{if(be==null||be(!1),this.renderingQueue&&!this.renderingQueue.isHighestPriority(this)){this.renderingState=a.RenderingStates.PAUSED,this.resume=()=>{this.renderingState=a.RenderingStates.RUNNING,Te()};return}Te()},{width:ne,height:fe}=Se,ae=document.createElement("canvas");ae.setAttribute("role","presentation"),ae.hidden=!0;const de=!!(ce!=null&&ce.background&&(ce!=null&&ce.foreground));let be=Te=>{(!de||Te)&&(ae.hidden=!1,be=null)};Ee.append(ae),this.canvas=ae;const Ie=ae.getContext("2d",{alpha:!1}),Le=this.outputScale=new a.OutputScale;if(this.maxCanvasPixels===0){const Te=1/this.scale;Le.sx*=Te,Le.sy*=Te,he(this,w,!0)}else if(this.maxCanvasPixels>0){const Te=ne*fe,U=Math.sqrt(this.maxCanvasPixels/Te);Le.sx>U||Le.sy>U?(Le.sx=U,Le.sy=U,he(this,w,!0)):he(this,w,!1)}const De=(0,a.approximateFraction)(Le.sx),Be=(0,a.approximateFraction)(Le.sy);ae.width=(0,a.roundToDivide)(ne*Le.sx,De[0]),ae.height=(0,a.roundToDivide)(fe*Le.sy,Be[0]);const{style:je}=ae;je.width=(0,a.roundToDivide)(ne,De[1])+"px",je.height=(0,a.roundToDivide)(fe,Be[1])+"px",i(this,re).set(ae,Se);const He=Le.scaled?[Le.sx,0,0,Le.sy,0,0]:null,qe={canvasContext:Ie,transform:He,viewport:Se,annotationMode:i(this,S),optionalContentConfigPromise:this._optionalContentConfigPromise,annotationCanvasMap:this._annotationCanvasMap,pageColors:ce},Ge=this.renderTask=this.pdfPage.render(qe);Ge.onContinue=ye;const et=Ge.promise.then(async()=>{var Te;if(be==null||be(!0),await W(this,X,wn).call(this,Ge),W(this,O,vn).call(this),this.annotationLayer&&await W(this,ue,mn).call(this),!this.annotationEditorLayer){const{annotationEditorUIManager:U}=i(this,v).call(this);if(!U)return;this.annotationEditorLayer=new T.AnnotationEditorLayerBuilder({uiManager:U,pageDiv:j,pdfPage:oe,l10n:Y,accessibilityManager:this._accessibilityManager,annotationLayer:(Te=this.annotationLayer)==null?void 0:Te.annotationLayer})}W(this,Ce,bn).call(this)},Te=>(Te instanceof r.RenderingCancelledException||be==null||be(!0),W(this,X,wn).call(this,Ge,Te)));if(oe.isPureXfa){if(this.xfaLayer)this.xfaLayer.div&&j.append(this.xfaLayer.div);else{const{annotationStorage:Te,linkService:U}=i(this,v).call(this);this.xfaLayer=new y.XfaLayerBuilder({pageDiv:j,pdfPage:oe,annotationStorage:Te,linkService:U})}W(this,q,_n).call(this)}return j.setAttribute("data-loaded",!0),this.eventBus.dispatch("pagerender",{source:this,pageNumber:this.id}),et}setPageLabel(j){this.pageLabel=typeof j=="string"?j:null,this.pageLabel!==null?this.div.setAttribute("data-page-label",this.pageLabel):this.div.removeAttribute("data-page-label")}get thumbnailCanvas(){const{directDrawing:j,initialOptionalContent:Y,regularAnnotations:ce}=i(this,Z);return j&&Y&&ce?this.canvas:null}}S=new WeakMap,w=new WeakMap,v=new WeakMap,F=new WeakMap,N=new WeakMap,G=new WeakMap,le=new WeakMap,V=new WeakMap,Z=new WeakMap,re=new WeakMap,te=new WeakSet,ni=function(){const{viewport:j}=this;if(this.pdfPage){if(i(this,N)===j.rotation)return;he(this,N,j.rotation)}(0,r.setLayerDimensions)(this.div,j,!0,!1)},ue=new WeakSet,mn=async function(){let j=null;try{await this.annotationLayer.render(this.viewport,"display")}catch(Y){console.error(`#renderAnnotationLayer: "${Y}".`),j=Y}finally{this.eventBus.dispatch("annotationlayerrendered",{source:this,pageNumber:this.id,error:j})}},Ce=new WeakSet,bn=async function(){let j=null;try{await this.annotationEditorLayer.render(this.viewport,"display")}catch(Y){console.error(`#renderAnnotationEditorLayer: "${Y}".`),j=Y}finally{this.eventBus.dispatch("annotationeditorlayerrendered",{source:this,pageNumber:this.id,error:j})}},q=new WeakSet,_n=async function(){let j=null;try{const Y=await this.xfaLayer.render(this.viewport,"display");Y!=null&&Y.textDivs&&this._textHighlighter&&W(this,D,ir).call(this,Y.textDivs)}catch(Y){console.error(`#renderXfaLayer: "${Y}".`),j=Y}finally{this.eventBus.dispatch("xfalayerrendered",{source:this,pageNumber:this.id,error:j})}},O=new WeakSet,vn=async function(){const{pdfPage:j,textLayer:Y,viewport:ce}=this;if(!Y)return;let oe=null;try{if(!Y.renderingDone){const Se=j.streamTextContent({includeMarkedContent:!0,disableNormalization:!0});Y.setTextContentSource(Se)}await Y.render(ce)}catch(Se){if(Se instanceof r.AbortException)return;console.error(`#renderTextLayer: "${Se}".`),oe=Se}this.eventBus.dispatch("textlayerrendered",{source:this,pageNumber:this.id,numTextDivs:Y.numTextDivs,error:oe}),W(this,u,tr).call(this)},u=new WeakSet,tr=async function(){var ce,oe,Se;if(!this.textLayer)return;this.structTreeLayer||(this.structTreeLayer=new g.StructTreeLayerBuilder);const j=await(this.structTreeLayer.renderingDone?null:this.pdfPage.getStructTree()),Y=(ce=this.structTreeLayer)==null?void 0:ce.render(j);Y&&((oe=this.canvas)==null||oe.append(Y)),(Se=this.structTreeLayer)==null||Se.show()},D=new WeakSet,ir=async function(j){const Y=await this.pdfPage.getTextContent(),ce=[];for(const oe of Y.items)ce.push(oe.str);this._textHighlighter.setTextMapping(j,ce),this._textHighlighter.enable()},X=new WeakSet,wn=async function(j,Y=null){if(j===this.renderTask&&(this.renderTask=null),Y instanceof r.RenderingCancelledException){he(this,G,null);return}if(he(this,G,Y),this.renderingState=a.RenderingStates.FINISHED,this._resetZoomLayer(!0),i(this,Z).regularAnnotations=!j.separateAnnots,this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!1,timestamp:performance.now(),error:i(this,G)}),Y)throw Y},_.PDFPageView=c},(k,_,m)=>{var E,C;Object.defineProperty(_,"__esModule",{value:!0}),_.AnnotationEditorLayerBuilder=void 0;var r=m(5),a=m(32);class T{constructor(g){H(this,E,null);H(this,C,void 0);this.pageDiv=g.pageDiv,this.pdfPage=g.pdfPage,this.accessibilityManager=g.accessibilityManager,this.l10n=g.l10n||a.NullL10n,this.annotationEditorLayer=null,this.div=null,this._cancelled=!1,he(this,C,g.uiManager),he(this,E,g.annotationLayer||null)}async render(g,b="display"){if(b!=="display"||this._cancelled)return;const P=g.clone({dontFlip:!0});if(this.div){this.annotationEditorLayer.update({viewport:P}),this.show();return}const x=this.div=document.createElement("div");x.className="annotationEditorLayer",x.tabIndex=0,x.hidden=!0,x.dir=i(this,C).direction,this.pageDiv.append(x),this.annotationEditorLayer=new r.AnnotationEditorLayer({uiManager:i(this,C),div:x,accessibilityManager:this.accessibilityManager,pageIndex:this.pdfPage.pageNumber-1,l10n:this.l10n,viewport:P,annotationLayer:i(this,E)});const y={viewport:P,div:x,annotations:null,intent:b};this.annotationEditorLayer.render(y),this.show()}cancel(){this._cancelled=!0,this.div&&(this.pageDiv=null,this.annotationEditorLayer.destroy(),this.div.remove())}hide(){this.div&&(this.div.hidden=!0)}show(){!this.div||this.annotationEditorLayer.isEmpty||(this.div.hidden=!1)}}E=new WeakMap,C=new WeakMap,_.AnnotationEditorLayerBuilder=T},(k,_,m)=>{var C,s,yn;Object.defineProperty(_,"__esModule",{value:!0}),_.AnnotationLayerBuilder=void 0;var r=m(5),a=m(32),T=m(4);class E{constructor({pageDiv:P,pdfPage:x,linkService:y,downloadManager:A,annotationStorage:o=null,imageResourcesPath:c="",renderForms:S=!0,l10n:w=a.NullL10n,enableScripting:v=!1,hasJSActionsPromise:F=null,fieldObjectsPromise:N=null,annotationCanvasMap:G=null,accessibilityManager:le=null}){H(this,s);H(this,C,null);this.pageDiv=P,this.pdfPage=x,this.linkService=y,this.downloadManager=A,this.imageResourcesPath=c,this.renderForms=S,this.l10n=w,this.annotationStorage=o,this.enableScripting=v,this._hasJSActionsPromise=F||Promise.resolve(!1),this._fieldObjectsPromise=N||Promise.resolve(null),this._annotationCanvasMap=G,this._accessibilityManager=le,this.annotationLayer=null,this.div=null,this._cancelled=!1,this._eventBus=y.eventBus}async render(P,x="display"){var S;if(this.div){if(this._cancelled||!this.annotationLayer)return;this.annotationLayer.update({viewport:P.clone({dontFlip:!0})});return}const[y,A,o]=await Promise.all([this.pdfPage.getAnnotations({intent:x}),this._hasJSActionsPromise,this._fieldObjectsPromise]);if(this._cancelled)return;const c=this.div=document.createElement("div");if(c.className="annotationLayer",this.pageDiv.append(c),y.length===0){this.hide();return}this.annotationLayer=new r.AnnotationLayer({div:c,accessibilityManager:this._accessibilityManager,annotationCanvasMap:this._annotationCanvasMap,l10n:this.l10n,page:this.pdfPage,viewport:P.clone({dontFlip:!0})}),await this.annotationLayer.render({annotations:y,imageResourcesPath:this.imageResourcesPath,renderForms:this.renderForms,linkService:this.linkService,downloadManager:this.downloadManager,annotationStorage:this.annotationStorage,enableScripting:this.enableScripting,hasJSActions:A,fieldObjects:o}),this.linkService.isInPresentationMode&&W(this,s,yn).call(this,T.PresentationModeState.FULLSCREEN),i(this,C)||(he(this,C,w=>{W(this,s,yn).call(this,w.state)}),(S=this._eventBus)==null||S._on("presentationmodechanged",i(this,C)))}cancel(){var P;this._cancelled=!0,i(this,C)&&((P=this._eventBus)==null||P._off("presentationmodechanged",i(this,C)),he(this,C,null))}hide(){this.div&&(this.div.hidden=!0)}}C=new WeakMap,s=new WeakSet,yn=function(P){if(!this.div)return;let x=!1;switch(P){case T.PresentationModeState.FULLSCREEN:x=!0;break;case T.PresentationModeState.NORMAL:break;default:return}for(const y of this.div.childNodes)y.hasAttribute("data-internal-link")||(y.inert=x)},_.AnnotationLayerBuilder=E},(k,_,m)=>{var C,s,Sn,b,En;Object.defineProperty(_,"__esModule",{value:!0}),_.StructTreeLayerBuilder=void 0;var r=m(4);const a={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},T=/^H(\d+)$/;class E{constructor(){H(this,s);H(this,b);H(this,C,void 0)}get renderingDone(){return i(this,C)!==void 0}render(y){if(i(this,C)!==void 0)return i(this,C);const A=W(this,b,En).call(this,y);return A==null||A.classList.add("structTree"),he(this,C,A)}hide(){i(this,C)&&!i(this,C).hidden&&(i(this,C).hidden=!0)}show(){var y;(y=i(this,C))!=null&&y.hidden&&(i(this,C).hidden=!1)}}C=new WeakMap,s=new WeakSet,Sn=function(y,A){const{alt:o,id:c,lang:S}=y;o!==void 0&&A.setAttribute("aria-label",(0,r.removeNullCharacters)(o)),c!==void 0&&A.setAttribute("aria-owns",c),S!==void 0&&A.setAttribute("lang",(0,r.removeNullCharacters)(S,!0))},b=new WeakSet,En=function(y){if(!y)return null;const A=document.createElement("span");if("role"in y){const{role:o}=y,c=o.match(T);c?(A.setAttribute("role","heading"),A.setAttribute("aria-level",c[1])):a[o]&&A.setAttribute("role",a[o])}if(W(this,s,Sn).call(this,y,A),y.children)if(y.children.length===1&&"id"in y.children[0])W(this,s,Sn).call(this,y.children[0],A);else for(const o of y.children)A.append(W(this,b,En).call(this,o));return A},_.StructTreeLayerBuilder=E},(k,_,m)=>{var T,E,C,s,g,si,P,An;Object.defineProperty(_,"__esModule",{value:!0}),_.TextAccessibilityManager=void 0;var r=m(4);const y=class y{constructor(){H(this,P);H(this,T,!1);H(this,E,null);H(this,C,new Map);H(this,s,new Map)}setTextMapping(o){he(this,E,o)}enable(){if(i(this,T))throw new Error("TextAccessibilityManager is already enabled.");if(!i(this,E))throw new Error("Text divs and strings have not been set.");if(he(this,T,!0),he(this,E,i(this,E).slice()),i(this,E).sort(W(y,g,si)),i(this,C).size>0){const o=i(this,E);for(const[c,S]of i(this,C)){if(!document.getElementById(c)){i(this,C).delete(c);continue}W(this,P,An).call(this,c,o[S])}}for(const[o,c]of i(this,s))this.addPointerInTextLayer(o,c);i(this,s).clear()}disable(){i(this,T)&&(i(this,s).clear(),he(this,E,null),he(this,T,!1))}removePointerInTextLayer(o){if(!i(this,T)){i(this,s).delete(o);return}const c=i(this,E);if(!c||c.length===0)return;const{id:S}=o,w=i(this,C).get(S);if(w===void 0)return;const v=c[w];i(this,C).delete(S);let F=v.getAttribute("aria-owns");F!=null&&F.includes(S)&&(F=F.split(" ").filter(N=>N!==S).join(" "),F?v.setAttribute("aria-owns",F):(v.removeAttribute("aria-owns"),v.setAttribute("role","presentation")))}addPointerInTextLayer(o,c){const{id:S}=o;if(!S)return null;if(!i(this,T))return i(this,s).set(o,c),null;c&&this.removePointerInTextLayer(o);const w=i(this,E);if(!w||w.length===0)return null;const v=(0,r.binarySearchFirstItem)(w,le=>{var V;return W(V=y,g,si).call(V,o,le)<0}),F=Math.max(0,v-1),N=w[F];W(this,P,An).call(this,S,N),i(this,C).set(S,F);const G=N.parentNode;return G!=null&&G.classList.contains("markedContent")?G.id:null}moveElementInDOM(o,c,S,w){const v=this.addPointerInTextLayer(S,w);if(!o.hasChildNodes())return o.append(c),v;const F=Array.from(o.childNodes).filter(le=>le!==c);if(F.length===0)return v;const N=S||c,G=(0,r.binarySearchFirstItem)(F,le=>{var V;return W(V=y,g,si).call(V,N,le)<0});return G===0?F[0].before(c):F[G-1].after(c),v}};T=new WeakMap,E=new WeakMap,C=new WeakMap,s=new WeakMap,g=new WeakSet,si=function(o,c){const S=o.getBoundingClientRect(),w=c.getBoundingClientRect();if(S.width===0&&S.height===0)return 1;if(w.width===0&&w.height===0)return-1;const v=S.y,F=S.y+S.height,N=S.y+S.height/2,G=w.y,le=w.y+w.height,V=w.y+w.height/2;if(N<=G&&V>=F)return-1;if(V<=v&&N>=le)return 1;const Z=S.x+S.width/2,re=w.x+w.width/2;return Z-re},P=new WeakSet,An=function(o,c){const S=c.getAttribute("aria-owns");S!=null&&S.includes(o)||c.setAttribute("aria-owns",S?`${S} ${o}`:o),c.removeAttribute("role")},H(y,g);let a=y;_.TextAccessibilityManager=a},(k,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.TextHighlighter=void 0;class m{constructor({findController:a,eventBus:T,pageIndex:E}){this.findController=a,this.matches=[],this.eventBus=T,this.pageIdx=E,this._onUpdateTextLayerMatches=null,this.textDivs=null,this.textContentItemsStr=null,this.enabled=!1}setTextMapping(a,T){this.textDivs=a,this.textContentItemsStr=T}enable(){if(!this.textDivs||!this.textContentItemsStr)throw new Error("Text divs and strings have not been set.");if(this.enabled)throw new Error("TextHighlighter is already enabled.");this.enabled=!0,this._onUpdateTextLayerMatches||(this._onUpdateTextLayerMatches=a=>{(a.pageIndex===this.pageIdx||a.pageIndex===-1)&&this._updateMatches()},this.eventBus._on("updatetextlayermatches",this._onUpdateTextLayerMatches)),this._updateMatches()}disable(){this.enabled&&(this.enabled=!1,this._onUpdateTextLayerMatches&&(this.eventBus._off("updatetextlayermatches",this._onUpdateTextLayerMatches),this._onUpdateTextLayerMatches=null),this._updateMatches(!0))}_convertMatches(a,T){if(!a)return[];const{textContentItemsStr:E}=this;let C=0,s=0;const g=E.length-1,b=[];for(let P=0,x=a.length;P<x;P++){let y=a[P];for(;C!==g&&y>=s+E[C].length;)s+=E[C].length,C++;C===E.length&&console.error("Could not find a matching mapping");const A={begin:{divIdx:C,offset:y-s}};for(y+=T[P];C!==g&&y>s+E[C].length;)s+=E[C].length,C++;A.end={divIdx:C,offset:y-s},b.push(A)}return b}_renderMatches(a){if(a.length===0)return;const{findController:T,pageIdx:E}=this,{textContentItemsStr:C,textDivs:s}=this,g=E===T.selected.pageIdx,b=T.selected.matchIdx,P=T.state.highlightAll;let x=null;const y={divIdx:-1,offset:void 0};function A(F,N){const G=F.divIdx;return s[G].textContent="",o(G,0,F.offset,N)}function o(F,N,G,le){let V=s[F];if(V.nodeType===Node.TEXT_NODE){const te=document.createElement("span");V.before(te),te.append(V),s[F]=te,V=te}const Z=C[F].substring(N,G),re=document.createTextNode(Z);if(le){const te=document.createElement("span");return te.className=`${le} appended`,te.append(re),V.append(te),le.includes("selected")?te.offsetLeft:0}return V.append(re),0}let c=b,S=c+1;if(P)c=0,S=a.length;else if(!g)return;let w=-1,v=-1;for(let F=c;F<S;F++){const N=a[F],G=N.begin;if(G.divIdx===w&&G.offset===v)continue;w=G.divIdx,v=G.offset;const le=N.end,V=g&&F===b,Z=V?" selected":"";let re=0;if(!x||G.divIdx!==x.divIdx?(x!==null&&o(x.divIdx,x.offset,y.offset),A(G)):o(x.divIdx,x.offset,G.offset),G.divIdx===le.divIdx)re=o(G.divIdx,G.offset,le.offset,"highlight"+Z);else{re=o(G.divIdx,G.offset,y.offset,"highlight begin"+Z);for(let te=G.divIdx+1,K=le.divIdx;te<K;te++)s[te].className="highlight middle"+Z;A(le,"highlight end"+Z)}x=le,V&&T.scrollMatchIntoView({element:s[G.divIdx],selectedLeft:re,pageIndex:E,matchIndex:b})}x&&o(x.divIdx,x.offset,y.offset)}_updateMatches(a=!1){if(!this.enabled&&!a)return;const{findController:T,matches:E,pageIdx:C}=this,{textContentItemsStr:s,textDivs:g}=this;let b=-1;for(const y of E){const A=Math.max(b,y.begin.divIdx);for(let o=A,c=y.end.divIdx;o<=c;o++){const S=g[o];S.textContent=s[o],S.className=""}b=y.end.divIdx+1}if(!(T!=null&&T.highlightMatches)||a)return;const P=T.pageMatches[C]||null,x=T.pageMatchesLength[C]||null;this.matches=this._convertMatches(P,x),this._renderMatches(this.matches)}}_.TextHighlighter=m},(k,_,m)=>{var E,C,s,g,b,nr,x,sr;Object.defineProperty(_,"__esModule",{value:!0}),_.TextLayerBuilder=void 0;var r=m(5),a=m(4);class T{constructor({highlighter:o=null,accessibilityManager:c=null,isOffscreenCanvasSupported:S=!0,enablePermissions:w=!1}){H(this,b);H(this,x);H(this,E,!1);H(this,C,0);H(this,s,0);H(this,g,null);this.textContentItemsStr=[],this.renderingDone=!1,this.textDivs=[],this.textDivProperties=new WeakMap,this.textLayerRenderTask=null,this.highlighter=o,this.accessibilityManager=c,this.isOffscreenCanvasSupported=S,he(this,E,w===!0),this.div=document.createElement("div"),this.div.className="textLayer",this.hide()}get numTextDivs(){return this.textDivs.length}async render(o){var w,v,F;if(!i(this,g))throw new Error('No "textContentSource" parameter specified.');const c=o.scale*(globalThis.devicePixelRatio||1),{rotation:S}=o;if(this.renderingDone){const N=S!==i(this,C),G=c!==i(this,s);(N||G)&&(this.hide(),(0,r.updateTextLayer)({container:this.div,viewport:o,textDivs:this.textDivs,textDivProperties:this.textDivProperties,isOffscreenCanvasSupported:this.isOffscreenCanvasSupported,mustRescale:G,mustRotate:N}),he(this,s,c),he(this,C,S)),this.show();return}this.cancel(),(w=this.highlighter)==null||w.setTextMapping(this.textDivs,this.textContentItemsStr),(v=this.accessibilityManager)==null||v.setTextMapping(this.textDivs),this.textLayerRenderTask=(0,r.renderTextLayer)({textContentSource:i(this,g),container:this.div,viewport:o,textDivs:this.textDivs,textDivProperties:this.textDivProperties,textContentItemsStr:this.textContentItemsStr,isOffscreenCanvasSupported:this.isOffscreenCanvasSupported}),await this.textLayerRenderTask.promise,W(this,b,nr).call(this),he(this,s,c),he(this,C,S),this.show(),(F=this.accessibilityManager)==null||F.enable()}hide(){var o;this.div.hidden||((o=this.highlighter)==null||o.disable(),this.div.hidden=!0)}show(){var o;this.div.hidden&&this.renderingDone&&(this.div.hidden=!1,(o=this.highlighter)==null||o.enable())}cancel(){var o,c;this.textLayerRenderTask&&(this.textLayerRenderTask.cancel(),this.textLayerRenderTask=null),(o=this.highlighter)==null||o.disable(),(c=this.accessibilityManager)==null||c.disable(),this.textContentItemsStr.length=0,this.textDivs.length=0,this.textDivProperties=new WeakMap}setTextContentSource(o){this.cancel(),he(this,g,o)}}E=new WeakMap,C=new WeakMap,s=new WeakMap,g=new WeakMap,b=new WeakSet,nr=function(){this.renderingDone=!0;const o=document.createElement("div");o.className="endOfContent",this.div.append(o),W(this,x,sr).call(this)},x=new WeakSet,sr=function(){const{div:o}=this;o.addEventListener("mousedown",c=>{const S=o.querySelector(".endOfContent");if(!S)return;let w=c.target!==o;if(w&&(w=getComputedStyle(S).getPropertyValue("-moz-user-select")!=="none"),w){const v=o.getBoundingClientRect(),F=Math.max(0,(c.pageY-v.top)/v.height);S.style.top=(F*100).toFixed(2)+"%"}S.classList.add("active")}),o.addEventListener("mouseup",()=>{const c=o.querySelector(".endOfContent");c&&(c.style.top="",c.classList.remove("active"))}),o.addEventListener("copy",c=>{if(!i(this,E)){const S=document.getSelection();c.clipboardData.setData("text/plain",(0,a.removeNullCharacters)((0,r.normalizeUnicode)(S.toString())))}c.preventDefault(),c.stopPropagation()})},_.TextLayerBuilder=T},(k,_,m)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.XfaLayerBuilder=void 0;var r=m(5);class a{constructor({pageDiv:E,pdfPage:C,annotationStorage:s=null,linkService:g,xfaHtml:b=null}){this.pageDiv=E,this.pdfPage=C,this.annotationStorage=s,this.linkService=g,this.xfaHtml=b,this.div=null,this._cancelled=!1}async render(E,C="display"){if(C==="print"){const b={viewport:E.clone({dontFlip:!0}),div:this.div,xfaHtml:this.xfaHtml,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:C},P=document.createElement("div");return this.pageDiv.append(P),b.div=P,r.XfaLayer.render(b)}const s=await this.pdfPage.getXfa();if(this._cancelled||!s)return{textDivs:[]};const g={viewport:E.clone({dontFlip:!0}),div:this.div,xfaHtml:s,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:C};return this.div?r.XfaLayer.update(g):(this.div=document.createElement("div"),this.pageDiv.append(this.div),g.div=this.div,r.XfaLayer.render(g))}cancel(){this._cancelled=!0}hide(){this.div&&(this.div.hidden=!0)}}_.XfaLayerBuilder=a},(k,_,m)=>{var E,ri,s,rr,b,ar,x,or,A,lr;Object.defineProperty(_,"__esModule",{value:!0}),_.SecondaryToolbar=void 0;var r=m(4),a=m(31);class T{constructor(S,w){H(this,E);H(this,s);H(this,b);H(this,x);H(this,A);this.toolbar=S.toolbar,this.toggleButton=S.toggleButton,this.buttons=[{element:S.presentationModeButton,eventName:"presentationmode",close:!0},{element:S.printButton,eventName:"print",close:!0},{element:S.downloadButton,eventName:"download",close:!0},{element:S.viewBookmarkButton,eventName:null,close:!0},{element:S.firstPageButton,eventName:"firstpage",close:!0},{element:S.lastPageButton,eventName:"lastpage",close:!0},{element:S.pageRotateCwButton,eventName:"rotatecw",close:!1},{element:S.pageRotateCcwButton,eventName:"rotateccw",close:!1},{element:S.cursorSelectToolButton,eventName:"switchcursortool",eventDetails:{tool:r.CursorTool.SELECT},close:!0},{element:S.cursorHandToolButton,eventName:"switchcursortool",eventDetails:{tool:r.CursorTool.HAND},close:!0},{element:S.scrollPageButton,eventName:"switchscrollmode",eventDetails:{mode:r.ScrollMode.PAGE},close:!0},{element:S.scrollVerticalButton,eventName:"switchscrollmode",eventDetails:{mode:r.ScrollMode.VERTICAL},close:!0},{element:S.scrollHorizontalButton,eventName:"switchscrollmode",eventDetails:{mode:r.ScrollMode.HORIZONTAL},close:!0},{element:S.scrollWrappedButton,eventName:"switchscrollmode",eventDetails:{mode:r.ScrollMode.WRAPPED},close:!0},{element:S.spreadNoneButton,eventName:"switchspreadmode",eventDetails:{mode:r.SpreadMode.NONE},close:!0},{element:S.spreadOddButton,eventName:"switchspreadmode",eventDetails:{mode:r.SpreadMode.ODD},close:!0},{element:S.spreadEvenButton,eventName:"switchspreadmode",eventDetails:{mode:r.SpreadMode.EVEN},close:!0},{element:S.documentPropertiesButton,eventName:"documentproperties",close:!0}],this.buttons.push({element:S.openFileButton,eventName:"openfile",close:!0}),this.items={firstPage:S.firstPageButton,lastPage:S.lastPageButton,pageRotateCw:S.pageRotateCwButton,pageRotateCcw:S.pageRotateCcwButton},this.eventBus=w,this.opened=!1,W(this,s,rr).call(this),W(this,b,ar).call(this,S),W(this,x,or).call(this,S),W(this,A,lr).call(this,S),this.reset()}get isOpen(){return this.opened}setPageNumber(S){this.pageNumber=S,W(this,E,ri).call(this)}setPagesCount(S){this.pagesCount=S,W(this,E,ri).call(this)}reset(){this.pageNumber=0,this.pagesCount=0,W(this,E,ri).call(this),this.eventBus.dispatch("secondarytoolbarreset",{source:this})}open(){this.opened||(this.opened=!0,(0,r.toggleExpandedBtn)(this.toggleButton,!0,this.toolbar))}close(){this.opened&&(this.opened=!1,(0,r.toggleExpandedBtn)(this.toggleButton,!1,this.toolbar))}toggle(){this.opened?this.close():this.open()}}E=new WeakSet,ri=function(){this.items.firstPage.disabled=this.pageNumber<=1,this.items.lastPage.disabled=this.pageNumber>=this.pagesCount,this.items.pageRotateCw.disabled=this.pagesCount===0,this.items.pageRotateCcw.disabled=this.pagesCount===0},s=new WeakSet,rr=function(){this.toggleButton.addEventListener("click",this.toggle.bind(this));for(const{element:S,eventName:w,close:v,eventDetails:F}of this.buttons)S.addEventListener("click",N=>{w!==null&&this.eventBus.dispatch(w,{source:this,...F}),v&&this.close(),this.eventBus.dispatch("reporttelemetry",{source:this,details:{type:"buttons",data:{id:S.id}}})})},b=new WeakSet,ar=function({cursorSelectToolButton:S,cursorHandToolButton:w}){this.eventBus._on("cursortoolchanged",({tool:v})=>{(0,r.toggleCheckedBtn)(S,v===r.CursorTool.SELECT),(0,r.toggleCheckedBtn)(w,v===r.CursorTool.HAND)})},x=new WeakSet,or=function({scrollPageButton:S,scrollVerticalButton:w,scrollHorizontalButton:v,scrollWrappedButton:F,spreadNoneButton:N,spreadOddButton:G,spreadEvenButton:le}){const V=({mode:Z})=>{(0,r.toggleCheckedBtn)(S,Z===r.ScrollMode.PAGE),(0,r.toggleCheckedBtn)(w,Z===r.ScrollMode.VERTICAL),(0,r.toggleCheckedBtn)(v,Z===r.ScrollMode.HORIZONTAL),(0,r.toggleCheckedBtn)(F,Z===r.ScrollMode.WRAPPED);const re=this.pagesCount>a.PagesCountLimit.FORCE_SCROLL_MODE_PAGE;S.disabled=re,w.disabled=re,v.disabled=re,F.disabled=re;const te=Z===r.ScrollMode.HORIZONTAL;N.disabled=te,G.disabled=te,le.disabled=te};this.eventBus._on("scrollmodechanged",V),this.eventBus._on("secondarytoolbarreset",Z=>{Z.source===this&&V({mode:r.ScrollMode.VERTICAL})})},A=new WeakSet,lr=function({spreadNoneButton:S,spreadOddButton:w,spreadEvenButton:v}){const F=({mode:N})=>{(0,r.toggleCheckedBtn)(S,N===r.SpreadMode.NONE),(0,r.toggleCheckedBtn)(w,N===r.SpreadMode.ODD),(0,r.toggleCheckedBtn)(v,N===r.SpreadMode.EVEN)};this.eventBus._on("spreadmodechanged",F),this.eventBus._on("secondarytoolbarreset",N=>{N.source===this&&F({mode:r.SpreadMode.NONE})})},_.SecondaryToolbar=T},(k,_,m)=>{var C,s,cr,b,dr,x,yt,A,hr;Object.defineProperty(_,"__esModule",{value:!0}),_.Toolbar=void 0;var r=m(4),a=m(5);const T="visiblePageIsLoading";class E{constructor(S,w,v){H(this,s);H(this,b);H(this,x);H(this,A);H(this,C,!1);this.toolbar=S.container,this.eventBus=w,this.l10n=v,this.buttons=[{element:S.previous,eventName:"previouspage"},{element:S.next,eventName:"nextpage"},{element:S.zoomIn,eventName:"zoomin"},{element:S.zoomOut,eventName:"zoomout"},{element:S.print,eventName:"print"},{element:S.download,eventName:"download"},{element:S.editorFreeTextButton,eventName:"switchannotationeditormode",eventDetails:{get mode(){const{classList:F}=S.editorFreeTextButton;return F.contains("toggled")?a.AnnotationEditorType.NONE:a.AnnotationEditorType.FREETEXT}}},{element:S.editorInkButton,eventName:"switchannotationeditormode",eventDetails:{get mode(){const{classList:F}=S.editorInkButton;return F.contains("toggled")?a.AnnotationEditorType.NONE:a.AnnotationEditorType.INK}}},{element:S.editorStampButton,eventName:"switchannotationeditormode",eventDetails:{get mode(){const{classList:F}=S.editorStampButton;return F.contains("toggled")?a.AnnotationEditorType.NONE:a.AnnotationEditorType.STAMP}}}],this.buttons.push({element:S.openFile,eventName:"openfile"}),this.items={numPages:S.numPages,pageNumber:S.pageNumber,scaleSelect:S.scaleSelect,customScaleOption:S.customScaleOption,previous:S.previous,next:S.next,zoomIn:S.zoomIn,zoomOut:S.zoomOut},W(this,s,cr).call(this,S),this.reset()}setPageNumber(S,w){this.pageNumber=S,this.pageLabel=w,W(this,x,yt).call(this,!1)}setPagesCount(S,w){this.pagesCount=S,this.hasPageLabels=w,W(this,x,yt).call(this,!0)}setPageScale(S,w){this.pageScaleValue=(S||w).toString(),this.pageScale=w,W(this,x,yt).call(this,!1)}reset(){this.pageNumber=0,this.pageLabel=null,this.hasPageLabels=!1,this.pagesCount=0,this.pageScaleValue=r.DEFAULT_SCALE_VALUE,this.pageScale=r.DEFAULT_SCALE,W(this,x,yt).call(this,!0),this.updateLoadingIndicatorState(),this.eventBus.dispatch("toolbarreset",{source:this})}updateLoadingIndicatorState(S=!1){const{pageNumber:w}=this.items;w.classList.toggle(T,S)}}C=new WeakMap,s=new WeakSet,cr=function(S){const{pageNumber:w,scaleSelect:v}=this.items,F=this;for(const{element:N,eventName:G,eventDetails:le}of this.buttons)N.addEventListener("click",V=>{G!==null&&this.eventBus.dispatch(G,{source:this,...le})});w.addEventListener("click",function(){this.select()}),w.addEventListener("change",function(){F.eventBus.dispatch("pagenumberchanged",{source:F,value:this.value})}),v.addEventListener("change",function(){this.value!=="custom"&&F.eventBus.dispatch("scalechanged",{source:F,value:this.value})}),v.addEventListener("click",function(N){const G=N.target;this.value===F.pageScaleValue&&G.tagName.toUpperCase()==="OPTION"&&this.blur()}),v.oncontextmenu=a.noContextMenu,this.eventBus._on("localized",()=>{he(this,C,!0),W(this,A,hr).call(this),W(this,x,yt).call(this,!0)}),W(this,b,dr).call(this,S)},b=new WeakSet,dr=function({editorFreeTextButton:S,editorFreeTextParamsToolbar:w,editorInkButton:v,editorInkParamsToolbar:F,editorStampButton:N,editorStampParamsToolbar:G}){const le=({mode:V})=>{(0,r.toggleCheckedBtn)(S,V===a.AnnotationEditorType.FREETEXT,w),(0,r.toggleCheckedBtn)(v,V===a.AnnotationEditorType.INK,F),(0,r.toggleCheckedBtn)(N,V===a.AnnotationEditorType.STAMP,G);const Z=V===a.AnnotationEditorType.DISABLE;S.disabled=Z,v.disabled=Z,N.disabled=Z};this.eventBus._on("annotationeditormodechanged",le),this.eventBus._on("toolbarreset",V=>{V.source===this&&le({mode:a.AnnotationEditorType.DISABLE})})},x=new WeakSet,yt=function(S=!1){if(!i(this,C))return;const{pageNumber:w,pagesCount:v,pageScaleValue:F,pageScale:N,items:G}=this;S&&(this.hasPageLabels?G.pageNumber.type="text":(G.pageNumber.type="number",this.l10n.get("of_pages",{pagesCount:v}).then(le=>{G.numPages.textContent=le})),G.pageNumber.max=v),this.hasPageLabels?(G.pageNumber.value=this.pageLabel,this.l10n.get("page_of_pages",{pageNumber:w,pagesCount:v}).then(le=>{G.numPages.textContent=le})):G.pageNumber.value=w,G.previous.disabled=w<=1,G.next.disabled=w>=v,G.zoomOut.disabled=N<=r.MIN_SCALE,G.zoomIn.disabled=N>=r.MAX_SCALE,this.l10n.get("page_scale_percent",{scale:Math.round(N*1e4)/100}).then(le=>{let V=!1;for(const Z of G.scaleSelect.options){if(Z.value!==F){Z.selected=!1;continue}Z.selected=!0,V=!0}V||(G.customScaleOption.textContent=le,G.customScaleOption.selected=!0)})},A=new WeakSet,hr=async function(){const{items:S,l10n:w}=this,v=Promise.all([w.get("page_scale_auto"),w.get("page_scale_actual"),w.get("page_scale_fit"),w.get("page_scale_width")]);await r.animationStarted;const F=getComputedStyle(S.scaleSelect),N=parseFloat(F.getPropertyValue("--scale-select-width")),G=document.createElement("canvas"),le=G.getContext("2d",{alpha:!1});le.font=`${F.fontSize} ${F.fontFamily}`;let V=0;for(const Z of await v){const{width:re}=le.measureText(Z);re>V&&(V=re)}V+=.3*N,V>N&&S.scaleSelect.parentNode.style.setProperty("--scale-select-width",`${V}px`),G.width=0,G.height=0},_.Toolbar=E},(k,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.ViewHistory=void 0;const m=20;class r{constructor(T,E=m){this.fingerprint=T,this.cacheSize=E,this._initializedPromise=this._readFromStorage().then(C=>{const s=JSON.parse(C||"{}");let g=-1;if(!Array.isArray(s.files))s.files=[];else{for(;s.files.length>=this.cacheSize;)s.files.shift();for(let b=0,P=s.files.length;b<P;b++)if(s.files[b].fingerprint===this.fingerprint){g=b;break}}g===-1&&(g=s.files.push({fingerprint:this.fingerprint})-1),this.file=s.files[g],this.database=s})}async _writeToStorage(){const T=JSON.stringify(this.database);localStorage.setItem("pdfjs.history",T)}async _readFromStorage(){return localStorage.getItem("pdfjs.history")}async set(T,E){return await this._initializedPromise,this.file[T]=E,this._writeToStorage()}async setMultiple(T){await this._initializedPromise;for(const E in T)this.file[E]=T[E];return this._writeToStorage()}async get(T,E){await this._initializedPromise;const C=this.file[T];return C!==void 0?C:E}async getMultiple(T){await this._initializedPromise;const E=Object.create(null);for(const C in T){const s=this.file[C];E[C]=s!==void 0?s:T[C]}return E}}_.ViewHistory=r},(k,_,m)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.DefaultExternalServices=void 0;var r=m(5);class a{constructor(){throw new Error("Cannot initialize DefaultExternalServices.")}static updateFindControlState(E){}static updateFindMatchesCount(E){}static initPassiveLoading(E){}static reportTelemetry(E){}static createDownloadManager(){throw new Error("Not implemented: createDownloadManager")}static createPreferences(){throw new Error("Not implemented: createPreferences")}static createL10n(E){throw new Error("Not implemented: createL10n")}static createScripting(E){throw new Error("Not implemented: createScripting")}static get supportsPinchToZoom(){return(0,r.shadow)(this,"supportsPinchToZoom",!0)}static get supportsIntegratedFind(){return(0,r.shadow)(this,"supportsIntegratedFind",!1)}static get supportsDocumentFonts(){return(0,r.shadow)(this,"supportsDocumentFonts",!0)}static get supportedMouseWheelZoomModifierKeys(){return(0,r.shadow)(this,"supportedMouseWheelZoomModifierKeys",{ctrlKey:!0,metaKey:!0})}static get isInAutomation(){return(0,r.shadow)(this,"isInAutomation",!1)}static updateEditorStates(E){throw new Error("Not implemented: updateEditorStates")}static get canvasMaxAreaInBytes(){return(0,r.shadow)(this,"canvasMaxAreaInBytes",-1)}static getNimbusExperimentData(){return(0,r.shadow)(this,"getNimbusExperimentData",Promise.resolve(null))}}_.DefaultExternalServices=a},(k,_,m)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.bindPrintServiceFactory=_.bindExternalService=void 0;let r;_.bindPrintServiceFactory=r;let a;_.bindExternalService=a,_.bindExternalService=a=m(46).bindExternalService,_.bindPrintServiceFactory=r=m(52).bindPrintServiceFactory,document.blockUnblockOnload&&document.blockUnblockOnload(!0)},(k,_,m)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.bindExternalService=b;var r=m(44),a=m(47),T=m(48),E=m(49),C=m(51);class s extends a.BasePreferences{async _writeToStorage(x){localStorage.setItem("pdfjs.preferences",JSON.stringify(x))}async _readFromStorage(x){return JSON.parse(localStorage.getItem("pdfjs.preferences"))}}class g extends r.DefaultExternalServices{static createDownloadManager(){return new T.DownloadManager}static createPreferences(){return new s}static createL10n({locale:x="en-US"}){return new E.GenericL10n(x)}static createScripting({sandboxBundleSrc:x}){return new C.GenericScripting(x)}}function b(P){P.externalServices=g}},(k,_,m)=>{var a,T,E;Object.defineProperty(_,"__esModule",{value:!0}),_.BasePreferences=void 0,m(9);const C=class C{constructor(){H(this,a,Object.freeze({annotationEditorMode:0,annotationMode:2,cursorToolOnLoad:0,defaultZoomDelay:400,defaultZoomValue:"",disablePageLabels:!1,enablePermissions:!1,enablePrintAutoRotate:!0,enableScripting:!0,enableStampEditor:!0,externalLinkTarget:0,historyUpdateUrl:!1,ignoreDestinationZoom:!1,forcePageColors:!1,pageColorsBackground:"Canvas",pageColorsForeground:"CanvasText",pdfBugEnabled:!1,sidebarViewOnLoad:-1,scrollModeOnLoad:-1,spreadModeOnLoad:-1,textLayerMode:1,viewerCssTheme:0,viewOnLoad:0,disableAutoFetch:!1,disableFontFace:!1,disableRange:!1,disableStream:!1,enableXfa:!0}));H(this,T,Object.create(null));H(this,E,null);if(this.constructor===C)throw new Error("Cannot initialize BasePreferences.");he(this,E,this._readFromStorage(i(this,a)).then(g=>{for(const b in i(this,a)){const P=g==null?void 0:g[b];typeof P==typeof i(this,a)[b]&&(i(this,T)[b]=P)}}))}async _writeToStorage(g){throw new Error("Not implemented: _writeToStorage")}async _readFromStorage(g){throw new Error("Not implemented: _readFromStorage")}async reset(){await i(this,E);const g=i(this,T);return he(this,T,Object.create(null)),this._writeToStorage(i(this,a)).catch(b=>{throw he(this,T,g),b})}async set(g,b){await i(this,E);const P=i(this,a)[g],x=i(this,T);if(P===void 0)throw new Error(`Set preference: "${g}" is undefined.`);if(b===void 0)throw new Error("Set preference: no value is specified.");const y=typeof b,A=typeof P;if(y!==A)if(y==="number"&&A==="string")b=b.toString();else throw new Error(`Set preference: "${b}" is a ${y}, expected a ${A}.`);else if(y==="number"&&!Number.isInteger(b))throw new Error(`Set preference: "${b}" must be an integer.`);return i(this,T)[g]=b,this._writeToStorage(i(this,T)).catch(o=>{throw he(this,T,x),o})}async get(g){await i(this,E);const b=i(this,a)[g];if(b===void 0)throw new Error(`Get preference: "${g}" is undefined.`);return i(this,T)[g]??b}async getAll(){await i(this,E);const g=Object.create(null);for(const b in i(this,a))g[b]=i(this,T)[b]??i(this,a)[b];return g}};a=new WeakMap,T=new WeakMap,E=new WeakMap;let r=C;_.BasePreferences=r},(k,_,m)=>{var E;Object.defineProperty(_,"__esModule",{value:!0}),_.DownloadManager=void 0;var r=m(5);function a(C,s){const g=document.createElement("a");if(!g.click)throw new Error('DownloadManager: "a.click()" is not supported.');g.href=C,g.target="_parent","download"in g&&(g.download=s),(document.body||document.documentElement).append(g),g.click(),g.remove()}class T{constructor(){H(this,E,new WeakMap)}downloadUrl(s,g,b){if(!(0,r.createValidAbsoluteUrl)(s,"http://example.com")){console.error(`downloadUrl - not a valid URL: ${s}`);return}a(s+"#pdfjs.action=download",g)}downloadData(s,g,b){const P=URL.createObjectURL(new Blob([s],{type:b}));a(P,g)}openOrDownloadData(s,g,b){const P=(0,r.isPdfFile)(b),x=P?"application/pdf":"";if(P){let y=i(this,E).get(s);y||(y=URL.createObjectURL(new Blob([g],{type:x})),i(this,E).set(s,y));let A;A="?file="+encodeURIComponent(y+"#"+b);try{return window.open(A),!0}catch(o){console.error(`openOrDownloadData: ${o}`),URL.revokeObjectURL(y),i(this,E).delete(s)}}return this.downloadData(g,b,x),!1}download(s,g,b,P){const x=URL.createObjectURL(s);a(x,b)}}E=new WeakMap,_.DownloadManager=T},(k,_,m)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.GenericL10n=void 0,m(50);var r=m(32);const a={en:"en-US",es:"es-ES",fy:"fy-NL",ga:"ga-IE",gu:"gu-IN",hi:"hi-IN",hy:"hy-AM",nb:"nb-NO",ne:"ne-NP",nn:"nn-NO",pa:"pa-IN",pt:"pt-PT",sv:"sv-SE",zh:"zh-CN"};function T(C){return a[C==null?void 0:C.toLowerCase()]||C}class E{constructor(s){const{webL10n:g}=document;this._lang=s,this._ready=new Promise((b,P)=>{g.setLanguage(T(s),()=>{b(g)})})}async getLanguage(){return(await this._ready).getLanguage()}async getDirection(){return(await this._ready).getDirection()}async get(s,g=null,b=(0,r.getL10nFallback)(s,g)){return(await this._ready).get(s,g,b)}async translate(s){return(await this._ready).translate(s)}}_.GenericL10n=E},()=>{document.webL10n=function(k,_){var m={},r="",a="textContent",T="",E={},C="loading",s=!0;function g(){return _.querySelectorAll('link[type="application/l10n"]')}function b(){var V=_.querySelector('script[type="application/l10n"]');return V?JSON.parse(V.innerHTML):null}function P(V){return V?V.querySelectorAll("*[data-l10n-id]"):[]}function x(V){if(!V)return{};var Z=V.getAttribute("data-l10n-id"),re=V.getAttribute("data-l10n-args"),te={};if(re)try{te=JSON.parse(re)}catch{console.warn("could not parse arguments for #"+Z)}return{id:Z,args:te}}function y(V,Z,re){Z=Z||function(ue){},re=re||function(){};var te=new XMLHttpRequest;te.open("GET",V,s),te.overrideMimeType&&te.overrideMimeType("text/plain; charset=utf-8"),te.onreadystatechange=function(){te.readyState==4&&(te.status==200||te.status===0?Z(te.responseText):re())},te.onerror=re,te.ontimeout=re;try{te.send(null)}catch{re()}}function A(V,Z,re,te){var K=V.replace(/[^\/]*$/,"")||"./";function ue(Ce){return Ce.lastIndexOf("\\")<0?Ce:Ce.replace(/\\\\/g,"\\").replace(/\\n/g,`
`).replace(/\\r/g,"\r").replace(/\\t/g,"	").replace(/\\b/g,"\b").replace(/\\f/g,"\f").replace(/\\{/g,"{").replace(/\\}/g,"}").replace(/\\"/g,'"').replace(/\\'/g,"'")}function se(Ce,Me){var q={},R=/^\s*|\s*$/,O=/^\s*#|^\s*$/,d=/^\s*\[(.*)\]\s*$/,u=/^\s*@import\s+url\((.*)\)\s*$/i,M=/^([^=\s]*)\s*=\s*(.+)$/;function D(X,B,z){var j=X.replace(R,"").split(/[\r\n]+/),Y="*",ce=Z.split("-",1)[0],oe=!1,Se="";function Ee(){for(;;){if(!j.length){z();return}var ye=j.shift();if(!O.test(ye)){if(B){if(Se=d.exec(ye),Se){Y=Se[1].toLowerCase(),oe=Y!=="*"&&Y!==Z&&Y!==ce;continue}else if(oe)continue;if(Se=u.exec(ye),Se){$(K+Se[1],Ee);return}}var ne=ye.match(M);ne&&ne.length==3&&(q[ne[1]]=ue(ne[2]))}}}Ee()}function $(X,B){y(X,function(z){D(z,!1,B)},function(){console.warn(X+" not found."),B()})}D(Ce,!0,function(){Me(q)})}y(V,function(Ce){r+=Ce,se(Ce,function(Me){for(var q in Me){var R,O,d=q.lastIndexOf(".");d>0?(R=q.substring(0,d),O=q.substring(d+1)):(R=q,O=a),m[R]||(m[R]={}),m[R][O]=Me[q]}re&&re()})},te)}function o(V,Z){V&&(V=V.toLowerCase()),Z=Z||function(){},c(),T=V;var re=g(),te=re.length;if(te===0){var K=b();if(K&&K.locales&&K.default_locale){if(console.log("using the embedded JSON directory, early way out"),m=K.locales[V],!m){var ue=K.default_locale.toLowerCase();for(var se in K.locales)if(se=se.toLowerCase(),se===V){m=K.locales[V];break}else se===ue&&(m=K.locales[ue])}Z()}else console.log("no resource to load, early way out");C="complete";return}var Ce=null,Me=0;Ce=function(){Me++,Me>=te&&(Z(),C="complete")};function q(d){var u=d.href;this.load=function(M,D){A(u,M,D,function(){console.warn(u+" not found."),console.warn('"'+M+'" resource not found'),T="",D()})}}for(var R=0;R<te;R++){var O=new q(re[R]);O.load(V,Ce)}}function c(){m={},r="",T=""}function S(V){var Z={af:3,ak:4,am:4,ar:1,asa:3,az:0,be:11,bem:3,bez:3,bg:3,bh:4,bm:0,bn:3,bo:0,br:20,brx:3,bs:11,ca:3,cgg:3,chr:3,cs:12,cy:17,da:3,de:3,dv:3,dz:0,ee:3,el:3,en:3,eo:3,es:3,et:3,eu:3,fa:0,ff:5,fi:3,fil:4,fo:3,fr:5,fur:3,fy:3,ga:8,gd:24,gl:3,gsw:3,gu:3,guw:4,gv:23,ha:3,haw:3,he:2,hi:4,hr:11,hu:0,id:0,ig:0,ii:0,is:3,it:3,iu:7,ja:0,jmc:3,jv:0,ka:0,kab:5,kaj:3,kcg:3,kde:0,kea:0,kk:3,kl:3,km:0,kn:0,ko:0,ksb:3,ksh:21,ku:3,kw:7,lag:18,lb:3,lg:3,ln:4,lo:0,lt:10,lv:6,mas:3,mg:4,mk:16,ml:3,mn:3,mo:9,mr:3,ms:0,mt:15,my:0,nah:3,naq:7,nb:3,nd:3,ne:3,nl:3,nn:3,no:3,nr:3,nso:4,ny:3,nyn:3,om:3,or:3,pa:3,pap:3,pl:13,ps:3,pt:3,rm:3,ro:9,rof:3,ru:11,rwk:3,sah:0,saq:3,se:7,seh:3,ses:0,sg:0,sh:11,shi:19,sk:12,sl:14,sma:7,smi:7,smj:7,smn:7,sms:7,sn:3,so:3,sq:3,sr:11,ss:3,ssy:3,st:3,sv:3,sw:3,syr:3,ta:3,te:3,teo:3,th:0,ti:4,tig:3,tk:3,tl:4,tn:3,to:0,tr:0,ts:3,tzm:22,uk:11,ur:3,ve:3,vi:0,vun:3,wa:4,wae:3,wo:0,xh:3,xog:3,yo:0,zh:0,zu:3};function re(se,Ce){return Ce.indexOf(se)!==-1}function te(se,Ce,Me){return Ce<=se&&se<=Me}var K={0:function(se){return"other"},1:function(se){return te(se%100,3,10)?"few":se===0?"zero":te(se%100,11,99)?"many":se==2?"two":se==1?"one":"other"},2:function(se){return se!==0&&se%10===0?"many":se==2?"two":se==1?"one":"other"},3:function(se){return se==1?"one":"other"},4:function(se){return te(se,0,1)?"one":"other"},5:function(se){return te(se,0,2)&&se!=2?"one":"other"},6:function(se){return se===0?"zero":se%10==1&&se%100!=11?"one":"other"},7:function(se){return se==2?"two":se==1?"one":"other"},8:function(se){return te(se,3,6)?"few":te(se,7,10)?"many":se==2?"two":se==1?"one":"other"},9:function(se){return se===0||se!=1&&te(se%100,1,19)?"few":se==1?"one":"other"},10:function(se){return te(se%10,2,9)&&!te(se%100,11,19)?"few":se%10==1&&!te(se%100,11,19)?"one":"other"},11:function(se){return te(se%10,2,4)&&!te(se%100,12,14)?"few":se%10===0||te(se%10,5,9)||te(se%100,11,14)?"many":se%10==1&&se%100!=11?"one":"other"},12:function(se){return te(se,2,4)?"few":se==1?"one":"other"},13:function(se){return te(se%10,2,4)&&!te(se%100,12,14)?"few":se!=1&&te(se%10,0,1)||te(se%10,5,9)||te(se%100,12,14)?"many":se==1?"one":"other"},14:function(se){return te(se%100,3,4)?"few":se%100==2?"two":se%100==1?"one":"other"},15:function(se){return se===0||te(se%100,2,10)?"few":te(se%100,11,19)?"many":se==1?"one":"other"},16:function(se){return se%10==1&&se!=11?"one":"other"},17:function(se){return se==3?"few":se===0?"zero":se==6?"many":se==2?"two":se==1?"one":"other"},18:function(se){return se===0?"zero":te(se,0,2)&&se!==0&&se!=2?"one":"other"},19:function(se){return te(se,2,10)?"few":te(se,0,1)?"one":"other"},20:function(se){return(te(se%10,3,4)||se%10==9)&&!(te(se%100,10,19)||te(se%100,70,79)||te(se%100,90,99))?"few":se%1e6===0&&se!==0?"many":se%10==2&&!re(se%100,[12,72,92])?"two":se%10==1&&!re(se%100,[11,71,91])?"one":"other"},21:function(se){return se===0?"zero":se==1?"one":"other"},22:function(se){return te(se,0,1)||te(se,11,99)?"one":"other"},23:function(se){return te(se%10,1,2)||se%20===0?"one":"other"},24:function(se){return te(se,3,10)||te(se,13,19)?"few":re(se,[2,12])?"two":re(se,[1,11])?"one":"other"}},ue=Z[V.replace(/-.*$/,"")];return ue in K?K[ue]:(console.warn("plural form unknown for ["+V+"]"),function(){return"other"})}E.plural=function(V,Z,re,te){var K=parseFloat(Z);if(isNaN(K)||te!=a)return V;E._pluralRules||(E._pluralRules=S(T));var ue="["+E._pluralRules(K)+"]";return K===0&&re+"[zero]"in m?V=m[re+"[zero]"][te]:K==1&&re+"[one]"in m?V=m[re+"[one]"][te]:K==2&&re+"[two]"in m?V=m[re+"[two]"][te]:re+ue in m?V=m[re+ue][te]:re+"[other]"in m&&(V=m[re+"[other]"][te]),V};function w(V,Z,re){var te=m[V];if(!te){if(console.warn("#"+V+" is undefined."),!re)return null;te=re}var K={};for(var ue in te){var se=te[ue];se=v(se,Z,V,ue),se=F(se,Z,V),K[ue]=se}return K}function v(V,Z,re,te){var K=/\{\[\s*([a-zA-Z]+)\(([a-zA-Z]+)\)\s*\]\}/,ue=K.exec(V);if(!ue||!ue.length)return V;var se=ue[1],Ce=ue[2],Me;if(Z&&Ce in Z?Me=Z[Ce]:Ce in m&&(Me=m[Ce]),se in E){var q=E[se];V=q(V,Me,re,te)}return V}function F(V,Z,re){var te=/\{\{\s*(.+?)\s*\}\}/g;return V.replace(te,function(K,ue){return Z&&ue in Z?Z[ue]:ue in m?m[ue]:(console.log("argument {{"+ue+"}} for #"+re+" is undefined."),K)})}function N(V){var Z=x(V);if(Z.id){var re=w(Z.id,Z.args);if(!re){console.warn("#"+Z.id+" is undefined.");return}if(re[a]){if(G(V)===0)V[a]=re[a];else{for(var te=V.childNodes,K=!1,ue=0,se=te.length;ue<se;ue++)te[ue].nodeType===3&&/\S/.test(te[ue].nodeValue)&&(K?te[ue].nodeValue="":(te[ue].nodeValue=re[a],K=!0));if(!K){var Ce=_.createTextNode(re[a]);V.prepend(Ce)}}delete re[a]}for(var Me in re)V[Me]=re[Me]}}function G(V){if(V.children)return V.children.length;if(typeof V.childElementCount<"u")return V.childElementCount;for(var Z=0,re=0;re<V.childNodes.length;re++)Z+=V.nodeType===1?1:0;return Z}function le(V){V=V||_.documentElement;for(var Z=P(V),re=Z.length,te=0;te<re;te++)N(Z[te]);N(V)}return{get:function(V,Z,re){var te=V.lastIndexOf("."),K=a;te>0&&(K=V.substring(te+1),V=V.substring(0,te));var ue;re&&(ue={},ue[K]=re);var se=w(V,Z,ue);return se&&K in se?se[K]:"{{"+V+"}}"},getData:function(){return m},getText:function(){return r},getLanguage:function(){return T},setLanguage:function(V,Z){o(V,function(){Z&&Z()})},getDirection:function(){var V=["ar","he","fa","ps","ur"],Z=T.split("-",1)[0];return V.indexOf(Z)>=0?"rtl":"ltr"},translate:le,getReadyState:function(){return C},ready:function(V){if(V)C=="complete"||C=="interactive"?k.setTimeout(function(){V()}):_.addEventListener&&_.addEventListener("localized",function Z(){_.removeEventListener("localized",Z),V()});else return}}}(window,document)},(k,_,m)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.GenericScripting=void 0,_.docProperties=a;var r=m(5);async function a(E){const C="",s=C.split("#")[0];let{info:g,metadata:b,contentDispositionFilename:P,contentLength:x}=await E.getMetadata();if(!x){const{length:y}=await E.getDownloadInfo();x=y}return{...g,baseURL:s,filesize:x,filename:P||(0,r.getPdfFilenameFromUrl)(C),metadata:b==null?void 0:b.getRaw(),authors:b==null?void 0:b.get("dc:creator"),numPages:E.numPages,URL:C}}class T{constructor(C){this._ready=(0,r.loadScript)(C,!0).then(()=>window.pdfjsSandbox.QuickJSSandbox())}async createSandbox(C){(await this._ready).create(C)}async dispatchEventInSandbox(C){const s=await this._ready;setTimeout(()=>s.dispatchEvent(C),0)}async destroySandbox(){(await this._ready).nukeSandbox()}}_.GenericScripting=T},(k,_,m)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.bindPrintServiceFactory=S;var r=m(5),a=m(53),T=m(1);let E=null,C=null,s=null;function g(w,v,F,N,G,le,V){const Z=E.scratchCanvas,re=G/r.PixelsPerInch.PDF;Z.width=Math.floor(N.width*re),Z.height=Math.floor(N.height*re);const te=Z.getContext("2d");return te.save(),te.fillStyle="rgb(255, 255, 255)",te.fillRect(0,0,Z.width,Z.height),te.restore(),Promise.all([v.getPage(F),V]).then(function([K,ue]){const se={canvasContext:te,transform:[re,0,0,re,0,0],viewport:K.getViewport({scale:1,rotation:N.rotation}),intent:"print",annotationMode:r.AnnotationMode.ENABLE_STORAGE,optionalContentConfigPromise:le,printAnnotationStorage:ue};return K.render(se).promise})}class b{constructor(v,F,N,G,le=null,V=null,Z){this.pdfDocument=v,this.pagesOverview=F,this.printContainer=N,this._printResolution=G||150,this._optionalContentConfigPromise=le||v.getOptionalContentConfig(),this._printAnnotationStoragePromise=V||Promise.resolve(),this.l10n=Z,this.currentPage=-1,this.scratchCanvas=document.createElement("canvas")}layout(){this.throwIfInactive();const v=document.querySelector("body");v.setAttribute("data-pdfjsprinting",!0);const{width:F,height:N}=this.pagesOverview[0];this.pagesOverview.every(le=>le.width===F&&le.height===N)||console.warn("Not all pages have the same size. The printed result may be incorrect!"),this.pageStyleSheet=document.createElement("style"),this.pageStyleSheet.textContent=`@page { size: ${F}pt ${N}pt;}`,v.append(this.pageStyleSheet)}destroy(){if(E!==this)return;this.printContainer.textContent="",document.querySelector("body").removeAttribute("data-pdfjsprinting"),this.pageStyleSheet&&(this.pageStyleSheet.remove(),this.pageStyleSheet=null),this.scratchCanvas.width=this.scratchCanvas.height=0,this.scratchCanvas=null,E=null,c().then(function(){s.active===C&&s.close(C)})}renderPages(){if(this.pdfDocument.isPureXfa)return(0,a.getXfaHtmlForPrinting)(this.printContainer,this.pdfDocument),Promise.resolve();const v=this.pagesOverview.length,F=(N,G)=>{if(this.throwIfInactive(),++this.currentPage>=v){A(v,v,this.l10n),N();return}const le=this.currentPage;A(le,v,this.l10n),g(this,this.pdfDocument,le+1,this.pagesOverview[le],this._printResolution,this._optionalContentConfigPromise,this._printAnnotationStoragePromise).then(this.useRenderedPage.bind(this)).then(function(){F(N,G)},G)};return new Promise(F)}useRenderedPage(){this.throwIfInactive();const v=document.createElement("img"),F=this.scratchCanvas;"toBlob"in F?F.toBlob(function(G){v.src=URL.createObjectURL(G)}):v.src=F.toDataURL();const N=document.createElement("div");return N.className="printedPage",N.append(v),this.printContainer.append(N),new Promise(function(G,le){v.onload=G,v.onerror=le})}performPrint(){return this.throwIfInactive(),new Promise(v=>{setTimeout(()=>{if(!this.active){v();return}P.call(window),setTimeout(v,20)},0)})}get active(){return this===E}throwIfInactive(){if(!this.active)throw new Error("This print request was cancelled or completed.")}}const P=window.print;window.print=function(){if(E){console.warn("Ignored window.print() because of a pending print job.");return}c().then(function(){E&&s.open(C)});try{x("beforeprint")}finally{if(!E){console.error("Expected print service to be initialized."),c().then(function(){s.active===C&&s.close(C)});return}const w=E;E.renderPages().then(function(){return w.performPrint()}).catch(function(){}).then(function(){w.active&&y()})}};function x(w){const v=new CustomEvent(w,{bubbles:!1,cancelable:!1,detail:"custom"});window.dispatchEvent(v)}function y(){E&&(E.destroy(),x("afterprint"))}function A(w,v,F){const N=(0,T.getActiveApp)();C||(C=N.appConfig.appContainer.querySelector(".printServiceDialog"));const G=Math.round(100*w/v),le=C.querySelector("progress"),V=C.querySelector(".relative-progress");le.value=G,F.get("print_progress_percent",{progress:G}).then(Z=>{V.textContent=Z})}if(window.addEventListener("keydown",function(w){w.keyCode===80&&(w.ctrlKey||w.metaKey)&&!w.altKey&&(!w.shiftKey||window.chrome||window.opera)&&(window.print(),w.preventDefault(),w.stopImmediatePropagation())},!0),"onbeforeprint"in window){const w=function(v){v.detail!=="custom"&&v.stopImmediatePropagation()};window.addEventListener("beforeprint",w),window.addEventListener("afterprint",w)}let o;function c(){if(!o){const w=(0,T.getActiveApp)();if(s=w.overlayManager,!s)throw new Error("The overlay manager has not yet been initialized.");C||(C=w.appConfig.appContainer.querySelector(".printServiceDialog")),o=s.register(C,!0),w.appConfig.appContainer.querySelector(".printCancel").onclick=y,C.addEventListener("close",y)}return o}function S(w){w.instance={supportsPrinting:!0,createPrintService(v,F,N,G,le,V,Z){if(E)throw new Error("The print service is created and active.");return E=new b(v,F,N,G,le,V,Z),E}}}},(k,_,m)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.getXfaHtmlForPrinting=E;var r=m(5),a=m(11),T=m(40);function E(C,s){const g=s.allXfaHtml,b=new a.SimpleLinkService,P=Math.round(r.PixelsPerInch.PDF_TO_CSS_UNITS*100)/100;for(const x of g.children){const y=document.createElement("div");y.className="xfaPrintedPage",C.append(y);const A=new T.XfaLayerBuilder({pageDiv:y,pdfPage:null,annotationStorage:s.annotationStorage,linkService:b,xfaHtml:x}),o=(0,r.getXfaPageViewport)(x,{scale:P});A.render(o,"print")}}},(k,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.injectLocaleResource=m;function m(r){const a="application/l10n";let T=document.querySelector(`link[type="${a}"]`);T&&T.getAttribute("href")===r||(T=document.createElement("link"),T.rel="resource",T.type=a,T.href=r,document.head.appendChild(T))}},(k,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.default=void 0;const m=`
<div data-dom-id="outerContainer" class="outerContainer">
  <div data-dom-id="sidebarContainer" class="sidebarContainer">
    <div data-dom-id="toolbarSidebar" class="toolbarSidebar">
      <div data-dom-id="toolbarSidebarLeft" class="toolbarSidebarLeft">
        <div
          role="radiogroup"
          data-dom-id="sidebarViewButtons"
          class="splitToolbarButton toggled sidebarViewButtons"
        >
          <button
            title="Show Thumbnails"
            tabindex="2"
            data-l10n-id="thumbs"
            role="radio"
            aria-checked="true"
            aria-controls="thumbnailView"
            data-dom-id="viewThumbnail"
            class="toolbarButton toggled viewThumbnail"
          >
            <span data-l10n-id="thumbs_label">Thumbnails</span></button
          ><button
            title="Show Document Outline (double-click to expand/collapse all items)"
            tabindex="3"
            data-l10n-id="document_outline"
            role="radio"
            aria-checked="false"
            aria-controls="outlineView"
            data-dom-id="viewOutline"
            class="toolbarButton viewOutline"
          >
            <span data-l10n-id="document_outline_label"
              >Document Outline</span
            ></button
          ><button
            title="Show Attachments"
            tabindex="4"
            data-l10n-id="attachments"
            role="radio"
            aria-checked="false"
            aria-controls="attachmentsView"
            data-dom-id="viewAttachments"
            class="toolbarButton viewAttachments"
          >
            <span data-l10n-id="attachments_label">Attachments</span></button
          ><button
            title="Show Layers (double-click to reset all layers to the default state)"
            tabindex="5"
            data-l10n-id="layers"
            role="radio"
            aria-checked="false"
            aria-controls="layersView"
            data-dom-id="viewLayers"
            class="toolbarButton viewLayers"
          >
            <span data-l10n-id="layers_label">Layers</span>
          </button>
        </div>
      </div>
      <div data-dom-id="toolbarSidebarRight" class="toolbarSidebarRight">
        <div
          data-dom-id="outlineOptionsContainer"
          class="hidden outlineOptionsContainer"
        >
          <div class="verticalToolbarSeparator"></div>
          <button
            disabled="disabled"
            title="Find Current Outline Item"
            tabindex="6"
            data-l10n-id="current_outline_item"
            data-dom-id="currentOutlineItem"
            class="toolbarButton currentOutlineItem"
          >
            <span data-l10n-id="current_outline_item_label"
              >Current Outline Item</span
            >
          </button>
        </div>
      </div>
    </div>
    <div data-dom-id="sidebarContent" class="sidebarContent">
      <div data-dom-id="thumbnailView" class="thumbnailView"></div>
      <div data-dom-id="outlineView" class="hidden outlineView"></div>
      <div data-dom-id="attachmentsView" class="hidden attachmentsView"></div>
      <div data-dom-id="layersView" class="hidden layersView"></div>
    </div>
    <div data-dom-id="sidebarResizer" class="sidebarResizer"></div>
  </div>
  <!-- sidebarContainer -->
  <div data-dom-id="mainContainer" class="mainContainer">
    <div class="findbar hidden doorHanger" data-dom-id="findbar">
      <div data-dom-id="findbarInputContainer" class="findbarInputContainer">
        <input
          title="Find"
          placeholder="Find in document…"
          tabindex="91"
          data-l10n-id="find_input"
          aria-invalid="false"
          data-dom-id="findInput"
          class="toolbarField findInput"
        />
        <div class="splitToolbarButton">
          <button
            title="Find the previous occurrence of the phrase"
            tabindex="92"
            data-l10n-id="find_previous"
            data-dom-id="findPrevious"
            class="toolbarButton findPrevious"
          >
            <span data-l10n-id="find_previous_label">Previous</span>
          </button>
          <div class="splitToolbarButtonSeparator"></div>
          <button
            title="Find the next occurrence of the phrase"
            tabindex="93"
            data-l10n-id="find_next"
            data-dom-id="findNext"
            class="toolbarButton findNext"
          >
            <span data-l10n-id="find_next_label">Next</span>
          </button>
        </div>
      </div>
      <div
        data-dom-id="findbarOptionsOneContainer"
        class="findbarOptionsOneContainer"
      >
        <label
          ><input
            type="checkbox"
            tabindex="94"
            data-dom-id="findHighlightAll"
            class="toolbarField findHighlightAll"
          /><span class="toolbarLabel" data-l10n-id="find_highlight"
            >Highlight All</span
          ></label
        ><!--Removed!--><label
          ><input
            type="checkbox"
            tabindex="95"
            data-dom-id="findMatchCase"
            class="toolbarField findMatchCase"
          /><span class="toolbarLabel" data-l10n-id="find_match_case_label"
            >Match Case</span
          ></label
        ><!--Removed!-->
      </div>
      <div
        data-dom-id="findbarOptionsTwoContainer"
        class="findbarOptionsTwoContainer"
      >
        <label
          ><input
            type="checkbox"
            tabindex="96"
            data-dom-id="findMatchDiacritics"
            class="toolbarField findMatchDiacritics"
          /><span
            class="toolbarLabel"
            data-l10n-id="find_match_diacritics_label"
            >Match Diacritics</span
          ></label
        ><!--Removed!--><label
          ><input
            type="checkbox"
            tabindex="97"
            data-dom-id="findEntireWord"
            class="toolbarField findEntireWord"
          /><span class="toolbarLabel" data-l10n-id="find_entire_word_label"
            >Whole Words</span
          ></label
        ><!--Removed!-->
      </div>
      <div
        aria-live="polite"
        data-dom-id="findbarMessageContainer"
        class="findbarMessageContainer"
      >
        <span
          data-dom-id="findResultsCount"
          class="toolbarLabel findResultsCount"
        ></span
        ><span data-dom-id="findMsg" class="toolbarLabel findMsg"></span>
      </div>
    </div>
    <!-- findbar -->
    <div
      data-dom-id="editorFreeTextParamsToolbar"
      class="editorParamsToolbar hidden doorHangerRight editorFreeTextParamsToolbar"
    >
      <div class="editorParamsToolbarContainer">
        <div class="editorParamsSetter">
          <!--Removed!--><label
            ><input
              type="color"
              tabindex="100"
              data-dom-id="editorFreeTextColor"
              class="editorParamsColor editorFreeTextColor"
            /><span class="toolbarLabel" data-l10n-id="editor_free_text_color"
              >Color</span
            ></label
          >
        </div>
        <div class="editorParamsSetter">
          <!--Removed!--><label
            ><input
              type="range"
              value="10"
              min="5"
              max="100"
              step="1"
              tabindex="101"
              data-dom-id="editorFreeTextFontSize"
              class="editorParamsSlider editorFreeTextFontSize"
            /><span class="toolbarLabel" data-l10n-id="editor_free_text_size"
              >Size</span
            ></label
          >
        </div>
      </div>
    </div>
    <div
      data-dom-id="editorInkParamsToolbar"
      class="editorParamsToolbar hidden doorHangerRight editorInkParamsToolbar"
    >
      <div class="editorParamsToolbarContainer">
        <div class="editorParamsSetter">
          <!--Removed!--><label
            ><input
              type="color"
              tabindex="102"
              data-dom-id="editorInkColor"
              class="editorParamsColor editorInkColor"
            /><span class="toolbarLabel" data-l10n-id="editor_ink_color"
              >Color</span
            ></label
          >
        </div>
        <div class="editorParamsSetter">
          <!--Removed!--><label
            ><input
              type="range"
              value="1"
              min="1"
              max="20"
              step="1"
              tabindex="103"
              data-dom-id="editorInkThickness"
              class="editorParamsSlider editorInkThickness"
            /><span class="toolbarLabel" data-l10n-id="editor_ink_thickness"
              >Thickness</span
            ></label
          >
        </div>
        <div class="editorParamsSetter">
          <!--Removed!--><label
            ><input
              type="range"
              value="100"
              min="1"
              max="100"
              step="1"
              tabindex="104"
              data-dom-id="editorInkOpacity"
              class="editorParamsSlider editorInkOpacity"
            /><span class="toolbarLabel" data-l10n-id="editor_ink_opacity"
              >Opacity</span
            ></label
          >
        </div>
      </div>
    </div>
    <div
      data-dom-id="editorStampParamsToolbar"
      class="editorParamsToolbar hidden doorHangerRight editorStampParamsToolbar"
    >
      <div class="editorParamsToolbarContainer">
        <button
          title="Add image"
          tabindex="105"
          data-l10n-id="editor_stamp_add_image"
          data-dom-id="editorStampAddImage"
          class="secondaryToolbarButton editorStampAddImage"
        >
          <span data-l10n-id="editor_stamp_add_image_label">Add image</span>
        </button>
      </div>
    </div>
    <div
      class="secondaryToolbar hidden doorHangerRight"
      data-dom-id="secondaryToolbar"
    >
      <div
        data-dom-id="secondaryToolbarButtonContainer"
        class="secondaryToolbarButtonContainer"
      >
        <!--#if GENERIC--><button
          title="Open File"
          tabindex="51"
          data-l10n-id="open_file"
          data-dom-id="secondaryOpenFile"
          class="secondaryToolbarButton visibleLargeView secondaryOpenFile"
        >
          <span data-l10n-id="open_file_label">Open</span></button
        ><!--#endif--><button
          title="Print"
          tabindex="52"
          data-l10n-id="print"
          data-dom-id="secondaryPrint"
          class="secondaryToolbarButton visibleMediumView secondaryPrint"
        >
          <span data-l10n-id="print_label">Print</span></button
        ><button
          title="Save"
          tabindex="53"
          data-l10n-id="save"
          data-dom-id="secondaryDownload"
          class="secondaryToolbarButton visibleMediumView secondaryDownload"
        >
          <span data-l10n-id="save_label">Save</span></button
        ><!--#if GENERIC-->
        <div class="horizontalToolbarSeparator visibleLargeView"></div>
        <!--#else--><!--        <div class="horizontalToolbarSeparator visibleMediumView"></div>--><!--#endif--><button
          title="Switch to Presentation Mode"
          tabindex="54"
          data-l10n-id="presentation_mode"
          data-dom-id="presentationMode"
          class="secondaryToolbarButton presentationMode"
        >
          <span data-l10n-id="presentation_mode_label"
            >Presentation Mode</span
          ></button
        ><a
          href="#"
          title="Current Page (View URL from Current Page)"
          tabindex="55"
          data-l10n-id="bookmark1"
          data-dom-id="viewBookmark"
          class="secondaryToolbarButton viewBookmark"
          ><span data-l10n-id="bookmark1_label">Current Page</span></a
        >
        <div
          data-dom-id="viewBookmarkSeparator"
          class="horizontalToolbarSeparator viewBookmarkSeparator"
        ></div>
        <button
          title="Go to First Page"
          tabindex="56"
          data-l10n-id="first_page"
          data-dom-id="firstPage"
          class="secondaryToolbarButton firstPage"
        >
          <span data-l10n-id="first_page_label">Go to First Page</span></button
        ><button
          title="Go to Last Page"
          tabindex="57"
          data-l10n-id="last_page"
          data-dom-id="lastPage"
          class="secondaryToolbarButton lastPage"
        >
          <span data-l10n-id="last_page_label">Go to Last Page</span>
        </button>
        <div class="horizontalToolbarSeparator"></div>
        <button
          title="Rotate Clockwise"
          tabindex="58"
          data-l10n-id="page_rotate_cw"
          data-dom-id="pageRotateCw"
          class="secondaryToolbarButton pageRotateCw"
        >
          <span data-l10n-id="page_rotate_cw_label"
            >Rotate Clockwise</span
          ></button
        ><button
          title="Rotate Counterclockwise"
          tabindex="59"
          data-l10n-id="page_rotate_ccw"
          data-dom-id="pageRotateCcw"
          class="secondaryToolbarButton pageRotateCcw"
        >
          <span data-l10n-id="page_rotate_ccw_label"
            >Rotate Counterclockwise</span
          >
        </button>
        <div class="horizontalToolbarSeparator"></div>
        <div
          role="radiogroup"
          data-dom-id="cursorToolButtons"
          class="cursorToolButtons"
        >
          <button
            title="Enable Text Selection Tool"
            tabindex="60"
            data-l10n-id="cursor_text_select_tool"
            role="radio"
            aria-checked="true"
            data-dom-id="cursorSelectTool"
            class="secondaryToolbarButton toggled cursorSelectTool"
          >
            <span data-l10n-id="cursor_text_select_tool_label"
              >Text Selection Tool</span
            ></button
          ><button
            title="Enable Hand Tool"
            tabindex="61"
            data-l10n-id="cursor_hand_tool"
            role="radio"
            aria-checked="false"
            data-dom-id="cursorHandTool"
            class="secondaryToolbarButton cursorHandTool"
          >
            <span data-l10n-id="cursor_hand_tool_label">Hand Tool</span>
          </button>
        </div>
        <div class="horizontalToolbarSeparator"></div>
        <div
          role="radiogroup"
          data-dom-id="scrollModeButtons"
          class="scrollModeButtons"
        >
          <button
            title="Use Page Scrolling"
            tabindex="62"
            data-l10n-id="scroll_page"
            role="radio"
            aria-checked="false"
            data-dom-id="scrollPage"
            class="secondaryToolbarButton scrollPage"
          >
            <span data-l10n-id="scroll_page_label">Page Scrolling</span></button
          ><button
            title="Use Vertical Scrolling"
            tabindex="63"
            data-l10n-id="scroll_vertical"
            role="radio"
            aria-checked="true"
            data-dom-id="scrollVertical"
            class="secondaryToolbarButton toggled scrollVertical"
          >
            <span data-l10n-id="scroll_vertical_label"
              >Vertical Scrolling</span
            ></button
          ><button
            title="Use Horizontal Scrolling"
            tabindex="64"
            data-l10n-id="scroll_horizontal"
            role="radio"
            aria-checked="false"
            data-dom-id="scrollHorizontal"
            class="secondaryToolbarButton scrollHorizontal"
          >
            <span data-l10n-id="scroll_horizontal_label"
              >Horizontal Scrolling</span
            ></button
          ><button
            title="Use Wrapped Scrolling"
            tabindex="65"
            data-l10n-id="scroll_wrapped"
            role="radio"
            aria-checked="false"
            data-dom-id="scrollWrapped"
            class="secondaryToolbarButton scrollWrapped"
          >
            <span data-l10n-id="scroll_wrapped_label">Wrapped Scrolling</span>
          </button>
        </div>
        <div class="horizontalToolbarSeparator"></div>
        <div
          role="radiogroup"
          data-dom-id="spreadModeButtons"
          class="spreadModeButtons"
        >
          <button
            title="Do not join page spreads"
            tabindex="66"
            data-l10n-id="spread_none"
            role="radio"
            aria-checked="true"
            data-dom-id="spreadNone"
            class="secondaryToolbarButton toggled spreadNone"
          >
            <span data-l10n-id="spread_none_label">No Spreads</span></button
          ><button
            title="Join page spreads starting with odd-numbered pages"
            tabindex="67"
            data-l10n-id="spread_odd"
            role="radio"
            aria-checked="false"
            data-dom-id="spreadOdd"
            class="secondaryToolbarButton spreadOdd"
          >
            <span data-l10n-id="spread_odd_label">Odd Spreads</span></button
          ><button
            title="Join page spreads starting with even-numbered pages"
            tabindex="68"
            data-l10n-id="spread_even"
            role="radio"
            aria-checked="false"
            data-dom-id="spreadEven"
            class="secondaryToolbarButton spreadEven"
          >
            <span data-l10n-id="spread_even_label">Even Spreads</span>
          </button>
        </div>
        <div class="horizontalToolbarSeparator"></div>
        <button
          title="Document Properties…"
          tabindex="69"
          data-l10n-id="document_properties"
          aria-controls="documentPropertiesDialog"
          data-dom-id="documentProperties"
          class="secondaryToolbarButton documentProperties"
        >
          <span data-l10n-id="document_properties_label"
            >Document Properties…</span
          >
        </button>
      </div>
    </div>
    <!-- secondaryToolbar -->
    <div class="toolbar">
      <div data-dom-id="toolbarContainer" class="toolbarContainer">
        <div data-dom-id="toolbarViewer" class="toolbarViewer">
          <div data-dom-id="toolbarViewerLeft" class="toolbarViewerLeft">
            <button
              title="Toggle Sidebar"
              tabindex="11"
              data-l10n-id="toggle_sidebar"
              aria-expanded="false"
              aria-controls="sidebarContainer"
              data-dom-id="sidebarToggle"
              class="toolbarButton sidebarToggle"
            >
              <span data-l10n-id="toggle_sidebar_label">Toggle Sidebar</span>
            </button>
            <div class="toolbarButtonSpacer"></div>
            <button
              title="Find in Document"
              tabindex="12"
              data-l10n-id="findbar"
              aria-expanded="false"
              aria-controls="findbar"
              data-dom-id="viewFind"
              class="toolbarButton viewFind"
            >
              <span data-l10n-id="findbar_label">Find</span>
            </button>
            <div class="splitToolbarButton hiddenSmallView">
              <button
                title="Previous Page"
                tabindex="13"
                data-l10n-id="previous"
                data-dom-id="previous"
                class="toolbarButton previous"
              >
                <span data-l10n-id="previous_label">Previous</span>
              </button>
              <div class="splitToolbarButtonSeparator"></div>
              <button
                title="Next Page"
                tabindex="14"
                data-l10n-id="next"
                data-dom-id="next"
                class="toolbarButton next"
              >
                <span data-l10n-id="next_label">Next</span>
              </button>
            </div>
            <input
              type="number"
              title="Page"
              value="1"
              min="1"
              tabindex="15"
              data-l10n-id="page"
              autocomplete="off"
              data-dom-id="pageNumber"
              class="toolbarField pageNumber"
            /><span data-dom-id="numPages" class="toolbarLabel numPages"></span>
          </div>
          <div data-dom-id="toolbarViewerRight" class="toolbarViewerRight">
            <!--#if GENERIC--><button
              title="Open File"
              tabindex="31"
              data-l10n-id="open_file"
              data-dom-id="openFile"
              class="toolbarButton hiddenLargeView openFile"
            >
              <span data-l10n-id="open_file_label">Open</span></button
            ><!--#endif--><button
              title="Print"
              tabindex="32"
              data-l10n-id="print"
              data-dom-id="print"
              class="toolbarButton hiddenMediumView print"
            >
              <span data-l10n-id="print_label">Print</span></button
            ><button
              title="Save"
              tabindex="33"
              data-l10n-id="save"
              data-dom-id="download"
              class="toolbarButton hiddenMediumView download"
            >
              <span data-l10n-id="save_label">Save</span>
            </button>
            <div class="verticalToolbarSeparator hiddenMediumView"></div>
            <div
              role="radiogroup"
              data-dom-id="editorModeButtons"
              class="splitToolbarButton toggled editorModeButtons"
            >
              <button
                disabled="disabled"
                title="Text"
                role="radio"
                aria-checked="false"
                aria-controls="editorFreeTextParamsToolbar"
                tabindex="34"
                data-l10n-id="editor_free_text2"
                data-dom-id="editorFreeText"
                class="toolbarButton editorFreeText"
              >
                <span data-l10n-id="editor_free_text2_label">Text</span></button
              ><button
                disabled="disabled"
                title="Draw"
                role="radio"
                aria-checked="false"
                aria-controls="editorInkParamsToolbar"
                tabindex="35"
                data-l10n-id="editor_ink2"
                data-dom-id="editorInk"
                class="toolbarButton editorInk"
              >
                <span data-l10n-id="editor_ink2_label">Draw</span></button
              ><button
                disabled="disabled"
                title="Add or edit images"
                role="radio"
                aria-checked="false"
                aria-controls="editorStampParamsToolbar"
                tabindex="36"
                data-l10n-id="editor_stamp1"
                data-dom-id="editorStamp"
                class="toolbarButton hidden editorStamp"
              >
                <span data-l10n-id="editor_stamp1_label"
                  >Add or edit images</span
                >
              </button>
            </div>
            <div
              data-dom-id="editorModeSeparator"
              class="verticalToolbarSeparator editorModeSeparator"
            ></div>
            <button
              title="Tools"
              tabindex="48"
              data-l10n-id="tools"
              aria-expanded="false"
              aria-controls="secondaryToolbar"
              data-dom-id="secondaryToolbarToggle"
              class="toolbarButton secondaryToolbarToggle"
            >
              <span data-l10n-id="tools_label">Tools</span>
            </button>
          </div>
          <div data-dom-id="toolbarViewerMiddle" class="toolbarViewerMiddle">
            <div class="splitToolbarButton">
              <button
                title="Zoom Out"
                tabindex="21"
                data-l10n-id="zoom_out"
                data-dom-id="zoomOut"
                class="toolbarButton zoomOut"
              >
                <span data-l10n-id="zoom_out_label">Zoom Out</span>
              </button>
              <div class="splitToolbarButtonSeparator"></div>
              <button
                title="Zoom In"
                tabindex="22"
                data-l10n-id="zoom_in"
                data-dom-id="zoomIn"
                class="toolbarButton zoomIn"
              >
                <span data-l10n-id="zoom_in_label">Zoom In</span>
              </button>
            </div>
            <span
              data-dom-id="scaleSelectContainer"
              class="dropdownToolbarButton scaleSelectContainer"
              ><select
                title="Zoom"
                tabindex="23"
                data-l10n-id="zoom"
                data-dom-id="scaleSelect"
                class="scaleSelect"
              >
                <option
                  id="pageAutoOption"
                  title=""
                  value="auto"
                  selected="selected"
                  data-l10n-id="page_scale_auto"
                >
                  Automatic Zoom
                </option>
                <option
                  id="pageActualOption"
                  title=""
                  value="page-actual"
                  data-l10n-id="page_scale_actual"
                >
                  Actual Size
                </option>
                <option
                  id="pageFitOption"
                  title=""
                  value="page-fit"
                  data-l10n-id="page_scale_fit"
                >
                  Page Fit
                </option>
                <option
                  id="pageWidthOption"
                  title=""
                  value="page-width"
                  data-l10n-id="page_scale_width"
                >
                  Page Width
                </option>
                <option
                  id="customScaleOption"
                  title=""
                  value="custom"
                  disabled="disabled"
                  hidden="true"
                ></option>
                <option
                  title=""
                  value="0.5"
                  data-l10n-id="page_scale_percent"
                  data-l10n-args='{ "scale": 50 }'
                >
                  50%
                </option>
                <option
                  title=""
                  value="0.75"
                  data-l10n-id="page_scale_percent"
                  data-l10n-args='{ "scale": 75 }'
                >
                  75%
                </option>
                <option
                  title=""
                  value="1"
                  data-l10n-id="page_scale_percent"
                  data-l10n-args='{ "scale": 100 }'
                >
                  100%
                </option>
                <option
                  title=""
                  value="1.25"
                  data-l10n-id="page_scale_percent"
                  data-l10n-args='{ "scale": 125 }'
                >
                  125%
                </option>
                <option
                  title=""
                  value="1.5"
                  data-l10n-id="page_scale_percent"
                  data-l10n-args='{ "scale": 150 }'
                >
                  150%
                </option>
                <option
                  title=""
                  value="2"
                  data-l10n-id="page_scale_percent"
                  data-l10n-args='{ "scale": 200 }'
                >
                  200%
                </option>
                <option
                  title=""
                  value="3"
                  data-l10n-id="page_scale_percent"
                  data-l10n-args='{ "scale": 300 }'
                >
                  300%
                </option>
                <option
                  title=""
                  value="4"
                  data-l10n-id="page_scale_percent"
                  data-l10n-args='{ "scale": 400 }'
                >
                  400%
                </option>
              </select></span
            >
          </div>
        </div>
        <div data-dom-id="loadingBar" class="loadingBar">
          <div class="progress"><div class="glimmer"></div></div>
        </div>
      </div>
    </div>
    <div tabindex="0" data-dom-id="viewerContainer" class="viewerContainer">
      <div data-dom-id="viewer" class="pdfViewer viewer"></div>
    </div>
  </div>
  <!-- mainContainer -->
  <div data-dom-id="dialogContainer" class="dialogContainer">
    <dialog data-dom-id="passwordDialog" class="passwordDialog">
      <div class="row"><!--Removed!--></div>
      <div class="row">
        <input
          type="password"
          data-dom-id="password"
          class="toolbarField password"
        />
      </div>
      <div class="buttonRow">
        <button
          data-dom-id="passwordCancel"
          class="dialogButton passwordCancel"
        >
          <span data-l10n-id="password_cancel">Cancel</span></button
        ><button
          data-dom-id="passwordSubmit"
          class="dialogButton passwordSubmit"
        >
          <span data-l10n-id="password_ok">OK</span>
        </button>
      </div>
    </dialog>
    <dialog
      data-dom-id="documentPropertiesDialog"
      class="documentPropertiesDialog"
    >
      <div class="row">
        <span
          data-l10n-id="document_properties_file_name"
          data-dom-id="fileNameLabel"
          class="fileNameLabel"
          >File name:</span
        >
        <p
          aria-labelledby="fileNameLabel"
          data-dom-id="fileNameField"
          class="fileNameField"
        >
          -
        </p>
      </div>
      <div class="row">
        <span
          data-l10n-id="document_properties_file_size"
          data-dom-id="fileSizeLabel"
          class="fileSizeLabel"
          >File size:</span
        >
        <p
          aria-labelledby="fileSizeLabel"
          data-dom-id="fileSizeField"
          class="fileSizeField"
        >
          -
        </p>
      </div>
      <div class="separator"></div>
      <div class="row">
        <span
          data-l10n-id="document_properties_title"
          data-dom-id="titleLabel"
          class="titleLabel"
          >Title:</span
        >
        <p
          aria-labelledby="titleLabel"
          data-dom-id="titleField"
          class="titleField"
        >
          -
        </p>
      </div>
      <div class="row">
        <span
          data-l10n-id="document_properties_author"
          data-dom-id="authorLabel"
          class="authorLabel"
          >Author:</span
        >
        <p
          aria-labelledby="authorLabel"
          data-dom-id="authorField"
          class="authorField"
        >
          -
        </p>
      </div>
      <div class="row">
        <span
          data-l10n-id="document_properties_subject"
          data-dom-id="subjectLabel"
          class="subjectLabel"
          >Subject:</span
        >
        <p
          aria-labelledby="subjectLabel"
          data-dom-id="subjectField"
          class="subjectField"
        >
          -
        </p>
      </div>
      <div class="row">
        <span
          data-l10n-id="document_properties_keywords"
          data-dom-id="keywordsLabel"
          class="keywordsLabel"
          >Keywords:</span
        >
        <p
          aria-labelledby="keywordsLabel"
          data-dom-id="keywordsField"
          class="keywordsField"
        >
          -
        </p>
      </div>
      <div class="row">
        <span
          data-l10n-id="document_properties_creation_date"
          data-dom-id="creationDateLabel"
          class="creationDateLabel"
          >Creation Date:</span
        >
        <p
          aria-labelledby="creationDateLabel"
          data-dom-id="creationDateField"
          class="creationDateField"
        >
          -
        </p>
      </div>
      <div class="row">
        <span
          data-l10n-id="document_properties_modification_date"
          data-dom-id="modificationDateLabel"
          class="modificationDateLabel"
          >Modification Date:</span
        >
        <p
          aria-labelledby="modificationDateLabel"
          data-dom-id="modificationDateField"
          class="modificationDateField"
        >
          -
        </p>
      </div>
      <div class="row">
        <span
          data-l10n-id="document_properties_creator"
          data-dom-id="creatorLabel"
          class="creatorLabel"
          >Creator:</span
        >
        <p
          aria-labelledby="creatorLabel"
          data-dom-id="creatorField"
          class="creatorField"
        >
          -
        </p>
      </div>
      <div class="separator"></div>
      <div class="row">
        <span
          data-l10n-id="document_properties_producer"
          data-dom-id="producerLabel"
          class="producerLabel"
          >PDF Producer:</span
        >
        <p
          aria-labelledby="producerLabel"
          data-dom-id="producerField"
          class="producerField"
        >
          -
        </p>
      </div>
      <div class="row">
        <span
          data-l10n-id="document_properties_version"
          data-dom-id="versionLabel"
          class="versionLabel"
          >PDF Version:</span
        >
        <p
          aria-labelledby="versionLabel"
          data-dom-id="versionField"
          class="versionField"
        >
          -
        </p>
      </div>
      <div class="row">
        <span
          data-l10n-id="document_properties_page_count"
          data-dom-id="pageCountLabel"
          class="pageCountLabel"
          >Page Count:</span
        >
        <p
          aria-labelledby="pageCountLabel"
          data-dom-id="pageCountField"
          class="pageCountField"
        >
          -
        </p>
      </div>
      <div class="row">
        <span
          data-l10n-id="document_properties_page_size"
          data-dom-id="pageSizeLabel"
          class="pageSizeLabel"
          >Page Size:</span
        >
        <p
          aria-labelledby="pageSizeLabel"
          data-dom-id="pageSizeField"
          class="pageSizeField"
        >
          -
        </p>
      </div>
      <div class="separator"></div>
      <div class="row">
        <span
          data-l10n-id="document_properties_linearized"
          data-dom-id="linearizedLabel"
          class="linearizedLabel"
          >Fast Web View:</span
        >
        <p
          aria-labelledby="linearizedLabel"
          data-dom-id="linearizedField"
          class="linearizedField"
        >
          -
        </p>
      </div>
      <div class="buttonRow">
        <button
          data-dom-id="documentPropertiesClose"
          class="dialogButton documentPropertiesClose"
        >
          <span data-l10n-id="document_properties_close">Close</span>
        </button>
      </div>
    </dialog>
    <dialog
      aria-labelledby="dialogLabel"
      aria-describedby="dialogDescription"
      data-dom-id="altTextDialog"
      class="altTextDialog"
    >
      <div data-dom-id="altTextContainer" class="altTextContainer">
        <div data-dom-id="overallDescription" class="overallDescription">
          <span
            data-l10n-id="editor_alt_text_dialog_label"
            data-dom-id="dialogLabel"
            class="title dialogLabel"
            >Choose an option</span
          ><span
            data-l10n-id="editor_alt_text_dialog_description"
            data-dom-id="dialogDescription"
            class="dialogDescription"
          >
            Alt text (alternative text) helps when people can’t see the image or
            when it doesn’t load.
          </span>
        </div>
        <div data-dom-id="addDescription" class="addDescription">
          <div class="radio">
            <div class="radioButton">
              <label
                ><input
                  type="radio"
                  name="altTextOption"
                  tabindex="0"
                  aria-describedby="descriptionAreaLabel"
                  checked=""
                  data-dom-id="descriptionButton"
                  class="descriptionButton"
                /><span
                  class="toolbarLabel"
                  data-l10n-id="editor_alt_text_add_description_label"
                  >Add a description</span
                ></label
              ><!--Removed!-->
            </div>
            <div class="radioLabel">
              <span
                data-l10n-id="editor_alt_text_add_description_description"
                data-dom-id="descriptionAreaLabel"
                class="descriptionAreaLabel"
              >
                Aim for 1-2 sentences that describe the subject, setting, or
                actions.
              </span>
            </div>
          </div>
          <div class="descriptionArea">
            <textarea
              placeholder="For example, “A young man sits down at a table to eat a meal”"
              aria-labelledby="descriptionAreaLabel"
              data-l10n-id="editor_alt_text_textarea"
              tabindex="0"
              data-dom-id="descriptionTextarea"
              class="descriptionTextarea"
            ></textarea>
          </div>
        </div>
        <div data-dom-id="markAsDecorative" class="markAsDecorative">
          <div class="radio">
            <div class="radioButton">
              <label
                ><input
                  type="radio"
                  name="altTextOption"
                  aria-describedby="decorativeLabel"
                  data-dom-id="decorativeButton"
                  class="decorativeButton"
                /><span
                  class="toolbarLabel"
                  data-l10n-id="editor_alt_text_mark_decorative_label"
                  >Mark as decorative</span
                ></label
              ><!--Removed!-->
            </div>
            <div class="radioLabel">
              <span
                data-l10n-id="editor_alt_text_mark_decorative_description"
                data-dom-id="decorativeLabel"
                class="decorativeLabel"
              >
                This is used for ornamental images, like borders or watermarks.
              </span>
            </div>
          </div>
        </div>
        <div data-dom-id="buttons" class="buttons">
          <button
            tabindex="0"
            data-dom-id="altTextCancel"
            class="altTextCancel"
          >
            <span data-l10n-id="editor_alt_text_cancel_button"
              >Cancel</span
            ></button
          ><button tabindex="0" data-dom-id="altTextSave" class="altTextSave">
            <span data-l10n-id="editor_alt_text_save_button">Save</span>
          </button>
        </div>
      </div>
    </dialog>
    <!--#if !MOZCENTRAL-->
    <dialog
      style="min-width: 200px"
      data-dom-id="printServiceDialog"
      class="printServiceDialog"
    >
      <div class="row">
        <span data-l10n-id="print_progress_message"
          >Preparing document for printing…</span
        >
      </div>
      <div class="row">
        <progress value="0" max="100"></progress
        ><span
          data-l10n-id="print_progress_percent"
          data-l10n-args='{ "progress": 0 }'
          class="relative-progress"
          >0%</span
        >
      </div>
      <div class="buttonRow">
        <button data-dom-id="printCancel" class="dialogButton printCancel">
          <span data-l10n-id="print_progress_close">Cancel</span>
        </button>
      </div>
    </dialog>
    <!--#endif--><!--#if CHROME--><!--#include viewer-snippet-chrome-overlays.html--><!--#endif-->
  </div>
  <!-- dialogContainer -->
</div>
<!-- outerContainer -->
<div data-dom-id="printContainer" class="printContainer"></div>
<!--#if GENERIC--><input
  type="file"
  data-dom-id="fileInput"
  class="hidden fileInput"
/><!--#endif-->
`;let r;function a(){if(!r){const E=document.createElement("template");E.innerHTML=m,r=E.content}return document.importNode(r,!0)}var T=a;_.default=T}],n={};function f(k){var _=n[k];if(_!==void 0)return _.exports;var m=n[k]={exports:{}};return l[k](m,m.exports,f),m.exports}var I={};return(()=>{var m;var k=I;Object.defineProperty(k,"__esModule",{value:!0}),Object.defineProperty(k,"createViewerApp",{enumerable:!0,get:function(){return _.createViewerApp}}),Object.defineProperty(k,"getViewerConfiguration",{enumerable:!0,get:function(){return _.getViewerConfiguration}});var _=f(1);(m=document.blockUnblockOnload)==null||m.call(document,!0)})(),I})())})(app$1);var appExports=app$1.exports;const viewer="";let src$1="./document-viewer/web/compressed.tracemonkey-pldi-09.pdf";const appOptions$1={src:src$1,resourcePath:"document-viewer",disableCORSCheck:!0,disableAutoSetTitle:!0};function injectApp(e){return console.log("injectApp",e),appExports.createViewerApp({parent:e,...appOptions$1})}const CustomToolbar_vue_vue_type_style_index_0_scoped_e7dda392_lang="",_withScopeId=e=>(pushScopeId("data-v-e7dda392"),e=e(),popScopeId(),e),_hoisted_1$1={class:"pdf-viewer"},_hoisted_2$1={class:"viewer-header"},_hoisted_3$1=_withScopeId(()=>createBaseVNode("svg",{viewBox:"0 0 24 24",width:"22",height:"22",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[createBaseVNode("path",{d:"M4 6H20V8H4V6ZM4 11H20V13H4V11ZM4 16H20V18H4V16Z",fill:"black"})],-1)),_hoisted_4$1=[_hoisted_3$1],_hoisted_5={class:"header-item"},_hoisted_6=_withScopeId(()=>createBaseVNode("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 12 12",width:"22",height:"22"},[createBaseVNode("path",{d:"M7.5,2l-4,4,4,4,1-1-3-3,3-3Z"})],-1)),_hoisted_7=[_hoisted_6],_hoisted_8=["value"],_hoisted_9=_withScopeId(()=>createBaseVNode("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 12 12",width:"22",height:"22"},[createBaseVNode("path",{d:"M4.5,10l4-4-4-4-1,1,3,3-3,3Z"})],-1)),_hoisted_10=[_hoisted_9],_sfc_main$1={__name:"CustomToolbar",setup(e){const t=ref(null),l=shallowRef(null),n=ref(1);onMounted(function(){l.value=injectApp(t.value),l.value.initializedPromise.then(function(){l.value.eventBus.on("pagechanging",function(m){n.value=m.pageNumber})})});function f(){l.value.pdfSidebar.toggle()}function I(){l.value.eventBus.dispatch("previouspage")}function k(){l.value.eventBus.dispatch("nextpage")}function _(m){const r=parseInt(m.target.value,10);l.value.pdfViewer.currentPageNumber=r}return(m,r)=>(openBlock(),createElementBlock("div",_hoisted_1$1,[createBaseVNode("div",_hoisted_2$1,[createBaseVNode("div",{class:"header-item"},[createBaseVNode("button",{onClick:f,class:"menu-outline header-icon"},_hoisted_4$1)]),createBaseVNode("div",_hoisted_5,[createBaseVNode("button",{onClick:I,class:"prev-page header-icon"},_hoisted_7),createBaseVNode("input",{class:"page-input",type:"text",value:n.value,onChange:_},null,40,_hoisted_8),createBaseVNode("button",{onClick:k,class:"next-page header-icon"},_hoisted_10)])]),createBaseVNode("div",{ref_key:"el$",ref:t,class:"viewer-content"},null,512)]))}},CustomToolbar=_export_sfc(_sfc_main$1,[["__scopeId","data-v-e7dda392"]]);let src="./document-viewer/web/compressed.tracemonkey-pldi-09.pdf";const appOptions={src,resourcePath:"document-viewer",disableCORSCheck:!0,disableAutoSetTitle:!0};function injectApps(){appExports.createViewerApp({parent:document.getElementById("app1"),...appOptions}),appExports.createViewerApp({parent:document.getElementById("app2"),...appOptions})}const MultipleFiles_vue_vue_type_style_index_0_lang="",_hoisted_1={class:"main"},_hoisted_2=createBaseVNode("div",{id:"app1"},null,-1),_hoisted_3=createBaseVNode("div",{id:"app2"},null,-1),_hoisted_4=[_hoisted_2,_hoisted_3],_sfc_main={__name:"MultipleFiles",setup(e){return onMounted(function(){injectApps()}),(t,l)=>(openBlock(),createElementBlock("div",_hoisted_1,_hoisted_4))}},router=createRouter({history:createWebHashHistory("/document-viewer/demos/"),routes:[{path:"/",name:"home",redirect:"/custom-toolbar"},{path:"/custom-toolbar",name:"customToolbar",component:CustomToolbar},{path:"/multiple-pdf-files",name:"multiplePDFFiles",component:_sfc_main}]}),app=createApp(App);app.use(router);app.mount("#app");
